/*! For license information please see scripts.def6afabd7d6c4703bdd.js.LICENSE.txt */
(function(){var e,t,n,i,o,r,a,s,l,u,c,d,f,h,g,p,m,v,y,b,T,C,E,_,x,I,D,w,O,R,k,S,A,N,M,K,P,L,B,F,z,H,V,W,$,q,U,j,G=[].slice,X={}.hasOwnProperty,Y=function(e,t){function n(){this.constructor=e}for(var i in t)X.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},Z=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};for(T={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},O=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?e:+new Date},k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,b=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==k&&(k=function(e){return setTimeout(e,50)},b=function(e){return clearTimeout(e)}),A=function(e){var t,n;return t=O(),(n=function(){var i;return(i=O()-t)>=33?(t=O(),e(i,(function(){return k(n)}))):setTimeout(n,33-i)})()},S=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?G.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,e):n[t]},C=function(){var e,t,n,i,o,r,a;for(t=arguments[0],r=0,a=(i=2<=arguments.length?G.call(arguments,1):[]).length;a>r;r++)if(n=i[r])for(e in n)X.call(n,e)&&(o=n[e],null!=t[e]&&"object"==typeof t[e]&&null!=o&&"object"==typeof o?C(t[e],o):t[e]=o);return t},m=function(e){var t,n,i,o;for(n=t=0,i=0,o=e.length;o>i;i++)n+=Math.abs(e[i]),t++;return n/t},_=function(e,t){var n,i;if(null==e&&(e="options"),null==t&&(t=!0),i=document.querySelector("[data-pace-"+e+"]")){if(n=i.getAttribute("data-pace-"+e),!t)return n;try{return JSON.parse(n)}catch(r){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},a=function(){function e(){}return e.prototype.on=function(e,t,n,i){var o;return null==i&&(i=!1),null==this.bindings&&(this.bindings={}),null==(o=this.bindings)[e]&&(o[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:i})},e.prototype.once=function(e,t,n){return this.on(e,t,n,!0)},e.prototype.off=function(e,t){var n,i,o;if(null!=(null!=(i=this.bindings)?i[e]:void 0)){if(null==t)return delete this.bindings[e];for(n=0,o=[];n<this.bindings[e].length;)o.push(this.bindings[e][n].handler===t?this.bindings[e].splice(n,1):n++);return o}},e.prototype.trigger=function(){var e,t,n,i,o,r,a,s;if(n=arguments[0],e=2<=arguments.length?G.call(arguments,1):[],null!=(r=this.bindings)?r[n]:void 0){for(i=0,s=[];i<this.bindings[n].length;)o=(a=this.bindings[n][i]).once,a.handler.apply(null!=(t=a.ctx)?t:this,e),s.push(o?this.bindings[n].splice(i,1):i++);return s}},e}(),u=window.Pace||{},window.Pace=u,C(u,a.prototype),R=u.options=C({},T,window.paceOptions,_()),V=0,$=(U=["ajax","document","eventLag","elements"]).length;$>V;V++)!0===R[P=U[V]]&&(R[P]=T[P]);l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Y(t,e),t}(Error),t=function(){function e(){this.progress=0}return e.prototype.getElement=function(){var e;if(null==this.el){if(!(e=document.querySelector(R.target)))throw new l;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=e.firstChild?e.insertBefore(this.el,e.firstChild):e.appendChild(this.el)}return this.el},e.prototype.finish=function(){var e;return(e=this.getElement()).className=e.className.replace("pace-active",""),e.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},e.prototype.update=function(e){return this.progress=e,this.render()},e.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(e){l=e}return this.el=void 0},e.prototype.render=function(){var e,t,n,i,o,r;if(null==document.querySelector(R.target))return!1;for(e=this.getElement(),n="translate3d("+this.progress+"%, 0, 0)",i=0,o=(r=["webkitTransform","msTransform","transform"]).length;o>i;i++)e.children[0].style[r[i]]=n;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(e.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?t="99":(t=this.progress<10?"0":"",t+=0|this.progress),e.children[0].setAttribute("data-progress",""+t)),this.lastRenderedProgress=this.progress},e.prototype.done=function(){return this.progress>=100},e}(),s=function(){function e(){this.bindings={}}return e.prototype.trigger=function(e,t){var n,i,o,r;if(null!=this.bindings[e]){for(r=[],n=0,i=(o=this.bindings[e]).length;i>n;n++)r.push(o[n].call(this,t));return r}},e.prototype.on=function(e,t){var n;return null==(n=this.bindings)[e]&&(n[e]=[]),this.bindings[e].push(t)},e}(),H=window.XMLHttpRequest,z=window.XDomainRequest,F=window.WebSocket,E=function(e,t){var n,i;for(n in i=[],t.prototype)try{i.push(null==e[n]&&"function"!=typeof t[n]?"function"==typeof Object.defineProperty?Object.defineProperty(e,n,{get:function(){return t.prototype[n]},configurable:!0,enumerable:!0}):e[n]=t.prototype[n]:void 0)}catch(r){}return i},D=[],u.ignore=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?G.call(arguments,1):[],D.unshift("ignore"),n=t.apply(null,e),D.shift(),n},u.track=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?G.call(arguments,1):[],D.unshift("track"),n=t.apply(null,e),D.shift(),n},K=function(e){var t;if(null==e&&(e="GET"),"track"===D[0])return"force";if(!D.length&&R.ajax){if("socket"===e&&R.ajax.trackWebSockets)return!0;if(t=e.toUpperCase(),Z.call(R.ajax.trackMethods,t)>=0)return!0}return!1},c=function(e){function t(){var e,n=this;t.__super__.constructor.apply(this,arguments),e=function(e){var t;return t=e.open,e.open=function(i,o,r){return K(i)&&n.trigger("request",{type:i,url:o,request:e}),t.apply(e,arguments)}},window.XMLHttpRequest=function(t){var n;return n=new H(t),e(n),n};try{E(window.XMLHttpRequest,H)}catch(i){}if(null!=z){window.XDomainRequest=function(){var t;return t=new z,e(t),t};try{E(window.XDomainRequest,z)}catch(i){}}if(null!=F&&R.ajax.trackWebSockets){window.WebSocket=function(e,t){var i;return i=null!=t?new F(e,t):new F(e),K("socket")&&n.trigger("request",{type:"socket",url:e,protocols:t,request:i}),i};try{E(window.WebSocket,F)}catch(i){}}}return Y(t,e),t}(s),W=null,M=function(e){var t,n,i,o;for(n=0,i=(o=R.ajax.ignoreURLs).length;i>n;n++)if("string"==typeof(t=o[n])){if(-1!==e.indexOf(t))return!0}else if(t.test(e))return!0;return!1},(x=function(){return null==W&&(W=new c),W})().on("request",(function(t){var n,i,o,r;return r=t.type,o=t.request,M(t.url)||u.running||!1===R.restartOnRequestAfter&&"force"!==K(r)?void 0:(i=arguments,"boolean"==typeof(n=R.restartOnRequestAfter||0)&&(n=0),setTimeout((function(){var t,n,a,s,l;if("socket"===r?o.readyState<2:0<(a=o.readyState)&&4>a){for(u.restart(),l=[],t=0,n=(s=u.sources).length;n>t;t++){if((P=s[t])instanceof e){P.watch.apply(P,i);break}l.push(void 0)}return l}}),n))})),e=function(){function e(){var e=this;this.elements=[],x().on("request",(function(){return e.watch.apply(e,arguments)}))}return e.prototype.watch=function(e){var t,n,i;return i=e.type,t=e.request,M(e.url)?void 0:(n="socket"===i?new h(t):new g(t),this.elements.push(n))},e}(),g=function(e){var t,n,i,o,r=this;if(this.progress=0,null!=window.ProgressEvent)for(e.addEventListener("progress",(function(e){return r.progress=e.lengthComputable?100*e.loaded/e.total:r.progress+(100-r.progress)/2}),!1),t=0,n=(o=["load","abort","timeout","error"]).length;n>t;t++)e.addEventListener(o[t],(function(){return r.progress=100}),!1);else i=e.onreadystatechange,e.onreadystatechange=function(){var t;return 0===(t=e.readyState)||4===t?r.progress=100:3===e.readyState&&(r.progress=50),"function"==typeof i?i.apply(null,arguments):void 0}},h=function(e){var t,n,i,o=this;for(this.progress=0,t=0,n=(i=["error","open"]).length;n>t;t++)e.addEventListener(i[t],(function(){return o.progress=100}),!1)},i=function(e){var t,n,i;for(null==e&&(e={}),this.elements=[],null==e.selectors&&(e.selectors=[]),t=0,n=(i=e.selectors).length;n>t;t++)this.elements.push(new o(i[t]))},o=function(){function e(e){this.selector=e,this.progress=0,this.check()}return e.prototype.check=function(){var e=this;return document.querySelector(this.selector)?this.done():setTimeout((function(){return e.check()}),R.elements.checkInterval)},e.prototype.done=function(){return this.progress=100},e}(),n=function(){function e(){var e,t,n=this;this.progress=null!=(t=this.states[document.readyState])?t:100,e=document.onreadystatechange,document.onreadystatechange=function(){return null!=n.states[document.readyState]&&(n.progress=n.states[document.readyState]),"function"==typeof e?e.apply(null,arguments):void 0}}return e.prototype.states={loading:0,interactive:50,complete:100},e}(),r=function(){var e,t,n,i,o,r=this;this.progress=0,e=0,o=[],i=0,n=O(),t=setInterval((function(){var a;return a=O()-n-50,n=O(),o.push(a),o.length>R.eventLag.sampleCount&&o.shift(),e=m(o),++i>=R.eventLag.minSamples&&e<R.eventLag.lagThreshold?(r.progress=100,clearInterval(t)):r.progress=3/(e+3)*100}),50)},f=function(){function e(e){this.source=e,this.last=this.sinceLastUpdate=0,this.rate=R.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=S(this.source,"progress"))}return e.prototype.tick=function(e,t){var n;return null==t&&(t=S(this.source,"progress")),t>=100&&(this.done=!0),t===this.last?this.sinceLastUpdate+=e:(this.sinceLastUpdate&&(this.rate=(t-this.last)/this.sinceLastUpdate),this.catchup=(t-this.progress)/R.catchupTime,this.sinceLastUpdate=0,this.last=t),t>this.progress&&(this.progress+=this.catchup*e),n=1-Math.pow(this.progress/100,R.easeFactor),this.progress+=n*this.rate*e,this.progress=Math.min(this.lastProgress+R.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},e}(),L=null,N=null,v=null,B=null,p=null,y=null,u.running=!1,I=function(){return R.restartOnPushState?u.restart():void 0},null!=window.history.pushState&&(q=window.history.pushState,window.history.pushState=function(){return I(),q.apply(window.history,arguments)}),null!=window.history.replaceState&&(j=window.history.replaceState,window.history.replaceState=function(){return I(),j.apply(window.history,arguments)}),d={ajax:e,elements:i,document:n,eventLag:r},(w=function(){var e,n,i,o,r,a,s,l;for(u.sources=L=[],n=0,o=(a=["ajax","elements","document","eventLag"]).length;o>n;n++)!1!==R[e=a[n]]&&L.push(new d[e](R[e]));for(i=0,r=(l=null!=(s=R.extraSources)?s:[]).length;r>i;i++)L.push(new(P=l[i])(R));return u.bar=v=new t,N=[],B=new f})(),u.stop=function(){return u.trigger("stop"),u.running=!1,v.destroy(),y=!0,null!=p&&("function"==typeof b&&b(p),p=null),w()},u.restart=function(){return u.trigger("restart"),u.stop(),u.start()},u.go=function(){var e;return u.running=!0,v.render(),e=O(),y=!1,p=A((function(t,n){var i,o,r,a,s,l,c,d,h,g,p,m,b;for(i=d=0,o=!0,a=h=0,p=L.length;p>h;a=++h)for(P=L[a],c=null!=N[a]?N[a]:N[a]=[],s=g=0,m=(r=null!=(b=P.elements)?b:[P]).length;m>g;s=++g)o&=(l=null!=c[s]?c[s]:c[s]=new f(r[s])).done,l.done||(i++,d+=l.tick(t));return v.update(B.tick(t,d/i)),v.done()||o||y?(v.update(100),u.trigger("done"),setTimeout((function(){return v.finish(),u.running=!1,u.trigger("hide")}),Math.max(R.ghostTime,Math.max(R.minTime-(O()-e),0)))):n()}))},u.start=function(e){C(R,e),u.running=!0;try{v.render()}catch(t){l=t}return document.querySelector(".pace")?(u.trigger("start"),u.go()):setTimeout(u.start,50)},"function"==typeof define&&define.amd?define(["pace"],(function(){return u})):"object"==typeof exports?module.exports=u:R.startOnPageLoad&&u.start()}).call(this),function(e){"use strict";var t=function(){},n=function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t.apply(null,n))}},i=function(e){return function(){return e}},o=function(e){return e};function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=t.concat(n);return e.apply(null,o)}}var a,s,l,u,c,d,f,h,g,p,m,v,y,b,T,C,E=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},_=i(!1),x=i(!0),I=function(){return D},D=(a=function(e){return e.isNone()},u={fold:function(e,t){return e()},is:_,isSome:_,isNone:x,getOr:l=function(e){return e},getOrThunk:s=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:l,orThunk:s,map:I,each:t,bind:I,exists:_,forall:x,filter:I,equals:a,equals_:a,toArray:function(){return[]},toString:i("none()")},Object.freeze&&Object.freeze(u),u),w=function(e){var t=i(e),n=function(){return r},o=function(t){return t(e)},r={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:x,isNone:_,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return w(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?r:D},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(_,(function(t){return n(e,t)}))}};return r},O={some:w,none:I,from:function(e){return null==e?D:w(e)}},R=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},k=R("string"),S=R("object"),A=R("array"),N=R("null"),M=R("boolean"),K=R("function"),P=R("number"),L=Array.prototype.slice,B=Array.prototype.indexOf,F=Array.prototype.push,z=function(e,t){return B.call(e,t)},H=function(e,t){return-1<z(e,t)},V=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n))return!0;return!1},W=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t(e[o],o);return i},$=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},q=function(e,t){for(var n=[],i=[],o=0,r=e.length;o<r;o++){var a=e[o];(t(a,o)?n:i).push(a)}return{pass:n,fail:i}},U=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];t(r,i)&&n.push(r)}return n},j=function(e,t,n){return $(e,(function(e){n=t(n,e)})),n},G=function(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(t(o,n))return O.some(o)}return O.none()},X=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n))return O.some(n);return O.none()},Y=function(e,t){return function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!A(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);F.apply(t,e[n])}return t}(W(e,t))},Z=function(e,t){for(var n=0,i=e.length;n<i;++n)if(!0!==t(e[n],n))return!1;return!0},J=function(e,t){return U(e,(function(e){return!H(t,e)}))},Q=function(e){return 0===e.length?O.none():O.some(e[0])},ee=function(e){return 0===e.length?O.none():O.some(e[e.length-1])},te=K(Array.from)?Array.from:function(e){return L.call(e)},ne=void 0!==e.window?e.window:Function("return this;")(),ie=function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:ne,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},oe=function(){return ie("URL")},re=function(e){return oe().createObjectURL(e)},ae=function(e){oe().revokeObjectURL(e)},se=e.navigator,le=se.userAgent,ue=function(t){return"matchMedia"in e.window&&e.matchMedia(t).matches};v=/Android/.test(le),d=(d=!(c=/WebKit/.test(le))&&/MSIE/gi.test(le)&&/Explorer/gi.test(se.appName))&&/MSIE (\w+)\./.exec(le)[1],f=-1!==le.indexOf("Trident/")&&(-1!==le.indexOf("rv:")||-1!==se.appName.indexOf("Netscape"))&&11,h=-1!==le.indexOf("Edge/")&&!d&&!f&&12,d=d||f||h,g=!c&&!f&&/Gecko/.test(le),p=-1!==le.indexOf("Mac"),m=/(iPad|iPhone)/.test(le),y="FormData"in e.window&&"FileReader"in e.window&&"URL"in e.window&&!!re,b=ue("only screen and (max-device-width: 480px)")&&(v||m),T=ue("only screen and (min-width: 800px)")&&(v||m),C=-1!==le.indexOf("Windows Phone"),h&&(c=!1);var ce,de={opera:!1,webkit:c,ie:d,gecko:g,mac:p,iOS:m,android:v,contentEditable:!m||y||534<=parseInt(le.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==d,range:e.window.getSelection&&"Range"in e.window,documentMode:d&&!h?e.document.documentMode||7:10,fileApi:y,ceFalse:!1===d||8<d,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===d||11<d,desktop:!b&&!T,windowsPhone:C},fe=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,e(r,this),e(a,this))},i=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function o(e){var t=this;null!==this._state?i((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(l){return void e.reject(l)}e.resolve(i)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void c(e(n,t),e(r,this),e(a,this))}this._state=!0,this._value=t,s.call(this)}catch(l){a.call(this,l)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function c(e,t,n){var i=!1;try{e((function(e){i||(i=!0,t(e))}),(function(e){i||(i=!0,n(e))}))}catch(r){if(i)return;i=!0,n(r)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var i=this;return new n((function(n,r){o.call(i,new u(e,t,n,r))}))},n.all=function(){var i=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n((function(t,n){if(0===i.length)return t([]);var o=i.length;function r(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,(function(e){r(a,e)}),n)}i[a]=s,0==--o&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)r(a,i[a])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,n){n(e)}))},n.race=function(e){return new n((function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)}))},n}(),he=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},ge=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},pe=function(e,t){var n,i;return(i=function(){var i=arguments;clearTimeout(n),n=he((function(){e.apply(this,i)}),t)}).stop=function(){clearTimeout(n)},i},me={requestAnimationFrame:function(t,n){ce?ce.then(t):ce=new fe((function(t){n||(n=e.document.body),function(t,n){var i,o=e.window.requestAnimationFrame,r=["ms","moz","webkit"];for(i=0;i<r.length&&!o;i++)o=e.window[r[i]+"RequestAnimationFrame"];o||(o=function(t){e.window.setTimeout(t,0)}),o(t,n)}(t,n)})).then(t)},setTimeout:he,setInterval:ge,setEditorTimeout:function(e,t,n){return he((function(){e.removed||t()}),n)},setEditorInterval:function(e,t,n){var i;return i=ge((function(){e.removed?clearInterval(i):t()}),n)},debounce:pe,throttle:pe,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},ve=/^(?:mouse|contextmenu)|click/,ye={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},be=function(){return!1},Te=function(){return!0},Ce=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ee=function(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)},_e=function(t,n){var i,o,r=n||{};for(i in t)ye[i]||(r[i]=t[i]);if(r.target||(r.target=r.srcElement||e.document),de.experimentalShadowDom&&(r.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&0<n.length)return n[0]}return t}(t,r.target)),t&&ve.test(t.type)&&void 0===t.pageX&&void 0!==t.clientX){var a=r.target.ownerDocument||e.document,s=a.documentElement,l=a.body;r.pageX=t.clientX+(s&&s.scrollLeft||l&&l.scrollLeft||0)-(s&&s.clientLeft||l&&l.clientLeft||0),r.pageY=t.clientY+(s&&s.scrollTop||l&&l.scrollTop||0)-(s&&s.clientTop||l&&l.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=Te,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=Te,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},!(r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Te,r.stopPropagation()})==((o=r).isDefaultPrevented===Te||o.isDefaultPrevented===be)&&(r.isDefaultPrevented=be,r.isPropagationStopped=be,r.isImmediatePropagationStopped=be),void 0===r.metaKey&&(r.metaKey=!1),r},xe=function(e,t,n){var i=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var r=function(){return"complete"===i.readyState||"interactive"===i.readyState&&i.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(o))},s=function(){r()&&(Ee(i,"readystatechange",s),a())},l=function(){try{i.documentElement.doScroll("left")}catch(e){return void me.setTimeout(l)}a()};!i.addEventListener||de.ie&&de.ie<11?(Ce(i,"readystatechange",s),i.documentElement.doScroll&&e.self===e.top&&l()):r()?a():Ce(e,"DOMContentLoaded",a),Ce(e,"load",a)}},Ie=function(){var t,n,i,o,a,s=this,l={};n="mce-data-"+(+new Date).toString(32),o="onmouseenter"in e.document.documentElement,i="onfocusin"in e.document.documentElement,a={mouseenter:"mouseover",mouseleave:"mouseout"},t=1,s.domLoaded=!1,s.events=l;var u=function(e,t){var n,i,o,r,a=l[t];if(n=a&&a[e.type])for(i=0,o=n.length;i<o;i++)if((r=n[i])&&!1===r.func.call(r.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};s.bind=function(r,c,d,f){var h,g,p,m,v,y,b,T=e.window,C=function(e){u(_e(e||T.event),h)};if(r&&3!==r.nodeType&&8!==r.nodeType){for(r[n]?h=r[n]:(h=t++,r[n]=h,l[h]={}),f=f||r,p=(c=c.split(" ")).length;p--;)y=C,v=b=!1,"DOMContentLoaded"===(m=c[p])&&(m="ready"),s.domLoaded&&"ready"===m&&"complete"===r.readyState?d.call(f,_e({type:m})):(o||(v=a[m])&&(y=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=_e(e||T.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,u(e,h))}),i||"focusin"!==m&&"focusout"!==m||(b=!0,v="focusin"===m?"focus":"blur",y=function(e){(e=_e(e||T.event)).type="focus"===e.type?"focusin":"focusout",u(e,h)}),(g=l[h][m])?"ready"===m&&s.domLoaded?d({type:m}):g.push({func:d,scope:f}):(l[h][m]=g=[{func:d,scope:f}],g.fakeName=v,g.capture=b,g.nativeHandler=y,"ready"===m?xe(r,y,s):Ce(r,v||m,y,b)));return r=g=0,d}},s.unbind=function(e,t,i){var o,a,u,c,d,f;if(!e||3===e.nodeType||8===e.nodeType)return s;if(o=e[n]){if(f=l[o],t){for(u=(t=t.split(" ")).length;u--;)if(a=f[d=t[u]]){if(i)for(c=a.length;c--;)if(a[c].func===i){var h=a.nativeHandler,g=a.fakeName,p=a.capture;(a=a.slice(0,c).concat(a.slice(c+1))).nativeHandler=h,a.fakeName=g,a.capture=p,f[d]=a}i&&0!==a.length||(delete f[d],Ee(e,a.fakeName||d,a.nativeHandler,a.capture))}}else{for(d in f)Ee(e,(a=f[d]).fakeName||d,a.nativeHandler,a.capture);f={}}for(d in f)return s;delete l[o];try{delete e[n]}catch(r){e[n]=null}}return s},s.fire=function(e,t,i){var o;if(!e||3===e.nodeType||8===e.nodeType)return s;for((i=_e(null,i)).type=t,i.target=e;(o=e[n])&&u(i,o),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!i.isPropagationStopped(););return s},s.clean=function(e){var t,i,o=s.unbind;if(!e||3===e.nodeType||8===e.nodeType)return s;if(e[n]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),t=(i=e.getElementsByTagName("*")).length;t--;)(e=i[t])[n]&&o(e);return s},s.destroy=function(){l={}},s.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};(Ie.Event=new Ie).bind(e.window,"ready",(function(){}));var De,we,Oe,Re,ke,Se,Ae,Ne,Me,Ke,Pe,Le,Be,Fe,ze,He,Ve,We,$e="sizzle"+-new Date,qe=e.window.document,Ue=0,je=0,Ge=Dt(),Xe=Dt(),Ye=Dt(),Ze=function(e,t){return e===t&&(Pe=!0),0},Je="undefined",Qe={}.hasOwnProperty,et=[],tt=et.pop,nt=et.push,it=et.push,ot=et.slice,rt=et.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},at="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",lt="\\["+at+"*("+st+")(?:"+at+"*([*^$|!~]?=)"+at+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+at+"*\\]",ut=":("+st+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+lt+")*)|.*)\\)|)",ct=new RegExp("^"+at+"+|((?:^|[^\\\\])(?:\\\\.)*)"+at+"+$","g"),dt=new RegExp("^"+at+"*,"+at+"*"),ft=new RegExp("^"+at+"*([>+~]|"+at+")"+at+"*"),ht=new RegExp("="+at+"*([^\\]'\"]*?)"+at+"*\\]","g"),gt=new RegExp(ut),pt=new RegExp("^"+st+"$"),mt={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st+"|[*])"),ATTR:new RegExp("^"+lt),PSEUDO:new RegExp("^"+ut),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+at+"*(even|odd|(([+-]|)(\\d*)n|)"+at+"*(?:([+-]|)"+at+"*(\\d+)|))"+at+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+at+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+at+"*((?:-\\d)?\\d*)"+at+"*\\)|)(?=[^-]|$)","i")},vt=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,bt=/^[^{]+\{\s*\[native \w/,Tt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ct=/[+~]/,Et=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+at+"?|("+at+")|.)","ig"),xt=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{it.apply(et=ot.call(qe.childNodes),qe.childNodes)}catch(iT){it={apply:et.length?function(e,t){nt.apply(e,ot.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}var It=function(e,t,n,i){var o,r,a,s,l,u,c,d,f,h;if((t?t.ownerDocument||t:qe)!==Be&&Le(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=(t=t||Be).nodeType)&&9!==s)return[];if(ze&&!i){if(o=Tt.exec(e))if(a=o[1]){if(9===s){if(!(r=t.getElementById(a))||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&We(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return it.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&we.getElementsByClassName)return it.apply(n,t.getElementsByClassName(a)),n}if(we.qsa&&(!He||!He.test(e))){if(d=c=$e,f=t,h=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=Se(e),(c=t.getAttribute("id"))?d=c.replace(Et,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+Mt(u[l]);f=Ct.test(e)&&At(t.parentNode)||t,h=u.join(",")}if(h)try{return it.apply(n,f.querySelectorAll(h)),n}catch(y){}finally{c||t.removeAttribute("id")}}}return Ne(e.replace(ct,"$1"),t,n,i)};function Dt(){var e=[];return function t(n,i){return e.push(n+" ")>Oe.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function wt(e){return e[$e]=!0,e}function Ot(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Rt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function kt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function St(e){return wt((function(t){return t=+t,wt((function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))}))}))}function At(e){return e&&typeof e.getElementsByTagName!==Je&&e}for(De in we=It.support={},ke=It.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Le=It.setDocument=function(e){var t,n=e?e.ownerDocument||e:qe,i=n.defaultView;return n!==Be&&9===n.nodeType&&n.documentElement?(Fe=(Be=n).documentElement,ze=!ke(n),i&&i!==function(e){try{return e.top}catch(t){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",(function(){Le()}),!1):i.attachEvent&&i.attachEvent("onunload",(function(){Le()}))),we.attributes=!0,we.getElementsByTagName=!0,we.getElementsByClassName=bt.test(n.getElementsByClassName),we.getById=!0,Oe.find.ID=function(e,t){if(typeof t.getElementById!==Je&&ze){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Oe.filter.ID=function(e){var t=e.replace(_t,xt);return function(e){return e.getAttribute("id")===t}},Oe.find.TAG=we.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Je)return t.getElementsByTagName(e)}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},Oe.find.CLASS=we.getElementsByClassName&&function(e,t){if(ze)return t.getElementsByClassName(e)},Ve=[],He=[],we.disconnectedMatch=!0,He=He.length&&new RegExp(He.join("|")),Ve=Ve.length&&new RegExp(Ve.join("|")),t=bt.test(Fe.compareDocumentPosition),We=t||bt.test(Fe.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Ze=t?function(e,t){if(e===t)return Pe=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!we.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===qe&&We(qe,e)?-1:t===n||t.ownerDocument===qe&&We(qe,t)?1:Ke?rt.call(Ke,e)-rt.call(Ke,t):0:4&i?-1:1)}:function(e,t){if(e===t)return Pe=!0,0;var i,o=0,r=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!r||!a)return e===n?-1:t===n?1:r?-1:a?1:Ke?rt.call(Ke,e)-rt.call(Ke,t):0;if(r===a)return Ot(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;s[o]===l[o];)o++;return o?Ot(s[o],l[o]):s[o]===qe?-1:l[o]===qe?1:0},n):Be},It.matches=function(e,t){return It(e,null,null,t)},It.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Be&&Le(e),t=t.replace(ht,"='$1']"),we.matchesSelector&&ze&&(!Ve||!Ve.test(t))&&(!He||!He.test(t)))try{var n=(void 0).call(e,t);if(n||we.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(iT){}return 0<It(t,Be,null,[e]).length},It.contains=function(e,t){return(e.ownerDocument||e)!==Be&&Le(e),We(e,t)},It.attr=function(e,t){(e.ownerDocument||e)!==Be&&Le(e);var n=Oe.attrHandle[t.toLowerCase()],i=n&&Qe.call(Oe.attrHandle,t.toLowerCase())?n(e,t,!ze):void 0;return void 0!==i?i:we.attributes||!ze?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},It.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},It.uniqueSort=function(e){var t,n=[],i=0,o=0;if(Pe=!we.detectDuplicates,Ke=!we.sortStable&&e.slice(0),e.sort(Ze),Pe){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return Ke=null,e},Re=It.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Re(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=Re(t);return n},(Oe=It.selectors={cacheLength:50,createPseudo:wt,match:mt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_t,xt),e[3]=(e[3]||e[4]||e[5]||"").replace(_t,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||It.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&It.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return mt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&gt.test(n)&&(t=Se(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_t,xt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Ge[e+" "];return t||(t=new RegExp("(^|"+at+")"+e+"("+at+"|$)"))&&Ge(e,(function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Je&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=It.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&-1<o.indexOf(n):"$="===t?n&&o.slice(-n.length)===n:"~="===t?-1<(" "+o+" ").indexOf(n):"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,h,g,p=r!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(m){if(r){for(;p;){for(d=t;d=d[p];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;g=p="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?m.firstChild:m.lastChild],a&&y){for(h=(u=(c=m[$e]||(m[$e]={}))[e]||[])[0]===Ue&&u[1],f=u[0]===Ue&&u[2],d=h&&m.childNodes[h];d=++h&&d&&d[p]||(f=h=0)||g.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[Ue,h,f];break}}else if(y&&(u=(t[$e]||(t[$e]={}))[e])&&u[0]===Ue)f=u[1];else for(;(d=++h&&d&&d[p]||(f=h=0)||g.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[$e]||(d[$e]={}))[e]=[Ue,f]),d!==t)););return(f-=o)===i||f%i==0&&0<=f/i}}},PSEUDO:function(e,t){var n,i=Oe.pseudos[e]||Oe.setFilters[e.toLowerCase()]||It.error("unsupported pseudo: "+e);return i[$e]?i(t):1<i.length?(n=[e,e,"",t],Oe.setFilters.hasOwnProperty(e.toLowerCase())?wt((function(e,n){for(var o,r=i(e,t),a=r.length;a--;)e[o=rt.call(e,r[a])]=!(n[o]=r[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:wt((function(e){var t=[],n=[],i=Ae(e.replace(ct,"$1"));return i[$e]?wt((function(e,t,n,o){for(var r,a=i(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))})):function(e,o,r){return t[0]=e,i(t,null,r,n),!n.pop()}})),has:wt((function(e){return function(t){return 0<It(e,t).length}})),contains:wt((function(e){return e=e.replace(_t,xt),function(t){return-1<(t.textContent||t.innerText||Re(t)).indexOf(e)}})),lang:wt((function(e){return pt.test(e||"")||It.error("unsupported lang: "+e),e=e.replace(_t,xt).toLowerCase(),function(t){var n;do{if(n=ze?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.window.location&&e.window.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===Fe},focus:function(e){return e===Be.activeElement&&(!Be.hasFocus||Be.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Oe.pseudos.empty(e)},header:function(e){return yt.test(e.nodeName)},input:function(e){return vt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:St((function(){return[0]})),last:St((function(e,t){return[t-1]})),eq:St((function(e,t,n){return[n<0?n+t:n]})),even:St((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:St((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:St((function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e})),gt:St((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=Oe.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Oe.pseudos[De]=Rt(De);for(De in{submit:!0,reset:!0})Oe.pseudos[De]=kt(De);function Nt(){}function Mt(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function Kt(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=je++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,u=[Ue,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if((s=(l=t[$e]||(t[$e]={}))[i])&&s[0]===Ue&&s[1]===r)return u[2]=s[2];if((l[i]=u)[2]=e(t,n,a))return!0}}}function Pt(e){return 1<e.length?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function Lt(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(r=e[s])&&(n&&!n(r,i,o)||(a.push(r),u&&t.push(s)));return a}function Bt(e,t,n,i,o,r){return i&&!i[$e]&&(i=Bt(i)),o&&!o[$e]&&(o=Bt(o,r)),wt((function(r,a,s,l){var u,c,d,f=[],h=[],g=a.length,p=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)It(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!r&&t?p:Lt(p,f,e,s,l),v=n?o||(r?e:g||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(u=Lt(v,h),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(v[h[c]]=!(m[h[c]]=d));if(r){if(o||e){if(o){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(m[c]=d);o(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&-1<(u=o?rt.call(r,d):f[c])&&(r[u]=!(a[u]=d))}}else v=Lt(v===a?v.splice(g,v.length):v),o?o(null,a,v,l):it.apply(a,v)}))}function Ft(e){for(var t,n,i,o=e.length,r=Oe.relative[e[0].type],a=r||Oe.relative[" "],s=r?1:0,l=Kt((function(e){return e===t}),a,!0),u=Kt((function(e){return-1<rt.call(t,e)}),a,!0),c=[function(e,n,i){return!r&&(i||n!==Me)||((t=n).nodeType?l(e,n,i):u(e,n,i))}];s<o;s++)if(n=Oe.relative[e[s].type])c=[Kt(Pt(c),n)];else{if((n=Oe.filter[e[s].type].apply(null,e[s].matches))[$e]){for(i=++s;i<o&&!Oe.relative[e[i].type];i++);return Bt(1<s&&Pt(c),1<s&&Mt(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ct,"$1"),n,s<i&&Ft(e.slice(s,i)),i<o&&Ft(e=e.slice(i)),i<o&&Mt(e))}c.push(n)}return Pt(c)}Nt.prototype=Oe.filters=Oe.pseudos,Oe.setFilters=new Nt,Se=It.tokenize=function(e,t){var n,i,o,r,a,s,l,u=Xe[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=Oe.preFilter;a;){for(r in n&&!(i=dt.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(o=[])),n=!1,(i=ft.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(ct," ")}),a=a.slice(n.length)),Oe.filter)!(i=mt[r].exec(a))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?It.error(e):Xe(e,s).slice(0)},Ae=It.compile=function(e,t){var n,i,o,r,a,s,l=[],u=[],c=Ye[e+" "];if(!c){for(t||(t=Se(e)),n=t.length;n--;)(c=Ft(t[n]))[$e]?l.push(c):u.push(c);(c=Ye(e,(i=u,r=0<(o=l).length,a=0<i.length,s=function(e,t,n,s,l){var u,c,d,f=0,h="0",g=e&&[],p=[],m=Me,v=e||a&&Oe.find.TAG("*",l),y=Ue+=null==m?1:Math.random()||.1,b=v.length;for(l&&(Me=t!==Be&&t);h!==b&&null!=(u=v[h]);h++){if(a&&u){for(c=0;d=i[c++];)if(d(u,t,n)){s.push(u);break}l&&(Ue=y)}r&&((u=!d&&u)&&f--,e&&g.push(u))}if(f+=h,r&&h!==f){for(c=0;d=o[c++];)d(g,p,t,n);if(e){if(0<f)for(;h--;)g[h]||p[h]||(p[h]=tt.call(s));p=Lt(p)}it.apply(s,p),l&&!e&&0<p.length&&1<f+o.length&&It.uniqueSort(s)}return l&&(Ue=y,Me=m),g},r?wt(s):s))).selector=e}return c},Ne=It.select=function(e,t,n,i){var o,r,a,s,l,u="function"==typeof e&&e,c=!i&&Se(e=u.selector||e);if(n=n||[],1===c.length){if(2<(r=c[0]=c[0].slice(0)).length&&"ID"===(a=r[0]).type&&we.getById&&9===t.nodeType&&ze&&Oe.relative[r[1].type]){if(!(t=(Oe.find.ID(a.matches[0].replace(_t,xt),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=mt.needsContext.test(e)?0:r.length;o--&&!Oe.relative[s=(a=r[o]).type];)if((l=Oe.find[s])&&(i=l(a.matches[0].replace(_t,xt),Ct.test(r[0].type)&&At(t.parentNode)||t))){if(r.splice(o,1),!(e=i.length&&Mt(r)))return it.apply(n,i),n;break}}return(u||Ae(e,c))(i,t,!ze,n,Ct.test(e)&&At(t.parentNode)||t),n},we.sortStable=$e.split("").sort(Ze).join("")===$e,we.detectDuplicates=!!Pe,Le(),we.sortDetached=!0;var zt=Array.isArray,Ht=function(e,t,n){var i,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(i=0,o=e.length;i<o;i++)if(!1===t.call(n,e[i],i,e))return 0}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return 0;return 1},Vt=function(e,t,n){var i,o;for(i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e))return i;return-1},Wt={isArray:zt,toArray:function(e){var t,n,i=e;if(!zt(e))for(i=[],t=0,n=e.length;t<n;t++)i[t]=e[t];return i},each:Ht,map:function(e,t){var n=[];return Ht(e,(function(i,o){n.push(t(i,o,e))})),n},filter:function(e,t){var n=[];return Ht(e,(function(i,o){t&&!t(i,o,e)||n.push(i)})),n},indexOf:function(e,t){var n,i;if(e)for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,i){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(i,n,e[o],o);return n},findIndex:Vt,find:function(e,t,n){var i=Vt(e,t,n);return-1!==i?e[i]:void 0},last:function(e){return e[e.length-1]}},$t=/^\s*|\s*$/g,qt=function(e){return null==e?"":(""+e).replace($t,"")},Ut=function(e,t){return t?!("array"!==t||!Wt.isArray(e))||typeof e===t:void 0!==e},jt=function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),Wt.each(e,(function(e,o){if(!1===t.call(i,e,o,n))return!1;jt(e,t,n,i)})))},Gt={trim:qt,isArray:Wt.isArray,is:Ut,toArray:Wt.toArray,makeMap:function(e,t,n){var i;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n},each:Wt.each,map:Wt.map,grep:Wt.filter,inArray:Wt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,i,o,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s,l=arguments;for(n=1,i=l.length;n<i;n++)for(o in t=l[n])t.hasOwnProperty(o)&&void 0!==(s=t[o])&&(e[o]=s);return e},create:function(e,t,n){var i,o,r,a,s,l=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],!(o=l.createNS(e[3].replace(/\.\w+$/,""),n))[r]){if("static"===e[2])return o[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[r]));t[r]||(t[r]=function(){},u=1),o[r]=t[r],l.extend(o[r].prototype,t),e[5]&&(i=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[r],o[r]=u?function(){return i[a].apply(this,arguments)}:function(){return this.parent=i[a],s.apply(this,arguments)},o[r].prototype[r]=o[r],l.each(i,(function(e,t){o[r].prototype[t]=i[t]})),l.each(t,(function(e,t){i[t]?o[r].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!==r&&(o[r].prototype[t]=e)}))),l.each(t.static,(function(e,t){o[r][t]=e}))}},walk:jt,createNS:function(t,n){var i,o;for(n=n||e.window,t=t.split("."),i=0;i<t.length;i++)n[o=t[i]]||(n[o]={}),n=n[o];return n},resolve:function(t,n){var i,o;for(n=n||e.window,i=0,o=(t=t.split(".")).length;i<o&&(n=n[t[i]]);i++);return n},explode:function(e,t){return!e||Ut(e,"array")?e:Wt.map(e.split(t||","),qt)},_addCacheSuffix:function(e){var t=de.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Xt=e.document,Yt=Array.prototype.push,Zt=Array.prototype.slice,Jt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Qt=Ie.Event,en=Gt.makeMap("children,contents,next,prev"),tn=function(e){return void 0!==e},nn=function(e){return"string"==typeof e},on=function(e,t){var n,i,o;for(o=(t=t||Xt).createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;i=o.firstChild;)n.appendChild(i);return n},rn=function(e,t,n,i){var o;if(nn(t))t=on(t,bn(e[0]));else if(t.length&&!t.nodeType){if(t=gn.makeArray(t),i)for(o=t.length-1;0<=o;o--)rn(e,t[o],n,i);else for(o=0;o<t.length;o++)rn(e,t[o],n,i);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},an=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},sn=function(e,t,n){var i,o;return t=gn(t)[0],e.each((function(){var e=this;n&&i===e.parentNode||(i=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)})),e},ln=Gt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),un=Gt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),cn={for:"htmlFor",class:"className",readonly:"readOnly"},dn={float:"cssFloat"},fn={},hn={},gn=function(e,t){return new gn.fn.init(e,t)},pn=/^\s*|\s*$/g,mn=function(e){return null==e?"":(""+e).replace(pn,"")},vn=function(e,t){var n,i,o,r;if(e)if(void 0===(n=e.length)){for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(r=e[i],i,r))break}else for(o=0;o<n&&!1!==t.call(r=e[o],o,r);o++);return e},yn=function(e,t){var n=[];return vn(e,(function(e,i){t(i,e)&&n.push(i)})),n},bn=function(e){return e?9===e.nodeType?e:e.ownerDocument:Xt};gn.fn=gn.prototype={constructor:gn,selector:"",context:null,length:0,init:function(t,n){var i,o,r=this;if(!t)return r;if(t.nodeType)return r.context=r[0]=t,r.length=1,r;if(n&&n.nodeType)r.context=n;else{if(n)return gn(t).attr(n);r.context=n=e.document}if(nn(t)){if(!(i="<"===(r.selector=t).charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:Jt.exec(t)))return gn(n).find(t);if(i[1])for(o=on(t,bn(n)).firstChild;o;)Yt.call(r,o),o=o.nextSibling;else{if(!(o=bn(n).getElementById(i[2])))return r;if(o.id!==i[2])return r.find(t);r.length=1,r[0]=o}}else this.add(t,!1);return r},toArray:function(){return Gt.toArray(this)},add:function(e,t){var n,i,o=this;if(nn(e))return o.add(gn(e));if(!1!==t)for(n=gn.unique(o.toArray().concat(gn.makeArray(e))),o.length=n.length,i=0;i<n.length;i++)o[i]=n[i];else Yt.apply(o,gn.makeArray(e));return o},attr:function(e,t){var n,i=this;if("object"==typeof e)vn(e,(function(e,t){i.attr(e,t)}));else{if(!tn(t)){if(i[0]&&1===i[0].nodeType){if((n=fn[e])&&n.get)return n.get(i[0],e);if(un[e])return i.prop(e)?e:void 0;null===(t=i[0].getAttribute(e,2))&&(t=void 0)}return t}this.each((function(){var n;if(1===this.nodeType){if((n=fn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}}))}return i},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=cn[e]||e))vn(e,(function(e,t){n.prop(e,t)}));else{if(!tn(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each((function(){1===this.nodeType&&(this[e]=t)}))}return n},css:function(e,t){var n,i,o=this,r=function(e){return e.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}))},a=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e}))};if("object"==typeof e)vn(e,(function(e,t){o.css(e,t)}));else if(tn(t))e=r(e),"number"!=typeof t||ln[e]||(t=t.toString()+"px"),o.each((function(){var n=this.style;if((i=hn[e])&&i.set)i.set(this,t);else{try{this.style[dn[e]||e]=t}catch(r){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}}));else{if(n=o[0],(i=hn[e])&&i.get)return i.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[r(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(f){return}}return o},remove:function(){for(var e,t=this.length;t--;)Qt.clean(e=this[t]),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(tn(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(u){gn(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(tn(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return rn(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)}))},prepend:function(){return rn(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)}),!0)},before:function(){return this[0]&&this[0].parentNode?rn(this,arguments,(function(e){this.parentNode.insertBefore(e,this)})):this},after:function(){return this[0]&&this[0].parentNode?rn(this,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),!0):this},appendTo:function(e){return gn(e).append(this),this},prependTo:function(e){return gn(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return sn(this,e)},wrapAll:function(e){return sn(this,e,!0)},wrapInner:function(e){return this.each((function(){gn(this).contents().wrapAll(e)})),this},unwrap:function(){return this.parent().each((function(){gn(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];return this.each((function(){e.push(this.cloneNode(!0))})),gn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?vn(e.split(" "),(function(){n.toggleClass(this,t)})):n.each((function(n,i){var o,r;(r=an(i,e))!==t&&(o=i.className,r?i.className=mn((" "+o+" ").replace(" "+e+" "," ")):i.className+=o?" "+e:e)}))),n},hasClass:function(e){return an(this[0],e)},each:function(e){return vn(this,e)},on:function(e,t){return this.each((function(){Qt.bind(this,e,t)}))},off:function(e,t){return this.each((function(){Qt.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){"object"==typeof e?Qt.fire(this,e.type,e):Qt.fire(this,e)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new gn(Zt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;t<n;t++)gn.find(e,this[t],i);return gn(i)},filter:function(e){return gn("function"==typeof e?yn(this.toArray(),(function(t,n){return e(n,t)})):gn.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof gn&&(e=e[0]),this.each((function(n,i){for(;i;){if("string"==typeof e&&gn(i).is(e)){t.push(i);break}if(i===e){t.push(i);break}i=i.parentNode}})),gn(t)},offset:function(e){var t,n,i,o,r=0,a=0;return e?this.css(e):((t=this[0])&&(i=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(r=(o=t.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=o.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:r,top:a})},push:Yt,sort:[].sort,splice:[].splice},Gt.extend(gn,{extend:Gt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:Gt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:Gt.isArray,each:vn,trim:mn,grep:yn,find:It,expr:It.selectors,unique:It.uniqueSort,text:It.getText,contains:It.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!==t[i].nodeType&&t.splice(i,1);return 1===t.length?gn.find.matchesSelector(t[0],e)?[t[0]]:[]:gn.find.matches(e,t)}});var Tn=function(e,t,n){var i=[],o=e[t];for("string"!=typeof n&&n instanceof gn&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&gn(o).is(n))break}1===o.nodeType&&i.push(o),o=o[t]}return i},Cn=function(e,t,n,i){var o=[];for(i instanceof gn&&(i=i[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==i){if(e===i)break;if("string"==typeof i&&gn(e).is(i))break}o.push(e)}return o},En=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};vn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Tn(e,"parentNode")},next:function(e){return En(e,"nextSibling",1)},prev:function(e){return En(e,"previousSibling",1)},children:function(e){return Cn(e.firstChild,"nextSibling",1)},contents:function(e){return Gt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){gn.fn[e]=function(n){var i=[];return this.each((function(){var e=t.call(i,this,n,i);e&&(gn.isArray(e)?i.push.apply(i,e):i.push(e))})),1<this.length&&(en[e]||(i=gn.unique(i)),0===e.indexOf("parents")&&(i=i.reverse())),i=gn(i),n?i.filter(n):i}})),vn({parentsUntil:function(e,t){return Tn(e,"parentNode",t)},nextUntil:function(e,t){return Cn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Cn(e,"previousSibling",1,t).slice(1)}},(function(e,t){gn.fn[e]=function(n,i){var o=[];return this.each((function(){var e=t.call(o,this,n,o);e&&(gn.isArray(e)?o.push.apply(o,e):o.push(e))})),1<this.length&&(o=gn.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=gn(o),i?o.filter(i):o}})),gn.fn.is=function(e){return!!e&&0<this.filter(e).length},gn.fn.init.prototype=gn.fn,gn.overrideDefaults=function(e){var t,n=function(i,o){return t=t||e(),0===arguments.length&&(i=t.element),o||(o=t.context),new n.fn.init(i,o)};return gn.extend(n,this),n};var _n=function(e,t,n){vn(n,(function(n,i){e[n]=e[n]||{},e[n][t]=i}))};de.ie&&de.ie<8&&(_n(fn,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?void 0:t},size:function(e){var t=e.size;return 20===t?void 0:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?void 0:t}}),_n(fn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),de.ie&&de.ie<9&&(dn.float="styleFloat",_n(hn,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),gn.attrHooks=fn,gn.cssHooks=hn;var xn,In,Dn,wn,On,Rn=function(){return kn(0,0)},kn=function(e,t){return{major:e,minor:t}},Sn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Rn():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,t);if(!n)return{major:0,minor:0};var i=function(e){return Number(t.replace(n,"$"+e))};return kn(i(1),i(2))}(e,n)},An=Rn,Nn="Firefox",Mn=function(e,t){return function(){return t===e}},Kn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Mn("Edge",t),isChrome:Mn("Chrome",t),isIE:Mn("IE",t),isOpera:Mn("Opera",t),isFirefox:Mn(Nn,t),isSafari:Mn("Safari",t)}},Pn=function(){return Kn({current:void 0,version:An()})},Ln=Kn,Bn=(i("Edge"),i("Chrome"),i("IE"),i("Opera"),i(Nn),i("Safari"),"Windows"),Fn="Android",zn="Solaris",Hn="FreeBSD",Vn=function(e,t){return function(){return t===e}},Wn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Vn(Bn,t),isiOS:Vn("iOS",t),isAndroid:Vn(Fn,t),isOSX:Vn("OSX",t),isLinux:Vn("Linux",t),isSolaris:Vn(zn,t),isFreeBSD:Vn(Hn,t)}},$n=function(){return Wn({current:void 0,version:An()})},qn=Wn,Un=(i(Bn),i("iOS"),i(Fn),i("Linux"),i("OSX"),i(zn),i(Hn),function(e,t){var n=String(t).toLowerCase();return G(e,(function(e){return e.search(n)}))}),jn=function(e,t){return-1!==e.indexOf(t)},Gn=function(e){return e.replace(/^\s+|\s+$/g,"")},Xn=function(e){return e.replace(/\s+$/g,"")},Yn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zn=function(e){return function(t){return jn(t,e)}},Jn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return jn(e,"edge/")&&jn(e,"chrome")&&jn(e,"safari")&&jn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Yn],search:function(e){return jn(e,"chrome")&&!jn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return jn(e,"msie")||jn(e,"trident")}},{name:"Opera",versionRegexes:[Yn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zn("firefox")},{name:"Safari",versionRegexes:[Yn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(jn(e,"safari")||jn(e,"mobile/"))&&jn(e,"applewebkit")}}],Qn=[{name:"Windows",search:Zn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return jn(e,"iphone")||jn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Zn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zn("linux"),versionRegexes:[]},{name:"Solaris",search:Zn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zn("freebsd"),versionRegexes:[]}],ei={browsers:i(Jn),oses:i(Qn)},ti={detect:(xn=function(){return function(e){var t,n,o,r,a,s,l,u,c,d,f,h=ei.browsers(),g=ei.oses(),p=function(e,t){return Un(e,t).map((function(e){var n=Sn(e.versionRegexes,t);return{current:e.name,version:n}}))}(h,e).fold(Pn,Ln),m=function(e,t){return Un(e,t).map((function(e){var n=Sn(e.versionRegexes,t);return{current:e.name,version:n}}))}(g,e).fold($n,qn);return{browser:p,os:m,deviceType:(n=p,o=e,r=(t=m).isiOS()&&!0===/ipad/i.test(o),a=t.isiOS()&&!r,s=t.isAndroid()&&3===t.version.major,l=t.isAndroid()&&4===t.version.major,u=r||s||l&&!0===/mobile/i.test(o),c=t.isiOS()||t.isAndroid(),d=c&&!u,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),{isiPad:i(r),isiPhone:i(a),isTablet:i(u),isPhone:i(d),isTouch:i(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:i(f)})}}(e.navigator.userAgent)},Dn=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dn||(Dn=!0,In=xn.apply(null,e)),In})},ni=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:i(e)}},ii=function(t,n){var i=(n||e.document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||1<i.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return ni(i.childNodes[0])},oi=function(t,n){var i=(n||e.document).createElement(t);return ni(i)},ri=function(t,n){var i=(n||e.document).createTextNode(t);return ni(i)},ai=ni,si=e.Node.DOCUMENT_NODE,li=e.Node.ELEMENT_NODE,ui=e.Node.TEXT_NODE,ci=function(e){return e.dom().nodeName.toLowerCase()},di=function(e){return function(t){return t.dom().nodeType===e}},fi=di(li),hi=di(ui),gi=Object.keys,pi=Object.hasOwnProperty,mi=function(e,t){for(var n=gi(e),i=0,o=n.length;i<o;i++){var r=n[i];t(e[r],r)}},vi=function(e){return void 0!==e.style&&K(e.style.getPropertyValue)},yi=function(t,n,i){if(!(k(i)||M(i)||P(i)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,i+"")},bi=function(e,t,n){yi(e.dom(),t,n)},Ti=function(e,t){var n=e.dom();mi(t,(function(e,t){yi(n,t,e)}))},Ci=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Ei=function(e,t){e.dom().removeAttribute(t)},_i=function(t,n){var i,o,r=t.dom(),a=e.window.getComputedStyle(r).getPropertyValue(n),s=""!==a||void 0!==(o=hi(i=t)?i.dom().parentNode:i.dom())&&null!==o&&o.ownerDocument.body.contains(o)?a:xi(r,n);return null===s?void 0:s},xi=function(e,t){return vi(e)?e.style.getPropertyValue(t):""},Ii=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var o={};return $(e,(function(e,n){o[e]=i(t[n])})),o}},Di=function(e,t){for(var n=[],i=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(i)).isSome(););return n},wi=li,Oi=si,Ri=function(e,t){var n=e.dom();if(n.nodeType!==wi)return!1;var i=n;if(void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ki=function(e){return e.nodeType!==wi&&e.nodeType!==Oi||0===e.childElementCount},Si=function(e,t){return e.dom()===t.dom()},Ai=ti.detect().browser.isIE()?function(e,t){return function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,ie("Node").DOCUMENT_POSITION_CONTAINED_BY)}(e.dom(),t.dom())}:function(e,t){var n=e.dom(),i=t.dom();return n!==i&&n.contains(i)},Ni=function(e){return ai(e.dom().ownerDocument)},Mi=function(e){return ai(e.dom().ownerDocument.defaultView)},Ki=function(e){return O.from(e.dom().parentNode).map(ai)},Pi=function(e){return O.from(e.dom().previousSibling).map(ai)},Li=function(e){return O.from(e.dom().nextSibling).map(ai)},Bi=function(e){return t=Di(e,Pi),(n=L.call(t,0)).reverse(),n;var t,n},Fi=function(e){return Di(e,Li)},zi=function(e){return W(e.dom().childNodes,ai)},Hi=function(e,t){var n=e.dom().childNodes;return O.from(n[t]).map(ai)},Vi=function(e){return Hi(e,0)},Wi=function(e){return Hi(e,e.dom().childNodes.length-1)},$i=(Ii("element","offset"),ti.detect().browser),qi=function(e){return G(e,fi)},Ui={},ji={exports:Ui};wn=Ui,On=ji,function(e){"object"==typeof wn&&void 0!==On?On.exports=e():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,i)}return n[a].exports}for(var r=!1,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i,o,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(iT){try{return i.call(null,e,0)}catch(iT){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(iT){i=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(iT){o=s}}();var u,c=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?c=u.concat(c):f=-1,c.length&&g())}function g(){if(!d){var e=l(h);d=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(iT){try{return o.call(null,e)}catch(iT){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||d||l(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var i=setTimeout;function o(){}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(iT){return void l(t.promise,iT)}s(t.promise,i)}else(1===e._state?s:l)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void d((i=n,o=t,function(){i.apply(o,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(iT){l(e,iT)}var i,o}function l(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn((function(){e._handled||r._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,s(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(o){if(n)return;n=!0,l(t,o)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new c(e,t,n)),n},r.all=function(e){var t=Array.prototype.slice.call(e);return new r((function(e,n){if(0===t.length)return e([]);var i=t.length;function r(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,(function(e){r(a,e)}),n)}t[a]=s,0==--i&&e(t)}catch(o){n(o)}}for(var a=0;a<t.length;a++)r(a,t[a])}))},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r((function(t){t(e)}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)}))},r._immediateFn="function"==typeof e?function(t){e(t)}:function(e){i(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=r:n.Promise||(n.Promise=r)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,i){var o=e("process/browser.js").nextTick,r=Function.prototype.apply,a=Array.prototype.slice,s={},l=0;function u(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new u(r.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new u(r.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,i=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,o((function(){s[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof i?i:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var i=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)}));var Gi=ji.exports.boltExport,Xi=function(t){var n=O.none(),i=[],o=function(e){r()?a(e):i.push(e)},r=function(){return n.isSome()},a=function(t){n.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return t((function(e){n=O.some(e),function(e){$(e,a)}(i),i=[]})),{get:o,map:function(e){return Xi((function(t){o((function(n){t(e(n))}))}))},isReady:r}},Yi={nu:Xi,pure:function(e){return Xi((function(t){t(e)}))}},Zi=function(t){e.setTimeout((function(){throw t}),0)},Ji=function(e){var t=function(t){e().then(t,Zi)};return{map:function(t){return Ji((function(){return e().then(t)}))},bind:function(t){return Ji((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return Ji((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return Yi.nu(t)},toCached:function(){var t=null;return Ji((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},Qi=function(e){return Ji((function(){return new Gi(e)}))},eo=function(e){return function(e,t){return t((function(t){var n=[],i=0;0===e.length?t([]):$(e,(function(o,r){var a;o.get((a=r,function(o){n[a]=o,++i>=e.length&&t(n)}))}))}))}(e,Qi)},to=function(e){return{is:function(t){return e===t},isValue:x,isError:_,getOr:i(e),getOrThunk:i(e),getOrDie:i(e),or:function(t){return to(e)},orThunk:function(t){return to(e)},fold:function(t,n){return n(e)},map:function(t){return to(t(e))},mapError:function(t){return to(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return O.some(e)}}},no=function(e){return{is:_,isValue:_,isError:x,getOr:o,getOrThunk:function(e){return e()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return no(e)},mapError:function(t){return no(t(e))},each:t,bind:function(t){return no(e)},exists:_,forall:x,toOption:O.none}},io={value:to,error:no,fromOption:function(e,t){return e.fold((function(){return no(t)}),to)}};function oo(e,t){var n=e,i=function(e,n,i,o){var r,a;if(e){if(!o&&e[n])return e[n];if(e!==t){if(r=e[i])return r;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(r=a[i])return r}}};this.current=function(){return n},this.next=function(e){return n=i(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=i(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,i,o){var r,a,s;if(e){if(r=e.previousSibling,t&&r===t)return;if(r){if(!o)for(s=r[n];s;s=s[n])if(!s[n])return s;return r}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}var ro,ao,so,lo=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},i=0,o=e.length;i<o;i++){var r=e[i];n[String(r)]=t(r,i)}return n}(e,i(!0))).hasOwnProperty(ci(n))}},uo=lo(["h1","h2","h3","h4","h5","h6"]),co=lo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),fo=function(e){return fi(e)&&!co(e)},ho=function(e){return fi(e)&&"br"===ci(e)},go=lo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),po=lo(["ul","ol","dl"]),mo=lo(["li","dd","dt"]),vo=lo(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),yo=lo(["thead","tbody","tfoot"]),bo=lo(["td","th"]),To=lo(["pre","script","textarea","style"]),Co=function(e){return function(t){return!!t&&t.nodeType===e}},Eo=Co(1),_o=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,i;if(e&&e.nodeType)for(i=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(i===t[n])return!0;return!1}},xo=function(e){return function(t){if(Eo(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Io=Co(3),Do=Co(8),wo=Co(9),Oo=Co(11),Ro=_o("br"),ko=xo("true"),So=xo("false"),Ao={isText:Io,isElement:Eo,isComment:Do,isDocument:wo,isDocumentFragment:Oo,isBr:Ro,isContentEditableTrue:ko,isContentEditableFalse:So,isRestrictedNode:function(e){return!!e&&!Object.getPrototypeOf(e)},matchNodeNames:_o,hasPropValue:function(e,t){return function(n){return Eo(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return Eo(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return Eo(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var i;if(Eo(t))for(i=0;i<n.length;i++){var o=t.ownerDocument.defaultView.getComputedStyle(t,null);if((o?o.getPropertyValue(e):null)===n[i])return!0}return!1}},isBogus:function(e){return Eo(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return Eo(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return Eo(e)&&"TABLE"===e.tagName}},No=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Mo=function(e,t){var n,i=t.childNodes;if(!Ao.isElement(t)||!No(t)){for(n=i.length-1;0<=n;n--)Mo(e,i[n]);if(!1===Ao.isDocument(t)){if(Ao.isText(t)&&0<t.nodeValue.length){var o=Gt.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||0<o)return;if(0===o&&(r=t).previousSibling&&"SPAN"===r.previousSibling.nodeName&&r.nextSibling&&"SPAN"===r.nextSibling.nodeName)return}else if(Ao.isElement(t)&&(1===(i=t.childNodes).length&&No(i[0])&&t.parentNode.insertBefore(i[0],t),i.length||vo(ai(t))))return;e.remove(t)}var r;return t}},Ko={trimNode:Mo},Po=Gt.makeMap,Lo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fo=/[<>&\"\']/g,zo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ho={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};ao={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},so={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Vo=function(e,t){var n,i,o,r={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),ao[i]||(r[i]=o="&"+e[n+1]+";",r[o]=i);return r}};ro=Vo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Wo=function(e,t){return e.replace(t?Lo:Bo,(function(e){return ao[e]||e}))},$o=function(e,t){return e.replace(t?Lo:Bo,(function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ao[e]||"&#"+e.charCodeAt(0)+";"}))},qo=function(e,t,n){return n=n||ro,e.replace(t?Lo:Bo,(function(e){return ao[e]||n[e]||e}))},Uo={encodeRaw:Wo,encodeAllRaw:function(e){return(""+e).replace(Fo,(function(e){return ao[e]||e}))},encodeNumeric:$o,encodeNamed:qo,getEncodeFunc:function(e,t){var n=Vo(t)||ro,i=Po(e.replace(/\+/g,","));return i.named&&i.numeric?function(e,t){return e.replace(t?Lo:Bo,(function(e){return void 0!==ao[e]?ao[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"}))}:i.named?t?function(e,t){return qo(e,t,n)}:qo:i.numeric?$o:Wo},decode:function(e){return e.replace(zo,(function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Ho[t]||String.fromCharCode(t):so[e]||ro[e]||(n=e,(i=oi("div").dom()).innerHTML=n,i.textContent||i.innerText||n);var n,i}))}},jo={},Go={},Xo=Gt.makeMap,Yo=Gt.each,Zo=Gt.extend,Jo=Gt.explode,Qo=Gt.inArray,er=function(e,t){return(e=Gt.trim(e))?e.split(t||" "):[]},tr=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),Yo(e,(function(e,i){n[i]=n[i.toUpperCase()]="map"===t?Xo(e,/[, ]/):Jo(e,/[, ]/)}))),n};function nr(e){var t,n,i,o,r,a,s,l,u,c,d,f,h,g={},p={},m=[],v={},y={},b=function(t,n,i){var o=e[t];return o?o=Xo(o,/[, ]/,Xo(o.toUpperCase(),/[, ]/)):(o=jo[t])||(o=Xo(n," ",Xo(n.toUpperCase()," ")),o=Zo(o,i),jo[t]=o),o};i=function(e){var t,n,i,o,r,a,s={},l=function(e,n,i){var o,r,a,l=function(e,t){var n,i,o={};for(n=0,i=e.length;n<i;n++)o[e[n]]=t||{};return o};for(n=n||"","string"==typeof(i=i||[])&&(i=er(i)),o=(e=er(e)).length;o--;)a={attributes:l(r=er([t,n].join(" "))),attributesOrder:r,children:l(i,Go)},s[e[o]]=a},u=function(e,t){var n,i,o,r;for(n=(e=er(e)).length,t=er(t);n--;)for(i=s[e[n]],o=0,r=t.length;o<r;o++)i.attributes[t[o]]={},i.attributesOrder.push(t[o])};return jo[e]?jo[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",i=[i,a="acronym applet basefont big font strike tt"].join(" "),Yo(er(a),(function(e){l(e,"",i)})),n=[n,r="center dir isindex noframes"].join(" "),o=[n,i].join(" "),Yo(er(r),(function(e){l(e,"",o)}))),o=o||[n,i].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),l("address dt dd div caption","",o),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i),l("blockquote","cite",o),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",o),l("dl","","dt dd"),l("a","href target rel media hreflang type",i),l("q","cite",i),l("ins del","cite datetime",o),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",o),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),l("param","name value"),l("map","name",[o,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",o),l("th","colspan rowspan headers scope abbr",o),l("form","accept-charset action autocomplete enctype method name novalidate target",o),l("fieldset","disabled form name",[o,"legend"].join(" ")),l("label","form for",i),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:i),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[o,"li"].join(" ")),l("noscript","",o),"html4"!==e&&(l("wbr"),l("ruby","",[i,"rt rp"].join(" ")),l("figcaption","",o),l("mark rt rp summary bdi","",i),l("canvas","width height",o),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[i,"option"].join(" ")),l("article section nav aside main header footer","",o),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[o,"figcaption"].join(" ")),l("time","datetime",i),l("dialog","open",o),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",i),l("progress","value max",i),l("meter","value min max low high optimum",i),l("details","open",[o,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(u("script","language xml:space"),u("style","xml:space"),u("object","declare classid code codebase codetype archive standby align border hspace vspace"),u("embed","align name hspace vspace"),u("param","valuetype type"),u("a","charset name rev shape coords"),u("br","clear"),u("applet","codebase archive code object alt name width height align hspace vspace"),u("img","name longdesc align border hspace vspace"),u("iframe","longdesc frameborder marginwidth marginheight scrolling align"),u("font basefont","size color face"),u("input","usemap align"),u("select","onchange"),u("textarea"),u("h1 h2 h3 h4 h5 h6 div p legend caption","align"),u("ul","type compact"),u("li","type"),u("ol dl menu dir","compact"),u("pre","width xml:space"),u("hr","align noshade size width"),u("isindex","prompt"),u("table","summary width frame rules cellspacing cellpadding align bgcolor"),u("col","width align char charoff valign"),u("colgroup","width align char charoff valign"),u("thead","align char charoff valign"),u("tr","align char charoff valign bgcolor"),u("th","axis align char charoff valign nowrap bgcolor width height"),u("form","accept"),u("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),u("tfoot","align char charoff valign"),u("tbody","align char charoff valign"),u("area","nohref"),u("body","background bgcolor text link vlink alink")),"html4"!==e&&(u("input button select textarea","autofocus"),u("input textarea","placeholder"),u("a","download"),u("link script img","crossorigin"),u("iframe","sandbox seamless allowfullscreen")),Yo(er("a form meter progress dfn"),(function(e){s[e]&&delete s[e].children[e]})),delete s.caption.children.table,delete s.script,jo[e]=s)}((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=tr(e.valid_styles),n=tr(e.invalid_styles,"map"),l=tr(e.valid_classes,"map"),o=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),r=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=b("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=b("non_empty_elements","td th iframe video audio object script pre code",a),d=b("move_caret_before_on_enter_elements","table",c),f=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),u=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",f),h=b("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Yo((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),(function(e){y[e]=new RegExp("</"+e+"[^>]*>","gi")}));var T=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},C=function(e){var t,n,i,o,r,a,s,l,u,c,d,f,h,p,v,y,b,C,E,_=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,I=/[*?+]/;if(e)for(e=er(e,","),g["@"]&&(y=g["@"].attributes,b=g["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(r=_.exec(e[t])){if(u=r[2],v=r[3],l=r[5],a={attributes:f={},attributesOrder:h=[]},"#"===(p=r[1])&&(a.paddEmpty=!0),"-"===p&&(a.removeEmpty=!0),"!"===r[4]&&(a.removeEmptyAttrs=!0),y){for(C in y)f[C]=y[C];h.push.apply(h,b)}if(l)for(i=0,o=(l=er(l,"|")).length;i<o;i++)if(r=x.exec(l[i])){if(s={},d=r[1],c=r[2].replace(/[\\:]:/g,":"),p=r[3],E=r[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===d){delete f[c],h.splice(Qo(h,c),1);continue}p&&("="===p&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:E}),s.defaultValue=E),":"===p&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:E}),s.forcedValue=E),"<"===p&&(s.validValues=Xo(E,"?"))),I.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=T(c),a.attributePatterns.push(s)):(f[c]||h.push(c),f[c]=s)}y||"@"!==u||(y=f,b=h),v&&(a.outputName=u,g[v]=a),I.test(u)?(a.pattern=T(u),m.push(a)):g[u]=a}},E=function(e){g={},m=[],C(e),Yo(i,(function(e,t){p[t]=e.children}))},_=function(e){var t=/^(~)?(.+)$/;e&&(jo.text_block_elements=jo.block_elements=null,Yo(er(e,","),(function(e){var n=t.exec(e),i="~"===n[1],o=i?"span":"div",r=n[2];if(p[r]=p[o],v[r]=o,i||(u[r.toUpperCase()]={},u[r]={}),!g[r]){var a=g[o];delete(a=Zo({},a)).removeEmptyAttrs,delete a.removeEmpty,g[r]=a}Yo(p,(function(e,t){e[o]&&(p[t]=e=Zo({},p[t]),e[r]=e[o])}))})))},x=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;jo[e.schema]=null,t&&Yo(er(t,","),(function(e){var t,i,o=n.exec(e);o&&(t=(i=o[1])?p[o[2]]:p[o[2]]={"#comment":{}},t=p[o[2]],Yo(er(o[3],"|"),(function(e){"-"===i?delete t[e]:t[e]={}})))}))},I=function(e){var t,n=g[e];if(n)return n;for(t=m.length;t--;)if((n=m[t]).pattern.test(e))return n};return e.valid_elements?E(e.valid_elements):(Yo(i,(function(e,t){g[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},p[t]=e.children})),"html5"!==e.schema&&Yo(er("strong/b em/i"),(function(e){e=er(e,"/"),g[e[1]].outputName=e[0]})),Yo(er("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(e){g[e]&&(g[e].removeEmpty=!0)})),Yo(er("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(e){g[e].paddEmpty=!0})),Yo(er("span"),(function(e){g[e].removeEmptyAttrs=!0}))),_(e.custom_elements),x(e.valid_children),C(e.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),Yo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,t){g[t]&&(g[t].parentsRequired=er(e))})),e.invalid_elements&&Yo(Jo(e.invalid_elements),(function(e){g[e]&&delete g[e]})),I("span")||C("span[!data-mce-type|*]"),{children:p,elements:g,getValidStyles:function(){return t},getValidClasses:function(){return l},getBlockElements:function(){return u},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return f},getTextInlineElements:function(){return h},getBoolAttrs:function(){return s},getElementRule:I,getSelfClosingElements:function(){return r},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return d},getWhiteSpaceElements:function(){return o},getSpecialElements:function(){return y},isValidChild:function(e,t){var n=p[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,i,o=I(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:C,setValidElements:E,addCustomElements:_,addValidChildren:x}}var ir=function(e,t,n,i){var o=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+o(t)+o(n)+o(i)};function or(e,t){var n,i,o,r,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,c={};for(e=e||{},t&&(o=t.getValidStyles(),r=t.getInvalidStyles()),i="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<i.length;n++)c[i[n]]="\ufeff"+n,c["\ufeff"+n]=i[n];return{toHex:function(e){return e.replace(a,ir)},parse:function(t){var i,o,r,d,f,h,g,p={},m=e.url_converter,v=e.url_converter_scope||this,y=function(e,t,i){var o,r,a,s;if((o=p[e+"-top"+t])&&(r=p[e+"-right"+t])&&(a=p[e+"-bottom"+t])&&(s=p[e+"-left"+t])){var l=[o,r,a,s];for(n=l.length-1;n--&&l[n]===l[n+1];);-1<n&&i||(p[e+t]=-1===n?l[0]:l.join(" "),delete p[e+"-top"+t],delete p[e+"-right"+t],delete p[e+"-bottom"+t],delete p[e+"-left"+t])}},b=function(e){var t,n=p[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return p[e]=n[0],!0}},T=function(e){return d=!0,c[e]},C=function(e,t){return d&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return c[e]}))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},E=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},_=function(e){return e.replace(/\\[0-9a-f]+/gi,E)},x=function(t,n,i,o,r,a){if(r=r||a)return"'"+(r=C(r)).replace(/\'/g,"\\'")+"'";if(n=C(n||i||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return m&&(n=m.call(v,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,T).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,T)}));i=l.exec(t);)if(l.lastIndex=i.index+i[0].length,o=i[1].replace(u,"").toLowerCase(),r=i[2].replace(u,""),o&&r){if(o=_(o),r=_(r),-1!==o.indexOf("\ufeff")||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(r)))continue;"font-weight"===o&&"700"===r?r="bold":"color"!==o&&"background-color"!==o||(r=r.toLowerCase()),r=(r=r.replace(a,ir)).replace(s,x),p[o]=d?C(r,!0):r}y("border","",!0),y("border","-width"),y("border","-color"),y("border","-style"),y("padding",""),y("margin",""),h="border-style",g="border-color",b(f="border-width")&&b(h)&&b(g)&&(p.border=p[f]+" "+p[h]+" "+p[g],delete p[f],delete p[h],delete p[g]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}return p},serialize:function(e,t){var n,i,a,s,l="",u=function(t){var n,i,r,a;if(n=o[t])for(i=0,r=n.length;i<r;i++)(a=e[t=n[i]])&&(l+=(0<l.length?" ":"")+t+": "+a+";")};if(t&&o)u("*"),u(t);else for(n in e)!(i=e[n])||r&&(a=n,s=void 0,(s=r["*"])&&s[a]||(s=r[t])&&s[a])||(l+=(0<l.length?" ":"")+n+": "+i+";");return l}}}var rr,ar=Gt.each,sr=Gt.grep,lr=de.ie,ur=/^([a-z0-9],?)+$/i,cr=/^[ \t\r\n]*$/,dr=function(e,t){var n=t.attr("style"),i=e.serialize(e.parse(n),t[0].nodeName);i||(i=null),t.attr("data-mce-style",i)},fr=function(e,t){var n,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!==i||i!==n&&e.nodeValue.length)&&(o++,n=i);return o};function hr(t,r){var a,s=this;void 0===r&&(r={});var l={},u=e.window,c={},d=0,f=function(t,r){void 0===r&&(r={});var a,s=0,l={};a=r.maxLoadTime||5e3;var u=function(e){t.getElementsByTagName("head")[0].appendChild(e)},c=function(n,i,o){var c,d,f,h,g=function(){for(var e=h.passed,t=e.length;t--;)e[t]();h.status=2,h.passed=[],h.failed=[]},p=function(){for(var e=h.failed,t=e.length;t--;)e[t]();h.status=3,h.passed=[],h.failed=[]},m=function(e,t){e()||((new Date).getTime()-f<a?me.setTimeout(t):p())},v=function(){m((function(){for(var e,n,i=t.styleSheets,o=i.length;o--;)if((n=(e=i[o]).ownerNode?e.ownerNode:e.owningElement)&&n.id===c.id)return g(),!0}),v)},y=function(){m((function(){try{var e=d.sheet.cssRules;return g(),!!e}catch(i){}}),y)};if(n=Gt._addCacheSuffix(n),l[n]?h=l[n]:l[n]=h={passed:[],failed:[]},i&&h.passed.push(i),o&&h.failed.push(o),1!==h.status)if(2!==h.status)if(3!==h.status){if(h.status=1,(c=t.createElement("link")).rel="stylesheet",c.type="text/css",c.id="u"+s++,c.async=!1,c.defer=!1,f=(new Date).getTime(),r.contentCssCors&&(c.crossOrigin="anonymous"),!("onload"in c)||(b=e.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(b[1],10)<536){if(0<e.navigator.userAgent.indexOf("Firefox"))return(d=t.createElement("style")).textContent='@import "'+n+'"',y(),void u(d);v()}else c.onload=v,c.onerror=p;var b;u(c),c.href=n}else p();else g()},d=function(e){return Qi((function(t){c(e,n(t,i(io.value(e))),n(t,i(io.error(e))))}))},f=function(e){return e.fold(o,o)};return{load:c,loadAll:function(e,t,n){eo(W(e,d)).get((function(e){var i=q(e,(function(e){return e.isValue()}));0<i.fail.length?n(i.fail.map(f)):t(i.pass.map(f))}))}}}(t,{contentCssCors:r.contentCssCors}),h=[],g=r.schema?r.schema:nr({}),p=or({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),m=r.ownEvents?new Ie(r.proxy):Ie.Event,v=g.getBlockElements(),y=gn.overrideDefaults((function(){return{context:t,element:U.getRoot()}})),b=function(e){if(e&&t&&"string"==typeof e){var n=t.getElementById(e);return n&&n.id!==e?t.getElementsByName(e)[1]:n}return e},T=function(e){return"string"==typeof e&&(e=b(e)),y(e)},C=function(e,t,n){var i,o,r=T(e);return r.length&&(o=(i=a[t])&&i.get?i.get(r,t):r.attr(t)),void 0===o&&(o=n||""),o},E=function(e){var t=b(e);return t?t.attributes:[]},_=function(e,t,n){var i,o;""===n&&(n=null);var s=T(e);i=s.attr(t),s.length&&((o=a[t])&&o.set?o.set(s,n,t):s.attr(t,n),i!==n&&r.onSetAttrib&&r.onSetAttrib({attrElm:s,attrName:t,attrValue:n}))},x=function(){return r.root_element||t.body},I=function(e,n){return function(e,t,n){var i,o,r,a=0,s=0,l=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===_i(ai(e),"position"))return{x:a=(o=t.getBoundingClientRect()).left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft,y:s=o.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop};for(i=t;i&&i!==n&&i.nodeType;)a+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!==n&&i.nodeType;)a-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode;s+=(r=ai(t),$i.isFirefox()&&"table"===ci(r)?qi(zi(r)).filter((function(e){return"caption"===ci(e)})).bind((function(e){return qi(Fi(e)).map((function(t){var n=t.dom().offsetTop,i=e.dom().offsetTop,o=e.dom().offsetHeight;return n<=i?-o:0}))})).getOr(0):0)}return{x:a,y:s}}(t.body,b(e),n)},D=function(e,t,n){var i=T(e);return n?i.css(t):("float"===(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t=de.ie&&de.ie<12?"styleFloat":"cssFloat"),i[0]&&i[0].style?i[0].style[t]:void 0)},w=function(e){var t,n;return e=b(e),t=D(e,"width"),n=D(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},O=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(ur.test(t)){var i=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase();for(n=i.length-1;0<=n;n--)if(i[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var r=Array.isArray(e)?e:[e];return 0<It(t,r[0].ownerDocument||r[0],null,r).length},R=function(e,t,n,i){var o,r=[],a=b(e);for(i=void 0===i,n=n||("BODY"!==x().nodeName?x().parentNode:null),Gt.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return O(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!i)return[a];r.push(a)}a=a.parentNode}return i?r:null},k=function(e,t,n){var i=t;if(e)for("string"==typeof t&&(i=function(e){return O(e,t)}),e=e[n];e;e=e[n])if("function"==typeof i&&i(e))return e;return null},S=function(e,t,n){var i,o="string"==typeof e?b(e):e;return!!o&&(Gt.isArray(o)&&(o.length||0===o.length)?(i=[],ar(o,(function(e,o){e&&("string"==typeof e&&(e=b(e)),i.push(t.call(n,e,o)))})),i):t.call(n||s,o))},A=function(e,t){T(e).each((function(e,n){ar(t,(function(e,t){_(n,t,e)}))}))},N=function(e,t){var n=T(e);lr?n.each((function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(v){gn("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}})):n.html(t)},M=function(e,n,i,o,r){return S(e,(function(e){var a="string"==typeof n?t.createElement(n):n;return A(a,i),o&&("string"!=typeof o&&o.nodeType?a.appendChild(o):"string"==typeof o&&N(a,o)),r?a:e.appendChild(a)}))},K=function(e,n,i){return M(t.createElement(e),e,n,i,!0)},P=Uo.encodeAllRaw,L=function(e,t){var n=T(e);return t?n.each((function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)})).remove():n.remove(),1<n.length?n.toArray():n[0]},B=function(e,t,n){T(e).toggleClass(t,n).each((function(){""===this.className&&gn(this).attr("class",null)}))},F=function(e,t,n){return S(t,(function(t){return Gt.is(t,"array")&&(e=e.cloneNode(!0)),n&&ar(sr(t.childNodes),(function(t){e.appendChild(t)})),t.parentNode.replaceChild(e,t)}))},z=function(){return t.createRange()},H=function(e,n,i,o){if(Gt.isArray(e)){for(var a=e.length;a--;)e[a]=H(e[a],n,i,o);return e}return!r.collect||e!==t&&e!==u||h.push([e,n,i,o]),m.bind(e,n,i,o||U)},V=function(e,n,i){var o;if(Gt.isArray(e)){for(o=e.length;o--;)e[o]=V(e[o],n,i);return e}if(h&&(e===t||e===u))for(o=h.length;o--;){var r=h[o];e!==r[0]||n&&n!==r[1]||i&&i!==r[2]||m.unbind(r[0],r[1],r[2])}return m.unbind(e,n,i)},$=function(e){if(e&&Ao.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},U={doc:t,settings:r,win:u,files:c,stdMode:!0,boxModel:!0,styleSheetLoader:f,boundEvents:h,styles:p,schema:g,events:m,isBlock:function(e){if("string"==typeof e)return!!v[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!v[e.nodeName])}return!1},$:y,$$:T,root:null,clone:function(e,n){if(!lr||1!==e.nodeType||n)return e.cloneNode(n);if(!n){var i=t.createElement(e.nodeName);return ar(E(e),(function(t){_(i,t.nodeName,C(e,t.nodeName))})),i}return null},getRoot:x,getViewPort:function(e){var t=e||u,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=b(e),t=I(e),n=w(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:w,getParent:function(e,t,n){var i=R(e,t,n,!1);return i&&0<i.length?i[0]:null},getParents:R,get:b,getNext:function(e,t){return k(e,t,"nextSibling")},getPrev:function(e,t){return k(e,t,"previousSibling")},select:function(e,n){return It(e,b(n)||r.root_element||t,[])},is:O,add:M,create:K,createHTML:function(e,t,n){var i,o="";for(i in o+="<"+e,t)t.hasOwnProperty(i)&&null!=t[i]&&(o+=" "+i+'="'+P(t[i])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var n,i=t.createElement("div"),o=t.createDocumentFragment();for(e&&(i.innerHTML=e);n=i.firstChild;)o.appendChild(n);return o},remove:L,setStyle:function(e,t,n){var i=T(e).css(t,n);r.update_styles&&dr(p,i)},getStyle:D,setStyles:function(e,t){var n=T(e).css(t);r.update_styles&&dr(p,n)},removeAllAttribs:function(e){return S(e,(function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))}))},setAttrib:_,setAttribs:A,getAttrib:C,getPos:I,parseStyle:function(e){return p.parse(e)},serializeStyle:function(e,t){return p.serialize(e,t)},addStyle:function(n){var i,o;if(U!==hr.DOM&&t===e.document){if(l[n])return;l[n]=!0}(o=t.getElementById("mceDefaultStyles"))||((o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css",(i=t.getElementsByTagName("head")[0]).firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)),o.styleSheet?o.styleSheet.cssText+=n:o.appendChild(t.createTextNode(n))},loadCSS:function(n){var i;U===hr.DOM||t!==e.document?(n||(n=""),i=t.getElementsByTagName("head")[0],ar(n.split(","),(function(e){var t;e=Gt._addCacheSuffix(e),c[e]||(c[e]=!0,t=K("link",{rel:"stylesheet",href:e}),i.appendChild(t))}))):hr.DOM.loadCSS(n)},addClass:function(e,t){T(e).addClass(t)},removeClass:function(e,t){B(e,t,!1)},hasClass:function(e,t){return T(e).hasClass(t)},toggleClass:B,show:function(e){T(e).show()},hide:function(e){T(e).hide()},isHidden:function(e){return"none"===T(e).css("display")},uniqueId:function(e){return(e||"mce_")+d++},setHTML:N,getOuterHTML:function(e){var t="string"==typeof e?b(e):e;return Ao.isElement(t)?t.outerHTML:gn("<div></div>").append(gn(t).clone()).html()},setOuterHTML:function(e,t){T(e).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}L(gn(this).html(t),!0)}))},decode:Uo.decode,encode:P,insertAfter:function(e,t){var n=b(t);return S(e,(function(e){var t,i;return t=n.parentNode,(i=n.nextSibling)?t.insertBefore(e,i):t.appendChild(e),e}))},replace:F,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=K(t),ar(E(e),(function(t){_(n,t.nodeName,C(e,t.nodeName))})),F(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!==n;)n=n.parentNode;if(i===n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return p.toHex(Gt.trim(e))},run:S,getAttribs:E,isEmpty:function(e,t){var n,i,o,r,a,s,l=0;if(e=e.firstChild){a=new oo(e,e.parentNode),t=t||(g?g.getNonEmptyElements():null),r=g?g.getWhiteSpaceElements():{};do{if(o=e.nodeType,Ao.isElement(e)){var u=e.getAttribute("data-mce-bogus");if(u){e=a.next("all"===u);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){l++,e=a.next();continue}return!1}for(n=(i=E(e)).length;n--;)if("name"===(s=i[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===o)return!1;if(3===o&&!cr.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&r[e.parentNode.nodeName]&&cr.test(e.nodeValue))return!1;e=a.next()}while(e)}return l<=1},createRng:z,nodeIndex:fr,split:function(e,t,n){var i,o,r,a=z();if(e&&t)return a.setStart(e.parentNode,fr(e)),a.setEnd(t.parentNode,fr(t)),i=a.extractContents(),(a=z()).setStart(t.parentNode,fr(t)+1),a.setEnd(e.parentNode,fr(e)+1),o=a.extractContents(),(r=e.parentNode).insertBefore(Ko.trimNode(U,i),e),r.insertBefore(n||t,e),r.insertBefore(Ko.trimNode(U,o),e),L(e),n||t},bind:H,unbind:V,fire:function(e,t,n){return m.fire(e,t,n)},getContentEditable:$,getContentEditableParent:function(e){for(var t=x(),n=null;e&&e!==t&&null===(n=$(e));e=e.parentNode);return n},destroy:function(){if(h)for(var e=h.length;e--;){var t=h[e];m.unbind(t[0],t[1],t[2])}It.setDocument&&It.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return a=function(e,t,n){var i={},o=t.keep_values,r={set:function(e,n,i){t.url_converter&&(n=t.url_converter.call(t.url_converter_scope||U,n,i,e[0])),e.attr("data-mce-"+i,n).attr(i,n)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return i={style:{set:function(e,t){null===t||"object"!=typeof t?(o&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},o&&(i.href=i.src=r),i}(p,r),U}(rr=hr||(hr={})).DOM=rr(e.document),rr.nodeIndex=fr;var gr=hr,pr=gr.DOM,mr=Gt.each,vr=Gt.grep,yr=function(e){return"function"==typeof e},br=function(){var t={},n=[],i={},o=[],r=0;this.isDone=function(e){return 2===t[e]},this.markDone=function(e){t[e]=2},this.add=this.load=function(e,o,r,a){void 0===t[e]&&(n.push(e),t[e]=0),o&&(i[e]||(i[e]=[]),i[e].push({success:o,failure:a,scope:r||this}))},this.remove=function(e){delete t[e],delete i[e]},this.loadQueue=function(e,t,i){this.loadScripts(n,e,t,i)},this.loadScripts=function(n,a,s,l){var u,c=[],d=function(e,t){mr(i[t],(function(t){yr(t[e])&&t[e].call(t.scope)})),i[t]=void 0};o.push({success:a,failure:l,scope:s||this}),(u=function(){var i=vr(n);if(n.length=0,mr(i,(function(n){var i,o,a,s,l,f;2!==t[n]?3!==t[n]?1!==t[n]&&(t[n]=1,r++,i=n,o=function(){t[n]=2,r--,d("success",n),u()},a=function(){t[n]=3,r--,c.push(n),d("failure",n),u()},l=(f=pr).uniqueId(),(s=e.document.createElement("script")).id=l,s.type="text/javascript",s.src=Gt._addCacheSuffix(i),s.onload=function(){f.remove(l),s&&(s.onreadystatechange=s.onload=s=null),o()},s.onerror=function(){yr(a)?a():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+i)},(e.document.getElementsByTagName("head")[0]||e.document.body).appendChild(s)):d("failure",n):d("success",n)})),!r){var a=o.slice(0);o.length=0,mr(a,(function(e){0===c.length?yr(e.success)&&e.success.call(e.scope):yr(e.failure)&&e.failure.call(e.scope,c)}))}})()}};br.ScriptLoader=new br;var Tr,Cr=Gt.each;function Er(){var e=this,t=[],n={},i={},o=[],r=function(e){var t;return i[e]&&(t=i[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},s=function(e,t,n,i){var o=r(e);Cr(o,(function(e){var n=a(t,e);l(n.resource,n,void 0,void 0)})),n&&n.call(i||br)},l=function(e,t,o,r,a){if(!n[e]){var l="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==l.indexOf("/")&&-1===l.indexOf("://")&&(l=Er.baseURL+"/"+l),n[e]=l.substring(0,l.lastIndexOf("/")),i[e]?s(e,t,o,r):br.ScriptLoader.add(l,(function(){return s(e,t,o,r)}),r,a)}};return{items:t,urls:n,lookup:i,_listeners:o,get:function(e){return i[e]?i[e].instance:void 0},dependencies:r,requireLangPack:function(e,t){var i=Er.language;if(i&&!1!==Er.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1===t.indexOf(","+i+","))return;br.ScriptLoader.add(n[e]+"/langs/"+i+".js")}},add:function(e,n,r){t.push(n),i[e]={instance:n,dependencies:r};var a=q(o,(function(t){return t.name===e}));return o=a.fail,Cr(a.pass,(function(e){e.callback()})),n},remove:function(e){delete n[e],delete i[e]},createUrl:a,addComponents:function(t,n){var i=e.urls[t];Cr(n,(function(e){br.ScriptLoader.add(i+"/"+e)}))},load:l,waitFor:function(e,t){i.hasOwnProperty(e)?t():o.push({name:e,callback:t})}}}(Tr=Er||(Er={})).PluginManager=Tr(),Tr.ThemeManager=Tr();var _r=function(e,t){Ki(e).each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))},xr=function(e,t){Li(e).fold((function(){Ki(e).each((function(e){Dr(e,t)}))}),(function(e){_r(e,t)}))},Ir=function(e,t){Vi(e).fold((function(){Dr(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))},Dr=function(e,t){e.dom().appendChild(t.dom())},wr=function(e,t){$(t,(function(t){Dr(e,t)}))},Or=function(e){e.dom().textContent="",$(zi(e),(function(e){Rr(e)}))},Rr=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},kr=function(e){var t,n=zi(e);0<n.length&&(t=e,$(n,(function(e){_r(t,e)}))),Rr(e)},Sr=function(t,n){var i=null;return{cancel:function(){null!==i&&(e.clearTimeout(i),i=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null===i&&(i=e.setTimeout((function(){t.apply(null,o),i=null}),n))}}},Ar=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ar(n())}}},Nr=function(e,t){var n=Ci(e,t);return void 0===n||""===n?[]:n.split(" ")},Mr=function(e){return void 0!==e.dom().classList},Kr=function(e,t){Mr(e)?e.dom().classList.add(t):function(e,t){return i=t,o=Nr(n=e,"class").concat([i]),bi(n,"class",o.join(" ")),!0;var n,i,o}(e,t)},Pr=function(e,t){return Mr(e)&&e.dom().classList.contains(t)},Lr=function(e,t){var n=[];return $(zi(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(Lr(e,t))})),n},Br=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),ki(r)?[]:W(r.querySelectorAll(i),ai);var i,o,r};function Fr(e,t,n,i,o){return e(n,i)?O.some(n):K(o)&&o(n)?O.none():t(n,i,o)}var zr,Hr=function(e,t,n){for(var o=e.dom(),r=K(n)?n:i(!1);o.parentNode;){var a=ai(o=o.parentNode);if(t(a))return O.some(a);if(r(a))break}return O.none()},Vr=function(e,t,n){return Fr((function(e,t){return t(e)}),Hr,e,t,n)},Wr=function(e,t,n){return Hr(e,(function(e){return Ri(e,t)}),n)},$r=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),ki(r)?O.none():O.from(r.querySelector(i)).map(ai);var i,o,r},qr=function(e,t,n){return Fr(Ri,Wr,e,t,n)},Ur=i("mce-annotation"),jr=i("data-mce-annotation"),Gr=i("data-mce-annotation-uid"),Xr=function(e,t){var n=e.selection.getRng(),i=ai(n.startContainer),o=ai(e.getBody()),r=t.fold((function(){return"."+Ur()}),(function(e){return"["+jr()+'="'+e+'"]'})),a=Hi(i,n.startOffset).getOr(i),s=qr(a,r,(function(e){return Si(e,o)})),l=function(e,t){return n=t,(i=e.dom())&&i.hasAttribute&&i.hasAttribute(n)?O.some(Ci(e,t)):O.none();var n,i};return s.bind((function(t){return l(t,""+Gr()).bind((function(n){return l(t,""+jr()).map((function(t){var i=Yr(e,n);return{uid:n,name:t,elements:i}}))}))}))},Yr=function(e,t){var n=ai(e.getBody());return Br(n,"["+Gr()+'="'+t+'"]')},Zr=0,Jr=function(e,t){return ai(e.dom().cloneNode(t))},Qr=function(e){return Jr(e,!1)},ea=function(e){return Jr(e,!0)},ta=function(t,n){var i,o,r=Ni(t).dom(),a=ai(r.createDocumentFragment()),s=(i=n,(o=(r||e.document).createElement("div")).innerHTML=i,zi(ai(o)));wr(a,s),Or(t),Dr(t,a)},na=function(e){return"\ufeff"===e},ia="\ufeff",oa=function(e){return e.replace(new RegExp("\ufeff","g"),"")},ra=Ao.isElement,aa=Ao.isText,sa=function(e){return aa(e)&&(e=e.parentNode),ra(e)&&e.hasAttribute("data-mce-caret")},la=function(e){return aa(e)&&na(e.data)},ua=function(e){return sa(e)||la(e)},ca=function(e){return e.firstChild!==e.lastChild||!Ao.isBr(e.firstChild)},da=function(e){var t=e.container();return!(!e||!Ao.isText(t))&&(t.data.charAt(e.offset())===ia||e.isAtStart()&&la(t.previousSibling))},fa=function(e){var t=e.container();return!(!e||!Ao.isText(t))&&(t.data.charAt(e.offset()-1)===ia||e.isAtEnd()&&la(t.nextSibling))},ha=function(e){return aa(e)&&e.data[0]===ia},ga=function(e){return aa(e)&&e.data[e.data.length-1]===ia},pa=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),Ao.isBogus(n=t[t.length-1])&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},ma=Ao.isContentEditableTrue,va=Ao.isContentEditableFalse,ya=Ao.isBr,ba=Ao.isText,Ta=Ao.matchNodeNames("script style textarea"),Ca=Ao.matchNodeNames("img input textarea hr iframe video audio object"),Ea=Ao.matchNodeNames("table"),_a=ua,xa=function(e){return!_a(e)&&(ba(e)?!Ta(e.parentNode):Ca(e)||ya(e)||Ea(e)||Ia(e))},Ia=function(e){return!1===(Ao.isElement(t=e)&&"true"===t.getAttribute("unselectable"))&&va(e);var t},Da=function(e,t){return xa(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Ia(e))return!1;if(ma(e))return!0}return!0}(e,t)},wa=Math.round,Oa=function(e){return e?{left:wa(e.left),top:wa(e.top),bottom:wa(e.bottom),right:wa(e.right),width:wa(e.width),height:wa(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ra=function(e,t){return e=Oa(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},ka=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Sa=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&ka(t.top-e.bottom,e,t)},Aa=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&ka(t.bottom-e.top,e,t)},Na=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Ma=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ka=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Pa=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),La=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&Pa.test(e)},Ba=function(e,t,n){return e.isSome()&&t.isSome()?O.some(n(e.getOrDie(),t.getOrDie())):O.none()},Fa=[].slice,za=Ao.isElement,Ha=xa,Va=Ao.matchStyleValues("display","block table"),Wa=Ao.matchStyleValues("float","left right"),$a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Fa.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}(za,Ha,E(Wa)),qa=E(Ao.matchStyleValues("white-space","pre pre-line pre-wrap")),Ua=Ao.isText,ja=Ao.isBr,Ga=gr.nodeIndex,Xa=Ka,Ya=function(e){return"createRange"in e?e.createRange():gr.DOM.createRng()},Za=function(e){return e&&/[\r\n\t ]/.test(e)},Ja=function(e){return!!e.setStart&&!!e.setEnd},Qa=function(e){var t,n=e.startContainer,i=e.startOffset;return!!(Za(e.toString())&&qa(n.parentNode)&&Ao.isText(n)&&(t=n.data,Za(t[i-1])||Za(t[i+1])))},es=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},ts=function(e){var t,n,i,o,r,a,s,l;return t=0<(n=e.getClientRects()).length?Oa(n[0]):Oa(e.getBoundingClientRect()),!Ja(e)&&ja(e)&&es(t)?(r=(i=e).ownerDocument,a=Ya(r),s=r.createTextNode(" "),(l=i.parentNode).insertBefore(s,i),a.setStart(s,0),a.setEnd(s,1),o=Oa(a.getBoundingClientRect()),l.removeChild(s),o):es(t)&&Ja(e)?function(e){var t=e.endContainer,n=e.startOffset,i=e.endOffset;if(e.startContainer===t&&Ao.isText(t)&&0===n&&1===i){var o=e.cloneRange();return o.setEndAfter(t),ts(o)}return null}(e):t},ns=function(e,t){var n=Ra(e,t);return n.width=1,n.right=n.left+1,n};function is(e,t,n){var o=function(){return n||(n=function(e){var t,n,i=[],o=function(e){var t,n;0!==e.height&&(0<i.length&&(t=e).left===(n=i[i.length-1]).left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right||i.push(e))},r=function(e,t){var n=Ya(e.ownerDocument);if(t<e.data.length){if(La(e.data[t]))return i;if(La(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Qa(n)))return o(ns(ts(n),!1)),i}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),Qa(n)||o(ns(ts(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Qa(n)||o(ns(ts(n),!0)))};if(Ua(e.container()))return r(e.container(),e.offset()),i;if(za(e.container()))if(e.isAtEnd())n=Xa(e.container(),e.offset()),Ua(n)&&r(n,n.data.length),$a(n)&&!ja(n)&&o(ns(ts(n),!1));else{if(n=Xa(e.container(),e.offset()),Ua(n)&&r(n,0),$a(n)&&e.isAtEnd())return o(ns(ts(n),!1)),i;t=Xa(e.container(),e.offset()-1),$a(t)&&!ja(t)&&(Va(t)||Va(n)||!$a(n))&&o(ns(ts(t),!1)),$a(n)&&o(ns(ts(n),!0))}return i}(is(e,t))),n};return{container:i(e),offset:i(t),toRange:function(){var n;return(n=Ya(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:function(){return 0<o().length},isAtStart:function(){return Ua(e),0===t},isAtEnd:function(){return Ua(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return Xa(e,n?t-1:t)}}}(zr=is||(is={})).fromRangeStart=function(e){return zr(e.startContainer,e.startOffset)},zr.fromRangeEnd=function(e){return zr(e.endContainer,e.endOffset)},zr.after=function(e){return zr(e.parentNode,Ga(e)+1)},zr.before=function(e){return zr(e.parentNode,Ga(e))},zr.isAbove=function(e,t){return Ba(Q(t.getClientRects()),ee(e.getClientRects()),Sa).getOr(!1)},zr.isBelow=function(e,t){return Ba(ee(t.getClientRects()),Q(e.getClientRects()),Aa).getOr(!1)},zr.isAtStart=function(e){return!!e&&e.isAtStart()},zr.isAtEnd=function(e){return!!e&&e.isAtEnd()},zr.isTextPosition=function(e){return!!e&&Ao.isText(e.container())},zr.isElementPosition=function(e){return!1===zr.isTextPosition(e)};var os,rs,as=is,ss=Ao.isText,ls=Ao.isBogus,us=gr.nodeIndex,cs=function(e){var t=e.parentNode;return ls(t)?cs(t):t},ds=function(e){return e?Wt.reduce(e.childNodes,(function(e,t){return ls(t)&&"BR"!==t.nodeName?e=e.concat(ds(t)):e.push(t),e}),[]):[]},fs=function(e){return function(t){return e===t}},hs=function(e){var t,n,i,o;return(ss(e)?"text()":e.nodeName.toLowerCase())+"["+(n=ds(cs(t=e)),i=Wt.findIndex(n,fs(t),t),n=n.slice(0,i+1),o=Wt.reduce(n,(function(e,t,i){return ss(t)&&ss(n[i-1])&&e++,e}),0),n=Wt.filter(n,Ao.matchNodeNames(t.nodeName)),(i=Wt.findIndex(n,fs(t),t))-o+"]")},gs=function(e,t){var n,i,o,r,a,s=[];return n=t.container(),i=t.offset(),ss(n)?o=function(e,t){for(;(e=e.previousSibling)&&ss(e);)t+=e.data.length;return t}(n,i):(i>=(r=n.childNodes).length?(o="after",i=r.length-1):o="before",n=r[i]),s.push(hs(n)),a=function(e,t,n){var i=[];for(t=t.parentNode;t!==e;t=t.parentNode)i.push(t);return i}(e,n),a=Wt.filter(a,E(Ao.isBogus)),(s=s.concat(Wt.map(a,(function(e){return hs(e)})))).reverse().join("/")+","+o},ps=function(e,t){var n,i,o;return t?(t=(n=t.split(","))[0].split("/"),o=1<n.length?n[1]:"before",(i=Wt.reduce(t,(function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,i=t[1],o=parseInt(t[2],10),r=ds(n),r=Wt.filter(r,(function(e,t){return!ss(e)||!ss(r[t-1])})),(r=Wt.filter(r,Ao.matchNodeNames(i)))[o]):null;var n,i,o,r}),e))?ss(i)?function(e,t){for(var n,i=e,o=0;ss(i);){if(n=i.data.length,o<=t&&t<=o+n){e=i,t-=o;break}if(!ss(i.nextSibling)){e=i,t=n;break}o+=n,i=i.nextSibling}return ss(e)&&t>e.data.length&&(t=e.data.length),as(e,t)}(i,parseInt(o,10)):(o="after"===o?us(i)+1:us(i),as(i.parentNode,o)):null):null},ms=function(e,t){Ao.isText(t)&&0===t.data.length&&e.remove(t)},vs=function(e,t,n){var i,o,r,a,s,l,u;Ao.isDocumentFragment(n)?(r=e,a=t,l=O.from((s=n).firstChild),u=O.from(s.lastChild),a.insertNode(s),l.each((function(e){return ms(r,e.previousSibling)})),u.each((function(e){return ms(r,e.nextSibling)}))):(i=e,t.insertNode(o=n),ms(i,o.previousSibling),ms(i,o.nextSibling))},ys=Ao.isContentEditableFalse,bs=function(e,t,n,i,o){var r,a=i[o?"startContainer":"endContainer"],s=i[o?"startOffset":"endOffset"],l=[],u=0,c=e.getRoot();for(Ao.isText(a)?l.push(n?function(e,t,n){var i,o;for(o=e(t.data.slice(0,n)).length,i=t.previousSibling;i&&Ao.isText(i);i=i.previousSibling)o+=e(i.data).length;return o}(t,a,s):s):(s>=(r=a.childNodes).length&&r.length&&(u=1,s=Math.max(0,r.length-1)),l.push(e.nodeIndex(r[s],n)+u));a&&a!==c;a=a.parentNode)l.push(e.nodeIndex(a,n));return l},Ts=function(e,t,n){var i=0;return Gt.each(e.select(t),(function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void i++})),i},Cs=function(e,t){var n,i,o,r=t?"start":"end";i=e[r+"Offset"],Ao.isElement(n=e[r+"Container"])&&"TR"===n.nodeName&&(n=(o=n.childNodes)[Math.min(t?i:i-1,o.length-1)])&&e["set"+(t?"Start":"End")](n,i=t?0:n.childNodes.length)},Es=function(e){return Cs(e,!0),Cs(e,!1),e},_s=function(e,t){var n;if(Ao.isElement(e)&&(e=Ka(e,t),ys(e)))return e;if(ua(e)){if(Ao.isText(e)&&sa(e)&&(e=e.parentNode),ys(n=e.previousSibling))return n;if(ys(n=e.nextSibling))return n}},xs=function(e,t,n){var i=n.getNode(),o=i?i.nodeName:null,r=n.getRng();if(ys(i)||"IMG"===o)return{name:o,index:Ts(n.dom,o,i)};var a,s,l,u,c,d,f,h=_s((a=r).startContainer,a.startOffset)||_s(a.endContainer,a.endOffset);return h?{name:o=h.tagName,index:Ts(n.dom,o,h)}:(d=(l=n).dom,(f={}).start=bs(d,s=e,u=t,c=r,!0),l.isCollapsed()||(f.end=bs(d,s,u,c,!1)),f)},Is=function(e,t,n){var i={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",i,"&#xFEFF;"):e.create("span",i)},Ds=function(e,t){var n=e.dom,i=e.getRng(),o=n.uniqueId(),r=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Ts(n,s,a)};var l=Es(i.cloneRange());if(!r){l.collapse(!1);var u=Is(n,o+"_end",t);vs(n,l,u)}(i=Es(i)).collapse(!0);var c=Is(n,o+"_start",t);return vs(n,i,c),e.moveToBookmark({id:o,keep:1}),{id:o}},ws={getBookmark:function(e,t,n){return 2===t?xs(oa,n,e):3===t?(o=(i=e).getRng(),{start:gs(i.dom.getRoot(),as.fromRangeStart(o)),end:gs(i.dom.getRoot(),as.fromRangeEnd(o))}):t?{rng:e.getRng()}:Ds(e,!1);var i,o},getUndoBookmark:r(xs,o,!0),getPersistentBookmark:Ds},Os="_mce_caret",Rs=function(e){return Ao.isElement(e)&&e.id===Os},ks=function(e,t){for(;t&&t!==e;){if(t.id===Os)return t;t=t.parentNode}return null},Ss=Ao.isElement,As=Ao.isText,Ns=function(e){var t=e.parentNode;t&&t.removeChild(e)},Ms=function(e,t){0===t.length?Ns(e):e.nodeValue=t},Ks=function(e){var t=oa(e);return{count:e.length-t.length,text:t}},Ps=function(e,t){return Ls(e),t},Ls=function(e){if(Ss(e)&&ua(e)&&(ca(e)?e.removeAttribute("data-mce-caret"):Ns(e)),As(e)){var t=oa(function(e){try{return e.nodeValue}catch(t){return""}}(e));Ms(e,t)}},Bs={removeAndReposition:function(e,t){return as.isTextPosition(t)?function(e,t){return As(e)&&t.container()===e?(o=Ks((n=e).data.substr(0,(i=t).offset())),r=Ks(n.data.substr(i.offset())),0<(a=o.text+r.text).length?(Ms(n,a),as(n,i.offset()-o.count)):i):Ps(e,t);var n,i,o,r,a}(e,t):(n=e,(i=t).container()===n.parentNode?function(e,t){var n,i,o,r=t.container(),a=(n=te(r.childNodes),i=e,o=z(n,i),-1===o?O.none():O.some(o)).map((function(e){return e<t.offset()?as(r,t.offset()-1):t})).getOr(t);return Ls(e),a}(n,i):Ps(n,i));var n,i},remove:Ls},Fs=ti.detect().browser,zs=Ao.isContentEditableFalse,Hs=function(e,t,n){var i,o,r,a,s,l=Ra(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(i=e.ownerDocument.documentElement,o=e.scrollLeft||i.scrollLeft,r=e.scrollTop||i.scrollTop):(s=e.getBoundingClientRect(),o=e.scrollLeft-s.left,r=e.scrollTop-s.top),l.left+=o,l.right+=o,l.top+=r,l.bottom+=r,l.width=1,0<(a=t.offsetWidth-t.clientWidth)&&(n&&(a*=-1),l.left+=a,l.right+=a),l},Vs=function(){return Fs.isIE()||Fs.isEdge()||Fs.isFirefox()},Ws=function(e){return zs(e)||Ao.isTable(e)&&Vs()},$s=Ao.isContentEditableFalse,qs=Ao.matchStyleValues("display","block table table-cell table-caption list-item"),Us=ua,js=sa,Gs=Ao.isElement,Xs=xa,Ys=function(e){return 0<e},Zs=function(e){return e<0},Js=function(e,t){for(var n;n=e(t);)if(!js(n))return n;return null},Qs=function(e,t,n,i,o){var r=new oo(e,i);if(Zs(t)){if(($s(e)||js(e))&&n(e=Js(r.prev,!0)))return e;for(;e=Js(r.prev,o);)if(n(e))return e}if(Ys(t)){if(($s(e)||js(e))&&n(e=Js(r.next,!0)))return e;for(;e=Js(r.next,o);)if(n(e))return e}return null},el=function(e,t){for(;e&&e!==t;){if(qs(e))return e;e=e.parentNode}return null},tl=function(e,t,n){return el(e.container(),n)===el(t.container(),n)},nl=function(e,t){var n,i;return t?(n=t.container(),i=t.offset(),Gs(n)?n.childNodes[i+e]:null):null},il=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},ol=function(e,t,n){var i,o,r,a;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(Us(i=n[o])&&(i=i[o]),$s(i)){if(a=n,el(i,r=t)===el(a,r))return i;break}if(Xs(i))break;n=n.parentNode}return null},rl=r(il,!0),al=r(il,!1),sl=function(e,t,n){var i,o,a,s,l=r(ol,!0,t),u=r(ol,!1,t);if(a=n.startOffset,sa(o=n.startContainer)){if(Gs(o)||(o=o.parentNode),"before"===(s=o.getAttribute("data-mce-caret"))&&Ws(i=o.nextSibling))return rl(i);if("after"===s&&Ws(i=o.previousSibling))return al(i)}if(!n.collapsed)return n;if(Ao.isText(o)){if(Us(o)){if(1===e){if(i=u(o))return rl(i);if(i=l(o))return al(i)}if(-1===e){if(i=l(o))return al(i);if(i=u(o))return rl(i)}return n}if(ga(o)&&a>=o.data.length-1)return 1===e&&(i=u(o))?rl(i):n;if(ha(o)&&a<=1)return-1===e&&(i=l(o))?al(i):n;if(a===o.data.length)return(i=u(o))?rl(i):n;if(0===a)return(i=l(o))?al(i):n}return n},ll=function(e,t){return O.from(nl(e?0:-1,t)).filter($s)},ul=function(e,t,n){var i=sl(e,t,n);return-1===e?is.fromRangeStart(i):is.fromRangeEnd(i)},cl=function(e){return O.from(e.getNode()).map(ai)},dl=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},fl=function(e,t){var n=tl(e,t);return!(n||!Ao.isBr(e.getNode()))||n};(rs=os||(os={}))[rs.Backwards=-1]="Backwards",rs[rs.Forwards=1]="Forwards";var hl,gl,pl=Ao.isContentEditableFalse,ml=Ao.isText,vl=Ao.isElement,yl=Ao.isBr,bl=xa,Tl=function(e){return Ca(e)||!!Ia(t=e)&&!0!==j(te(t.getElementsByTagName("*")),(function(e,t){return e||ma(t)}),!1);var t},Cl=Da,El=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},_l=function(e,t){if(Ys(e)){if(bl(t.previousSibling)&&!ml(t.previousSibling))return as.before(t);if(ml(t))return as(t,0)}if(Zs(e)){if(bl(t.nextSibling)&&!ml(t.nextSibling))return as.after(t);if(ml(t))return as(t,t.data.length)}return Zs(e)?yl(t)?as.before(t):as.after(t):as.before(t)},xl=function(e,t,n){var o,r,a,s,l;if(!vl(n)||!t)return null;if(t.isEqual(as.after(n))&&n.lastChild){if(l=as.after(n.lastChild),Zs(e)&&bl(n.lastChild)&&vl(n.lastChild))return yl(n.lastChild)?as.before(n.lastChild):l}else l=t;var u,c,d,f=l.container(),h=l.offset();if(ml(f)){if(Zs(e)&&0<h)return as(f,--h);if(Ys(e)&&h<f.length)return as(f,++h);o=f}else{if(Zs(e)&&0<h&&(r=El(f,h-1),bl(r)))return!Tl(r)&&(a=Qs(r,e,Cl,r))?ml(a)?as(a,a.data.length):as.after(a):ml(r)?as(r,r.data.length):as.before(r);if(Ys(e)&&h<f.childNodes.length&&(r=El(f,h),bl(r)))return yl(r)?(u=n,(d=(c=r).nextSibling)&&bl(d)?ml(d)?as(d,0):as.before(d):xl(os.Forwards,as.after(c),u)):!Tl(r)&&(a=Qs(r,e,Cl,r))?ml(a)?as(a,0):as.before(a):ml(r)?as(r,0):as.after(r);o=r||l.getNode()}return(Ys(e)&&l.isAtEnd()||Zs(e)&&l.isAtStart())&&(o=Qs(o,e,i(!0),n,!0),Cl(o,n))?_l(e,o):(r=Qs(o,e,Cl,n),!(s=Wt.last(U(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(f,n),pl)))||r&&s.contains(r)?r?_l(e,r):null:l=Ys(e)?as.after(s):as.before(s))},Il=function(e){return{next:function(t){return xl(os.Forwards,t,e)},prev:function(t){return xl(os.Backwards,t,e)}}},Dl=function(e){return as.isTextPosition(e)?0===e.offset():xa(e.getNode())},wl=function(e){if(as.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return xa(e.getNode(!0))},Ol=function(e,t){return!as.isTextPosition(e)&&!as.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Rl=function(e,t,n){var i=Il(t);return O.from(e?i.next(n):i.prev(n))},kl=function(e,t,n){return Rl(e,t,n).bind((function(i){return tl(n,i,t)&&function(e,t,n){return e?!Ol(t,n)&&!(!as.isTextPosition(i=t)&&Ao.isBr(i.getNode()))&&wl(t)&&Dl(n):!Ol(n,t)&&Dl(t)&&wl(n);var i}(e,n,i)?Rl(e,t,i):O.some(i)}))},Sl=function(e,t,n,i){return kl(e,t,n).bind((function(n){return i(n)?Sl(e,t,n,i):O.some(n)}))},Al=function(e,t){var n,i,o,r,a,s=e?t.firstChild:t.lastChild;return Ao.isText(s)?O.some(as(s,e?0:s.data.length)):s?xa(s)?O.some(e?as.before(s):Ao.isBr(a=s)?as.before(a):as.after(a)):(i=t,o=s,r=(n=e)?as.before(o):as.after(o),Rl(n,i,r)):O.none()},Nl=r(Rl,!0),Ml=r(Rl,!1),Kl={fromPosition:Rl,nextPosition:Nl,prevPosition:Ml,navigate:kl,navigateIgnore:Sl,positionIn:Al,firstPositionIn:r(Al,!0),lastPositionIn:r(Al,!1)},Pl=function(e,t){return Ao.isElement(t)&&e.isBlock(t)&&!t.innerHTML&&!de.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},Ll=function(e,t){return Kl.lastPositionIn(e).fold((function(){return!1}),(function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0}))},Bl=function(e,t,n){return!(!1!==t.hasChildNodes()||!ks(e,t)||(o=n,r=(i=t).ownerDocument.createTextNode(ia),i.appendChild(r),o.setStart(r,0),o.setEnd(r,0),0));var i,o,r},Fl=function(e,t,n,i){var o,r,a,s,l=n[t?"start":"end"],u=e.getRoot();if(l){for(a=l[0],r=u,o=l.length-1;1<=o;o--){if(s=r.childNodes,Bl(u,r,i))return!0;if(l[o]>s.length-1)return!!Bl(u,r,i)||Ll(r,i);r=s[l[o]]}3===r.nodeType&&(a=Math.min(l[0],r.nodeValue.length)),1===r.nodeType&&(a=Math.min(l[0],r.childNodes.length)),t?i.setStart(r,a):i.setEnd(r,a)}return!0},zl=function(e){return Ao.isText(e)&&0<e.data.length},Hl=function(e,t,n){var i,o,r,a,s,l,u=e.get(n.id+"_"+t),c=n.keep;if(u){if(i=u.parentNode,"start"===t?c?u.hasChildNodes()?(i=u.firstChild,o=1):zl(u.nextSibling)?(i=u.nextSibling,o=0):zl(u.previousSibling)?(i=u.previousSibling,o=u.previousSibling.data.length):(i=u.parentNode,o=e.nodeIndex(u)+1):o=e.nodeIndex(u):c?u.hasChildNodes()?(i=u.firstChild,o=1):zl(u.previousSibling)?(i=u.previousSibling,o=u.previousSibling.data.length):(i=u.parentNode,o=e.nodeIndex(u)):o=e.nodeIndex(u),s=i,l=o,!c){for(a=u.previousSibling,r=u.nextSibling,Gt.each(Gt.grep(u.childNodes),(function(e){Ao.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));u=e.get(n.id+"_"+t);)e.remove(u,!0);a&&r&&a.nodeType===r.nodeType&&Ao.isText(a)&&!de.opera&&(o=a.nodeValue.length,a.appendData(r.nodeValue),e.remove(r),s=a,l=o)}return O.some(as(s,l))}return O.none()},Vl=function(e,t,n){return ws.getBookmark(e,t,n)},Wl=function(e,t){(function(e,t){var n,i,o,r,a,s,l,u,c,d,f,h,g,p,m,v=e.dom;if(t){if(Gt.isArray(t.start))return p=t,m=(g=v).createRng(),Fl(g,!0,p,m)&&Fl(g,!1,p,m)?O.some(m):O.none();if("string"==typeof t.start)return O.some((d=t,f=(c=v).createRng(),h=ps(c.getRoot(),d.start),f.setStart(h.container(),h.offset()),h=ps(c.getRoot(),d.end),f.setEnd(h.container(),h.offset()),f));if(t.hasOwnProperty("id"))return l=Hl(o=v,"start",r=t),u=Hl(o,"end",r),Ba(l,(s=l,(a=u).isSome()?a:s),(function(e,t){var n=o.createRng();return n.setStart(Pl(o,e.container()),e.offset()),n.setEnd(Pl(o,t.container()),t.offset()),n}));if(t.hasOwnProperty("name"))return O.from((n=v).select((i=t).name)[i.index]).map((function(e){var t=n.createRng();return t.selectNode(e),t}));if(t.hasOwnProperty("rng"))return O.some(t.rng)}return O.none()})(e,t).each((function(t){e.setRng(t)}))},$l=function(e){return Ao.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},ql=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},Ul=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},jl=function(e,t,n){var i,o,r,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!function(e){return e&&/^(IMG)$/.test(e.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(r=s.childNodes).length?i=new oo(s=r[a],e.getParent(s,e.isBlock)):(i=new oo(s=r[r.length-1],e.getParent(s,e.isBlock))).next(!0),o=i.current();o;o=i.next())if(3===o.nodeType&&!ql(o))return n.setStart(o,0),void t.setRng(n)},Gl=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!ql(e))return e},Xl=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},Yl=function(e,t,n){return e.schema.isValidChild(t,n)},Zl=ql,Jl=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))),e},Ql=function(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()},eu=Ul,tu=function(e,t,n){return Ul(e,e.getStyle(t,n),n)},nu=function(e,t){var n;return e.getParent(t,(function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n})),n},iu=function(e,t,n){return e.getParents(t,n,e.getRoot())},ou=$l,ru=iu,au=Zl,su=Xl,lu=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},uu=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},cu=function(e,t,n,i){var o,r,a=n.nodeValue;return void 0===i&&(i=e?a.length:0),e?(o=a.lastIndexOf(" ",i),-1!==(o=(r=a.lastIndexOf(" ",i))<o?o:r)&&!t&&(o<i||!e)&&o<=a.length&&o++):(o=a.indexOf(" ",i),r=a.indexOf(" ",i),o=-1!==o&&(-1===r||o<r)?o:r),o},du=function(e,t,n,i,o,r){var a,s,l,u;if(3===n.nodeType){if(-1!==(l=cu(o,r,n,i)))return{container:n,offset:l};u=n}for(a=new oo(n,e.getParent(n,e.isBlock)||t);s=a[o?"prev":"next"]();)if(3!==s.nodeType||ou(s.parentNode)){if(e.isBlock(s)||Ql(s,"BR"))break}else if(-1!==(l=cu(o,r,u=s)))return{container:s,offset:l};if(u)return{container:u,offset:i=o?0:u.length}},fu=function(e,t,n,i,o){var r,a,s,l;for(3===i.nodeType&&0===i.nodeValue.length&&i[o]&&(i=i[o]),r=ru(e,i),a=0;a<r.length;a++)for(s=0;s<t.length;s++)if((!("collapsed"in(l=t[s]))||l.collapsed===n.collapsed)&&e.is(r[a],l.selector))return r[a];return i},hu=function(e,t,n,i){var o,r=e.dom,a=r.getRoot();if(t[0].wrapper||(o=r.getParent(n,t[0].block,a)),!o){var s=r.getParent(n,"LI,TD,TH");o=r.getParent(3===n.nodeType?n.parentNode:n,(function(t){return t!==a&&su(e,t)}),s)}if(o&&t[0].wrapper&&(o=ru(r,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[i]&&!r.isBlock(o[i])&&!Ql(o=o[i],"br"););return o||n},gu=function(e,t,n,i,o,r,a){var s,l,u,c,d,f;if(s=l=a?n:o,c=a?"previousSibling":"nextSibling",d=e.getRoot(),3===s.nodeType&&!au(s)&&(a?0<i:r<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(l))return l;for(u=l[c];u;u=u[c])if(!ou(u)&&!au(u)&&("BR"!==(f=u).nodeName||!f.getAttribute("data-mce-bogus")||f.nextSibling))return l;if(l===d||l.parentNode===d){s=l;break}l=l.parentNode}return s},pu=function(e,t,n,i){var o,r=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset,u=e.dom;return 1===r.nodeType&&r.hasChildNodes()&&3===(r=Ka(r,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=Ka(s,t.collapsed?l:l-1)).nodeType&&(l=s.nodeValue.length),r=uu(u,r),s=uu(u,s),(ou(r.parentNode)||ou(r))&&(r=ou(r)?r:r.parentNode,3===(r=t.collapsed?r.previousSibling||r:r.nextSibling||r).nodeType&&(a=t.collapsed?r.length:0)),(ou(s.parentNode)||ou(s))&&(s=ou(s)?s:s.parentNode,3===(s=t.collapsed?s.nextSibling||s:s.previousSibling||s).nodeType&&(l=t.collapsed?0:s.length)),t.collapsed&&((o=du(u,e.getBody(),r,a,!0,i))&&(r=o.container,a=o.offset),(o=du(u,e.getBody(),s,l,!1,i))&&(s=o.container,l=o.offset)),n[0].inline&&(s=i?s:function(e,t){var n=lu(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=lu(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e}(s,l)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===r.nodeType&&0!==a||(r=gu(u,n,r,a,s,l,!0)),n[0].inline&&3===s.nodeType&&l!==s.nodeValue.length||(s=gu(u,n,r,a,s,l,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(r=fu(u,n,t,r,"previousSibling"),s=fu(u,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(r=hu(e,n,r,"previousSibling"),s=hu(e,n,s,"nextSibling"),n[0].block&&(u.isBlock(r)||(r=gu(u,n,r,a,s,l,!0)),u.isBlock(s)||(s=gu(u,n,r,a,s,l,!1)))),1===r.nodeType&&(a=u.nodeIndex(r),r=r.parentNode),1===s.nodeType&&(l=u.nodeIndex(s)+1,s=s.parentNode),{startContainer:r,startOffset:a,endContainer:s,endOffset:l}},mu=Gt.each,vu=function(e,t,n){var i,o,r,a,s,l,u,c=t.startContainer,d=t.startOffset,f=t.endContainer,h=t.endOffset;if(0<(u=e.select("td[data-mce-selected],th[data-mce-selected]")).length)mu(u,(function(e){n([e])}));else{var g,p,m,v=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&d>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&0<e.length&&t===f&&3===t.nodeType&&e.splice(e.length-1,1),e},y=function(e,t,n){for(var i=[];e&&e!==n;e=e[t])i.push(e);return i},b=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},T=function(e,t,i){var o=i?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(l=y(a===e?a:a[o],o)).length&&(i||l.reverse(),n(v(l)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[d]),1===f.nodeType&&f.hasChildNodes()&&(p=h,--p>(m=(g=f).childNodes).length-1?p=m.length-1:p<0&&(p=0),f=m[p]||g),c===f)return n(v([c]));for(i=e.findCommonAncestor(c,f),a=c;a;a=a.parentNode){if(a===f)return T(c,i,!0);if(a===i)break}for(a=f;a;a=a.parentNode){if(a===c)return T(f,i);if(a===i)break}o=b(c,i)||c,r=b(f,i)||f,T(c,o,!0),(l=y(o===c?o:o.nextSibling,"nextSibling",r===f?r.nextSibling:r)).length&&n(v(l)),T(f,r)}},yu=(hl=hi,{get:function(e){if(!hl(e))throw new Error("Can only get text value of a text node");return gl(e).getOr("")},getOption:gl=function(e){return hl(e)?O.from(e.dom().nodeValue):O.none()},set:function(e,t){if(!hl(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),bu=function(e){return yu.get(e)},Tu=function(e,t,n,i){var o,r=t.uid,a=void 0===r?(o=(new Date).getTime(),"mce-annotation_"+Math.floor(1e9*Math.random())+ ++Zr+String(o)):r,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(t,["uid"]),l=oi("span",e);Kr(l,Ur()),bi(l,""+Gr(),a),bi(l,""+jr(),n);var u,c=i(a,s),d=c.attributes,f=c.classes,h=void 0===f?[]:f;return Ti(l,void 0===d?{}:d),u=l,$(h,(function(e){Kr(u,e)})),l};function Cu(t){var n,i=(n={},{register:function(e,t){n[e]={name:e,settings:t}},lookup:function(e){return n.hasOwnProperty(e)?O.from(n[e]).map((function(e){return e.settings})):O.none()}});!function(e,t){e.on("init",(function(){e.serializer.addNodeFilter("span",(function(e){$(e,(function(e){var n;(n=e,O.from(n.attributes.map[jr()]).bind(t.lookup)).each((function(t){!1===t.persistent&&e.unwrap()}))}))}))}))}(t,i);var o=function(t,n){var i,o,r=Ar({}),a=function(e,t){s(e,(function(e){return t(e),e}))},s=function(e,t){var n=r.get(),i=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:Ar(O.none())});n[e]=i,r.set(n)},l=(i=function(){var e,n,i=r.get(),o=(e=gi(i),(n=L.call(e,0)).sort(void 0),n);$(o,(function(e){s(e,(function(n){var i=n.previous.get();return Xr(t,O.some(e)).fold((function(){var t;i.isSome()&&(a(t=e,(function(e){$(e.listeners,(function(e){return e(!1,t)}))})),n.previous.set(O.none()))}),(function(e){var t,o,r,s=e.uid,l=e.name,u=e.elements;i.is(s)||(o=s,r=u,a(t=l,(function(e){$(e.listeners,(function(e){return e(!0,t,{uid:o,nodes:W(r,(function(e){return e.dom()}))})}))})),n.previous.set(O.some(s)))})),{previous:n.previous,listeners:n.listeners}}))}))},o=null,{cancel:function(){null!==o&&(e.clearTimeout(o),o=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==o&&e.clearTimeout(o),o=e.setTimeout((function(){i.apply(null,t),o=null}),30)}});return t.on("remove",(function(){l.cancel()})),t.on("nodeChange",(function(){l.throttle()})),{addListener:function(e,t){s(e,(function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}}))}}}(t);return{register:function(e,t){i.register(e,t)},annotate:function(e,n){i.lookup(e).each((function(i){!function(e,t,n,i){e.undoManager.transact((function(){var o,r,a,s,l=e.selection.getRng();if(l.collapsed&&(s=pu(o=e,r=l,[{inline:!0}],3===(a=r).startContainer.nodeType&&a.startContainer.nodeValue.length>=a.startOffset&&" "===a.startContainer.nodeValue[a.startOffset]),r.setStart(s.startContainer,s.startOffset),r.setEnd(s.endContainer,s.endOffset),o.selection.setRng(r)),e.selection.getRng().collapsed){var u=Tu(e.getDoc(),i,t,n.decorate);ta(u," "),e.selection.getRng().insertNode(u.dom()),e.selection.select(u.dom())}else{var c=ws.getPersistentBookmark(e.selection,!1),d=e.selection.getRng();(function(e,t,n,i,o){var r=[],a=Tu(e.getDoc(),o,n,i),s=Ar(O.none()),l=function(){s.set(O.none())},u=function(e){$(e,c)},c=function(t){var n,i;switch(function(e,t,n,i){return Ki(t).fold((function(){return"skipping"}),(function(o){return"br"===i||hi(a=t)&&"\ufeff"===bu(a)?"valid":fi(r=t)&&Pr(r,Ur())?"existing":Rs(t)?"caret":Yl(e,n,i)&&Yl(e,ci(o),n)?"valid":"invalid-child";var r,a}))}(e,t,"span",ci(t))){case"invalid-child":l();var o=zi(t);u(o),l();break;case"valid":var c=s.get().getOrThunk((function(){var e=Qr(a);return r.push(e),s.set(O.some(e)),e}));_r(n=t,i=c),Dr(i,n)}};vu(e.dom,t,(function(e){var t;l(),t=W(e,ai),u(t)}))})(e,d,t,n.decorate,i),e.selection.moveToBookmark(c)}}))}(t,e,i,n)}))},annotationChanged:function(e,t){o.addListener(e,t)},remove:function(e){Xr(t,O.some(e)).each((function(e){$(e.elements,kr)}))},getAll:function(e){var n,i,o,r,a,s=(n=e,i=ai(t.getBody()),o=Br(i,"["+jr()+'="'+n+'"]'),r={},$(o,(function(e){var t=Ci(e,Gr()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])})),r);return a=function(e){return W(e,(function(e){return e.dom()}))},function(e,t){var n={};return mi(e,(function(e,t){var i=function(e,t){return{k:t,v:a(e)}}(e,t);n[i.k]=i.v})),n}(s)}}}var Eu=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},_u=function(e,t){var n=as.after(e),i=Il(t).prev(n);return i?i.toRange():null},xu=Gt.each,Iu=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var i=function(t){var n={};return xu(e.getAttribs(t),(function(i){var o=i.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))})),n},o=function(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(void 0===(n=t[i]))return!1;if(e[i]!==n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0};return!(!o(i(t),i(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||$l(t)||$l(n))}},Du=function(e){Or(e),Dr(e,ii('<br data-mce-bogus="1">'))},wu=function(e){Wi(e).each((function(t){Pi(t).each((function(n){co(e)&&ho(t)&&co(n)&&Rr(t)}))}))},Ou=Gt.makeMap;function Ru(e){var t,n,i,o,r,a=[];return t=(e=e||{}).indent,n=Ou(e.indent_before||""),i=Ou(e.indent_after||""),o=Uo.getEncodeFunc(e.entity_encoding||"raw",e.entities),r="html"===e.element_format,{start:function(e,s,l){var u,c,d,f;if(t&&n[e]&&0<a.length&&0<(f=a[a.length-1]).length&&"\n"!==f&&a.push("\n"),a.push("<",e),s)for(u=0,c=s.length;u<c;u++)a.push(" ",(d=s[u]).name,'="',o(d.value,!0),'"');a[a.length]=!l||r?">":" />",l&&t&&i[e]&&0<a.length&&0<(f=a[a.length-1]).length&&"\n"!==f&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&i[e]&&0<a.length&&0<(n=a[a.length-1]).length&&"\n"!==n&&a.push("\n")},text:function(e,t){0<e.length&&(a[a.length]=t?e:o(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",o(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function ku(e,t){void 0===t&&(t=nr());var n=Ru(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(i){var o,r;r=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;a(e),e=e.next;);}},n.reset();var a=function(e){var i,s,l,u,c,d,f,h,g,p=o[e.type];if(p)p(e);else{if(i=e.name,s=e.shortEnded,l=e.attributes,r&&l&&1<l.length&&((d=[]).map={},g=t.getElementRule(e.name))){for(f=0,h=g.attributesOrder.length;f<h;f++)(u=g.attributesOrder[f])in l.map&&(d.map[u]=c=l.map[u],d.push({name:u,value:c}));for(f=0,h=l.length;f<h;f++)(u=l[f].name)in d.map||(d.map[u]=c=l.map[u],d.push({name:u,value:c}));l=d}if(n.start(e.name,l,s),!s){if(e=e.firstChild)for(;a(e),e=e.next;);n.end(i)}}};return 1!==i.type||e.inner?o[11](i):a(i),n.getContent()}}}var Su=function(t){return t.collapsed?t:function(t){var n=as.fromRangeStart(t),i=as.fromRangeEnd(t),o=t.commonAncestorContainer;return Kl.fromPosition(!1,o,i).map((function(r){return!tl(n,i,o)&&tl(n,r,o)?(a=n.container(),s=n.offset(),l=r.container(),u=r.offset(),(c=e.document.createRange()).setStart(a,s),c.setEnd(l,u),c):t;var a,s,l,u,c})).getOr(t)}(t)},Au=Ao.matchNodeNames("td th"),Nu=function(e,t){var n,i,o=e.selection.getRng(),r=o.startContainer,a=o.startOffset;o.collapsed&&(i=a,Ao.isText(n=r)&&" "===n.nodeValue[i-1])&&Ao.isText(r)&&(r.insertData(a-1," "),r.deleteData(a,1),o.setStart(r,a),o.setEnd(r,a),e.selection.setRng(o)),e.selection.setContent(t)},Mu=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ku=function(e,t,n){var i=e.getParam(t,n);if(-1!==i.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return i},Pu=function(e){return e.getParam("content_security_policy","")},Lu=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},Bu=function(e){return e.getParam("forced_root_block_attrs",{})},Fu=function(e){return e.getParam("automatic_uploads",!0,"boolean")},zu=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},Hu=function(e){return e.getParam("images_upload_url","","string")},Vu=function(e){return e.getParam("images_upload_base_path","","string")},Wu=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},$u=function(e){return e.getParam("images_upload_handler",null,"function")},qu=function(e){return e.getParam("content_css_cors",!1,"boolean")},Uu=function(e,t){if(!t)return t;var n=t.container(),i=t.offset();return e?la(n)?Ao.isText(n.nextSibling)?as(n.nextSibling,0):as.after(n):da(t)?as(n,i+1):t:la(n)?Ao.isText(n.previousSibling)?as(n.previousSibling,n.previousSibling.data.length):as.before(n):fa(t)?as(n,i-1):t},ju={isInlineTarget:function(e,t){return Ri(ai(t),function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(e))},findRootInline:function(e,t,n){var i,o,r=(i=e,o=t,U(gr.DOM.getParents(n.container(),"*",o),i));return O.from(r[r.length-1])},isRtl:function(e){return"rtl"===gr.DOM.getStyle(e,"direction",!0)||Mu.test(e.textContent)},isAtZwsp:function(e){return da(e)||fa(e)},normalizePosition:Uu,normalizeForwards:r(Uu,!0),normalizeBackwards:r(Uu,!1),hasSameParentBlock:function(e,t,n){var i=el(t,e),o=el(n,e);return i&&i===o}},Gu=function(e,t){return Ai(e,t)?Vr(t,(function(e){return go(e)||mo(e)}),(n=e,function(e){return Si(n,ai(e.dom().parentNode))})):O.none();var n},Xu=function(e){var t,n,i;e.dom.isEmpty(e.getBody())&&(e.setContent(""),i=(n=(t=e).getBody()).firstChild&&t.dom.isBlock(n.firstChild)?n.firstChild:n,t.selection.setCursorLocation(i,0))},Yu=function(e,t){return xa(t)&&!1===(i=e,Ao.isText(o=t)&&/^[ \t\r\n]*$/.test(o.data)&&!1===function(e,t){var n,i,o=ai(e);return n=ai(t),i=r(Si,o),Wr(n,"pre,code",i).isSome()}(i,o))||Ao.isElement(n=t)&&"A"===n.nodeName&&n.hasAttribute("name")||Zu(t);var n,i,o},Zu=Ao.hasAttribute("data-mce-bookmark"),Ju=Ao.hasAttribute("data-mce-bogus"),Qu=Ao.hasAttributeValue("data-mce-bogus","all"),ec=function(e){return function(e){var t,n,i=0;if(Yu(e,e))return!1;if(!(n=e.firstChild))return!0;t=new oo(n,e);do{if(Qu(n))n=t.next(!0);else if(Ju(n))n=t.next();else if(Ao.isBr(n))i++,n=t.next();else{if(Yu(e,n))return!1;n=t.next()}}while(n);return i<=1}(e.dom())},tc=Ii("block","position"),nc=Ii("from","to"),ic=function(e,t){var n=ai(e),i=ai(t.container());return Gu(n,i).map((function(e){return tc(e,t)}))},oc=function(e,t){return function(e,t,n){return Ai(t,e)?function(e,t){for(var n=K(t)?t:_,i=e.dom(),o=[];null!=i.parentNode;){var r=i.parentNode,a=ai(r);if(o.push(a),!0===n(a))break;i=r}return o}(e,(function(e){return n(e)||Si(e,t)})).slice(0,-1):[]}(e,t,i(!1))},rc=oc,ac=function(e,t){return[e].concat(oc(e,t))},sc=function(e){var t,n=(t=zi(e),X(t,co).fold((function(){return t}),(function(e){return t.slice(0,e)})));return $(n,Rr),n},lc=function(e,t){var n=ac(t,e);return G(n.reverse(),ec).each(Rr)},uc=function(e,t,n,i){if(ec(n))return Du(n),Kl.firstPositionIn(n.dom());0===U(Bi(i),(function(e){return!ec(e)})).length&&ec(t)&&_r(i,oi("br"));var o=Kl.prevPosition(n.dom(),as.before(i.dom()));return $(sc(t),(function(e){_r(i,e)})),lc(e,t),o},cc=function(e,t,n){if(ec(n))return Rr(n),ec(t)&&Du(t),Kl.firstPositionIn(t.dom());var i=Kl.lastPositionIn(n.dom());return $(sc(t),(function(e){Dr(n,e)})),lc(e,t),i},dc=function(e,t){Kl.positionIn(e,t.dom()).map((function(e){return e.getNode()})).map(ai).filter(ho).each(Rr)},fc=function(e,t,n){return dc(!0,t),dc(!1,n),function(e,t){return Ai(t,e)?(n=ac(e,t),O.from(n[n.length-1])):O.none();var n}(t,n).fold(r(cc,e,t,n),r(uc,e,t,n))},hc=function(e,t,n,i){return t?fc(e,i,n):fc(e,n,i)},gc=function(e,t){var n,i=ai(e.getBody());return(n=function(e,t,n){return n.collapsed?function(e,t,n){var i=ic(e,as.fromRangeStart(n)),o=i.bind((function(n){return Kl.fromPosition(t,e,n.position()).bind((function(n){return ic(e,n).map((function(n){return i=e,o=t,Ao.isBr((r=n).position().getNode())&&!1===ec(r.block())?Kl.positionIn(!1,r.block().dom()).bind((function(e){return e.isEqual(r.position())?Kl.fromPosition(o,i,e).bind((function(e){return ic(i,e)})):O.some(r)})).getOr(r):r;var i,o,r}))}))}));return Ba(i,o,nc).filter((function(e){return!1===Si((i=e).from().block(),i.to().block())&&Ki((n=e).from().block()).bind((function(e){return Ki(n.to().block()).filter((function(t){return Si(e,t)}))})).isSome()&&!1===Ao.isContentEditableFalse((t=e).from().block().dom())&&!1===Ao.isContentEditableFalse(t.to().block().dom());var t,n,i}))}(e,t,n):O.none()}(i.dom(),t,e.selection.getRng()).bind((function(e){return hc(i,t,e.from().block(),e.to().block())}))).each((function(t){e.selection.setRng(t.toRange())})),n.isSome()},pc=function(e,t){var n=ai(t),i=r(Si,e);return Hr(n,bo,i).isSome()},mc=function(e,t){return!e.selection.isCollapsed()&&function(e){var t,n,i,o,r=ai(e.getBody());return function(e,t){var n,i,o=Kl.prevPosition(e.dom(),as.fromRangeStart(t)).isNone(),r=Kl.nextPosition(e.dom(),as.fromRangeEnd(t)).isNone();return!(pc(n=e,(i=t).startContainer)||pc(n,i.endContainer))&&o&&r}(r,e.selection.getRng())?((o=e).setContent(""),o.selection.setCursorLocation(),!0):(t=r,i=(n=e.selection).getRng(),Ba(Gu(t,ai(i.startContainer)),Gu(t,ai(i.endContainer)),(function(e,o){return!1===Si(e,o)&&(i.deleteContents(),hc(t,!0,e,o).each((function(e){n.setRng(e.toRange())})),!0)})).getOr(!1))}(e)},vc=function(t){if(!A(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],i={};return $(t,(function(o,r){var a=gi(o);if(1!==a.length)throw new Error("one and only one name per case");var s=a[0],l=o[s];if(void 0!==i[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!A(l))throw new Error("case arguments must be an array");n.push(s),i[s]=function(){var i=arguments.length;if(i!==l.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+l.length+" ("+l+"), got "+i);for(var o=new Array(i),a=0;a<o.length;a++)o[a]=arguments[a];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[r].apply(null,o)},match:function(e){var t=gi(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!Z(n,(function(e){return H(t,e)})))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[s].apply(null,o)},log:function(t){e.console.log(t,{constructors:n,constructor:s,params:o})}}}})),i},yc=function(e){return cl(e).exists(ho)},bc=function(e,t,n){var i=U(ac(ai(n.container()),t),co),o=Q(i).getOr(t);return Kl.fromPosition(e,o.dom(),n).filter(yc)},Tc=function(e,t){return cl(t).exists(ho)||bc(!0,e,t).isSome()},Cc=function(e,t){return(n=t,O.from(n.getNode(!0)).map(ai)).exists(ho)||bc(!1,e,t).isSome();var n},Ec=r(bc,!1),_c=r(bc,!0),xc=function(e){return" "===e},Ic=function(e){return/^[\r\n\t ]$/.test(e)},Dc=function(e){return!Ic(e)&&!xc(e)},wc=function(e,t,n){return O.from(n.container()).filter(Ao.isText).exists((function(i){var o=e?0:-1;return t(i.data.charAt(n.offset()+o))}))},Oc=r(wc,!0,Ic),Rc=r(wc,!1,Ic),kc=function(e){var t=e.container();return Ao.isText(t)&&0===t.data.length},Sc=function(e,t){var n=nl(e,t);return Ao.isContentEditableFalse(n)&&!Ao.isBogusAll(n)},Ac=r(Sc,0),Nc=r(Sc,-1),Mc=function(e,t){return Ao.isTable(nl(e,t))},Kc=r(Mc,0),Pc=r(Mc,-1),Lc=vc([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Bc=function(e,t,n){return Kl.fromPosition(t,e,n).bind((function(o){return c=o.getNode(),bo(ai(c))||mo(ai(c))?O.none():(r=e,l=o,u=function(e){return fo(ai(e))&&!tl(s,l,r)},ll(!(a=t),s=n).fold((function(){return ll(a,l).fold(i(!1),u)}),u)?O.none():t&&Ao.isContentEditableFalse(o.getNode())||!1===t&&Ao.isContentEditableFalse(o.getNode(!0))?function(e,t,n,i){var o=i.getNode(!1===t);return Gu(ai(e),ai(n.getNode())).map((function(e){return ec(e)?Lc.remove(e.dom()):Lc.moveToElement(o)})).orThunk((function(){return O.some(Lc.moveToElement(o))}))}(e,t,n,o):t&&Nc(n)||!1===t&&Ac(n)?O.some(Lc.moveToPosition(o)):O.none());var r,a,s,l,u,c}))},Fc=function(e,t,n){if(0!==n){var i,o,r,a=e.data.slice(t,t+n);e.replaceData(t,n,(o=0===t,r=t+n>=e.data.length,j((i=a).split(""),(function(e,t){return-1!==" \f\n\r\t\v".indexOf(t)||" "===t?e.previousCharIsSpace||""===e.str&&o||e.str.length===i.length-1&&r?{previousCharIsSpace:!1,str:e.str+" "}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}}),{previousCharIsSpace:!1,str:""}).str))}},zc=function(e,t){var n,i=e.data.slice(t),o=i.length-(n=i,n.replace(/^\s+/g,"")).length;return Fc(e,t,o)},Hc=function(e,t){return i=e,o=(n=t).container(),r=n.offset(),!1===as.isTextPosition(n)&&o===i.parentNode&&r>as.before(i).offset()?as(t.container(),t.offset()-1):t;var n,i,o,r},Vc=function(e){return xa(e.previousSibling)?O.some(Ao.isText(t=e.previousSibling)?as(t,t.data.length):as.after(t)):e.previousSibling?Kl.lastPositionIn(e.previousSibling):O.none();var t},Wc=function(e){return xa(e.nextSibling)?O.some(Ao.isText(t=e.nextSibling)?as(t,0):as.before(t)):e.nextSibling?Kl.firstPositionIn(e.nextSibling):O.none();var t},$c=function(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))},qc=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(ci(t))},Uc=function(e){if(ec(e)){var t=ii('<br data-mce-bogus="1">');return Or(e),Dr(e,t),O.some(as.before(t.dom()))}return O.none()},jc=function(e,t,n,i){void 0===i&&(i=!0);var o,a=function(e,t,n){return(i=e,o=t,a=n,i?function(e,t){return Wc(t).orThunk((function(){return Vc(t)})).orThunk((function(){return Kl.nextPosition(n=e,as.after(i=t)).fold((function(){return Kl.prevPosition(n,as.before(i))}),O.some);var n,i}))}(o,a):function(e,t){return Vc(t).orThunk((function(){return Wc(t)})).orThunk((function(){return n=e,o=as.before((i=t).previousSibling?i.previousSibling:i.parentNode),Kl.prevPosition(n,o).fold((function(){return Kl.nextPosition(n,as.after(i))}),O.some);var n,i,o}))}(o,a)).map(r(Hc,n));var i,o,a}(t,e.getBody(),n.dom()),s=Hr(n,r(qc,e),(o=e.getBody(),function(e){return e.dom()===o})),l=function(e,t,n){var i,o,r,a,s=Pi(e).filter(hi),l=Li(e).filter(hi);return Rr(e),(i=s,o=l,r=t,a=function(e,t,i){var o,r,a,s,l=e.dom(),u=t.dom(),c=l.data.length;return r=u,a=n,s=Xn((o=l).data).length,o.appendData(r.data),Rr(ai(r)),a&&zc(o,s),i.container()===u?as(l,c):i},i.isSome()&&o.isSome()&&r.isSome()?O.some(a(i.getOrDie(),o.getOrDie(),r.getOrDie())):O.none()).orThunk((function(){return n&&(s.each((function(e){return t=e.dom(),n=e.dom().length,o=(i=t.data.slice(0,n)).length-Xn(i).length,Fc(t,n-o,o);var t,n,i,o})),l.each((function(e){return zc(e.dom(),0)}))),t}))}(n,a,function(e,t){return n=e.schema.getTextInlineElements(),i=ci(t),pi.call(n,i);var n,i}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(Uc).fold((function(){i&&$c(e,t,l)}),(function(n){i&&$c(e,t,O.some(n))}))},Gc=function(e,t){return e.selection.isCollapsed()?function(e,t){var n,i,o,r,a,s;return(n=e.getBody(),i=t,o=e.selection.getRng(),r=sl(i?1:-1,n,o),a=as.fromRangeStart(r),s=ai(n),!1===i&&Nc(a)?O.some(Lc.remove(a.getNode(!0))):i&&Ac(a)?O.some(Lc.remove(a.getNode())):!1===i&&Ac(a)&&Cc(s,a)?Ec(s,a).map((function(e){return Lc.remove(e.getNode())})):i&&Nc(a)&&Tc(s,a)?_c(s,a).map((function(e){return Lc.remove(e.getNode())})):function(e,t,n){return a=n.getNode(!1===(r=t)),s=r?"after":"before",Ao.isElement(a)&&a.getAttribute("data-mce-caret")===s?(i=t,o=n.getNode(!1===t),i&&Ao.isContentEditableFalse(o.nextSibling)?O.some(Lc.moveToElement(o.nextSibling)):!1===i&&Ao.isContentEditableFalse(o.previousSibling)?O.some(Lc.moveToElement(o.previousSibling)):O.none()).fold((function(){return Bc(e,t,n)}),O.some):Bc(e,t,n).bind((function(t){return i=e,o=n,t.fold((function(e){return O.some(Lc.remove(e))}),(function(e){return O.some(Lc.moveToElement(e))}),(function(e){return tl(o,e,i)?O.none():O.some(Lc.moveToPosition(e))}));var i,o}));var i,o,r,a,s}(n,i,a)).map((function(n){return n.fold((a=e,s=t,function(e){return a._selectionOverrides.hideFakeCaret(),jc(a,s,ai(e)),!0}),(o=e,r=t,function(e){var t=r?as.before(e):as.after(e);return o.selection.setRng(t.toRange()),!0}),(i=e,function(e){return i.selection.setRng(e.toRange()),!0}));var i,o,r,a,s})).getOr(!1)}(e,t):function(e,t){var n,i=e.selection.getNode();return!!Ao.isContentEditableFalse(i)&&(n=ai(e.getBody()),$(Br(n,".mce-offscreen-selection"),Rr),jc(e,t,ai(e.selection.getNode())),Xu(e),!0)}(e,t)},Xc=function(e){var t,n=function(e,t){for(;t&&t!==e;){if(Ao.isContentEditableTrue(t)||Ao.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Ao.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(as.before(t).toRange())),!0},Yc=Ao.isText,Zc=function(e){return Yc(e)&&e.data[0]===ia},Jc=function(e){return Yc(e)&&e.data[e.data.length-1]===ia},Qc=function(e){return e.ownerDocument.createTextNode(ia)},ed=function(e,t){return e?function(e){if(Yc(e.previousSibling))return Jc(e.previousSibling)||e.previousSibling.appendData(ia),e.previousSibling;if(Yc(e))return Zc(e)||e.insertData(0,ia),e;var t=Qc(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(Yc(e.nextSibling))return Zc(e.nextSibling)||e.nextSibling.insertData(0,ia),e.nextSibling;if(Yc(e))return Jc(e)||e.appendData(ia),e;var t=Qc(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},td=r(ed,!0),nd=r(ed,!1),id=function(e,t){return Ao.isText(e.container())?ed(t,e.container()):ed(t,e.getNode())},od=function(e,t){var n=t.get();return n&&e.container()===n&&la(n)},rd=function(e,t){return t.fold((function(t){Bs.remove(e.get());var n=td(t);return e.set(n),O.some(as(n,n.length-1))}),(function(t){return Kl.firstPositionIn(t).map((function(t){if(od(t,e))return as(e.get(),1);Bs.remove(e.get());var n=id(t,!0);return e.set(n),as(n,1)}))}),(function(t){return Kl.lastPositionIn(t).map((function(t){if(od(t,e))return as(e.get(),e.get().length-1);Bs.remove(e.get());var n=id(t,!1);return e.set(n),as(n,n.length-1)}))}),(function(t){Bs.remove(e.get());var n=nd(t);return e.set(n),O.some(as(n,1))}))},ad=function(e,t){for(var n=0;n<e.length;n++){var i=e[n].apply(null,t);if(i.isSome())return i}return O.none()},sd=vc([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ld=function(e,t){return el(t,e)||e},ud=function(e,t,n){var i=ju.normalizeForwards(n),o=ld(t,i.container());return ju.findRootInline(e,o,i).fold((function(){return Kl.nextPosition(o,i).bind(r(ju.findRootInline,e,o)).map((function(e){return sd.before(e)}))}),O.none)},cd=function(e,t){return null===ks(e,t)},dd=function(e,t,n){return ju.findRootInline(e,t,n).filter(r(cd,t))},fd=function(e,t,n){var i=ju.normalizeBackwards(n);return dd(e,t,i).bind((function(e){return Kl.prevPosition(e,i).isNone()?O.some(sd.start(e)):O.none()}))},hd=function(e,t,n){var i=ju.normalizeForwards(n);return dd(e,t,i).bind((function(e){return Kl.nextPosition(e,i).isNone()?O.some(sd.end(e)):O.none()}))},gd=function(e,t,n){var i=ju.normalizeBackwards(n),o=ld(t,i.container());return ju.findRootInline(e,o,i).fold((function(){return Kl.prevPosition(o,i).bind(r(ju.findRootInline,e,o)).map((function(e){return sd.after(e)}))}),O.none)},pd=function(e){return!1===ju.isRtl(vd(e))},md=function(e,t,n){return ad([ud,fd,hd,gd],[e,t,n]).filter(pd)},vd=function(e){return e.fold(o,o,o,o)},yd=function(e){return e.fold(i("before"),i("start"),i("end"),i("after"))},bd=function(e){return e.fold(sd.before,sd.before,sd.after,sd.after)},Td=function(e,t,n,i,o,r){return Ba(ju.findRootInline(t,n,i),ju.findRootInline(t,n,o),(function(t,i){return t!==i&&ju.hasSameParentBlock(n,t,i)?sd.after(e?t:i):r})).getOr(r)},Cd=function(e,t){return e.fold(i(!0),(function(e){return i=t,!(yd(n=e)===yd(i)&&vd(n)===vd(i));var n,i}))},Ed=function(e,t){return e?t.fold(n(O.some,sd.start),O.none,n(O.some,sd.after),O.none):t.fold(O.none,n(O.some,sd.before),O.none,n(O.some,sd.end))},_d=function(e,t,n,i){var o=ju.normalizePosition(e,i),a=md(t,n,o);return md(t,n,o).bind(r(Ed,e)).orThunk((function(){return s=t,l=n,u=a,c=ju.normalizePosition(o=e,i),Kl.fromPosition(o,l,c).map(r(ju.normalizePosition,o)).fold((function(){return u.map(bd)}),(function(e){return md(s,l,e).map(r(Td,o,s,l,c,e)).filter(r(Cd,u))})).filter(pd);var o,s,l,u,c}))},xd=md,Id=_d,Dd=(r(_d,!1),r(_d,!0),bd),wd=function(e){return e.fold(sd.start,sd.start,sd.end,sd.end)},Od=function(e,t,n){var i=e?1:-1;return t.setRng(as(n.container(),n.offset()+i).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Rd=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},kd=function(e){return!1!==e.settings.inline_boundaries},Sd=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Ad=function(e,t,n){return rd(t,n).map((function(t){return Rd(e,t),n}))},Nd=function(e,t,n){return function(){return!!kd(t)&&function(e,t){var n=t.selection.getRng(),i=e?as.fromRangeEnd(n):as.fromRangeStart(n);return!!function(e){return K(e.selection.getSel().modify)}(t)&&(e&&da(i)?Od(!0,t.selection,i):!(e||!fa(i))&&Od(!1,t.selection,i))}(e,t)}},Md={move:function(e,t,n){return function(){return!!kd(e)&&(i=e,o=t,a=n,s=i.getBody(),l=as.fromRangeStart(i.selection.getRng()),u=r(ju.isInlineTarget,i),Id(a,u,s,l).bind((function(e){return Ad(i,o,e)}))).isSome();var i,o,a,s,l,u}},moveNextWord:r(Nd,!0),movePrevWord:r(Nd,!1),setupSelectedState:function(e){var t=Ar(null),n=r(ju.isInlineTarget,e);return e.on("NodeChange",(function(i){var o,a,s,l;kd(e)&&(o=n,a=i.parents,s=U(e.dom.select('*[data-mce-selected="inline-boundary"]'),o),l=U(a,o),$(J(s,l),r(Sd,!1)),$(J(l,s),r(Sd,!0)),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=as.fromRangeStart(e.selection.getRng());as.isTextPosition(n)&&!1===ju.isAtZwsp(n)&&(Rd(e,Bs.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,i){if(t.selection.isCollapsed()){var o=U(i,e);$(o,(function(i){var o=as.fromRangeStart(t.selection.getRng());xd(e,t.getBody(),o).bind((function(e){return Ad(t,n,e)}))}))}}(n,e,t,i.parents))})),t},setCaretPosition:Rd},Kd=function(e,t){return function(n){return rd(t,n).map((function(t){return Md.setCaretPosition(e,t),!0})).getOr(!1)}},Pd=function(t,n,i,o){var a=t.getBody(),s=r(ju.isInlineTarget,t);t.undoManager.ignore((function(){var r,l,u;t.selection.setRng((r=i,l=o,(u=e.document.createRange()).setStart(r.container(),r.offset()),u.setEnd(l.container(),l.offset()),u)),t.execCommand("Delete"),xd(s,a,as.fromRangeStart(t.selection.getRng())).map(wd).map(Kd(t,n))})),t.nodeChanged()},Ld=function(e,t,n){if(e.selection.isCollapsed()&&!1!==e.settings.inline_boundaries){var o=as.fromRangeStart(e.selection.getRng());return function(e,t,n,o){var a,s,l=(a=e.getBody(),s=o.container(),el(s,a)||a),u=r(ju.isInlineTarget,e),c=xd(u,l,o);return c.bind((function(e){return n?e.fold(i(O.some(wd(e))),O.none,i(O.some(Dd(e))),O.none):e.fold(O.none,i(O.some(Dd(e))),O.none,i(O.some(wd(e))))})).map(Kd(e,t)).getOrThunk((function(){var i=Kl.navigate(n,l,o),r=i.bind((function(e){return xd(u,l,e)}));return c.isSome()&&r.isSome()?ju.findRootInline(u,l,o).map((function(t){return!!Ba(Kl.firstPositionIn(i=t),Kl.lastPositionIn(i),(function(e,t){var n=ju.normalizePosition(!0,e),o=ju.normalizePosition(!1,t);return Kl.nextPosition(i,n).map((function(e){return e.isEqual(o)})).getOr(!0)})).getOr(!0)&&(jc(e,n,ai(t)),!0);var i})).getOr(!1):r.bind((function(r){return i.map((function(i){return n?Pd(e,t,o,i):Pd(e,t,i,o),!0}))})).getOr(!1)}))}(e,t,n,o)}return!1},Bd=Ii("start","end"),Fd=Ii("rng","table","cells"),zd=vc([{removeTable:["element"]},{emptyCells:["cells"]}]),Hd=function(e,t){return qr(ai(e),"td,th",t)},Vd=function(e,t){return Wr(e,"table",t)},Wd=function(e){return!1===Si(e.start(),e.end())},$d=function(e,t){return Vd(e.start(),t).bind((function(n){return Vd(e.end(),t).bind((function(e){return Si(n,e)?O.some(n):O.none()}))}))},qd=function(e){return Br(e,"td,th")},Ud=function(e,t){return $d(t,e).isSome()},jd=function(e,t){return X(e,(function(e){return Si(e,t)}))},Gd=function(e){return(t=e,Ba(jd(t.cells(),t.rng().start()),jd(t.cells(),t.rng().end()),(function(e,n){return t.cells().slice(e,n+1)}))).map((function(t){var n=e.cells();return t.length===n.length?zd.removeTable(e.table()):zd.emptyCells(t)}));var t},Xd=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Yd=Xd,Zd=function(e,t){var n=function(e){return Br(e,"td[data-mce-selected],th[data-mce-selected]")}(t),i=function(e){return U(function(e){return Y(e,(function(e){var t=Ma(e);return t?[ai(t)]:[]}))}(e),bo)}(e);return 0<n.length?n:i},Jd=Zd,Qd=function(e){return Zd(Yd(e.selection.getSel()),ai(e.getBody()))},ef=function(e,t){return $(t,Du),e.selection.setCursorLocation(t[0].dom(),0),!0},tf=function(e,t){return jc(e,!1,t),!0},nf=function(e,t){return G(ac(t,e),bo)},of=function(e,t){return G(ac(t,e),(function(e){return"caption"===ci(e)}))},rf=function(e,t){return Du(t),e.selection.setCursorLocation(t.dom(),0),O.some(!0)},af=function(e,t){var n,i,o,a,s,l=ai(e.selection.getStart(!0)),u=Qd(e);return e.selection.isCollapsed()&&0===u.length?function(e,t,n){var i=ai(e.getBody());return of(i,n).fold((function(){return function(e,t,n,i){var o=as.fromRangeStart(e.selection.getRng());return nf(n,i).bind((function(i){return ec(i)?rf(e,i):(r=n,a=i,s=o,Kl.navigate(t,e.getBody(),s).bind((function(e){return nf(r,ai(e.getNode())).map((function(e){return!1===Si(e,a)}))})));var r,a,s}))}(e,t,i,n)}),(function(n){return r=t,a=i,s=n,l=as.fromRangeStart((o=e).selection.getRng()),ec(s)?rf(o,s):function(e,t,n,i,o){return Kl.navigate(n,e.getBody(),o).bind((function(r){return l=n,u=o,c=r,Kl.firstPositionIn((s=i).dom()).bind((function(e){return Kl.lastPositionIn(s.dom()).map((function(t){return l?u.isEqual(e)&&c.isEqual(t):u.isEqual(t)&&c.isEqual(e)}))})).getOr(!0)?rf(e,i):(a=i,of(t,ai(r.getNode())).map((function(e){return!1===Si(e,a)})));var a,s,l,u,c})).or(O.some(!0))}(o,a,r,s,l);var o,r,a,s,l})).getOr(!1)}(e,t,l):(i=l,o=ai((n=e).getBody()),a=n.selection.getRng(),0!==(s=Qd(n)).length?ef(n,s):function(e,t,n,i){return of(t,i).fold((function(){return i=e,function(e,t){return function(e,t){var n,i,o,a,s=r(Si,e);return(n=t,i=s,o=Hd(n.startContainer,i),a=Hd(n.endContainer,i),Ba(o,a,Bd).filter(Wd).filter((function(e){return Ud(i,e)})).orThunk((function(){return function(e,t){var n=Hd(t.startContainer,e),i=Hd(t.endContainer,e);return t.collapsed?O.none():Ba(n,i,Bd).fold((function(){return n.fold((function(){return i.bind((function(t){return Vd(t,e).bind((function(e){return Q(qd(e)).map((function(e){return Bd(e,t)}))}))}))}),(function(t){return Vd(t,e).bind((function(e){return ee(qd(e)).map((function(e){return Bd(t,e)}))}))}))}),(function(t){return Ud(e,t)?O.none():(i=e,Vd((n=t).start(),i).bind((function(e){return ee(qd(e)).map((function(e){return Bd(n.start(),e)}))})));var n,i}))}(i,n)}))).bind((function(e){return $d(t=e,s).map((function(e){return Fd(t,e,qd(e))}));var t}))}(e,t).bind(Gd)}(t,n).map((function(e){return e.fold(r(tf,i),r(ef,i))}));var i}),(function(t){return rf(e,t)})).getOr(!1)}(n,o,a,i))},sf=Ql,lf=function(e,t,n){var i=e.formatter.get(n);if(i)for(var o=0;o<i.length;o++)if(!1===i[o].inherit&&e.dom.is(t,i[o].selector))return!0;return!1},uf=function(e,t,n,i){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,(function(t){return!!lf(e,t,n)||t.parentNode===o||!!ff(e,t,n,i,!0)})),ff(e,t,n,i))},cf=function(e,t,n){return!!sf(t,n.inline)||!!sf(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},df=function(e,t,n,i,o,r){var a,s,l,u=n[i];if(n.onmatch)return n.onmatch(t,n,i);if(u)if(void 0===u.length){for(a in u)if(u.hasOwnProperty(a)){if(s="attributes"===i?e.getAttrib(t,a):tu(e,t,a),o&&!s&&!n.exact)return;if((!o||n.exact)&&!sf(s,eu(e,Jl(u[a],r),a)))return}}else for(l=0;l<u.length;l++)if("attributes"===i?e.getAttrib(t,u[l]):tu(e,t,u[l]))return n;return n},ff=function(e,t,n,i,o){var r,a,s,l,u=e.formatter.get(n),c=e.dom;if(u&&t)for(a=0;a<u.length;a++)if(cf(e.dom,t,r=u[a])&&df(c,t,r,"attributes",o,i)&&df(c,t,r,"styles",o,i)){if(l=r.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return r}},hf={matchNode:ff,matchName:cf,match:function(e,t,n,i){var o;return i?uf(e,i,t,n):(i=e.selection.getNode(),!!uf(e,i,t,n)||!((o=e.selection.getStart())===i||!uf(e,o,t,n)))},matchAll:function(e,t,n){var i,o=[],r={};return i=e.selection.getStart(),e.dom.getParent(i,(function(i){var a,s;for(a=0;a<t.length;a++)!r[s=t[a]]&&ff(e,i,s,n)&&(r[s]=!0,o.push(s))}),e.dom.getRoot()),o},canApply:function(e,t){var n,i,o,r,a,s=e.formatter.get(t),l=e.dom;if(s)for(n=e.selection.getStart(),i=iu(l,n),r=s.length-1;0<=r;r--){if(!(a=s[r].selector)||s[r].defaultBlock)return!0;for(o=i.length-1;0<=o;o--)if(l.is(i[o],a))return!0}return!1},matchesUnInheritedFormatSelector:lf},gf=function(e,t){return e.splitText(t)},pf=function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,o=e.endOffset;return t===i&&Ao.isText(t)?0<n&&n<t.nodeValue.length&&(t=(i=gf(t,n)).previousSibling,n<o?(t=i=gf(i,o-=n).previousSibling,o=i.nodeValue.length,n=0):o=0):(Ao.isText(t)&&0<n&&n<t.nodeValue.length&&(t=gf(t,n),n=0),Ao.isText(i)&&0<o&&o<i.nodeValue.length&&(o=(i=gf(i,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:i,endOffset:o}},mf="_mce_caret",vf=function(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&"\ufeff"!==e.nodeValue||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length},yf=function(e){var t;if(e)for(e=(t=new oo(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},bf=function(e){var t=oi("span");return Ti(t,{id:mf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Dr(t,ri("\ufeff")),t},Tf=function(e,t,n){void 0===n&&(n=!0);var i,o=e.dom,r=e.selection;if(vf(t))jc(e,!1,ai(t),n);else{var a=r.getRng(),s=o.getParent(t,o.isBlock),l=((i=yf(t))&&"\ufeff"===i.nodeValue.charAt(0)&&i.deleteData(0,1),i);a.startContainer===l&&0<a.startOffset&&a.setStart(l,a.startOffset-1),a.endContainer===l&&0<a.endOffset&&a.setEnd(l,a.endOffset-1),o.remove(t,!0),s&&o.isEmpty(s)&&Du(ai(s)),r.setRng(a)}},Cf=function(e,t,n){void 0===n&&(n=!0);var i=e.dom,o=e.selection;if(t)Tf(e,t,n);else if(!(t=ks(e.getBody(),o.getStart())))for(;t=i.get(mf);)Tf(e,t,!1)},Ef=function(e,t,n){var i=e.dom,o=i.getParent(n,r(Xl,e));o&&i.isEmpty(o)?n.parentNode.replaceChild(t,n):(function(e){var t=Br(e,"br"),n=U(function(e){for(var t=[],n=e.dom();n;)t.push(ai(n)),n=n.lastChild;return t}(e).slice(-1),ho);t.length===n.length&&$(n,Rr)}(ai(n)),i.isEmpty(n)?n.parentNode.replaceChild(t,n):i.insertAfter(t,n))},_f=function(e,t){return e.appendChild(t),t},xf=function(e,t){var n,i,o=(n=function(e,t){return _f(e,t.cloneNode(!1))},i=t,function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,(function(e){i=n(i,e)})),i);return _f(o,o.ownerDocument.createTextNode("\ufeff"))},If=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(ci(t))&&!Rs(t.dom())&&!Ao.isBogus(t.dom())},Df=function(e){return 1===zi(e).length},wf=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var n,o=ai(e.getBody()),a=ai(e.selection.getStart()),s=U((n=ac(a,o),X(n,co).fold(i(n),(function(e){return n.slice(0,e)}))),Df);return ee(s).map((function(n){var i,o=as.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return Ba(Kl.firstPositionIn(n),Kl.lastPositionIn(n),(function(i,o){var r=ju.normalizePosition(!0,i),a=ju.normalizePosition(!1,o),s=ju.normalizePosition(!1,t);return e?Kl.nextPosition(n,s).map((function(e){return e.isEqual(a)&&t.isEqual(r)})).getOr(!1):Kl.prevPosition(n,s).map((function(e){return e.isEqual(r)&&t.isEqual(a)})).getOr(!1)})).getOr(!0)}(t,o,n.dom())||Rs((i=n).dom())&&vf(i.dom())||(function(e,t,n,i){var o,a,s,l,u=r(If,t),c=W(U(i,u),(function(e){return e.dom()}));if(0===c.length)jc(t,e,n);else{var d=(o=n.dom(),a=c,s=bf(!1),l=xf(a,s.dom()),_r(ai(o),s),Rr(ai(o)),as(l,0));t.selection.setRng(d.toRange())}}(t,e,n,s),0))})).getOr(!1)}(e,t)},Of=Ao.isContentEditableTrue,Rf=Ao.isContentEditableFalse,kf=function(e,t,n,i,o){return t._selectionOverrides.showCaret(e,n,i,o)},Sf=function(e,t){var n,i;return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((i=(n=t).ownerDocument.createRange()).selectNode(n),i)},Af=function(e,t,n){var i=sl(1,e.getBody(),t),o=as.fromRangeStart(i),r=o.getNode();if(Rf(r))return kf(1,e,r,!o.isAtEnd(),!1);var a=o.getNode(!0);if(Rf(a))return kf(1,e,a,!1,!1);var s=e.dom.getParent(o.getNode(),(function(e){return Rf(e)||Of(e)}));return Rf(s)?kf(1,e,s,!1,n):null},Nf=function(e,t,n){return t&&t.collapsed&&Af(e,t,n)||t},Mf=function(e,t,n,i,o,r){var a,s,l=kf(i,e,r.getNode(!o),o,!0);if(t.collapsed){var u=t.cloneRange();o?u.setEnd(l.startContainer,l.startOffset):u.setStart(l.endContainer,l.endOffset),u.deleteContents()}else t.deleteContents();return e.selection.setRng(l),a=e.dom,Ao.isText(s=n)&&0===s.data.length&&a.remove(s),!0},Kf=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Ao.isText(n.commonAncestorContainer))return!1;var i=t?os.Forwards:os.Backwards,o=Il(e.getBody()),a=r(dl,o.next),s=r(dl,o.prev),l=t?a:s,u=t?Ac:Nc,c=ul(i,e.getBody(),n),d=ju.normalizePosition(t,l(c));if(!d)return!1;if(u(d))return Mf(e,n,c.getNode(),i,t,d);var f=l(d);return!!(f&&u(f)&&fl(d,f))&&Mf(e,n,c.getNode(),i,t,f)}(e,t)},Pf=function(e,t){e.getDoc().execCommand(t,!1,null)},Lf=function(e){return function(t,n){return O.from(n).map(ai).filter(fi).bind((function(n){return function(e,t,n){var i=function(t){return n=e,i=t.dom(),o=xi(i,n),O.from(o).filter((function(e){return 0<e.length}));var n,i,o};return Vr(ai(n),(function(e){return i(e).isSome()}),(function(e){return Si(ai(t),e)})).bind(i)}(e,t,n.dom()).or((i=e,o=n.dom(),O.from(gr.DOM.getStyle(o,i,!0))));var i,o})).getOr("")}},Bf={getFontSize:Lf("font-size"),getFontFamily:n((function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),Lf("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,i=Math.pow(10,t||0),Math.round(n*i)/i+"pt"):e;var n,i}},Ff=function(e){return Kl.firstPositionIn(e.getBody()).map((function(e){var t=e.container();return Ao.isText(t)?t.parentNode:t}))},zf=function(e){return O.from(e.selection.getRng()).bind((function(t){var n,i=e.getBody();return(n=t).startContainer===i&&0===n.startOffset?O.none():O.from(e.selection.getStart(!0))}))},Hf=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var i=function(e){return Gt.explode(e.getParam("font_size_style_values",""))}(e),o=function(e){return Gt.explode(e.getParam("font_size_classes",""))}(e);return o?o[n-1]||t:i[n-1]||t}return t}return t},Vf=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Wf=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},$f=function(e,t,n){return Wf(e,t,(function(e){return e.nodeName===n}))},qf=function(e){return e&&"TABLE"===e.nodeName},Uf=function(e,t,n){for(var i=new oo(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=i[n?"prev":"next"]();)if(Ao.isBr(t))return!0},jf=function(e,t,n,i,o){var r,a,s,l,u,c,d=e.getRoot(),f=e.schema.getNonEmptyElements();if(s=e.getParent(o.parentNode,e.isBlock)||d,i&&Ao.isBr(o)&&t&&e.isEmpty(s))return O.some(is(o.parentNode,e.nodeIndex(o)));for(r=new oo(o,s);l=r[i?"prev":"next"]();){if("false"===e.getContentEditableParent(l)||(c=d,ua(u=l)&&!1===Wf(u,c,Rs)))return O.none();if(Ao.isText(l)&&0<l.nodeValue.length)return!1===$f(l,d,"A")?O.some(is(l,i?l.nodeValue.length:0)):O.none();if(e.isBlock(l)||f[l.nodeName.toLowerCase()])return O.none();a=l}return n&&a?O.some(is(a,0)):O.none()},Gf=function(e,t,n,i){var o,r,a,s,l,u,c,d,f,h=e.getRoot(),g=!1;if(r=i[(n?"start":"end")+"Offset"],c=Ao.isElement(o=i[(n?"start":"end")+"Container"])&&r===o.childNodes.length,l=e.schema.getNonEmptyElements(),u=n,ua(o))return O.none();if(Ao.isElement(o)&&r>o.childNodes.length-1&&(u=!1),Ao.isDocument(o)&&(o=h,r=0),o===h){if(u&&(s=o.childNodes[0<r?r-1:0])){if(ua(s))return O.none();if(l[s.nodeName]||qf(s))return O.none()}if(o.hasChildNodes()){if(r=Math.min(!u&&0<r?r-1:r,o.childNodes.length-1),r=Ao.isText(o=o.childNodes[r])&&c?o.data.length:0,!t&&o===h.lastChild&&qf(o))return O.none();if(function(e,t){for(;t&&t!==e;){if(Ao.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(h,o)||ua(o))return O.none();if(o.hasChildNodes()&&!1===qf(o)){a=new oo(s=o,h);do{if(Ao.isContentEditableFalse(s)||ua(s)){g=!1;break}if(Ao.isText(s)&&0<s.nodeValue.length){r=u?0:s.nodeValue.length,o=s,g=!0;break}if(l[s.nodeName.toLowerCase()]&&(!(d=s)||!/^(TD|TH|CAPTION)$/.test(d.nodeName))){r=e.nodeIndex(s),o=s.parentNode,u||r++,g=!0;break}}while(s=u?a.next():a.prev())}}}return t&&(Ao.isText(o)&&0===r&&jf(e,c,t,!0,o).each((function(e){o=e.container(),r=e.offset(),g=!0})),Ao.isElement(o)&&((s=o.childNodes[r])||(s=o.childNodes[r-1]),!s||!Ao.isBr(s)||(f=s).previousSibling&&"A"===f.previousSibling.nodeName||Uf(e,s,!1)||Uf(e,s,!0)||jf(e,c,t,!0,s).each((function(e){o=e.container(),r=e.offset(),g=!0})))),u&&!t&&Ao.isText(o)&&r===o.nodeValue.length&&jf(e,c,t,!1,o).each((function(e){o=e.container(),r=e.offset(),g=!0})),g?O.some(is(o,r)):O.none()},Xf=function(e,t){var n=t.collapsed,i=t.cloneRange(),o=is.fromRangeStart(t);return Gf(e,n,!0,i).each((function(e){n&&is.isAbove(o,e)||i.setStart(e.container(),e.offset())})),n||Gf(e,n,!1,i).each((function(e){i.setEnd(e.container(),e.offset())})),n&&i.collapse(!0),Vf(t,i)?O.none():O.some(i)},Yf=function(e,t,n){var i=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(i,n),t.scrollIntoView(i),e.remove(i)},Zf=function(e,t,n,i){var o=e.createRng();i?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},Jf=function(e,t){var n=oi("br");_r(ai(t),n),e.undoManager.add()},Qf=function(e,t){eh(e.getBody(),t)||xr(ai(t),oi("br"));var n=oi("br");xr(ai(t),n),Yf(e.dom,e.selection,n.dom()),Zf(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},eh=function(e,t){return n=as.after(t),!!Ao.isBr(n.getNode())||Kl.nextPosition(e,as.after(t)).map((function(e){return Ao.isBr(e.getNode())})).getOr(!1);var n},th=function(e){return e&&"A"===e.nodeName&&"href"in e},nh=function(e){return e.fold(i(!1),th,th,i(!1))},ih=function(e,n){n.fold(t,r(Jf,e),r(Qf,e),t)},oh=function(e,t){var n,i,o,a=(i=r(ju.isInlineTarget,n=e),o=as.fromRangeStart(n.selection.getRng()),xd(i,n.getBody(),o).filter(nh));a.isSome()?a.each(r(ih,e)):function(e,t){var n,i,o=e.selection,r=e.dom,a=o.getRng();Xf(r,a).each((function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var s=a.startOffset,l=a.startContainer;if(1===l.nodeType&&l.hasChildNodes()){var u=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=u&&3===l.nodeType?l.nodeValue.length:0}var c=r.getParent(l,r.isBlock),d=c?r.getParent(c.parentNode,r.isBlock):null;"LI"!==(d?d.nodeName.toUpperCase():"")||t&&t.ctrlKey||(c=d),l&&3===l.nodeType&&s>=l.nodeValue.length&&(function(e,t,n){for(var i,o=new oo(t,n),r=e.getNonEmptyElements();i=o.next();)if(r[i.nodeName.toLowerCase()]||0<i.length)return!0}(e.schema,l,c)||(n=r.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),i=!0)),n=r.create("br"),vs(r,a,n),Yf(r,o,n),Zf(r,o,n,i),e.undoManager.add()}(e,t)},rh={create:Ii("start","soffset","finish","foffset")},ah=(vc([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(e){return e.fold(o,o,o)}),sh=vc([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lh={domRange:sh.domRange,relative:sh.relative,exact:sh.exact,exactFromRange:function(e){return sh.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=e.match({domRange:function(e){return ai(e.startContainer)},relative:function(e,t){return ah(e)},exact:function(e,t,n,i){return e}});return Mi(t)},range:rh.create},uh=ti.detect().browser,ch=function(e,t){var n=hi(t)?bu(t).length:zi(t).length+1;return n<e?n:e<0?0:e},dh=function(e){return lh.range(e.start(),ch(e.soffset(),e.start()),e.finish(),ch(e.foffset(),e.finish()))},fh=function(e,t){return!Ao.isRestrictedNode(t.dom())&&(Ai(e,t)||Si(e,t))},hh=function(e){return function(t){return fh(e,t.start())&&fh(e,t.finish())}},gh=function(e){return lh.range(ai(e.startContainer),e.startOffset,ai(e.endContainer),e.endOffset)},ph=function(e,t){return O.from(t).filter(hh(e)).map(dh)},mh=function(t){var n=e.document.createRange();try{return n.setStart(t.start().dom(),t.soffset()),n.setEnd(t.finish().dom(),t.foffset()),O.some(n)}catch(l){return O.none()}},vh=function(e){return(e.bookmark?e.bookmark:O.none()).bind(r(ph,ai(e.getBody()))).bind(mh)},yh=function(e){var t=function(e){return!0===e.inline||uh.isIE()}(e)?function(e){return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?O.from(t.getRangeAt(0)):O.none()).map(gh)}(Mi(e).dom()).filter(hh(e))}(ai(e.getBody())):O.none();e.bookmark=t.isSome()?t:e.bookmark},bh=vh,Th=function(e){return po(e)||mo(e)},Ch=Gt.each,Eh=Gt.extend,_h=Gt.map,xh=Gt.inArray;function Ih(e){var t,n,i,o,r={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",(function(){t=e.dom,n=e.selection,a=e.settings,i=e.formatter}));var s=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=r.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(a){}return!1}},l=function(e,t){t=t||"exec",Ch(e,(function(e,n){Ch(n.toLowerCase().split(","),(function(n){r[t][n]=e}))}))},u=function(t,n,i){t=t.toLowerCase(),r.value[t]=function(){return n.call(i||e)}};Eh(this,{execCommand:function(t,n,i,o){var a,s,l=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?function(e){vh(e).each((function(t){e.selection.setRng(t)}))}(e):e.focus(),(o=e.fire("BeforeExecCommand",{command:t,ui:n,value:i})).isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=r.exec[s])return a(s,n,i),e.fire("ExecCommand",{command:t,ui:n,value:i}),!0;if(Ch(e.plugins,(function(o){if(o.execCommand&&o.execCommand(t,n,i))return e.fire("ExecCommand",{command:t,ui:n,value:i}),!(l=!0)})),l)return l;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,i))return e.fire("ExecCommand",{command:t,ui:n,value:i}),!0;try{l=e.getDoc().execCommand(t,n,i)}catch(u){}return!!l&&(e.fire("ExecCommand",{command:t,ui:n,value:i}),!0)}},queryCommandState:s,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=r.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(a){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),r.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(o){}return!1},addCommands:l,addCommand:function(t,n,i){t=t.toLowerCase(),r.exec[t]=function(t,o,r,a){return n.call(i||e,o,r,a)}},addQueryStateHandler:function(t,n,i){t=t.toLowerCase(),r.state[t]=function(){return n.call(i||e)}},addQueryValueHandler:u,hasCustomCommand:function(e){return e=e.toLowerCase(),!!r.exec[e]}});var c=function(t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=null),e.getDoc().execCommand(t,n,i)},d=function(e){return i.match(e)},f=function(t,n){i.toggle(t,n?{value:n}:void 0),e.nodeChanged()},h=function(e){o=n.getBookmark(e)},g=function(){n.moveToBookmark(o)};l({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(n){var i,o=e.getDoc();try{c(n)}catch(t){i=!0}if("paste"!==n||o.queryCommandEnabled(n)||(i=!0),i||!o.queryCommandSupported(n)){var r=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");de.mac&&(r=r.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:r,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else i.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Ch("left,center,right,justify".split(","),(function(e){t!==e&&i.remove("align"+e)})),"none"!==t&&f("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var i,o;c(e),(i=t.getParent(n.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((o=i.parentNode).nodeName)&&(h(),t.split(o,i),g())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){f(e)},"ForeColor,HiliteColor":function(e,t,n){f(e,n)},FontName:function(t,n,i){var o;(o=e).formatter.toggle("fontname",{value:Hf(o,i)}),o.nodeChanged()},FontSize:function(t,n,i){var o;(o=e).formatter.toggle("fontsize",{value:Hf(o,i)}),o.nodeChanged()},RemoveFormat:function(e){i.remove(e)},mceBlockQuote:function(){f("blockquote")},FormatBlock:function(e,t,n){return f(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,i,o){var r=o||n.getNode();r!==e.getBody()&&(h(),e.dom.remove(r,!0),g())},mceSelectNodeDepth:function(i,o,r){var a=0;t.getParent(n.getNode(),(function(e){if(1===e.nodeType&&a++===r)return n.select(e),!1}),e.getBody())},mceSelectNode:function(e,t,i){n.select(i)},mceInsertContent:function(t,n,i){!function(e,t){var n,i,o="string"!=typeof(n=t)?(i=Gt.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:i}):{content:n,details:{}};!function(e,t,n){var i,o,r,a,s,l,u,c,d,f,h,g=e.selection,p=e.dom;if(/^ | $/.test(t)&&(t=function(e,t){var n,i;i=e.startOffset;var o=function(e){return n[e]&&3===n[e].nodeType};return 3===(n=e.startContainer).nodeType&&(0<i?t=t.replace(/^&nbsp;/," "):o("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),i<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(g.getRng(),t)),i=e.parser,h=n.merge,o=ku({validate:e.settings.validate},e.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',(l=e.fire("BeforeSetContent",l={content:t,format:"html",selection:!0,paste:n.paste})).isDefaultPrevented())e.fire("SetContent",{content:l.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=l.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,f);var m,v,y,b,T,C=(c=g.getRng()).startContainer||(c.parentElement?c.parentElement():null),E=e.getBody();C===E&&g.isCollapsed()&&p.isBlock(E.firstChild)&&(m=E.firstChild)&&!e.schema.getShortEndedElements()[m.nodeName]&&p.isEmpty(E.firstChild)&&((c=p.createRng()).setStart(E.firstChild,0),c.setEnd(E.firstChild,0),g.setRng(c)),g.isCollapsed()||(e.selection.setRng(Su(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),y=t,T=(v=e.selection.getRng()).startOffset,3===(b=v.startContainer).nodeType&&v.collapsed&&(" "===b.data[T]?(b.deleteData(T,1),/[\u00a0| ]$/.test(y)||(y+=" ")):" "===b.data[T-1]&&(b.deleteData(T-1,1),/[\u00a0| ]$/.test(y)||(y=" "+y))),t=y);var _,x,I,D={context:(r=g.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(s=i.parse(t,D),!0===n.paste&&function(e,t){var n,i,o,r,a,s,l=t.firstChild,u=t.lastChild;return l&&"meta"===l.name&&(l=l.next),u&&"mce_marker"===u.attr("id")&&(u=u.prev),i=u,s=(n=e).getNonEmptyElements(),i&&(i.isEmpty(s)||(o=i,n.getBlockElements()[o.name]&&(a=o).firstChild&&a.firstChild===a.lastChild&&("br"===(r=o.firstChild).name||" "===r.value)))&&(u=u.prev),!(!l||l!==u||"ul"!==l.name&&"ol"!==l.name)}(e.schema,s)&&function(e,t){return!!Eu(e,t)}(p,r))return c=function(e,t,n,i){var o,r,a,s,l,u,c,d,f,h,g,p,m,v,y,b,T,C=(o=t,l=e.serialize(i),a=(r=o.createFragment(l)).firstChild,s=r.lastChild,a&&"META"===a.nodeName&&a.parentNode.removeChild(a),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),r),E=Eu(t,n.startContainer),_=function(e){return 0<e.length&&(!(t=e[e.length-1]).firstChild||function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&(" "===(t=e.firstChild).data||Ao.isBr(t));var t}(t))?e.slice(0,-1):e;var t}(function(e){return Gt.grep(e.childNodes,(function(e){return"LI"===e.nodeName}))}(C.firstChild)),x=t.getRoot(),I=function(e){var i=as.fromRangeStart(n),o=Il(t.getRoot()),r=1===e?o.prev(i):o.next(i);return!r||Eu(t,r.getNode())!==E};return I(1)?function(e,t,n){var i,o,r,a=e.parentNode;return Gt.each(t,(function(t){a.insertBefore(t,e)})),i=n,o=as.before(e),(r=Il(i).next(o))?r.toRange():null}(E,_,x):I(2)?(u=E,d=x,t.insertAfter((c=_).reverse(),u),_u(c[0],d)):(h=_,g=x,p=f=E,v=(m=n).cloneRange(),y=m.cloneRange(),v.setStartBefore(p),y.setEndAfter(p),b=[v.cloneContents(),y.cloneContents()],(T=f.parentNode).insertBefore(b[0],f),Gt.each(h,(function(e){T.insertBefore(e,f)})),T.insertBefore(b[1],f),T.removeChild(f),_u(h[h.length-1],g))}(o,p,e.selection.getRng(),s),e.selection.setRng(c),void e.fire("SetContent",l);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(s),"mce_marker"===(d=s.lastChild).attr("id"))for(d=(u=d).prev;d;d=d.walk(!0))if(3===d.type||!p.isBlock(d.name)){e.schema.isValidChild(d.parent.name,"span")&&d.parent.insert(u,d,"br"===d.name);break}if(e._selectionOverrides.showBlockCaretContainer(r),D.invalid){for(Nu(e,f),r=g.getNode(),a=e.getBody(),9===r.nodeType?r=d=a:d=r;d!==a;)d=(r=d).parentNode;t=r===a?a.innerHTML:p.getOuterHTML(r),t=o.serialize(i.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return o.serialize(s)})))),r===a?p.setHTML(a,t):p.setOuterHTML(r,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var i=n.firstChild;!i||i===n.lastChild&&"BR"===i.nodeName?e.dom.setHTML(n,t):Nu(e,t)}}(e,t=o.serialize(s),r);!function(e,t){var n=e.schema.getTextInlineElements(),i=e.dom;if(t){var o=e.getBody(),r=new Iu(i);Gt.each(i.select("*[data-mce-fragment]"),(function(e){for(var t=e.parentNode;t&&t!==o;t=t.parentNode)n[e.nodeName.toLowerCase()]&&r.compare(t,e)&&i.remove(e,!0)}))}}(e,h),function(e,t){var n,i,o,r,a,s=e.dom,l=e.selection;if(t){if(e.selection.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return s.remove(t),l.select(n);var u=s.createRng();(r=t.previousSibling)&&3===r.nodeType?(u.setStart(r,r.nodeValue.length),de.ie||(a=t.nextSibling)&&3===a.nodeType&&(r.appendData(a.data),a.parentNode.removeChild(a))):(u.setStartBefore(t),u.setEndBefore(t)),i=s.getParent(t,s.isBlock),s.remove(t),i&&s.isEmpty(i)&&(e.$(i).empty(),u.setStart(i,0),u.setEnd(i,0),Au(i)||i.getAttribute("data-mce-fragment")||!(o=function(t){var n=as.fromRangeStart(t);if(n=Il(e.getBody()).next(n))return n.toRange()}(u))?s.add(i,s.create("br",{"data-mce-bogus":"1"})):(u=o,s.remove(i))),l.setRng(u)}}(e,p.get("mce_marker")),_=e.getBody(),Gt.each(_.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")})),x=e.dom,I=e.selection.getStart(),O.from(x.getParent(I,"td,th")).map(ai).each(wu),e.fire("SetContent",l),e.addVisual()}}(e,o.content,o.details)}(e,i)},mceInsertRawHTML:function(t,i,o){n.setContent("tiny_mce_marker");var r=e.getContent();e.setContent(r.replace(/tiny_mce_marker/g,(function(){return o})))},mceToggleFormat:function(e,t,n){f(n)},mceSetContent:function(t,n,i){e.setContent(i)},"Indent,Outdent":function(t){!function(e,t){var n=e.settings,i=e.dom,o=e.selection,r=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),l=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||i.getParent(o.getNode(),i.isBlock)||r.apply("div"),$(function(e){return U(W(e.selection.getSelectedBlocks(),ai),(function(e){return!Th(e)&&!Ki(e).map(Th).getOr(!1)}))}(e),(function(e){!function(e,t,n,i,o,r){if("false"!==e.getContentEditable(r)){var a=n?"margin":"padding";if(a="TABLE"===r.nodeName?"margin":a,a+="rtl"===e.getStyle(r,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(r.style[a]||0,10)-i);e.setStyle(r,a,s?s+o:"")}else s=parseInt(r.style[a]||0,10)+i+o,e.setStyle(r,a,s)}}(i,t,l,s,a,e.dom())}))}(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,i,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,o,r){var a;"string"==typeof r&&(r={href:r}),a=t.getParent(n.getNode(),"a"),r.href=r.href.replace(" ","%20"),a&&r.href||i.remove("link"),r.href&&i.apply("link",r,a)},selectAll:function(){var e=t.getParent(n.getStart(),Ao.isContentEditableTrue);if(e){var i=t.createRng();i.selectNodeContents(e),n.setRng(i)}},delete:function(){!function(e){Gc(e,!1)||Kf(e,!1)||Ld(e,!1)||gc(e,!1)||af(e)||mc(e)||wf(e,!1)||(Pf(e,"Delete"),Xu(e))}(e)},forwardDelete:function(){!function(e){Gc(e,!0)||Kf(e,!0)||Ld(e,!0)||gc(e,!0)||af(e)||mc(e)||wf(e,!0)||Pf(e,"ForwardDelete")}(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,i){return oh(e,i),!0}});var p=function(e){return function(){var o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),r=_h(o,(function(t){return!!i.matchNode(t,e)}));return-1!==xh(r,!0)}};l({JustifyLeft:p("alignleft"),JustifyCenter:p("aligncenter"),JustifyRight:p("alignright"),JustifyFull:p("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return d(e)},mceBlockQuote:function(){return d("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var i=t.getParent(n.getNode(),"ul,ol");return i&&("insertunorderedlist"===e&&"UL"===i.tagName||"insertorderedlist"===e&&"OL"===i.tagName)}},"state"),l({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),u("FontName",(function(){return zf(t=e).fold((function(){return Ff(t).map((function(e){return Bf.getFontFamily(t.getBody(),e)})).getOr("")}),(function(e){return Bf.getFontFamily(t.getBody(),e)}));var t}),this),u("FontSize",(function(){return zf(t=e).fold((function(){return Ff(t).map((function(e){return Bf.getFontSize(t.getBody(),e)})).getOr("")}),(function(e){return Bf.getFontSize(t.getBody(),e)}));var t}),this)}var Dh=Gt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),wh=function(e){var t,n,i=this,o={},r=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||i,n=e.toggleEvent||r;var s=function(e,t,a,s){var l,u,c;if(!1===t&&(t=r),t)for(t={func:t},s&&Gt.extend(t,s),c=(u=e.toLowerCase().split(" ")).length;c--;)(l=o[e=u[c]])||(l=o[e]=[],n(e,!0)),a?l.unshift(t):l.push(t);return i},l=function(e,t){var r,a,s,l,u;if(e)for(r=(l=e.toLowerCase().split(" ")).length;r--;){if(a=o[e=l[r]],!e){for(s in o)n(s,!1),delete o[s];return i}if(a){if(t)for(u=a.length;u--;)a[u].func===t&&(a=a.slice(0,u).concat(a.slice(u+1)),o[e]=a);else a.length=0;a.length||(n(e,!1),delete o[e])}}else{for(e in o)n(e,!1);o={}}return i};i.fire=function(n,i){var s,u,c,d;if(n=n.toLowerCase(),(i=i||{}).type=n,i.target||(i.target=t),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=a},i.stopPropagation=function(){i.isPropagationStopped=a},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=a},i.isDefaultPrevented=r,i.isPropagationStopped=r,i.isImmediatePropagationStopped=r),e.beforeFire&&e.beforeFire(i),s=o[n])for(u=0,c=s.length;u<c;u++){if((d=s[u]).once&&l(n,d.func),i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(!1===d.func.call(t,i))return i.preventDefault(),i}return i},i.on=s,i.off=l,i.once=function(e,t,n){return s(e,t,n,{once:!0})},i.has=function(e){return e=e.toLowerCase(),!(!o[e]||0===o[e].length)}};wh.isNative=function(e){return!!Dh[e.toLowerCase()]};var Oh,Rh=function(e){return e._eventDispatcher||(e._eventDispatcher=new wh({scope:e,toggleEvent:function(t,n){wh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},kh={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;if(t=Rh(this).fire(e,t,n),!1!==n&&this.parent)for(var i=this.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},on:function(e,t,n){return Rh(this).on(e,t,n)},off:function(e,t){return Rh(this).off(e,t)},once:function(e,t){return Rh(this).once(e,t)},hasEventListeners:function(e){return Rh(this).has(e)}},Sh=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(u){}},Ah=function(e,t){(function(e,t,n){var i,o;Pr(e,t)&&!1===n?(o=t,Mr(i=e)?i.dom().classList.remove(o):function(e,t){return"mce-content-readonly",0<(o=U(Nr(n=e,i="class"),(function(e){return"mce-content-readonly"!==e}))).length?bi(n,i,o.join(" ")):Ei(n,i),!1;var n,i,o}(i),function(e){0===(Mr(e)?e.dom().classList:Nr(e,"class")).length&&Ei(e,"class")}(i)):n&&Kr(e,t)})(ai(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",Sh(e,"StyleWithCSS",!1),Sh(e,"enableInlineTableEditing",!1),Sh(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},Nh=gr.DOM,Mh=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=Nh.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},Kh=function(e,t,n){var i;(i=e).hidden||i.readonly?!0===e.readonly&&n.preventDefault():e.fire(t,n)},Ph=function(e,t){var n,i;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=Mh(e,t),e.settings.event_root){if(Oh||(Oh={},e.editorManager.on("removeEditor",(function(){var t;if(!e.editorManager.activeEditor&&Oh){for(t in Oh)e.dom.unbind(Mh(e,t));Oh=null}}))),Oh[t])return;Oh[t]=i=function(n){for(var i=n.target,o=e.editorManager.get(),r=o.length;r--;){var a=o[r].getBody();(a===i||Nh.isChildOf(i,a))&&Kh(o[r],t,n)}},Nh.bind(n,t,i)}else Nh.bind(n,t,i=function(n){Kh(e,t,n)}),e.delegates[t]=i},Lh={bindPendingEventDelegates:function(){var e=this;Gt.each(e._pendingNativeEvents,(function(t){Ph(e,t)}))},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?Ph(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Mh(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),i=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(Mh(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&i&&(n.onload=null,i.unbind(t.getWin()),i.unbind(t.getDoc())),i&&(i.unbind(n),i.unbind(t.getContainer()))}},Bh=Lh=Gt.extend({},kh,Lh),Fh=Ii("sections","settings"),zh=ti.detect().deviceType.isTouch(),Hh=["lists","autolink","autosave"],Vh={theme:"mobile"},Wh=function(e){var t=A(e)?e.join(" "):e,n=W(k(t)?t.split(" "):[],Gn);return U(n,(function(e){return 0<e.length}))},$h=function(e,t){return e.sections().hasOwnProperty(t)},qh=function(e,t,n,i){var o,a=Wh(n.forced_plugins),s=Wh(i.plugins),l=(o=e&&$h(t,"mobile")?U(s,r(H,Hh)):s,[].concat(Wh(a)).concat(Wh(o)));return Gt.extend(i,{plugins:l.join(" ")})},Uh=function(e,t,n){return O.from(t.settings[n]).filter(e)},jh=Gt.each,Gh=Gt.explode,Xh={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Yh=Gt.makeMap("alt,ctrl,shift,meta,access");function Zh(e){var t={},n=[],i=function(e){var t,n,i={};for(n in jh(Gh(e,"+"),(function(e){e in Yh?i[e]=!0:/^[0-9]{2,}$/.test(e)?i.keyCode=parseInt(e,10):(i.charCode=e.charCodeAt(0),i.keyCode=Xh[e]||e.toUpperCase().charCodeAt(0))})),t=[i.keyCode],Yh)i[n]?t.push(n):i[n]=!1;return i.id=t.join(","),i.access&&(i.alt=!0,de.mac?i.ctrl=!0:i.shift=!0),i.meta&&(de.mac?i.meta=!0:(i.ctrl=!0,i.meta=!1)),i},o=function(t,n,o,r){var a;return(a=Gt.map(Gh(t,">"),i))[a.length-1]=Gt.extend(a[a.length-1],{func:o,scope:r||e}),Gt.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},r=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},a=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",(function(e){var i,o;((o=e).altKey||o.ctrlKey||o.metaKey||"keydown"===(i=e).type&&112<=i.keyCode&&i.keyCode<=123)&&!e.isDefaultPrevented()&&(jh(t,(function(t){if(r(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&a(t),!0})),r(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))})),this.add=function(n,i,r,a){var s;return"string"==typeof(s=r)?r=function(){e.execCommand(s,!1,null)}:Gt.isArray(s)&&(r=function(){e.execCommand(s[0],s[1],s[2])}),jh(Gh(Gt.trim(n.toLowerCase())),(function(e){var n=o(e,i,r,a);t[n.id]=n})),!0},this.remove=function(e){var n=o(e);return!!t[n.id]&&(delete t[n.id],!0)}}var Jh=function(e){var t=Ni(e).dom();return e.dom()===t.activeElement},Qh=function(e,t){(function(e,t){return(n=t,n.collapsed?O.from(Ka(n.startContainer,n.startOffset)).map(ai):O.none()).bind((function(t){return yo(t)?O.some(t):!1===Ai(e,t)?O.some(e):O.none()}));var n})(ai(e.getBody()),t).bind((function(e){return Kl.firstPositionIn(e.dom())})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))},eg=function(e){if(e.setActive)try{e.setActive()}catch(s){e.focus()}else e.focus()},tg=function(t){return t.inline?function(t){var n,i=t.getBody();return i&&(n=ai(i),Jh(n)||function(t){return(n=Ni(t),i=void 0!==n?n.dom():e.document,O.from(i.activeElement).map(ai)).filter((function(e){return t.dom().contains(e.dom())}));var n,i}(n).isSome())}(t):(n=t).iframeElement&&Jh(ai(n.iframeElement));var n},ng=function(e){return e.editorManager.setActive(e)},ig=tg,og=function(e,t){return t.dom()[e]},rg=function(e,t){return parseInt(_i(t,e),10)},ag=r(og,"clientWidth"),sg=r(og,"clientHeight"),lg=r(rg,"margin-top"),ug=r(rg,"margin-left"),cg=function(e,t,n){var i,o,r,a,s,l,u,c,d,f,h=ai(e.getBody()),g=e.inline?h:ai(h.dom().ownerDocument.documentElement),p=(i=e.inline,r=t,a=n,s=(o=g).dom().getBoundingClientRect(),{x:r-(i?s.left+o.dom().clientLeft+ug(o):0),y:a-(i?s.top+o.dom().clientTop+lg(o):0)});return u=p.x,c=p.y,d=ag(l=g),f=sg(l),0<=u&&0<=c&&u<=d&&c<=f};function dg(e){var t,n=[],i=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},o=function(){0<n.length&&i().reposition(n)},r=function(e){X(n,(function(t){return t===e})).each((function(e){n.splice(e,1)}))},a=function(t){if(!e.removed&&function(e){var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),O.from(t).map(ai)).map((function(e){return Ai(Ni(e),e)})).getOr(!1)}(e))return G(n,(function(e){return!((n=i().getArgs(e)).type!==(o=t).type||n.text!==o.text||n.progressBar||n.timeout||o.progressBar||o.timeout);var n,o})).getOrThunk((function(){e.editorManager.setActive(e);var a=i().open(t,(function(){r(a),o()}));return n.push(a),o(),a}))};return(t=e).on("SkinLoaded",(function(){var e=t.settings.service_message;e&&a({text:e,type:"warning",timeout:0,icon:""})})),t.on("ResizeEditor ResizeWindow",(function(){me.requestAnimationFrame(o)})),t.on("remove",(function(){$(n.slice(),(function(e){i().close(e)}))})),{open:a,close:function(){O.from(n[0]).each((function(e){i().close(e),r(e),o()}))},getNotifications:function(){return n}}}function fg(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},i=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(n){t.push(n),e.fire("OpenWindow",{win:n})},r=function(n){X(t,(function(e){return e===n})).each((function(i){t.splice(i,1),e.fire("CloseWindow",{win:n}),0===t.length&&e.focus()}))},a=function(){return O.from(t[t.length-1])};return e.on("remove",(function(){$(t.slice(0),(function(e){n().close(e)}))})),{windows:t,open:function(t,i){e.editorManager.setActive(e),yh(e);var a=n().open(t,i,r);return o(a),a},alert:function(e,t,a){var s=n().alert(e,i(a||this,t),r);o(s)},confirm:function(e,t,a){var s=n().confirm(e,i(a||this,t),r);o(s)},close:function(){a().each((function(e){n().close(e),r(e)}))},getParams:function(){return a().map(n().getParams).getOr(null)},setParams:function(e){a().each((function(t){n().setParams(t,e)}))},getWindows:function(){return t}}}var hg={},gg="en",pg={setCode:function(e){e&&(gg=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return gg},rtl:!1,add:function(e,t){var n=hg[e];for(var i in n||(hg[e]=n={}),t)n[i]=t[i];this.setCode(e)},translate:function(e){var t=hg[gg]||{},n=function(e){return Gt.is(e,"function")?Object.prototype.toString.call(e):i(e)?"":""+e},i=function(e){return""===e||null===e||Gt.is(e,"undefined")},o=function(e){return e=n(e),Gt.hasOwn(t,e)?n(t[e]):e};if(i(e))return"";if(Gt.is(e,"object")&&Gt.hasOwn(e,"raw"))return n(e.raw);if(Gt.is(e,"array")){var r=e.slice(1);e=o(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return Gt.hasOwn(r,t)?n(r[t]):e}))}return o(e).replace(/{context:\w+}$/,"")},data:hg},mg=Er.PluginManager,vg=function(e,t){e.notificationManager.open({type:"error",text:t})},yg=function(e,t){e._skinLoaded?vg(e,t):e.on("SkinLoaded",(function(){vg(e,t)}))},bg=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=e.window.console;o&&(o.error?o.error.apply(o,arguments):o.log.apply(o,arguments))},Tg=yg,Cg=bg,Eg=Er.PluginManager,_g=Er.ThemeManager;function xg(){return new(ie("XMLHttpRequest"))}var Ig=function(e){var t,n,i=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(i[0]))&&(t=n[1]),{type:t,data:i[1]}},Dg=function(n){return 0===n.indexOf("blob:")?(i=n,new fe((function(e,n){var o=function(){n("Cannot convert "+i+" to Blob. Resource might not exist or is inaccessible.")};try{var r=xg();r.open("GET",i,!0),r.responseType="blob",r.onload=function(){200===this.status?e(this.response):o()},r.onerror=o,r.send()}catch(t){o()}}))):0===n.indexOf("data:")?function(t){return new fe((function(n){var i,o,r,a,s=Ig(t);try{i=function(e){return ie("atob")(e)}(s.data)}catch(iT){return void n(new e.Blob([]))}for(a=i.length,o=new(ie("Uint8Array"))(a),r=0;r<o.length;r++)o[r]=i.charCodeAt(r);n(new e.Blob([o],{type:s.type}))}))}(n):null;var i},wg=Ig,Og=0,Rg=function(e){return(e||"blobid")+Og++},kg=0,Sg=function(e){return e+kg+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t};var Ag=function(e,t){return e.hasOwnProperty(t.nodeName)},Ng=function(e,t){if(Ao.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Ag(e,t.nextSibling)))return!0}return!1},Mg=function(e){var t,n,i,o,r,a,s,l,u,c,d,f=e.settings,h=e.dom,g=e.selection,p=e.schema,m=p.getBlockElements(),v=g.getStart(),y=e.getBody();if(d=f.forced_root_block,v&&Ao.isElement(v)&&d&&(c=y.nodeName.toLowerCase(),p.isValidChild(c,d.toLowerCase())&&(b=m,T=y,!V(rc(ai(v),ai(T)),(function(e){return Ag(b,e.dom())}))))){var b,T,C,E;for(n=(t=g.getRng()).startContainer,i=t.startOffset,o=t.endContainer,r=t.endOffset,u=ig(e),v=y.firstChild;v;)if(C=m,Ao.isText(E=v)||Ao.isElement(E)&&!Ag(C,E)&&!$l(E)){if(Ng(m,v)){v=(s=v).nextSibling,h.remove(s);continue}a||(a=h.create(d,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),l=!0),v=(s=v).nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;l&&u&&(t.setStart(n,i),t.setEnd(o,r),g.setRng(t),e.nodeChanged())}},Kg=function(e){e.settings.forced_root_block&&e.on("NodeChange",r(Mg,e))},Pg=function(e){return Vi(e).fold(i([e]),(function(t){return[e].concat(Pg(t))}))},Lg=function(e){return Wi(e).fold(i([e]),(function(t){return"br"===ci(t)?Pi(t).map((function(t){return[e].concat(Lg(t))})).getOr([]):[e].concat(Lg(t))}))},Bg=function(e,t,n,i){var o=n,r=new oo(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Gt.trim(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(de.ie&&de.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?r.next():r.prev());"BODY"===o.nodeName&&(i?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Fg=function(e){var t=e.selection.getSel();return t&&0<t.rangeCount};function zg(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",(function(n){var i,o;o={startContainer:(i=e.selection.getRng()).startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset},"nodechange"!==n.type&&Vf(o,t)||e.fire("SelectionChange"),t=o})),e.on("contextmenu",(function(){e.fire("SelectionChange")})),e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);!t||!de.range&&e.selection.isCollapsed()||Fg(e)&&!function(t){var i,o;if((o=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(i=o.length;0<=i&&o[i]===n[i];i--);if(-1===i)return n=o,!0}return n=o,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("MouseUp",(function(t){!t.isDefaultPrevented()&&Fg(e)&&("IMG"===e.selection.getNode().nodeName?me.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())})),this.nodeChanged=function(t){var n,i,o,r=e.selection;e.initialized&&r&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),(n=r.getStart(!0)||o).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),i=[],e.dom.getParent(n,(function(e){if(e===o)return!0;i.push(e)})),(t=t||{}).element=n,t.parents=i,e.fire("NodeChange",t))}}var Hg,Vg,Wg=function(e){var t,n,i,o;return o=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,{top:o.top+(i=t.defaultView).pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}},$g=function(e,t){return n=(s=e).inline?Wg(s.getBody()):{left:0,top:0},a=(r=e).getBody(),i=r.inline?{left:a.scrollLeft,top:a.scrollTop}:{left:0,top:0},{pageX:(o=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=Wg(e.getContentAreaContainer()),i=(r=(o=e).getBody(),a=o.getDoc().documentElement,o.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:r.scrollLeft||a.scrollLeft,top:r.scrollTop||a.scrollTop});return{left:t.pageX-n.left+i.left,top:t.pageY-n.top+i.top}}var o,r,a;return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+i.left,pageY:o.top-n.top+i.top};var n,i,o,r,a,s},qg=Ao.isContentEditableFalse,Ug=Ao.isContentEditableTrue,jg=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Gg=function(e){e.dragging=!1,e.element=null,jg(e.ghost)},Xg=function(e){return j(e,(function(e,t){return e.concat(function(e){var t=function(t){return W(t,(function(t){return(t=Oa(t)).node=e,t}))};if(Ao.isElement(e))return t(e.getClientRects());if(Ao.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))}),[])};(Vg=Hg||(Hg={}))[Vg.Up=-1]="Up",Vg[Vg.Down=1]="Down";var Yg=function(e,t,n,i,o,r){var a,s,l=0,u=[],c=function(i){var r,a,c;for(c=Xg([i]),-1===e&&(c=c.reverse()),r=0;r<c.length;r++)if(!n(a=c[r],s)){if(0<u.length&&t(a,Wt.last(u))&&l++,a.line=l,o(a))return!0;u.push(a)}};return(s=Wt.last(r.getClientRects()))&&(c(a=r.getNode()),function(e,t,n,i){for(;i=Qs(i,e,Da,t);)if(n(i))return}(e,i,c,a)),u},Zg=r(Yg,Hg.Up,Sa,Aa),Jg=r(Yg,Hg.Down,Aa,Sa),Qg=function(e){return function(t){return t.line>e}},ep=function(e){return function(t){return t.line===e}},tp=Ao.isContentEditableFalse,np=Qs,ip=function(e,t){return Math.abs(e.left-t)},op=function(e,t){return Math.abs(e.right-t)},rp=function(e,t){return e>=t.left&&e<=t.right},ap=function(e,t){return Wt.reduce(e,(function(e,n){var i,o;return i=Math.min(ip(e,t),op(e,t)),o=Math.min(ip(n,t),op(n,t)),rp(t,n)?n:rp(t,e)?e:o===i&&tp(n.node)||o<i?n:e}))},sp=function(e,t,n,i){for(;i=np(i,e,Da,t);)if(n(i))return},lp=function(e,t,n){if(n.collapsed)return!1;if(de.ie&&de.ie<=11&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var i=n.startContainer.childNodes[n.startOffset];if(Ao.isElement(i))return V(i.getClientRects(),(function(n){return Na(n,e,t)}))}return V(n.getClientRects(),(function(n){return Na(n,e,t)}))},up={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return de.mac?e.metaKey:e.ctrlKey&&!e.altKey}},cp=Ao.isContentEditableTrue,dp=Ao.isContentEditableFalse,fp=function(e,t){for(var n=e.getBody();t&&t!==n;){if(cp(t)||dp(t))return t;t=t.parentNode}return null},hp=function(t){var n,i,o,a=t.getBody(),s=function(n,i,o){var r,a,s=Ar(O.none()),l=function(){!function(e){var t,n,i,o,r;for(t=gn("*[contentEditable=false]",e),o=0;o<t.length;o++)i=(n=t[o]).previousSibling,ga(i)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(r.length-1,1)),ha(i=n.nextSibling)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1))}(n),a&&(Bs.remove(a),a=null),s.get().each((function(e){gn(e.caret).remove(),s.set(O.none())})),clearInterval(r)},u=function(){r=me.setInterval((function(){ig(t)?gn("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden"):gn("div.mce-visual-caret",n).addClass("mce-visual-caret-hidden")}),500)};return{show:function(i,o){var r,c,d;if(l(),Ao.isElement(d=o)&&/^(TD|TH)$/i.test(d.tagName))return null;if(!function(e){return t.dom.isBlock(e)}(o))return a=function(e,t){var n,i,o;if(i=e.ownerDocument.createTextNode(ia),o=e.parentNode,t){if(aa(n=e.previousSibling)){if(ua(n))return n;if(ga(n))return n.splitText(n.data.length-1)}o.insertBefore(i,e)}else{if(aa(n=e.nextSibling)){if(ua(n))return n;if(ha(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i)}return i}(o,i),c=o.ownerDocument.createRange(),zs(a.nextSibling)?(c.setStart(a,0),c.setEnd(a,0)):(c.setStart(a,1),c.setEnd(a,1)),c;a=function(t,n,i){var o,r,a;return(o=n.ownerDocument.createElement("p")).setAttribute("data-mce-caret",i?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((a=e.document.createElement("br")).setAttribute("data-mce-bogus","1"),a)),r=n.parentNode,i?r.insertBefore(o,n):n.nextSibling?r.insertBefore(o,n.nextSibling):r.appendChild(o),o}(0,o,i),r=Hs(n,o,i),gn(a).css("top",r.top);var f=gn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(n)[0];return s.set(O.some({caret:f,element:o,before:i})),s.get().each((function(e){i&&gn(e.caret).addClass("mce-visual-caret-before")})),u(),(c=o.ownerDocument.createRange()).setStart(a,0),c.setEnd(a,0),c},hide:l,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){s.get().each((function(e){var t=Hs(n,e.element,e.before);gn(e.caret).css(t)}))},destroy:function(){return me.clearInterval(r)}}}(t.getBody()),l="sel-"+t.dom.uniqueId(),u=function(e){e&&t.selection.setRng(e)},c=function(){return t.selection.getRng()},d=function(e,n,i,o){return void 0===o&&(o=!0),t.fire("ShowCaret",{target:n,direction:e,before:i}).isDefaultPrevented()?null:(o&&t.selection.scrollIntoView(n,-1===e),s.show(i,n))},f=function(e,t){return t=sl(e,a,t),-1===e?as.fromRangeStart(t):as.fromRangeEnd(t)},h=function(e){return ua(e)||ha(e)||ga(e)},g=function(e){return h(e.startContainer)||h(e.endContainer)},p=function(e,i){var o,r,a,s,u,c,h,p,m,y,b=t.$,T=t.dom;if(!e)return null;if(e.collapsed){if(!g(e))if(!1===i){if(p=f(-1,e),Ws(p.getNode(!0)))return d(-1,p.getNode(!0),!1,!1);if(Ws(p.getNode()))return d(-1,p.getNode(),!p.isAtEnd(),!1)}else{if(p=f(1,e),Ws(p.getNode()))return d(1,p.getNode(),!p.isAtEnd(),!1);if(Ws(p.getNode(!0)))return d(1,p.getNode(!0),!1,!1)}return null}return u=e.startOffset,c=e.endOffset,3===(s=e.startContainer).nodeType&&0===u&&dp(s.parentNode)&&(u=T.nodeIndex(s=s.parentNode),s=s.parentNode),1!==s.nodeType?null:(c===u+1&&s===e.endContainer&&(o=s.childNodes[u]),dp(o)?(m=y=o.cloneNode(!0),(h=t.fire("ObjectSelected",{target:o,targetClone:m})).isDefaultPrevented()?null:(r=$r(ai(t.getBody()),"#"+l).fold((function(){return b([])}),(function(e){return b([e.dom()])})),m=h.targetClone,0===r.length&&(r=b('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",l)).appendTo(t.getBody()),e=t.dom.createRng(),m===y&&de.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(m),e.setStartAfter(r[0].firstChild.firstChild),e.setEndAfter(m)):(r.empty().append(" ").append(m).append(" "),e.setStart(r[0].firstChild,1),e.setEnd(r[0].lastChild,0)),r.css({top:T.getPos(o,t.getBody()).y}),r[0].focus(),(a=t.selection.getSel()).removeAllRanges(),a.addRange(e),$(Br(ai(t.getBody()),"*[data-mce-selected]"),(function(e){Ei(e,"data-mce-selected")})),o.setAttribute("data-mce-selected","1"),n=o,v(),e)):null)},m=function(){n&&(n.removeAttribute("data-mce-selected"),$r(ai(t.getBody()),"#"+l).each(Rr),n=null),$r(ai(t.getBody()),"#"+l).each(Rr),n=null},v=function(){s.hide()};return de.ceFalse&&(function(){var i,o;t.on("mouseup",(function(e){var n=c();n.collapsed&&cg(t,e.clientX,e.clientY)&&u(Af(t,n,!1))})),t.on("click",(function(e){var n;(n=fp(t,e.target))&&(dp(n)&&(e.preventDefault(),t.focus()),cp(n)&&t.dom.isChildOf(n,t.selection.getNode())&&m())})),t.on("blur NewBlock",(function(){m()})),t.on("ResizeWindow FullscreenStateChanged",(function(){return s.reposition()})),o=!1,(i=t).on("touchstart",(function(){o=!1})),i.on("touchmove",(function(){o=!0})),i.on("touchend",(function(e){var t=fp(i,e.target);dp(t)&&(o||(e.preventDefault(),p(Sf(i,t))))})),t.on("mousedown",(function(e){var n,i=e.target;if((i===a||"HTML"===i.nodeName||t.dom.isChildOf(i,a))&&!1!==cg(t,e.clientX,e.clientY))if(n=fp(t,i))dp(n)?(e.preventDefault(),p(Sf(t,n))):(m(),cp(n)&&e.shiftKey||lp(e.clientX,e.clientY,t.selection.getRng())||(v(),t.selection.placeCaretAt(e.clientX,e.clientY)));else if(!1===Ws(i)){m(),v();var o=function(e,t,n){var i,o,a,s,l,u,c,d=Xg(U(te(e.getElementsByTagName("*")),Ws)),f=U(d,(function(e){return n>=e.top&&n<=e.bottom}));return(i=ap(f,t))&&(i=ap((s=e,c=function(e,t){var n;return n=U(Xg([t]),(function(t){return!e(t,l)})),u=u.concat(n),0===n.length},(u=[]).push(l=i),sp(Hg.Up,s,r(c,Sa),l.node),sp(Hg.Down,s,r(c,Aa),l.node),u),t))&&Ws(i.node)?{node:(o=i).node,before:ip(o,a=t)<op(o,a)}:null}(a,e.clientX,e.clientY);if(o&&!function(e,n){var i,o=t.dom.getParent(e,t.dom.isBlock),r=t.dom.getParent(n,t.dom.isBlock);return!(!o||!t.dom.isChildOf(o,r)||!1!==dp(fp(t,o)))||o&&(i=r,!(t.dom.getParent(o,t.dom.isBlock)===t.dom.getParent(i,t.dom.isBlock)))&&function(e){var t=Il(e);if(!e.firstChild)return!1;var n=as.before(e.firstChild),i=t.next(n);return i&&!Ac(i)&&!Nc(i)}(o)}(e.target,o.node)){e.preventDefault();var s=d(1,o.node,o.before,!1);t.getBody().focus(),u(s)}}})),t.on("keypress",(function(e){up.modifierPressed(e)||dp(t.selection.getNode())&&e.preventDefault()})),t.on("getSelectionRange",(function(e){var t=e.range;if(n){if(!n.parentNode)return void(n=null);(t=t.cloneRange()).selectNode(n),e.range=t}})),t.on("setSelectionRange",(function(e){var t;(t=p(e.range,e.forward))&&(e.range=t)})),t.on("AfterSetSelectionRange",(function(e){var n=e.range;g(n)||"mcepastebin"===n.startContainer.parentNode.id||v(),t.dom.hasClass(n.startContainer.parentNode,"mce-offscreen-selection")||m()})),t.on("copy",(function(e){var n,i=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!de.ie){var o=(n=t.dom.get(l))?n.getElementsByTagName("*")[0]:n;o&&(e.preventDefault(),i.clearData(),i.setData("text/html",o.outerHTML),i.setData("text/plain",o.outerText))}})),function(t){var n;(function(t){var n,i,o,r,a,s,l,u,c,d,f,h={};n=gr.DOM,s=e.document,i=function(e,t){return function(n){if(0===n.button){var i=G(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Fa.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(qg,Ug)).getOr(null);if(s=t.getBody(),qg(l=i)&&l!==s){var o=t.dom.getPos(i),r=t.getBody(),a=t.getDoc().documentElement;e.element=i,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?r.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?r.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=i.offsetWidth,e.height=i.offsetHeight,e.ghost=function(e,t,n,i){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:i}),e.dom.setAttrib(o,"data-mce-selected",null);var r=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(r,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),r.appendChild(o),r}(t,i,e.width,e.height)}}var s,l}}(h,t),l=h,u=t,c=me.throttle((function(e,t){u._selectionOverrides.hideFakeCaret(),u.selection.placeCaretAt(e,t)}),0),o=function(e){var t,n,i,o,r,a,s,d,f,h,g,p,m=Math.max(Math.abs(e.screenX-l.screenX),Math.abs(e.screenY-l.screenY));if(l.element&&!l.dragging&&10<m){if(u.fire("dragstart",{target:l.element}).isDefaultPrevented())return;l.dragging=!0,u.focus()}if(l.dragging){var v=(g=l,{pageX:(p=$g(u,e)).pageX-g.relX,pageY:p.pageY+5});f=l.ghost,h=u.getBody(),f.parentNode!==h&&h.appendChild(f),i=l.width,o=l.height,r=l.maxX,a=l.maxY,d=s=0,(t=l.ghost).style.left=(n=v).pageX+"px",t.style.top=n.pageY+"px",n.pageX+i>r&&(s=n.pageX+i-r),n.pageY+o>a&&(d=n.pageY+o-a),t.style.width=i-s+"px",t.style.height=o-d+"px",c(e.clientX,e.clientY)}},r=function(e,t){return function(n){if(e.dragging&&(s=3===(u=(a=t).selection.getSel().getRangeAt(0).startContainer).nodeType?u.parentNode:u)!==(l=e.element)&&!a.dom.isChildOf(s,l)&&!qg(s)){var i=((r=e.element.cloneNode(!0)).removeAttribute("data-mce-selected"),r),o=t.fire("drop",{targetClone:i,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(i=o.targetClone,t.undoManager.transact((function(){jg(e.element),t.insertContent(t.dom.getOuterHTML(i)),t._selectionOverrides.hideFakeCaret()})))}var r,a,s,l,u;Gg(e)}}(h,t),d=h,a=function(){d.dragging&&f.fire("dragend"),Gg(d)},(f=t).on("mousedown",i),t.on("mousemove",o),t.on("mouseup",r),n.bind(s,"mousemove",o),n.bind(s,"mouseup",a),t.on("remove",(function(){n.unbind(s,"mousemove",o),n.unbind(s,"mouseup",a)}))})(t),(n=t).on("drop",(function(e){var t=void 0!==e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;(qg(t)||qg(n.dom.getContentEditableParent(t)))&&e.preventDefault()}))}(t),function(e){var t=Sr((function(){if(!e.removed&&e.selection.getRng().collapsed){var t=Nf(e,e.selection.getRng(),!1);e.selection.setRng(t)}}),0);e.on("focus",(function(){t.throttle()})),e.on("blur",(function(){t.cancel()}))}(t)}(),o=".mce-content-body",(i=t.contentStyles).push(s.getCss()),i.push(o+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+o+" *[contentEditable=false] {cursor: default;}"+o+" *[contentEditable=true] {cursor: text;}")),{showCaret:d,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(pa(e),u(c()),t.selection.scrollIntoView(e[0]))},hideFakeCaret:v,destroy:function(){s.destroy(),n=null}}},gp=function(e,t,n){var i,o,r,a,s=1;for(a=e.getShortEndedElements(),(r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=i=n;o=r.exec(t);){if(i=r.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return i},pp=function(e,t){var n=e.exec(t);if(n){var i=n[1],o=n[2];return"string"==typeof i&&"data-mce-bogus"===i.toLowerCase()?o:null}return null};function mp(e,t){void 0===t&&(t=nr());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var i=e.comment?e.comment:n,o=e.cdata?e.cdata:n,r=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,l=e.pi?e.pi:n,u=e.doctype?e.doctype:n;return{parse:function(n){var c,d,f,h,g,p,m,v,y,b,T,C,E,_,x,I,D,w,O,R,k,S,A,N,M,K,P,L,B,F=0,z=[],H=0,V=Uo.decode,W=Gt.makeMap("src,href,data,background,formaction,poster,xlink:href"),$=/((java|vb)script|mhtml):/i,q=function(e){var t,n;for(t=z.length;t--&&z[t].name!==e;);if(0<=t){for(n=z.length-1;t<=n;n--)(e=z[n]).valid&&s(e.name);z.length=t}},U=function(t,n,i,o,r){var a,s,l,u,c;if(i=(n=n.toLowerCase())in T?n:V(i||o||r||""),E&&!v&&0==(0===(l=n).indexOf("data-")||0===l.indexOf("aria-"))){if(!(a=w[n])&&O){for(s=O.length;s--&&!(a=O[s]).pattern.test(n););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(i in a.validValues))return}if(W[n]&&!e.allow_script_urls){var d=i.replace(/[\s\u0000-\u001F]+/g,"");try{d=decodeURIComponent(d)}catch(x){d=unescape(d)}if($.test(d))return;if(c=d,!(u=e).allow_html_data_urls&&(/^data:image\//i.test(c)?!1===u.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(c):/^data:/i.test(c)))return}v&&(n in W||0===n.indexOf("on"))||(h.map[n]=i,h.push({name:n,value:i}))};for(M=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),K=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,b=t.getShortEndedElements(),N=e.self_closing_elements||t.getSelfClosingElements(),T=t.getBoolAttrs(),E=e.validate,y=e.remove_internals,B=e.fix_self_closing,P=t.getSpecialElements(),A=n+">";c=M.exec(A);){if(F<c.index&&r(V(n.substr(F,c.index-F))),d=c[6])":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),q(d);else if(d=c[7]){if(c.index+c[0].length>n.length){r(V(n.substr(c.index))),F=c.index+c[0].length;continue}":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),C=d in b,B&&N[d]&&0<z.length&&z[z.length-1].name===d&&q(d);var j=pp(K,c[8]);if(null!==j){if("all"===j){F=gp(t,n,M.lastIndex),M.lastIndex=F;continue}x=!1}if(!E||(_=t.getElementRule(d))){if(x=!0,E&&(w=_.attributes,O=_.attributePatterns),(D=c[8])?((v=-1!==D.indexOf("data-mce-type"))&&y&&(x=!1),(h=[]).map={},D.replace(K,U)):(h=[]).map={},E&&!v){if(R=_.attributesRequired,k=_.attributesDefault,_.removeEmptyAttrs&&!h.length&&(x=!1),S=_.attributesForced)for(g=S.length;g--;)m=(I=S[g]).name,"{$uid}"===(L=I.value)&&(L="mce_"+H++),h.map[m]=L,h.push({name:m,value:L});if(k)for(g=k.length;g--;)(m=(I=k[g]).name)in h.map||("{$uid}"===(L=I.value)&&(L="mce_"+H++),h.map[m]=L,h.push({name:m,value:L}));if(R){for(g=R.length;g--&&!(R[g]in h.map););-1===g&&(x=!1)}if(I=h.map["data-mce-bogus"]){if("all"===I){F=gp(t,n,M.lastIndex),M.lastIndex=F;continue}x=!1}}x&&a(d,h,C)}else x=!1;if(f=P[d]){f.lastIndex=F=c.index+c[0].length,(c=f.exec(n))?(x&&(p=n.substr(F,c.index-F)),F=c.index+c[0].length):(p=n.substr(F),F=n.length),x&&(0<p.length&&r(p,!0),s(d)),M.lastIndex=F;continue}C||(D&&D.indexOf("/")===D.length-1?x&&s(d):z.push({name:d,valid:x}))}else(d=c[1])?(">"===d.charAt(0)&&(d=" "+d),e.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),i(d)):(d=c[2])?o(d.replace(/<!--|-->/g,"")):(d=c[3])?u(d):(d=c[4])&&l(d,c[5]);F=c.index+c[0].length}for(F<n.length&&r(V(n.substr(F))),g=z.length-1;0<=g;g--)(d=z[g]).valid&&s(d.name)}}}(mp||(mp={})).findEndTag=gp;var vp=mp,yp=function(e,t){var n,i,o,r,a,s,l,u,c=t,d=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,f=e.schema;for(s=e.getTempAttrs(),l=c,u=new RegExp(["\\s?("+s.join("|")+')="[^"]+"'].join("|"),"gi"),c=l.replace(u,""),a=f.getShortEndedElements();r=d.exec(c);)i=d.lastIndex,o=r[0].length,n=a[r[1]]?i:vp.findEndTag(f,c,i),c=c.substring(0,i-o)+c.substring(n),d.lastIndex=i-o;return oa(c)},bp=yp,Tp=yp,Cp=function(e){return Ao.isElement(e)?e.outerHTML:Ao.isText(e)?Uo.encodeRaw(e.data,!1):Ao.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},Ep=Ar(O.none()),_p=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},xp=function(t){var n=oi("body",Ep.get().getOrThunk((function(){var t=e.document.implementation.createHTMLDocument("undo");return Ep.set(O.some(t)),t})));return ta(n,_p(t)),$(Br(n,"*[data-mce-bogus]"),kr),n.dom().innerHTML},Ip=function(e){var t,n,i;return t=function(e){return U(W(te(e.childNodes),Cp),(function(e){return 0<e.length}))}(e.getBody()),-1!==(n=(i=Y(t,(function(t){var n=Tp(e.serializer,t);return 0<n.length?[n]:[]}))).join("")).indexOf("</iframe>")?function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}}(i):function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}}(n)},Dp=function(t,n,i){"fragmented"===n.type?function(t,n){var i,o,r;i=function(e,t){var n=e.length+t.length+2,i=new Array(n),o=new Array(n),r=function(n,i,o,a,l){var u=s(n,i,o,a);if(null===u||u.start===i&&u.diag===i-a||u.end===n&&u.diag===n-o)for(var c=n,d=o;c<i||d<a;)c<i&&d<a&&e[c]===t[d]?(l.push([0,e[c]]),++c,++d):a-o<i-n?(l.push([2,e[c]]),++c):(l.push([1,t[d]]),++d);else{r(n,u.start,o,u.start-u.diag,l);for(var f=u.start;f<u.end;++f)l.push([0,e[f]]);r(u.end,i,u.end-u.diag,a,l)}},a=function(n,i,o,r){for(var a=n;a-i<r&&a<o&&e[a]===t[a-i];)++a;return{start:n,end:a,diag:i}},s=function(n,r,s,l){var u=r-n,c=l-s;if(0===u||0===c)return null;var d,f,h,g,p,m=u-c,v=c+u,y=(v%2==0?v:v+1)/2;for(i[1+y]=n,o[1+y]=r+1,d=0;d<=y;++d){for(f=-d;f<=d;f+=2){for(i[h=f+y]=f===-d||f!==d&&i[h-1]<i[h+1]?i[h+1]:i[h-1]+1,p=(g=i[h])-n+s-f;g<r&&p<l&&e[g]===t[p];)i[h]=++g,++p;if(m%2!=0&&m-d<=f&&f<=m+d&&o[h-m]<=i[h])return a(o[h-m],f+n-s,r,l)}for(f=m-d;f<=m+d;f+=2){for(o[h=f+y-m]=f===m-d||f!==m+d&&o[h+1]<=o[h-1]?o[h+1]-1:o[h-1],p=(g=o[h]-1)-n+s-f;n<=g&&s<=p&&e[g]===t[p];)o[h]=g--,p--;if(m%2==0&&-d<=f&&f<=d&&o[h]<=i[h+m])return a(o[h],f+n-s,r,l)}}},l=[];return r(0,e.length,0,t.length,l),l}(W(te(n.childNodes),Cp),t),o=n,r=0,$(i,(function(t){0===t[0]?r++:1===t[0]?(function(t,n,i){var o=function(t){var n,i,o;for(o=e.document.createElement("div"),n=e.document.createDocumentFragment(),t&&(o.innerHTML=t);i=o.firstChild;)n.appendChild(i);return n}(n);if(t.hasChildNodes()&&i<t.childNodes.length){var r=t.childNodes[i];r.parentNode.insertBefore(o,r)}else t.appendChild(o)}(o,t[1],r),r++):2===t[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(o,r)}))}(n.fragments,t.getBody()):t.setContent(n.content,{format:"raw"}),t.selection.moveToBookmark(i?n.beforeBookmark:n.bookmark)},wp=function(e,t){return!(!e||!t)&&(i=t,_p(e)===_p(i)||(n=t,xp(e)===xp(n)));var n,i};function Op(e){var t,n,i=this,o=0,r=[],a=0,s=function(){return 0===a},l=function(e){s()&&(i.typing=e)},u=function(t){e.setDirty(t)},c=function(e){l(!1),i.add({},e)},d=function(){i.typing&&(l(!1),i.add())};return e.on("init",(function(){i.add()})),e.on("BeforeExecCommand",(function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(d(),i.beforeChange())})),e.on("ExecCommand",(function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)})),e.on("ObjectResizeStart Cut",(function(){i.beforeChange()})),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",(function(t){var o=t.keyCode;t.isDefaultPrevented()||((33<=o&&o<=36||37<=o&&o<=40||45===o||t.ctrlKey)&&(c(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&i.typing&&!1===wp(Ip(e),r[0])&&(!1===e.isDirty()&&(u(!0),e.fire("change",{level:r[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))})),e.on("KeyDown",(function(e){var t=e.keyCode;e.isDefaultPrevented()||(33<=t&&t<=36||37<=t&&t<=40||45===t?i.typing&&c(e):!(t<16||20<t)||224===t||91===t||i.typing||e.ctrlKey&&!e.altKey||e.metaKey||(i.beforeChange(),l(!0),i.add({},e),n=!0))})),e.on("MouseDown",(function(e){i.typing&&c(e)})),e.on("input",(function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data)&&c(e)})),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()})),i={data:r,typing:!1,beforeChange:function(){s()&&(t=ws.getUndoBookmark(e.selection))},add:function(n,i){var a,l,c,d=e.settings;if(c=Ip(e),n=Gt.extend(n=n||{},c),!1===s()||e.removed)return null;if(e.fire("BeforeAddUndo",{level:n,lastLevel:l=r[o],originalEvent:i}).isDefaultPrevented())return null;if(l&&wp(l,n))return null;if(r[o]&&(r[o].beforeBookmark=t),d.custom_undo_redo_levels&&r.length>d.custom_undo_redo_levels){for(a=0;a<r.length-1;a++)r[a]=r[a+1];r.length--,o=r.length}n.bookmark=ws.getUndoBookmark(e.selection),o<r.length-1&&(r.length=o+1),r.push(n),o=r.length-1;var f={level:n,lastLevel:l,originalEvent:i};return e.fire("AddUndo",f),0<o&&(u(!0),e.fire("change",f)),n},undo:function(){var t;return i.typing&&(i.add(),i.typing=!1,l(!1)),0<o&&(t=r[--o],Dp(e,t,!0),u(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return o<r.length-1&&(t=r[++o],Dp(e,t,!1),u(!0),e.fire("redo",{level:t})),t},clear:function(){r=[],o=0,i.typing=!1,i.data=r,e.fire("ClearUndos")},hasUndo:function(){return 0<o||i.typing&&r[0]&&!wp(Ip(e),r[0])},hasRedo:function(){return o<r.length-1&&!i.typing},transact:function(e){return d(),i.beforeChange(),i.ignore(e),i.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a;i.transact(t)&&(a=r[o].bookmark,Dp(e,r[o-1],!0),i.transact(n)&&(r[o-1].beforeBookmark=a))}}}var Rp,kp={},Sp=Wt.filter,Ap=Wt.each;Rp=function(e){var t,n,i=e.selection.getRng();t=Ao.matchNodeNames("pre"),i.collapsed||(n=e.selection.getSelectedBlocks(),Ap(Sp(Sp(n,t),(function(e){return t(e.previousSibling)&&-1!==Wt.indexOf(n,e.previousSibling)})),(function(e){var t,n;t=e.previousSibling,gn(n=e).remove(),gn(t).append("<br><br>").append(n.childNodes)})))},kp.pre||(kp.pre=[]),kp.pre.push(Rp);var Np=/^(src|href|style)$/,Mp=Gt.each,Kp=Ql,Pp=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Lp=function(e,t,n){var i,o,r;return o=t[n?"startOffset":"endOffset"],Ao.isElement(i=t[n?"startContainer":"endContainer"])&&(!n&&o&&o--,i=i.childNodes[(r=i.childNodes.length-1)<o?r:o]),Ao.isText(i)&&n&&o>=i.nodeValue.length&&(i=new oo(i,e.getBody()).next()||i),Ao.isText(i)&&!n&&0===o&&(i=new oo(i,e.getBody()).prev()||i),i},Bp=function(e,t,n,i){var o=e.create(n,i);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},Fp=function(e,t,n,i,o){var r=ai(t),a=ai(e.create(i,o)),s=n?Fi(r):Bi(r);return wr(a,s),n?(_r(r,a),Ir(a,r)):(xr(r,a),Dr(a,r)),a.dom()},zp=function(e,t,n,i){return!(t=Gl(t,n,i))||"BR"===t.nodeName||e.isBlock(t)},Hp=function(e,t,n,i,o){var r,a,s,l,u,c,d,f,h,g,p,m,v,y,b=e.dom;if(u=b,!(Kp(c=i,(d=t).inline)||Kp(c,d.block)||(d.selector?Ao.isElement(c)&&u.is(c,d.selector):void 0)||(l=i,t.links&&"A"===l.tagName)))return!1;if("all"!==t.remove)for(Mp(t.styles,(function(e,r){e=eu(b,Jl(e,n),r),"number"==typeof r&&(r=e,o=0),(t.remove_similar||!o||Kp(tu(b,o,r),e))&&b.setStyle(i,r,""),s=1})),s&&""===b.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),Mp(t.attributes,(function(e,t){var r;if(e=Jl(e,n),"number"==typeof t&&(t=e,o=0),!o||Kp(b.getAttrib(o,t),e)){if("class"===t&&(e=b.getAttrib(i,t))&&(r="",Mp(e.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(r+=(r?" ":"")+e)})),r))return void b.setAttrib(i,t,r);"class"===t&&i.removeAttribute("className"),Np.test(t)&&i.removeAttribute("data-mce-"+t),i.removeAttribute(t)}})),Mp(t.classes,(function(e){e=Jl(e,n),o&&!b.hasClass(o,e)||b.removeClass(i,e)})),a=b.getAttribs(i),r=0;r<a.length;r++){var T=a[r].nodeName;if(0!==T.indexOf("_")&&0!==T.indexOf("data-"))return!1}return"none"!==t.remove?(m=(h=i).parentNode,v=(f=e).dom,y=f.settings.forced_root_block,(g=t).block&&(y?m===v.getRoot()&&(g.list_block&&Kp(h,g.list_block)||Mp(Gt.grep(h.childNodes),(function(e){Yl(f,y,e.nodeName.toLowerCase())?p?p.appendChild(e):(p=Bp(v,e,y),v.setAttribs(p,f.settings.forced_root_block_attrs)):p=0}))):v.isBlock(h)&&!v.isBlock(m)&&(zp(v,h,!1)||zp(v,h.firstChild,!0,1)||h.insertBefore(v.create("br"),h.firstChild),zp(v,h,!0)||zp(v,h.lastChild,!1,1)||h.appendChild(v.create("br")))),g.selector&&g.inline&&!Kp(g.inline,h)||v.remove(h,1),!0):void 0},Vp=Hp,Wp=function(e,t,n,i,o){var r,a,s=e.formatter.get(t),l=s[0],u=!0,c=e.dom,d=e.selection,f=function(i){var r,a,u,c,d,f=(a=t,u=n,c=o,Mp(iu((r=e).dom,i.parentNode).reverse(),(function(e){var t;d||"_start"===e.id||"_end"===e.id||(t=hf.matchNode(r,e,a,u,c))&&!1!==t.split&&(d=e)})),d);return function(e,t,n,i,o,r,a,s){var l,u,c,d,f,h,g=e.dom;if(n){for(h=n.parentNode,l=i.parentNode;l&&l!==h;l=l.parentNode){for(u=g.clone(l,!1),f=0;f<t.length;f++)if(Hp(e,t[f],s,u,u)){u=0;break}u&&(c&&u.appendChild(c),d||(d=u),c=u)}a.mixed&&g.isBlock(n)||(i=g.split(n,i)),c&&(o.parentNode.insertBefore(c,o),d.appendChild(o))}return i}(e,s,f,i,i,0,l,n)},h=function(t){var i,o,r,a,d;if(Ao.isElement(t)&&c.getContentEditable(t)&&(a=u,u="true"===c.getContentEditable(t),d=!0),i=Gt.grep(t.childNodes),u&&!d)for(o=0,r=s.length;o<r&&!Hp(e,s[o],n,t,t);o++);if(l.deep&&i.length){for(o=0,r=i.length;o<r;o++)h(i[o]);d&&(u=a)}},g=function(e){var t,n=c.get(e?"_start":"_end"),i=n[e?"firstChild":"lastChild"];return $l(t=i)&&Ao.isElement(t)&&("_start"===t.id||"_end"===t.id)&&(i=i[e?"firstChild":"lastChild"]),Ao.isText(i)&&0===i.data.length&&(i=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),c.remove(n,!0),i},p=function(t){var n,i,o=t.commonAncestorContainer;if(t=pu(e,t,s,!0),l.split){if(t=pf(t),(n=Lp(e,t,!0))!==(i=Lp(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&/^(TH|TD)$/.test(i.nodeName)&&i.firstChild&&(i=i.firstChild||i),Pp(c,n,i)){var r=O.from(n.firstChild).getOr(n);return f(Fp(c,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void g(!0)}if(Pp(c,i,n))return r=O.from(i.lastChild).getOr(i),f(Fp(c,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void g(!1);n=Bp(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),i=Bp(c,i,"span",{id:"_end","data-mce-type":"bookmark"}),f(n),f(i),n=g(!0),i=g()}else n=i=f(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=i.parentNode?i.parentNode:i,t.endOffset=c.nodeIndex(i)+1}vu(c,t,(function(t){Mp(t,(function(t){h(t),Ao.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===nu(c,t.parentNode)&&Hp(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)}))}))};if(i)i.nodeType?((a=c.createRng()).setStartBefore(i),a.setEndAfter(i),p(a)):p(i);else if("false"!==c.getContentEditable(d.getNode()))d.isCollapsed()&&l.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,i){var o,r,a,s,l,u,c=e.dom,d=e.selection,f=[],h=d.getRng();for(3===(s=o=h.startContainer).nodeType&&(h.startOffset!==o.nodeValue.length&&(a=!0),s=s.parentNode);s;){if(hf.matchNode(e,s,t,n,i)){l=s;break}s.nextSibling&&(a=!0),f.push(s),s=s.parentNode}if(l)if(a){r=d.getBookmark(),h.collapse(!0);var g=pu(e,h,e.formatter.get(t),!0);g=pf(g),e.formatter.remove(t,n,g),d.moveToBookmark(r)}else{u=ks(e.getBody(),l);var p=bf(!1).dom(),m=xf(f,p);Ef(e,p,u||l),Tf(e,u,!1),d.setCursorLocation(m,1),c.isEmpty(l)&&c.remove(l)}}(e,t,n,o):(r=ws.getPersistentBookmark(e.selection,!0),p(d.getRng()),d.moveToBookmark(r),l.inline&&hf.match(e,t,n,d.getStart())&&jl(c,d,d.getRng()),e.nodeChanged());else{i=d.getNode();for(var m=0,v=s.length;m<v&&(!s[m].ceFalseOverride||!Hp(e,s[m],n,i,i));m++);}},$p=Gt.each,qp=function(e){return e&&1===e.nodeType&&!$l(e)&&!Rs(e)&&!Ao.isBogus(e)},Up=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!$l(n))return n}return e},jp=function(e,t,n){var i,o,r=new Iu(e);if(t&&n&&(t=Up(t,"previousSibling"),n=Up(n,"nextSibling"),r.compare(t,n))){for(i=t.nextSibling;i&&i!==n;)i=(o=i).nextSibling,t.appendChild(o);return e.remove(n),Gt.each(Gt.grep(n.childNodes),(function(e){t.appendChild(e)})),t}return n},Gp=function(e,t,n){$p(e.childNodes,(function(e){qp(e)&&(t(e)&&n(e),e.hasChildNodes()&&Gp(e,t,n))}))},Xp=function(e,t){return r((function(t,n){return!(!n||!tu(e,n,t))}),t)},Yp=function(e,t,n){return r((function(t,n,i){e.setStyle(i,t,n),""===i.getAttribute("style")&&i.removeAttribute("style"),Zp(e,i)}),t,n)},Zp=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Jp=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=nu(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},Qp=Gt.each,em=function(e,t,n,i){var o,a,s=e.formatter.get(t),l=s[0],u=!i&&e.selection.isCollapsed(),c=e.dom,d=e.selection,f=function(e,t){if(t=t||l,e){if(t.onformat&&t.onformat(e,t,n,i),Qp(t.styles,(function(t,i){c.setStyle(e,i,Jl(t,n))})),t.styles){var o=c.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}Qp(t.attributes,(function(t,i){c.setAttrib(e,i,Jl(t,n))})),Qp(t.classes,(function(t){t=Jl(t,n),c.hasClass(e,t)||c.addClass(e,t)}))}},h=function(e,t){var n=!1;return!!l.selector&&(Qp(e,(function(e){if(!("collapsed"in e)||e.collapsed===u)return c.is(t,e.selector)&&!Rs(t)?(f(t,e),!(n=!0)):void 0})),n)},g=function(i,o,r,a){var u,c,d=[],g=!0;c=i.create(u=l.inline||l.block),f(c),vu(i,o,(function(o){var r,p=function(o){var m,v,y,b;if(b=g,m=o.nodeName.toLowerCase(),v=o.parentNode.nodeName.toLowerCase(),1===o.nodeType&&i.getContentEditable(o)&&(b=g,g="true"===i.getContentEditable(o),y=!0),Ql(m,"br"))return r=0,void(l.block&&i.remove(o));if(l.wrapper&&hf.matchNode(e,o,t,n))r=0;else{if(g&&!y&&l.block&&!l.wrapper&&Xl(e,m)&&Yl(e,v,u))return o=i.rename(o,u),f(o),d.push(o),void(r=0);if(l.selector){var T=h(s,o);if(!l.inline||T)return void(r=0)}!g||y||!Yl(e,u,m)||!Yl(e,v,u)||!a&&3===o.nodeType&&1===o.nodeValue.length&&65279===o.nodeValue.charCodeAt(0)||Rs(o)||l.inline&&i.isBlock(o)?(r=0,Qp(Gt.grep(o.childNodes),p),y&&(g=b),r=0):(r||(r=i.clone(c,!1),o.parentNode.insertBefore(r,o),d.push(r)),r.appendChild(o))}};Qp(o,p)})),!0===l.links&&Qp(d,(function(e){var t=function(e){"A"===e.nodeName&&f(e,l),Qp(Gt.grep(e.childNodes),t)};t(e)})),Qp(d,(function(o){var r,a,u,c,h;a=0,Qp(o.childNodes,(function(e){Zl(e)||$l(e)||a++})),r=a,!(1<d.length)&&i.isBlock(o)||0!==r?(l.inline||l.wrapper)&&(l.exact||1!==r||((c=function(e){var t=!1;return Qp(e.childNodes,(function(e){if((n=e)&&1===n.nodeType&&!$l(n)&&!Rs(n)&&!Ao.isBogus(n))return t=e,!1;var n})),t}(u=o))&&!$l(c)&&hf.matchName(i,c,l)&&(h=i.clone(c,!1),f(h),i.replace(h,u,!0),i.remove(c,1)),o=h||u),function(e,t,n,i){$p(t,(function(t){$p(e.dom.select(t.inline,i),(function(i){qp(i)&&Vp(e,t,n,i,t.exact?i:null)})),function(e,t,n){t.clear_child_styles&&$p(e.select(t.links?"*:not(a)":"*",n),(function(n){qp(n)&&$p(t.styles,(function(t,i){e.setStyle(n,i,"")}))}))}(e.dom,t,i)}))}(e,s,n,o),function(e,t,n,i,o){hf.matchNode(e,o.parentNode,n,i)&&Vp(e,t,i,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,(function(r){if(hf.matchNode(e,r,n,i))return Vp(e,t,i,o),!0}))}(e,l,t,n,o),function(e,t,n,i){t.styles&&t.styles.backgroundColor&&Gp(i,Xp(e,"fontSize"),Yp(e,"backgroundColor",Jl(t.styles.backgroundColor,n)))}(i,l,n,o),function(e,t,n,i){"sub"!==t.inline&&"sup"!==t.inline||(Gp(i,Xp(e,"fontSize"),Yp(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",i),!0))}(i,l,0,o),function(e,t,n,i){i&&!1!==t.merge_siblings&&(i=jp(e,Gl(i),i),i=jp(e,i,Gl(i,!0)))}(i,l,0,o)):i.remove(o,1)}))};if("false"!==c.getContentEditable(d.getNode())){if(l){if(i)i.nodeType?h(s,i)||((a=c.createRng()).setStartBefore(i),a.setEndAfter(i),g(c,pu(e,a,s),0,!0)):g(c,i,0,!0);else if(u&&l.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var i,o,r,a,s,l,u=e.selection;a=(i=u.getRng(!0)).startOffset,l=i.startContainer.nodeValue,(o=ks(e.getBody(),u.getStart()))&&(r=yf(o));var c,d,f=/[^\s\u00a0\u00ad\u200b\ufeff]/;l&&0<a&&a<l.length&&f.test(l.charAt(a))&&f.test(l.charAt(a-1))?(s=u.getBookmark(),i.collapse(!0),i=pu(e,i,e.formatter.get(t)),i=pf(i),e.formatter.apply(t,n,i),u.moveToBookmark(s)):(o&&"\ufeff"===r.nodeValue||(c=e.getDoc(),d=bf(!0).dom(),r=(o=c.importNode(d,!0)).firstChild,i.insertNode(o),a=1),e.formatter.apply(t,n,o),u.setCursorLocation(r,a))}(e,t,n);else{var p=e.selection.getNode();e.settings.forced_root_block||!s[0].defaultBlock||c.getParent(p,c.isBlock)||em(e,s[0].defaultBlock),e.selection.setRng(Su(e.selection.getRng())),o=ws.getPersistentBookmark(e.selection,!0),g(c,pu(e,d.getRng(),s)),l.styles&&function(e,t,n,i){(t.styles.color||t.styles.textDecoration)&&(Gt.walk(i,r(Jp,e),"childNodes"),Jp(e,i))}(c,l,0,p),d.moveToBookmark(o),jl(c,d,d.getRng()),e.nodeChanged()}!function(e,t){Ap(kp[e],(function(e){e(t)}))}(t,e)}}else{i=d.getNode();for(var m=0,v=s.length;m<v;m++)if(s[m].ceFalseOverride&&c.is(i,s[m].selector))return void f(i,s[m])}},tm={applyFormat:em},nm=Gt.each,im=function(e,t,n,i,o){var r,a,s,l,u,c,d,f;null===t.get()&&(a=e,s={},(r=t).set({}),a.on("NodeChange",(function(e){var t=iu(a.dom,e.element),n={};t=Gt.grep(t,(function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")})),nm(r.get(),(function(e,i){nm(t,(function(o){return a.formatter.matchNode(o,i,{},e.similar)?(s[i]||(nm(e,(function(e){e(!0,{node:o,format:i,parents:t})})),s[i]=e),n[i]=e,!1):!hf.matchesUnInheritedFormatSelector(a,o,i)&&void 0}))})),nm(s,(function(i,o){n[o]||(delete s[o],nm(i,(function(n){n(!1,{node:e.element,format:o,parents:t})})))}))}))),u=n,c=i,d=o,f=(l=t).get(),nm(u.split(","),(function(e){f[e]||(f[e]=[],f[e].similar=d),f[e].push(c)})),l.set(f)},om=Gt.each,rm=gr.DOM,am=function(e,t){var n,i,o,r=t&&t.schema||nr({}),a=function(e){var t,n,o;return n=t=rm.create((i="string"==typeof e?{name:e,classes:[],attrs:{}}:e).name),(o=i).classes.length&&rm.addClass(n,o.classes.join(" ")),rm.setAttribs(n,o.attrs),t},s=function(e,t,n){var i,o,l,u,c,d,f,h,g=0<t.length&&t[0],p=g&&g.name;if(c=p,d="string"!=typeof(u=e)?u.nodeName.toLowerCase():u,l=!(!(h=(f=r.getElementRule(d))&&f.parentsRequired)||!h.length)&&(c&&-1!==Gt.inArray(h,c)?c:h[0]))p===l?(o=t[0],t=t.slice(1)):o=l;else if(g)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(i=a(o)).appendChild(e),n&&(i||(i=rm.create("div")).appendChild(e),Gt.each(n,(function(t){var n=a(t);i.insertBefore(n,e)}))),s(i,t,o&&o.siblings)};return e&&e.length?(n=a(i=e[0]),(o=rm.create("div")).appendChild(s(n,e.slice(1),i.siblings)),o):""},sm=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Gt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,i,o,r){switch(t){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==Gt.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===o){var a=r.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""}))),n.name=t||"div",n},lm=function(e,t){var n,i,o,r,a,s,l="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var u=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",(r=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Gt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=Gt.map(e.split(/(?:~\+|~|\+)/),sm),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[]}(t.selector)).length?(r[0].name||(r[0].name=n),n=t.selector,i=am(r,e)):i=am([n],e),o=rm.select(n,i)[0]||i.firstChild,om(t.styles,(function(e,t){(e=u(e))&&rm.setStyle(o,t,e)})),om(t.attributes,(function(e,t){(e=u(e))&&rm.setAttrib(o,t,e)})),om(t.classes,(function(e){e=u(e),rm.hasClass(o,e)||rm.addClass(o,e)})),e.fire("PreviewFormats"),rm.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),a=rm.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,om(s.split(" "),(function(t){var n=rm.getStyle(o,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=rm.getStyle(e.getBody(),t,!0),"#ffffff"===rm.toHex(n).toLowerCase())||"color"===t&&"#000000"===rm.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(l+="padding:0 2px;"),l+=t+":"+n+";"}})),e.fire("AfterPreviewFormats"),rm.remove(i),l)},um=function(e,t,n,i,o){var r=t.get(n);!hf.match(e,n,i,o)||"toggle"in r[0]&&!r[0].toggle?tm.applyFormat(e,n,i,o):Wp(e,n,i,o)};function cm(e){var t,n,i,o=(n={},(i=function(e,t){e&&("string"!=typeof e?Gt.each(e,(function(e,t){i(t,e)})):(Gt.each(t=t.length?t:[t],(function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))})),n[e]=t))})(function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,i){Gt.each(i,(function(n,i){e.setAttrib(t,i,n)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Gt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}})),t}((t=e).dom)),i(t.settings.formats),{get:function(e){return e?n[e]:n},register:i,unregister:function(e){return e&&n[e]&&delete n[e],n}}),a=Ar(null);return function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(e),function(e){e.on("mouseup keydown",(function(t){var n,i,o,r;i=t.keyCode,o=(n=e).selection,r=n.getBody(),Cf(n,null,!1),8!==i&&46!==i||!o.isCollapsed()||"\ufeff"!==o.getStart().innerHTML||Cf(n,ks(r,o.getStart())),37!==i&&39!==i||Cf(n,ks(r,o.getStart()))}))}(e),{get:o.get,register:o.register,unregister:o.unregister,apply:r(tm.applyFormat,e),remove:r(Wp,e),toggle:r(um,e,o),match:r(hf.match,e),matchAll:r(hf.matchAll,e),matchNode:r(hf.matchNode,e),canApply:r(hf.canApply,e),formatChanged:r(im,e,a),getCssText:r(lm,e)}}var dm,fm=Object.prototype.hasOwnProperty,hm=(dm=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},i=0;i<e.length;i++){var o=e[i];for(var r in o)fm.call(o,r)&&(n[r]=dm(0,o[r]))}return n}),gm=/^[ \t\r\n]*$/,pm={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},mm=function(e,t,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(i=e[a])return i;for(o=e.parent;o&&o!==t;o=o.parent)if(i=o[a])return i}},vm=function(){function e(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var i,o;if(i=new e(t,pm[t]||1),n)for(o in n)i.attr(o,n[o]);return i},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,i;if("string"!=typeof e){for(i in e)this.attr(i,e[i]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),this;return this}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var t,n,i,o,r,a=new e(this.name,this.type);if(i=this.attributes){for((r=[]).map={},t=0,n=i.length;t<n;t++)"id"!==(o=i[t]).name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);a.attributes=r}return a.value=this.value,a.shortEnded=this.shortEnded,a},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=i,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=mm(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=mm(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var i,o,r=this.firstChild;if(t=t||{},r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(e[r.name])return!1;for(i=r.attributes.length;i--;)if("name"===(o=r.attributes[i].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===r.type)return!1;if(3===r.type&&!gm.test(r.value))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&gm.test(r.value))return!1;if(n&&n(r))return!1}while(r=mm(r,this));return!0},e.prototype.walk=function(e){return mm(this,null,e)},e}(),ym=function(e,t,n,i){(e.padd_empty_with_br||t.insert)&&n[i.name]?i.empty().append(new vm("br",1)).shortEnded=!0:i.empty().append(new vm("#text",3)).value=" "},bm=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},Tm=function(e,t,n,i){return i.isEmpty(t,n,(function(t){return(n=e.getElementRule(t.name))&&n.paddEmpty;var n}))},Cm=Gt.makeMap,Em=Gt.each,_m=Gt.explode,xm=Gt.extend;function Im(e,t){void 0===t&&(t=nr());var n={},i=[],o={},r={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,s;(a=e.name)in n&&((s=o[a])?s.push(e):o[a]=[e]),t=i.length;for(;t--;)(a=i[t].name)in e.attributes.map&&((s=r[a])?s.push(e):r[a]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){Em(_m(e),(function(e){var n;for(n=0;n<i.length;n++)if(i[n].name===e)return void i[n].callbacks.push(t);i.push({name:e,callbacks:[t]})}))},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(e,t){Em(_m(e),(function(e){var i=n[e];i||(n[e]=i=[]),i.push(t)}))},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(s,l){var u,c,d,f,h,g,p,m,v,y,b,T=[];l=l||{},o={},r={},v=xm(Cm("script,style,head,html,body,title,meta,param"),t.getBlockElements());var C=t.getNonEmptyElements(),E=t.children,_=e.validate,x="forced_root_block"in l?l.forced_root_block:e.forced_root_block,I=t.getWhiteSpaceElements(),D=/^[ \t\r\n]+/,w=/[ \t\r\n]+$/,O=/[ \t\r\n]+/g,R=/^[ \t\r\n]+$/;y=I.hasOwnProperty(l.context)||I.hasOwnProperty(e.root_name);var k=function(e,t){var i,r=new vm(e,t);return e in n&&((i=o[e])?i.push(r):o[e]=[r]),r},S=function(e){var n,i,o,r,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(0<(o=n.value.replace(w,"")).length)return void(n.value=o);if(i=n.next){if(3===i.type&&i.value.length){n=n.prev;continue}if(!a[i.name]&&"script"!==i.name&&"style"!==i.name){n=n.prev;continue}}r=n.prev,n.remove(),n=r}};u=vp({validate:_,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){b.append(k("#cdata",4)).value=e},text:function(e,t){var n;y||(e=e.replace(O," "),function(e,t){return e&&(t[e.name]||"br"===e.name)}(b.lastChild,v)&&(e=e.replace(D,""))),0!==e.length&&((n=k("#text",3)).raw=!!t,b.append(n).value=e)},comment:function(e){b.append(k("#comment",8)).value=e},pi:function(e,t){b.append(k(e,7)).value=t,S(b)},doctype:function(e){b.append(k("#doctype",10)).value=e,S(b)},start:function(e,n,o){var a,s,l,u,c;if(l=_?t.getElementRule(e):{}){for((a=k(l.outputName||e,1)).attributes=n,a.shortEnded=o,b.append(a),(c=E[b.name])&&E[a.name]&&!c[a.name]&&T.push(a),s=i.length;s--;)(u=i[s].name)in n.map&&((p=r[u])?p.push(a):r[u]=[a]);v[e]&&S(a),o||(b=a),!y&&I[e]&&(y=!0)}},end:function(n){var i,o,r,a,s;if(o=_?t.getElementRule(n):{}){if(v[n]&&!y){if((i=b.firstChild)&&3===i.type)if(0<(r=i.value.replace(D,"")).length)i.value=r,i=i.next;else for(a=i.next,i.remove(),i=a;i&&3===i.type;)a=i.next,(0===(r=i.value).length||R.test(r))&&(i.remove(),i=a),i=a;if((i=b.lastChild)&&3===i.type)if(0<(r=i.value.replace(w,"")).length)i.value=r,i=i.prev;else for(a=i.prev,i.remove(),i=a;i&&3===i.type;)a=i.prev,(0===(r=i.value).length||R.test(r))&&(i.remove(),i=a),i=a}if(y&&I[n]&&(y=!1),o.removeEmpty&&Tm(t,C,I,b)&&!b.attributes.map.name&&!b.attr("id"))return s=b.parent,v[b.name]?b.empty().remove():b.unwrap(),void(b=s);o.paddEmpty&&(function(e){return bm(e,"#text")&&" "===e.firstChild.value}(b)||Tm(t,C,I,b))&&ym(e,l,v,b),b=b.parent}}},t);var A=b=new vm(l.context||e.root_name,11);if(u.parse(s),_&&T.length&&(l.context?l.invalid=!0:function(e){var n,i,o,r,s,l,u,c,d,f,h,g,p,m,v,y;for(g=Cm("tr,td,th,tbody,thead,tfoot,table"),f=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),p=t.getTextBlockElements(),m=t.getSpecialElements(),n=0;n<e.length;n++)if((i=e[n]).parent&&!i.fixed)if(p[i.name]&&"li"===i.parent.name){for(v=i.next;v&&p[v.name];)v.name="li",v.fixed=!0,i.parent.insert(v,i.parent),v=v.next;i.unwrap(i)}else{for(r=[i],o=i.parent;o&&!t.isValidChild(o.name,i.name)&&!g[o.name];o=o.parent)r.push(o);if(o&&1<r.length){for(r.reverse(),s=l=a(r[0].clone()),d=0;d<r.length-1;d++){for(t.isValidChild(l.name,r[d].name)?(u=a(r[d].clone()),l.append(u)):u=l,c=r[d].firstChild;c&&c!==r[d+1];)y=c.next,u.append(c),c=y;l=u}Tm(t,f,h,s)?o.insert(i,r[0],!0):(o.insert(s,r[0],!0),o.insert(i,s)),(Tm(t,f,h,o=r[0])||bm(o,"br"))&&o.empty().remove()}else if(i.parent){if("li"===i.name){if((v=i.prev)&&("ul"===v.name||"ul"===v.name)){v.append(i);continue}if((v=i.next)&&("ul"===v.name||"ul"===v.name)){v.insert(i,v.firstChild,!0);continue}i.wrap(a(new vm("ul",1)));continue}t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)?i.wrap(a(new vm("div",1))):m[i.name]?i.empty().remove():i.unwrap()}}}(T)),x&&("body"===A.name||l.isRootContent)&&function(){var n,i,o=A.firstChild,r=function(e){e&&((o=e.firstChild)&&3===o.type&&(o.value=o.value.replace(D,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(w,"")))};if(t.isValidChild(A.name,x.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!v[o.name]&&!o.attr("data-mce-type")?(i||((i=k(x,1)).attr(e.forced_root_block_attrs),A.insert(i,o)),i.append(o)):(r(i),i=null),o=n;r(i)}}(),!l.invalid){for(m in o){for(p=n[m],h=(c=o[m]).length;h--;)c[h].parent||c.splice(h,1);for(d=0,f=p.length;d<f;d++)p[d](c,m,l)}for(d=0,f=i.length;d<f;d++)if((p=i[d]).name in r){for(h=(c=r[p.name]).length;h--;)c[h].parent||c.splice(h,1);for(h=0,g=p.callbacks.length;h<g;h++)p.callbacks[h](c,p.name,l)}}return A}};return function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(function(e,i,o){var r,a,s,l,u,c,d,f,h=e.length,g=Gt.extend({},n.getBlockElements()),p=n.getNonEmptyElements(),m=n.getNonEmptyElements();for(g.body=1,r=0;r<h;r++)if(s=(a=e[r]).parent,g[a.parent.name]&&a===s.lastChild){for(u=a.prev;u;){if("span"!==(c=u.name)||"bookmark"!==u.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}u=u.prev}a&&(a.remove(),Tm(n,p,m,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&ym(t,o,g,s)))}else{for(l=a;s&&s.firstChild===l&&s.lastChild===l&&!g[(l=s).name];)s=s.parent;l===s&&!0!==t.padd_empty_with_br&&((f=new vm("#text",3)).value=" ",a.replace(f))}})),e.addAttributeFilter("href",(function(e){var n,i,o,r=e.length;if(!t.allow_unsafe_link_target)for(;r--;)"a"===(n=e[r]).name&&"_blank"===n.attr("target")&&n.attr("rel",(o=(i=n.attr("rel"))?Gt.trim(i):"",/\b(noopener)\b/g.test(o)?o:o.split(" ").filter((function(e){return 0<e.length})).concat(["noopener"]).sort().join(" ")))})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(function(e){for(var t,n,i,o,r=e.length;r--;)if("a"===(o=e[r]).name&&o.firstChild&&!o.attr("href"))for(i=o.parent,t=o.lastChild;n=t.prev,i.insert(t,o),t=n;);})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(function(e){for(var t,n,i=e.length;i--;)if("ul"===(n=(t=e[i]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new vm("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}})),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(function(e){for(var t,i,o,r,a,s,l,u=e.length,c=n.getValidClasses();u--;){for(i=(t=e[u]).attr("class").split(" "),a="",o=0;o<i.length;o++)r=i[o],l=!1,(s=c["*"])&&s[r]&&(l=!0),s=c[t.name],!l&&s&&s[r]&&(l=!0),l&&(a&&(a+=" "),a+=r);a.length||(a=null),t.attr("class",a)}}))}(s,e),function(e,t){t.inline_styles&&function(e,t){var n,i=or();t.convert_fonts_to_spans&&function(e,t,n){e.addNodeFilter("font",(function(e){$(e,(function(e){var i,o=t.parse(e.attr("style")),r=e.attr("color"),a=e.attr("face"),s=e.attr("size");r&&(o.color=r),a&&(o["font-family"]=a),s&&(o["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(o)),i=e,$(["color","face","size"],(function(e){i.attr(e,null)}))}))}))}(e,i,Gt.explode(t.font_size_legacy_values)),n=i,e.addNodeFilter("strike",(function(e){$(e,(function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}))}))}(e,t)}(s,e),s}var Dm=function(e,t,n){-1===Gt.inArray(t,n)&&(e.addAttributeFilter(n,(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),t.push(n))};function wm(t,n){var i,o,a,s,l,u,c=(i=t,u=["data-mce-selected"],a=(o=n)&&o.dom?o.dom:gr.DOM,s=o&&o.schema?o.schema:nr(i),i.entity_encoding=i.entity_encoding||"named",i.remove_trailing_brs=!("remove_trailing_brs"in i)||i.remove_trailing_brs,function(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n,i=e.length;i--;)(n=e[i]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)})),e.addAttributeFilter("src,href,style",(function(e,i){for(var o,r,a=e.length,s="data-mce-"+i,l=t.url_converter,u=t.url_converter_scope;a--;)void 0!==(r=(o=e[a]).attributes.map[s])?(o.attr(i,0<r.length?r:null),o.attr(s,null)):(r=o.attributes.map[i],"style"===i?r=n.serializeStyle(n.parseStyle(r),o.name):l&&(r=l.call(u,r,i,o.name)),o.attr(i,0<r.length?r:null))})),e.addAttributeFilter("class",(function(e){for(var t,n,i=e.length;i--;)(n=(t=e[i]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))})),e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var i,o=e.length;o--;)"bookmark"!==(i=e[o]).attributes.map["data-mce-type"]||n.cleanup||(O.from(i.firstChild).exists((function(e){return!na(e.value)}))?i.unwrap():i.remove())})),e.addNodeFilter("noscript",(function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Uo.decode(t.value))})),e.addNodeFilter("script,style",(function(e,n){for(var i,o,r,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)o=(i=e[a]).firstChild?i.firstChild.value:"","script"===n?((r=i.attr("type"))&&i.attr("type","mce-no/type"===r?null:r.replace(/^mce\-/,"")),"xhtml"===t.element_format&&0<o.length&&(i.firstChild.value="// <![CDATA[\n"+s(o)+"\n// ]]>")):"xhtml"===t.element_format&&0<o.length&&(i.firstChild.value="\x3c!--\n"+s(o)+"\n--\x3e")})),e.addNodeFilter("#comment",(function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))})),e.addNodeFilter("xml:namespace,input",(function(e,t){for(var n,i=e.length;i--;)7===(n=e[i]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))})),e.addAttributeFilter("data-mce-type",(function(t){$(t,(function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}(l=Im(i,s),i,a),{schema:s,addNodeFilter:l.addNodeFilter,addAttributeFilter:l.addAttributeFilter,serialize:function(t,n){var r=hm({format:"html"},n||{}),u=function(t,n,i){return f=i,(d=t)&&d.hasEventListeners("PreProcess")&&!f.no_events?(a=i,c=(o=t).dom,r=(r=n).cloneNode(!0),(s=e.document.implementation).createHTMLDocument&&(l=s.createHTMLDocument(""),Gt.each("BODY"===r.nodeName?r.childNodes:[r],(function(e){l.body.appendChild(l.importNode(e,!0))})),r="BODY"!==r.nodeName?l.body.firstChild:l.body,u=c.doc,c.doc=l),function(e,t){e.fire("PreProcess",t)}(o,hm(a,{node:r})),u&&(c.doc=u),r):n;var o,r,a,s,l,u,c,d,f}(o,t,r),c=function(e,t,n){var i=oa(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||To(ai(t))?i:Gt.trim(i)}(a,u,r),d=function(e,t,n){var i=n.selection?hm({forced_root_block:!1},n):n,o=e.parse(t,i);return function(e){var t,n,i=function(e){return e&&"br"===e.name};i(t=e.lastChild)&&i(n=t.prev)&&(t.remove(),n.remove())}(o),o}(l,c,r);return"tree"===r.format?d:function(e,t,n,i,o){var r,a,s,l;return a=e,r=i,l=ku(t,n).serialize(r),!(s=o).no_events&&a?function(e,t){return e.fire("PostProcess",t)}(a,hm(s,{content:l})).content:l}(o,i,s,d,r)},addRules:function(e){s.addValidElements(e)},setRules:function(e){s.setValidElements(e)},addTempAttr:r(Dm,l,u),getTempAttrs:function(){return u}});return{schema:c.schema,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:c.serialize,addRules:c.addRules,setRules:c.setRules,addTempAttr:c.addTempAttr,getTempAttrs:c.getTempAttrs}}function Om(e){return{getBookmark:r(Vl,e),moveToBookmark:r(Wl,e)}}(Om||(Om={})).isBookmarkNode=$l;var Rm,km,Sm=Om,Am=Ao.isContentEditableFalse,Nm=Ao.isContentEditableTrue,Mm=function(t,n){var i,o,r,a,s,l,u,c,d,f,h,g,p,m,v,y,b,T=n.dom,C=Gt.each,E=n.getDoc(),_=e.document,x=Math.abs,I=Math.round,D=n.getBody();a={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var w=".mce-content-body";n.contentStyles.push(w+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+w+" .mce-resizehandle:hover {background: #000}"+w+" img[data-mce-selected],"+w+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+w+" .mce-clonedresizable {position: absolute;"+(de.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+w+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var O=function(e){return e&&("IMG"===e.nodeName||n.dom.is(e,"figure.image"))},R=function(e){var t,i,o=e.target;t=e,i=n.selection.getRng(),!O(t.target)||lp(t.clientX,t.clientY,i)||e.isDefaultPrevented()||n.selection.select(o)},k=function(e){return n.dom.is(e,"figure.image")?e.querySelector("img"):e},S=function(e){var t=n.settings.object_resizing;return!1!==t&&!de.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==n.getBody()&&Ri(ai(e),t))},A=function(e){var t,a,C,E;m=(m=(t=e.screenX-l)*s[2]+f)<5?5:m,v=(v=(a=e.screenY-u)*s[3]+h)<5?5:v,(O(i)&&!1!==n.settings.resize_img_proportional?!up.modifierPressed(e):up.modifierPressed(e)||O(i)&&s[2]*s[3]!=0)&&(x(t)>x(a)?(v=I(m*g),m=I(v/g)):(m=I(v/g),v=I(m*g))),T.setStyles(k(o),{width:m,height:v}),C=0<(C=s.startPos.x+t)?C:0,E=0<(E=s.startPos.y+a)?E:0,T.setStyles(r,{left:C,top:E,display:"block"}),r.innerHTML=m+" &times; "+v,s[2]<0&&o.clientWidth<=m&&T.setStyle(o,"left",c+(f-m)),s[3]<0&&o.clientHeight<=v&&T.setStyle(o,"top",d+(h-v)),(t=D.scrollWidth-y)+(a=D.scrollHeight-b)!=0&&T.setStyles(r,{left:C-t,top:E-a}),p||(function(e,t,n,i){e.fire("ObjectResizeStart",{target:t,width:n,height:i})}(n,i,f,h),p=!0)},N=function(){p=!1;var e=function(e,t){t&&(i.style[e]||!n.schema.isValid(i.nodeName.toLowerCase(),e)?T.setStyle(k(i),e,t):T.setAttrib(k(i),e,t))};e("width",m),e("height",v),T.unbind(E,"mousemove",A),T.unbind(E,"mouseup",N),_!==E&&(T.unbind(_,"mousemove",A),T.unbind(_,"mouseup",N)),T.remove(o),T.remove(r),M(i),function(e,t,n,i){e.fire("ObjectResized",{target:t,width:n,height:i})}(n,i,m,v),T.setAttrib(i,"style",T.getAttrib(i,"style")),n.nodeChanged()},M=function(e){var t,p,x,I,w;K(),B(),t=T.getPos(e,D),c=t.x,d=t.y,w=e.getBoundingClientRect(),p=w.width||w.right-w.left,x=w.height||w.bottom-w.top,i!==e&&(i=e,m=v=0),I=n.fire("ObjectSelected",{target:e}),S(e)&&!I.isDefaultPrevented()?C(a,(function(e,t){var n;(n=T.get("mceResizeHandle"+t))&&T.remove(n),n=T.add(D,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===de.ie&&(n.contentEditable=!1),T.bind(n,"mousedown",(function(t){var n;t.stopImmediatePropagation(),t.preventDefault(),l=(n=t).screenX,u=n.screenY,f=k(i).clientWidth,h=k(i).clientHeight,g=h/f,(s=e).startPos={x:p*e[0]+c,y:x*e[1]+d},y=D.scrollWidth,b=D.scrollHeight,o=i.cloneNode(!0),T.addClass(o,"mce-clonedresizable"),T.setAttrib(o,"data-mce-bogus","all"),o.contentEditable=!1,o.unSelectabe=!0,T.setStyles(o,{left:c,top:d,margin:0}),o.removeAttribute("data-mce-selected"),D.appendChild(o),T.bind(E,"mousemove",A),T.bind(E,"mouseup",N),_!==E&&(T.bind(_,"mousemove",A),T.bind(_,"mouseup",N)),r=T.add(D,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},f+" &times; "+h)})),e.elm=n,T.setStyles(n,{left:p*e[0]+c-n.offsetWidth/2,top:x*e[1]+d-n.offsetHeight/2})})):K(),i.setAttribute("data-mce-selected","1")},K=function(){var e,t;for(e in B(),i&&i.removeAttribute("data-mce-selected"),a)(t=T.get("mceResizeHandle"+e))&&(T.unbind(t),T.remove(t))},P=function(e){var i,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};p||n.removed||(C(T.select("img[data-mce-selected],hr[data-mce-selected]"),(function(e){e.removeAttribute("data-mce-selected")})),i="mousedown"===e.type?e.target:t.getNode(),o(i=T.$(i).closest("table,img,figure.image,hr")[0],D)&&(F(),o(t.getStart(!0),i)&&o(t.getEnd(!0),i))?M(i):K())},L=function(e){return Am(function(e,t){for(;t&&t!==e;){if(Nm(t)||Am(t))return t;t=t.parentNode}return null}(n.getBody(),e))},B=function(){for(var e in a){var t=a[e];t.elm&&(T.unbind(t.elm),delete t.elm)}},F=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(w){}};return n.on("init",(function(){F(),de.ie&&11<=de.ie&&(n.on("mousedown click",(function(e){var t=e.target,i=t.nodeName;p||!/^(TABLE|IMG|HR)$/.test(i)||L(t)||(2!==e.button&&n.selection.select(t,"TABLE"===i),"mousedown"===e.type&&n.nodeChanged())})),n.dom.bind(D,"mscontrolselect",(function(e){var t=function(e){me.setEditorTimeout(n,(function(){n.selection.select(e)}))};if(L(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))})));var e=me.throttle((function(e){n.composing||P(e)}));n.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),n.on("keyup compositionend",(function(t){i&&"TABLE"===i.nodeName&&e(t)})),n.on("hide blur",K),n.on("contextmenu",R)})),n.on("remove",B),{isResizable:S,showResizeRect:M,hideResizeRect:K,updateResizeRect:P,destroy:function(){i=o=null}}},Km=function(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}},Pm=function(e){return Ao.isContentEditableTrue(e)||Ao.isContentEditableFalse(e)},Lm=function(e,t,n){var i,o,r,a,s,l=n;if(l.caretPositionFromPoint)(o=l.caretPositionFromPoint(e,t))&&((i=n.createRange()).setStart(o.offsetNode,o.offset),i.collapse(!0));else if(n.caretRangeFromPoint)i=n.caretRangeFromPoint(e,t);else if(l.body.createTextRange){i=l.body.createTextRange();try{i.moveToPoint(e,t),i.collapse(!0)}catch(g){i=function(e,t,n){var i,o,r;if(i=n.elementFromPoint(e,t),o=n.body.createTextRange(),i&&"HTML"!==i.tagName||(i=n.body),o.moveToElementText(i),0<(r=(r=Gt.toArray(o.getClientRects())).sort((function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))}))).length){t=(r[0].bottom+r[0].top)/2;try{return o.moveToPoint(e,t),o.collapse(!0),o}catch(a){}}return null}(e,t,n)}return a=n.body,s=(r=i)&&r.parentElement?r.parentElement():null,Ao.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(s,a,Pm))?null:r}return i},Bm=function(e,t){return W(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},Fm=function(t,n){var i=(n||e.document).createDocumentFragment();return $(t,(function(e){i.appendChild(e.dom())})),ai(i)},zm=Ii("element","width","rows"),Hm=Ii("element","cells"),Vm=Ii("x","y"),Wm=function(e,t){var n=parseInt(Ci(e,t),10);return isNaN(n)?1:n},$m=function(e){return j(e,(function(e,t){return t.cells().length>e?t.cells().length:e}),0)},qm=function(e,t){for(var n=e.rows(),i=0;i<n.length;i++)for(var o=n[i].cells(),r=0;r<o.length;r++)if(Si(o[r],t))return O.some(Vm(r,i));return O.none()},Um=function(e,t,n,i,o){for(var r=[],a=e.rows(),s=n;s<=o;s++){var l=a[s].cells(),u=t<i?l.slice(t,i+1):l.slice(i,t+1);r.push(Hm(a[s].element(),u))}return r},jm=function(e){return n=W((t=e).rows(),(function(e){var t=W(e.cells(),(function(e){var t=ea(e);return Ei(t,"colspan"),Ei(t,"rowspan"),t})),n=Qr(e.element());return wr(n,t),n})),i=Qr(t.element()),o=oi("tbody"),wr(o,n),Dr(i,o),i;var t,n,i,o},Gm=function(){return Fm([])},Xm=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return O.from((d=e).selection.getRng()).map((function(e){var t=d.dom.add(d.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),n=oa(t.innerText);return d.dom.remove(t),n})).getOr("");t.getInner=!0;var n,o,a,s,l,u,c,d,f=(o=t,s=(n=e).selection.getRng(),l=n.dom.create("body"),u=n.selection.getSel(),c=Bm(n,Yd(u)),(a=o.contextual?function(e,t){var n,o,a=Jd(t,e);return 0<a.length?function(e,t){return(n=e,i=t[0],Wr(i,"table",r(Si,n))).bind((function(e){var n=t[0],i=t[t.length-1];return function(e,t,n){return qm(e,t).bind((function(t){return qm(e,n).map((function(n){return i=e,r=n,a=(o=t).x(),s=o.y(),l=r.x(),c=s<(u=r.y())?Um(i,a,s,l,u):Um(i,a,u,l,s),zm(i.element(),$m(c),c);var i,o,r,a,s,l,u,c}))}))}(function(e){var t=zm(Qr(e),0,[]);return $(Br(e,"tr"),(function(e,n){$(Br(e,"td,th"),(function(i,o){!function(e,t,n,i,o){for(var r=Wm(o,"rowspan"),a=Wm(o,"colspan"),s=e.rows(),l=n;l<n+r;l++){s[l]||(s[l]=Hm(ea(i),[]));for(var u=t;u<t+a;u++)s[l].cells()[u]=l===n&&u===t?o:Qr(o)}}(t,function(e,t,n){for(;i=t,o=n,r=void 0,((r=e.rows())[o]?r[o].cells():[])[i];)t++;var i,o,r;return t}(t,o,n),n,e,i)}))})),zm(t.element(),$m(t.rows()),t.rows())}(e),n,i).map((function(e){return Fm([jm(e)])}))})).getOrThunk(Gm);var n,i}(e,a):(n=e,0<(o=t).length&&o[0].collapsed?Gm():function(e,t){return n=ai(t.cloneContents()),o=function(e,t){var n,o=ai(t.commonAncestorContainer),a=ac(o,e),s=U(a,(function(e){return fo(e)||uo(e)})),l=function(e,t){return G(e,(function(e){return"li"===ci(e)&&function(e,t){return Ba((a=t,s=a.startContainer,l=a.startOffset,Ao.isText(s)?0===l?O.some(ai(s)):O.none():O.from(s.childNodes[l]).map(ai)),(n=t,i=n.endContainer,o=n.endOffset,Ao.isText(i)?o===i.data.length?O.some(ai(i)):O.none():O.from(i.childNodes[o-1]).map(ai)),(function(t,n){var i=G(Pg(e),r(Si,t)),o=G(Lg(e),r(Si,n));return i.isSome()&&o.isSome()})).getOr(!1);var n,i,o,a,s,l}(e,t)})).fold(i([]),(function(t){return(n=e,G(n,(function(e){return"ul"===ci(e)||"ol"===ci(e)}))).map((function(e){return[oi("li"),oi(ci(e))]})).getOr([]);var n}))}(a,t),u=s.concat(l.length?l:mo(n=o)?Ki(n).filter(po).fold(i([]),(function(e){return[n,e]})):po(n)?[n]:[]);return W(u,Qr)}(e,t),a=j(o,(function(e,t){return Dr(t,e),t}),n),0<o.length?Fm([a]):a;var n,o,a}(n,o[0]))}(ai(n.getBody()),c).dom():s.cloneContents())&&l.appendChild(a),n.selection.serializer.serialize(l,o));return"tree"===t.format?f:(t.content=e.selection.isCollapsed()?"":f,e.fire("GetContent",t),t.content)},Ym=function(e,t,n,i,o){var r=n?t.startOffset:t.endOffset;return O.from(n?t.startContainer:t.endContainer).map(ai).map((function(e){return i&&t.collapsed?e:Hi(e,o(e,r)).getOr(e)})).bind((function(e){return fi(e)?O.some(e):Ki(e)})).map((function(e){return e.dom()})).getOr(e)},Zm=function(e,t,n){return Ym(e,t,!0,n,(function(e,t){return Math.min(e.dom().childNodes.length,t)}))},Jm=function(e,t,n){return Ym(e,t,!1,n,(function(e,t){return 0<t?t-1:t}))},Qm=function(e,t){for(var n=e;e&&Ao.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},ev=Gt.each,tv=function(e){return!!e.select},nv=function(e){return!(!e||!e.ownerDocument)&&Ai(ai(e.ownerDocument),ai(e))},iv=function(e,t,n,i){var o,r,a,s,l,u=function(e,n){return function(e,n,i){var o,r,a,s=e.selection.getRng(),l=e.getDoc();if((i=i||{format:"html"}).set=!0,i.selection=!0,i.content=n,i.no_events||!(i=e.fire("BeforeSetContent",i)).isDefaultPrevented()){if(n=i.content,s.insertNode){n+='<span id="__caret">_</span>',s.startContainer===l&&s.endContainer===l?l.body.innerHTML=n:(s.deleteContents(),0===l.body.childNodes.length?l.body.innerHTML=n:s.createContextualFragment?s.insertNode(s.createContextualFragment(n)):(r=l.createDocumentFragment(),a=l.createElement("div"),r.appendChild(a),a.outerHTML=n,s.insertNode(r))),o=e.dom.get("__caret"),(s=l.createRange()).setStartBefore(o),s.setEndBefore(o),e.selection.setRng(s),e.dom.remove("__caret");try{e.selection.setRng(s)}catch(t){}}else s.item&&(l.execCommand("Delete",!1,null),s=e.getRng()),/^\s+/.test(n)?(s.pasteHTML('<span id="__mce_tmp">_</span>'+n),e.dom.remove("__mce_tmp")):s.pasteHTML(n);i.no_events||e.fire("SetContent",i)}else e.fire("SetContent",i)}(i,e,n)},c=function(e){var t=f();t.collapse(!!e),h(t)},d=function(){return t.getSelection?t.getSelection():t.document.selection},f=function(){var n,o,r,u,c=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(u){return-1}};if(!t)return null;if(null==(u=t.document))return null;if(void 0!==i.bookmark&&!1===ig(i)){var f=bh(i);if(f.isSome())return f.map((function(e){return Bm(i,[e])[0]})).getOr(u.createRange())}try{(n=d())&&!Ao.isRestrictedNode(n.anchorNode)&&(o=0<n.rangeCount?n.getRangeAt(0):n.createRange?n.createRange():u.createRange())}catch(l){}return(o=Bm(i,[o])[0])||(o=u.createRange?u.createRange():u.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(r=e.getRoot(),o.setStart(r,0),o.setEnd(r,0)),a&&s&&(0===c(o.START_TO_START,o,a)&&0===c(o.END_TO_END,o,a)?o=s:s=a=null),o},h=function(e,t){var n,o;if((r=e)&&(tv(r)||nv(r.startContainer)&&nv(r.endContainer))){var r,u=tv(e)?e:null;if(u){s=null;try{u.select()}catch(l){}}else{if(n=d(),e=i.fire("SetSelectionRange",{range:e,forward:t}).range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(l){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||de.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),i.fire("AfterSetSelectionRange",{range:e,forward:t})}}},g=function(){var t,n,i=d();return!(i&&i.anchorNode&&i.focusNode)||((t=e.createRng()).setStart(i.anchorNode,i.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(i.focusNode,i.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},p={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:i,collapse:c,setCursorLocation:function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),h(o),c(!1)):(Bg(e,o,i.getBody(),!0),h(o))},getContent:function(e){return Xm(i,e)},setContent:u,getBookmark:function(e,t){return o.getBookmark(e,t)},moveToBookmark:function(e){return o.moveToBookmark(e)},select:function(t,n){var i,o,r;return(i=e,o=t,r=n,O.from(o).map((function(e){var t=i.nodeIndex(e),n=i.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),r&&(Bg(i,n,e,!0),Bg(i,n,e,!1)),n}))).each(h),t},isCollapsed:function(){var e=f(),t=d();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:g,setNode:function(t){return u(e.getOuterHTML(t)),t},getNode:function(){return e=i.getBody(),(t=f())?(o=t.startContainer,r=t.endContainer,a=t.startOffset,s=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(o===r&&s-a<2&&o.hasChildNodes()&&(n=o.childNodes[a]),3===o.nodeType&&3===r.nodeType&&(o=o.length===a?Qm(o.nextSibling,!0):o.parentNode,r=0===s?Qm(r.previousSibling,!1):r.parentNode,o&&o===r))?o:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,o,r,a,s},getSel:d,setRng:h,getRng:f,getStart:function(e){return Zm(i.getBody(),f(),e)},getEnd:function(e){return Jm(i.getBody(),f(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,i){var o,r,a=[];if(r=e.getRoot(),n=e.getParent(n||Zm(r,t,t.collapsed),e.isBlock),i=e.getParent(i||Jm(r,t,t.collapsed),e.isBlock),n&&n!==r&&a.push(n),n&&i&&n!==i)for(var s=new oo(o=n,r);(o=s.next())&&o!==i;)e.isBlock(o)&&a.push(o);return i&&n!==i&&i!==r&&a.push(i),a}(e,f(),t,n)},normalize:function(){var t=f();if(!function(e){return 1<Xd(e).length}(d())&&Fg(i)){var n=Xf(e,t);return n.each((function(e){h(e,g())})),n.getOr(t)}return t},selectorChanged:function(t,n){var o;return l||(l={},o={},i.on("NodeChange",(function(t){var n=t.element,i=e.getParents(n,null,e.getRoot()),r={};ev(l,(function(t,n){ev(i,(function(a){if(e.is(a,n))return o[n]||(ev(t,(function(e){e(!0,{node:a,selector:n,parents:i})})),o[n]=t),r[n]=t,!1}))})),ev(o,(function(e,t){r[t]||(delete o[t],ev(e,(function(e){e(!1,{node:n,selector:t,parents:i})})))}))}))),l[t]||(l[t]=[]),l[t].push(n),p},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){var i,o,r,a,s,l=e.dom,u=l.getRoot(),c=0;if(e.fire("scrollIntoView",s={elm:t,alignToTop:n}),!s.isDefaultPrevented()&&Ao.isElement(t)){if(!1===n&&(c=t.offsetHeight),"BODY"!==u.nodeName){var d=e.selection.getScrollContainer();if(d)return i=Km(t).y-Km(d).y+c,a=d.clientHeight,void((i<(r=d.scrollTop)||r+a<i+25)&&(d.scrollTop=i<r?i:i-a+25))}o=l.getViewPort(e.getWin()),i=l.getPos(t).y+c,r=o.y,a=o.h,(i<o.y||r+a<i+25)&&e.getWin().scrollTo(0,i<r?i:i-a+25)}}(i,e,t)},placeCaretAt:function(e,t){return h(Lm(e,t,i.getDoc()))},getBoundingClientRect:function(){var e=f();return e.collapsed?as.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=s=null,r.destroy()}};return o=Sm(p),r=Mm(p,i),p.bookmarkManager=o,p.controlSelection=r,p};(km=Rm||(Rm={}))[km.Br=0]="Br",km[km.Block=1]="Block",km[km.Wrap=2]="Wrap",km[km.Eol=3]="Eol";var ov=function(e,t){return e===os.Backwards?t.reverse():t},rv=function(e,t,n,i){for(var o,r,a,s,l,u=Il(n),c=i,d=[];c&&(s=u,l=c,o=t===os.Forwards?s.next(l):s.prev(l));){if(Ao.isBr(o.getNode(!1)))return t===os.Forwards?{positions:ov(t,d).concat([o]),breakType:Rm.Br,breakAt:O.some(o)}:{positions:ov(t,d),breakType:Rm.Br,breakAt:O.some(o)};if(o.isVisible()){if(e(c,o)){var f=(r=c,Ao.isBr((a=o).getNode(t===os.Forwards))?Rm.Br:!1===tl(r,a)?Rm.Block:Rm.Wrap);return{positions:ov(t,d),breakType:f,breakAt:O.some(o)}}d.push(o),c=o}else c=o}return{positions:ov(t,d),breakType:Rm.Eol,breakAt:O.none()}},av=function(e,t,n,i){return t(n,i).breakAt.map((function(i){var o=t(n,i).positions;return e===os.Backwards?o.concat(i):[i].concat(o)})).getOr([])},sv=function(e,t){return j(e,(function(e,n){return e.fold((function(){return O.some(n)}),(function(i){return Ba(Q(i.getClientRects()),Q(n.getClientRects()),(function(e,o){var r=Math.abs(t-e.left);return Math.abs(t-o.left)<=r?n:i})).or(e)}))}),O.none())},lv=function(e,t){return Q(t.getClientRects()).bind((function(t){return sv(e,t.left)}))},uv=r(rv,is.isAbove,-1),cv=r(rv,is.isBelow,1),dv=r(av,-1,uv),fv=r(av,1,cv),hv=Ao.isContentEditableFalse,gv=Ma,pv=function(e,t,n){var i,o,a,s,l=Il(e.getBody()),u=r(dl,l.next),c=r(dl,l.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(i=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?u(as.fromRangeStart(n)):c(as.fromRangeStart(n)))||(s=(a=e).dom.create(Lu(a)),(!de.ie||11<=de.ie)&&(s.innerHTML='<br data-mce-bogus="1">'),o=s,1===t?e.$(i).after(o):e.$(i).before(o),e.selection.select(o,!0),e.selection.collapse())}},mv=function(e,t){return function(){var n,i,o,a,s,l,u,c,d,f=(i=t,a=Il((n=e).getBody()),s=r(dl,a.next),l=r(dl,a.prev),u=i?os.Forwards:os.Backwards,c=i?s:l,d=n.selection.getRng(),(o=function(e,t,n,i){var o=e===os.Forwards,r=o?Ac:Nc;if(!i.collapsed){var a=gv(i);if(hv(a))return kf(e,t,a,e===os.Backwards,!0)}var s=sa(i.startContainer),l=ul(e,t.getBody(),i);if(r(l))return Sf(t,l.getNode(!o));var u=ju.normalizePosition(o,n(l));if(!u)return s?i:null;if(r(u))return kf(e,t,u.getNode(!o),o,!0);var c=n(u);return c&&r(c)&&fl(u,c)?kf(e,t,c.getNode(!o),o,!0):s?Nf(t,u.toRange(),!0):null}(u,n,c,d))?o:(o=pv(n,u,d))||null);return!!f&&(e.selection.setRng(f),!0)}},vv=function(e,t){return function(){var n,i,o,r,a,s,l=(r=(i=t)?1:-1,a=i?Jg:Zg,s=(n=e).selection.getRng(),(o=function(e,t,n,i){var o,r,a,s,l,u,c,d,f;if(f=gv(i),o=ul(e,t.getBody(),i),r=n(t.getBody(),Qg(1),o),a=U(r,ep(1)),l=Wt.last(o.getClientRects()),(Ac(o)||Kc(o))&&(f=o.getNode()),(Nc(o)||Pc(o))&&(f=o.getNode(!0)),!l)return null;if((s=ap(a,u=l.left))&&hv(s.node))return c=Math.abs(u-s.left),d=Math.abs(u-s.right),kf(e,t,s.node,c<d,!0);if(f){var h=function(e,t,n,i){var o,r,a,s,l,u,c=Il(t),d=[],f=0,h=function(e){return Wt.last(e.getClientRects())};1===e?(o=c.next,r=Aa,a=Sa,s=as.after(i)):(o=c.prev,r=Sa,a=Aa,s=as.before(i)),u=h(s);do{if(s.isVisible()&&!a(l=h(s),u)){if(0<d.length&&r(l,Wt.last(d))&&f++,(l=Oa(l)).position=s,l.line=f,n(l))return d;d.push(l)}}while(s=o(s));return d}(e,t.getBody(),Qg(1),f);if(s=ap(U(h,ep(1)),u))return Nf(t,s.position.toRange(),!0);if(s=Wt.last(U(h,ep(0))))return Nf(t,s.position.toRange(),!0)}}(r,n,a,s))?o:(o=pv(n,r,s))||null);return!!l&&(e.selection.setRng(l),!0)}},yv=function(e,t){return function(){var n,o=t?as.fromRangeEnd(e.selection.getRng()):as.fromRangeStart(e.selection.getRng()),r=t?cv(e.getBody(),o):uv(e.getBody(),o);return(t?ee(r.positions):Q(r.positions)).filter((n=t,function(e){return n?Nc(e):Ac(e)})).fold(i(!1),(function(t){return e.selection.setRng(t.toRange()),!0}))}},bv=function(e,t,n,i,o){var r,a,s,l,u=Br(ai(n),"td,th,caption").map((function(e){return e.dom()}));return(a=U((r=e,Y(u,(function(e){var t,n={left:(t=Oa(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:n.left,y:r(n),cell:e},{x:n.right,y:r(n),cell:e}]}))),(function(e){return t(e,o)})),s=i,l=o,j(a,(function(e,t){return e.fold((function(){return O.some(t)}),(function(e){var n=Math.sqrt(Math.abs(e.x-s)+Math.abs(e.y-l)),i=Math.sqrt(Math.abs(t.x-s)+Math.abs(t.y-l));return O.some(i<n?t:e)}))}),O.none())).map((function(e){return e.cell}))},Tv=r(bv,(function(e){return e.bottom}),(function(e,t){return e.y<t})),Cv=r(bv,(function(e){return e.top}),(function(e,t){return e.y>t})),Ev=function(e,t){e.selection.setRng(t),function(e,t){Q(is.fromRangeStart(t).getClientRects()).each((function(t){var n,i,o,r,a,s,l,u,c,d=(a=n=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(e),(s=i=t).left>a.left&&s.right<a.right?0:s.left<a.left?s.left-a.left:s.right-a.right),f=(r=i).top>(o=n).top&&r.bottom<o.bottom?0:r.top<o.top?r.top-o.top:r.bottom-o.bottom;u=0!==d?0<d?d+4:d-4:0,c=0!==f?0<f?f+4:f-4:0,(l=e).inline?(l.getBody().scrollLeft+=u,l.getBody().scrollTop+=c):l.getWin().scrollBy(u,c)}))}(e,t)},_v=function(e,t,n){var i,o,r,a,s=e(t,n);return(a=s).breakType===Rm.Wrap&&0===a.positions.length||!Ao.isBr(n.getNode())&&(r=s).breakType===Rm.Br&&1===r.positions.length?(i=e,o=t,!s.breakAt.map((function(e){return i(o,e).breakAt.isSome()})).getOr(!1)):s.breakAt.isNone()},xv=r(_v,uv),Iv=r(_v,cv),Dv=function(e,t,n){var i=function(e,t){var n=t.getNode(e);return Ao.isElement(n)&&"TABLE"===n.nodeName?O.some(n):O.none()}(!!t,n),o=!1===t;i.fold((function(){return Ev(e,n.toRange())}),(function(i){return Kl.positionIn(o,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return Ev(e,n.toRange())}),(function(o){return r=t,s=i,l=n,void((u=Lu(a=e))?a.undoManager.transact((function(){var e=oi(u);Ti(e,Bu(a)),Dr(e,oi("br")),r?xr(ai(s),e):_r(ai(s),e);var t=a.dom.createRng();t.setStart(e.dom(),0),t.setEnd(e.dom(),0),Ev(a,t)})):Ev(a,l.toRange()));var r,a,s,l,u}))}))},wv=function(e,t){return function(){return O.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(n){return O.from(e.dom.getParent(n,"table")).map((function(n){return function(e,t,n,i){var o,r,a,s=e.selection.getRng(),l=t?1:-1;if(Vs()&&(o=t,r=n,a=as.fromRangeStart(s),Kl.positionIn(!o,r).map((function(e){return e.isEqual(a)})).getOr(!1))){var u=kf(l,e,n,!t,!0);return Ev(e,u),!0}return!1}(e,t,n)}))})).getOr(!1)}},Ov=function(e,t){return function(){return O.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(n){return O.from(e.dom.getParent(n,"table")).map((function(i){return function(e,t,n,i){var o,r,a,s,l,u,c=e.selection.getRng(),d=as.fromRangeStart(c),f=e.getBody();if(!t&&xv(i,d)){var h=(s=f,function(e,t){return Q(t.getClientRects()).bind((function(t){return Tv(e,t.left,t.top)})).bind((function(e){return lv(Kl.lastPositionIn(n=e).map((function(e){return uv(n,e).positions.concat(e)})).getOr([]),t);var n}))}(l=n,u=d).orThunk((function(){return Q(u.getClientRects()).bind((function(e){return sv(dv(s,as.before(l)),e.left)}))})).getOr(as.before(l)));return Dv(e,t,h),!0}return!(!t||!Iv(i,d)||(o=f,h=function(e,t){return ee(t.getClientRects()).bind((function(t){return Cv(e,t.left,t.top)})).bind((function(e){return lv(Kl.firstPositionIn(n=e).map((function(e){return[e].concat(cv(n,e).positions)})).getOr([]),t);var n}))}(r=n,a=d).orThunk((function(){return Q(a.getClientRects()).bind((function(e){return sv(fv(o,as.after(r)),e.left)}))})).getOr(as.after(r)),Dv(e,t,h),0))}(e,t,i,n)}))})).getOr(!1)}},Rv=function(e){return H(["figcaption"],ci(e))},kv=function(t){var n=e.document.createRange();return n.setStartBefore(t.dom()),n.setEndBefore(t.dom()),n},Sv=function(e,t,n){n?Dr(e,t):Ir(e,t)},Av=function(e,t){return function(){return!!e.selection.isCollapsed()&&function(e,t){var n,i,o,a=ai(e.getBody()),s=as.fromRangeStart(e.selection.getRng()),l=Lu(e),u=Bu(e);return(n=s,i=a,o=r(Si,i),Vr(ai(n.container()),co,o).filter(Rv)).exists((function(){if(function(e,t,n){return t?(o=e.dom(),cv(o,n).breakAt.isNone()):(i=e.dom(),uv(i,n).breakAt.isNone());var i,o}(a,t,s)){var n=function(e,t,n,i){return""===t?(u=e,c=i,d=oi("br"),Sv(u,d,c),kv(d)):(o=e,r=i,a=n,s=oi(t),l=oi("br"),Ti(s,a),Dr(s,l),Sv(o,s,r),kv(l));var o,r,a,s,l,u,c,d}(a,l,u,t);return e.selection.setRng(n),!0}return!1}))}(e,t)}},Nv=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,i)}},Mv=function(e,n){return G(function(e,n){return Y(W(e,(function(e){return hm({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t},e)})),(function(e){return(i=n).keyCode===(t=e).keyCode&&i.shiftKey===t.shiftKey&&i.altKey===t.altKey&&i.ctrlKey===t.ctrlKey&&i.metaKey===t.metaKey?[e]:[];var t,i}))}(e,n),(function(e){return e.action()}))},Kv=function(e){return O.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Pv=function(e,t){var n,i,o,r=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(o=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new oo(t,t);i=n.current();){if(Ao.isText(i)){o.setStart(i,0),o.setEnd(i,0);break}if(s[i.nodeName.toLowerCase()]){o.setStartBefore(i),o.setEndBefore(i);break}r=i,i=n.next()}i||(o.setStart(r,0),o.setEnd(r,0))}else Ao.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),a.remove(void 0),e.selection.scrollIntoView(t)}},Lv=Kv,Bv=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},Fv=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},zv=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Hv=function(e,t,n){for(var i=e[n?"firstChild":"lastChild"];i&&!Ao.isElement(i);)i=i[n?"nextSibling":"previousSibling"];return i===t},Vv=function(e){e.innerHTML='<br data-mce-bogus="1">'},Wv=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},$v=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},qv=function(e,t,n){return!1===Ao.isText(t)?n:e?1===n&&t.data.charAt(n-1)===ia?0:n:n===t.data.length-1&&t.data.charAt(n)===ia?t.data.length:n},Uv=function(e,t){var n,i,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==o?i:o},jv=function(e,t){var n=Lu(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Bu(e))},Gv=function(e,t){return Lv(e).filter((function(e){return 0<t.length&&Ri(ai(e),t)})).isSome()},Xv=vc([{br:[]},{block:[]},{none:[]}]),Yv=function(e,t){return function(e){return Gv(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},Zv=function(e){return function(t,n){return""===Lu(t)===e}},Jv=function(e){return function(t,n){return function(e){return Kv(e).filter((function(e){return mo(ai(e))})).isSome()}(t)===e}},Qv=function(e,t){return function(n,o){return function(e){return Kv(e).fold(i(""),(function(e){return e.nodeName.toUpperCase()}))}(n)===e.toUpperCase()===t}},ey=function(e){return Qv("pre",e)},ty=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},ny=function(e,t){return function(e){return Gv(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},iy=function(e,t){return t},oy=function(e){var t=Lu(e),n=function(e,t){var n,i,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==o?i:o}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},ry=function(e,t){return function(n,i){return j(e,(function(e,t){return e&&t(n,i)}),!0)?O.some(t):O.none()}},ay=function(e,n){(function(e,t){return ad([ry([Yv],Xv.none()),ry([Qv("summary",!0)],Xv.br()),ry([ey(!0),ty(!1),iy],Xv.br()),ry([ey(!0),ty(!1)],Xv.block()),ry([ey(!0),ty(!0),iy],Xv.block()),ry([ey(!0),ty(!0)],Xv.br()),ry([Jv(!0),iy],Xv.br()),ry([Jv(!0)],Xv.block()),ry([Zv(!0),iy,oy],Xv.block()),ry([Zv(!0)],Xv.br()),ry([ny],Xv.br()),ry([Zv(!1),iy],Xv.br()),ry([oy],Xv.block())],[e,t.shiftKey]).getOr(Xv.none())})(e,n).fold((function(){oh(e,n)}),(function(){!function(e,t){var n,i,o,r,a,s,l,u,c,d,f,h,g,p,m,v,y,b,T=e.dom,C=e.schema,E=C.getNonEmptyElements(),_=e.selection.getRng(),x=function(t){var n,r,s,l=o,u=C.getTextInlineElements();if(t||"TABLE"===d||"HR"===d?(n=T.create(t||h),jv(e,n)):n=a.cloneNode(!1),s=n,!1===function(e){return e.getParam("keep_styles",!0)}(e))T.setAttrib(n,"style",null),T.setAttrib(n,"class",null);else do{if(u[l.nodeName]){if(Rs(l)||$l(l))continue;r=l.cloneNode(!1),T.setAttrib(r,"id",""),n.hasChildNodes()?r.appendChild(n.firstChild):s=r,n.appendChild(r)}}while((l=l.parentNode)&&l!==i);return Vv(s),n},I=function(e){var t,n,i,s;if(s=qv(e,o,r),Ao.isText(o)&&(e?0<s:s<o.nodeValue.length))return!1;if(o.parentNode===a&&g&&!e)return!0;if(e&&Ao.isElement(o)&&o===a.firstChild)return!0;if(Wv(o,"TABLE")||Wv(o,"HR"))return g&&!e||!g&&e;for(t=new oo(o,a),Ao.isText(o)&&(e&&0===s?t.prev():e||s!==o.nodeValue.length||t.next());n=t.current();){if(Ao.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(i=n.nodeName.toLowerCase(),E[i]&&"br"!==i))return!1}else if(Ao.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},D=function(){l=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==f?x(h):x(),function(e){return e.getParam("end_container_on_empty_block",!1)}(e)&&$v(T,c)&&T.isEmpty(a)?l=T.split(c,a):T.insertAfter(l,a),Pv(e,l)};Xf(T,_).each((function(e){_.setStart(e.startContainer,e.startOffset),_.setEnd(e.endContainer,e.endOffset)})),o=_.startContainer,r=_.startOffset,h=Lu(e),s=t.shiftKey,Ao.isElement(o)&&o.hasChildNodes()&&(g=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,r=g&&Ao.isText(o)?o.nodeValue.length:0),(i=Uv(T,o))&&((h&&!s||!h&&s)&&(o=function(e,t,n,i,o){var r,a,s,l,u,c,d,f=t||"P",h=e.dom,g=Uv(h,i);if(!(a=h.getParent(i,h.isBlock))||!$v(h,a)){if(c=(a=a||g)===e.getBody()||(d=a)&&/^(TD|TH|CAPTION)$/.test(d.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return r=h.create(f),jv(e,r),a.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r;for(l=i;l.parentNode!==a;)l=l.parentNode;for(;l&&!h.isBlock(l);)l=(s=l).previousSibling;if(s&&e.schema.isValidChild(c,f.toLowerCase())){for(r=h.create(f),jv(e,r),s.parentNode.insertBefore(r,s),l=s;l&&!h.isBlock(l);)u=l.nextSibling,r.appendChild(l),l=u;n.setStart(i,o),n.setEnd(i,o)}}return i}(e,h,_,o,r)),a=T.getParent(o,T.isBlock),c=a?T.getParent(a.parentNode,T.isBlock):null,d=a?a.nodeName.toUpperCase():"","LI"!==(f=c?c.nodeName.toUpperCase():"")||t.ctrlKey||(c=(a=c).parentNode,d=f),/^(LI|DT|DD)$/.test(d)&&T.isEmpty(a)?function(e,t,n,i,o){var r=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var s;Fv(s=n)&&Fv(s.parentNode)&&(o="LI");var l,u=o?t(o):r.create("BR");if(Hv(n,i,!0)&&Hv(n,i,!1))Bv(n,"LI")?r.insertAfter(u,zv(n)):r.replace(u,n);else if(Hv(n,i,!0))Bv(n,"LI")?(r.insertAfter(u,zv(n)),u.appendChild(r.doc.createTextNode(" ")),u.appendChild(n)):n.parentNode.insertBefore(u,n);else if(Hv(n,i,!1))r.insertAfter(u,zv(n));else{n=zv(n);var c=a.cloneRange();c.setStartAfter(i),c.setEndAfter(n);var d=c.extractContents();"LI"===o&&(l=d).firstChild&&"LI"===l.firstChild.nodeName?(u=d.firstChild,r.insertAfter(d,n)):(r.insertAfter(d,n),r.insertAfter(u,n))}r.remove(i),Pv(e,u)}}(e,x,c,a,h):h&&a===e.getBody()||(h=h||"P",sa(a)?(l=pa(a),T.isEmpty(a)&&Vv(a),Pv(e,l)):I()?D():I(!0)?(l=a.parentNode.insertBefore(x(),a),Pv(e,Wv(a,"HR")?l:a)):((n=(y=_,b=y.cloneRange(),b.setStart(y.startContainer,qv(!0,y.startContainer,y.startOffset)),b.setEnd(y.endContainer,qv(!1,y.endContainer,y.endOffset)),b).cloneRange()).setEndAfter(a),u=n.extractContents(),$(Lr(ai(u),hi),(function(e){var t=e.dom();t.nodeValue=oa(t.nodeValue)})),function(e){for(;Ao.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}(u),l=u.firstChild,T.insertAfter(u,a),function(e,t,n){var i,o=n,r=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;Ao.isElement(o)&&!t[o.nodeName.toLowerCase()]&&r.push(o)}for(i=r.length;i--;)(!(o=r[i]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue||(a=o)&&"A"===a.nodeName&&e.isEmpty(a))&&e.remove(o);var a}}(T,E,l),p=T,(m=a).normalize(),(v=m.lastChild)&&!/^(left|right)$/gi.test(p.getStyle(v,"float",!0))||p.add(m,"br"),T.isEmpty(a)&&Vv(a),l.normalize(),T.isEmpty(l)?(T.remove(l),D()):Pv(e,l)),T.setAttrib(l,"id",""),e.fire("NewBlock",{newBlock:l})))}(e,n)}),t)},sy=function(e,t){var n=t.container(),i=t.offset();return Ao.isText(n)?(n.insertData(i,e),O.some(is(n,i+e.length))):cl(t).map((function(n){var i=ri(e);return t.isAtEnd()?xr(n,i):_r(n,i),is(i.dom(),e.length)}))},ly=r(sy," "),uy=r(sy," "),cy=function(e,t,n){return Kl.navigateIgnore(e,t,n,kc)},dy=function(e,t){return G(ac(ai(t.container()),e),co)},fy=function(e,t,n){return cy(e,t.dom(),n).forall((function(e){return dy(t,n).fold((function(){return!1===tl(e,n,t.dom())}),(function(i){return!1===tl(e,n,t.dom())&&Ai(i,ai(e.container()))}))}))},hy=function(e,t,n){return dy(t,n).fold((function(){return cy(e,t.dom(),n).forall((function(e){return!1===tl(e,n,t.dom())}))}),(function(t){return cy(e,t.dom(),n).isNone()}))},gy=r(hy,!1),py=r(hy,!0),my=r(fy,!1),vy=r(fy,!0),yy=function(e){return is.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},by=function(e,t){var n=U(ac(ai(t.container()),e),co);return Q(n).getOr(e)},Ty=function(e,t){return yy(t)?Rc(t):Rc(t)||Kl.prevPosition(by(e,t).dom(),t).exists(Rc)},Cy=function(e,t){return yy(t)?Oc(t):Oc(t)||Kl.nextPosition(by(e,t).dom(),t).exists(Oc)},Ey=function(e){return cl(e).bind((function(e){return Vr(e,fi)})).exists((function(e){return t=_i(e,"white-space"),H(["pre","pre-wrap"],t);var t}))},_y=function(e,t){return n=e,!Ey(i=t)&&(gy(n,i)||my(n,i)||Cc(n,i)||Ty(n,i))||function(e,t){var n,i,o,r=(i=(n=t).container(),o=n.offset(),Ao.isText(i)&&o<i.data.length?is(i,o+1):n);return!Ey(r)&&(py(e,r)||vy(e,r)||Tc(e,r)||Cy(e,r))}(e,t);var n,i},xy=function(e,t){return xc(e.charAt(t))},Iy=function(e){var t=e.container();return Ao.isText(t)&&jn(t.data," ")},Dy=function(e){var t=ai(e.getBody());e.selection.isCollapsed()&&function(e,t){return O.some(t).filter(Iy).bind((function(t){var n,i,o,r,a,s,l,u,c=t.container();return a=e,l=(s=c).data,u=is(s,0),xy(l,0)&&!_y(a,u)&&(s.data=" "+l.slice(1),1)||function(e){var t,n=e.data,i=(t=n.split(""),W(t,(function(e,n){return xc(e)&&0<n&&n<t.length-1&&Dc(t[n-1])&&Dc(t[n+1])?" ":e})).join(""));return i!==n&&(e.data=i,!0)}(c)||(n=e,o=(i=c).data,r=is(i,o.length-1),xy(o,o.length-1)&&!_y(n,r)&&(i.data=o.slice(0,-1)+" ",1))?O.some(t):O.none()}))}(t,is.fromRangeStart(e.selection.getRng())).each((function(t){e.selection.setRng(t.toRange())}))},wy=function(e){var t,n,i=as.fromRangeStart(e.selection.getRng()),o=ai(e.getBody());if(e.selection.isCollapsed()){var a=r(ju.isInlineTarget,e),s=as.fromRangeStart(e.selection.getRng());return xd(a,e.getBody(),s).bind((n=o,function(e){return e.fold((function(e){return Kl.prevPosition(n.dom(),as.before(e))}),(function(e){return Kl.firstPositionIn(e)}),(function(e){return Kl.lastPositionIn(e)}),(function(e){return Kl.nextPosition(n.dom(),as.after(e))}))})).bind(function(e,t){return function(n){return i=e,!Ey(o=n)&&(function(e,t){return i=t,Kl.prevPosition(e.dom(),i).isNone()||(n=t,Kl.nextPosition(e.dom(),n).isNone())||gy(e,t)||py(e,t)||Cc(e,t)||Tc(e,t);var n,i}(i,o)||Ty(i,o)||Cy(i,o))?ly(t):uy(t);var i,o}}(o,i)).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}))}return!1},Oy=function(e,t){var n;t.hasAttribute("data-mce-caret")&&(pa(t),(n=e).selection.setRng(n.selection.getRng()),e.selection.scrollIntoView(t))},Ry=function(e,t){var n=$r(ai(e.getBody()),"*[data-mce-caret]").fold(i(null),(function(e){return e.dom()}));if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Oy(e,n)):void(ca(n)&&(Oy(e,n),e.undoManager.add()))},ky=ti.detect().browser,Sy=function(e){var t=Md.setupSelectedState(e);(function(e){e.on("keyup compositionstart",r(Ry,e))})(e),function(e,t){e.on("keydown",(function(n){var i,o,r,a;!1===n.isDefaultPrevented()&&(i=e,o=t,r=n,a=ti.detect().os,Mv([{keyCode:up.RIGHT,action:mv(i,!0)},{keyCode:up.LEFT,action:mv(i,!1)},{keyCode:up.UP,action:vv(i,!1)},{keyCode:up.DOWN,action:vv(i,!0)},{keyCode:up.RIGHT,action:wv(i,!0)},{keyCode:up.LEFT,action:wv(i,!1)},{keyCode:up.UP,action:Ov(i,!1)},{keyCode:up.DOWN,action:Ov(i,!0)},{keyCode:up.RIGHT,action:Md.move(i,o,!0)},{keyCode:up.LEFT,action:Md.move(i,o,!1)},{keyCode:up.RIGHT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:Md.moveNextWord(i,o)},{keyCode:up.LEFT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:Md.movePrevWord(i,o)},{keyCode:up.UP,action:Av(i,!1)},{keyCode:up.DOWN,action:Av(i,!0)}],r).each((function(e){r.preventDefault()})))}))}(e,t),function(e,t){e.on("keydown",(function(n){var i,o,r;!1===n.isDefaultPrevented()&&(o=t,r=n,Mv([{keyCode:up.BACKSPACE,action:Nv(Gc,i=e,!1)},{keyCode:up.DELETE,action:Nv(Gc,i,!0)},{keyCode:up.BACKSPACE,action:Nv(Kf,i,!1)},{keyCode:up.DELETE,action:Nv(Kf,i,!0)},{keyCode:up.BACKSPACE,action:Nv(Ld,i,o,!1)},{keyCode:up.DELETE,action:Nv(Ld,i,o,!0)},{keyCode:up.BACKSPACE,action:Nv(af,i,!1)},{keyCode:up.DELETE,action:Nv(af,i,!0)},{keyCode:up.BACKSPACE,action:Nv(mc,i,!1)},{keyCode:up.DELETE,action:Nv(mc,i,!0)},{keyCode:up.BACKSPACE,action:Nv(gc,i,!1)},{keyCode:up.DELETE,action:Nv(gc,i,!0)},{keyCode:up.BACKSPACE,action:Nv(wf,i,!1)},{keyCode:up.DELETE,action:Nv(wf,i,!0)}],r).each((function(e){r.preventDefault()})))})),e.on("keyup",(function(t){var n,i;!1===t.isDefaultPrevented()&&(i=t,Mv([{keyCode:up.BACKSPACE,action:Nv(Xc,n=e)},{keyCode:up.DELETE,action:Nv(Xc,n)}],i))}))}(e,t),function(e){e.on("keydown",(function(t){var n,i,o;t.keyCode===up.ENTER&&(n=e,(i=t).isDefaultPrevented()||(i.preventDefault(),(o=n.undoManager).typing&&(o.typing=!1,o.add()),n.undoManager.transact((function(){!1===n.selection.isCollapsed()&&n.execCommand("Delete"),ay(n,i)}))))}))}(e),function(e){e.on("keydown",(function(t){var n;!1===t.isDefaultPrevented()&&(n=t,Mv([{keyCode:up.SPACEBAR,action:Nv(wy,e)}],n).each((function(e){n.preventDefault()})))}))}(e),function(e){var t,n;t=e,n=Sr((function(){t.composing||Dy(t)}),0),ky.isIE()&&(t.on("keypress",(function(e){n.throttle()})),t.on("remove",(function(e){n.cancel()}))),e.on("input",(function(t){!1===t.isComposing&&Dy(e)}))}(e),function(e){e.on("keydown",(function(t){var n,i;!1===t.isDefaultPrevented()&&(i=t,Mv([{keyCode:up.END,action:yv(n=e,!0)},{keyCode:up.HOME,action:yv(n,!1)}],i).each((function(e){i.preventDefault()})))}))}(e)},Ay=function(e){return Ao.isElement(e)&&go(ai(e))},Ny=gr.DOM,My=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&me.setEditorTimeout(t,(function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()}),100)},Ky=function(t,n){var o,r,a,s,l,u,c,d,f=t.settings,h=t.getElement(),g=t.getDoc();f.inline||(t.getElement().style.visibility=t.orgVisibility),n||f.content_editable||(g.open(),g.write(t.iframeHTML),g.close()),f.content_editable&&(t.on("remove",(function(){var e=this.getBody();Ny.removeClass(e,"mce-content-body"),Ny.removeClass(e,"mce-edit-focus"),Ny.setAttrib(e,"contentEditable",null)})),Ny.addClass(h,"mce-content-body"),t.contentDocument=g=f.content_document||e.document,t.contentWindow=f.content_window||e.window,t.bodyElement=h,f.content_document=f.content_window=null,f.root_name=h.nodeName.toLowerCase()),(o=t.getBody()).disabled=!0,t.readonly=f.readonly,t.readonly||(t.inline&&"static"===Ny.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=t.getParam("content_editable_state",!0)),o.disabled=!1,t.editorUpload=function(t){var n,o,r,a,s,l,u,c,d,f=(n=[],o=function(e){var t,n,o;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||Sg("blobid"),n=e.name||t,{id:i(t),name:i(n),filename:i(n+"."+(o=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[o.toLowerCase()]||"dat")),blob:i(e.blob),base64:i(e.base64),blobUri:i(e.blobUri||re(e.blob)),uri:i(e.uri)}},{create:function(e,t,n,i){if(k(e))return o({id:e,name:i,blob:t,base64:n});if(S(e))return o(e);throw new Error("Unknown input type")},add:function(e){r(e.id())||n.push(e)},get:r=function(e){return a((function(t){return t.id()===e}))},getByUri:function(e){return a((function(t){return t.blobUri()===e}))},findFirst:a=function(e){return U(n,e)[0]},removeByUri:function(e){n=U(n,(function(t){return t.blobUri()!==e||(ae(t.blobUri()),!1)}))},destroy:function(){$(n,(function(e){ae(e.blobUri())})),n=[]}}),h=(u={},c=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:d=function(e){return e in u},getResultUri:function(e){var t=u[e];return t?t.resultUri:null},isPending:function(e){return!!d(e)&&1===u[e].status},isUploaded:function(e){return!!d(e)&&2===u[e].status},markPending:function(e){u[e]=c(1,null)},markUploaded:function(e,t){u[e]=c(2,t)},removeFailed:function(e){delete u[e]},destroy:function(){u={}}}),g=[],p=function(e){return function(n){return t.selection?e(n):[]}},m=function(e,t,n){for(var i=0;-1!==(i=e.indexOf(t,i))&&(e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1),-1!==i;);return e},v=function(e,t,n){return e=m(e,'src="'+t+'"','src="'+n+'"'),m(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},y=function(e,n){$(t.undoManager.data,(function(t){"fragmented"===t.type?t.fragments=W(t.fragments,(function(t){return v(t,e,n)})):t.content=v(t.content,e,n)}))},b=function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},T=function(n){return s||(s=function(t,n){var i={},o=function(t,i,o,r){var a,s;(a=xg()).open("POST",n.url),a.withCredentials=n.credentials,a.upload.onprogress=function(e){r(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e,t,r;a.status<200||300<=a.status?o("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?i((r=e.location,(t=n.basePath)?t.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r)):o("Invalid JSON: "+a.responseText)},(s=new e.FormData).append("file",t.blob(),t.filename()),a.send(s)},r=function(e,t){return{url:t,blobInfo:e,status:!0}},a=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},s=function(e,t){Gt.each(i[e],(function(e){e(t)})),delete i[e]};return!1===K(n.handler)&&(n.handler=o),{upload:function(e,l){return n.url||n.handler!==o?function(e,o){return e=Gt.grep(e,(function(e){return!t.isUploaded(e.blobUri())})),fe.all(Gt.map(e,(function(e){return t.isPending(e.blobUri())?(d=e.blobUri(),new fe((function(e){i[d]=i[d]||[],i[d].push(e)}))):(u=n.handler,c=o,t.markPending((l=e).blobUri()),new fe((function(n){var i;try{var o=function(){i&&i.close()};u(l,(function(e){o(),t.markUploaded(l.blobUri(),e),s(l.blobUri(),r(l,e)),n(r(l,e))}),(function(e){o(),t.removeFailed(l.blobUri()),s(l.blobUri(),a(l,e)),n(a(l,e))}),(function(e){e<0||100<e||(i||(i=c()),i.progressBar.value(e))}))}catch(e){n(a(l,e.message))}})));var l,u,c,d})))}(e,l):new fe((function(e){e([])}))}}}(h,{url:Hu(t),basePath:Vu(t),credentials:Wu(t),handler:$u(t)})),_().then(p((function(e){var i;return i=W(e,(function(e){return e.blobInfo})),s.upload(i,b).then(p((function(i){var o=W(i,(function(n,i){var o=e[i].image;return n.status&&function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")}(t)?function(e,n){f.removeByUri(e.src),y(e.src,n),t.$(e).attr({src:zu(t)?n+"?"+(new Date).getTime():n,"data-mce-src":t.convertURL(n,"src")})}(o,n.url):n.error&&function(e,t){yg(e,pg.translate(["Failed to upload image: {0}",t]))}(t,n.error),{element:o,status:n.status}}));return n&&n(o),o})))})))},C=function(e){if(Fu(t))return T(e)},E=function(e){return!1!==Z(g,(function(t){return t(e)}))&&(0!==e.getAttribute("src").indexOf("data:")||function(e){return e.getParam("images_dataimg_filter",i(!0),"function")}(t)(e))},_=function(){var e,n,o;return l||(e=h,n=f,o={},l={findAll:function(t,r){var a;r||(r=i(!0)),a=U(function(e){return e?te(e.getElementsByTagName("img")):[]}(t),(function(t){var n=t.src;return!!de.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===de.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&r(t):0===n.indexOf("data:")&&r(t))}));var s=W(a,(function(e){if(o[e.src])return new fe((function(t){o[e.src].then((function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})}))}));var t=new fe((function(t,i){!function(e,t,n,i){var o,r;0!==t.src.indexOf("blob:")?(o=wg(t.src).data,(r=e.findFirst((function(e){return e.base64()===o})))?n({image:t,blobInfo:r}):Dg(t.src).then((function(i){r=e.create(Rg(),i,o),e.add(r),n({image:t,blobInfo:r})}),(function(e){i(e)}))):(r=e.getByUri(t.src))?n({image:t,blobInfo:r}):Dg(t.src).then((function(i){(function(e){return new fe((function(t){var n=new(ie("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))})(i).then((function(a){o=wg(a).data,r=e.create(Rg(),i,o),e.add(r),n({image:t,blobInfo:r})}))}),(function(e){i(e)}))}(n,e,t,i)})).then((function(e){return delete o[e.image.src],e})).catch((function(t){return delete o[e.src],t}));return o[e.src]=t}));return fe.all(s)}}),l.findAll(t.getBody(),E).then(p((function(e){return e=U(e,(function(e){return"string"!=typeof e||(Tg(t,e),!1)})),$(e,(function(e){y(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),e})))},x=function(e){return e.replace(/src="(blob:[^"]+)"/g,(function(e,n){var i=h.getResultUri(n);if(i)return'src="'+i+'"';var o=f.getByUri(n);return o||(o=j(t.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)}),null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':e}))};return t.on("setContent",(function(){Fu(t)?C():_()})),t.on("RawSaveContent",(function(e){e.content=x(e.content)})),t.on("getContent",(function(e){e.source_view||"raw"===e.format||(e.content=x(e.content))})),t.on("PostRender",(function(){t.parser.addNodeFilter("img",(function(e){$(e,(function(e){var t=e.attr("src");if(!f.getByUri(t)){var n=h.getResultUri(t);n&&e.attr("src",n)}}))}))})),{blobCache:f,addFilter:function(e){g.push(e)},uploadImages:T,uploadImagesAuto:C,scanForImages:_,destroy:function(){f.destroy(),h.destroy(),l=s=null}}}(t),t.schema=nr(f),t.dom=gr(g,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:f.content_editable,schema:t.schema,contentCssCors:qu(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((s=Im((a=t).settings,a.schema)).addAttributeFilter("src,href,style,tabindex",(function(e,t){for(var n,i,o,r=e.length,s=a.dom;r--;)if(i=(n=e[r]).attr(t),!n.attributes.map[o="data-mce-"+t]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===t?((i=s.serializeStyle(s.parseStyle(i),n.name)).length||(i=null),n.attr(o,i),n.attr(t,i)):"tabindex"===t?(n.attr(o,i),n.attr(t,null)):n.attr(o,a.convertURL(i,t,n.name))}})),s.addNodeFilter("script",(function(e){for(var t,n,i=e.length;i--;)0!==(n=(t=e[i]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)})),s.addNodeFilter("#cdata",(function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"})),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(e){for(var t,n=e.length,i=a.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(i)&&0===t.getAll("br").length&&(t.append(new vm("br",1)).shortEnded=!0)})),s),t.serializer=wm(f,t),t.selection=iv(t.dom,t.getWin(),t.serializer,t),t.annotator=Cu(t),t.formatter=cm(t),t.undoManager=Op(t),t._nodeChangeDispatcher=new zg(t),t._selectionOverrides=hp(t),function(e){var t,n;(t=e).on("click",(function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()})),(n=e).parser.addNodeFilter("details",(function(e){$(e,(function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")}))})),n.serializer.addNodeFilter("details",(function(e){$(e,(function(e){var t=e.attr("data-mce-open");e.attr("open",k(t)?t:null),e.attr("data-mce-open",null)}))}))}(t),function(e){e.on("click",(function(t){3<=t.detail&&function(e){var t=e.selection.getRng(),n=is.fromRangeStart(t),i=is.fromRangeEnd(t);if(is.isElementPosition(n)){var o=n.container();Ay(o)&&Kl.firstPositionIn(o).each((function(e){return t.setStart(e.container(),e.offset())}))}is.isElementPosition(i)&&(o=n.container(),Ay(o)&&Kl.lastPositionIn(o).each((function(e){return t.setEnd(e.container(),e.offset())}))),e.selection.setRng(Su(t))}(e)}))}(t),Sy(t),Kg(t),t.fire("PreInit"),f.browser_spellcheck||f.gecko_spellcheck||(g.body.spellcheck=!1,Ny.setAttrib(o,"spellcheck","false")),t.quirks=function(t){var n,i,o,r=Gt.each,a=up.BACKSPACE,s=up.DELETE,l=t.dom,u=t.selection,c=t.settings,d=t.parser,f=de.gecko,h=de.webkit,g="data:text/mce-internal,",p=de.ie?"Text":"URL",m=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(i){}},v=function(e){return e.isDefaultPrevented()},y=function(){t.shortcuts.add("meta+a",null,"SelectAll")},b=function(){t.on("keydown",(function(e){if(!v(e)&&e.keyCode===a&&u.isCollapsed()&&0===u.getRng().startOffset){var t=u.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}}))},T=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",(function(e){var n;if("HTML"===e.target.nodeName){if(11<de.ie)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}})))};return t.on("keydown",(function(e){var n,i,o,r,a;if(!v(e)&&e.keyCode===up.BACKSPACE&&(i=(n=u.getRng()).startContainer,o=n.startOffset,r=l.getRoot(),a=i,n.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==r;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(t.formatter.toggle("blockquote",null,a),(n=l.createRng()).setStart(i,0),n.setEnd(i,0),u.setRng(n))}})),n=function(e){var t=l.create("body"),n=e.cloneContents();return t.appendChild(n),u.serializer.serialize(t,{format:"html"})},t.on("keydown",(function(e){var i,o,r,u,c,d=e.keyCode;if(!v(e)&&(d===s||d===a)){if(i=t.selection.isCollapsed(),o=t.getBody(),i&&!l.isEmpty(o))return;if(!i&&(r=t.selection.getRng(),u=n(r),(c=l.createRng()).selectNode(t.getBody()),u!==n(c)))return;e.preventDefault(),t.setContent(""),o.firstChild&&l.isBlock(o.firstChild)?t.selection.setCursorLocation(o.firstChild,0):t.selection.setCursorLocation(o,0),t.nodeChanged()}})),de.windowsPhone||t.on("keyup focusin mouseup",(function(e){up.modifierPressed(e)||u.normalize()}),!0),h&&(t.settings.content_editable||l.bind(t.getDoc(),"mousedown mouseup",(function(e){var n;if(e.target===t.getDoc().documentElement)if(n=u.getRng(),t.getBody().focus(),"mousedown"===e.type){if(ua(n.startContainer))return;u.placeCaretAt(e.clientX,e.clientY)}else u.setRng(n)})),t.on("click",(function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==l.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&l.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),u.select(n))})),c.forced_root_block&&t.on("init",(function(){m("DefaultParagraphSeparator",c.forced_root_block)})),t.on("init",(function(){t.dom.bind(t.getBody(),"submit",(function(e){e.preventDefault()}))})),b(),d.addNodeFilter("br",(function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),de.iOS?(t.inline||t.on("keydown",(function(){e.document.activeElement===e.document.body&&t.getWin().focus()})),T(),t.on("click",(function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):y()),11<=de.ie&&(T(),b()),de.ie&&(y(),m("AutoUrlDetect",!1),t.on("dragstart",(function(e){var n,i,o;(n=e).dataTransfer&&(t.selection.isCollapsed()&&"IMG"===n.target.tagName&&u.select(n.target),0<(i=t.selection.getContent()).length&&(o=g+escape(t.id)+","+escape(i),n.dataTransfer.setData(p,o)))})),t.on("drop",(function(e){if(!v(e)){var n=(r=e).dataTransfer&&(a=r.dataTransfer.getData(p))&&0<=a.indexOf(g)?(a=a.substr(g.length).split(","),{id:unescape(a[0]),html:unescape(a[1])}):null;if(n&&n.id!==t.id){e.preventDefault();var i=Lm(e.x,e.y,t.getDoc());u.setRng(i),o=n.html,t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:o,internal:!0}):t.execCommand("mceInsertContent",!1,o)}}var o,r,a}))),f&&(t.on("keydown",(function(e){if(!v(e)&&e.keyCode===a){if(!t.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&0===u.getRng().startOffset){var n=u.getNode(),i=n.previousSibling;if("HR"===n.nodeName)return l.remove(n),void e.preventDefault();i&&i.nodeName&&"hr"===i.nodeName.toLowerCase()&&(l.remove(i),e.preventDefault())}}})),e.Range.prototype.getClientRects||t.on("mousedown",(function(e){if(!v(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),me.setEditorTimeout(t,(function(){n.focus()}))}})),i=function(){var e=l.getAttribs(u.getStart().cloneNode(!1));return function(){var n=u.getStart();n!==t.getBody()&&(l.setAttrib(n,"style",null),r(e,(function(e){n.setAttributeNode(e.cloneNode(!0))})))}},o=function(){return!u.isCollapsed()&&l.getParent(u.getStart(),l.isBlock)!==l.getParent(u.getEnd(),l.isBlock)},t.on("keypress",(function(e){var n;if(!v(e)&&(8===e.keyCode||46===e.keyCode)&&o())return n=i(),t.getDoc().execCommand("delete",!1,null),n(),e.preventDefault(),!1})),l.bind(t.getDoc(),"cut",(function(e){var n;!v(e)&&o()&&(n=i(),me.setEditorTimeout(t,(function(){n()})))})),c.readonly||t.on("BeforeExecCommand MouseDown",(function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),c.object_resizing||m("enableObjectResizing",!1)})),t.on("SetContent ExecCommand",(function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(l.select("a"),(function(e){var t=e.parentNode,n=l.getRoot();if(t.lastChild===e){for(;t&&!l.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}l.add(t,"br",{"data-mce-bogus":1})}}))})),t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),de.mac&&t.on("keydown",(function(e){!up.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})),b()),{refreshContentEditable:function(){},isHidden:function(){var e;return!f||t.removed?0:!(e=t.selection.getSel())||!e.rangeCount||0===e.rangeCount}}}(t),t.fire("PostRender"),f.directionality&&(o.dir=f.directionality),f.nowrap&&(o.style.whiteSpace="nowrap"),f.protect&&t.on("BeforeSetContent",(function(e){Gt.each(f.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),t.on("SetContent",(function(){t.addVisual(t.getBody())})),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",(function(e){t.composing="compositionstart"===e.type})),0<t.contentStyles.length&&(r="",Gt.each(t.contentStyles,(function(e){r+=e+"\r\n"})),t.dom.addStyle(r)),(l=t,l.inline?Ny.styleSheetLoader:l.dom.styleSheetLoader).loadAll(t.contentCSS,(function(e){My(t)}),(function(e){My(t)})),f.content_style&&(u=f.content_style,c=ai(t.getDoc().head),d=oi("style"),bi(d,"type","text/css"),Dr(d,ri(u)),Dr(c,d))},Py=gr.DOM,Ly=gr.DOM,By=function(e,t,n){var i=Eg.get(n),o=Eg.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Gt.trim(n),i&&-1===Gt.inArray(t,n)){if(Gt.each(Eg.dependencies(n),(function(n){By(e,t,n)})),e.plugins[n])return;try{var r=new i(e,o,e.$);(e.plugins[n]=r).init&&(r.init(e,o),t.push(n))}catch(iT){!function(e,t,n){var i=pg.translate(["Failed to initialize plugin: {0}",t]);bg(i,n),yg(e,i)}(e,n,iT)}}},Fy=function(e){return e.replace(/^\-/,"")},zy=function(e){return{editorContainer:e,iframeContainer:e}},Hy=function(t){var n,i,o,r,a,s,l=t.settings,u=t.getElement();return t.rtl=l.rtl_ui||t.editorManager.i18n.rtl,t.editorManager.i18n.setCode(l.language),l.aria_label=l.aria_label||Ly.getAttrib(u,"aria-label",t.getLang("aria.rich_text_area")),t.fire("ScriptsLoaded"),r=(i=t).settings.theme,k(r)?(i.settings.theme=Fy(r),o=_g.get(r),i.theme=new o(i,_g.urls[r]),i.theme.init&&i.theme.init(i,_g.urls[r]||i.documentBaseUrl.replace(/\/$/,""),i.$)):i.theme={},s=[],Gt.each((a=t).settings.plugins.split(/[ ,]/),(function(e){By(a,s,Fy(e))})),n=function(e){var t,n,i,o,r,a,s,l,u,c,d,f=e.settings,h=e.getElement();return e.orgDisplay=h.style.display,k(f.theme)?(c=(o=e).settings,d=o.getElement(),r=c.width||Ly.getStyle(d,"width")||"100%",a=c.height||Ly.getStyle(d,"height")||d.offsetHeight,s=c.min_height||100,(l=/^[0-9\.]+(|px)$/i).test(""+r)&&(r=Math.max(parseInt(r,10),100)),l.test(""+a)&&(a=Math.max(parseInt(a,10),s)),u=o.theme.renderUI({targetNode:d,width:r,height:a,deltaWidth:c.delta_width,deltaHeight:c.delta_height}),c.content_editable||(a=(u.iframeHeight||a)+("number"==typeof a?u.deltaHeight||0:""))<s&&(a=s),u.height=a,u):K(f.theme)?(i=(t=e).getElement(),(n=t.settings.theme(t,i)).editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:i.offsetHeight,n):function(e){var t,n,i=e.getElement();return e.inline?zy(null):(t=i,n=Ly.create("div"),Ly.insertAfter(n,t),zy(n))}(e)}(t),t.editorContainer=n.editorContainer?n.editorContainer:null,l.content_css&&Gt.each(Gt.explode(l.content_css),(function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))})),l.content_editable?Ky(t):function(t,n){var i=function(t,n){var i,o,r,a,s,l,u,c=t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),d=(i=t.id,o=c,r=n.height,a=function(e){return e.getParam("iframe_attrs",{})}(t),u=oi("iframe"),Ti(u,a),Ti(u,{id:i+"_ifr",frameBorder:"0",allowTransparency:"true",title:o}),function(t,n){var i=t.dom();mi(n,(function(t,n){!function(t,n,i){if(!k(i))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",i,":: Element ",t),new Error("CSS value must be a string: "+i);vi(t)&&t.style.setProperty(n,i)}(i,n,t)}))}(u,{width:"100%",height:(s=r,l="number"==typeof s?s+"px":s,l||""),display:"block"}),u).dom();d.onload=function(){d.onload=null,t.fire("load")};var f,h,g,p,m=function(t,n){if(e.document.domain!==e.window.location.hostname&&de.ie&&de.ie<12){var i=Sg("mce");return t[i]=function(){Ky(t)},Py.setAttrib(n,"src",'javascript:(function(){document.open();document.domain="'+e.document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+i+"(true);})()"),!0}return!1}(t,d);return t.contentAreaContainer=n.iframeContainer,t.iframeElement=d,t.iframeHTML=(p=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(f=t)+"<html><head>",function(e){return e.getParam("document_base_url","")}(f)!==f.documentBaseUrl&&(p+='<base href="'+f.documentBaseURI.getURI()+'" />'),p+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',h=function(e){return Ku(e,"body_id","tinymce")}(f),g=function(e){return Ku(e,"body_class","")}(f),Pu(f)&&(p+='<meta http-equiv="Content-Security-Policy" content="'+Pu(f)+'" />'),p+='</head><body id="'+h+'" class="mce-content-body '+g+'" data-id="'+f.id+'"><br></body></html>'),Py.add(n.iframeContainer,d),m}(t,n);n.editorContainer&&(Py.get(n.editorContainer).style.display=t.orgDisplay,t.hidden=Py.isHidden(n.editorContainer)),t.getElement().style.display="none",Py.setAttrib(t.id,"aria-hidden","true"),i||Ky(t)}(t,n)},Vy=gr.DOM,Wy=function(e){return"-"===e.charAt(0)},$y=Gt.each,qy=Gt.trim,Uy="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),jy={ftp:21,http:80,https:443,mailto:25},Gy=function(t,n){var i,o,r=this;if(t=qy(t),i=(n=r.settings=n||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))r.source=t;else{var a=0===t.indexOf("//");0!==t.indexOf("/")||a||(t=(i&&i.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(o=n.base_uri?n.base_uri.path:new Gy(e.document.location.href).directory,""==n.base_uri.protocol?t="//mce_host"+r.toAbsPath(o,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(i&&i.protocol||"http")+"://mce_host"+r.toAbsPath(o,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),$y(Uy,(function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),r[e]=i})),i&&(r.protocol||(r.protocol=i.protocol),r.userInfo||(r.userInfo=i.userInfo),r.port||"mce_host"!==r.host||(r.port=i.port),r.host&&"mce_host"!==r.host||(r.host=i.host),r.source=""),a&&(r.protocol="")}};Gy.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!==(e=new Gy(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),i=e.getURI();return n===i||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===i?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new Gy(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=jy[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,o,r=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;i<o;i++)if(i>=n.length||e[i]!==n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;i<o;i++)if(i>=e.length||e[i]!==n[i]){r=i+1;break}if(1===r)return t;for(i=0,o=e.length-(r-1);i<o;i++)a+="../";for(i=r-1,o=n.length;i<o;i++)a+=i!==r-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,t){var n,i,o,r=0,a=[];for(i=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),$y(e,(function(e){e&&a.push(e)})),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<r?r--:a.push(t[n]):r++);return 0!==(o=(n=e.length-r)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(o="/"+o),i&&o.lastIndexOf("/")!==o.length-1&&(o+=i),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},Gy.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},Gy.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var Xy=function(e,t){t(e),e.firstChild&&Xy(e.firstChild,t),e.next&&Xy(e.next,t)},Yy=function(e){return e instanceof vm},Zy=function(e,t){var n;e.dom.setHTML(e.getBody(),t),ig(n=e)&&Kl.firstPositionIn(n.getBody()).each((function(e){var t=e.getNode(),i=Ao.isTable(t)?Kl.firstPositionIn(t).getOr(e):e;n.selection.setRng(i.toRange())}))},Jy=gr.DOM,Qy=function(e){return O.from(e).each((function(e){return e.destroy()}))},eb=gr.DOM,tb=Gt.extend,nb=Gt.each,ib=Gt.resolve,ob=de.ie,rb=function(e,t,n){var i,o,r=this,a=r.documentBaseUrl=n.documentBaseURL,s=n.baseURI;o={id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(i=r).convertURL,url_converter_scope:i,ie7_compat:!0},t=function(e,t,n,i){var o,r,a,s,l,u,c,d,f,h,g=function(e,t){var n,i,o,r=(n=function(t,n){return H(e,n)},i={},o={},mi(t,(function(e,t){(n(0,t)?i:o)[t]=e})),{t:i,f:o});return Fh(r.t,r.f)}(["mobile"],i),p=Gt.extend(t,n,g.settings(),(d=e,h=(f=g).settings().inline,d&&$h(f,"mobile")&&!h?(s="mobile",l=Vh,c=(u=g.sections()).hasOwnProperty(s)?u[s]:{},Gt.extend({},l,c)):{}),{validate:!0,content_editable:g.settings().inline,external_plugins:(o=n,r=g.settings(),a=r.external_plugins?r.external_plugins:{},o&&o.external_plugins?Gt.extend({},o.external_plugins,a):a)});return qh(e,g,n,p)}(zh,o,n.defaultSettings,t),r.settings=t,Er.language=t.language||"en",Er.languageLoad=t.language_load,Er.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new Gy(t.document_base_url,{base_uri:s}),r.baseURI=s,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new Zh(r),r.loadedCSS={},r.editorCommands=new Ih(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(de.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(de.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=gn.overrideDefaults((function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}}))};tb(rb.prototype={render:function(){!function(t){var n=t.settings,i=t.id,o=function(){Vy.unbind(e.window,"ready",o),t.render()};if(Ie.Event.domLoaded){if(t.getElement()&&de.contentEditable){n.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var r=t.getElement().form||Vy.getParent(i,"form");r&&(t.formElement=r,n.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(Vy.insertAfter(Vy.create("input",{type:"hidden",name:i}),i),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},Vy.bind(r,"submit reset",t.formEventDelegate),t.on("reset",(function(){t.setContent(t.startContent,{format:"raw"})})),!n.submit_patch||r.submit.nodeType||r.submit.length||r._mceOldSubmit||(r._mceOldSubmit=r.submit,r.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),r._mceOldSubmit(r)})),t.windowManager=fg(t),t.notificationManager=dg(t),"xml"===n.encoding&&t.on("GetContent",(function(e){e.save&&(e.content=Vy.encode(e.content))})),n.add_form_submit_trigger&&t.on("submit",(function(){t.initialized&&t.save()})),n.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),function(e,t){var n=br.ScriptLoader;!function(e,t,n,i){var o=t.settings,r=o.theme;if(k(r)){if(!Wy(r)&&!_g.urls.hasOwnProperty(r)){var a=o.theme_url;_g.load(r,a?t.documentBaseURI.toAbsolute(a):"themes/"+r+"/theme"+n+".js")}e.loadQueue((function(){_g.waitFor(r,i)}))}else i()}(n,e,t,(function(){var i,o,r,a,s;i=n,(r=(o=e).settings).language&&"en"!==r.language&&!r.language_url&&(r.language_url=o.editorManager.baseURL+"/langs/"+r.language+".js"),r.language_url&&!o.editorManager.i18n.data[r.language]&&i.add(r.language_url),s=t,Gt.isArray((a=e.settings).plugins)&&(a.plugins=a.plugins.join(" ")),Gt.each(a.external_plugins,(function(e,t){Eg.load(t,e),a.plugins+=" "+t})),Gt.each(a.plugins.split(/[ ,]/),(function(e){if((e=Gt.trim(e))&&!Eg.urls[e])if(Wy(e)){e=e.substr(1,e.length);var t=Eg.dependencies(e);Gt.each(t,(function(e){e=Eg.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"},e),Eg.load(e.resource,e)}))}else Eg.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+s+".js"})})),n.loadQueue((function(){e.removed||Hy(e)}),e,(function(t){(function(e,t){yg(e,function(e,t){var n=function(e,t){for(var n in mg.urls)if(mg.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return pg.translate(n?["Failed to load plugin: {0} from url {1}",n,t]:["Failed to load plugin url: {0}",t])}(e,t))})(e,t[0]),e.removed||Hy(e)}))}))}(t,t.suffix)}}else Vy.bind(e.window,"ready",o)}(this)},focus:function(e){!function(e,t){e.removed||(t?ng(e):function(e){var t=e.selection,n=e.settings.content_editable,i=e.getBody(),o=t.getRng();e.quirks.refreshContentEditable();var r,a,s=(r=e,a=t.getNode(),r.dom.getParent(a,(function(e){return"true"===r.dom.getContentEditable(e)})));if(e.$.contains(i,s))return eg(s),Qh(e,o),ng(e);void 0!==e.bookmark&&!1===tg(e)&&bh(e).each((function(t){e.selection.setRng(t),o=t})),n||(de.opera||eg(i),e.getWin().focus()),(de.gecko||n)&&(eg(i),Qh(e,o)),ng(e)}(e))}(this,e)},hasFocus:function(){return ig(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o=this.settings[e];if(o)return this.callbackLookup&&(i=this.callbackLookup[e])&&(o=i.func,i=i.scope),"string"==typeof o&&(i=(i=o.replace(/\.\w+$/,""))?ib(i):0,o=ib(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:i}),o.apply(i||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Gt.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,(function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}))}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return function(e,t,n,i){var o,r,a,s=t in e.settings?e.settings[t]:n;return"hash"===i?(a={},"string"==typeof(r=s)?$(0<r.indexOf("=")?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),(function(e){var t=e.split("=");a[Gt.trim(t[0])]=Gt.trim(1<t.length?t[1]:t)})):a=r,a):"string"===i?Uh(k,e,t).getOr(n):"number"===i?Uh(P,e,t).getOr(n):"boolean"===i?Uh(M,e,t).getOr(n):"object"===i?Uh(S,e,t).getOr(n):"array"===i?Uh(A,e,t).getOr(n):"string[]"===i?Uh((o=k,function(e){return A(e)&&Z(e,o)}),e,t).getOr(n):"function"===i?Uh(K,e,t).getOr(n):s}(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return function(e,t,n){var i=e.sidebars?e.sidebars:[];i.push({name:t,settings:n}),e.sidebars=i}(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,i=this;i.contextToolbars=i.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return i.dom.is(e,n)}),i.contextToolbars.push({id:Sg("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(eb.show(this.getContainer()),eb.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(ob&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(eb.hide(e.getContainer()),eb.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,i=this,o=i.getElement();if(o&&i.initialized&&!i.removed)return(e=e||{}).save=!0,e.element=o,e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),"raw"===e.format&&i.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(!e.is_removing&&i.inline||(o.innerHTML=t),(n=eb.getParent(i.id,"form"))&&nb(n.elements,(function(e){if(e.name===i.id)return e.value=t,!1}))),e.element=o=null,!1!==e.set_dirty&&i.setDirty(!1),t},setContent:function(e,t){return function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:"html",n.set=!0,n.content=Yy(t)?"":t,Yy(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),O.from(e.getBody()).fold(i(t),(function(i){return Yy(t)?function(e,t,n,i){!function(e,t,n){var i=function(e,t,n){var i={},o={},r=[];for(var a in n.firstChild&&Xy(n.firstChild,(function(n){$(e,(function(e){e.name===n.name&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})),$(t,(function(e){"string"==typeof n.attr(e.name)&&(o[e.name]?o[e.name].nodes.push(n):o[e.name]={filter:e,nodes:[n]})}))})),i)i.hasOwnProperty(a)&&r.push(i[a]);for(var a in o)o.hasOwnProperty(a)&&r.push(o[a]);return r}(e,t,n);$(i,(function(e){$(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))}(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=ku({validate:e.validate},e.schema).serialize(n);return i.content=To(ai(t))?o:Gt.trim(o),Zy(e,i.content),i.no_events||e.fire("SetContent",i),n}(e,i,t,n):(o=e,r=i,s=n,0===(a=t).length||/^\s+$/.test(a)?(u='<br data-mce-bogus="1">',"TABLE"===r.nodeName?a="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(a="<li>"+u+"</li>"),(l=Lu(o))&&o.schema.isValidChild(r.nodeName.toLowerCase(),l.toLowerCase())?a=o.dom.createHTML(l,o.settings.forced_root_block_attrs,a=u):a||(a='<br data-mce-bogus="1">'),Zy(o,a),o.fire("SetContent",s)):("raw"!==s.format&&(a=ku({validate:o.validate},o.schema).serialize(o.parser.parse(a,{isRootContent:!0,insert:!0}))),s.content=To(ai(r))?a:Gt.trim(a),Zy(o,s.content),s.no_events||o.fire("SetContent",s)),s.content);var o,r,a,s,l,u}))}(this,e,t)},getContent:function(e){return void 0===(n=e)&&(n={}),O.from((t=this).getBody()).fold(i("tree"===n.format?new vm("body",11):""),(function(e){return function(e,t,n){var i,o,r,a,s;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)i=Gt.trim(bp(e.serializer,n.innerHTML));else if("text"===t.format)i=oa(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=(o=e).serializer.serialize(n,t),a=Lu(o),s=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+a+">[\r\n]*|<br \\/>[\r\n]*)$"),i=r.replace(s,"")}return t.content="text"===t.format||To(ai(n))?i:Gt.trim(i),t.no_events||e.fire("GetContent",t),t.content}(t,n,e)}));var t,n},insertContent:function(e,t){t&&(e=tb({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){var t,n;(n=e)!==function(e){return e.readonly?"readonly":"design"}(t=this)&&(t.initialized?Ah(t,"readonly"===n):t.on("init",(function(){Ah(t,"readonly"===n)})),function(e,t){e.fire("SwitchMode",{mode:t})}(t,n))},getContainer:function(){return this.container||(this.container=eb.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=eb.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var i=this.settings;return i.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t,n=this,i=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=i.visual),nb(o.select("table,a",e),(function(e){var r;switch(e.nodeName){case"TABLE":return t=i.visual_table_class||"mce-item-table",void((r=o.getAttrib(e,"border"))&&"0"!==r||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href")||(r=o.getAttrib(e,"name")||e.id,t=i.visual_anchor_class||"mce-item-anchor",r&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}})),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){!function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,i=e.getBody(),o=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Jy.remove(o.nextSibling),function(e){e.fire("remove")}(e),e.editorManager.remove(e),!e.inline&&i&&Jy.setStyle((r=e).id,"display",r.orgDisplay),function(e){e.fire("detach")}(e),Jy.remove(e.getContainer()),Qy(t),Qy(n),e.destroy()}var r}(this)},destroy:function(e){!function(e,t){var n,i,o,r=e.selection,a=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Qy(r),Qy(a)),(i=(n=e).formElement)&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,i._mceOldSubmit=null),Jy.unbind(i,"submit reset",n.formEventDelegate)),(o=e).contentAreaContainer=o.formElement=o.container=o.editorContainer=null,o.bodyElement=o.contentDocument=o.contentWindow=null,o.iframeElement=o.targetElm=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),e.destroyed=!0):e.remove())}(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},Bh);var ab,sb,lb,ub={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},cb=gr.DOM,db=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==cb.getParent(t,(function(t){return function(e){return ub.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)}))},fb=function(t,n){var i=n.editor;(function(t){var n,i,o,r=Sr((function(){yh(t)}),0);t.inline&&(n=t,i=r,gr.DOM.bind(e.document,"mouseup",o=function(){i.throttle()}),n.on("remove",(function(){gr.DOM.unbind(e.document,"mouseup",o)}))),t.on("init",(function(){!function(e,t){var n,i;ti.detect().browser.isIE()?(i=e).on("focusout",(function(){yh(i)})):(n=t,e.on("mouseup touchend",(function(e){n.throttle()}))),e.on("keyup nodechange",(function(t){var n;"nodechange"===(n=t).type&&n.selectionChange||yh(e)}))}(t,r)})),t.on("remove",(function(){r.cancel()}))})(i),i.on("focusin",(function(){var e=t.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),t.setActive(this),(t.focusedEditor=this).fire("focus",{blurredEditor:e}),this.focus(!0))})),i.on("focusout",(function(){var n=this;me.setEditorTimeout(n,(function(){var i=t.focusedEditor;db(n,function(){try{return e.document.activeElement}catch(i){return e.document.body}}())||i!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null)}))})),ab||cb.bind(e.document,"focusin",ab=function(n){var i,o=t.activeEditor;i=n.target,o&&i.ownerDocument===e.document&&(i===e.document.body||db(o,i)||t.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),t.focusedEditor=null))})},hb=function(t,n){t.focusedEditor===n.editor&&(t.focusedEditor=null),t.activeEditor||(cb.unbind(e.document,"focusin",ab),ab=null)},gb=gr.DOM,pb=Gt.explode,mb=Gt.each,vb=Gt.extend,yb=0,bb=!1,Tb=[],Cb=[],Eb=function(e){var t=e.type;mb(lb.get(),(function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}}))},_b=function(e){e!==bb&&(e?gn(window).on("resize scroll",Eb):gn(window).off("resize scroll",Eb),bb=e)},xb=function(e){var t=Cb;delete Tb[e.id];for(var n=0;n<Tb.length;n++)if(Tb[n]===e){Tb.splice(n,1);break}return Cb=U(Cb,(function(t){return e!==t})),lb.activeEditor===e&&(lb.activeEditor=0<Cb.length?Cb[0]:null),lb.focusedEditor===e&&(lb.focusedEditor=null),t.length!==Cb.length};vb(lb={defaultSettings:{},$:gn,majorVersion:"4",minorVersion:"9.7",releaseDate:"2019-12-19",editors:Tb,i18n:pg,activeEditor:null,settings:{},setup:function(){var t,n,i,o,a="";if(n=Gy.getDocumentBaseUrl(e.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),i=window.tinymce||window.tinyMCEPreInit)t=i.base||i.baseURL,a=i.suffix;else{for(var s=e.document.getElementsByTagName("script"),l=0;l<s.length;l++){var u=(o=s[l].src).substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==u.indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/"));break}}!t&&e.document.currentScript&&(-1!==(o=e.document.currentScript.src).indexOf(".min")&&(a=".min"),t=o.substring(0,o.lastIndexOf("/")))}this.baseURL=new Gy(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new Gy(this.baseURL),this.suffix=a,function(e){e.on("AddEditor",r(fb,e)),e.on("RemoveEditor",r(hb,e))}(this)},overrideDefaults:function(e){var t;(t=e.base_url)&&(this.baseURL=new Gy(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Gy(this.baseURL)),e.suffix&&(this.suffix=e.suffix);var n=(this.defaultSettings=e).plugin_base_urls;for(var i in n)Er.PluginManager.urls[i]=n[i]},init:function(t){var n,i,o=this;i=Gt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var r=function(e){var t=e.id;return t||(t=(t=e.name)&&!gb.get(t)?e.name:gb.uniqueId(),e.setAttribute("id",t)),t},a=function(e,t){return t.constructor===RegExp?t.test(e.className):gb.hasClass(e,t)},s=function(e){n=e},l=function(){var n,u=0,c=[],d=function(e,t,i){var r=new rb(e,t,o);c.push(r),r.on("init",(function(){++u===n.length&&s(c)})),r.targetElm=r.targetElm||i,r.render()};gb.unbind(window,"ready",l),function(e){var n=t[e];n&&n.apply(o,Array.prototype.slice.call(arguments,2))}("onpageload"),n=gn.unique(function(t){var n,i=[];if(de.ie&&de.ie<11)return Cg("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)return mb(t.types,(function(e){i=i.concat(gb.select(e.selector))})),i;if(t.selector)return gb.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(n=t.elements||"").length&&mb(pb(n),(function(t){var n;(n=gb.get(t))?i.push(n):mb(e.document.forms,(function(e){mb(e.elements,(function(e){e.name===t&&(t="mce_editor_"+yb++,gb.setAttrib(e,"id",t),i.push(e))}))}))}));break;case"textareas":case"specific_textareas":mb(gb.select("textarea"),(function(e){t.editor_deselector&&a(e,t.editor_deselector)||t.editor_selector&&!a(e,t.editor_selector)||i.push(e)}))}return i}(t)),t.types?mb(t.types,(function(e){Gt.each(n,(function(n){return!gb.is(n,e.selector)||(d(r(n),vb({},t,e),n),!1)}))})):(Gt.each(n,(function(e){var t;(t=o.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(xb(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)})),0===(n=Gt.grep(n,(function(e){return!o.get(e.id)}))).length?s([]):mb(n,(function(e){t.inline&&e.tagName.toLowerCase()in i?Cg("Could not initialize inline editor on invalid inline target element",e):d(r(e),t,e)})))};return o.settings=t,gb.bind(window,"ready",l),new fe((function(e){n?e(n):s=function(t){e(t)}}))},get:function(e){return 0===arguments.length?Cb.slice(0):k(e)?G(Cb,(function(t){return t.id===e})).getOr(null):P(e)&&Cb[e]?Cb[e]:null},add:function(e){var t=this;return Tb[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&(Tb[e.id]=e),Tb.push(e),Cb.push(e)),_b(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),sb||(sb=function(){t.fire("BeforeUnload")},gb.bind(window,"beforeunload",sb))),e},createEditor:function(e,t){return this.add(new rb(e,t,this))},remove:function(e){var t,n,i=this;if(e){if(!k(e))return N(i.get((n=e).id))?null:(xb(n)&&i.fire("RemoveEditor",{editor:n}),0===Cb.length&&gb.unbind(window,"beforeunload",sb),n.remove(),_b(0<Cb.length),n);mb(gb.select(e),(function(e){(n=i.get(e.id))&&i.remove(n)}))}else for(t=Cb.length-1;0<=t;t--)i.remove(Cb[t])},execCommand:function(e,t,n){var i=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new rb(n,this.settings,this).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?i.isHidden()?i.show():i.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){mb(Cb,(function(e){e.save()}))},addI18n:function(e,t){pg.add(e,t)},translate:function(e){return pg.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},kh),lb.setup();var Ib,Db=lb;function wb(e){return{walk:function(t,n){return vu(e,t,n)},split:pf,normalize:function(t){return Xf(e,t).fold(i(!1),(function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0}))}}}(Ib=wb||(wb={})).compareRanges=Vf,Ib.getCaretRangeFromPoint=Lm,Ib.getSelectedNode=Ma,Ib.getNode=Ka;var Ob,Rb,kb=wb,Sb=Math.min,Ab=Math.max,Nb=Math.round,Mb=function(e,t,n){var i,o,r,a,s,l;return i=t.x,o=t.y,r=e.w,a=e.h,s=t.w,l=t.h,"b"===(n=(n||"").split(""))[0]&&(o+=l),"r"===n[1]&&(i+=s),"c"===n[0]&&(o+=Nb(l/2)),"c"===n[1]&&(i+=Nb(s/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(i-=r),"c"===n[3]&&(o-=Nb(a/2)),"c"===n[4]&&(i-=Nb(r/2)),Kb(i,o,r,a)},Kb=function(e,t,n,i){return{x:e,y:t,w:n,h:i}},Pb={inflate:function(e,t,n){return Kb(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:Mb,findBestRelativePosition:function(e,t,n,i){var o,r;for(r=0;r<i.length;r++)if((o=Mb(e,t,i[r])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return i[r];return null},intersect:function(e,t){var n,i,o,r;return n=Ab(e.x,t.x),i=Ab(e.y,t.y),o=Sb(e.x+e.w,t.x+t.w),r=Sb(e.y+e.h,t.y+t.h),o-n<0||r-i<0?null:Kb(n,i,o-n,r-i)},clamp:function(e,t,n){var i,o,r,a,s,l,u,c,d,f;return l=e.y,u=e.x+e.w,c=e.y+e.h,d=t.x+t.w,f=t.y+t.h,i=Ab(0,t.x-(s=e.x)),o=Ab(0,t.y-l),r=Ab(0,u-d),a=Ab(0,c-f),s+=i,l+=o,n&&(u+=i,c+=o,s-=r,l-=a),Kb(s,l,(u-=r)-s,(c-=a)-l)},create:Kb,fromClientRect:function(e){return Kb(e.left,e.top,e.width,e.height)}},Lb={},Bb={add:function(e,t){Lb[e.toLowerCase()]=t},has:function(e){return!!Lb[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=Lb.hasOwnProperty(t)?Lb[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=Lb[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},Fb=Gt.each,zb=Gt.extend,Hb=function(){};Hb.extend=Ob=function(e){var t,n,i,o=this.prototype,r=function(){var e,t,n;if(!Rb&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},s=function(e,t){return function(){var n,i=this._super;return this._super=o[e],n=t.apply(this,arguments),this._super=i,n}};for(n in Rb=!0,t=new this,Rb=!1,e.Mixins&&(Fb(e.Mixins,(function(t){for(var n in t)"init"!==n&&(e[n]=t[n])})),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&Fb(e.Methods.split(","),(function(t){e[t]=a})),e.Properties&&Fb(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}})),e.Statics&&Fb(e.Statics,(function(e,t){r[t]=e})),e.Defaults&&o.Defaults&&(e.Defaults=zb({},o.Defaults,e.Defaults)),e)t[n]="function"==typeof(i=e[n])&&o[n]?s(n,i):i;return r.prototype=t,(r.constructor=r).extend=Ob,r};var Vb=Math.min,Wb=Math.max,$b=Math.round,qb=function(e,t){var n,i,o,r;if(t=t||'"',null===e)return"null";if("string"==(o=typeof e))return i="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,(function(e,o){return'"'===t&&"'"===e?e:(n=i.indexOf(o))+1?"\\"+i.charAt(n+1):(e=o.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)}))+t;if("object"===o){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,i="[";n<e.length;n++)i+=(0<n?",":"")+qb(e[n],t);return i+"]"}for(r in i="{",e)e.hasOwnProperty(r)&&(i+="function"!=typeof e[r]?(1<i.length?","+t:t)+r+t+":"+qb(e[r],t):"");return i+"}"}return""+e},Ub={serialize:qb,parse:function(e){try{return JSON.parse(e)}catch(s){}}},jb={callbacks:{},count:0,send:function(e){var t=this,n=gr.DOM,i=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+i;t.callbacks[i]=function(r){n.remove(o),delete t.callbacks[i],e.callback(r)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},Gb={send:function(e){var t,n=0,i=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(i,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",Gb.fire("beforeInitialize",{settings:e}),t=xg()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Gt.each(e.requestheaders,(function(e){t.setRequestHeader(e.key,e.value)})),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=Gb.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return i();setTimeout(i,10)}}};Gt.extend(Gb,kh);var Xb,Yb,Zb,Jb,Qb=Gt.extend,eT=function(e){this.settings=Qb({},e),this.count=0};eT.sendRPC=function(e){return(new eT).send(e)},eT.prototype={send:function(e){var t=e.error,n=e.success;(e=Qb(this.settings,e)).success=function(i,o){void 0===(i=Ub.parse(i))&&(i={error:"JSON Parse error."}),i.error?t.call(e.error_scope||e.scope,i.error,o):n.call(e.success_scope||e.scope,i.result)},e.error=function(n,i){t&&t.call(e.error_scope||e.scope,n,i)},e.data=Ub.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",Gb.send(e)}};try{Xb=e.window.localStorage}catch(iT){Yb={},Zb=[],Jb={getItem:function(e){return Yb[e]||null},setItem:function(e,t){Zb.push(e),Yb[e]=String(t)},key:function(e){return Zb[e]},removeItem:function(e){Zb=Zb.filter((function(t){return t===e})),delete Yb[e]},clear:function(){Zb=[],Yb={}},length:0},Object.defineProperty(Jb,"length",{get:function(){return Zb.length},configurable:!1,enumerable:!1}),Xb=Jb}var tT,nT=Gt.extend(Db,{geom:{Rect:Pb},util:{Promise:fe,Delay:me,Tools:Gt,VK:up,URI:Gy,Class:Hb,EventDispatcher:wh,Observable:kh,I18n:pg,XHR:Gb,JSON:Ub,JSONRequest:eT,JSONP:jb,LocalStorage:Xb,Color:function(e){var t={},n=0,i=0,o=0,r=function(e){var r;return"object"==typeof e?"r"in e?(n=e.r,i=e.g,o=e.b):"v"in e&&function(e,t,r){var a,s,l,u;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,r=parseInt(r,10)/100,t=Wb(0,Vb(t,1)),r=Wb(0,Vb(r,1)),0!==t){switch(a=e/60,l=(s=r*t)*(1-Math.abs(a%2-1)),u=r-s,Math.floor(a)){case 0:n=s,i=l,o=0;break;case 1:n=l,i=s,o=0;break;case 2:n=0,i=s,o=l;break;case 3:n=0,i=l,o=s;break;case 4:n=l,i=0,o=s;break;case 5:n=s,i=0,o=l;break;default:n=i=o=0}n=$b(255*(n+u)),i=$b(255*(i+u)),o=$b(255*(o+u))}else n=i=o=$b(255*r)}(e.h,e.s,e.v):(r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(r[1],10),i=parseInt(r[2],10),o=parseInt(r[3],10)):(r=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(r[1],16),i=parseInt(r[2],16),o=parseInt(r[3],16)):(r=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(r[1]+r[1],16),i=parseInt(r[2]+r[2],16),o=parseInt(r[3]+r[3],16)),n=n<0?0:255<n?255:n,i=i<0?0:255<i?255:i,o=o<0?0:255<o?255:o,t};return e&&r(e),t.toRgb=function(){return{r:n,g:i,b:o}},t.toHsv=function(){return e=n,t=i,r=o,s=0,(l=Vb(e/=255,Vb(t/=255,r/=255)))===(u=Wb(e,Wb(t,r)))?{h:0,s:0,v:100*(s=l)}:(a=(u-l)/u,{h:$b(60*((e===l?3:r===l?1:5)-(e===l?t-r:r===l?e-t:r-e)/((s=u)-l))),s:$b(100*a),v:$b(100*s)});var e,t,r,a,s,l,u},t.toHex=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(n)+e(i)+e(o)},t.parse=r,t}},dom:{EventUtils:Ie,Sizzle:It,DomQuery:gn,TreeWalker:oo,DOMUtils:gr,ScriptLoader:br,RangeUtils:kb,Serializer:wm,ControlSelection:Mm,BookmarkManager:Sm,Selection:iv,Event:Ie.Event},html:{Styles:or,Entities:Uo,Node:vm,Schema:nr,SaxParser:vp,DomParser:Im,Writer:Ru,Serializer:ku},ui:{Factory:Bb},Env:de,AddOnManager:Er,Annotator:Cu,Formatter:cm,UndoManager:Op,EditorCommands:Ih,WindowManager:fg,NotificationManager:dg,EditorObservable:Bh,Shortcuts:Zh,Editor:rb,FocusManager:ub,EditorManager:Db,DOM:gr.DOM,ScriptLoader:br.ScriptLoader,PluginManager:Er.PluginManager,ThemeManager:Er.ThemeManager,trim:Gt.trim,isArray:Gt.isArray,is:Gt.is,toArray:Gt.toArray,makeMap:Gt.makeMap,each:Gt.each,map:Gt.map,grep:Gt.grep,inArray:Gt.inArray,extend:Gt.extend,create:Gt.create,walk:Gt.walk,createNS:Gt.createNS,resolve:Gt.resolve,explode:Gt.explode,_addCacheSuffix:Gt._addCacheSuffix,isOpera:de.opera,isWebKit:de.webkit,isIE:de.ie,isGecko:de.gecko,isMac:de.mac});tT=nT,window.tinymce=tT,window.tinyMCE=tT,function(e){if("object"==typeof module)try{module.exports=e}catch(s){}}(nT)}(window),function(e){"use strict";var t,n,i,o,r=tinymce.util.Tools.resolve("tinymce.ThemeManager"),a=tinymce.util.Tools.resolve("tinymce.EditorManager"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e){return!1!==u(e)},u=function(e){return e.getParam("menubar")},c=function(e){return e.getParam("toolbar_items_size")},d=function(e){return e.getParam("menu")},f=function(e){return!1===e.settings.skin},h=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},g=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),p=tinymce.util.Tools.resolve("tinymce.ui.Factory"),m=tinymce.util.Tools.resolve("tinymce.util.I18n"),v=function(e){return e.fire("ResizeEditor")},y=function(e){return e.fire("BeforeRenderUI")},b=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},T=function(e,t){e.shortcuts.add("Alt+F9","",b(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",b(t,"toolbar")),e.shortcuts.add("Alt+F11","",b(t,"elementpath")),t.on("cancel",(function(){e.focus()}))},C=tinymce.util.Tools.resolve("tinymce.geom.Rect"),E=tinymce.util.Tools.resolve("tinymce.util.Delay"),_=function(){},x=function(e){return function(){return e}},I=x(!1),D=x(!0),w=function(){return O},O=(t=function(e){return e.isNone()},o={fold:function(e,t){return e()},is:I,isSome:I,isNone:D,getOr:i=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:x(null),getOrUndefined:x(void 0),or:i,orThunk:n,map:w,each:_,bind:w,exists:I,forall:D,filter:w,equals:t,equals_:t,toArray:function(){return[]},toString:x("none()")},Object.freeze&&Object.freeze(o),o),R=function(e){var t=x(e),n=function(){return o},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:D,isNone:I,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return R(t(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?o:O},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(I,(function(t){return n(e,t)}))}};return o},k={some:R,none:w,from:function(e){return null==e?O:R(e)}},S=function(e){return e?e.getRoot().uiContainer:null},A=function(e){var t=S(e);if(t&&"static"!==g.DOM.getStyle(t,"position",!0)){var n=g.DOM.getPos(t);return k.some({x:t.scrollLeft-n.x,y:t.scrollTop-n.y})}return k.none()},N=function(e,t){var n=g.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},M=S,K=function(e,t,n){var i,o=[];if(t)return s.each(t.split(/[ ,]/),(function(t){var r=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,(function(e){t.active(e)}),!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,(function(e){t.disabled(e)}))};"|"===t?i=null:(i||o.push(i={type:"buttongroup",items:[]}),e.buttons[t]&&("function"==typeof(t=e.buttons[t])&&(t=t()),t.type=t.type||"button",t.size=n,t=p.create(t),i.items.push(t),e.initialized?r():e.on("init",r)))})),{type:"toolbar",layout:"flow",items:o}},P=K,L=function(e,t){var n,i,o=[];if(s.each(!1===(i=(n=e).getParam("toolbar"))?[]:s.isArray(i)?s.grep(i,(function(e){return 0<e.length})):function(e,t){for(var n=[],i=1;i<10;i++){var o=e["toolbar"+i];if(!o)break;n.push(o)}return 0<n.length?n:e.toolbar?[e.toolbar]:["undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"]}(n.settings),(function(n){var i;(i=n)&&o.push(K(e,i,t))})),o.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:o}},B=g.DOM,F=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},z=function(e,t){e.moveTo(t.left,t.top)},H=function(e,t,n,i,o,r){return r=F({x:t,y:n,w:r.w,h:r.h}),e&&(r=e({elementRect:F(i),contentAreaRect:F(o),panelRect:r})),r},V=function(e){var t,n=function(){return e.contextToolbars||[]},i=function(t,n){var i,o,r,a,l,u,c,d=e.getParam("inline_toolbar_position_handler");if(!e.removed){if(!t||!t.toolbar.panel)return void s.each(e.contextToolbars,(function(e){e.panel&&e.panel.hide()}));var f,h,g,p;c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],l=t.toolbar.panel,n&&l.show(),f=t.element,h=B.getPos(e.getContentAreaContainer()),g=e.dom.getRect(f),"BODY"===(p=e.dom.getRoot()).nodeName&&(g.x-=p.ownerDocument.documentElement.scrollLeft||p.scrollLeft,g.y-=p.ownerDocument.documentElement.scrollTop||p.scrollTop),g.x+=h.x,g.y+=h.y,r=g,o=B.getRect(l.getEl()),a=B.getRect(e.getContentAreaContainer()||e.getBody());var m,v,y,b=A(l).getOr({x:0,y:0});if(r.x+=b.x,r.y+=b.y,o.x+=b.x,o.y+=b.y,a.x+=b.x,a.y+=b.y,"inline"!==B.getStyle(t.element,"display",!0)){var T=t.element.getBoundingClientRect();r.w=T.width,r.h=T.height}e.inline||(a.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&r.w<25&&(r=C.inflate(r,0,8)),i=C.findBestRelativePosition(o,r,a,c),r=C.clamp(r,a),i?(u=C.relativePosition(o,r,i),z(l,H(d,u.x,u.y,r,a,o))):(a.h+=o.h,(r=C.intersect(a,r))?(i=C.findBestRelativePosition(o,r,a,["bc-tc","bl-tl","br-tr"]))?(u=C.relativePosition(o,r,i),z(l,H(d,u.x,u.y,r,a,o))):z(l,H(d,r.x,r.y,r,a,o)):l.hide()),m=l,y=function(e,t){return e===t},v=(v=i)?v.substr(0,2):"",s.each({t:"down",b:"up"},(function(e,t){m.classes.toggle("arrow-"+e,y(t,v.substr(0,1)))})),s.each({l:"left",r:"right"},(function(e,t){m.classes.toggle("arrow-"+e,y(t,v.substr(1,1)))}))}},o=function(t){return function(){E.requestAnimationFrame((function(){e.selection&&i(a(e.selection.getNode()),t)}))}},r=function(){s.each(n(),(function(e){e.panel&&e.panel.hide()}))},a=function(t){var i,o,r,a=n();for(i=(r=e.$(t).parents().add(t)).length-1;0<=i;i--)for(o=a.length-1;0<=o;o--)if(a[o].predicate(r[i]))return{toolbar:a[o],element:r[i]};return null};e.on("click keyup setContent ObjectResized",(function(n){("setcontent"!==n.type||n.selection)&&E.setEditorTimeout(e,(function(){var n;(n=a(e.selection.getNode()))?(r(),function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void i(n);r=p.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:P(e,n.toolbar.items),oncancel:function(){e.focus()}}),N(e,r),function(n){if(!t){var i=o(!0),r=M(n);t=e.selection.getScrollContainer()||e.getWin(),B.bind(t,"scroll",i),B.bind(r,"scroll",i),e.on("remove",(function(){B.unbind(t,"scroll",i),B.unbind(r,"scroll",i)}))}}(r),(n.toolbar.panel=r).renderTo().reflow(),i(n)}(n)):r()}))})),e.on("blur hide contextmenu",r),e.on("ObjectResizeStart",(function(){var t=a(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()})),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",(function(){s.each(n(),(function(e){e.panel&&e.panel.remove()})),e.contextToolbars={}})),e.shortcuts.add("ctrl+F9","",(function(){var t=a(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()}))},W=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},$=W("array"),q=W("function"),U=W("number"),j=Array.prototype.indexOf,G=Array.prototype.push,X=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n))return!0;return!1},Y=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t(e[o],o);return i},Z=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},J=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];t(r,i)&&n.push(r)}return n},Q=(q(Array.from),{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),ee=function(e,t){return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},te=function(e){return e&&"|"===e.item.text},ne=function(e,t,n,i){var o,r,a,l,u,c,d;return t?(r=t[i],l=!0):r=Q[i],r&&(o={text:r.title},a=[],s.each((r.items||"").split(/[ ,]/),(function(t){var n=ee(t,e[t]);n&&a.push(n)})),l||s.each(e,(function(e,t){e.context!==i||function(e,t){return function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n]))return k.some(n);return k.none()}(e,(function(e){return e.name===t})).isSome()}(a,t)||("before"===e.separator&&a.push({name:"|",item:{text:"|"}}),e.prependToContext?a.unshift(ee(t,e)):a.push(ee(t,e)),"after"===e.separator&&a.push({name:"|",item:{text:"|"}}))})),o.menu=Y((u=n,c=J(a,(function(e){return!1===u.hasOwnProperty(e.name)})),d=J(c,(function(e,t){return!te(e)||!te(c[t-1])})),J(d,(function(e,t){return!te(e)||0<t&&t<d.length-1}))),(function(e){return e.item})),!o.menu.length)?null:o},ie=function(e){for(var t,n=[],i=function(e){var t,n=[],i=d(e);if(i)for(t in i)n.push(t);else for(t in Q)n.push(t);return n}(e),o=s.makeMap((t=e,t.getParam("removed_menuitems","")).split(/[ ,]/)),r=u(e),a="string"==typeof r?r.split(/[ ,]/):i,l=0;l<a.length;l++){var c=a[l],f=ne(e.menuItems,d(e),o,c);f&&n.push(f)}return n},oe=g.DOM,re=function(e){return{width:e.clientWidth,height:e.clientHeight}},ae=function(e,t,n){var i,o,r,a;i=e.getContainer(),o=e.getContentAreaContainer().firstChild,r=re(i),a=re(o),null!==t&&(t=Math.max(e.getParam("min_width",100,"number"),t),t=Math.min(e.getParam("max_width",65535,"number"),t),oe.setStyle(i,"width",t+(r.width-a.width)),oe.setStyle(o,"width",t)),n=Math.max(e.getParam("min_height",100,"number"),n),n=Math.min(e.getParam("max_height",65535,"number"),n),oe.setStyle(o,"height",n),v(e)},se=ae,le=tinymce.util.Tools.resolve("tinymce.Env"),ue=function(e,t,n){var i,o=e.settings[n];o&&o((i=t.getEl("body"),{element:function(){return i}}))},ce=function(e,t,n){return function(i){var o,r,a,l=i.control,u=l.parents().filter("panel")[0],c=u.find("#"+t)[0],d=(o=t,s.grep(n,(function(e){return e.name===o}))[0]);r=t,a=u,s.each(n,(function(e){var t=a.items().filter("#"+e.name)[0];t&&t.visible()&&e.name!==r&&(ue(e,t,"onhide"),t.visible(!1))})),l.parent().items().each((function(e){e.active(!1)})),c&&c.visible()?(ue(d,c,"onhide"),c.hide(),l.active(!1)):(c?c.show():(c=p.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),u.prepend(c),ue(d,c,"onrender")),ue(d,c,"onshow"),l.active(!0)),v(e)}},de=function(e){return!(le.ie&&!(11<=le.ie)||!e.sidebars)&&0<e.sidebars.length},fe=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:s.map(e.sidebars,(function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:ce(e,t.name,e.sidebars)}}))}]}},he=function(e){var t=function(){e._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}},ge=g.DOM,pe=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},me=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ve=0,ye={id:function(){return"mceu_"+ve++},create:function(t,n,i){var o=e.document.createElement(t);return g.DOM.setAttribs(o,n),"string"==typeof i?o.innerHTML=i:s.each(i,(function(e){e.nodeType&&o.appendChild(e)})),o},createFragment:function(e){return g.DOM.createFragment(e)},getWindowSize:function(){return g.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return g.DOM.getPos(e,t||ye.getContainer())},getContainer:function(){return le.container?le.container:e.document.body},getViewPort:function(e){return g.DOM.getViewPort(e)},get:function(t){return e.document.getElementById(t)},addClass:function(e,t){return g.DOM.addClass(e,t)},removeClass:function(e,t){return g.DOM.removeClass(e,t)},hasClass:function(e,t){return g.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return g.DOM.toggleClass(e,t,n)},css:function(e,t,n){return g.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return g.DOM.getStyle(e,t,!0)},on:function(e,t,n,i){return g.DOM.bind(e,t,n,i)},off:function(e,t,n){return g.DOM.unbind(e,t,n)},fire:function(e,t,n){return g.DOM.fire(e,t,n)},innerHtml:function(e,t){g.DOM.setHTML(e,t)}},be=function(e){return"static"===ye.getRuntimeStyle(e,"position")},Te=function(e){return e.state.get("fixed")};function Ce(t,n,i){var o,r,a,s,l,u,c,d,f,h;return f=Ee(),a=(r=ye.getPos(n,M(t))).x,s=r.y,Te(t)&&be(e.document.body)&&(a-=f.x,s-=f.y),o=t.getEl(),l=(h=ye.getSize(o)).width,u=h.height,c=(h=ye.getSize(n)).width,d=h.height,"b"===(i=(i||"").split(""))[0]&&(s+=d),"r"===i[1]&&(a+=c),"c"===i[0]&&(s+=Math.round(d/2)),"c"===i[1]&&(a+=Math.round(c/2)),"b"===i[3]&&(s-=u),"r"===i[4]&&(a-=l),"c"===i[3]&&(s-=Math.round(u/2)),"c"===i[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:u}}var Ee=function(){var t=e.window;return{x:Math.max(t.pageXOffset,e.document.body.scrollLeft,e.document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,e.document.body.scrollTop,e.document.documentElement.scrollTop),w:t.innerWidth||e.document.documentElement.clientWidth,h:t.innerHeight||e.document.documentElement.clientHeight}},_e=function(e){var t,n=M(e);return n&&!Te(e)?{x:0,y:0,w:(t=n).scrollWidth-1,h:t.scrollHeight-1}:Ee()},xe={testMoveRel:function(e,t){for(var n=_e(this),i=0;i<t.length;i++){var o=Ce(this,e,t[i]);if(Te(this)){if(0<o.x&&o.x+o.w<n.w&&0<o.y&&o.y+o.h<n.h)return t[i]}else if(o.x>n.x&&o.x+o.w<n.w+n.x&&o.y>n.y&&o.y+o.h<n.h+n.y)return t[i]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=Ce(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){var n=this;function i(e,t,n){return e<0||t<e+n&&(e=t-n)<0?0:e}if(n.settings.constrainToViewport){var o=_e(this),r=n.layoutRect();e=i(e,o.w+o.x,r.w),t=i(t,o.h+o.y,r.h)}var a=M(n);return a&&be(a)&&!Te(n)&&(e-=a.scrollLeft,t-=a.scrollTop),a&&(e+=1,t+=1),n.state.get("rendered")?n.layoutRect({x:e,y:t}).repaint():(n.settings.x=e,n.settings.y=t),n.fire("move",{x:e,y:t}),n}},Ie=tinymce.util.Tools.resolve("tinymce.util.Class"),De=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),we=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},Oe=function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var i=n.getComputedStyle(e,null);return i?(t=t.replace(/[A-Z]/g,(function(e){return"-"+e})),i.getPropertyValue(t)):null}return e.currentStyle[t]}(t));return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}};function Re(){}function ke(e){this.cls=[],this.cls._map={},this.onchange=e||Re,this.prefix=""}s.extend(ke.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),ke.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e};var Se,Ae,Ne,Me=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Ke=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Pe=/^\s*|\s*$/g,Le=Ie.extend({init:function(e){var t=this.match;function n(e,n,o){var r;function a(e){e&&n.push(e)}return a(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((r=Me.exec(e.replace(Pe,"")))[1])),a(function(e){if(e)return function(t){return t._name===e}}(r[2])),a(function(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}(r[3])),a(function(e,t,n){if(e)return function(i){var o=i[e]?i[e]():"";return t?"="===t?o===n:"*="===t?0<=o.indexOf(n):"~="===t?0<=(" "+o+" ").indexOf(" "+n+" "):"!="===t?o!==n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}(r[4],r[5],r[6])),a(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=i(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(r[7])),n.pseudo=!!r[7],n.direct=o,n}function i(e,t){var o,r,a,s=[];do{if(Ke.exec(""),(r=Ke.exec(e))&&(e=r[3],s.push(r[1]),r[2])){o=r[3];break}}while(r);for(o&&i(o,t),e=[],a=0;a<s.length;a++)">"!==s[a]&&e.push(n(s[a],[],">"===s[a-1]));return t.push(e),t}this._selectors=i(e,[])},match:function(e,t){var n,i,o,r,a,s,l,u,c,d,f,h,g;for(n=0,i=(t=t||this._selectors).length;n<i;n++){for(g=e,h=0,o=(r=(a=t[n]).length)-1;0<=o;o--)for(u=a[o];g;){if(u.pseudo)for(c=d=(f=g.parent().items()).length;c--&&f[c]!==g;);for(s=0,l=u.length;s<l;s++)if(!u[s](g,c,d)){s=l+1;break}if(s===l){h++;break}if(o===r-1)break;g=g.parent()}if(h===r)return!0}return!1},find:function(e){var t,n,i=[],o=this._selectors;function r(e,t,n){var o,a,s,l,u,c=t[n];for(o=0,a=e.length;o<a;o++){for(u=e[o],s=0,l=c.length;s<l;s++)if(!c[s](u,o,a)){s=l+1;break}if(s===l)n===t.length-1?i.push(u):u.items&&r(u.items(),t,n+1);else if(c.direct)return;u.items&&r(u.items(),t,n)}}if(e.items){for(t=0,n=o.length;t<n;t++)r(e.items(),o[t],0);1<n&&(i=function(e){for(var t,n=[],i=e.length;i--;)(t=e[i]).__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}(i))}return Se||(Se=Le.Collection),new Se(i)}}),Be=Array.prototype.push,Fe=Array.prototype.slice;Ne={length:0,init:function(e){e&&this.add(e)},add:function(e){return s.isArray(e)?Be.apply(this,e):e instanceof Ae?this.add(e.toArray()):Be.call(this,e),this},set:function(e){var t,n=this,i=n.length;for(n.length=0,n.add(e),t=n.length;t<i;t++)delete n[t];return n},filter:function(e){var t,n,i,o,r=[];for("string"==typeof e?(e=new Le(e),o=function(t){return e.match(t)}):o=e,t=0,n=this.length;t<n;t++)o(i=this[t])&&r.push(i);return new Ae(r)},slice:function(){return new Ae(Fe.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return s.each(this,e),this},toArray:function(){return s.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new Ae(s.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n;return void 0!==t?(this.each((function(n){n[e]&&n[e](t)})),this):(n=this[0])&&n[e]?n[e]():void 0},exec:function(e){var t=s.toArray(arguments).slice(1);return this.each((function(n){n[e]&&n[e].apply(n,t)})),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each((function(t){t.classes.add(e)}))},removeClass:function(e){return this.each((function(t){t.classes.remove(e)}))}},s.each("fire on off show hide append prepend before after reflow".split(" "),(function(e){Ne[e]=function(){var t=s.toArray(arguments);return this.each((function(n){e in n&&n[e].apply(n,t)})),this}})),s.each("text name disabled active selected checked visible parent value data".split(" "),(function(e){Ne[e]=function(t){return this.prop(e,t)}})),Ae=Ie.extend(Ne);var ze=Le.Collection=Ae,He=function(e){this.create=e.create};He.create=function(e,t){return new He({create:function(n,i){var o,r=function(e){n.set(i,e.value)};return n.on("change:"+i,(function(n){e.set(t,n.value)})),e.on("change:"+t,r),(o=n._bindings)||(o=n._bindings=[],n.on("destroy",(function(){for(var e=o.length;e--;)o[e]()}))),o.push((function(){e.off("change:"+t,r)})),e.get(t)}})};var Ve=tinymce.util.Tools.resolve("tinymce.util.Observable");function We(e){return 0<e.nodeType}var $e,qe,Ue=Ie.extend({Mixins:[Ve],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof He&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,i,o=this.data[e];if(t instanceof He&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return function e(t,n){var i,o;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(s.isArray(n)){if(t.length!==n.length)return!1;for(i=t.length;i--;)if(!e(t[i],n[i]))return!1}if(We(t)||We(n))return t===n;for(i in o={},n){if(!e(t[i],n[i]))return!1;o[i]=!0}for(i in t)if(!o[i]&&!e(t[i],n[i]))return!1;return!0}(o,t)||(this.data[e]=t,this.fire("change:"+e,i={target:this,name:e,value:t,oldValue:o}),this.fire("change",i)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return He.create(this,e)},destroy:function(){this.fire("destroy")}}),je={},Ge={add:function(t){var n=t.parent();if(n){if(!n._layout||n._layout.isNative())return;je[n._id]||(je[n._id]=n),$e||($e=!0,E.requestAnimationFrame((function(){var e,t;for(e in $e=!1,je)(t=je[e]).state.get("rendered")&&t.reflow();je={}}),e.document.body))}},remove:function(e){je[e._id]&&delete je[e._id]}},Xe="onmousewheel"in e.document,Ye=0,Ze={Statics:{classPrefix:"mce-"},isRtl:function(){return qe.rtl},classPrefix:"mce-",init:function(e){var t,n,i=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}i.settings=e=s.extend({},i.Defaults,e),i._id=e.id||"mceu_"+Ye++,i._aria={role:e.role},i._elmCache={},i.$=me,i.state=new Ue({visible:!0,active:!1,disabled:!1,value:""}),i.data=new Ue(e.data),i.classes=new ke((function(){i.state.get("rendered")&&(i.getEl().className=this.toString())})),i.classes.prefix=i.classPrefix,(t=e.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&t!==n&&o(n),o(t)),s.each("title text name visible disabled active value".split(" "),(function(t){t in e&&i[t](e[t])})),i.on("click",(function(){if(i.disabled())return!1})),i.settings=e,i.borderBox=we(e.border),i.paddingBox=we(e.padding),i.marginBox=we(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){return M(this)||ye.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,i,o,r,a,s,l,u,c=this,d=c.settings,f=c.getEl();e=c.borderBox=c.borderBox||Oe(f,"border"),c.paddingBox=c.paddingBox||Oe(f,"padding"),c.marginBox=c.marginBox||Oe(f,"margin"),u=ye.getSize(f),o=(s=d.minWidth)||u.width,r=(l=d.minHeight)||u.height,n=d.width,i=d.height,a=void 0!==(a=d.autoResize)?a:!n&&!i;var h=e.left+e.right,g=e.top+e.bottom,p=d.maxWidth||65535,m=d.maxHeight||65535;return c._layoutRect=t={x:d.x||0,y:d.y||0,w:n=n||o,h:i=i||r,deltaW:h,deltaH:g,contentW:n-h,contentH:i-g,innerW:n-h,innerH:i-g,startMinWidth:s||0,startMinHeight:l||0,minW:Math.min(o,p),minH:Math.min(r,m),maxW:p,maxH:m,autoResize:a,scrollW:0},c._lastLayoutRect={},t},layoutRect:function(e){var t,n,i,o,r,a=this,s=a._layoutRect;return s||(s=a.initLayoutRect()),e?(i=s.deltaW,o=s.deltaH,void 0!==e.x&&(s.x=e.x),void 0!==e.y&&(s.y=e.y),void 0!==e.minW&&(s.minW=e.minW),void 0!==e.minH&&(s.minH=e.minH),void 0!==(n=e.w)&&(n=(n=n<s.minW?s.minW:n)>s.maxW?s.maxW:n,s.w=n,s.innerW=n-i),void 0!==(n=e.h)&&(n=(n=n<s.minH?s.minH:n)>s.maxH?s.maxH:n,s.h=n,s.innerH=n-o),void 0!==(n=e.innerW)&&(n=(n=n<s.minW-i?s.minW-i:n)>s.maxW-i?s.maxW-i:n,s.innerW=n,s.w=n+i),void 0!==(n=e.innerH)&&(n=(n=n<s.minH-o?s.minH-o:n)>s.maxH-o?s.maxH-o:n,s.innerH=n,s.h=n+o),void 0!==e.contentW&&(s.contentW=e.contentW),void 0!==e.contentH&&(s.contentH=e.contentH),(t=a._lastLayoutRect).x===s.x&&t.y===s.y&&t.w===s.w&&t.h===s.h||((r=qe.repaintControls)&&r.map&&!r.map[a._id]&&(r.push(a),r.map[a._id]=!0),t.x=s.x,t.y=s.y,t.w=s.w,t.h=s.h),a):s},repaint:function(){var t,n,i,o,r,a,s,l,u,c,d=this;u=e.document.createRange?function(e){return e}:Math.round,t=d.getEl().style,a=(r=d.borderBox).left+r.right,s=r.top+r.bottom,(o=d._layoutRect).x!==(l=d._lastRepaintRect||{}).x&&(t.left=u(o.x)+"px",l.x=o.x),o.y!==l.y&&(t.top=u(o.y)+"px",l.y=o.y),o.w!==l.w&&(c=u(o.w-a),t.width=(0<=c?c:0)+"px",l.w=o.w),o.h!==l.h&&(c=u(o.h-s),t.height=(0<=c?c:0)+"px",l.h=o.h),d._hasBody&&o.innerW!==l.innerW&&(c=u(o.innerW),(i=d.getEl("body"))&&((n=i.style).width=(0<=c?c:0)+"px"),l.innerW=o.innerW),d._hasBody&&o.innerH!==l.innerH&&(c=u(o.innerH),(i=i||d.getEl("body"))&&((n=n||i.style).height=(0<=c?c:0)+"px"),l.innerH=o.innerH),d._lastRepaintRect=l,d.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,ye.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n,i,o,r=this;return Je(r).on(e,"string"!=typeof(n=t)?n:function(e){return i||r.parentsAndSelf().each((function(e){var t=e.settings.callbacks;if(t&&(i=t[n]))return o=e,!1})),i?i.call(o,e):(e.action=n,void this.fire("execute",e))}),r},off:function(e,t){return Je(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=Je(this).fire(e,t),!1!==n&&this.parent)for(var i=this.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},hasEventListeners:function(e){return Je(this).has(e)},parents:function(e){var t,n=new ze;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new ze(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=me("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&i.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))},translate:function(e){return qe.translate?qe.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var e,t,n=this,i=n.getEl(),o=n.parent();if(n.items){var r=n.items().toArray();for(t=r.length;t--;)r[t].remove()}o&&o.items&&(e=[],o.items().each((function(t){t!==n&&e.push(t)})),o.items().set(e),o._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&me(i).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return me(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return me(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,i,o,r=this,a=r.settings;for(i in r.$el=me(r.getEl()),r.state.set("rendered",!0),a)0===i.indexOf("on")&&r.on(i.substr(2),a[i]);if(r._eventsRoot){for(n=r.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(i in o._nativeEvents)r._nativeEvents[i]=!0}Qe(r),a.style&&(e=r.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),r.settings.border&&r.$el.css({"border-top-width":(t=r.borderBox).top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left});var s=r.getRoot();for(var l in s.controlIdLookup||(s.controlIdLookup={}),(s.controlIdLookup[r._id]=r)._aria)r.aria(l,r._aria[l]);!1===r.state.get("visible")&&(r.getEl().style.display="none"),r.bindStates(),r.state.on("change:visible",(function(e){var t,n=e.value;r.state.get("rendered")&&(r.getEl().style.display=!1===n?"none":"",r.getEl().getBoundingClientRect()),(t=r.parent())&&(t._lastRect=null),r.fire(n?"show":"hide"),Ge.add(r)})),r.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,i,o,r,a,s=this.getEl(),l=s.parentNode,u=function(e,t){var n,i,o=e;for(n=i=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,i+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:i}}(s,l);return t=u.x,n=u.y,i=s.offsetWidth,o=s.offsetHeight,r=l.clientWidth,a=l.clientHeight,"end"===e?(t-=r-i,n-=a-o):"center"===e&&(t-=r/2-i/2,n-=a/2-o/2),l.scrollLeft=t,l.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),t=(e=t).parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){Ge.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function Je(e){return e._eventDispatcher||(e._eventDispatcher=new De({scope:e,toggleEvent:function(t,n){n&&De.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&Qe(e))}})),e._eventDispatcher}function Qe(e){var t,n,i,o,r,a;function s(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function l(){var e=o._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each((function(e){e.fire("mouseleave",{target:e.getEl()})})),o._lastHoverCtrl=null)}function u(t){var n,i,r,a=e.getParentCtrl(t.target),s=o._lastHoverCtrl,l=0;if(a!==s){if((i=(o._lastHoverCtrl=a).parents().toArray().reverse()).push(a),s){for((r=s.parents().toArray().reverse()).push(s),l=0;l<r.length&&i[l]===r[l];l++);for(n=r.length-1;l<=n;n--)(s=r[n]).fire("mouseleave",{target:s.getEl()})}for(n=l;n<i.length;n++)(a=i[n]).fire("mouseenter",{target:a.getEl()})}}function c(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(r=e._nativeEvents){for((i=e.parents().toArray()).unshift(e),t=0,n=i.length;!o&&t<n;t++)o=i[t]._eventsRoot;for(o||(o=i[i.length-1]||e),e._eventsRoot=o,n=t,t=0;t<n;t++)i[t]._eventsRoot=o;var d=o._delegates;for(a in d||(d=o._delegates={}),r){if(!r)return!1;"wheel"!==a?("mouseenter"===a||"mouseleave"===a?o._hasMouseEnter||(me(o.getEl()).on("mouseleave",l).on("mouseover",u),o._hasMouseEnter=1):d[a]||(me(o.getEl()).on(a,s),d[a]=!0),r[a]=!1):Xe?me(e.getEl()).on("mousewheel",c):me(e.getEl()).on("DOMMouseScroll",c)}}}s.each("text title visible disabled active value".split(" "),(function(e){Ze[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}));var et=qe=Ie.extend(Ze),tt=function(e){return!!e.getAttribute("data-mce-tabstop")};function nt(t){var i,o,r=t.root;function a(e){return e&&1===e.nodeType}try{i=e.document.activeElement}catch(n){i=e.document.body}function s(e){return a(e=e||i)?e.getAttribute("role"):null}function l(e){for(var t,n=e||i;n=n.parentNode;)if(t=s(n))return t}function u(e){var t=i;if(a(t))return t.getAttribute("aria-"+e)}function c(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function d(e){var t=[];return function e(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){var i;(c(i=n)&&!i.hidden||tt(i)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(s(i)))&&t.push(n);for(var o=0;o<n.childNodes.length;o++)e(n.childNodes[o])}}(e||r.getEl()),t}function f(e){var t,n;(n=(e=e||o).parents().toArray()).unshift(e);for(var i=0;i<n.length&&!(t=n[i]).settings.ariaRoot;i++);return t}function h(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function g(e,t){var n=-1,o=f();t=t||d(o.getEl());for(var r=0;r<t.length;r++)t[r]===i&&(n=r);o.lastAriaIndex=h(n+=e,t)}function p(){"tablist"===l()?g(-1,d(i.parentNode)):o.parent().submenu?b():g(-1)}function m(){var e=s(),t=l();"tablist"===t?g(1,d(i.parentNode)):"menuitem"===e&&"menu"===t&&u("haspopup")?T():g(1)}function v(){g(-1)}function y(){var e=s(),t=l();"menuitem"===e&&"menubar"===t?T():"button"===e&&u("haspopup")?T({key:"down"}):g(1)}function b(){o.fire("cancel")}function T(e){o.fire("click",{target:i,aria:e=e||{}})}return o=r.getParentCtrl(i),r.on("keydown",(function(e){function t(e,t){c(i)||tt(i)||"slider"!==s(i)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,p);break;case 39:t(e,m);break;case 38:t(e,v);break;case 40:t(e,y);break;case 27:b();break;case 14:case 13:case 32:t(e,T);break;case 9:!function(e){if("tablist"===l()){var t=d(o.getEl("body"))[0];t&&t.focus()}else g(e.shiftKey?-1:1)}(e),e.preventDefault()}})),r.on("focusin",(function(e){i=e.target,o=e.control})),{focusFirst:function(e){var t=f(e),n=d(t.getEl());h(t.settings.ariaRemember&&"lastAriaIndex"in t?t.lastAriaIndex:0,n)}}}var it={},ot=et.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new ze,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new ke((function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())})),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=p.create((e.layout||"")+"layout"),t.add(t.settings.items?t.settings.items:t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=it[e]=it[e]||new Le(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,i,o=this;if(!e||!(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav))return i=o.find("*"),o.statusbar&&i.add(o.statusbar.items()),i.each((function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)})),t&&t.focus(),o;n.focusFirst(o)},replace:function(e,t){for(var n,i=this.items(),o=i.length;o--;)if(i[o]===e){i[o]=t;break}0<=o&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,i=[];return s.isArray(e)||(e=[e]),s.each(e,(function(e){e&&(e instanceof et||("string"==typeof e&&(e={type:e}),t=s.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=p.create(t)),i.push(e))})),i},renderNew:function(){var e=this;return e.items().each((function(t,n){var i;t.parent(e),t.state.get("rendered")||((i=e.getEl("body")).hasChildNodes()&&n<=i.childNodes.length-1?me(i.childNodes[n]).before(t.renderHtml()):me(i).append(t.renderHtml()),t.postRender(),Ge.add(t))})),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var i,o,r;return e=this.create(e),i=this.items(),!n&&t<i.length-1&&(t+=1),0<=t&&t<i.length&&(o=i.slice(0,t).toArray(),r=i.slice(t).toArray(),i.set(o.concat(e,r))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};return this.find("*").each((function(t){var n=t.name(),i=t.value();n&&void 0!==i&&(e[n]=i)})),e},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&t.$el.css({"border-top-width":(e=t.borderBox).top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}),t.parent()||(t.keyboardNav=nt({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(Ge.remove(this),this.visible()){for(et.repaintControls=[],et.repaintControls.map={},this.recalc(),e=et.repaintControls.length;e--;)et.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),et.repaintControls=[]}return this}});function rt(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function at(t,n){var i,o,r,a,s,l,u,c=n.document||e.document,d=c.getElementById((n=n||{}).handle||t);r=function(t){var r,f,h,g,p,m,v,y,b,T,C,E=(r=c,g=(b=Math.max)((f=r.documentElement).scrollWidth,(h=r.body).scrollWidth),p=b(f.clientWidth,h.clientWidth),m=b(f.offsetWidth,h.offsetWidth),v=b(f.scrollHeight,h.scrollHeight),y=b(f.clientHeight,h.clientHeight),{width:g<m?p:g,height:v<b(f.offsetHeight,h.offsetHeight)?y:v});rt(t),t.preventDefault(),o=t.button,T=d,l=t.screenX,u=t.screenY,C=e.window.getComputedStyle?e.window.getComputedStyle(T,null).getPropertyValue("cursor"):T.runtimeStyle.cursor,i=me("<div></div>").css({position:"absolute",top:0,left:0,width:E.width,height:E.height,zIndex:2147483647,opacity:1e-4,cursor:C}).appendTo(c.body),me(c).on("mousemove touchmove",s).on("mouseup touchend",a),n.start(t)},s=function(e){if(rt(e),e.button!==o)return a(e);e.deltaX=e.screenX-l,e.deltaY=e.screenY-u,e.preventDefault(),n.drag(e)},a=function(e){rt(e),me(c).off("mousemove touchmove",s).off("mouseup touchend",a),i.remove(),n.stop&&n.stop(e)},this.destroy=function(){me(d).off()},me(d).on("mousedown touchstart",r)}var st,lt,ut,ct,dt={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var e=this;function t(){var t,n,i;function o(i,o,r,a,s,l){var u,c,d,f,h,g,p,m;if(c=e.getEl("scroll"+i)){if(p=o.toLowerCase(),m=r.toLowerCase(),me(e.getEl("absend")).css(p,e.layoutRect()[a]-1),!s)return void me(c).css("display","none");me(c).css("display","block"),u=e.getEl("body"),d=e.getEl("scroll"+i+"t"),f=u["client"+r]-4,h=(f-=t&&n?c["client"+l]:0)/u["scroll"+r],(g={})[p]=u["offset"+o]+2,g[m]=f,me(c).css(g),(g={})[p]=u["scroll"+o]*h,g[m]=f*h,me(d).css(g)}}i=e.getEl("body"),n=i.scrollHeight>i.clientHeight,o("h","Left","Width","contentW",t=i.scrollWidth>i.clientWidth,"Height"),o("v","Top","Height","contentH",n,"Width")}e.settings.autoScroll&&(e._hasScroll||(e._hasScroll=!0,function(){function t(t,n,i,o,r){var a,s=e._id+"-scroll"+t,l=e.classPrefix;me(e.getEl()).append('<div id="'+s+'" class="'+l+"scrollbar "+l+"scrollbar-"+t+'"><div id="'+s+'t" class="'+l+'scrollbar-thumb"></div></div>'),e.draghelper=new at(s+"t",{start:function(){a=e.getEl("body")["scroll"+n],me("#"+s).addClass(l+"active")},drag:function(s){var l,u,c,d,f=e.layoutRect();u=f.contentW>f.innerW,c=f.contentH>f.innerH,d=e.getEl("body")["client"+i]-4,l=(d-=u&&c?e.getEl("scroll"+t)["client"+r]:0)/e.getEl("body")["scroll"+i],e.getEl("body")["scroll"+n]=a+s["delta"+o]/l},stop:function(){me("#"+s).removeClass(l+"active")}})}e.classes.add("scroll"),t("v","Top","Height","Y","Width"),t("h","Left","Width","X","Height")}(),e.on("wheel",(function(n){var i=e.getEl("body");i.scrollLeft+=10*(n.deltaX||0),i.scrollTop+=10*n.deltaY,t()})),me(e.getEl("body")).on("scroll",t)),t())}},ft=ot.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[dt],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),ht={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=ye.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},gt=[],pt=[];function mt(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function vt(e){var t=ye.getViewPort().y;function n(t,n){for(var i,o=0;o<gt.length;o++)if(gt[o]!==e)for(i=gt[o].parent();i&&(i=i.parent());)i===e&&gt[o].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function yt(e,t){var n,i,o=bt.zIndex||65535;if(e)pt.push(t);else for(n=pt.length;n--;)pt[n]===t&&pt.splice(n,1);if(pt.length)for(n=0;n<pt.length;n++)pt[n].modal&&(o++,i=pt[n]),pt[n].getEl().style.zIndex=o,pt[n].zIndex=o,o++;var r=me("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];i?me(r).css("z-index",i.zIndex-1):r&&(r.parentNode.removeChild(r),ct=!1),bt.currentZIndex=o}var bt=ft.extend({Mixins:[xe,ht],init:function(t){var n=this;n._super(t),(n._eventsRoot=n).classes.add("floatpanel"),t.autohide&&(st||(st=function(e){2!==e.button&&function(e){for(var t=gt.length;t--;){var n=gt[t],i=n.getParentCtrl(e.target);if(n.settings.autohide){if(i&&(mt(i,n)||n.parent()===i))continue;(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}}(e)},me(e.document).on("click touchstart",st)),function(){if(!ut){var t=e.document.documentElement,n=t.clientWidth,i=t.clientHeight;ut=function(){e.document.all&&n===t.clientWidth&&i===t.clientHeight||(n=t.clientWidth,i=t.clientHeight,bt.hideAll())},me(e.window).on("resize",ut)}}(),gt.push(n)),t.autofix&&(lt||(lt=function(){var e;for(e=gt.length;e--;)vt(gt[e])},me(e.window).on("scroll",lt)),n.on("move",(function(){vt(this)}))),n.on("postrender show",(function(e){if(e.control===n){var t,i=n.classPrefix;n.modal&&!ct&&((t=me("#"+i+"modal-block",n.getContainerElm()))[0]||(t=me('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(n.getContainerElm())),E.setTimeout((function(){t.addClass(i+"in"),me(n.getEl()).addClass(i+"in")})),ct=!0),yt(!0,n)}})),n.on("show",(function(){n.parents().each((function(e){if(e.state.get("fixed"))return n.fixed(!0),!1}))})),t.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.classes.add("popover").add("bottom").add(n.isRtl()?"end":"start")),n.aria("label",t.ariaLabel),n.aria("labelledby",n._id),n.aria("describedby",n.describedBy||n._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=ye.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this._super();for(e=gt.length;e--&&gt[e]!==this;);return-1===e&&gt.push(this),t},hide:function(){return Tt(this),yt(!1,this),this._super()},hideAll:function(){bt.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),yt(!1,this)),this},remove:function(){Tt(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function Tt(e){var t;for(t=gt.length;t--;)gt[t]===e&&gt.splice(t,1);for(t=pt.length;t--;)pt[t]===e&&pt.splice(t,1)}function Ct(e,t){var n,i,o=this,r=et.classPrefix;o.show=function(a,s){function l(){n&&(me(e).append('<div class="'+r+"throbber"+(t?" "+r+"throbber-inline":"")+'"></div>'),s&&s())}return o.hide(),n=!0,a?i=E.setTimeout(l,a):l(),o},o.hide=function(){var t=e.lastChild;return E.clearTimeout(i),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,o}}bt.hideAll=function(){for(var e=gt.length;e--;){var t=gt[e];t&&t.settings.autohide&&(t.hide(),gt.splice(e,1))}};var Et=et.extend({Mixins:[xe],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)})),e._super()},repaint:function(){var e,t;(e=this.getEl().style).left=(t=this._layoutRect).x+"px",e.top=t.y+"px",e.zIndex=131070}}),_t=et.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==_t.tooltips&&(t.on("mouseenter",(function(n){var i=t.tooltip().moveTo(-65535);if(n.control===t){var o=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"===o),i.classes.toggle("tooltip-nw","bc-tl"===o),i.classes.toggle("tooltip-ne","bc-tr"===o),i.moveRel(t.getEl(),o)}else i.hide()})),t.on("mouseleave mousedown click",(function(){t.tooltip().remove(),t._tooltip=null}))),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Et({type:"tooltip"}),function(e,t){t.uiContainer=S(e)}(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",(function(e){t(e.value)})),e.state.on("change:active",(function(e){n(e.value)})),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),xt=_t.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",(function(e){t(e.value)})),t(e.state.get("value")),e._super()}}),It=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},Dt=et.extend({Mixins:[xe],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new xt),t.on("click",(function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()}))},renderHtml:function(){var e,t=this,n=t.classPrefix,i="",o="",r="";return t.icon&&(i='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(o='<button type="button" class="'+n+'close" aria-hidden="true">×</button>'),t.progressBar&&(r=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+i+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+r+o+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return E.setTimeout((function(){e.$el.addClass(e.classPrefix+"in"),It(e,e.state.get("text"))}),100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().firstChild.innerHTML=t.value,It(e,t.value)})),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",(function(t){It(e,e.state.get("text"))}))),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e,t;(e=this.getEl().style).left=(t=this._layoutRect).x+"px",e.top=t.y+"px",e.zIndex=65534}}),wt=[],Ot="";function Rt(t){var n,i=me("meta[name=viewport]")[0];!1!==le.overrideViewPort&&(i||((i=e.document.createElement("meta")).setAttribute("name","viewport"),e.document.getElementsByTagName("head")[0].appendChild(i)),(n=i.getAttribute("content"))&&void 0!==Ot&&(Ot=n),i.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Ot))}var kt=bt.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new ft({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",(function(e){var n=t.classPrefix+"close";(ye.hasClass(e.target,n)||ye.hasClass(e.target.parentNode,n))&&t.close()})),t.on("cancel",(function(){t.close()})),t.on("move",(function(e){e.control===t&&bt.hideAll()})),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,i,o=this,r=o.statusbar;o._fullscreen&&(o.layoutRect(ye.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),i=!0),r&&(r.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=r.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),i=!0)),i&&o.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),i=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=ye.getSize(e);n.headerW=o.width,n.headerH=o.height,i+=n.headerH}t.statusbar&&(i+=t.statusbar.layoutRect().h),n.deltaH+=i,n.minH+=i,n.h+=i;var r=ye.getWindowSize();return n.x=t.settings.x||Math.max(0,r.w/2-n.w/2),n.y=t.settings.y||Math.max(0,r.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,o=e.settings,r="",a="",s=o.html;return e.preRender(),t.preRender(e),o.title&&(r='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+i+'dragh"></div><button type="button" class="'+i+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+r+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(t){var n,i,o=this,r=e.document.documentElement,a=o.classPrefix;if(t!==o._fullscreen)if(me(e.window).on("resize",(function(){var e;if(o._fullscreen)if(n)o._timer||(o._timer=E.setTimeout((function(){var e=ye.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0}),50));else{e=(new Date).getTime();var t=ye.getWindowSize();o.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)}})),i=o.layoutRect(),o._fullscreen=t){o._initial={x:i.x,y:i.y,w:i.w,h:i.h},o.borderBox=we("0"),o.getEl("head").style.display="none",i.deltaH-=i.headerH+2,me([r,e.document.body]).addClass(a+"fullscreen"),o.classes.add("fullscreen");var s=ye.getWindowSize();o.moveTo(0,0).resizeTo(s.w,s.h)}else o.borderBox=we(o.settings.border),o.getEl("head").style.display="",i.deltaH+=i.headerH,me([r,e.document.body]).removeClass(a+"fullscreen"),o.classes.remove("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout((function(){t.classes.add("in"),t.fire("open")}),0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new at(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",(function(e){e.isDefaultPrevented()||t.close()})),wt.push(t),Rt(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n=this;for(n.dragHelper.destroy(),n._super(),n.statusbar&&this.statusbar.remove(),function(t,n){(function(){for(var e=0;e<wt.length;e++)if(wt[e]._fullscreen)return!0;return!1})()&&me([e.document.documentElement,e.document.body]).removeClass(t+"fullscreen")}(n.classPrefix),t=wt.length;t--;)wt[t]===n&&wt.splice(t,1);Rt(0<wt.length)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){if(!le.desktop){var t={w:e.window.innerWidth,h:e.window.innerHeight};E.setInterval((function(){var n=e.window.innerWidth,i=e.window.innerHeight;t.w===n&&t.h===i||(t={w:n,h:i},me(e.window).trigger("resize"))}),100)}me(e.window).on("resize",(function(){var e,t,n=ye.getWindowSize();for(e=0;e<wt.length;e++)t=wt[e].layoutRect(),wt[e].moveTo(wt[e].settings.x||Math.max(0,n.w/2-t.w/2),wt[e].settings.y||Math.max(0,n.h/2-t.h/2))}))}();var St,At,Nt,Mt=kt.extend({init:function(e){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var n,i=t.callback||function(){};function o(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}switch(t.buttons){case Mt.OK_CANCEL:n=[o("Ok",!0,!0),o("Cancel",!1)];break;case Mt.YES_NO:case Mt.YES_NO_CANCEL:n=[o("Yes",1,!0),o("No",0)],t.buttons===Mt.YES_NO_CANCEL&&n.push(o("Cancel",-1));break;default:n=[o("Ok",!0,!0)]}return new kt({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){i(!1)}}).renderTo(e.document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Mt.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Mt.OK_CANCEL,Mt.msgBox(e)}}}),Kt=Ie.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=s.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,i,o,r=this.settings;t=r.firstControlClass,n=r.lastControlClass,e.each((function(e){e.classes.remove(t).remove(n).add(r.controlClass),e.visible()&&(i||(i=e),o=e)})),i&&i.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each((function(e){t+=e.renderHtml()})),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Pt=Kt.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each((function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()}))},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),Lt=_t.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",(function(e){e.preventDefault()})),n.on("touchstart",(function(e){n.fire("click",e),e.preventDefault()})),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var t,n=this,i=n._id,o=n.classPrefix,r=n.state.get("icon"),a=n.state.get("text"),s="",l=n.settings;return(t=l.image)?(r="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a&&(n.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+n.encode(a)+"</span>"),'<div id="'+i+'" class="'+n.classes+'" tabindex="-1"'+("boolean"==typeof l.active?' aria-pressed="'+l.active+'"':"")+'><button id="'+i+'-button" role="presentation" type="button" tabindex="-1">'+((r=r?o+"ico "+o+"i-"+r:"")?'<i class="'+r+'"'+t+"></i>":"")+s+"</button></div>"},bindStates:function(){var t=this,n=t.$,i=t.classPrefix+"txt";function o(e){var o=n("span."+i,t.getEl());e?(o[0]||(n("button:first",t.getEl()).append('<span class="'+i+'"></span>'),o=n("span."+i,t.getEl())),o.html(t.encode(e))):o.remove(),t.classes.toggle("btn-has-text",!!e)}return t.state.on("change:text",(function(e){o(e.value)})),t.state.on("change:icon",(function(n){var i=n.value,r=t.classPrefix;i=(t.settings.icon=i)?r+"ico "+r+"i-"+t.settings.icon:"";var a=t.getEl().firstChild,s=a.getElementsByTagName("i")[0];i?(s&&s===a.firstChild||(s=e.document.createElement("i"),a.insertBefore(s,a.firstChild)),s.className=i):s&&a.removeChild(s),o(t.state.get("text"))})),t._super()}}),Bt=Lt.extend({init:function(e){e=s.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var e=this,t=ye.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),me(t).on("change",(function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)})),me(t).on("click",(function(e){e.stopPropagation()})),me(e.getEl("button")).on("click touchstart",(function(e){e.stopPropagation(),t.click(),e.preventDefault()})),e.getEl().appendChild(t)},remove:function(){me(this.getEl("button")).off(),me(this.getEl("input")).off(),this._super()}}),Ft=ot.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),zt=_t.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",(function(e){e.preventDefault()})),t.on("click",(function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())})),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function n(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",(function(e){t.getEl("al").firstChild.data=t.translate(e.value)})),t.state.on("change:checked change:value",(function(e){t.fire("change"),n(e.value)})),t.state.on("change:icon",(function(n){var i=n.value,o=t.classPrefix;if(void 0===i)return t.settings.icon;i=(t.settings.icon=i)?o+"ico "+o+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,a=r.getElementsByTagName("i")[0];i?(a&&a===r.firstChild||(a=e.document.createElement("i"),r.insertBefore(a,r.firstChild)),a.className=i):a&&r.removeChild(a)})),t.state.get("checked")&&n(!0),t._super()}}),Ht=tinymce.util.Tools.resolve("tinymce.util.VK"),Vt=_t.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",(function(n){var i=n.target,o=t.getEl();if(me.contains(o,i)||i===o)for(;i&&i!==o;)i.id&&-1!==i.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),i=i.parentNode})),t.on("keydown",(function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),i=e.target.value;i!==n&&(t.state.set("value",i),t.fire("autocomplete",e))}})),t.on("mouseover",(function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var i=t.statusMessage()||"Ok",o=n.text(i).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(e.target,o)}}))},statusLevel:function(e){return 0<arguments.length&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return 0<arguments.length&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this;t.menu||((e=t.settings.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=p.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",(function(e){e.control===t.menu&&t.focus()})),t.menu.on("show hide",(function(e){e.control.items().each((function(e){e.active(e.value()===t.value())}))})).fire("show"),t.menu.on("select",(function(e){t.value(e.control.value())})),t.on("focusin",(function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()})),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,n,i=this,o=i.getEl(),r=i.getEl("open"),a=i.layoutRect(),s=0,l=o.firstChild;i.statusLevel()&&"none"!==i.statusLevel()&&(s=parseInt(ye.getRuntimeStyle(l,"padding-right"),10)-parseInt(ye.getRuntimeStyle(l,"padding-left"),10)),t=r?a.w-ye.getSize(r).width-10:a.w-10;var u=e.document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(n=i.layoutRect().h-2+"px"),me(l).css({width:t-s,lineHeight:n}),i._super(),i},postRender:function(){var e=this;return me(this.getEl("inp")).on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)})),e._super()},renderHtml:function(){var e,t,n,i=this,o=i._id,r=i.settings,a=i.classPrefix,s=i.state.get("value")||"",l="",u="";return"spellcheck"in r&&(u+=' spellcheck="'+r.spellcheck+'"'),r.maxLength&&(u+=' maxlength="'+r.maxLength+'"'),r.size&&(u+=' size="'+r.size+'"'),r.subtype&&(u+=' type="'+r.subtype+'"'),n='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',i.disabled()&&(u+=' disabled="disabled"'),(e=r.icon)&&"caret"!==e&&(e=a+"ico "+a+"i-"+r.icon),t=i.state.get("text"),(e||t)&&(l='<div id="'+o+'-open" class="'+a+"btn "+a+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+a+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",i.classes.add("has-open")),'<div id="'+o+'" class="'+i.classes+'"><input id="'+o+'-inp" class="'+a+'textbox" value="'+i.encode(s,!1)+'" hidefocus="1"'+u+' placeholder="'+i.encode(r.placeholder)+'" />'+n+l+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0!==e.length){n.menu?n.menu.items().remove():n.menu=p.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),s.each(e,(function(e){var i,o;n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(i=e.value,o=e.title,function(){n.fire("selectitem",{title:o,value:i})})})})),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",(function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()}));var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",(function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl("inp").disabled=t.value})),e.state.on("change:statusLevel",(function(t){var n=e.getEl("status"),i=e.classPrefix,o=t.value;ye.css(n,"display","none"===o?"none":""),ye.toggleClass(n,i+"i-checkmark","ok"===o),ye.toggleClass(n,i+"i-warning","warn"===o),ye.toggleClass(n,i+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()})),ye.on(e.getEl("status"),"mouseleave",(function(){e.tooltip().hide()})),e.on("cancel",(function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())}));var t=function(e,t){t&&0<t.items().length&&t.items().eq(e)[0].focus()};return e.on("keydown",(function(n){var i=n.keyCode;"INPUT"===n.target.nodeName&&(i===Ht.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):i===Ht.UP&&(n.preventDefault(),t(-1,e.menu)))})),e._super()},remove:function(){me(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Wt=Vt.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",(function(){t.repaintColor(t.value())}))},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(o){}},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.state.get("rendered")&&e.repaintColor(t.value)})),e._super()}}),$t=Lt.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new bt(n).on("hide",(function(){e.classes.remove("opened")})).on("cancel",(function(t){t.stopPropagation(),e.focus(),e.hidePanel()})).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var i=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===i.substr(-1)),e.panel.classes.toggle("end","r"===i.substr(-1));var o="t"===i.substr(0,1);e.panel.classes.toggle("bottom",!o),e.panel.classes.toggle("top",o),e.panel.moveRel(e.getEl(),i)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",(function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))})),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),qt=g.DOM,Ut=$t.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",r=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return i&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(i)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+r+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",(function(n){n.aria&&"down"===n.aria.key||n.control!==e||qt.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))})),delete e.settings.onclick,e._super()}}),jt=tinymce.util.Tools.resolve("tinymce.util.Color"),Gt=_t.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,t,n,i,o,r=this,a=r.color();function s(e,t){var n,i,o=ye.getPos(e);return n=t.pageX-o.x,i=t.pageY-o.y,{x:n=Math.max(0,Math.min(n/e.clientWidth,1)),y:i=Math.max(0,Math.min(i/e.clientHeight,1))}}function l(e,t){ye.css(n,{top:(360-e.h)/360*100+"%"}),t||ye.css(o,{left:e.s+"%",top:100-e.v+"%"}),i.style.background=jt({s:100,v:100,h:e.h}).toHex(),r.color().parse({s:e.s,v:e.v,h:e.h})}function u(t){var n;n=s(i,t),e.s=100*n.x,e.v=100*(1-n.y),l(e),r.fire("change")}function c(n){var i;i=s(t,n),(e=a.toHsv()).h=360*(1-i.y),l(e,!0),r.fire("change")}t=r.getEl("h"),n=r.getEl("hp"),i=r.getEl("sv"),o=r.getEl("svp"),r._repaint=function(){l(e=a.toHsv())},r._super(),r._svdraghelper=new at(r._id+"-sv",{start:u,drag:u}),r._hdraghelper=new at(r._id+"-h",{start:c,drag:c}),r._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=jt()),this._color},renderHtml:function(){var e,t=this._id,n=this.classPrefix,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+i+");background: linear-gradient(to bottom,"+i+');">'+function(){var e,t,o,r,a="";for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(r=i.split(",")).length-1;e<t;e++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/t+"%;"+o+r[e]+",endColorstr="+r[e+1]+");-ms-"+o+r[e]+",endColorstr="+r[e+1]+')"></div>';return a}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),Xt=_t.extend({init:function(e){e=s.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e,t=this.settings;return e=ye.create("div",{id:this._id,hidefocus:"1"},"<span>"+this.translate(t.text)+"</span>"),t.height&&ye.css(e,"height",t.height+"px"),t.width&&ye.css(e,"width",t.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",(function(e){e.preventDefault()})),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",(function(t){if(t.preventDefault(),!e.state.get("disabled")){var n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return s.grep(t,(function(e){return i.test(e.name)}))}(t.dataTransfer.files);e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},n.length&&e.fire("change",t)}}))},remove:function(){this.$el.off(),this._super()}}),Yt=_t.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",(function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})})),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",(function(t){e.innerHtml(e._getDataPathHtml(t.value))})),e._super()},_getDataPathHtml:function(e){var t,n,i=e||[],o="",r=this.classPrefix;for(t=0,n=i.length;t<n;t++)o+=(0<t?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(t===n-1?" "+r+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+i[t].name+"</div>";return o||(o='<div class="'+r+'path-item"> </div>'),o}}),Zt=Yt.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",(function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()})),t.on("nodeChange",(function(i){for(var o=[],r=i.parents,a=r.length;a--;)if(1===r[a].nodeType&&!n(r[a])){var s=t.fire("ResolveName",{name:r[a].nodeName.toLowerCase(),target:r[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:r[a]}),s.isPropagationStopped())break}e.row(o)}))),e._super()}}),Jt=ot.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),Qt=ot.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each((function(t){var n,i=t.settings.label;i&&((n=new Jt(s.extend({items:{type:"label",id:t._id+"-l",text:i,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))}))},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var e=this;function t(){var t,n,i=0,o=[];if(!1!==e.settings.labelGapCalc)for(("children"===e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each((function(e){var t=e.items()[0],n=t.getEl().clientWidth;i=i<n?n:i,o.push(t)})),n=e.settings.labelGap||0,t=o.length;t--;)o[t].settings.minWidth=i+n}e._super(),e.on("show",t),t()}}),en=Qt.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),tn=0,nn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:x(e)}},on=e.Node.DOCUMENT_NODE,rn=e.Node.ELEMENT_NODE,an=(void 0!==e.window||Function("return this;")(),function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,t);if(!n)return{major:0,minor:0};var i=function(e){return Number(t.replace(n,"$"+e))};return ln(i(1),i(2))}),sn=function(){return ln(0,0)},ln=function(e,t){return{major:e,minor:t}},un=function(e,t){var n=String(t).toLowerCase();return 0===e.length?sn():an(e,n)},cn=sn,dn="Firefox",fn=function(e,t){return function(){return t===e}},hn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:fn("Edge",t),isChrome:fn("Chrome",t),isIE:fn("IE",t),isOpera:fn("Opera",t),isFirefox:fn(dn,t),isSafari:fn("Safari",t)}},gn=function(){return hn({current:void 0,version:cn()})},pn=hn,mn=(x("Edge"),x("Chrome"),x("IE"),x("Opera"),x(dn),x("Safari"),"Windows"),vn="Android",yn="Solaris",bn="FreeBSD",Tn=function(e,t){return function(){return t===e}},Cn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Tn(mn,t),isiOS:Tn("iOS",t),isAndroid:Tn(vn,t),isOSX:Tn("OSX",t),isLinux:Tn("Linux",t),isSolaris:Tn(yn,t),isFreeBSD:Tn(bn,t)}},En=function(){return Cn({current:void 0,version:cn()})},_n=Cn,xn=(x(mn),x("iOS"),x(vn),x("Linux"),x("OSX"),x(yn),x(bn),function(e,t){var n=String(t).toLowerCase();return function(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(t(o))return k.some(o)}return k.none()}(e,(function(e){return e.search(n)}))}),In=function(e,t){return-1!==e.indexOf(t)},Dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wn=function(e){return function(t){return In(t,e)}},On=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return In(e,"edge/")&&In(e,"chrome")&&In(e,"safari")&&In(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dn],search:function(e){return In(e,"chrome")&&!In(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return In(e,"msie")||In(e,"trident")}},{name:"Opera",versionRegexes:[Dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wn("firefox")},{name:"Safari",versionRegexes:[Dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(In(e,"safari")||In(e,"mobile/"))&&In(e,"applewebkit")}}],Rn=[{name:"Windows",search:wn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return In(e,"iphone")||In(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:wn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wn("linux"),versionRegexes:[]},{name:"Solaris",search:wn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wn("freebsd"),versionRegexes:[]}],kn={browsers:x(On),oses:x(Rn)},Sn=(Nt=!(St=function(){return function(e){var t,n,i,o,r,a,s,l,u,c,d,f=kn.browsers(),h=kn.oses(),g=function(e,t){return xn(e,t).map((function(e){var n=un(e.versionRegexes,t);return{current:e.name,version:n}}))}(f,e).fold(gn,pn),p=function(e,t){return xn(e,t).map((function(e){var n=un(e.versionRegexes,t);return{current:e.name,version:n}}))}(h,e).fold(En,_n);return{browser:g,os:p,deviceType:(n=g,i=e,o=(t=p).isiOS()&&!0===/ipad/i.test(i),r=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,l=o||a||s&&!0===/mobile/i.test(i),u=t.isiOS()||t.isAndroid(),c=u&&!l,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:x(o),isiPhone:x(r),isTablet:x(l),isPhone:x(c),isTouch:x(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:x(d)})}}(e.navigator.userAgent)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Nt||(Nt=!0,At=St.apply(null,e)),At}),An=rn,Nn=on,Mn=function(e){return e.nodeType!==An&&e.nodeType!==Nn||0===e.childElementCount},Kn=(Sn().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),s.trim),Pn=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Ln=Pn("true"),Bn=Pn("false"),Fn=function(e,t,n,i,o){return{type:e,title:t,url:n,level:i,attach:o}},zn=function(e){return e.innerText||e.textContent},Hn=function(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)&&Wn(e);var t},Vn=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Wn=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Ln(e)}return!1}(e)&&!Bn(e)},$n=function(e){return Vn(e)&&Wn(e)},qn=function(e){var t,n=function(e){return e.id?e.id:(t=(new Date).getTime(),"h_"+Math.floor(1e9*Math.random())+ ++tn+String(t));var t}(e);return Fn("header",zn(e),"#"+n,Vn(t=e)?parseInt(t.nodeName.substr(1),10):0,(function(){e.id=n}))},Un=function(e){var t=e.id||e.name,n=zn(e);return Fn("anchor",n||"#"+t,"#"+t,0,_)},jn=function(e){return 0<Kn(e.title).length},Gn={},Xn=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Yn=function(e,t){return{title:e,value:{title:e,url:t,attach:_}}},Zn=function(e,t,n){var i=t in e?e[t]:n;return!1===i?null:i},Jn=function(e,t){var n=e.toLowerCase(),i=s.grep(t,(function(e){return-1!==e.title.toLowerCase().indexOf(n)}));return 1===i.length&&i[0].title===e?[]:i},Qn=Vt.extend({Statics:{clearHistory:function(){Gn={}}},init:function(t){var n,i,o,r=this,l=window.tinymce?window.tinymce.activeEditor:a.activeEditor,u=l.settings,c=t.filetype;t.spellcheck=!1,(o=u.file_picker_types||u.file_browser_callback_types)&&(o=s.makeMap(o,/[, ]/)),o&&!o[c]||(!(i=u.file_picker_callback)||o&&!o[c]?!(i=u.file_browser_callback)||o&&!o[c]||(n=function(){i(r.getEl("inp").id,r.value(),c,window)}):n=function(){var e=r.fire("beforecall").meta;e=s.extend({filetype:c},e),i.call(l,(function(e,t){r.value(e).fire("change",{meta:t})}),r.value(),e)}),n&&(t.icon="browse",t.onaction=n),r._super(t),r.classes.add("filepicker"),function(t,n,i,o){var r=function(r){var a=function(e,t,n,i){var o,r,a,l,u,c,d={title:"-"},f=function(e){var i=e.hasOwnProperty(n)?e[n]:[],o=J(i,(function(e){return n=e,!X(t,(function(e){return e.url===n}));var n}));return s.map(o,(function(e){return{title:e,value:{title:e,url:e,attach:_}}}))},h=function(e){var n=J(t,(function(t){return t.type===e}));return s.map(n,Xn)};return!1===i.typeahead_urls?[]:"file"===n?(o=[Jn(e,f(Gn)),Jn(e,h("header")),Jn(e,(l=h("anchor"),u=Zn(i,"anchor_top","#top"),c=Zn(i,"anchor_bottom","#bottom"),null!==u&&l.unshift(Yn("<top>",u)),null!==c&&l.push(Yn("<bottom>",c)),l))],r=function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(d,t)},a=[],Z(o,(function(e){a=r(a,e)})),a):Jn(e,f(Gn))}(r,function(t){var n,i=function(t){var n,i,o;return n=t,Y((Sn().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),o=void 0===(i=nn(n))?e.document:i.dom(),Mn(o)?[]:Y(o.querySelectorAll("h1,h2,h3,h4,h5,h6,a:not([href])"),nn)),(function(e){return e.dom()}))}(t);return J((n=i,Y(J(n,$n),qn)).concat(Y(J(i,Hn),Un)),jn)}(i),o,n);t.showAutoComplete(a,r)};t.on("autocomplete",(function(){r(t.value())})),t.on("selectitem",(function(e){var n=e.value;t.value(n.url);var i,r=(i=n.title).raw?i.raw:i;t.fire("change","image"===o?{meta:{alt:r,attach:n.attach}}:{meta:{text:r,attach:n.attach}}),t.focus()})),t.on("click",(function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&r("")})),t.on("PostRender",(function(){t.getRoot().on("submit",(function(e){var n,i,r;e.isDefaultPrevented()||(n=t.value(),r=Gn[i=o],/^https?/.test(n)&&(r?function(e,t){var n=j.call(e,t);return-1===n?k.none():k.some(n)}(r,n).isNone()&&(Gn[i]=r.slice(0,5).concat(n)):Gn[i]=[n]))}))}))}(r,u,l.getBody(),c),function(e,t,n){var i=t.filepicker_validator_handler;i&&e.state.on("change:value",(function(t){var o;0!==(o=t.value).length?i({url:o,type:n},(function(t){var n,i,o,r=(i=(n=t).status,o=n.message,"valid"===i?{status:"ok",message:o}:"unknown"===i||"invalid"===i?{status:"warn",message:o}:{status:"none",message:""});e.statusMessage(r.message),e.statusLevel(r.status)})):e.statusLevel("none")}))}(r,u,c)}}),ei=Pt.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each((function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()}))}}),ti=Pt.extend({recalc:function(e){var t,n,i,o,r,a,s,l,u,c,d,f,h,g,p,m,v,y,b,T,C,E,_,x,I,D,w,O,R,k,S,A,N,M,K,P,L,B=[],F=Math.max,z=Math.min;for(i=e.items().filter(":visible"),o=e.layoutRect(),r=e.paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,u=a.spacing||0,"row-reversed"!==f&&"column-reverse"!==f||(i=i.set(i.toArray().reverse()),f=f.split("-")[0]),"column"===f?(x="y",E="h",_="minH",I="maxH",w="innerH",D="top",O="deltaH",R="contentH",M="left",A="w",k="x",S="innerW",N="minW",K="right",P="deltaW",L="contentW"):(x="x",E="w",_="minW",I="maxW",w="innerW",D="left",O="deltaW",R="contentW",M="top",A="h",k="y",S="innerH",N="minH",K="bottom",P="deltaH",L="contentH"),d=o[w]-r[D]-r[D],C=c=0,t=0,n=i.length;t<n;t++)g=(h=i[t]).layoutRect(),d-=t<n-1?u:0,0<(p=h.settings.flex)&&(c+=p,g[I]&&B.push(h),g.flex=p),d-=g[_],C<(m=r[M]+g[N]+r[K])&&(C=m);if((b={})[_]=d<0?o[_]-d+o[O]:o[w]-d+o[O],b[N]=C+o[P],b[R]=o[w]-d,b[L]=C,b.minW=z(b.minW,o.maxW),b.minH=z(b.minH,o.maxH),b.minW=F(b.minW,o.startMinWidth),b.minH=F(b.minH,o.startMinHeight),!o.autoResize||b.minW===o.minW&&b.minH===o.minH){for(y=d/c,t=0,n=B.length;t<n;t++)(v=(g=(h=B[t]).layoutRect())[I])<(m=g[_]+g.flex*y)?(d-=g[I]-g[_],c-=g.flex,g.flex=0,g.maxFlexSize=v):g.maxFlexSize=0;for(y=d/c,T=r[D],b={},0===c&&("end"===l?T=d+r[D]:"center"===l?(T=Math.round(o[w]/2-(o[w]-d)/2)+r[D])<0&&(T=r[D]):"justify"===l&&(T=r[D],u=Math.floor(d/(i.length-1)))),b[k]=r[M],t=0,n=i.length;t<n;t++)m=(g=(h=i[t]).layoutRect()).maxFlexSize||g[_],"center"===s?b[k]=Math.round(o[S]/2-g[A]/2):"stretch"===s?(b[A]=F(g[N]||0,o[S]-r[M]-r[K]),b[k]=r[M]):"end"===s&&(b[k]=o[S]-g[A]-r.top),0<g.flex&&(m+=g.flex*y),b[E]=m,b[x]=T,h.layoutRect(b),h.recalc&&h.recalc(),T+=m+u}else if(b.w=b.minW,b.h=b.minH,e.layoutRect(b),this.recalc(e),null===e._lastRect){var H=e.parent();H&&(H._lastRect=null,H.recalc())}}}),ni=Kt.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each((function(e){e.recalc&&e.recalc()}))},isNative:function(){return!0}}),ii=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},oi=function(e,t,n){var i=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,i):e.on("init",(function(){e.formatter.formatChanged(t,i)}))},ri=function(e,t){return function(n){oi(e,t,(function(e){n.control.active(e)}))}},ai=function(e){return e?e.split(",")[0]:""},si=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",(function(i){var o,r,a,l,u=e.queryCommandValue("FontName"),c=(o=t,l=(r=u)?r.toLowerCase():"",s.each(o,(function(e){e.value.toLowerCase()===l&&(a=e.value)})),s.each(o,(function(e){a||ai(e.value).toLowerCase()!==ai(l).toLowerCase()||(a=e.value)})),a);n.value(c||null),!c&&u&&n.text(ai(u))}))}},li=function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,i=Math.pow(10,t||0),Math.round(n*i)/i+"pt"):e;var n,i},ui=function(e,t,n){var i;return s.each(e,(function(e){e.value===n?i=n:e.value===t&&(i=t)})),i},ci=function(e,t){var n=t.length;return s.each(t,(function(t){t.menu&&(t.hidden=0===ci(e,t.menu));var i=t.format;i&&(t.hidden=!e.formatter.canApply(i)),t.hidden&&n--})),n},di=function(e,t){var n=t.items().length;return t.items().each((function(t){t.menu&&t.visible(0<di(e,t.menu)),!t.menu&&t.settings.menu&&t.visible(0<ci(e,t.settings.menu));var i=t.settings.format;i&&t.visible(e.formatter.canApply(i)),t.visible()||n--})),n},fi=function(e,t){var n,i;if("string"==typeof t)i=t.split(" ");else if(s.isArray(t))return function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!$(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);G.apply(t,e[n])}return t}(s.map(t,(function(t){return fi(e,t)})));return n=s.grep(i,(function(t){return"|"===t||t in e.menuItems})),s.map(n,(function(t){return"|"===t?{text:"-"}:e.menuItems[t]}))},hi=function(e){return e&&"-"===e.text},gi=function(e,t){return function(){var n=this,i=function(){return!!e.undoManager&&e.undoManager["redo"===t?"hasRedo":"hasUndo"]()};n.disabled(!i()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(){n.disabled(e.readonly||!i())}))}},pi={setup:function(t){var n;t.rtl&&(et.rtl=!0),t.on("mousedown progressstate",(function(){bt.hideAll()})),(n=t).settings.ui_container&&(le.container=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),Mn(r)?k.none():k.from(r.querySelector(i)).map(nn);var i,o,r}(nn(e.document.body),n.settings.ui_container).fold(x(null),(function(e){return e.dom()}))),_t.tooltips=!le.iOS,et.translate=function(e){return a.translate(e)},function(e){var t,n,i=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:(t=e,n=i,s.map(n,(function(e){return{text:e[0],onclick:ii(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})))}),e.addButton("formatselect",function(e,t){return function(){var n,i,o=[];return s.each(t,(function(t){o.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})})),{type:"listbox",text:t[0][0],values:o,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();ii(e,n)()}},onPostRender:(n=e,i=o,function(){var e=this;n.on("nodeChange",(function(t){var o=n.formatter,r=null;s.each(t.parents,(function(e){if(s.each(i,(function(t){if(o.matchNode(e,t.value)&&(r=t.value),r)return!1})),r)return!1})),e.value(r)}))})}}}(e,i))}(t),function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n="alignleft",i=[{text:"Left",icon:"alignleft",onclick:ii(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:ii(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:ii(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:ii(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:i}),e.addButton("align",{type:"menubutton",icon:n,menu:i,onShowMenu:function(n){var i=n.control.menu;s.each(t,(function(t,n){i.items().eq(n).each((function(n){return n.active(e.formatter.match(t))}))}))},onPostRender:function(i){var o=i.control;s.each(t,(function(t,i){oi(e,t,(function(e){o.icon(n),e&&o.icon(t)}))}))}}),s.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},(function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:ri(e,n)})}))}(t),function(e){var t;(function(e){var t,n,i;t=e,s.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:ri(t,n),onclick:ii(t,n)})})),n=e,s.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},(function(e,t){n.addButton(t,{tooltip:e[0],cmd:e[1]})})),i=e,s.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},(function(e,t){i.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:ri(i,t)})}))})(e),t=e,s.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},(function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})})),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:ii(t,"code")})}(t),function(e){var t,n;(t=e).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:gi(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:gi(t,"redo"),cmd:"redo"}),(n=e).addButton("undo",{tooltip:"Undo",onPostRender:gi(n,"undo"),cmd:"undo"}),n.addButton("redo",{tooltip:"Redo",onPostRender:gi(n,"redo"),cmd:"redo"})}(t),function(e){!function(e){e.addButton("fontsizeselect",(function(){var t,n,i=s.map((e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt").split(" "),(function(e){var t=e,n=e,i=e.split("=");return 1<i.length&&(t=i[0],n=i[1]),{text:t,value:n}}));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:i,fixedWidth:!0,onPostRender:(t=e,n=i,function(){var e=this;t.on("init nodeChange",(function(i){var o,r,a,s;if(o=t.queryCommandValue("FontSize"))for(a=3;!s&&0<=a;a--)r=li(o,a),s=ui(n,r,o);e.value(s||null),s||e.text(r)}))}),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}))}(e)}(t),function(e){!function(e){e.addButton("fontselect",(function(){var t,n=(t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),s.map(t,(function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:si(e,n),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}))}(e)}(t),function(e){var t,n,i,o,r,a,l=(n=0,i=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],r=function(e){var t=[];if(e)return s.each(e,(function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=r(e.items);else{var a=e.format||"custom"+n++;e.format||(e.name=a,i.push(e)),o.format=a,o.cmd=e.cmd}t.push(o)})),t},(t=e).on("init",(function(){s.each(i,(function(e){t.formatter.register(e.name,e)}))})),{type:"menu",items:r(t.settings.style_formats_merge?t.settings.style_formats?o.concat(t.settings.style_formats):o:t.settings.style_formats||o),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",(function(){var n,i;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(i=e.settings.cmd)&&e.active(t.queryCommandState(i))}))},onclick:function(){this.settings.format&&ii(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}});e.addMenuItem("formats",{text:"Formats",menu:l}),(a=e).addButton("styleselect",{type:"menubutton",text:"Formats",menu:l,onShowMenu:function(){a.settings.style_formats_autohide&&di(a,this.menu)}})}(t),function(e){var t,n;(t=e).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(n=t,function(){var e=this;n.on("VisualAid",(function(t){e.active(t.hasVisual)})),e.active(n.hasVisual)}),cmd:"mceToggleVisualAid"})}(t),function(e){var t;(t=e).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(function(e){var t,n,i=e.settings.insert_button_items;return function(e){var t=J(e,(function(t,n){return!hi(t)||!hi(e[n-1])}));return J(t,(function(e,n){return!hi(e)||0<n&&n<t.length-1}))}(i?fi(e,i):(t=[{text:"-"}],n=s.grep(e.menuItems,(function(e){return"insert"===e.context})),s.each(n,(function(e){"before"===e.separator&&t.push({text:"|"}),e.prependToContext?t.unshift(e):t.push(e),"after"===e.separator&&t.push({text:"|"})})),t))}(t)),this.menu.renderNew()}})}(t)}},mi=Pt.extend({recalc:function(e){var t,n,i,o,r,a,s,l,u,c,d,f,h,g,p,m,v,y,b,T,C,E,_,x,I,D,w,O,R=[],k=[];t=e.settings,o=e.items().filter(":visible"),r=e.layoutRect(),i=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/i),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,T=t.alignH||t.align,C=t.alignV||t.align,m=e.paddingBox,O="reverseRows"in t?t.reverseRows:e.isRtl(),T&&"string"==typeof T&&(T=[T]),C&&"string"==typeof C&&(C=[C]);for(d=0;d<i;d++)R.push(0);for(f=0;f<n;f++)k.push(0);for(f=0;f<n;f++)for(d=0;d<i&&(c=o[f*i+d]);d++)x=(u=c.layoutRect()).minW,I=u.minH,R[d]=x>R[d]?x:R[d],k[f]=I>k[f]?I:k[f];for(D=r.innerW-m.left-m.right,d=E=0;d<i;d++)E+=R[d]+(0<d?y:0),D-=(0<d?y:0)+R[d];for(w=r.innerH-m.top-m.bottom,f=_=0;f<n;f++)_+=k[f]+(0<f?b:0),w-=(0<f?b:0)+k[f];if(_+=m.top+m.bottom,(l={}).minW=(E+=m.left+m.right)+(r.w-r.innerW),l.minH=_+(r.h-r.innerH),l.contentW=l.minW-r.deltaW,l.contentH=l.minH-r.deltaH,l.minW=Math.min(l.minW,r.maxW),l.minH=Math.min(l.minH,r.maxH),l.minW=Math.max(l.minW,r.startMinWidth),l.minH=Math.max(l.minH,r.startMinHeight),!r.autoResize||l.minW===r.minW&&l.minH===r.minH){var S;r.autoResize&&((l=e.layoutRect(l)).contentW=l.minW-r.deltaW,l.contentH=l.minH-r.deltaH),S="start"===t.packV?0:0<w?Math.floor(w/n):0;var A=0,N=t.flexWidths;if(N)for(d=0;d<N.length;d++)A+=N[d];else A=i;var M=D/A;for(d=0;d<i;d++)R[d]+=N?N[d]*M:M;for(g=m.top,f=0;f<n;f++){for(h=m.left,s=k[f]+S,d=0;d<i&&(c=o[O?f*i+i-1-d:f*i+d]);d++)p=c.settings,u=c.layoutRect(),a=Math.max(R[d],u.startMinWidth),u.x=h,u.y=g,"center"===(v=p.alignH||(T?T[d]||T[0]:null))?u.x=h+a/2-u.w/2:"right"===v?u.x=h+a-u.w:"stretch"===v&&(u.w=a),"center"===(v=p.alignV||(C?C[d]||C[0]:null))?u.y=g+s/2-u.h/2:"bottom"===v?u.y=g+s-u.h:"stretch"===v&&(u.h=s),c.layoutRect(u),h+=a+y,c.recalc&&c.recalc();g+=s+b}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var K=e.parent();K&&(K._lastRect=null,K.recalc())}}}),vi=_t.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,t&&t()):E.setTimeout((function(){n.html(e)})),this}}),yi=_t.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e.state.on("change:help",(function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),bi=_t.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(ye.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,ye.getSize(e.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,i=n.settings.forId,o=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!i&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(i=e._id),i?'<label id="'+n._id+'" class="'+n.classes+'"'+(i?' for="'+i+'"':"")+">"+o+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+o+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),Ti=ot.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each((function(e){e.classes.add("toolbar-item")})),this._super()}}),Ci=Ti.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Ei=Lt.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),n.menu=t.renderTo?t.parent(n).show().renderTo():p.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",(function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()})),n.menu.on("show hide",(function(e){"hide"===e.type&&e.control.parent()===n&&n.classes.remove("opened-under"),e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)})).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var i=n.menu.layoutRect(),o=n.$el.offset().top+n.layoutRect().h;o>i.y&&o<i.y+i.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var t,n=this,i=n._id,o=n.classPrefix,r=n.settings.icon,a=n.state.get("text"),s="";return(t=n.settings.image)?(r="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a&&(n.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+n.encode(a)+"</span>"),r=n.settings.icon?o+"ico "+o+"i-"+r:"",n.aria("role",n.parent()instanceof Ci?"menuitem":"button"),'<div id="'+i+'" class="'+n.classes+'" tabindex="-1" aria-labelledby="'+i+'"><button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+s+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",(function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())})),e.on("mouseenter",(function(t){var n,i=t.control,o=e.parent();i&&o&&i instanceof Ei&&i.parent()===o&&(o.items().filter("MenuButton").each((function(e){e.hideMenu&&e!==i&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())})),n&&(i.focus(),i.showMenu()))})),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",(function(){e.menu&&e.menu.remove(),e.menu=null})),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),_i=bt.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=s.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==le.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,t=this;function n(){t.throbber&&(t.throbber.hide(),t.throbber=null)}t.settings.itemsFactory&&(t.throbber||(t.throbber=new Ct(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,(function(){t.items().remove(),t.fire("loading")})),t.on("hide close",n)),t.requestTime=e=(new Date).getTime(),t.settings.itemsFactory((function(i){0!==i.length?t.requestTime===e&&(t.getEl().style.width="",t.getEl("body").style.width="",n(),t.items().remove(),t.getEl("body").innerHTML="",t.add(i),t.renderNew(),t.fire("loaded")):t.hide()})))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each((function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return!(e._hasIcons=!0)})),e.settings.itemsFactory&&e.on("postrender",(function(){e.settings.itemsFactory&&e.load()})),e.on("show hide",(function(t){t.control===e&&("show"===t.type?E.setTimeout((function(){e.classes.add("in")}),0):e.classes.remove("in"))})),e._super()}}),xi=Ei.extend({init:function(e){var t,n,i,o,r=this;r._super(e),r._values=t=(e=r.settings).values,t&&(void 0!==e.value&&function t(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||e.value===o[a].value)return i=i||o[a].text,r.state.set("value",o[a].value),!0;if(o[a].menu&&t(o[a].menu))return!0}}(t),!n&&0<t.length&&(i=t[0].text,r.state.set("value",t[0].value)),r.state.set("menu",t)),r.state.set("text",e.text||i),r.classes.add("listbox"),r.on("select",(function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):r.value(t.control.value()),o=n}))},value:function(e){return 0===arguments.length?this.state.get("value"):(void 0===e||(this.settings.values&&!function t(n){return X(n,(function(n){return n.menu?t(n.menu):n.value===e}))}(this.settings.values)?null===e&&this.state.set("value",null):this.state.set("value",e)),this)},bindStates:function(){var e=this;return e.on("show",(function(t){var n,i;n=t.control,i=e.value(),n instanceof _i&&n.items().each((function(e){e.hasMenus()||e.active(e.value()===i)}))})),e.state.on("change:value",(function(t){var n=function e(t,n){var i;if(t)for(var o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(i=e(t[o].menu,n)))return i}}(e.state.get("menu"),t.value);e.text(n?n.text:e.settings.text)})),e._super()}}),Ii=_t.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",(function(e){e.preventDefault()})),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,i=t.parent();if(i.items().each((function(e){e!==t&&e.hideMenu()})),n.menu){(e=t.menu)?e.show():((e=n.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",i.settings.itemDefaults&&(e.itemDefaults=i.settings.itemDefaults),(e=t.menu=p.create(e).parent(t).renderTo()).reflow(),e.on("cancel",(function(n){n.stopPropagation(),t.focus(),e.hide()})),e.on("show hide",(function(e){e.control.items&&e.control.items().each((function(e){e.active(e.settings.selected)}))})).fire("show"),e.on("hide",(function(n){n.control===e&&t.classes.remove("selected")})),e.submenu=!0),e._parentMenu=i,e.classes.add("menu-sub");var o=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),o),o="menu-sub-"+(e.rel=o),e.classes.remove(e._lastRel).add(o),e._lastRel=o,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e,t=this,n=t._id,i=t.settings,o=t.classPrefix,r=t.state.get("text"),a=t.settings.icon,s="",l=i.shortcut,u=t.encode(i.url);function c(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(e){var t=i.match||"";return t?e.replace(new RegExp(c(t),"gi"),(function(e){return"!mce~match["+e+"]mce~match!"})):e}function f(e){return e.replace(new RegExp(c("!mce~match["),"g"),"<b>").replace(new RegExp(c("]mce~match!"),"g"),"</b>")}return a&&t.parent().classes.add("menu-has-icons"),i.image&&(s=" style=\"background-image: url('"+i.image+"')\""),l&&(l=function(e){var t,n,i;for(i=le.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=i[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(l)),a=o+"ico "+o+"i-"+(t.settings.icon||"none"),e="-"!==r?'<i class="'+a+'"'+s+"></i> ":"",r=f(t.encode(d(r))),u=f(t.encode(d(u))),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1">'+e+("-"!==r?'<span id="'+n+'-text" class="'+o+'text">'+r+"</span>":"")+(l?'<div id="'+n+'-shortcut" class="'+o+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+o+'caret"></div>':"")+(u?'<div class="'+o+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&(i.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",(function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),E.requestAnimationFrame((function(){e.parent().hideAll()}))))})),e._super(),e},hover:function(){return this.parent().items().each((function(e){e.classes.remove("selected")})),this.classes.toggle("selected",!0),this},active:function(e){return function(e,t){var n=e._textStyle;if(n){var i=e.getEl("text");i.setAttribute("style",n),t&&(i.style.color="",i.style.backgroundColor="")}}(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Di=zt.extend({Defaults:{classes:"radio",role:"radio"}}),wi=_t.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new at(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Oi(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var Ri=_t.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))}))},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=Oi(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",(function(t){e.getEl().innerHTML=Oi(t.value)})),e._super()}});function ki(e,t,n){return e<t&&(e=t),n<e&&(e=n),e}function Si(e,t,n){e.setAttribute("aria-"+t,n)}function Ai(e,t){var n,i,o,r,a;"v"===e.settings.orientation?(o="top",i="height",n="h"):(o="left",i="width",n="w"),a=e.getEl("handle"),r=((e.layoutRect()[n]||100)-ye.getSize(a)[i])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style[o]=r,a.style.height=e.layoutRect().h+"px",Si(a,"valuenow",t),Si(a,"valuetext",""+e.settings.previewFilter(t)),Si(a,"valuemin",e._minValue),Si(a,"valuemax",e._maxValue)}var Ni=_t.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=U(e.minValue)?e.minValue:0,t._maxValue=U(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this._id;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+this.classPrefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,i,o,r,a,s,l,u,c,d,f,h,g=this;e=g._minValue,t=g._maxValue,"v"===g.settings.orientation?(n="screenY",i="top",o="height",r="h"):(n="screenX",i="left",o="width",r="w"),g._super(),function(e,t){function n(n){var i,o,r,a;i=ki(i=(((i=g.value())+(a=o=e))/((r=t)-a)+.05*n)*(r-o)-o,e,t),g.value(i),g.fire("dragstart",{value:i}),g.fire("drag",{value:i}),g.fire("dragend",{value:i})}g.on("keydown",(function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}}))}(e,t),a=e,s=t,l=g.getEl("handle"),g._dragHelper=new at(g._id,{handle:g._id+"-handle",start:function(e){u=e[n],c=parseInt(g.getEl("handle").style[i],10),d=(g.layoutRect()[r]||100)-ye.getSize(l)[o],g.fire("dragstart",{value:h})},drag:function(e){f=ki(c+(e[n]-u),0,d),l.style[i]=f+"px",g.value(h=a+f/d*(s-a)),g.tooltip().text(""+g.settings.previewFilter(h)).show().moveRel(l,"bc tc"),g.fire("drag",{value:h})},stop:function(){g.tooltip().hide(),g.fire("dragend",{value:h})}})},repaint:function(){this._super(),Ai(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){Ai(e,t.value)})),e._super()}}),Mi=_t.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),Ki=Ei.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t=this.getEl(),n=this.layoutRect();return this._super(),e=t.lastChild,me(t.firstChild).css({width:n.w-ye.getSize(e).width,height:n.h-2}),me(e).css({height:n.h-2}),this},activeMenu:function(e){me(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var t,n=this,i=n._id,o=n.classPrefix,r=n.state.get("icon"),a=n.state.get("text"),s=n.settings,l="";return(t=s.image)?(r="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r=s.icon?o+"ico "+o+"i-"+r:"",a&&(n.classes.add("btn-has-text"),l='<span class="'+o+'txt">'+n.encode(a)+"</span>"),'<div id="'+i+'" class="'+n.classes+'" role="button"'+("boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"")+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+l+'</button><button type="button" class="'+o+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(r?" ":"")+n._menuBtnText:"")+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this.settings.onclick;return this.on("click",(function(t){var n=t.target;if(t.control===this)for(;n;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}})),delete this.settings.onclick,this._super()}}),Pi=ni.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Li=ft.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),me(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(t=this.getEl("t"+e)).setAttribute("aria-selected","true"),me(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each((function(t,n){e!==n&&t.hide()}))},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each((function(t,o){var r=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",r),n+='<div id="'+r+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"})),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",(function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]===t.target&&e.activateTab(i)}))},initLayoutRect:function(){var e,t,n,i=this;t=(t=ye.getSize(i.getEl("head")).width)<0?0:t,n=0,i.items().each((function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)})),i.items().each((function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})}));var o=ye.getSize(i.getEl("head")).height;return i.settings.minWidth=t,i.settings.minHeight=n+o,(e=i._super()).deltaH+=o,e.innerH=e.h-e.deltaH,e}}),Bi=_t.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){t.state.set("value",e.target.value)})))},repaint:function(){var t,n,i,o,r,a=this,s=0;t=a.getEl().style,n=a._layoutRect,r=a._lastRepaintRect||{};var l=e.document;return!a.settings.multiline&&l.all&&(!l.documentMode||l.documentMode<=8)&&(t.lineHeight=n.h-s+"px"),o=(i=a.borderBox).left+i.right+8,s=i.top+i.bottom+(a.settings.multiline?8:0),n.x!==r.x&&(t.left=n.x+"px",r.x=n.x),n.y!==r.y&&(t.top=n.y+"px",r.y=n.y),n.w!==r.w&&(t.width=n.w-o+"px",r.w=n.w),n.h!==r.h&&(t.height=n.h-s+"px",r.h=n.h),a._lastRepaintRect=r,a.fire("repaint",{},!1),a},renderHtml:function(){var e,t,n=this,i=n.settings;return e={id:n._id,hidefocus:"1"},s.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],(function(t){e[t]=i[t]})),n.disabled()&&(e.disabled="disabled"),i.subtype&&(e.type=i.subtype),(t=ye.create(i.multiline?"textarea":"input",e)).value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)}))},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl().disabled=t.value})),e._super()},remove:function(){this.$el.off(),this._super()}}),Fi=function(){return{Selector:Le,Collection:ze,ReflowQueue:Ge,Control:et,Factory:p,KeyboardNavigation:nt,Container:ot,DragHelper:at,Scrollable:dt,Panel:ft,Movable:xe,Resizable:ht,FloatPanel:bt,Window:kt,MessageBox:Mt,Tooltip:Et,Widget:_t,Progress:xt,Notification:Dt,Layout:Kt,AbsoluteLayout:Pt,Button:Lt,ButtonGroup:Ft,Checkbox:zt,ComboBox:Vt,ColorBox:Wt,PanelButton:$t,ColorButton:Ut,ColorPicker:Gt,Path:Yt,ElementPath:Zt,FormItem:Jt,Form:Qt,FieldSet:en,FilePicker:Qn,FitLayout:ei,FlexLayout:ti,FlowLayout:ni,FormatControls:pi,GridLayout:mi,Iframe:vi,InfoBox:yi,Label:bi,Toolbar:Ti,MenuBar:Ci,MenuButton:Ei,MenuItem:Ii,Throbber:Ct,Menu:_i,ListBox:xi,Radio:Di,ResizeHandle:wi,SelectBox:Ri,Slider:Ni,Spacer:Mi,SplitButton:Ki,StackLayout:Pi,TabPanel:Li,TextBox:Bi,DropZone:Xt,BrowseButton:Bt}};s.each(Fi(),(function(e,t){p.add(t,e)})),function(e){e.ui?s.each(Fi(),(function(t,n){e.ui[n]=t})):e.ui=Fi()}(window.tinymce?window.tinymce:{}),r.add("modern",(function(t){return pi.setup(t),function(t){return{renderUI:function(e){return function(e,t,n){var i=function(e){var t=e.settings,n=t.skin,i=t.skin_url;if(!1!==n){var o=n||"lightgray";i=i?e.documentBaseURI.toAbsolute(i):a.baseURL+"/skins/"+o}return i}(e);return i&&(n.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")),function(e,t){var n;e.on("ProgressState",(function(e){n=n||new Ct(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()}))}(e,t),e.getParam("inline",!1,"boolean")?function(e,t,n){var i,o,r=g.DOM,a=e.getParam("fixed_toolbar_container");a&&(o=r.select(a)[0]);var s=function(){if(i&&i.moveRel&&i.visible()&&!i._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),o=0,a=0;if(t){var s=r.getPos(n),l=r.getPos(t);o=Math.max(0,l.x-s.x),a=Math.max(0,l.y-s.y)}i.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,a)}},u=function(){i&&(i.show(),s(),r.addClass(e.getBody(),"mce-edit-focus"))},d=function(){i&&(i.hide(),bt.hideAll(),r.removeClass(e.getBody(),"mce-edit-focus"))},h=function(){var n,r;i?i.visible()||u():(i=t.panel=p.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:(n=o,r=e,!(!n||r.settings.ui_container)),border:1,items:[!1===l(e)?null:{type:"menubar",border:"0 0 1 0",items:ie(e)},L(e,c(e))]}),N(e,i),y(e),o?i.renderTo(o).reflow():i.renderTo().reflow(),T(e,i),u(),V(e),e.on("nodeChange",s),e.on("ResizeWindow",s),e.on("activate",u),e.on("deactivate",d),e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",(function(){!1===f(e)&&n.skinUiCss?r.styleSheetLoader.load(n.skinUiCss,h,h):h()})),e.on("blur hide",d),e.on("remove",(function(){i&&(i.remove(),i=null)})),!1===f(e)&&n.skinUiCss?r.styleSheetLoader.load(n.skinUiCss,he(e)):he(e)(),{}}(e,t,n):function(e,t,n){var i,o,r,a,s;if(!1===f(e)&&n.skinUiCss?ge.styleSheetLoader.load(n.skinUiCss,he(e)):he(e)(),i=t.panel=p.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===l(e)?null:{type:"menubar",border:"0 0 1 0",items:ie(e)},L(e,c(e))]},de(e)?(a=e,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[pe("0"),fe(a)]}):pe("1 0 0 0")]}),N(e,i),"none"!==h(e)&&(o={type:"resizehandle",direction:h(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;r={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===h(e)?se(e,r.width+t.deltaX,r.height+t.deltaY):se(e,null,r.height+t.deltaY)}}),e.getParam("statusbar",!0,"boolean")){var u=m.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),d=e.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+u}:null;i.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,d]})}return y(e),e.on("SwitchMode",(s=i,function(e){s.find("*").disabled("readonly"===e.mode)})),i.renderBefore(n.targetNode).reflow(),e.getParam("readonly",!1,"boolean")&&e.setMode("readonly"),n.width&&ge.setStyle(i.getEl(),"width",n.width),e.on("remove",(function(){i.remove(),i=null})),T(e,i),V(e),{iframeContainer:i.find("#iframe")[0].getEl(),editorContainer:i.getEl()}}(e,t,n)}(t,this,e)},resizeTo:function(e,n){return se(t,e,n)},resizeBy:function(e,n){return function(e,t,n){var i=e.getContentAreaContainer();ae(e,i.clientWidth+t,i.clientHeight+n)}(t,e,n)},getNotificationManagerImpl:function(){return function(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(n,i){var o,r=s.extend(n,{maxWidth:(o=t(e),ye.getSize(o).width)}),a=new Dt(r);return 0<(a.args=r).timeout&&(a.timer=setTimeout((function(){a.close(),i()}),r.timeout)),a.on("close",(function(){i()})),a.renderTo(),a},close:function(e){e.close()},reposition:function(n){Z(n,(function(e){e.moveTo(0,0)})),function(n){if(0<n.length){var i=n.slice(0,1)[0],o=t(e);i.moveRel(o,"tc-tc"),Z(n,(function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")}))}}(n)},getArgs:function(e){return e.args}}}(t)},getWindowManagerImpl:function(){return{open:function(t,n,i){var o;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),(o=new kt(t)).on("close",(function(){i(o)})),t.data&&o.on("postRender",(function(){this.find("*").each((function(e){var n=e.name();n in t.data&&e.value(t.data[n])}))})),o.features=t||{},o.params=n||{},o=o.renderTo(e.document.body).reflow()},alert:function(e,t,n){var i;return(i=Mt.alert(e,(function(){t()}))).on("close",(function(){n(i)})),i},confirm:function(e,t,n){var i;return(i=Mt.confirm(e,(function(e){t(e)}))).on("close",(function(){n(i)})),i},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}}(t)}))}(window),function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),i=function(e){return e.target_list},o=function(e){return e.rel_list},r=function(e){return e.link_class_list},a=i,s=function(e){return!1!==i(e)},l=o,u=function(e){return void 0!==o(e)},c=r,d=function(e){return void 0!==r(e)},f=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=tinymce.util.Tools.resolve("tinymce.Env"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),m=function(e,t){var n,i=["noopener"],o=e?e.split(/\s+/):[],r=function(e){return e.filter((function(e){return-1===p.inArray(i,e)}))};return(o=t?(n=r(n=o)).length?n.concat(i):i:r(o)).length?p.trim(o.sort().join(" ")):null},v=function(e,t){return t=t||e.selection.getNode(),b(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},y=function(e){return e&&"A"===e.nodeName&&e.href},b=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},T=function(e,t){return function(n){e.undoManager.transact((function(){var i=e.selection.getNode(),o=v(e,i),r={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};u(e.settings)||!1!==f(e.settings)||(r.rel=m(r.rel,"_blank"===r.target)),n.href===t.href&&(t.attach(),t={}),o?(e.focus(),n.hasOwnProperty("text")&&("innerText"in o?o.innerText=n.text:o.textContent=n.text),e.dom.setAttribs(o,r),e.selection.select(o),e.undoManager.add()):b(i)?function(e,t,n){var i,o;(o=e.dom.select("img",t)[0])&&(i=e.dom.create("a",n),o.parentNode.insertBefore(i,o),i.appendChild(o))}(e,i,r):n.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",r,e.dom.encode(n.text))):e.execCommand("mceInsertLink",!1,r)}))}},C=function(e){return function(){e.undoManager.transact((function(){var t=e.selection.getNode();b(t)?function(e,t){var n,i;(i=e.dom.select("img",t)[0])&&(n=e.dom.getParents(i,"a[href]",t)[0])&&(n.parentNode.insertBefore(i,n),e.dom.remove(n))}(e,t):e.execCommand("unlink")}))}},E=y,_=function(e){return 0<p.grep(e,y).length},x=v,I=m,D=tinymce.util.Tools.resolve("tinymce.util.Delay"),w=tinymce.util.Tools.resolve("tinymce.util.XHR"),O={},R=function(e,t,n){var i=function(e,n){return n=n||[],p.each(e,(function(e){var o={text:e.text||e.title};e.menu?o.menu=i(e.menu):(o.value=e.value,t&&t(o)),n.push(o)})),n};return i(e,n||[])},k=function(e,t,n){var i=e.selection.getRng();D.setEditorTimeout(e,(function(){e.windowManager.confirm(t,(function(t){e.selection.setRng(i),n(t)}))}))},S=function(e,t){var n,i,o,r,h,g,m,v,y,b,E,_={},D=e.dom,w=function(e){var t=o.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),o.find("#href").value(e.control.value())},S=function(){i||!r||_.text||this.parent().parent().find("#text")[0].value(this.value())};r=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))}(e.selection.getContent()),n=x(e),_.text=i=function(e,t){return(t?t.innerText||t.textContent:e.getContent({format:"text"})).replace(/\uFEFF/g,"")}(e.selection,n),_.href=n?D.getAttrib(n,"href"):"",n?_.target=D.getAttrib(n,"target"):function(e){return"string"==typeof e.default_link_target}(e.settings)&&(_.target=function(e){return e.default_link_target}(e.settings)),(E=D.getAttrib(n,"rel"))&&(_.rel=E),(E=D.getAttrib(n,"class"))&&(_.class=E),(E=D.getAttrib(n,"title"))&&(_.title=E),r&&(h={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){_.text=this.value()}}),t&&(g={type:"listbox",label:"Link list",values:R(t,(function(t){t.value=e.convertURL(t.value||t.url,"href")}),[{text:"None",value:""}]),onselect:w,value:e.convertURL(_.href,"href"),onPostRender:function(){g=this}}),s(e.settings)&&(void 0===a(e.settings)&&function(e,t){e.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]}(e),v={name:"target",type:"listbox",label:"Target",values:R(a(e.settings))}),u(e.settings)&&(m={name:"rel",type:"listbox",label:"Rel",values:R(l(e.settings),(function(t){!1===f(e.settings)&&(t.value=I(t.value,"_blank"===_.target))}))}),d(e.settings)&&(y={name:"class",type:"listbox",label:"Class",values:R(c(e.settings),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})}))}),function(e){return!1!==e.link_title}(e.settings)&&(b={name:"title",type:"textbox",label:"Title",value:_.title}),o=e.windowManager.open({title:"Insert link",data:_,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var n=t.meta||{};g&&g.value(e.convertURL(this.value(),"href")),p.each(t.meta,(function(e,t){var n=o.find("#"+t);"text"===t?0===i.length&&(n.value(e),_.text=e):n.value(e)})),n.attach&&(O={href:this.value(),attach:n.attach}),n.text||S.call(this)},onkeyup:S,onpaste:S,onbeforecall:function(e){e.meta=o.toJSON()}},h,b,function(t){var n=[];if(p.each(e.dom.select("a:not([href])"),(function(e){var i=e.name||e.id;i&&n.push({text:i,value:"#"+i,selected:-1!==t.indexOf("#"+i)})})),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:w}}(_.href),g,m,v,y],onSubmit:function(t){var n=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets}(e.settings),o=T(e,O),a=C(e),s=p.extend({},_,t.data),l=s.href;l?(r&&s.text!==i||delete s.text,0<l.indexOf("@")&&-1===l.indexOf("//")&&-1===l.indexOf("mailto:")?k(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",(function(e){e&&(s.href="mailto:"+l),o(s)})):!0===n&&!/^\w+:/i.test(l)||!1===n&&/^\s*www[\.|\d\.]/i.test(l)?k(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",(function(e){e&&(s.href="http://"+l),o(s)})):o(s)):a()}})},A=function(e,t){return e.dom.getParent(t,"a[href]")},N=function(e){return A(e,e.selection.getStart())},M=function(t,n){if(n){var i=(r=n).getAttribute("data-mce-href")||r.getAttribute("href");if(/^#/.test(i)){var o=t.$(i);o.length&&t.selection.scrollIntoView(o[0],!0)}else!function(t){if(!g.ie||10<g.ie){var n=e.document.createElement("a");n.target="_blank",n.href=t,n.rel="noreferrer noopener";var i=e.document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,e.window,0,0,0,0,0,!1,!1,!1,!1,0,null),s=i,e.document.body.appendChild(a=n),a.dispatchEvent(s),e.document.body.removeChild(a)}else{var o=e.window.open("","_blank");if(o){o.opener=null;var r=o.document;r.open(),r.write('<meta http-equiv="refresh" content="0; url='+h.DOM.encode(t)+'">'),r.close()}}var a,s}(n.href)}var r},K=function(e){return function(){!function(e){var t,n,i;n=S,"string"==typeof(i=function(e){return e.link_list}((t=e).settings))?w.send({url:i,success:function(e){n(t,JSON.parse(e))}}):"function"==typeof i?i((function(e){n(t,e)})):n(t,i)}(e)}},P=function(e){return function(){M(e,N(e))}},L=function(e){return function(){var t=this;e.on("nodechange",(function(n){t.active(!e.readonly&&!!x(e,n.element))}))}},B=function(e){return function(){var t=this,n=function(e){_(e.parents)?t.show():t.hide()};_(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",(function(){e.off("nodechange",n)}))}};t.add("link",(function(e){(function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:K(e),onpostrender:L(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:C(e),onpostrender:L(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:P(e)})})(e),function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:P(e),onPostRender:B(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:K(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:C(e),stateSelector:"a[href]"})}(e),function(e){e.addContextToolbar&&e.addContextToolbar(function(e){return function(t){var n,i,o,r;return!!(function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar}(e.settings)&&(!(r=e.plugins.contextmenu)||!r.isContextMenuVisible())&&E(t)&&3===(o=(i=(n=e.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&0<i.startOffset&&i.startOffset<o.data.length)}}(e),"openlink | link unlink")}(e),function(e){e.on("click",(function(t){var i=A(e,t.target);i&&n.metaKeyPressed(t)&&(t.preventDefault(),M(e,i))})),e.on("keydown",(function(t){var n,i=N(e);i&&13===t.keyCode&&!0===(n=t).altKey&&!1===n.shiftKey&&!1===n.ctrlKey&&!1===n.metaKey&&(t.preventDefault(),M(e,i))}))}(e),function(e){e.addCommand("mceLink",K(e))}(e),function(e){e.addShortcut("Meta+K","",K(e))}(e)}))}(window),function(e){"use strict";var t=function(e){var n=e,i=function(){return n};return{get:i,set:function(e){n=e},clone:function(){return t(i())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(t){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(t.settings.plugins)||!n.get("powerpaste")||(void 0!==e.window.console&&e.window.console.log&&e.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},o=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},r=function(e){return e.getParam("paste_data_images",!1)},a=function(e){return e.getParam("paste_merge_formats",!0)},s=function(e){return e.getParam("paste_retain_style_properties")},l=tinymce.util.Tools.resolve("tinymce.Env"),u=tinymce.util.Tools.resolve("tinymce.util.Delay"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=tinymce.util.Tools.resolve("tinymce.util.VK"),f="x-tinymce/html",h="\x3c!-- "+f+" --\x3e",g=function(e){return h+e},p=function(e){return-1!==e.indexOf(h)},m=function(){return f},v=tinymce.util.Tools.resolve("tinymce.html.Entities"),y=tinymce.util.Tools.resolve("tinymce.html.DomParser"),b=tinymce.util.Tools.resolve("tinymce.html.Serializer"),T=tinymce.util.Tools.resolve("tinymce.html.Node"),C=tinymce.util.Tools.resolve("tinymce.html.Schema");function E(e,t){return c.each(t,(function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])})),e}var _={filter:E,innerText:function(e){var t=C(),n=y({},t),i="",o=t.getShortEndedElements(),r=c.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements();return e=E(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,s=t;if("br"!==n){if("wbr"!==n)if(o[n]&&(i+=" "),r[n])i+=" ";else{if(3===t.type&&(i+=t.value),!t.shortEnded&&(t=t.firstChild))for(;e(t),t=t.next;);a[n]&&s.next&&(i+="\n","p"===n&&(i+="\n"))}}else i+="\n"}(n.parse(e)),i},trimHtml:function(e){return E(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==e.navigator.userAgent.indexOf(" Edge/")}};function x(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),c.each(n,(function(n){if(n.test(e))return!(t=!0)})),t}function I(e,t,n,i){var o,r={},a=e.dom.parseStyle(i);return c.each(a,(function(a,l){switch(l){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(i))&&(n._listLevel=parseInt(o[1],10)),/Ignore/i.test(a)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":l="text-align";break;case"vert-align":l="vertical-align";break;case"font-color":case"mso-foreground":l="color";break;case"mso-background":case"mso-highlight":l="background";break;case"font-weight":case"font-style":return void("normal"!==a&&(r[l]=a));case"mso-element":if(/^(comment|comment-list)$/i.test(a))return void n.remove()}0!==l.indexOf("mso-comment")?0!==l.indexOf("mso-")&&("all"===s(e)||t&&t[l])&&(r[l]=a):n.remove()})),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],n.wrap(new T("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],n.wrap(new T("i",1))),(r=e.dom.serializeStyle(r,n.name))||null}var D,w,O,R,k,S,A=function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},N=function(e,t){return{content:e,cancelled:t}},M=function(e,t){return e.insertContent(t,{merge:a(e),paste:!0}),!0},K=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},P=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!K(t)||(o=t,r=n,(i=e).undoManager.extra((function(){r(i,o)}),(function(){i.execCommand("mceInsertLink",!1,o)})),0));var i,o,r},L=function(e,t,n){return!!function(e){return K(e)&&/.(gif|jpe?g|png)$/.test(e)}(t)&&(o=t,r=n,(i=e).undoManager.extra((function(){r(i,o)}),(function(){i.insertContent('<img src="'+o+'">')})),!0);var i,o,r},B=function(e){return function(){return e}},F=B(!1),z=B(!0),H=function(){return V},V=(D=function(e){return e.isNone()},R={fold:function(e,t){return e()},is:F,isSome:F,isNone:z,getOr:O=function(e){return e},getOrThunk:w=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:B(null),getOrUndefined:B(void 0),or:O,orThunk:w,map:H,each:function(){},bind:H,exists:F,forall:z,filter:H,equals:D,equals_:D,toArray:function(){return[]},toString:B("none()")},Object.freeze&&Object.freeze(R),R),W=function(e){var t=B(e),n=function(){return o},i=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:z,isNone:F,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return W(t(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?o:V},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(F,(function(t){return n(e,t)}))}};return o},$={some:W,none:H,from:function(e){return null==e?V:W(e)}},q=Array.prototype.slice,U=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t(e[o],o);return i},j=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},G=function(e){return"function"===function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)}(Array.from)?Array.from:function(e){return q.call(e)},X={},Y={exports:X};k=X,S=Y,function(e){"object"==typeof k&&void 0!==S?S.exports=e():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,i)}return n[a].exports}for(var r=!1,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i,o,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var u,c=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?c=u.concat(c):f=-1,c.length&&g())}function g(){if(!d){var e=l(h);d=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||d||l(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var i=setTimeout;function o(){}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn((function(){var i=1===t._state?n.onFulfilled:n.onRejected;if(null!==i){var o;try{o=i(t._value)}catch(e){return void l(n.promise,e)}s(n.promise,o)}else(1===t._state?s:l)(n.promise,t._value)}))):t._deferreds.push(n)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void d((i=n,o=t,function(){i.apply(o,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(s){l(e,s)}var i,o}function l(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn((function(){e._handled||r._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,s(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(o){if(n)return;n=!0,l(t,o)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new c(e,t,n)),n},r.all=function(e){var t=Array.prototype.slice.call(e);return new r((function(e,n){if(0===t.length)return e([]);var i=t.length;function r(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,(function(e){r(a,e)}),n)}t[a]=s,0==--i&&e(t)}catch(o){n(o)}}for(var a=0;a<t.length;a++)r(a,t[a])}))},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r((function(t){t(e)}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)}))},r._immediateFn="function"==typeof e?function(t){e(t)}:function(e){i(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=r:n.Promise||(n.Promise=r)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,i){var o=e("process/browser.js").nextTick,r=Function.prototype.apply,a=Array.prototype.slice,s={},l=0;function u(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new u(r.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new u(r.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,i=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,o((function(){s[t]&&(i?e.apply(null,i):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof i?i:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var i=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||i}},{"promise-polyfill":2}]},{},[4])(4)}));var Z=Y.exports.boltExport,J=function(t){var n=$.none(),i=[],o=function(e){r()?a(e):i.push(e)},r=function(){return n.isSome()},a=function(t){n.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return t((function(e){n=$.some(e),function(e){j(e,a)}(i),i=[]})),{get:o,map:function(e){return J((function(t){o((function(n){t(e(n))}))}))},isReady:r}},Q={nu:J,pure:function(e){return J((function(t){t(e)}))}},ee=function(t){e.setTimeout((function(){throw t}),0)},te=function(e){var t=function(t){e().then(t,ee)};return{map:function(t){return te((function(){return e().then(t)}))},bind:function(t){return te((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return te((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return Q.nu(t)},toCached:function(){var t=null;return te((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},ne=function(e){return te((function(){return new Z(e)}))},ie=function(e,t,n){var i=n||p(t),o=function(e,t,n){var i=A(t);return function(e,t,n,i){var o,r,a,s,l,u=function(e,t,n,i){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:i})}(e,t,n,i),d=function(e,t){var n=y({},e.schema);n.addNodeFilter("meta",(function(e){c.each(e,(function(e){return e.remove()}))}));var i=n.parse(t,{forced_root_block:!1,isRootContent:!0});return b({validate:e.settings.validate},e.schema).serialize(i)}(e,u.content);return e.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?(r=n,a=i,s=(o=e).dom.create("div",{style:"display:none"},d),l=function(e,t,n,i){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:i})}(o,s,r,a),N(l.node.innerHTML,l.isDefaultPrevented())):N(d,u.isDefaultPrevented())}(e,i?function(e,t){return function(e){return e.getParam("paste_enable_default_filters",!0)}(e)?function(e,t){var n,i;(n=s(e))&&(i=c.makeMap(n.split(/[, ]/))),t=_.filter(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var o=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}(e),r=C({valid_elements:o,valid_children:"-li[p]"});c.each(r.elements,(function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}));var a=y({},r);a.addAttributeFilter("style",(function(t){for(var n,o=t.length;o--;)(n=t[o]).attr("style",I(e,i,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()})),a.addAttributeFilter("class",(function(e){for(var t,n,i=e.length;i--;)n=(t=e[i]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)})),a.addNodeFilter("del",(function(e){for(var t=e.length;t--;)e[t].remove()})),a.addNodeFilter("a",(function(e){for(var t,n,i,o=e.length;o--;)if(n=(t=e[o]).attr("href"),i=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||i){if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){t.unwrap();continue}t.attr({href:n,name:i})}else t.unwrap()}));var l=a.parse(t);return function(e){return e.getParam("paste_convert_word_fake_lists",!0)}(e)&&function(e){var t,n,i=1;function o(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)for(;t+=o(e),e=e.next;);return t}function r(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!r(e,t))return!1}while(e=e.next);return!0}function a(e,o,a){var s=e._listLevel||i;s!==i&&(s<i?t&&(t=t.parent.parent):(n=t,t=null)),t&&t.name===o?t.append(e):(n=n||t,t=new T(o,1),1<a&&t.attr("start",""+a),e.wrap(t)),e.name="li",i<s&&n&&n.lastChild.append(t),i=s,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)for(;e(t),t=t.next;);}(e),r(e,/^\u00a0+/),r(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),r(e,/^\u00a0+/)}for(var s=[],l=e.firstChild;null!=l;)if(s.push(l),null!==(l=l.walk()))for(;void 0!==l&&l.parent!==e;)l=l.walk();for(var u=0;u<s.length;u++)if("p"===(e=s[u]).name&&e.firstChild){var c=o(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(c)){a(e,"ul");continue}if(x(c)){var d=/([0-9]+)\./.exec(c),f=1;d&&(f=parseInt(d[1],10)),a(e,"ol",f);continue}if(e._listLevel){a(e,"ul",1);continue}t=null}else n=t,t=null}(l),b({validate:e.settings.validate},r).serialize(l)}(e,t):t}(e,t):t,n,i)}(e,function(e){return e.replace(h,"")}(t),i);!1===o.cancelled&&function(e,t){var n,i;!1===function(e){return e.getParam("smart_paste",!0)}(e)?M(e,t):(n=e,i=t,c.each([P,L,M],(function(e){return!0!==e(n,i,M)})))}(e,o.content)},oe=function(e,t){t=function(e,t,n){return t?function(e,t,n){var i=e.split(/\n\n/),o=function(e,t){var n,i=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&i.push(n+'="'+v.encodeAllRaw(t[n])+'"');i.length&&(o+=" "+i.join(" "))}return o+">"}(t,n),r="</"+t+">",a=c.map(i,(function(e){return e.split(/\n/).join("<br />")}));return 1===a.length?a[0]:c.map(a,(function(e){return o+e+r})).join("")}(e,t,n):function(e){return e.replace(/\r?\n/g,"<br>")}(e)}(t=e.dom.encode(t).replace(/\r\n/g,"\n"),e.settings.forced_root_block,e.settings.forced_root_block_attrs),ie(e,t,!1)},re=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&0<n.length&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var i=0;i<e.types.length;i++){var o=e.types[i];try{t[o]=e.getData(o)}catch(h){t[o]=""}}}return t},ae=function(e,t){return t in e&&0<e[t].length},se=function(e){return ae(e,"text/html")||ae(e,"text/plain")},le=_.createIdGenerator("mceclip"),ue=function(t,n,i){var o,r,a,s,l="paste"===n.type?n.clipboardData:n.dataTransfer;if(t.settings.paste_data_images&&l){var u=(a=(r=l).items?U(G(r.items),(function(e){return e.getAsFile()})):[],s=r.files?G(r.files):[],function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];t(r)&&n.push(r)}return n}(0<a.length?a:s,(function(e){return/^image\/(jpeg|png|gif|bmp)$/.test(e.type)})));if(0<u.length)return n.preventDefault(),(o=u,function(e,t){return function(e,t){return t((function(t){var n=[],i=0;0===e.length?t([]):j(e,(function(o,r){var a;o.get((a=r,function(o){n[a]=o,++i>=e.length&&t(n)}))}))}))}(U(e,(function(e){return ne((function(t){var n=e.getAsFile?e.getAsFile():e,i=new window.FileReader;i.onload=function(){t({blob:n,uri:i.result})},i.readAsDataURL(n)}))})),ne)}(o)).get((function(n){i&&t.selection.setRng(i),j(n,(function(n){!function(t,n){var i,o,r,a,s,l=-1!==(o=(i=n.uri).indexOf(","))?i.substr(o+1):null,u=le(),c=t.settings.images_reuse_filename&&n.blob.name?(r=t,(a=n.blob.name.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?r.dom.encode(a[1]):null):u,d=new e.Image;if(d.src=n.uri,!(s=t.settings).images_dataimg_filter||s.images_dataimg_filter(d)){var f,h=t.editorUpload.blobCache,g=void 0;(f=h.findFirst((function(e){return e.base64()===l})))?g=f:(g=h.create(u,n.blob,l,c),h.add(g)),ie(t,'<img src="'+g.blobUri()+'">',!1)}else ie(t,'<img src="'+n.uri+'">',!1)}(t,n)}))})),!0}return!1},ce=function(e){return d.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},de=function(t){return l.ie&&t.inline?e.document.body:t.getBody()},fe=function(e){return e.dom.get("mcepastebin")},he=function(e,t){return t===e},ge=function(e,t){var n,i=fe(e);return(n=i)&&"mcepastebin"===n.id&&he(t,i.innerHTML)},pe=function(){},me=function(e,t,n,i){!function(e,t,n){if(i=e,!1!==l.iOS||void 0===i||"function"!=typeof i.setData||!0===_.isMsEdge())return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(m(),t),!0}catch(d){return!1}var i}(e.clipboardData,t.html,t.text)?n(t.html,i):(e.preventDefault(),i())},ve=function(e){return function(t,n){var i=g(t),o=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),r=e.dom.create("div",{contenteditable:"true"},i);e.dom.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(r),e.dom.add(e.getBody(),o);var a=e.selection.getRng();r.focus();var s=e.dom.createRng();s.selectNodeContents(r),e.selection.setRng(s),setTimeout((function(){e.selection.setRng(a),o.parentNode.removeChild(o),n()}),0)}},ye=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},be=function(e){return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},Te=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ce=function(e,t){return Te.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},Ee=function(e,t){e.focus(),e.selection.setRng(t)};function _e(e,t){e.on("PastePreProcess",(function(n){n.content=t(e,n.content,n.internal,n.wordContent)}))}function xe(e,t){if(!A(t))return t;var n=[];c.each(e.schema.getBlockElements(),(function(e,t){n.push(t)}));var i=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=_.filter(t,[[i,"$1"]]),_.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function Ie(e,t,n,i){if(i||n)return t;var o,r=function(e){return e.getParam("paste_webkit_styles")}(e);if(!1===function(e){return e.getParam("paste_remove_styles_if_webkit",!0)}(e)||"all"===r)return t;if(r&&(o=r.split(/[, ]/)),o){var a=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,i){var r=a.parseStyle(a.decode(n)),l={};if("none"===o)return t+i;for(var u=0;u<o.length;u++){var c=r[o[u]],d=a.getStyle(s,o[u],!0);/color/.test(o[u])&&(c=a.toHex(c),d=a.toHex(d)),d!==c&&(l[o[u]]=c)}return(l=a.serializeStyle(l,"span"))?t+' style="'+l+'"'+i:t+i}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(e,t,n,i){return t+' style="'+n+'"'+i}))}function De(e,t){e.$("a",t).find("font,u").each((function(t,n){e.dom.remove(n,!0)}))}var we=function(e,t,n){var i=n.control;i.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",(function(e){i.active(e.state)}))};n.add("paste",(function(n){if(!1===i(n)){var a=t(!1),s=t(!1),d=t(function(e){return e.getParam("paste_as_text",!1)}(n)?"text":"html"),f=function(n,i){var o=function(e){var n=t(null),i="%MCEPASTEBIN%";return{create:function(){return o=n,i,a=(t=e).dom,s=t.getBody(),o.set(t.selection.getRng()),r=t.dom.add(de(t),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%"),(l.ie||l.gecko)&&a.setStyle(r,"left","rtl"===a.getStyle(s,"direction",!0)?65535:-65535),a.bind(r,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()})),function(e,t,n){var i;de(i=e)!==i.getBody()&&e.dom.bind(t,"paste keyup",(function(t){ge(e,"%MCEPASTEBIN%")||e.fire("paste")}))}(t,r),r.focus(),void t.selection.select(r,!0);var t,o,r,a,s},remove:function(){return function(e,t){if(fe(e)){for(var n=void 0,i=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);i&&e.selection.setRng(i)}t.set(null)}(e,n)},getEl:function(){return fe(e)},getHtml:function(){return function(e){var t,n,i,o,r,a=function(t,n){t.appendChild(n),e.dom.remove(n,!0)};for(n=c.grep(de(e).childNodes,(function(e){return"mcepastebin"===e.id})),t=n.shift(),c.each(n,(function(e){a(t,e)})),i=(o=e.dom.select("div[id=mcepastebin]",t)).length-1;0<=i;i--)r=e.dom.create("div"),t.insertBefore(r,o[i]),a(r,o[i]);return t?t.innerHTML:""}(e)},getLastRng:function(){return n.get()},isDefault:function(){return ge(e,i)},isDefaultContent:function(e){return he(i,e)}}}(n);return n.on("preInit",(function(){return function(n,i,o){var r,a,s=(r=t($.none()),{clear:function(){r.set($.none())},set:function(e){r.set($.some(e))},isSet:function(){return r.get().isSome()},on:function(e){r.get().each(e)}});function d(e,t,o,r){var a,s;ae(e,"text/html")?a=e["text/html"]:(a=i.getHtml(),r=r||p(a),i.isDefaultContent(a)&&(o=!0)),a=_.trimHtml(a),i.remove(),s=!1===r&&function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)}(a),a.length&&!s||(o=!0),o&&(a=ae(e,"text/plain")&&s?e["text/plain"]:_.innerText(a)),i.isDefaultContent(a)?t||n.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?oe(n,a):ie(n,a,r)}n.on("keydown",(function(t){function o(e){ce(e)&&!e.isDefaultPrevented()&&i.remove()}if(ce(t)&&!t.isDefaultPrevented()){if((a=t.shiftKey&&86===t.keyCode)&&l.webkit&&-1!==e.navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),s.set(t),window.setTimeout((function(){s.clear()}),100),l.ie&&a)return t.preventDefault(),void function(e,t){e.fire("paste",{ieFake:!0})}(n);i.remove(),i.create(),n.once("keyup",o),n.once("paste",(function(){n.off("keyup",o)}))}})),n.on("paste",(function(t){var r,f,h=s.isSet(),g=(r=re(t.clipboardData||n.getDoc().dataTransfer),_.isMsEdge()?c.extend(r,{"text/html":""}):r),v="text"===o.get()||a,y=ae(g,m());a=!1,t.isDefaultPrevented()||(f=t.clipboardData,-1!==e.navigator.userAgent.indexOf("Android")&&f&&f.items&&0===f.items.length)?i.remove():se(g)||!ue(n,t,i.getLastRng()||n.selection.getRng())?(h||t.preventDefault(),!l.ie||h&&!t.ieFake||ae(g,"text/html")||(i.create(),n.dom.bind(i.getEl(),"paste",(function(e){e.stopPropagation()})),n.getDoc().execCommand("Paste",!1,null),g["text/html"]=i.getHtml()),ae(g,"text/html")?(t.preventDefault(),y||(y=p(g["text/html"])),d(g,h,v,y)):u.setEditorTimeout(n,(function(){d(g,h,v,y)}),0)):i.remove()}))}(r=n,o,i),void r.parser.addNodeFilter("img",(function(e,t,n){var i,o=function(e){e.attr("data-mce-object")||a===l.transparentSrc||e.remove()};if(!r.settings.paste_data_images&&(i=n).data&&!0===i.data.paste)for(var s=e.length;s--;)(a=e[s].attributes.map.src)&&(0===a.indexOf("webkit-fake-url")?o(e[s]):r.settings.allow_html_data_urls||0!==a.indexOf("data:")||o(e[s]))}));var r,a})),{pasteFormat:i,pasteHtml:function(e,t){return ie(n,e,t)},pasteText:function(e){return oe(n,e)},pasteImageData:function(e,t){return ue(n,e,t)},getDataTransferItems:re,hasHtmlOrText:se,hasContentType:ae}}(n,d),h=function(e){var t,n;l.webkit&&_e(e,Ie),l.ie&&(_e(e,xe),n=De,(t=e).on("PastePostProcess",(function(e){n(t,e.node)})))}(n);return function(e,t){var n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=t.concat(n);return e.apply(null,o)}}(we,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})}(n,f),function(e,t,n){e.addCommand("mceTogglePlainTextPaste",(function(){!function(e,t,n){var i,r;"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),o(e,!1)):(t.pasteFormat.set("text"),o(e,!0),r=e,!1===n.get()&&function(e){return e.getParam("paste_plaintext_inform",!0)}(r)&&((i=e).notificationManager.open({text:i.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),type:"info"}),n.set(!0))),e.focus()}(e,t,n)})),e.addCommand("mceInsertClipboardContent",(function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)}))}(n,f,a),function(e){var t=e.plugins.paste,n=function(e){return e.getParam("paste_preprocess")}(e);n&&e.on("PastePreProcess",(function(e){n.call(t,t,e)}));var i=function(e){return e.getParam("paste_postprocess")}(e);i&&e.on("PastePostProcess",(function(e){i.call(t,t,e)}))}(n),function(e){var t,n;e.on("cut",(t=e,function(e){be(t)&&me(e,ye(t),ve(t),(function(){setTimeout((function(){t.execCommand("Delete")}),0)}))})),e.on("copy",(n=e,function(e){be(n)&&me(e,ye(n),ve(n),pe)}))}(n),function(e,t,n){(function(e){return e.getParam("paste_block_drop",!1)})(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(function(e){e.preventDefault(),e.stopPropagation()})),r(e)||e.on("drop",(function(e){var t=e.dataTransfer;t&&t.files&&0<t.files.length&&e.preventDefault()})),e.on("drop",(function(i){var o,r;if(r=Ce(e,i),!i.isDefaultPrevented()&&!n.get()){o=t.getDataTransferItems(i.dataTransfer);var a,s=t.hasContentType(o,m());if((t.hasHtmlOrText(o)&&(!(a=o["text/plain"])||0!==a.indexOf("file://"))||!t.pasteImageData(i,r))&&r&&function(e){return e.getParam("paste_filter_drop",!0)}(e)){var l=o["mce-internal"]||o["text/html"]||o["text/plain"];l&&(i.preventDefault(),u.setEditorTimeout(e,(function(){e.undoManager.transact((function(){o["mce-internal"]&&e.execCommand("Delete"),Ee(e,r),l=_.trimHtml(l),o["text/html"]?t.pasteHtml(l,s):t.pasteText(l)}))})))}}})),e.on("dragstart",(function(e){n.set(!0)})),e.on("dragover dragend",(function(t){r(e)&&!1===n.get()&&(t.preventDefault(),Ee(e,Ce(e,t))),"dragend"===t.type&&n.set(!1)}))}(n,f,s),function(e,t){return{clipboard:e,quirks:t}}(f,h)}}))}(window),function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){},i=function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t.apply(null,n))}},o=function(e){return function(){return e}},r=function(e){return e};function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=t.concat(n);return e.apply(null,o)}}var s,l,u,c,d=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},f=o(!1),h=o(!0),g=function(){return p},p=(s=function(e){return e.isNone()},c={fold:function(e,t){return e()},is:f,isSome:f,isNone:h,getOr:u=function(e){return e},getOrThunk:l=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:u,orThunk:l,map:g,each:n,bind:g,exists:f,forall:h,filter:g,equals:s,equals_:s,toArray:function(){return[]},toString:o("none()")},Object.freeze&&Object.freeze(c),c),m=function(e){var t=o(e),n=function(){return r},i=function(t){return t(e)},r={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:h,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return m(t(e))},each:function(t){t(e)},bind:i,exists:i,forall:i,filter:function(t){return t(e)?r:p},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(f,(function(t){return n(e,t)}))}};return r},v={some:m,none:g,from:function(e){return null==e?p:m(e)}},y=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},b=y("string"),T=y("array"),C=y("boolean"),E=y("function"),_=y("number"),x=Array.prototype.slice,I=Array.prototype.indexOf,D=Array.prototype.push,w=function(e,t){return-1<I.call(e,t)},O=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n))return!0;return!1},R=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t(e[o],o);return i},k=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},S=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];t(r,i)&&n.push(r)}return n},A=function(e,t,n){return function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,(function(e){n=t(n,e)})),n},N=function(e,t,n){return k(e,(function(e){n=t(n,e)})),n},M=function(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(t(o,n))return v.some(o)}return v.none()},K=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n))return v.some(n);return v.none()},P=function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!T(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);D.apply(t,e[n])}return t},L=function(e,t){var n=R(e,t);return P(n)},B=function(e,t){for(var n=0,i=e.length;n<i;++n)if(!0!==t(e[n],n))return!1;return!0},F=(E(Array.from),Object.keys),z=function(e,t){for(var n=F(e),i=0,o=n.length;i<o;i++){var r=n[i];t(e[r],r)}},H=function(e,t){return V(e,(function(e,n){return{k:n,v:t(e,n)}}))},V=function(e,t){var n={};return z(e,(function(e,i){var o=t(e,i);n[o.k]=o.v})),n},W=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var i={};return k(e,(function(e,n){i[e]=o(t[n])})),i}},$=function(e){return e.slice(0).sort()},q=function(e,t){throw new Error("All required keys ("+$(e).join(", ")+") were not specified. Specified keys were: "+$(t).join(", ")+".")},U=function(e){throw new Error("Unsupported keys for object: "+$(e).join(", "))},j=function(e,t){if(!T(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");k(t,(function(t){if(!b(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))},G=function(e){var t=$(e);M(t,(function(e,n){return n<t.length-1&&e===t[n+1]})).each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},X=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return j("required",e),j("optional",t),G(n),function(i){var r=F(i);B(e,(function(e){return w(r,e)}))||q(e,r);var a=S(r,(function(e){return!w(n,e)}));0<a.length&&U(a);var s={};return k(e,(function(e){s[e]=o(i[e])})),k(t,(function(e){s[e]=o(Object.prototype.hasOwnProperty.call(i,e)?v.some(i[e]):v.none())})),s}},Y=e.Node.COMMENT_NODE,Z=e.Node.DOCUMENT_NODE,J=e.Node.ELEMENT_NODE,Q=e.Node.TEXT_NODE,ee=void 0!==e.window?e.window:Function("return this;")(),te=function(e){return e.dom().nodeName.toLowerCase()},ne=function(e){return e.dom().nodeType},ie=function(e){return function(t){return ne(t)===e}},oe=function(e){return ne(e)===Y||"#comment"===te(e)},re=ie(J),ae=ie(Q),se=function(t,n,i){if(!(b(i)||C(i)||_(i)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,i+"")},le=function(e,t,n){se(e.dom(),t,n)},ue=function(e,t){var n=e.dom();z(t,(function(e,t){se(n,t,e)}))},ce=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},de=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},fe=function(e,t){e.dom().removeAttribute(t)},he=function(e){return N(e.dom().attributes,(function(e,t){return e[t.name]=t.value,e}),{})},ge=function(e,t){return-1!==e.indexOf(t)},pe=function(e){return void 0!==e.style&&E(e.style.getPropertyValue)},me=function(e){var t,n=!1;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n||(n=!0,t=e.apply(null,i)),t}},ve=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:o(e)}},ye={fromHtml:function(t,n){var i=(n||e.document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||1<i.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return ve(i.childNodes[0])},fromTag:function(t,n){var i=(n||e.document).createElement(t);return ve(i)},fromText:function(t,n){var i=(n||e.document).createTextNode(t);return ve(i)},fromDom:ve,fromPoint:function(e,t,n){var i=e.dom();return v.from(i.elementFromPoint(t,n)).map(ve)}},be=function(e){var t=ae(e)?e.dom().parentNode:e.dom();return null!=t&&t.ownerDocument.body.contains(t)},Te=me((function(){return Ce(ye.fromDom(e.document))})),Ce=function(e){var t=e.dom().body;if(null==t)throw new Error("Body is not available yet");return ye.fromDom(t)},Ee=function(t,n,i){if(!b(i))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",i,":: Element ",t),new Error("CSS value must be a string: "+i);pe(t)&&t.style.setProperty(n,i)},_e=function(e,t,n){var i=e.dom();Ee(i,t,n)},xe=function(e,t){var n=e.dom();z(t,(function(e,t){Ee(n,t,e)}))},Ie=function(t,n){var i=t.dom(),o=e.window.getComputedStyle(i).getPropertyValue(n),r=""!==o||be(t)?o:De(i,n);return null===r?void 0:r},De=function(e,t){return pe(e)?e.style.getPropertyValue(t):""},we=function(e,t){var n=e.dom(),i=De(n,t);return v.from(i).filter((function(e){return 0<e.length}))},Oe=function(e,t){var n,i,o=e.dom();i=t,pe(n=o)&&n.style.removeProperty(i),de(e,"style")&&""===ce(e,"style").replace(/^\s+|\s+$/g,"")&&fe(e,"style")},Re=function(){return ke(0,0)},ke=function(e,t){return{major:e,minor:t}},Se=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Re():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}}(e,t);if(!n)return{major:0,minor:0};var i=function(e){return Number(t.replace(n,"$"+e))};return ke(i(1),i(2))}(e,n)},Ae=Re,Ne="Firefox",Me=function(e,t){return function(){return t===e}},Ke=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Me("Edge",t),isChrome:Me("Chrome",t),isIE:Me("IE",t),isOpera:Me("Opera",t),isFirefox:Me(Ne,t),isSafari:Me("Safari",t)}},Pe=function(){return Ke({current:void 0,version:Ae()})},Le=Ke,Be=(o("Edge"),o("Chrome"),o("IE"),o("Opera"),o(Ne),o("Safari"),"Windows"),Fe="Android",ze="Solaris",He="FreeBSD",Ve=function(e,t){return function(){return t===e}},We=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Ve(Be,t),isiOS:Ve("iOS",t),isAndroid:Ve(Fe,t),isOSX:Ve("OSX",t),isLinux:Ve("Linux",t),isSolaris:Ve(ze,t),isFreeBSD:Ve(He,t)}},$e=function(){return We({current:void 0,version:Ae()})},qe=We,Ue=(o(Be),o("iOS"),o(Fe),o("Linux"),o("OSX"),o(ze),o(He),function(e,t){var n=String(t).toLowerCase();return M(e,(function(e){return e.search(n)}))}),je=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ge=function(e){return function(t){return ge(t,e)}},Xe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ge(e,"edge/")&&ge(e,"chrome")&&ge(e,"safari")&&ge(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,je],search:function(e){return ge(e,"chrome")&&!ge(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ge(e,"msie")||ge(e,"trident")}},{name:"Opera",versionRegexes:[je,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ge("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ge("firefox")},{name:"Safari",versionRegexes:[je,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ge(e,"safari")||ge(e,"mobile/"))&&ge(e,"applewebkit")}}],Ye=[{name:"Windows",search:Ge("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ge(e,"iphone")||ge(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ge("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ge("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ge("linux"),versionRegexes:[]},{name:"Solaris",search:Ge("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ge("freebsd"),versionRegexes:[]}],Ze={browsers:o(Xe),oses:o(Ye)},Je={detect:me((function(){return function(e){var t,n,i,r,a,s,l,u,c,d,f,h=Ze.browsers(),g=Ze.oses(),p=function(e,t){return Ue(e,t).map((function(e){var n=Se(e.versionRegexes,t);return{current:e.name,version:n}}))}(h,e).fold(Pe,Le),m=function(e,t){return Ue(e,t).map((function(e){var n=Se(e.versionRegexes,t);return{current:e.name,version:n}}))}(g,e).fold($e,qe);return{browser:p,os:m,deviceType:(n=p,i=e,r=(t=m).isiOS()&&!0===/ipad/i.test(i),a=t.isiOS()&&!r,s=t.isAndroid()&&3===t.version.major,l=t.isAndroid()&&4===t.version.major,u=r||s||l&&!0===/mobile/i.test(i),c=t.isiOS()||t.isAndroid(),d=c&&!u,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:o(r),isiPhone:o(a),isTablet:o(u),isPhone:o(d),isTouch:o(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:o(f)})}}(e.navigator.userAgent)}))},Qe=J,et=Z,tt=function(e,t){var n=e.dom();if(n.nodeType!==Qe)return!1;var i=n;if(void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},nt=function(e){return e.nodeType!==Qe&&e.nodeType!==et||0===e.childElementCount},it=function(e,t){return e.dom()===t.dom()},ot=Je.detect().browser.isIE()?function(e,t){return function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,function(e,t){var n=function(e,t){return function(e,t){for(var n=ee,i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n}(e.split("."))}(e);if(null==n)throw new Error(e+" not available on this browser");return n}("Node").DOCUMENT_POSITION_CONTAINED_BY)}(e.dom(),t.dom())}:function(e,t){var n=e.dom(),i=t.dom();return n!==i&&n.contains(i)},rt=tt,at=function(e){return ye.fromDom(e.dom().ownerDocument)},st=function(e){return v.from(e.dom().parentNode).map(ye.fromDom)},lt=function(e,t){for(var n=E(t)?t:f,i=e.dom(),o=[];null!=i.parentNode;){var r=i.parentNode,a=ye.fromDom(r);if(o.push(a),!0===n(a))break;i=r}return o},ut=function(e){return v.from(e.dom().previousSibling).map(ye.fromDom)},ct=function(e){return v.from(e.dom().nextSibling).map(ye.fromDom)},dt=function(e){return R(e.dom().childNodes,ye.fromDom)},ft=function(e,t){var n=e.dom().childNodes;return v.from(n[t]).map(ye.fromDom)},ht=(W("element","offset"),function(e,t){st(e).each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))}),gt=function(e,t){ct(e).fold((function(){st(e).each((function(e){mt(e,t)}))}),(function(e){ht(e,t)}))},pt=function(e,t){ft(e,0).fold((function(){mt(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))},mt=function(e,t){e.dom().appendChild(t.dom())},vt=function(e,t){ht(e,t),mt(t,e)},yt=function(e,t){k(t,(function(n,i){gt(0===i?e:t[i-1],n)}))},bt=function(e,t){k(t,(function(t){mt(e,t)}))},Tt=function(e){e.dom().textContent="",k(dt(e),(function(e){Ct(e)}))},Ct=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Et=function(e){var t,n=dt(e);0<n.length&&(t=e,k(n,(function(e){ht(t,e)}))),Ct(e)},_t=(W("width","height"),W("width","height"),W("rows","columns")),xt=W("row","column"),It=(W("x","y"),W("element","rowspan","colspan")),Dt=W("element","rowspan","colspan","isNew"),wt=W("element","rowspan","colspan","row","column"),Ot=W("element","cells","section"),Rt=W("element","isNew"),kt=W("element","cells","section","isNew"),St=W("cells","section"),At=W("details","section"),Nt=W("startRow","startCol","finishRow","finishCol"),Mt=function(e,t){var n=[];return k(dt(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(Mt(e,t))})),n},Kt=function(e,t,n){return i=function(e){return tt(e,t)},S(lt(e,n),i);var i},Pt=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),nt(r)?[]:R(r.querySelectorAll(i),ye.fromDom);var i,o,r};function Lt(e,t,n,i,o){return e(n,i)?v.some(n):E(o)&&o(n)?v.none():t(n,i,o)}var Bt,Ft,zt=function(e,t,n){for(var i=e.dom(),r=E(n)?n:o(!1);i.parentNode;){var a=ye.fromDom(i=i.parentNode);if(t(a))return v.some(a);if(r(a))break}return v.none()},Ht=function(e,t,n){return zt(e,(function(e){return tt(e,t)}),n)},Vt=function(e,t){return n=function(e){return tt(e,t)},M(e.dom().childNodes,(function(e){return n(ye.fromDom(e))})).map(ye.fromDom);var n},Wt=function(t,n){return i=n,r=void 0===(o=t)?e.document:o.dom(),nt(r)?v.none():v.from(r.querySelector(i)).map(ye.fromDom);var i,o,r},$t=function(e,t,n){return Lt(tt,Ht,e,t,n)},qt=function(e,t,n){return L(dt(e),(function(e){return tt(e,t)?n(e)?[e]:[]:qt(e,t,n)}))},Ut={firstLayer:function(e,t){return qt(e,t,o(!0))},filterFirstLayer:qt},jt=function(e,t){return st(t).map((function(t){return function(e,t){return n=function(e){return tt(e,t)},S(dt(e),n);var n}(t,e)}))},Gt=(a(jt,"th,td"),a(jt,"tr"),function(e,t){return function(e,t,n){return void 0===n&&(n=f),n(t)?v.none():w(e,te(t))?v.some(t):Ht(t,e.join(","),(function(e){return tt(e,"table")||n(e)}))}(["td","th"],e,t)}),Xt=function(e){return Ut.firstLayer(e,"th,td")},Yt=function(e,t){return $t(e,"table",t)},Zt=function(e){var t=function(e){return Ut.firstLayer(e,"tr")}(e);return R(t,(function(e){var t=e,n=st(t).map((function(e){var t=te(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"})).getOr("tbody"),i=R(Xt(e),(function(e){var t=de(e,"rowspan")?parseInt(ce(e,"rowspan"),10):1,n=de(e,"colspan")?parseInt(ce(e,"colspan"),10):1;return It(e,t,n)}));return Ot(t,i,n)}))},Jt=function(e,t){return e+","+t},Qt=function(e,t){var n=L(e.all(),(function(e){return e.cells()}));return S(n,t)},en=function(e){var t={},n=[],i=e.length,r=0;k(e,(function(e,i){var o=[];k(e.cells(),(function(e){for(var n=0;void 0!==t[Jt(i,n)];)n++;for(var a=wt(e.element(),e.rowspan(),e.colspan(),i,n),s=0;s<e.colspan();s++)for(var l=0;l<e.rowspan();l++){var u=n+s,c=Jt(i+l,u);t[c]=a,r=Math.max(r,u+1)}o.push(a)})),n.push(Ot(e.element(),o,e.section()))}));var a=_t(i,r);return{grid:o(a),access:o(t),all:o(n)}},tn=function(e,t,n){var i=e.access()[Jt(t,n)];return void 0!==i?v.some(i):v.none()},nn=function(e,t,n){var i=Qt(e,(function(e){return n(t,e.element())}));return 0<i.length?v.some(i[0]):v.none()},on=Qt,rn=function(e){var t=R(e.all(),(function(e){return e.cells()}));return P(t)},an=W("minRow","minCol","maxRow","maxCol"),sn=function(e,t){var n,i,o,r,a,s,l,u,c,d,f=function(e){return tt(e.element(),t)},h=Zt(e),g=en(h),p=(i=f,o=(n=g).grid().columns(),r=n.grid().rows(),a=o,l=s=0,z(n.access(),(function(e){if(i(e)){var t=e.row(),n=t+e.rowspan()-1,o=e.column(),u=o+e.colspan()-1;t<r?r=t:s<n&&(s=n),o<a?a=o:l<u&&(l=u)}})),an(r,a,s,l)),m="th:not("+t+"),td:not("+t+")",v=Ut.filterFirstLayer(e,"th,td",(function(e){return tt(e,m)}));return k(v,Ct),function(e,t,n,i){for(var o,r,a,s=t.grid().columns(),l=t.grid().rows(),u=0;u<l;u++)for(var c=!1,d=0;d<s;d++)u<n.minRow()||u>n.maxRow()||d<n.minCol()||d>n.maxCol()||(tn(t,u,d).filter(i).isNone()?(o=c,r=e[u].element(),a=ye.fromTag("td"),mt(a,ye.fromTag("br")),(o?mt:pt)(r,a)):c=!0)}(h,g,p,f),c=p,d=S(Ut.firstLayer(u=e,"tr"),(function(e){return 0===e.dom().childElementCount})),k(d,Ct),c.minCol()!==c.maxCol()&&c.minRow()!==c.maxRow()||k(Ut.firstLayer(u,"th,td"),(function(e){fe(e,"rowspan"),fe(e,"colspan")})),fe(u,"width"),fe(u,"height"),Oe(u,"width"),Oe(u,"height"),e},ln=(Bt=ae,{get:function(e){if(!Bt(e))throw new Error("Can only get text value of a text node");return Ft(e).getOr("")},getOption:Ft=function(e){return Bt(e)?v.from(e.dom().nodeValue):v.none()},set:function(e,t){if(!Bt(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),un=function(e){return ln.get(e)},cn=function(e){return ln.getOption(e)},dn=function(e,t){ln.set(e,t)},fn=function(e){return"img"===te(e)?1:cn(e).fold((function(){return dt(e).length}),(function(e){return e.length}))},hn=["img","br"],gn=function(e){return cn(e).filter((function(e){return 0!==e.trim().length||-1<e.indexOf(" ")})).isSome()||w(hn,te(e))},pn=function(e){return t=gn,(n=function(e){for(var i=0;i<e.childNodes.length;i++){var o=ye.fromDom(e.childNodes[i]);if(t(o))return v.some(o);var r=n(e.childNodes[i]);if(r.isSome())return r}return v.none()})(e.dom());var t,n},mn=function(e){return vn(e,gn)},vn=function(e,t){var n=function(e){for(var i=dt(e),o=i.length-1;0<=o;o--){var r=i[o];if(t(r))return v.some(r);var a=n(r);if(a.isSome())return a}return v.none()};return n(e)},yn=function(e,t){return ye.fromDom(e.dom().cloneNode(t))},bn=function(e){return yn(e,!1)},Tn=function(e){return yn(e,!0)},Cn=function(){var e=ye.fromTag("td");return mt(e,ye.fromTag("br")),e},En=function(e,t,n){var i=function(e,t){var n,i,o,r=(n=e,i=ye.fromTag(t),o=he(n),ue(i,o),i),a=dt(Tn(e));return bt(r,a),r}(e,t);return z(n,(function(e,t){null===e?fe(i,t):le(i,t,e)})),i},_n=function(e){return e},xn=function(e){return function(){return ye.fromTag("tr",e.dom())}},In=function(e,t,n){return{row:xn(t),cell:function(t){var i,o,r,a,s,l,u=at(t.element()),c=ye.fromTag(te(t.element()),u.dom()),d=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),f=0<d.length?(i=t.element(),o=c,r=d,pn(i).map((function(e){var t=r.join(","),n=Kt(e,t,(function(e){return it(e,i)}));return A(n,(function(e,t){var n=bn(t);return fe(n,"contenteditable"),mt(e,n),n}),o)})).getOr(o)):c;return mt(f,ye.fromTag("br")),a=c,s=t.element().dom(),l=a.dom(),pe(s)&&pe(l)&&(l.style.cssText=s.style.cssText),Oe(c,"height"),1!==t.colspan()&&Oe(t.element(),"width"),e(t.element(),c),c},replace:En,gap:Cn}},Dn=function(e){return{row:xn(e),cell:Cn,replace:_n,gap:Cn}},wn=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},On=function(e,t){var n=t.column(),i=t.column()+t.colspan()-1,o=t.row(),r=t.row()+t.rowspan()-1;return n<=e.finishCol()&&i>=e.startCol()&&o<=e.finishRow()&&r>=e.startRow()},Rn=function(e,t,n){var i=nn(e,t,it),o=nn(e,n,it);return i.bind((function(e){return o.map((function(t){return n=e,i=t,Nt(Math.min(n.row(),i.row()),Math.min(n.column(),i.column()),Math.max(n.row()+n.rowspan()-1,i.row()+i.rowspan()-1),Math.max(n.column()+n.colspan()-1,i.column()+i.colspan()-1));var n,i}))}))},kn=Rn,Sn=function(e,t,n){return kn(e,t,n).map((function(t){var n=on(e,a(On,t));return R(n,(function(e){return e.element()}))}))},An=function(e,t){return nn(e,t,(function(e,t){return ot(t,e)})).map((function(e){return e.element()}))},Nn=function(e){var t=Zt(e);return en(t)},Mn=function(e,t,n){var i=Nn(e);return Sn(i,t,n)},Kn=function(e,t,n,i,o){var r=Nn(e),a=it(e,n)?v.some(t):An(r,t),s=it(e,o)?v.some(i):An(r,i);return a.bind((function(e){return s.bind((function(t){return Sn(r,e,t)}))}))},Pn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Ln(){return{up:o({selector:Ht,closest:$t,predicate:zt,all:lt}),down:o({selector:Pt,predicate:Mt}),styles:o({get:Ie,getRaw:we,set:_e,remove:Oe}),attrs:o({get:ce,set:le,remove:fe,copyTo:function(e,t){var n=he(e);ue(t,n)}}),insert:o({before:ht,after:gt,afterAll:yt,append:mt,appendAll:bt,prepend:pt,wrap:vt}),remove:o({unwrap:Et,remove:Ct}),create:o({nu:ye.fromTag,clone:function(e){return ye.fromDom(e.dom().cloneNode(!1))},text:ye.fromText}),query:o({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:ut,nextSibling:ct}),property:o({children:dt,name:te,parent:st,document:function(e){return e.dom().ownerDocument},isText:ae,isComment:oe,isElement:re,getText:un,setText:dn,isBoundary:function(e){return!!re(e)&&("body"===te(e)||w(Pn,te(e)))},isEmptyTag:function(e){return!!re(e)&&w(["br","img","hr","input"],te(e))}}),eq:it,is:rt}}W("left","right"),W("first","second","splits");var Bn=Ln(),Fn=function(e,t){return function(e,t,n){return 0<n.length?function(e,t,n,i){var o=t(e,n);return A(i,(function(n,i){var o=t(e,i);return function(e,t,n){return t.bind((function(t){return n.filter(a(e.eq,t))}))}(e,n,o)}),o)}(e,t,(i=n)[0],i.slice(1)):v.none();var i}(Bn,(function(t,n){return e(n)}),t)},zn={create:X(["boxes","start","finish"],[])},Hn=function(e){return Ht(e,"table")},Vn=function(e,t,n){var i=function(e){return function(t){return void 0!==n&&n(t)||it(t,e)}};return it(e,t)?v.some(zn.create({boxes:v.some([e]),start:e,finish:t})):Hn(e).bind((function(r){return Hn(t).bind((function(s){if(it(r,s))return v.some(zn.create({boxes:Mn(r,e,t),start:e,finish:t}));if(ot(r,s)){var l=0<(u=Kt(t,"td,th",i(r))).length?u[u.length-1]:t;return v.some(zn.create({boxes:Kn(r,e,r,t,s),start:e,finish:l}))}if(ot(s,r)){var u,c=0<(u=Kt(e,"td,th",i(s))).length?u[u.length-1]:e;return v.some(zn.create({boxes:Kn(s,e,r,t,s),start:e,finish:c}))}return function(e,t,n){return function(e,t,n,i){void 0===i&&(i=f);var r=[t].concat(e.up().all(t)),s=[n].concat(e.up().all(n)),l=function(e){return K(e,i).fold((function(){return e}),(function(t){return e.slice(0,t+1)}))},u=l(r),c=l(s),d=M(u,(function(t){return O(c,function(e,t){return a(e.eq,t)}(e,t))}));return{firstpath:o(u),secondpath:o(c),shared:o(d)}}(Bn,e,t,void 0)}(e,t).shared().bind((function(o){return $t(o,"table",n).bind((function(n){var o=Kt(t,"td,th",i(n)),a=0<o.length?o[o.length-1]:t,l=Kt(e,"td,th",i(n)),u=0<l.length?l[l.length-1]:e;return v.some(zn.create({boxes:Kn(n,e,r,t,s),start:u,finish:a}))}))}))}))}))},Wn=Vn,$n=function(e,t){var n=Pt(e,t);return 0<n.length?v.some(n):v.none()},qn=function(e,t,n){return Wt(e,t).bind((function(t){return Wt(e,n).bind((function(e){return Fn(Hn,[t,e]).map((function(n){return{first:o(t),last:o(e),table:o(n)}}))}))}))},Un={selected:o("data-mce-selected"),selectedSelector:o("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:o("[data-mce-selected]"),firstSelected:o("data-mce-first-selected"),firstSelectedSelector:o("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:o("data-mce-last-selected"),lastSelectedSelector:o("td[data-mce-last-selected],th[data-mce-last-selected]")},jn=function(t){if(!T(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],i={};return k(t,(function(o,r){var a=F(o);if(1!==a.length)throw new Error("one and only one name per case");var s=a[0],l=o[s];if(void 0!==i[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!T(l))throw new Error("case arguments must be an array");n.push(s),i[s]=function(){var i=arguments.length;if(i!==l.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+l.length+" ("+l+"), got "+i);for(var o=new Array(i),a=0;a<o.length;a++)o[a]=arguments[a];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[r].apply(null,o)},match:function(e){var t=F(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!B(n,(function(e){return w(t,e)})))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[s].apply(null,o)},log:function(t){e.console.log(t,{constructors:n,constructor:s,params:o})}}}})),i},Gn=jn([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Xn={cata:function(e,t,n,i){return e.fold(t,n,i)},none:Gn.none,multiple:Gn.multiple,single:Gn.single},Yn=function(e,t){return Xn.cata(t.get(),o([]),r,o([e]))},Zn=function(e,t){return Xn.cata(t.get(),v.none,(function(t,n){return 0===t.length?v.none():function(e,t,n){return qn(e,t,n).bind((function(t){var n=function(t){return it(e,t)},i=Ht(t.first(),"thead,tfoot,tbody,table",n),o=Ht(t.last(),"thead,tfoot,tbody,table",n);return i.bind((function(e){return o.bind((function(n){return it(e,n)?function(e,t,n){return function(e,t,n){return Rn(e,t,n).bind((function(t){return function(e,t){for(var n=!0,i=a(wn,t),o=t.startRow();o<=t.finishRow();o++)for(var r=t.startCol();r<=t.finishCol();r++)n=n&&tn(e,o,r).exists(i);return n?v.some(t):v.none()}(e,t)}))}(Nn(e),t,n)}(t.table(),t.first(),t.last()):v.none()}))}))}))}(e,Un.firstSelectedSelector(),Un.lastSelectedSelector()).bind((function(e){return 1<t.length?v.some({bounds:o(e),cells:o(t)}):v.none()}))}),v.none)},Jn=function(e,t){var n=Yn(e,t);return 0<n.length&&B(n,(function(e){return de(e,"rowspan")&&1<parseInt(ce(e,"rowspan"),10)||de(e,"colspan")&&1<parseInt(ce(e,"colspan"),10)}))?v.some(n):v.none()},Qn=Yn,ei=function(e){return{element:o(e),mergable:v.none,unmergable:v.none,selection:o([e])}},ti=W("element","clipboard","generators"),ni={noMenu:ei,forMenu:function(e,t,n){return{element:o(n),mergable:o(Zn(t,e)),unmergable:o(Jn(n,e)),selection:o(Qn(n,e))}},notCell:function(e){return ei(e)},paste:ti,pasteRows:function(e,t,n,i,r){return{element:o(n),mergable:v.none,unmergable:v.none,selection:o(Qn(n,e)),clipboard:o(i),generators:o(r)}}};function ii(e,t){var n=function(n){var i=t(n);if(i<=0||null===i){var o=Ie(n,e);return parseFloat(o)||0}return i},i=function(e,t){return N(t,(function(t,n){var i=Ie(e,n),o=void 0===i?0:parseInt(i,10);return isNaN(o)?t:t+o}),0)};return{set:function(t,n){if(!_(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var i=t.dom();pe(i)&&(i.style[e]=n+"px")},get:n,getOuter:n,aggregate:i,max:function(e,t,n){var o=i(e,n);return o<t?t-o:0}}}var oi=ii("height",(function(e){var t=e.dom();return be(e)?t.getBoundingClientRect().height:t.offsetHeight})),ri=function(e){return oi.get(e)},ai=function(e){return oi.getOuter(e)},si=ii("width",(function(e){return e.dom().offsetWidth})),li=function(e){return si.get(e)},ui=function(e){return si.getOuter(e)},ci=Je.detect(),di=function(e,t,n){return i=Ie(e,t),o=n,r=parseFloat(i),isNaN(r)?o:r;var i,o,r},fi=/(\d+(\.\d+)?)(\w|%)*/,hi=/(\d+(\.\d+)?)%/,gi=/(\d+(\.\d+)?)px|em/,pi=function(e,t){_e(e,"height",t+"px")},mi=function(e){return we(e,"width").fold((function(){return v.from(ce(e,"width"))}),(function(e){return v.some(e)}))},vi=function(e,t){return e/t.pixelWidth()*100},yi={percentageBasedSizeRegex:o(hi),pixelBasedSizeRegex:o(gi),setPixelWidth:function(e,t){_e(e,"width",t+"px")},setPercentageWidth:function(e,t){_e(e,"width",t+"%")},setHeight:pi,getPixelWidth:function(e,t){return mi(e).fold((function(){return li(e)}),(function(n){return function(e,t,n){var i=gi.exec(t);if(null!==i)return parseInt(i[1],10);var o=hi.exec(t);return null!==o?parseFloat(o[1])/100*n.pixelWidth():li(e)}(e,n,t)}))},getPercentageWidth:function(e,t){return mi(e).fold((function(){var n=li(e);return vi(n,t)}),(function(n){return function(e,t,n){var i=hi.exec(t);if(null!==i)return parseFloat(i[1]);var o=li(e);return vi(o,n)}(e,n,t)}))},getGenericWidth:function(e){return mi(e).bind((function(e){var t=fi.exec(e);return null!==t?v.some({width:o(parseFloat(t[1])),unit:o(t[3])}):v.none()}))},setGenericWidth:function(e,t,n){_e(e,"width",t+n)},getHeight:function(e){return function(e){var t,n=we(t=e,"height").getOrThunk((function(){return function(e){return ci.browser.isIE()||ci.browser.isEdge()?(n=di(t=e,"padding-top",0),i=di(t,"padding-bottom",0),o=di(t,"border-top-width",0),r=di(t,"border-bottom-width",0),a=t.dom().getBoundingClientRect().height,"border-box"===Ie(t,"box-sizing")?a:a-n-i-(o+r)):di(e,"height",ri(e));var t,n,i,o,r,a}(t)+"px"}));return n?function(e,t,n,i){var o,r,a,s,l,u,c=parseInt(e,10);return u=(l=e).length-"%".length,l.length<"%".length||"%"!==l.substr(u,u+"%".length)||"table"===te(t)?c:(r=c,a=n,i(o=t,s=Yt(o).map((function(e){var t=a(e);return Math.floor(r/100*t)})).getOr(r)),s)}(n,e,ri,pi):ri(e)}(t=e)/function(e,t){return de(e,t)?parseInt(ce(e,t),10):1}(t,"rowspan");var t},getRawWidth:mi},bi=function(e,t){yi.getGenericWidth(e).each((function(n){var i=n.width()/2;yi.setGenericWidth(e,i,n.unit()),yi.setGenericWidth(t,i,n.unit())}))},Ti=function(e,t){return{left:o(e),top:o(t),translate:function(n,i){return Ti(e+n,t+i)}}},Ci=Ti,Ei=function(e,t){return void 0!==e?e:void 0!==t?t:0},_i=function(e){var t=e.dom().ownerDocument,n=t.body,i=t.defaultView,o=t.documentElement,r=Ei(i.pageYOffset,o.scrollTop),a=Ei(i.pageXOffset,o.scrollLeft),s=Ei(o.clientTop,n.clientTop),l=Ei(o.clientLeft,n.clientLeft);return xi(e).translate(a-l,r-s)},xi=function(e){var t,n=e.dom(),i=n.ownerDocument.body;return i===n?Ci(i.offsetLeft,i.offsetTop):be(e)?(t=n.getBoundingClientRect(),Ci(t.left,t.top)):Ci(0,0)},Ii=W("row","y"),Di=W("col","x"),wi=function(e){return _i(e).left()+ui(e)},Oi=function(e){return _i(e).left()},Ri=function(e,t){return Di(e,Oi(t))},ki=function(e,t){return Di(e,wi(t))},Si=function(e){return _i(e).top()},Ai=function(e,t){return Ii(e,Si(t))},Ni=function(e,t){return Ii(e,Si(t)+ai(t))},Mi=function(e,t,n){if(0===n.length)return[];var i=R(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))})),o=n[n.length-1].map((function(e){return t(n.length-1,e)}));return i.concat([o])},Ki={height:{delta:r,positions:function(e){return Mi(Ai,Ni,e)},edge:Si},rtl:{delta:function(e){return-e},edge:wi,positions:function(e){return Mi(ki,Ri,e)}},ltr:{delta:r,edge:Oi,positions:function(e){return Mi(Ri,ki,e)}}},Pi={ltr:Ki.ltr,rtl:Ki.rtl};function Li(e){var t=function(t){return e(t).isRtl()?Pi.rtl:Pi.ltr};return{delta:function(e,n){return t(n).delta(e,n)},edge:function(e){return t(e).edge(e)},positions:function(e,n){return t(n).positions(e,n)}}}var Bi=function(e){var t=Zt(e);return en(t).grid()},Fi=function(){return(Fi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},zi=function(e){for(var t=[],n=function(e){t.push(e)},i=0;i<e.length;i++)e[i].each(n);return t},Hi=function(e,t){for(var n=0;n<e.length;n++){var i=t(e[n],n);if(i.isSome())return i}return v.none()},Vi=function(e,t,n,i){n===i?fe(e,t):le(e,t,n)},Wi=function(e){return void 0!==e.dom().classList},$i=function(e,t){Wi(e)?e.dom().classList.add(t):function(e,t){return i=t,o=function(e,t){var n=ce(e,"class");return void 0===n||""===n?[]:n.split(" ")}(n=e).concat([i]),le(n,"class",o.join(" ")),!0;var n,i,o}(e,t)},qi=function(e,t){return Wi(e)&&e.dom().classList.contains(t)},Ui=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n},ji=function(e,t){if(t<0||t>=e.length-1)return v.none();var n=e[t].fold((function(){var n=function(e){var t=x.call(e,0);return t.reverse(),t}(e.slice(0,t));return Hi(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return v.some({value:e,delta:0})})),i=e[t+1].fold((function(){var n=e.slice(t+1);return Hi(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return v.some({value:e,delta:1})}));return n.bind((function(e){return i.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))},Gi=function(e,t,n){var i=e();return M(i,t).orThunk((function(){return v.from(i[0]).orThunk(n)})).map((function(e){return e.element()}))},Xi=function(e){var t=e.grid(),n=Ui(0,t.columns()),i=Ui(0,t.rows());return R(n,(function(t){return Gi((function(){return L(i,(function(n){return tn(e,n,t).filter((function(e){return e.column()===t})).fold(o([]),(function(e){return[e]}))}))}),(function(e){return 1===e.colspan()}),(function(){return tn(e,0,t)}))}))},Yi=function(e){var t=e.grid(),n=Ui(0,t.rows()),i=Ui(0,t.columns());return R(n,(function(t){return Gi((function(){return L(i,(function(n){return tn(e,t,n).filter((function(e){return e.row()===t})).fold(o([]),(function(e){return[e]}))}))}),(function(e){return 1===e.rowspan()}),(function(){return tn(e,t,0)}))}))},Zi=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Ji={resolve:Zi("ephox-snooker").resolve},Qi=Ji.resolve("resizer-bar"),eo=Ji.resolve("resizer-rows"),to=Ji.resolve("resizer-cols"),no=function(e){var t=Pt(e.parent(),"."+Qi);k(t,Ct)},io=function(e,t,n){var i=e.origin();k(t,(function(t,o){t.each((function(t){var o=n(i,t);$i(o,Qi),mt(e.parent(),o)}))}))},oo=function(e,t){var n=Pt(e.parent(),"."+Qi);k(n,t)},ro=function(e,t,n,i){no(e);var o=Zt(t),r=en(o);!function(e,t,n,i,o,r){var a,s,l,u,c,d,f,h,g=_i(t);a=e,s=0<n.length?o.positions(n,t):[],l=g,u=ui(t),io(a,s,(function(e,t){var n=function(e,t,n,i,o){var r=ye.fromTag("div");return xe(r,{position:"absolute",left:t+"px",top:n-3.5+"px",height:"7px",width:i+"px"}),ue(r,{"data-row":e,role:"presentation"}),r}(t.row(),l.left()-e.left(),t.y()-e.top(),u);return $i(n,eo),n})),c=e,d=0<i.length?r.positions(i,t):[],f=g,h=ai(t),io(c,d,(function(e,t){var n=function(e,t,n,i,o){var r=ye.fromTag("div");return xe(r,{position:"absolute",left:t-3.5+"px",top:n+"px",height:o+"px",width:"7px"}),ue(r,{"data-column":e,role:"presentation"}),r}(t.col(),t.x()-e.left(),f.top()-e.top(),0,h);return $i(n,to),n}))}(e,t,Yi(r),Xi(r),n,i)},ao=function(e){oo(e,(function(e){_e(e,"display","none")}))},so=function(e){oo(e,(function(e){_e(e,"display","block")}))},lo=no,uo=function(e,t){return St(t,e.section())},co=function(e,t){return e.cells()[t]},fo=function(e,t,n){var i=e.cells(),o=i.slice(0,t),r=i.slice(t),a=o.concat([n]).concat(r);return uo(e,a)},ho=uo,go=function(e,t,n){e.cells()[t]=n},po=co,mo=function(e,t){return co(e,t).element()},vo=function(e,t){var n=e.cells(),i=R(n,t);return St(i,e.section())},yo=function(e){return e.cells().length},bo=function(e,t){if(0===e.length)return 0;var n=e[0];return K(e,(function(e){return!t(n.element(),e.element())})).fold((function(){return e.length}),(function(e){return e}))},To=function(e,t,n){for(var i=[],o=0;o<e.grid().rows();o++){for(var r=[],a=0;a<e.grid().columns();a++){var s=tn(e,o,a).map((function(e){return Rt(e.element(),n)})).getOrThunk((function(){return Rt(t.gap(),!0)}));r.push(s)}var l=St(r,e.all()[o].section());i.push(l)}return i},Co=function(e,t){return function(e,t){return R(e,(function(e){var n,i=(n=e.details(),Hi(n,(function(e){return st(e.element()).map((function(e){var t=st(e).isNone();return Rt(e,t)}))})).getOrThunk((function(){return Rt(t.row(),!0)})));return kt(i.element(),e.details(),e.section(),i.isNew())}))}(function(e,t){var n=R(e,(function(e,t){return R(e.cells(),(function(e,t){return!1}))}));return R(e,(function(i,r){var a=L(i.cells(),(function(i,a){if(!1===n[r][a]){var s=function(e,t,n,i){var r,a,s,l,u=(r=e,a=t,r[a]).cells().slice(n),c=bo(u,i),d=(s=e,l=n,R(s,(function(e){return po(e,l)}))).slice(t),f=bo(d,i);return{colspan:o(c),rowspan:o(f)}}(e,r,a,t);return function(e,t,i,o){for(var r=e;r<e+i;r++)for(var a=t;a<t+o;a++)n[r][a]=!0}(r,a,s.rowspan(),s.colspan()),[Dt(i.element(),s.rowspan(),s.colspan(),i.isNew())]}return[]}));return At(a,i.section())}))}(e,it),t)},Eo=function(e,t){var n=P(R(e.all(),(function(e){return e.cells()})));return M(n,(function(e){return it(t,e.element())}))},_o=function(e,t,n,i,r){return function(a,s,l,u,c){var d=Zt(s),f=en(d);return t(f,l).map((function(t){var n=To(f,u,!1),i=e(n,t,it,r(u)),a=Co(i.grid(),u);return{grid:o(a),cursor:i.cursor}})).fold((function(){return v.none()}),(function(e){var t=function(e,t){var n=[],i=[],r=function(t,o){0<t.length?function(t,o){var r=Vt(e,o).getOrThunk((function(){var t=ye.fromTag(o,at(e).dom());return mt(e,t),t}));Tt(r);var a=R(t,(function(e){e.isNew()&&n.push(e.element());var t=e.element();return Tt(t),k(e.cells(),(function(e){e.isNew()&&i.push(e.element()),Vi(e.element(),"colspan",e.colspan(),1),Vi(e.element(),"rowspan",e.rowspan(),1),mt(t,e.element())})),t}));bt(r,a)}(t,o):Vt(e,o).each(Ct)},a=[],s=[],l=[];return k(t,(function(e){switch(e.section()){case"thead":a.push(e);break;case"tbody":s.push(e);break;case"tfoot":l.push(e)}})),r(a,"thead"),r(s,"tbody"),r(l,"tfoot"),{newRows:o(n),newCells:o(i)}}(s,e.grid());return n(s,e.grid(),c),i(s),ro(a,s,Ki.height,c),v.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}},xo=function(e,t){return Gt(t.element()).bind((function(t){return Eo(e,t)}))},Io=function(e,t){var n=R(t.selection(),(function(t){return Gt(t).bind((function(t){return Eo(e,t)}))})),i=zi(n);return 0<i.length?v.some({cells:i,generators:t.generators,clipboard:t.clipboard}):v.none()},Do=function(e,t){var n=R(t.selection(),(function(t){return Gt(t).bind((function(t){return Eo(e,t)}))})),i=zi(n);return 0<i.length?v.some(i):v.none()},wo=function(e){return{is:function(t){return e===t},isValue:h,isError:f,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:function(t){return wo(e)},orThunk:function(t){return wo(e)},fold:function(t,n){return n(e)},map:function(t){return wo(t(e))},mapError:function(t){return wo(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return v.some(e)}}},Oo=function(e){return{is:f,isValue:f,isError:h,getOr:r,getOrThunk:function(e){return e()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return Oo(e)},mapError:function(t){return Oo(t(e))},each:n,bind:function(t){return Oo(e)},exists:f,forall:h,toOption:v.none}},Ro={value:wo,error:Oo,fromOption:function(e,t){return e.fold((function(){return Oo(t)}),wo)}},ko=function(e,t){return R(e,(function(){return Rt(t.cell(),!0)}))},So=function(e,t,n){return e.concat(function(e,t){for(var n=[],i=0;i<e;i++)n.push(t());return n}(t,(function(t){return ho(e[e.length-1],ko(e[e.length-1].cells(),n))})))},Ao=function(e,t,n){return R(e,(function(e){return ho(e,e.cells().concat(ko(Ui(0,t),n)))}))},No=function(e,t){var n=yo(e[0]),i=yo(t[0]);return{rowDelta:o(0),colDelta:o(n-i)}},Mo=function(e,t,n){var i=t.colDelta()<0?Ao:r;return(t.rowDelta()<0?So:r)(i(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},Ko=function(e,t,n,i){for(var o=!0,r=0;r<e.length;r++)for(var a=0;a<yo(e[0]);a++){var s=n(mo(e[r],a),t);!0===s&&!1===o?go(e[r],a,Rt(i(),!0)):!0===s&&(o=!1)}return e},Po=function(e,t,n,i,o){!function(e,t,n,i){if(0<t&&t<e.length){var o=e[t-1].cells(),r=(a=n,N(o,(function(e,t){return O(e,(function(e){return a(e.element(),t.element())}))?e:e.concat([t])}),[]));k(r,(function(o){for(var r=v.none(),a=function(t){for(var a=function(a){var s=e[t].cells()[a];n(s.element(),o.element())&&(r.isNone()&&(r=v.some(i())),r.each((function(n){go(e[t],a,Rt(n,!0))})))},s=0;s<yo(e[0]);s++)a(s)},s=t;s<e.length;s++)a(s)}))}var a}(t,e,o,i.cell);var r=No(n,t),a=Mo(n,r,i),s=No(t,a),l=Mo(t,s,i);return l.slice(0,e).concat(a).concat(l.slice(e,l.length))},Lo=function(e,t,n,i,o){var r=e.slice(0,t),a=e.slice(t),s=vo(e[n],(function(n,r){return 0<t&&t<e.length&&i(mo(e[t-1],r),mo(e[t],r))?po(e[t],r):Rt(o(n.element(),i),!0)}));return r.concat([s]).concat(a)},Bo=function(e,t,n,i,o){return R(e,(function(e){var r=0<t&&t<yo(e)&&i(mo(e,t-1),mo(e,t))?po(e,t):Rt(o(mo(e,n),i),!0);return fo(e,t,r)}))},Fo=function(e,t,n,i){return R(e,(function(e){return vo(e,(function(e){return o=e,O(t,(function(e){return n(o.element(),e.element())}))?Rt(i(e.element(),n),!0):e;var o}))}))},zo=function(e,t,n,i){return void 0!==mo(e[t],n)&&0<t&&i(mo(e[t-1],n),mo(e[t],n))},Ho=function(e,t,n){return 0<t&&n(mo(e,t-1),mo(e,t))},Vo=function(e,t,n,i){var o=L(e,(function(i,o){return zo(e,o,t,n)||Ho(i,t,n)?[]:[po(i,t)]}));return Fo(e,o,n,i)},Wo=function(e,t,n,i){var o=e[t],r=L(o.cells(),(function(i,r){return zo(e,t,r,n)||Ho(o,r,n)?[]:[i]}));return Fo(e,r,n,i)},$o=jn([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),qo=Fi({},$o),Uo=function(e,t){return de(e,t)&&1<parseInt(ce(e,t),10)},jo={hasColspan:function(e){return Uo(e,"colspan")},hasRowspan:function(e){return Uo(e,"rowspan")},minWidth:o(10),minHeight:o(10),getInt:function(e,t){return parseInt(Ie(e,t),10)}},Go=function(e,t,n){return we(e,t).fold((function(){return n(e)+"px"}),(function(e){return e}))},Xo=function(e,t){return Go(e,"width",(function(e){return yi.getPixelWidth(e,t)}))},Yo=function(e){return Go(e,"height",yi.getHeight)},Zo=function(e,t,n,i,o){var r=Xi(e),a=R(r,(function(e){return e.map(t.edge)}));return R(r,(function(e,t){return e.filter(d(jo.hasColspan)).fold((function(){var e=ji(a,t);return i(e)}),(function(e){return n(e,o)}))}))},Jo=function(e){return e.map((function(e){return e+"px"})).getOr("")},Qo=function(e,t,n,i){var o=Yi(e),r=R(o,(function(e){return e.map(t.edge)}));return R(o,(function(e,t){return e.filter(d(jo.hasRowspan)).fold((function(){var e=ji(r,t);return i(e)}),(function(e){return n(e)}))}))},er={getRawWidths:function(e,t,n){return Zo(e,t,Xo,Jo,n)},getPixelWidths:function(e,t,n){return Zo(e,t,yi.getPixelWidth,(function(e){return e.getOrThunk(n.minCellWidth)}),n)},getPercentageWidths:function(e,t,n){return Zo(e,t,yi.getPercentageWidth,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}),n)},getPixelHeights:function(e,t){return Qo(e,t,yi.getHeight,(function(e){return e.getOrThunk(jo.minHeight)}))},getRawHeights:function(e,t){return Qo(e,t,Yo,Jo)}},tr=function(e,t,n){for(var i=0,o=e;o<t;o++)i+=void 0!==n[o]?n[o]:0;return i},nr=function(e,t){var n=rn(e);return R(n,(function(e){var n=tr(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:o(n),colspan:e.colspan}}))},ir=function(e){var t=r;return{width:o(e),pixelWidth:o(e),getWidths:er.getPixelWidths,getCellDelta:t,singleColumnWidth:function(e,t){return[Math.max(jo.minWidth(),e+t)-e]},minCellWidth:jo.minWidth,setElementWidth:yi.setPixelWidth,setTableWidth:function(e,t,n){var i=A(t,(function(e,t){return e+t}),0);yi.setPixelWidth(e,i)}}},or=function(e){return yi.getRawWidth(e).fold((function(){var t=li(e);return ir(t)}),(function(t){return function(e,t){var n,i,r,a=yi.percentageBasedSizeRegex().exec(t);if(null!==a)return n=e,i=parseFloat(a[1]),r=li(n),{width:o(i),pixelWidth:o(r),getWidths:er.getPercentageWidths,getCellDelta:function(e){return e/r*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return jo.minWidth()/r*100},setElementWidth:yi.setPercentageWidth,setTableWidth:function(e,t,n){yi.setPercentageWidth(e,i+n/100*i)}};var s=yi.pixelBasedSizeRegex().exec(t);if(null!==s){var l=parseInt(s[1],10);return ir(l)}var u=li(e);return ir(u)}(e,t)}))},rr=function(e){return en(e)},ar=function(e){var t=Zt(e);return rr(t)},sr=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return sr(n())}}},lr=function(e,t){var n=S(t,(function(t){return!w(e,t)}));0<n.length&&U(n)},ur=function(e){return function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return j("required",t),G(t),function(i){var o=F(i);B(t,(function(e){return w(o,e)}))||q(t,o),e(t,o);var r=S(t,(function(e){return!n.validate(i[e],e)}));return 0<r.length&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+$(e).join(", ")+") were not.")}(r,n.label),i}}(lr,e,{validate:E,label:"function"})},cr=ur(["cell","row","replace","gap"]),dr=function(e){var t=de(e,"colspan")?parseInt(ce(e,"colspan"),10):1,n=de(e,"rowspan")?parseInt(ce(e,"rowspan"),10):1;return{element:o(e),colspan:o(t),rowspan:o(n)}},fr=function(e,t){void 0===t&&(t=dr),cr(e);var n=sr(v.none()),i=function(i){var r=function(n){var i=t(n);return e.cell(i)}(i);return n.get().isNone()&&n.set(v.some(r)),o=v.some({item:i,replacement:r}),r},o=v.none();return{getOrInit:function(e,t){return o.fold((function(){return i(e)}),(function(n){return t(e,n.item)?n.replacement:i(e)}))},cursor:n.get}},hr=function(e,t){return function(n){var i=sr(v.none());cr(n);var o=[],r=function(r){var a=n.replace(r,t,{scope:e});return o.push({item:r,sub:a}),i.get().isNone()&&i.set(v.some(a)),a};return{replaceOrInit:function(e,t){return(n=e,i=t,M(o,(function(e){return i(e.item,n)}))).fold((function(){return r(e)}),(function(n){return t(e,n.item)?n.sub:r(e)}));var n,i},cursor:i.get}}},gr=function(e){cr(e);var t=sr(v.none());return{combine:function(n){return t.get().isNone()&&t.set(v.some(n)),function(){var t=e.cell({element:o(n),colspan:o(1),rowspan:o(1)});return Oe(t,"width"),Oe(n,"width"),t}},cursor:t.get}},pr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],mr=Ln(),vr=function(e){return function(e,t){var n=e.property().name(t);return w(pr,n)}(mr,e)},yr=function(e){return function(e,t){var n=e.property().name(t);return w(["ol","ul"],n)}(mr,e)},br=function(e){var t,n=function(e){return"br"===te(e)},i=0===(t=L(e,(function(e){var t=dt(e);return B(t,(function(e){return n(e)||ae(e)&&0===un(e).trim().length}))?[]:t.concat(function(e){return mn(e).bind((function(t){var i=ct(t).map((function(e){return!!vr(e)||!!function(e){return function(e,t){return w(["br","img","hr","input"],e.property().name(t))}(mr,e)}(e)&&"img"!==te(e)})).getOr(!1);return st(t).map((function(o){return!0===i||"li"===te(r=o)||zt(r,yr).isSome()||n(t)||vr(o)&&!it(e,o)?[]:[ye.fromTag("br")];var r}))})).getOr([])}(e))}))).length?[ye.fromTag("br")]:t;Tt(e[0]),bt(e[0],i)},Tr=function(e){0===Xt(e).length&&Ct(e)},Cr=W("grid","cursor"),Er=function(e,t,n){return _r(e,t,n).orThunk((function(){return _r(e,0,0)}))},_r=function(e,t,n){return v.from(e[t]).bind((function(e){return v.from(e.cells()[n]).bind((function(e){return v.from(e.element())}))}))},xr=function(e,t,n){return Cr(e,_r(e,t,n))},Ir=function(e){return N(e,(function(e,t){return O(e,(function(e){return e.row()===t.row()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row()-t.row()}))},Dr=function(e){return N(e,(function(e,t){return O(e,(function(e){return e.column()===t.column()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column()-t.column()}))},wr=function(e,t,n){var i=function(e,t){return R(e,(function(e){var n=R(Xt(e),(function(e){var t=de(e,"rowspan")?parseInt(ce(e,"rowspan"),10):1,n=de(e,"colspan")?parseInt(ce(e,"colspan"),10):1;return It(e,t,n)}));return Ot(e,n,t.section())}))}(e,n),o=en(i);return To(o,t,!0)},Or=function(e,t,n){var i=or(e),o=rr(t),r=i.getWidths(o,n,i),a=nr(o,r);k(a,(function(e){i.setElementWidth(e.element(),e.width())})),0<a.length&&i.setTableWidth(e,r,i.getCellDelta(0))},Rr={insertRowBefore:_o((function(e,t,n,i){var o=t.row(),r=t.row(),a=Lo(e,r,o,n,i.getOrInit);return xr(a,r,t.column())}),xo,n,n,fr),insertRowsBefore:_o((function(e,t,n,i){var o=t[0].row(),r=t[0].row(),a=Ir(t),s=N(a,(function(e,t){return Lo(e,r,o,n,i.getOrInit)}),e);return xr(s,r,t[0].column())}),Do,n,n,fr),insertRowAfter:_o((function(e,t,n,i){var o=t.row(),r=t.row()+t.rowspan(),a=Lo(e,r,o,n,i.getOrInit);return xr(a,r,t.column())}),xo,n,n,fr),insertRowsAfter:_o((function(e,t,n,i){var o=Ir(t),r=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),s=N(o,(function(e,t){return Lo(e,a,r,n,i.getOrInit)}),e);return xr(s,a,t[0].column())}),Do,n,n,fr),insertColumnBefore:_o((function(e,t,n,i){var o=t.column(),r=t.column(),a=Bo(e,r,o,n,i.getOrInit);return xr(a,t.row(),r)}),xo,Or,n,fr),insertColumnsBefore:_o((function(e,t,n,i){var o=Dr(t),r=o[0].column(),a=o[0].column(),s=N(o,(function(e,t){return Bo(e,a,r,n,i.getOrInit)}),e);return xr(s,t[0].row(),a)}),Do,Or,n,fr),insertColumnAfter:_o((function(e,t,n,i){var o=t.column(),r=t.column()+t.colspan(),a=Bo(e,r,o,n,i.getOrInit);return xr(a,t.row(),r)}),xo,Or,n,fr),insertColumnsAfter:_o((function(e,t,n,i){var o=t[t.length-1].column(),r=t[t.length-1].column()+t[t.length-1].colspan(),a=Dr(t),s=N(a,(function(e,t){return Bo(e,r,o,n,i.getOrInit)}),e);return xr(s,t[0].row(),r)}),Do,Or,n,fr),splitCellIntoColumns:_o((function(e,t,n,i){var o=function(e,t,n,i,o){var r=n+1;return R(e,(function(e,a){var s=a===t?Rt(o(mo(e,n),i),!0):po(e,n);return fo(e,r,s)}))}(e,t.row(),t.column(),n,i.getOrInit);return xr(o,t.row(),t.column())}),xo,Or,n,fr),splitCellIntoRows:_o((function(e,t,n,i){var o=function(e,t,n,i,o){var r=t+1,a=e.slice(0,r),s=e.slice(r),l=vo(e[t],(function(e,t){return t===n?Rt(o(e.element(),i),!0):e}));return a.concat([l]).concat(s)}(e,t.row(),t.column(),n,i.getOrInit);return xr(o,t.row(),t.column())}),xo,n,n,fr),eraseColumns:_o((function(e,t,n,i){var o=Dr(t),r=function(e,t,n){var i=R(e,(function(e){var i=e.cells().slice(0,t).concat(e.cells().slice(n+1));return St(i,e.section())}));return S(i,(function(e){return 0<e.cells().length}))}(e,o[0].column(),o[o.length-1].column()),a=Er(r,t[0].row(),t[0].column());return Cr(r,a)}),Do,Or,Tr,fr),eraseRows:_o((function(e,t,n,i){var o=Ir(t),r=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))}(e,o[0].row(),o[o.length-1].row()),a=Er(r,t[0].row(),t[0].column());return Cr(r,a)}),Do,n,Tr,fr),makeColumnHeader:_o((function(e,t,n,i){var o=Vo(e,t.column(),n,i.replaceOrInit);return xr(o,t.row(),t.column())}),xo,n,n,hr("row","th")),unmakeColumnHeader:_o((function(e,t,n,i){var o=Vo(e,t.column(),n,i.replaceOrInit);return xr(o,t.row(),t.column())}),xo,n,n,hr(null,"td")),makeRowHeader:_o((function(e,t,n,i){var o=Wo(e,t.row(),n,i.replaceOrInit);return xr(o,t.row(),t.column())}),xo,n,n,hr("col","th")),unmakeRowHeader:_o((function(e,t,n,i){var o=Wo(e,t.row(),n,i.replaceOrInit);return xr(o,t.row(),t.column())}),xo,n,n,hr(null,"td")),mergeCells:_o((function(e,t,n,i){var r=t.cells();br(r);var a=function(e,t,n,i){if(0===e.length)return e;for(var o=t.startRow();o<=t.finishRow();o++)for(var r=t.startCol();r<=t.finishCol();r++)go(e[o],r,Rt(i(),!1));return e}(e,t.bounds(),0,o(r[0]));return Cr(a,v.from(r[0]))}),(function(e,t){return t.mergable()}),n,n,gr),unmergeCells:_o((function(e,t,n,i){var o=A(t,(function(e,t){return Ko(e,t,n,i.combine(t))}),e);return Cr(o,v.from(t[0]))}),(function(e,t){return t.unmergable()}),Or,n,gr),pasteCells:_o((function(e,t,n,i){var r,s,l,u,c=(r=t.clipboard(),s=t.generators(),l=Zt(r),u=en(l),To(u,s,!0));return function(e,t,n,i,r){return function(e,t,n){if(e.row()>=t.length||e.column()>yo(t[0]))return Ro.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var i=t.slice(e.row()),r=i[0].cells().slice(e.column()),a=yo(n[0]);return Ro.value({rowDelta:o(i.length-n.length),colDelta:o(r.length-a)})}(e,t,n).map((function(o){var s=Mo(t,o,i);return function(e,t,n,i,o){for(var r,s,l,u,c,d=e.row(),f=e.column(),h=d+n.length,g=f+yo(n[0]),p=d;p<h;p++)for(var m=f;m<g;m++){c=u=void 0,u=a(o,po((r=t)[s=p],l=m).element()),c=r[s],1<r.length&&1<yo(c)&&(0<l&&u(mo(c,l-1))||l<c.cells().length-1&&u(mo(c,l+1))||0<s&&u(mo(r[s-1],l))||s<r.length-1&&u(mo(r[s+1],l)))&&Ko(t,mo(t[p],m),o,i.cell);var v=mo(n[p-d],m-f),y=i.replace(v);go(t[p],m,Rt(y,!0))}return t}(e,s,n,i,r)}))}(xt(t.row(),t.column()),e,c,t.generators(),n).fold((function(){return Cr(e,v.some(t.element()))}),(function(e){var n=Er(e,t.row(),t.column());return Cr(e,n)}))}),(function(e,t){return Gt(t.element()).bind((function(n){return Eo(e,n).map((function(e){return Fi(Fi({},e),{generators:t.generators,clipboard:t.clipboard})}))}))}),Or,n,fr),pasteRowsBefore:_o((function(e,t,n,i){var o=e[t.cells[0].row()],r=t.cells[0].row(),a=wr(t.clipboard(),t.generators(),o),s=Po(r,e,a,t.generators(),n),l=Er(s,t.cells[0].row(),t.cells[0].column());return Cr(s,l)}),Io,n,n,fr),pasteRowsAfter:_o((function(e,t,n,i){var o=e[t.cells[0].row()],r=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=wr(t.clipboard(),t.generators(),o),s=Po(r,e,a,t.generators(),n),l=Er(s,t.cells[0].row(),t.cells[0].column());return Cr(s,l)}),Io,n,n,fr)},kr=function(e){return ye.fromDom(e.getBody())},Sr=function(e){return e.getBoundingClientRect().width},Ar=function(e){return e.getBoundingClientRect().height},Nr=function(e){return function(t){return it(t,kr(e))}},Mr=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},Kr=function(e){var t=Pt(e,"td[data-mce-style],th[data-mce-style]");fe(e,"data-mce-style"),k(t,(function(e){fe(e,"data-mce-style")}))},Pr={isRtl:o(!1)},Lr={isRtl:o(!0)},Br=function(e){return"rtl"==("rtl"===Ie(e,"direction")?"rtl":"ltr")?Lr:Pr},Fr=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],zr={"border-collapse":"collapse",width:"100%"},Hr={border:"1"},Vr=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},Wr=function(e){return e.getParam("table_row_advtab",!0,"boolean")},$r=function(e){return e.getParam("table_advtab",!0,"boolean")},qr=function(e){return e.getParam("table_style_by_css",!1,"boolean")},Ur=function(e){return e.getParam("table_cell_class_list",[],"array")},jr=function(e){return e.getParam("table_row_class_list",[],"array")},Gr=function(e){return e.getParam("table_class_list",[],"array")},Xr=function(e){return!1===e.getParam("table_responsive_width")},Yr=function(e,t){return e.fire("newrow",{node:t})},Zr=function(e,t){return e.fire("newcell",{node:t})},Jr=function(e,t,n,i){e.fire("ObjectResizeStart",{target:t,width:n,height:i})},Qr=function(e,t,n,i){e.fire("ObjectResized",{target:t,width:n,height:i})},ea=function(e,t){var i,o=function(e){return"table"===te(kr(e))},r=(i=e.getParam("table_clone_elements"),b(i)?v.some(i.split(/[ ,]/)):Array.isArray(i)?v.some(i):v.none()),a=function(t,n,i,o){return function(a,s){Kr(a);var l=o(),u=ye.fromDom(e.getDoc()),c=Li(Br),d=In(i,u,r);return n(a)?t(l,a,s,d,c).bind((function(t){return k(t.newRows(),(function(t){Yr(e,t.dom())})),k(t.newCells(),(function(t){Zr(e,t.dom())})),t.cursor().map((function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n}))})):v.none()}};return{deleteRow:a(Rr.eraseRows,(function(t){var n=Bi(t);return!1===o(e)||1<n.rows()}),n,t),deleteColumn:a(Rr.eraseColumns,(function(t){var n=Bi(t);return!1===o(e)||1<n.columns()}),n,t),insertRowsBefore:a(Rr.insertRowsBefore,h,n,t),insertRowsAfter:a(Rr.insertRowsAfter,h,n,t),insertColumnsBefore:a(Rr.insertColumnsBefore,h,bi,t),insertColumnsAfter:a(Rr.insertColumnsAfter,h,bi,t),mergeCells:a(Rr.mergeCells,h,n,t),unmergeCells:a(Rr.unmergeCells,h,n,t),pasteRowsBefore:a(Rr.pasteRowsBefore,h,n,t),pasteRowsAfter:a(Rr.pasteRowsAfter,h,n,t),pasteCells:a(Rr.pasteCells,h,n,t)}},ta=tinymce.util.Tools.resolve("tinymce.util.Tools"),na=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},ia=function(e,t){ta.each("left center right".split(" "),(function(n){e.formatter.remove("align"+n,{},t)}))},oa=function(e,t,n){return function(t,i){for(var o=0;o<i.length;o++){var r=e.getStyle(i[o],n);if(void 0===t&&(t=r),t!==r)return""}return t}(void 0,e.select("td,th",t))},ra=function(e,t){var n=e.dom,i=t.control.rootControl,o=i.toJSON(),r=n.parseStyle(o.style);r["border-style"]=o.borderStyle,r["border-color"]=o.borderColor,r["background-color"]=o.backgroundColor,r.width=o.width?Mr(o.width):"",r.height=o.height?Mr(o.height):"",i.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(r))))},aa=function(e,t){var n=e.dom,i=t.control.rootControl,o=i.toJSON(),r=n.parseStyle(o.style);i.find("#borderStyle").value(r["border-style"]||""),i.find("#borderColor").value(r["border-color"]||""),i.find("#backgroundColor").value(r["background-color"]||""),i.find("#width").value(r.width||""),i.find("#height").value(r.height||"")},sa=function(e){var t=function(){var t=e.getParam("color_picker_callback");if(t)return function(n){return t.call(e,(function(e){n.control.value(e).fire("change")}),n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:a(ra,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:a(aa,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:a(ra,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},la=function(e,t,n){var i=function(e,n){return n=n||[],ta.each(e,(function(e){var o={text:e.text||e.title};e.menu?o.menu=i(e.menu):(o.value=e.value,t&&t(o)),n.push(o)})),n};return i(e,n||[])},ua=ra,ca=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),i={};return n["border-style"]&&(i.borderStyle=n["border-style"]),n["border-color"]&&(i.borderColor=n["border-color"]),n["background-color"]&&(i.backgroundColor=n["background-color"]),i.style=e.serializeStyle(n),i},da=function(t,n){n.control.rootControl.find("#style")[0].getEl().isEqualNode(e.document.activeElement)?aa(t,n):ra(t,n)},fa=function(e,t,n){var i,o=e.dom;function r(e,n,i){(1===t.length||i)&&o.setAttrib(e,n,i)}function a(e,n,i){(1===t.length||i)&&o.setStyle(e,n,i)}Vr(e)&&da(e,n),i=n.control.rootControl.toJSON(),e.undoManager.transact((function(){ta.each(t,(function(n){var s,l;r(n,"scope",i.scope),1===t.length?r(n,"style",i.style):(l=i.style,delete(s=n).dataset.mceStyle,s.style.cssText+=";"+l),r(n,"class",i.class),a(n,"width",Mr(i.width)),a(n,"height",Mr(i.height)),i.type&&n.nodeName.toLowerCase()!==i.type&&(n=o.rename(n,i.type)),1===t.length&&(ia(e,n),function(e,t){ta.each("top middle bottom".split(" "),(function(n){e.formatter.remove("valign"+n,{},t)}))}(e,n)),i.align&&na(e,n,i.align),i.valign&&function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)}(e,n,i.valign)})),e.focus()}))},ha=function(e){var t,n,i,o=[];if(o=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!o.length&&t&&o.push(t),t=t||o[0]){var r,s,l,u;1<o.length?n={width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:(l=(r=e).dom,u={width:l.getStyle(s=t,"width")||l.getAttrib(s,"width"),height:l.getStyle(s,"height")||l.getAttrib(s,"height"),scope:l.getAttrib(s,"scope"),class:l.getAttrib(s,"class"),type:s.nodeName.toLowerCase(),style:"",align:"",valign:""},ta.each("left center right".split(" "),(function(e){r.formatter.matchNode(s,"align"+e)&&(u.align=e)})),ta.each("top middle bottom".split(" "),(function(e){r.formatter.matchNode(s,"valign"+e)&&(u.valign=e)})),Vr(r)&&ta.extend(u,ca(l,s)),n=u),0<Ur(e).length&&(i={name:"class",type:"listbox",label:"Class",values:la(Ur(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})}))});var c={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:a(ua,e)},{label:"Height",name:"height",onchange:a(ua,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},i]};Vr(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:c},sa(e)],onsubmit:a(fa,e,o)}):e.windowManager.open({title:"Cell properties",data:n,body:c,onsubmit:a(fa,e,o)})}};function ga(e,t,n,i){var o=e.dom;function r(e,n,i){(1===t.length||i)&&o.setAttrib(e,n,i)}Wr(e)&&da(e,i);var a=i.control.rootControl.toJSON();e.undoManager.transact((function(){ta.each(t,(function(i){var s,l,u,c,d,f,h,g;r(i,"scope",a.scope),r(i,"style",a.style),r(i,"class",a.class),s=i,l=Mr(a.height),(1===t.length||l)&&o.setStyle(s,"height",l),a.type!==i.parentNode.nodeName.toLowerCase()&&(d=a.type,f=(u=e.dom).getParent(c=i,"table"),h=c.parentNode,(g=u.select(d,f)[0])||(g=u.create(d),f.firstChild?"CAPTION"===f.firstChild.nodeName?u.insertAfter(g,f.firstChild):f.insertBefore(g,f.firstChild):f.appendChild(g)),g.appendChild(c),h.hasChildNodes()||u.remove(h)),a.align!==n.align&&(ia(e,i),na(e,i,a.align))})),e.focus()}))}var pa=function(e){var t,n,i,o,r,s,l,u,c,d,f=e.dom,h=[];t=f.getParent(e.selection.getStart(),"table"),n=f.getParent(e.selection.getStart(),"td,th"),ta.each(t.rows,(function(e){ta.each(e.cells,(function(t){if(f.getAttrib(t,"data-mce-selected")||t===n)return h.push(e),!1}))})),(i=h[0])&&(1<h.length?r={height:"",scope:"",style:"",class:"",align:"",type:i.parentNode.nodeName.toLowerCase()}:(c=(l=e).dom,d={height:c.getStyle(u=i,"height")||c.getAttrib(u,"height"),scope:c.getAttrib(u,"scope"),class:c.getAttrib(u,"class"),align:"",style:"",type:u.parentNode.nodeName.toLowerCase()},ta.each("left center right".split(" "),(function(e){l.formatter.matchNode(u,"align"+e)&&(d.align=e)})),Wr(l)&&ta.extend(d,ca(c,u)),r=d),0<jr(e).length&&(o={name:"class",type:"listbox",label:"Class",values:la(jr(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})}))}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},Wr(e)?e.windowManager.open({title:"Row properties",data:r,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},sa(e)],onsubmit:a(ga,e,h,r)}):e.windowManager.open({title:"Row properties",data:r,body:s,onsubmit:a(ga,e,h,r)}))},ma=tinymce.util.Tools.resolve("tinymce.Env"),va={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},ya=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},ba=function(e,t,n){var i,o,r=e.getParam("table_default_styles",zr,"object"),s=function(e,t,n,i,o){void 0===o&&(o=va);var r=ye.fromTag("table");xe(r,o.styles),ue(r,o.attributes);var a=ye.fromTag("tbody");mt(r,a);for(var s=[],l=0;l<e;l++){for(var u=ye.fromTag("tr"),c=0;c<t;c++){var d=ye.fromTag(l<0||c<0?"th":"td");c<0&&le(d,"scope","row"),l<0&&le(d,"scope","col"),mt(d,ye.fromTag("br")),o.percentages&&_e(d,"width",100/t+"%"),mt(u,d)}s.push(u)}return bt(a,s),r}(n,t,0,0,{styles:r,attributes:(o=e,o.getParam("table_default_attributes",Hr,"object")),percentages:(i=r.width,b(i)&&-1!==i.indexOf("%")&&!Xr(e))});le(s,"data-mce-id","__mce");var l,u,c,d=(l=s,u=ye.fromTag("div"),c=ye.fromDom(l.dom().cloneNode(!0)),mt(u,c),u.dom().innerHTML);return e.insertContent(d),Wt(kr(e),'table[data-mce-id="__mce"]').map((function(t){var n,i;return Xr(e)&&_e(t,"width",Ie(t,"width")),fe(t,"data-mce-id"),n=e,k(Pt(t,"tr"),(function(e){Yr(n,e.dom()),k(Pt(e,"th,td"),(function(e){Zr(n,e.dom())}))})),i=e,Wt(t,"td,th").each(a(ya,i)),t.dom()})).getOr(null)};function Ta(e,t,n,i){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,i);else if(t.children)for(var o=0;o<t.children.length;o++)Ta(e,t.children[o],n,i)}var Ca,Ea=function(e,t,n){var i,o,r=e.dom;$r(e)&&da(e,n),!1===(o=n.control.rootControl.toJSON()).class&&delete o.class,e.undoManager.transact((function(){t||(t=ba(e,o.cols||1,o.rows||1)),function(e,t,n){var i,o=e.dom,r={},a={};if(r.class=n.class,a.height=Mr(n.height),o.getAttrib(t,"width")&&!qr(e)?r.width=(i=n.width)?i.replace(/px$/,""):"":a.width=Mr(n.width),qr(e)?(a["border-width"]=Mr(n.border),a["border-spacing"]=Mr(n.cellspacing),ta.extend(r,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):ta.extend(r,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),qr(e)&&t.children)for(var s=0;s<t.children.length;s++)Ta(o,t.children[s],{"border-width":Mr(n.border),"border-color":n.borderColor,padding:Mr(n.cellpadding)});n.style?ta.extend(a,o.parseStyle(n.style)):a=ta.extend({},o.parseStyle(o.getAttrib(t,"style")),a),r.style=o.serializeStyle(a),o.setAttribs(t,r)}(e,t,o),(i=r.select("caption",t)[0])&&!o.caption&&r.remove(i),!i&&o.caption&&((i=r.create("caption")).innerHTML=ma.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(i,t.firstChild)),ia(e,t),o.align&&na(e,t,o.align),e.focus(),e.addVisual()}))},_a=function(e,t){var n,i,o,r,s,l,u,c,d,f,h={};!0===t?(n=e.dom.getParent(e.selection.getStart(),"table"))&&(c=(l=e).dom,d={width:c.getStyle(u=n,"width")||c.getAttrib(u,"width"),height:c.getStyle(u,"height")||c.getAttrib(u,"height"),cellspacing:c.getStyle(u,"border-spacing")||c.getAttrib(u,"cellspacing"),cellpadding:c.getAttrib(u,"data-mce-cell-padding")||c.getAttrib(u,"cellpadding")||oa(l.dom,u,"padding"),border:c.getAttrib(u,"data-mce-border")||c.getAttrib(u,"border")||oa(l.dom,u,"border"),borderColor:c.getAttrib(u,"data-mce-border-color"),caption:!!c.select("caption",u)[0],class:c.getAttrib(u,"class")},ta.each("left center right".split(" "),(function(e){l.formatter.matchNode(u,"align"+e)&&(d.align=e)})),$r(l)&&ta.extend(d,ca(c,u)),h=d):(i={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),0<Gr(e).length&&(h.class&&(h.class=h.class.replace(/\s*mce\-item\-table\s*/g,"")),r={name:"class",type:"listbox",label:"Class",values:la(Gr(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})}))}),s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:(f=e,f.getParam("table_appearance_options",!0,"boolean")?[i,o,{label:"Width",name:"width",onchange:a(ua,e)},{label:"Height",name:"height",onchange:a(ua,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[i,o,{label:"Width",name:"width",onchange:a(ua,e)},{label:"Height",name:"height",onchange:a(ua,e)}])},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},r]},$r(e)?e.windowManager.open({title:"Table properties",data:h,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},sa(e)],onsubmit:a(Ea,e,n)}):e.windowManager.open({title:"Table properties",data:h,body:s,onsubmit:a(Ea,e,n)})},xa=ta.each,Ia=function(e){var t=v.from(e.dom().documentElement).map(ye.fromDom).getOr(e);return{parent:o(t),view:o(e),origin:o(Ci(0,0))}},Da=function(e){var t=W.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");n.push(e)},unbind:function(e){n=S(n,(function(t){return t!==e}))},trigger:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=t.apply(null,e);k(n,(function(e){e(o)}))}}},wa=function(e){return{registry:H(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),trigger:H(e,(function(e){return e.trigger}))}},Oa=function(e,t,n,i){e.dom().removeEventListener(t,n,i)},Ra=o(!0),ka=function(e,t,n){return function(e,t,n,r){return s=e,l=t,u=function(e,t){return function(n){if(e(n)){var r,a,s,l,u,c,d=ye.fromDom(n.target),f=function(){n.stopPropagation()},h=function(){n.preventDefault()},g=i(h,f),p=(r=n.clientX,a=n.clientY,s=f,l=h,u=g,c=n,{target:o(d),x:o(r),y:o(a),stop:s,prevent:l,kill:u,raw:o(c)});t(p)}}}(n,r),s.dom().addEventListener(l,u,!1),{unbind:a(Oa,s,l,u,!1)};var s,l,u}(e,t,Ra,n)},Sa=Object.prototype.hasOwnProperty,Aa=(Ca=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},i=0;i<e.length;i++){var o=e[i];for(var r in o)Sa.call(o,r)&&(n[r]=Ca(0,o[r]))}return n}),Na={resolve:Zi("ephox-dragster").resolve},Ma=ur(["compare","extract","mutate","sink"]),Ka=ur(["element","start","stop","destroy"]),Pa=ur(["forceDrop","drop","move","delayDrop"]),La=Ma({compare:function(e,t){return Ci(t.left()-e.left(),t.top()-e.top())},extract:function(e){return v.some(Ci(e.x(),e.y()))},sink:function(e,t){var n,i,o,r=(n=t,i=Aa({layerClass:Na.resolve("blocker")},n),o=ye.fromTag("div"),le(o,"role","presentation"),xe(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),$i(o,Na.resolve("blocker")),$i(o,i.layerClass),{element:function(){return o},destroy:function(){Ct(o)}}),a=ka(r.element(),"mousedown",e.forceDrop),s=ka(r.element(),"mouseup",e.drop),l=ka(r.element(),"mousemove",e.move),u=ka(r.element(),"mouseout",e.delayDrop);return Ka({element:r.element,start:function(e){mt(e,r.element())},stop:function(){Ct(r.element())},destroy:function(){r.destroy(),s.unbind(),l.unbind(),u.unbind(),a.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}}),Ba=function(t,i){return void 0===i&&(i={}),function(t,i,o){var r,a,s=!1,l=wa({start:Da([]),stop:Da([])}),u=function(){var e={onEvent:n,reset:n},t=function(){var e=v.none(),t=wa({move:Da(["info"])});return{onEvent:function(n,i){i.extract(n).each((function(n){var o,r,a;(o=i,r=n,a=e.map((function(e){return o.compare(e,r)})),e=v.some(r),a).each((function(e){t.trigger.move(e)}))}))},reset:function(){e=v.none()},events:t.registry}}(),i=e;return{on:function(){i.reset(),i=t},off:function(){i.reset(),i=e},isOn:function(){return i===t},onEvent:function(e,t){i.onEvent(e,t)},events:t.events}}(),c=function(){h.stop(),u.isOn()&&(u.off(),l.trigger.stop())},d=(r=c,a=null,{cancel:function(){null!==a&&(e.clearTimeout(a),a=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==a&&e.clearTimeout(a),a=e.setTimeout((function(){r.apply(null,t),a=null}),200)}});u.events.move.bind((function(e){i.mutate(t,e.info())}));var f=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s&&e.apply(null,t)}},h=i.sink(Pa({forceDrop:c,drop:f(c),move:f((function(e){d.cancel(),u.onEvent(e,i)})),delayDrop:f(d.throttle)}),o);return{element:h.element,go:function(e){h.start(e),u.on(),l.trigger.start()},on:function(){s=!0},off:function(){s=!1},destroy:function(){h.destroy()},events:l.registry}}(t,void 0!==i.mode?i.mode:La,i)},Fa=function(e){return"true"===ce(e,"contenteditable")},za=Ji.resolve("resizer-bar-dragging"),Ha=jn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Va=Fi(Fi({},Ha),{none:function(e){return void 0===e&&(e=void 0),Ha.none(e)}}),Wa=function(e,t){return Yt(e,t).bind((function(t){var n=Xt(t);return K(n,(function(t){return it(e,t)})).map((function(e){return{index:o(e),all:o(n)}}))}))},$a={create:W("start","soffset","finish","foffset")},qa=jn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ua={before:qa.before,on:qa.on,after:qa.after,cata:function(e,t,n,i){return e.fold(t,n,i)},getStart:function(e){return e.fold(r,r,r)}},ja=jn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ga={domRange:ja.domRange,relative:ja.relative,exact:ja.exact,exactFromRange:function(e){return ja.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=e.match({domRange:function(e){return ye.fromDom(e.startContainer)},relative:function(e,t){return Ua.getStart(e)},exact:function(e,t,n,i){return e}});return ye.fromDom(t.dom().ownerDocument.defaultView)},range:$a.create},Xa=function(e,t,n){var i,o,r=e.document.createRange();return i=r,t.fold((function(e){i.setStartBefore(e.dom())}),(function(e,t){i.setStart(e.dom(),t)}),(function(e){i.setStartAfter(e.dom())})),o=r,n.fold((function(e){o.setEndBefore(e.dom())}),(function(e,t){o.setEnd(e.dom(),t)}),(function(e){o.setEndAfter(e.dom())})),r},Ya=function(e,t,n,i,o){var r=e.document.createRange();return r.setStart(t.dom(),n),r.setEnd(i.dom(),o),r},Za=function(e){return{left:o(e.left),top:o(e.top),right:o(e.right),bottom:o(e.bottom),width:o(e.width),height:o(e.height)}},Ja=jn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Qa=function(e,t,n){return t(ye.fromDom(n.startContainer),n.startOffset,ye.fromDom(n.endContainer),n.endOffset)},es=function(e,t){var n,i,r,a=(n=e,t.match({domRange:function(e){return{ltr:o(e),rtl:v.none}},relative:function(e,t){return{ltr:me((function(){return Xa(n,e,t)})),rtl:me((function(){return v.some(Xa(n,t,e))}))}},exact:function(e,t,i,o){return{ltr:me((function(){return Ya(n,e,t,i,o)})),rtl:me((function(){return v.some(Ya(n,i,o,e,t))}))}}}));return(r=(i=a).ltr()).collapsed?i.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Ja.rtl(ye.fromDom(e.endContainer),e.endOffset,ye.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return Qa(0,Ja.ltr,r)})):Qa(0,Ja.ltr,r)},ts=function(e,t){return es(e,t).match({ltr:function(t,n,i,o){var r=e.document.createRange();return r.setStart(t.dom(),n),r.setEnd(i.dom(),o),r},rtl:function(t,n,i,o){var r=e.document.createRange();return r.setStart(i.dom(),o),r.setEnd(t.dom(),n),r}})},ns=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},is=function(e,t,n,i){return ae(t)?function(e,t,n,i){var o=e.dom().createRange();o.selectNode(t.dom());var r=o.getClientRects();return Hi(r,(function(e){return ns(e,n,i)?v.some(e):v.none()})).map((function(o){return function(e,t,n,i,o){var r=function(n){var i=e.dom().createRange();return i.setStart(t.dom(),n),i.collapse(!0),i},a=un(t).length,s=function(e,t,n,i,o){if(0===o)return 0;if(t===i)return o-1;for(var r=i,a=1;a<o;a++){var s=e(a),l=Math.abs(t-s.left);if(n<=s.bottom){if(n<s.top||r<l)return a-1;r=l}}return 0}((function(e){return r(e).getBoundingClientRect()}),n,i,o.right,a);return r(s)}(e,t,n,i,o)}))}(e,t,n,i):(r=t,a=n,s=i,l=(o=e).dom().createRange(),u=dt(r),Hi(u,(function(e){return l.selectNode(e.dom()),ns(l.getBoundingClientRect(),a,s)?is(o,e,a,s):v.none()})));var o,r,a,s,l,u},os=function(e,t){return t-e.left<e.right-t},rs=function(e,t,n){var i=e.dom().createRange();return i.selectNode(t.dom()),i.collapse(n),i},as=function(e,t,n){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getBoundingClientRect(),r=os(o,n);return(!0===r?pn:mn)(t).map((function(t){return rs(e,t,r)}))},ss=function(e,t,n){var i=t.dom().getBoundingClientRect(),o=os(i,n);return v.some(rs(e,t,o))},ls=document.caretPositionFromPoint?function(e,t,n){return v.from(e.dom().caretPositionFromPoint(t,n)).bind((function(t){if(null===t.offsetNode)return v.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),v.some(n)}))}:document.caretRangeFromPoint?function(e,t,n){return v.from(e.dom().caretRangeFromPoint(t,n))}:function(e,t,n){return ye.fromPoint(e,t,n).bind((function(i){var o=function(){return n=e,r=t,(0===dt(o=i).length?ss:as)(n,o,r);var n,o,r};return 0===dt(i).length?o():function(e,t,n,i){var o=e.dom().createRange();o.selectNode(t.dom());var r=o.getBoundingClientRect();return function(e,t,n,i){var o=e.dom().createRange();o.selectNode(t.dom());var r=o.getBoundingClientRect(),a=Math.max(r.left,Math.min(r.right,n)),s=Math.max(r.top,Math.min(r.bottom,i));return is(e,t,a,s)}(e,t,Math.max(r.left,Math.min(r.right,n)),Math.max(r.top,Math.min(r.bottom,i)))}(e,i,t,n).orThunk(o)}))},us=function(e,t){var n=te(e);return"input"===n?Ua.after(e):w(["br","img"],n)?0===t?Ua.before(e):Ua.after(e):Ua.on(e,t)},cs=function(e,t){var n=e.fold(Ua.before,us,Ua.after),i=t.fold(Ua.before,us,Ua.after);return Ga.relative(n,i)},ds=function(e,t,n,i){var o=us(e,t),r=us(n,i);return Ga.relative(o,r)},fs=function(e,t){v.from(e.getSelection()).each((function(e){e.removeAllRanges(),e.addRange(t)}))},hs=function(e,t,n,i,o){var r=Ya(e,t,n,i,o);fs(e,r)},gs=function(e,t){return es(e,t).match({ltr:function(t,n,i,o){hs(e,t,n,i,o)},rtl:function(t,n,i,o){var r,a,s,l,u=e.getSelection();if(u.setBaseAndExtent)u.setBaseAndExtent(t.dom(),n,i.dom(),o);else if(u.extend)try{a=n,s=i,l=o,(r=u).collapse(t.dom(),a),r.extend(s.dom(),l)}catch(f){hs(e,i,o,t,n)}else hs(e,i,o,t,n)}})},ps=function(e){var t=ye.fromDom(e.anchorNode),n=ye.fromDom(e.focusNode);return function(e,t,n,i){var o,r,a,s,l,u=(r=t,a=n,s=i,(l=at(o=e).dom().createRange()).setStart(o.dom(),r),l.setEnd(a.dom(),s),l),c=it(e,n)&&t===i;return u.collapsed&&!c}(t,e.anchorOffset,n,e.focusOffset)?v.some($a.create(t,e.anchorOffset,n,e.focusOffset)):function(e){if(0<e.rangeCount){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return v.some($a.create(ye.fromDom(t.startContainer),t.startOffset,ye.fromDom(n.endContainer),n.endOffset))}return v.none()}(e)},ms=tinymce.util.Tools.resolve("tinymce.util.VK"),vs=function(e,t,n,i){return Ts(e,t,function(e,t){return Wa(e,void 0).fold((function(){return Va.none(e)}),(function(t){return t.index()+1<t.all().length?Va.middle(e,t.all()[t.index()+1]):Va.last(e)}))}(n),i)},ys=function(e,t,n,i){return Ts(e,t,function(e,t){return Wa(e,void 0).fold((function(){return Va.none()}),(function(t){return 0<=t.index()-1?Va.middle(e,t.all()[t.index()-1]):Va.first(e)}))}(n),i)},bs=function(e,t){return function(e){var t=Ga.getWin(e).dom(),n=function(e,n,i,o){return Ya(t,e,n,i,o)},i=e.match({domRange:function(e){var t=ye.fromDom(e.startContainer),n=ye.fromDom(e.endContainer);return ds(t,e.startOffset,n,e.endOffset)},relative:cs,exact:ds});return es(t,i).match({ltr:n,rtl:n})}(Ga.exact(t,0,t,0))},Ts=function(e,t,n,i,o){return n.fold(v.none,v.none,(function(e,t){return pn(t).map((function(e){return bs(0,e)}))}),(function(n){return Yt(n,t).bind((function(t){var o=ni.noMenu(n);return e.undoManager.transact((function(){i.insertRowsAfter(t,o)})),function(e,t){var n;return(n=Pt(t,"tr"),0===n.length?v.none():v.some(n[n.length-1])).bind((function(e){return Wt(e,"td,th").map((function(e){return bs(0,e)}))}))}(0,t)}))}))},Cs=["table","li","dl"],Es={create:W("selection","kill")},_s=function(e,t,n,i){return{start:o(Ua.on(e,t)),finish:o(Ua.on(n,i))}},xs=function(e,t){var n=ts(e,t);return $a.create(ye.fromDom(n.startContainer),n.startOffset,ye.fromDom(n.endContainer),n.endOffset)},Is=_s,Ds=function(e,t,n,i,o){return it(n,i)?v.none():Wn(n,i,t).bind((function(t){var i=t.boxes().getOr([]);return 0<i.length?(o(e,i,t.start(),t.finish()),v.some(Es.create(v.some(Is(n,0,n,fn(n))),!0))):v.none()}))},ws=Ds,Os=W("item","mode"),Rs=function(e,t,n,i){return void 0===i&&(i=ks),e.property().parent(t).map((function(e){return Os(e,i)}))},ks=function(e,t,n,i){return void 0===i&&(i=Ss),n.sibling(e,t).map((function(e){return Os(e,i)}))},Ss=function(e,t,n,i){void 0===i&&(i=Ss);var o=e.property().children(t);return n.first(o).map((function(e){return Os(e,i)}))},As=[{current:Rs,next:ks,fallback:v.none()},{current:ks,next:Ss,fallback:v.some(Rs)},{current:Ss,next:Ss,fallback:v.some(ks)}],Ns=function(e,t,n,i,o){return void 0===o&&(o=As),M(o,(function(e){return e.current===n})).bind((function(n){return n.current(e,t,i,n.next).orThunk((function(){return n.fallback.bind((function(n){return Ns(e,t,n,i)}))}))}))},Ms=function(e,t,n,i,o,r){return Ns(e,t,i,o).bind((function(t){return r(t.item())?v.none():n(t.item())?v.some(t.item()):Ms(e,t.item(),n,t.mode(),o,r)}))},Ks=function(e){return function(t){return 0===e.property().children(t).length}},Ps=function(e,t,n,i){return Ms(e,t,n,ks,{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return 0<e.length?v.some(e[e.length-1]):v.none()}},i)},Ls=function(e,t,n,i){return Ms(e,t,n,ks,{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return 0<e.length?v.some(e[0]):v.none()}},i)},Bs=Ln(),Fs=function(e,t){return i=t,Ps(n=Bs,e,Ks(n),i);var n,i},zs=function(e,t){return i=t,Ls(n=Bs,e,Ks(n),i);var n,i},Hs=W("element","offset"),Vs=(W("element","deltaOffset"),W("element","start","finish"),W("begin","end"),W("element","text"),jn([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),Ws=function(e){return $t(e,"tr")},$s=Fi(Fi({},Vs),{verify:function(e,t,n,i,o,r,a){return $t(i,"td,th",a).bind((function(n){return $t(t,"td,th",a).map((function(t){return it(n,t)?it(i,n)&&fn(n)===o?r(t):Vs.none("in same cell"):Fn(Ws,[n,t]).fold((function(){return o=n,a=(i=e).getRect(t),(s=i.getRect(o)).right>a.left&&s.left<a.right?Vs.success():r(t);var i,o,a,s}),(function(e){return r(t)}))}))})).getOr(Vs.none("default"))},cata:function(e,t,n,i,o){return e.fold(t,n,i,o)}}),qs=(W("ancestor","descendants","element","index"),W("parent","children","element","index")),Us=function(e){return"br"===te(e)},js=function(e,t,n){return t(e,n).bind((function(e){return ae(e)&&0===un(e).trim().length?js(e,t,n):v.some(e)}))},Gs=X(["left","top","right","bottom"],[]),Xs={nu:Gs,moveUp:function(e,t){return Gs({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return Gs({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return Gs({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return Gs({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return Gs({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},Ys=function(e){return Xs.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},Zs=function(e,t){return v.some(e.getRect(t))},Js=function(e,t,n){return re(t)?Zs(e,t).map(Ys):ae(t)?(i=e,o=t,r=n,0<=r&&r<fn(o)?i.getRangedRect(o,r,o,r+1):0<r?i.getRangedRect(o,r-1,o,r):v.none()).map(Ys):v.none();var i,o,r},Qs=function(e,t){return re(t)?Zs(e,t).map(Ys):ae(t)?e.getRangedRect(t,0,t,fn(t)).map(Ys):v.none()},el=jn([{none:[]},{retry:["caret"]}]),tl=function(e,t,n){return(i=t,r=vr,Lt((function(e,t){return t(e)}),zt,i,r,void 0)).fold(o(!1),(function(t){return Qs(e,t).exists((function(e){return i=e,(t=n).left()<i.left()||Math.abs(i.right()-t.left())<1||t.left()>i.right();var t,i}))}));var i,r},nl={point:Xs.getTop,adjuster:function(e,t,n,i,o){var r=Xs.moveUp(o,5);return Math.abs(n.top()-i.top())<1||n.bottom()<o.top()?el.retry(r):n.bottom()===o.top()?el.retry(Xs.moveUp(o,1)):tl(e,t,o)?el.retry(Xs.translate(r,5,0)):el.none()},move:Xs.moveUp,gather:Fs},il={point:Xs.getBottom,adjuster:function(e,t,n,i,o){var r=Xs.moveDown(o,5);return Math.abs(n.bottom()-i.bottom())<1||n.top()>o.bottom()?el.retry(r):n.top()===o.bottom()?el.retry(Xs.moveDown(o,1)):tl(e,t,o)?el.retry(Xs.translate(r,5,0)):el.none()},move:Xs.moveDown,gather:zs},ol=function(e,t,n,i,o){return 0===o?v.some(i):(s=e,l=i.left(),u=t.point(i),s.elementFromPoint(l,u).filter((function(e){return"table"===te(e)})).isSome()?(a=o-1,ol(e,r=t,n,r.move(i,5),a)):e.situsFromPoint(i.left(),t.point(i)).bind((function(r){return r.start().fold(v.none,(function(r){return Qs(e,r).bind((function(a){return t.adjuster(e,r,a,n,i).fold(v.none,(function(i){return ol(e,t,n,i,o-1)}))})).orThunk((function(){return v.some(i)}))}),v.none)})));var r,a,s,l,u},rl=function(e,t,n){var i,o,r,a=e.move(n,5),s=ol(t,e,n,a,100).getOr(a);return(i=e,o=s,r=t,i.point(o)>r.getInnerHeight()?v.some(i.point(o)-r.getInnerHeight()):i.point(o)<0?v.some(-i.point(o)):v.none()).fold((function(){return t.situsFromPoint(s.left(),e.point(s))}),(function(n){return t.scrollBy(0,n),t.situsFromPoint(s.left(),e.point(s)-n)}))},al={tryUp:a(rl,nl),tryDown:a(rl,il),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:o(5)},sl=Je.detect(),ll=function(e,t,n,i,o,r){return 0===r?v.none():dl(e,t,n,i,o).bind((function(a){var s=e.fromSitus(a),l=$s.verify(e,n,i,s.finish(),s.foffset(),o.failure,t);return $s.cata(l,(function(){return v.none()}),(function(){return v.some(a)}),(function(a){return it(n,a)&&0===i?ul(e,n,i,Xs.moveUp,o):ll(e,t,a,0,o,r-1)}),(function(a){return it(n,a)&&i===fn(a)?ul(e,n,i,Xs.moveDown,o):ll(e,t,a,fn(a),o,r-1)}))}))},ul=function(e,t,n,i,o){return Js(e,t,n).bind((function(t){return cl(e,o,i(t,al.getJumpSize()))}))},cl=function(e,t,n){return sl.browser.isChrome()||sl.browser.isSafari()||sl.browser.isFirefox()||sl.browser.isEdge()?t.otherRetry(e,n):sl.browser.isIE()?t.ieRetry(e,n):v.none()},dl=function(e,t,n,i,o){return Js(e,n,i).bind((function(t){return cl(e,o,t)}))},fl=Je.detect(),hl=function(e,t,n,i,r){return $t(i,"td,th",t).bind((function(i){return $t(i,"table",t).bind((function(s){return function(e,t){return zt(e,(function(e){return st(e).exists((function(e){return it(e,t)}))}),void 0).isSome()}(r,s)?function(e,t,n){return(i=e,r=t,s=n,i.getSelection().bind((function(e){return function(e,t,n,i){var r,s,l;return(Us(t)?(r=e,s=t,(l=i).traverse(s).orThunk((function(){return js(s,l.gather,r)})).map(l.relative)):function(e,t,n,i){return(o=t,r=n,ft(o,r).filter(Us).orThunk((function(){return ft(o,r-1).filter(Us)}))).bind((function(t){return i.traverse(t).fold((function(){return js(t,i.gather,e).map(i.relative)}),(function(e){return(t=e,st(t).bind((function(e){var n=dt(e);return function(e,t){return K(e,a(it,t))}(n,t).map((function(i){return qs(e,n,t,i)}))}))).map((function(e){return Ua.on(e.parent(),e.index())}));var t}))}));var o,r}(e,t,n,i)).map((function(e){return{start:o(e),finish:o(e)}}))}(r,e.finish(),e.foffset(),s).fold((function(){return v.some(Hs(e.finish(),e.foffset()))}),(function(t){var n=i.fromSitus(t);return function(e){return $s.cata(e,(function(e){return v.none()}),(function(){return v.none()}),(function(e){return v.some(Hs(e,0))}),(function(e){return v.some(Hs(e,fn(e)))}))}($s.verify(i,e.finish(),e.foffset(),n.finish(),n.foffset(),s.failure,r))}))}))).bind((function(i){return ll(e,t,i.element(),i.offset(),n,20).map(e.fromSitus)}));var i,r,s}(e,t,n).bind((function(e){return $t(e.finish(),"td,th",t).map((function(t){return{start:o(i),finish:o(t),range:o(e)}}))})):v.none()}))}))},gl=function(e,t,n,i,o,r){return fl.browser.isIE()?v.none():r(i,t).orThunk((function(){return hl(e,t,n,i,o).map((function(e){var t=e.range();return Es.create(v.some(Is(t.start(),t.soffset(),t.finish(),t.foffset())),!0)}))}))},pl=function(e,t,n,i,o,r,a){return hl(e,n,i,o,r).bind((function(e){return ws(t,n,e.start(),e.finish(),a)}))},ml=function(e,t){return $t(e,"tr",t).bind((function(e){return $t(e,"table",t).bind((function(n){var i,o,r,a=Pt(n,"tr");return it(e,a[0])?(i=n,o=function(e){return mn(e).isSome()},r=t,Ps(Bs,i,o,r)).map((function(e){var t=fn(e);return Es.create(v.some(Is(e,t,e,t)),!0)})):v.none()}))}))},vl=function(e,t){return $t(e,"tr",t).bind((function(e){return $t(e,"table",t).bind((function(n){var i,o,r,a=Pt(n,"tr");return it(e,a[a.length-1])?(i=n,o=function(e){return pn(e).isSome()},r=t,Ls(Bs,i,o,r)).map((function(e){return Es.create(v.some(Is(e,0,e,0)),!0)})):v.none()}))}))},yl=function(e,t){return $t(e,"td,th",t)},bl={down:{traverse:ct,gather:zs,relative:Ua.before,otherRetry:al.tryDown,ieRetry:al.ieTryDown,failure:$s.failedDown},up:{traverse:ut,gather:Fs,relative:Ua.before,otherRetry:al.tryUp,ieRetry:al.ieTryUp,failure:$s.failedUp}},Tl=function(e){return function(t){return t===e}},Cl=Tl(38),El=Tl(40),_l={ltr:{isBackward:Tl(37),isForward:Tl(39)},rtl:{isBackward:Tl(39),isForward:Tl(37)},isUp:Cl,isDown:El,isNavigation:function(e){return 37<=e&&e<=40}},xl=function(e){return{left:e.left(),top:e.top(),right:e.right(),bottom:e.bottom(),width:e.width(),height:e.height()}},Il=(Je.detect().browser.isSafari(),function(t){return{elementFromPoint:function(e,n){return ye.fromPoint(ye.fromDom(t.document),e,n)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(e,n,i,o){var r=Ga.exact(e,n,i,o);return function(e,t){var n,i,o;return 0<(o=0<(i=(n=ts(e,t)).getClientRects()).length?i[0]:n.getBoundingClientRect()).width||0<o.height?v.some(o).map(Za):v.none()}(t,r).map(xl)},getSelection:function(){return function(e){return(t=e,v.from(t.getSelection()).filter((function(e){return 0<e.rangeCount})).bind(ps)).map((function(e){return Ga.exact(e.start(),e.soffset(),e.finish(),e.foffset())}));var t}(t).map((function(e){return xs(t,e)}))},fromSitus:function(e){var n=Ga.relative(e.start(),e.finish());return xs(t,n)},situsFromPoint:function(e,n){return function(e,t,n){return i=t,o=n,r=ye.fromDom(e.document),ls(r,i,o).map((function(e){return $a.create(ye.fromDom(e.startContainer),e.startOffset,ye.fromDom(e.endContainer),e.endOffset)}));var i,o,r}(t,e,n).map((function(e){return _s(e.start(),e.soffset(),e.finish(),e.foffset())}))},clearSelection:function(){t.getSelection().removeAllRanges()},setSelection:function(e){var n,i,o,r,a,s;n=t,i=e.start(),o=e.soffset(),r=e.finish(),a=e.foffset(),s=ds(i,o,r,a),gs(n,s)},setRelativeSelection:function(e,n){var i,o;i=t,o=cs(e,n),gs(i,o)},selectContents:function(e){!function(e,t){var n,i,o=(n=t,function(e,t){e.selectNodeContents(t.dom())}(i=e.document.createRange(),n),i);fs(e,o)}(t,e)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){var n,i,o,r;return(n=ye.fromDom(t.document),i=void 0!==n?n.dom():e.document,o=i.body.scrollLeft||i.documentElement.scrollLeft,r=i.body.scrollTop||i.documentElement.scrollTop,Ci(o,r)).top()},scrollBy:function(n,i){var o,r,a;o=n,r=i,(void 0!==(a=ye.fromDom(t.document))?a.dom():e.document).defaultView.scrollBy(o,r)}}}),Dl=W("rows","cols"),wl=function(e,t,n,i){var r=Il(e),s=function(){return i.clear(t),v.none()};return{keydown:function(e,l,u,c,d,f){var h=e.raw(),g=h.which,p=!0===h.shiftKey;return $n(t,i.selectedSelector()).fold((function(){return _l.isDown(g)&&p?a(pl,r,t,n,bl.down,c,l,i.selectRange):_l.isUp(g)&&p?a(pl,r,t,n,bl.up,c,l,i.selectRange):_l.isDown(g)?a(gl,r,n,bl.down,c,l,vl):_l.isUp(g)?a(gl,r,n,bl.up,c,l,ml):v.none}),(function(e){var n=function(n){return function(){return Hi(n,(function(n){return function(e,t,n,i,r){return function(e,t,n,i,r){return(a=e,s=r,M(a,(function(e){return tt(e,s)}))).bind((function(e){return function(e,t,n){return Yt(e).bind((function(i){return function(e,t,n,i){return nn(e,t,it).bind((function(t){var o=0<n?t.row()+t.rowspan()-1:t.row(),r=0<i?t.column()+t.colspan()-1:t.column();return tn(e,o+n,r+i).map((function(e){return e.element()}))}))}(Nn(i),e,t,n)}))}(e,t,n).bind((function(e){return n=i,Ht(t=e,"table").bind((function(e){return Wt(e,n).bind((function(e){return Vn(e,t).bind((function(e){return e.boxes().map((function(t){return{boxes:o(t),start:o(e.start()),finish:o(e.finish())}}))}))}))}));var t,n}))}));var a,s}(i,e,t,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(e){return r.clear(n),r.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()}))}(n.rows(),n.cols(),t,e,i)})).fold((function(){return qn(t,i.firstSelectedSelector(),i.lastSelectedSelector()).map((function(e){var n=_l.isDown(g)||f.isForward(g)?Ua.after:Ua.before;return r.setRelativeSelection(Ua.on(e.first(),0),n(e.table())),i.clear(t),Es.create(v.none(),!0)}))}),(function(e){return v.some(Es.create(v.none(),!0))}))}};return _l.isDown(g)&&p?n([Dl(1,0)]):_l.isUp(g)&&p?n([Dl(-1,0)]):f.isBackward(g)&&p?n([Dl(0,-1),Dl(-1,0)]):f.isForward(g)&&p?n([Dl(0,1),Dl(1,0)]):_l.isNavigation(g)&&!1===p?s:v.none}))()},keyup:function(e,o,r,a,s){return $n(t,i.selectedSelector()).fold((function(){var l=e.raw(),u=l.which;return 0==(!0===l.shiftKey)?v.none():_l.isNavigation(u)?function(e,t,n,i,o,r,a){return it(n,o)&&i===r?v.none():$t(n,"td,th",t).bind((function(n){return $t(o,"td,th",t).bind((function(i){return Ds(e,t,n,i,a)}))}))}(t,n,o,r,a,s,i.selectRange):v.none()}),v.none)}}},Ol=function(e){return!1===qi(ye.fromDom(e.target),"ephox-snooker-resizer-bar")},Rl=ta.each;t.add("table",(function(t){var r,s=function(e){var t,n,i=v.none(),r=v.none(),s=v.none(),l=/(\d+(\.\d+)?)%/,u=function(e){return"TABLE"===e.nodeName};return e.on("init",(function(){var t,n=Li(Br),l=function(e,t){return e.inline?function(e,t){return{parent:o(t),view:o(e),origin:o(Ci(0,0))}}(kr(e),(n=ye.fromTag("div"),xe(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),mt(Te(),n),n)):Ia(ye.fromDom(e.getDoc()));var n}(e);if(s=v.some(l),("table"===(t=e.getParam("object_resizing",!0))||t)&&e.getParam("table_resize_bars",!0,"boolean")){var u=function(e,t){var n=Ki.height,i=function(e,t,n){var i=function(){var e,t=wa({drag:Da(["xDelta","yDelta","target"])}),n=v.none(),i={mutate:function(t,n){e.trigger.drag(t,n)},events:(e=wa({drag:Da(["xDelta","yDelta"])})).registry};return i.events.drag.bind((function(e){n.each((function(n){t.trigger.drag(e.xDelta(),e.yDelta(),n)}))})),{assign:function(e){n=v.some(e)},get:function(){return n},mutate:i.mutate,events:t.registry}}(),o=Ba(i,{}),r=v.none(),s=function(e,t){return v.from(ce(e,t))};i.events.drag.bind((function(e){s(e.target(),"data-row").each((function(t){var n=jo.getInt(e.target(),"top");_e(e.target(),"top",n+e.yDelta()+"px")})),s(e.target(),"data-column").each((function(t){var n=jo.getInt(e.target(),"left");_e(e.target(),"left",n+e.xDelta()+"px")}))}));var l=function(e,t){return jo.getInt(e,t)-parseInt(ce(e,"data-initial-"+t),10)};o.events.stop.bind((function(){i.get().each((function(i){r.each((function(o){s(i,"data-row").each((function(e){var t=l(i,"top");fe(i,"data-initial-top"),h.trigger.adjustHeight(o,t,parseInt(e,10))})),s(i,"data-column").each((function(e){var t=l(i,"left");fe(i,"data-initial-left"),h.trigger.adjustWidth(o,t,parseInt(e,10))})),ro(e,o,n,t)}))}))}));var u=function(t,n){h.trigger.startAdjust(),i.assign(t),le(t,"data-initial-"+n,parseInt(Ie(t,n),10)),$i(t,za),_e(t,"opacity","0.2"),o.go(e.parent())},c=ka(e.parent(),"mousedown",(function(e){(function(e){return qi(e,eo)})(e.target())&&u(e.target(),"top"),function(e){return qi(e,to)}(e.target())&&u(e.target(),"left")})),d=function(t){return it(t,e.view())},f=ka(e.view(),"mouseover",(function(i){(function(e){return $t(e,"table",d).filter((function(e){return(t=e,n=d,$t(t,"[contenteditable]",n)).exists(Fa);var t,n}))})(i.target()).fold((function(){be(i.target())&&lo(e)}),(function(i){r=v.some(i),ro(e,i,n,t)}))})),h=wa({adjustHeight:Da(["table","delta","row"]),adjustWidth:Da(["table","delta","column"]),startAdjust:Da([])});return{destroy:function(){c.unbind(),f.unbind(),o.destroy(),lo(e)},refresh:function(i){ro(e,i,n,t)},on:o.on,off:o.off,hideBars:a(ao,e),showBars:a(so,e),events:h.registry}}(e,t,n),r=wa({beforeResize:Da(["table"]),afterResize:Da(["table"]),startDrag:Da([])});return i.events.adjustHeight.bind((function(e){r.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());(function(e,t,n,i){var r=ar(e),a=er.getPixelHeights(r,i),s=R(a,(function(e,i){return n===i?Math.max(t+e,jo.minHeight()):e})),l=function(e,t){var n=rn(e);return R(n,(function(e){var n=tr(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:o(n),rowspan:e.rowspan}}))}(r,s),u=function(e,t){return R(e.all(),(function(e,n){return{element:e.element,height:o(t[n])}}))}(r,s);k(u,(function(e){yi.setHeight(e.element(),e.height())})),k(l,(function(e){yi.setHeight(e.element(),e.height())}));var c=A(s,(function(e,t){return e+t}),0);yi.setHeight(e,c)})(e.table(),t,e.row(),n),r.trigger.afterResize(e.table())})),i.events.startAdjust.bind((function(e){r.trigger.startDrag()})),i.events.adjustWidth.bind((function(e){r.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());(function(e,t,n,i){var r=or(e),a=r.getCellDelta(t),s=ar(e),l=r.getWidths(s,i,r),u=function(e,t,n,i){var r,a,s=e.slice(0),l=(a=t,0===(r=e).length?qo.none():1===r.length?qo.only(0):0===a?qo.left(0,1):a===r.length-1?qo.right(a-1,a):0<a&&a<r.length-1?qo.middle(a-1,a,a+1):qo.none()),u=function(e){return R(e,o(0))},c=o(u(s)),d=function(e,t){if(0<=n){var o=Math.max(i.minCellWidth(),s[t]-n);return u(s.slice(0,e)).concat([n,o-s[t]]).concat(u(s.slice(t+1)))}var r=Math.max(i.minCellWidth(),s[e]+n),a=s[e]-r;return u(s.slice(0,e)).concat([r-s[e],a]).concat(u(s.slice(t+1)))};return l.fold(c,(function(e){return i.singleColumnWidth(s[e],n)}),d,(function(e,t,n){return d(t,n)}),(function(e,t){if(0<=n)return u(s.slice(0,t)).concat([n]);var o=Math.max(i.minCellWidth(),s[t]+n);return u(s.slice(0,t)).concat([o-s[t]])}))}(l,n,a,r),c=R(u,(function(e,t){return e+l[t]})),d=nr(s,c);k(d,(function(e){r.setElementWidth(e.element(),e.width())})),n===s.grid().columns()-1&&r.setTableWidth(e,c,a)})(e.table(),n,e.column(),t),r.trigger.afterResize(e.table())})),{on:i.on,off:i.off,hideBars:i.hideBars,showBars:i.showBars,destroy:i.destroy,events:r.registry}}(l,n);u.on(),u.events.startDrag.bind((function(t){i=v.some(e.selection.getRng())})),u.events.beforeResize.bind((function(t){var n=t.table().dom();Jr(e,n,Sr(n),Ar(n))})),u.events.afterResize.bind((function(t){var n=t.table(),o=n.dom();Kr(n),i.each((function(t){e.selection.setRng(t),e.focus()})),Qr(e,o,Sr(o),Ar(o)),e.undoManager.add()})),r=v.some(u)}})),e.on("ObjectResizeStart",(function(i){var o,r=i.target;u(r)&&(t=i.width,n=e.dom.getStyle(o=r,"width")||e.dom.getAttrib(o,"width"))})),e.on("ObjectResized",(function(i){var o=i.target;if(u(o)){var r=o;if(l.test(n)){var a=parseFloat(l.exec(n)[1]);e.dom.setStyle(r,"width",i.width*a/t+"%")}else{var s=[];ta.each(r.rows,(function(t){ta.each(t.cells,(function(t){var n=e.dom.getStyle(t,"width",!0);s.push({cell:t,width:n})}))})),ta.each(s,(function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)}))}}})),{lazyResize:function(){return r},lazyWire:function(){return s.getOr(Ia(ye.fromDom(e.getBody())))},destroy:function(){r.each((function(e){e.destroy()})),s.each((function(t){!function(e,t){e.inline&&Ct(t.parent())}(e,t)}))}}}(t),l=function(e,t){var r=X(["mousedown","mouseover","mouseup","keyup","keydown"],[]),a=v.none(),s=function(e){var t=function(t){fe(t,e.selected()),fe(t,e.firstSelected()),fe(t,e.lastSelected())},n=function(t){le(t,e.selected(),"1")},i=function(n){var i=Pt(n,e.selectedSelector());k(i,t)};return{clear:i,selectRange:function(t,o,r,a){i(t),k(o,n),le(r,e.firstSelected(),"1"),le(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}(Un);return e.on("init",(function(l){var u=e.getWin(),c=kr(e),d=Nr(e),f=function(e,t,n,i){var o,r,a,s,l,u,c=Il(e),d=(o=c,r=t,a=n,s=i,l=v.none(),u=function(){l=v.none()},{mousedown:function(e){s.clear(r),l=yl(e.target(),a)},mouseover:function(e){l.each((function(t){s.clear(r),yl(e.target(),a).each((function(e){Wn(t,e,a).each((function(n){var i=n.boxes().getOr([]);(1<i.length||1===i.length&&!it(t,e))&&(s.selectRange(r,i,n.start(),n.finish()),o.selectContents(e))}))}))}))},mouseup:function(e){l.each(u)}});return{mousedown:d.mousedown,mouseover:d.mouseover,mouseup:d.mouseup}}(u,c,d,s),h=wl(u,c,d,s),g=function(t,n){!0===t.raw().shiftKey&&(n.kill()&&t.kill(),n.selection().each((function(t){var n=Ga.relative(t.start(),t.finish()),i=ts(u,n);e.selection.setRng(i)})))},p=function(t){var n=b(t);if(n.raw().shiftKey&&_l.isNavigation(n.raw().which)){var i=e.selection.getRng(),o=ye.fromDom(i.startContainer),r=ye.fromDom(i.endContainer);h.keyup(n,o,i.startOffset,r,i.endOffset).each((function(e){g(n,e)}))}},m=function(n){var i=b(n);t().each((function(e){e.hideBars()}));var o=e.selection.getRng(),r=ye.fromDom(e.selection.getStart()),a=ye.fromDom(o.startContainer),s=ye.fromDom(o.endContainer),l=Br(r).isRtl()?_l.rtl:_l.ltr;h.keydown(i,a,o.startOffset,s,o.endOffset,l).each((function(e){g(i,e)})),t().each((function(e){e.showBars()}))},y=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},b=function(e){var t=ye.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},a=i(r,n);return{target:o(t),x:o(y(e)?e.x:null),y:o(y(e)?e.y:null),stop:n,prevent:r,kill:a,raw:o(e)}},T=function(e){return 0===e.button},C=function(e){T(e)&&Ol(e)&&f.mousedown(b(e))},E=function(e){var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!Ol(e)||f.mouseover(b(e))},_=function(e){T(e)&&Ol(e)&&f.mouseup(b(e))};e.on("mousedown",C),e.on("mouseover",E),e.on("mouseup",_),e.on("keyup",p),e.on("keydown",m),e.on("nodechange",(function(){var t=e.selection,i=ye.fromDom(t.getStart()),o=ye.fromDom(t.getEnd());Fn(Yt,[i,o]).fold((function(){s.clear(c)}),n)})),a=v.some(r({mousedown:C,mouseover:E,mouseup:_,keyup:p,keydown:m}))})),{clear:s.clear,destroy:function(){a.each((function(e){}))}}}(t,s.lazyResize),u=ea(t,s.lazyWire),c=(r=t,{get:function(){return function(e,t){return $n(e,t)}(kr(r),Un.selectedSelector()).fold((function(){return void 0===r.selection.getStart()?Xn.none():Xn.single(r.selection)}),(function(e){return Xn.multiple(e)}))}}),f=sr(v.none());return function(e,t,i,o,r){var s=Nr(e),l=function(t){return function(){return v.from(e.dom.getParent(e.selection.getStart(),t)).map(ye.fromDom)}},u=l("caption"),c=l("th,td"),f=function(e){return Yt(e,s)},h=function(e){return{width:Sr(e.dom()),height:Sr(e.dom())}},g=function(t){c().each((function(n){f(n).each((function(r){var a=ni.forMenu(o,r,n),s=h(r);t(r,a).each((function(t){var n,o,a,l;n=e,o=s,l=h(a=r),o.width===l.width&&o.height===l.height||(Jr(n,a.dom(),o.width,o.height),Qr(n,a.dom(),l.width,l.height)),e.selection.setRng(t),e.focus(),i.clear(r),Kr(r)}))}))}))},p=function(t){return c().bind((function(t){return f(t).bind((function(i){var r=ye.fromDom(e.getDoc());return function(e,t,n){var i=Zt(e),o=en(i);return Do(o,t).map((function(e){var t=To(o,n,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan());return function(e){return R(e,(function(e){var t=bn(e.element());return k(e.cells(),(function(e){var n=Tn(e.element());Vi(n,"colspan",e.colspan(),1),Vi(n,"rowspan",e.rowspan(),1),mt(t,n)})),t}))}(Co(t,n))}))}(i,ni.forMenu(o,i,t),In(n,r,v.none()))}))}))},m=function(t){r.get().each((function(n){var r=R(n,(function(e){return Tn(e)}));c().each((function(n){f(n).each((function(a){var s=ye.fromDom(e.getDoc()),l=Dn(s),u=ni.pasteRows(o,a,n,r,l);t(a,u).each((function(t){e.selection.setRng(t),e.focus(),i.clear(a)}))}))}))}))};xa({mceTableSplitCells:function(){g(t.unmergeCells)},mceTableMergeCells:function(){g(t.mergeCells)},mceTableInsertRowBefore:function(){g(t.insertRowsBefore)},mceTableInsertRowAfter:function(){g(t.insertRowsAfter)},mceTableInsertColBefore:function(){g(t.insertColumnsBefore)},mceTableInsertColAfter:function(){g(t.insertColumnsAfter)},mceTableDeleteCol:function(){g(t.deleteColumn)},mceTableDeleteRow:function(){g(t.deleteRow)},mceTableCutRow:function(e){r.set(p()),g(t.deleteRow)},mceTableCopyRow:function(e){r.set(p())},mceTablePasteRowBefore:function(e){m(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){m(t.pasteRowsAfter)},mceTableDelete:function(){c().orThunk(u).each((function(t){Yt(t,s).filter(d(s)).each((function(t){var n=ye.fromText("");gt(t,n),Ct(t);var i=e.dom.createRng();i.setStart(n.dom(),0),i.setEnd(n.dom(),0),e.selection.setRng(i)}))}))}},(function(t,n){e.addCommand(n,t)})),xa({mceInsertTable:a(_a,e),mceTableProps:a(_a,e,!0),mceTableRowProps:a(pa,e),mceTableCellProps:a(ha,e)},(function(t,n){e.addCommand(n,(function(e,n){t(n)}))}))}(t,u,l,c,f),function(t,i,o,r){t.on("BeforeGetContent",(function(e){!0===e.selection&&Xn.cata(i.get(),n,(function(n){var i;e.preventDefault(),(i=n,Yt(i[0]).map(Tn).map((function(e){return[sn(e,Un.attributeSelector())]}))).each((function(n){var i;e.content="text"===e.format?R(n,(function(e){return e.dom().innerText})).join(""):(i=t,R(n,(function(e){return i.selection.serializer.serialize(e.dom(),{})})).join(""))}))}),n)})),t.on("BeforeSetContent",(function(n){!0===n.selection&&!0===n.paste&&v.from(t.dom.getParent(t.selection.getStart(),"th,td")).each((function(i){var a=ye.fromDom(i);Yt(a).each((function(i){var s,l,u=S((s=n.content,(l=e.document.createElement("div")).innerHTML=s,dt(ye.fromDom(l))),(function(e){return"meta"!==te(e)}));if(1===u.length&&"table"===te(u[0])){n.preventDefault();var c=ye.fromDom(t.getDoc()),d=Dn(c),f=ni.paste(a,u[0],d);o.pasteCells(i,f).each((function(e){t.selection.setRng(e),t.focus(),r.clear(i)}))}}))}))}))}(t,c,u,l),function(e,t){var n=v.none(),i=[],o=[],r=[],a=[],s=function(e){e.disabled(!0)},l=function(e){e.disabled(!1)},u=function(){var e=this;i.push(e),n.fold((function(){s(e)}),(function(t){l(e)}))},c=function(){var e=this;o.push(e),n.fold((function(){s(e)}),(function(t){l(e)}))};e.on("init",(function(){e.on("nodechange",(function(u){var c=v.from(e.dom.getParent(e.selection.getStart(),"th,td"));(n=c.bind((function(e){var n=ye.fromDom(e);return Yt(n).map((function(e){return ni.forMenu(t,e,n)}))}))).fold((function(){k(i,s),k(o,s),k(r,s),k(a,s)}),(function(e){k(i,l),k(o,l),k(r,(function(t){t.disabled(e.mergable().isNone())})),k(a,(function(t){t.disabled(e.unmergable().isNone())}))}))}))}));var d=function(e,t,n,i){var o,r,a,s,l,u=i.getEl().getElementsByTagName("table")[0],c=i.isRtl()||"tl-tr"===i.parent().rel;for(u.nextSibling.innerHTML=t+1+" x "+(n+1),c&&(t=9-t),r=0;r<10;r++)for(o=0;o<10;o++)e.dom.toggleClass(s=u.rows[r].childNodes[o].firstChild,"mce-active",l=(c?t<=o:o<=t)&&r<=n),l&&(a=s);return a.parentNode},f=!1===e.getParam("table_grid",!0,"boolean")?{text:"Table",icon:"table",context:"table",onclick:h("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),e.execCommand("mceInsertTable"))},onshow:function(){d(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,i,o=t.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),i=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&i===this.lastY||(d(e,n,i,t.control),this.lastX=n,this.lastY=i))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact((function(){ba(e,n.lastX+1,n.lastY+1)})),e.addVisual())}}]};function h(t){return function(){e.execCommand(t)}}var g={text:"Table properties",context:"table",onPostRender:u,onclick:h("mceTableProps")},p={text:"Delete table",context:"table",onPostRender:u,cmd:"mceTableDelete"},m={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:h("mceTableInsertRowBefore"),onPostRender:c},{text:"Insert row after",onclick:h("mceTableInsertRowAfter"),onPostRender:c},{text:"Delete row",onclick:h("mceTableDeleteRow"),onPostRender:c},{text:"Row properties",onclick:h("mceTableRowProps"),onPostRender:c},{text:"-"},{text:"Cut row",onclick:h("mceTableCutRow"),onPostRender:c},{text:"Copy row",onclick:h("mceTableCopyRow"),onPostRender:c},{text:"Paste row before",onclick:h("mceTablePasteRowBefore"),onPostRender:c},{text:"Paste row after",onclick:h("mceTablePasteRowAfter"),onPostRender:c}]},y={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:h("mceTableInsertColBefore"),onPostRender:c},{text:"Insert column after",onclick:h("mceTableInsertColAfter"),onPostRender:c},{text:"Delete column",onclick:h("mceTableDeleteCol"),onPostRender:c}]},b={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:h("mceTableCellProps"),onPostRender:c},{text:"Merge cells",onclick:h("mceTableMergeCells"),onPostRender:function(){var e=this;r.push(e),n.fold((function(){s(e)}),(function(t){e.disabled(t.mergable().isNone())}))}},{text:"Split cell",onclick:h("mceTableSplitCells"),onPostRender:function(){var e=this;a.push(e),n.fold((function(){s(e)}),(function(t){e.disabled(t.unmergable().isNone())}))}}]};e.addMenuItem("inserttable",f),e.addMenuItem("tableprops",g),e.addMenuItem("deletetable",p),e.addMenuItem("row",m),e.addMenuItem("column",y),e.addMenuItem("cell",b)}(t,c),function(e){var t=[];function n(t){return function(){e.execCommand(t)}}Rl("inserttable tableprops deletetable | cell row column".split(" "),(function(n){t.push("|"===n?{text:"-"}:e.menuItems[n])})),e.addButton("table",{type:"menubutton",title:"Table",menu:t}),e.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})}(t),function(e){var t,n=""===(t=e.getParam("table_toolbar",Fr))||!1===t?[]:b(t)?t.split(/[ ,]/):T(t)?t:[];0<n.length&&e.addContextToolbar((function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)}),n.join(" "))}(t),t.on("PreInit",(function(){t.serializer.addTempAttr(Un.firstSelected()),t.serializer.addTempAttr(Un.lastSelected())})),t.getParam("table_tab_navigation",!0,"boolean")&&t.on("keydown",(function(e){!function(e,t,n,i){if(e.keyCode===ms.TAB){var o=kr(t),r=function(e){var t=te(e);return it(e,o)||w(Cs,t)},a=t.selection.getRng();if(a.collapsed){var s=ye.fromDom(a.startContainer);Gt(s,r).each((function(o){e.preventDefault(),(e.shiftKey?ys:vs)(t,r,o,n,i).each((function(e){t.selection.setRng(e)}))}))}}}(e,t,u,s.lazyWire)})),t.on("remove",(function(){s.destroy(),l.destroy()})),function(e,t){return{insertTable:function(t,n){return ba(e,t,n)},setClipboardRows:function(e){return n=t,i=R(e,ye.fromDom),void n.set(v.from(i));var n,i},getClipboardRows:function(){return t.get().fold((function(){}),(function(e){return R(e,(function(e){return e.dom()}))}))}}}(t,f)}))}(window),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.echarts={})}(this,(function(e){"use strict";var t,n=2311,i=function(){return n++},o="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(e){var t={},n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge\/([\d.]+)/),r=/micromessenger/i.test(e);return n&&(t.firefox=!0,t.version=n[1]),i&&(t.ie=!0,t.version=i[1]),o&&(t.edge=!0,t.version=o[1]),r&&(t.weChat=!0),{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&11<=t.version),domSupported:"undefined"!=typeof document}}(navigator.userAgent),r={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},a={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},s=Object.prototype.toString,l=Array.prototype,u=l.forEach,c=l.filter,d=l.slice,f=l.map,h=l.reduce,g={};function p(e,n){"createCanvas"===e&&(t=null),g[e]=n}function m(e){if(null==e||"object"!=typeof e)return e;var t=e,n=s.call(e);if("[object Array]"===n){if(!Z(e)){t=[];for(var i=0,o=e.length;i<o;i++)t[i]=m(e[i])}}else if(a[n]){if(!Z(e)){var l=e.constructor;if(e.constructor.from)t=l.from(e);else for(t=new l(e.length),i=0,o=e.length;i<o;i++)t[i]=m(e[i])}}else if(!r[n]&&!Z(e)&&!z(e))for(var u in t={},e)e.hasOwnProperty(u)&&(t[u]=m(e[u]));return t}function v(e,t,n){if(!L(t)||!L(e))return n?m(t):e;for(var i in t)if(t.hasOwnProperty(i)){var o=e[i],r=t[i];!L(r)||!L(o)||M(r)||M(o)||z(r)||z(o)||B(r)||B(o)||Z(r)||Z(o)?!n&&i in e||(e[i]=m(t[i])):v(o,r,n)}return e}function y(e,t){for(var n=e[0],i=1,o=e.length;i<o;i++)n=v(n,e[i],t);return n}function b(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function T(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(n?null!=t[i]:null==e[i])&&(e[i]=t[i]);return e}function C(){return g.createCanvas()}function E(){return t=t||C().getContext("2d")}function _(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1}function x(e,t){var n=e.prototype;function i(){}for(var o in i.prototype=t.prototype,e.prototype=new i,n)n.hasOwnProperty(o)&&(e.prototype[o]=n[o]);(e.prototype.constructor=e).superClass=t}function I(e,t,n){T(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,n)}function D(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function w(e,t,n){if(e&&t)if(e.forEach&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;i<o;i++)t.call(n,e[i],i,e);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function O(e,t,n){if(e&&t){if(e.map&&e.map===f)return e.map(t,n);for(var i=[],o=0,r=e.length;o<r;o++)i.push(t.call(n,e[o],o,e));return i}}function R(e,t,n,i){if(e&&t){if(e.reduce&&e.reduce===h)return e.reduce(t,n,i);for(var o=0,r=e.length;o<r;o++)n=t.call(i,n,e[o],o,e);return n}}function k(e,t,n){if(e&&t){if(e.filter&&e.filter===c)return e.filter(t,n);for(var i=[],o=0,r=e.length;o<r;o++)t.call(n,e[o],o,e)&&i.push(e[o]);return i}}function S(e,t,n){if(e&&t)for(var i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e))return e[i]}function A(e,t){var n=d.call(arguments,2);return function(){return e.apply(t,n.concat(d.call(arguments)))}}function N(e){var t=d.call(arguments,1);return function(){return e.apply(this,t.concat(d.call(arguments)))}}function M(e){return"[object Array]"===s.call(e)}function K(e){return"function"==typeof e}function P(e){return"[object String]"===s.call(e)}function L(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function B(e){return!!r[s.call(e)]}function F(e){return!!a[s.call(e)]}function z(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function H(e){return e!=e}function V(e){for(var t=0,n=arguments.length;t<n;t++)if(null!=arguments[t])return arguments[t]}function W(e,t){return null!=e?e:t}function $(e,t,n){return null!=e?e:null!=t?t:n}function q(){return Function.call.apply(d,arguments)}function U(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function j(e,t){if(!e)throw new Error(t)}function G(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}g.createCanvas=function(){return document.createElement("canvas")};var X="__ec_primitive__";function Y(e){e[X]=!0}function Z(e){return e[X]}function J(e){var t=M(e);this.data={};var n=this;function i(e,i){t?n.set(e,i):n.set(i,e)}e instanceof J?e.each(i):e&&w(e,i)}function Q(e){return new J(e)}function ee(e,t){for(var n=new e.constructor(e.length+t.length),i=0;i<e.length;i++)n[i]=e[i];var o=e.length;for(i=0;i<t.length;i++)n[i+o]=t[i];return n}function te(){}J.prototype={constructor:J,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var n in void 0!==t&&(e=A(e,t)),this.data)this.data.hasOwnProperty(n)&&e(this.data[n],n)},removeKey:function(e){delete this.data[e]}};var ne=(Object.freeze||Object)({$override:p,clone:m,merge:v,mergeAll:y,extend:b,defaults:T,createCanvas:C,getContext:E,indexOf:_,inherits:x,mixin:I,isArrayLike:D,each:w,map:O,reduce:R,filter:k,find:S,bind:A,curry:N,isArray:M,isFunction:K,isString:P,isObject:L,isBuiltInObject:B,isTypedArray:F,isDom:z,eqNaN:H,retrieve:V,retrieve2:W,retrieve3:$,slice:q,normalizeCssArray:U,assert:j,trim:G,setAsPrimitive:Y,isPrimitive:Z,createHashMap:Q,concatArray:ee,noop:te}),ie="undefined"==typeof Float32Array?Array:Float32Array;function oe(e,t){var n=new ie(2);return null==e&&(e=0),null==t&&(t=0),n[0]=e,n[1]=t,n}function re(e,t){return e[0]=t[0],e[1]=t[1],e}function ae(e){var t=new ie(2);return t[0]=e[0],t[1]=e[1],t}function se(e,t,n){return e[0]=t,e[1]=n,e}function le(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function ue(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e}function ce(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function de(e){return Math.sqrt(fe(e))}function fe(e){return e[0]*e[0]+e[1]*e[1]}function he(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function ge(e,t){var n=de(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function pe(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var me=pe;function ve(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var ye=ve;function be(e,t,n,i){return e[0]=t[0]+i*(n[0]-t[0]),e[1]=t[1]+i*(n[1]-t[1]),e}function Te(e,t,n){var i=t[0],o=t[1];return e[0]=n[0]*i+n[2]*o+n[4],e[1]=n[1]*i+n[3]*o+n[5],e}function Ce(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Ee(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var _e=(Object.freeze||Object)({create:oe,copy:re,clone:ae,set:se,add:le,scaleAndAdd:ue,sub:ce,len:de,length:de,lenSquare:fe,lengthSquare:fe,mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:he,normalize:ge,distance:pe,dist:me,distanceSquare:ve,distSquare:ye,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:be,applyTransform:Te,min:Ce,max:Ee});function xe(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function Ie(e,t){return{target:e,topTarget:t&&t.topTarget}}xe.prototype={constructor:xe,_dragStart:function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&((this._draggingTarget=t).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(Ie(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,i=e.offsetY,o=n-this._x,r=i-this._y;this._x=n,this._y=i,t.drift(o,r,e),this.dispatchToElement(Ie(t,e),"drag",e.event);var a=this.findHover(n,i,t).target,s=this._dropTarget;t!==(this._dropTarget=a)&&(s&&a!==s&&this.dispatchToElement(Ie(s,e),"dragleave",e.event),a&&a!==s&&this.dispatchToElement(Ie(a,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(Ie(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(Ie(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var De=Array.prototype.slice,we=function(e){this._$handlers={},this._$eventProcessor=e};function Oe(e,t,n,i,o,r){var a=e._$handlers;if("function"==typeof n&&(o=i,i=n,n=null),!i||!t)return e;n=function(e,t){var n=e._$eventProcessor;return null!=t&&n&&n.normalizeQuery&&(t=n.normalizeQuery(t)),t}(e,n),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===i)return e;var l={h:i,one:r,query:n,ctx:o||e,callAtLast:i.zrEventfulCallAtLast},u=a[t].length-1,c=a[t][u];return c&&c.callAtLast?a[t].splice(u,0,l):a[t].push(l),e}we.prototype={constructor:we,one:function(e,t,n,i){return Oe(this,e,t,n,i,!0)},on:function(e,t,n,i){return Oe(this,e,t,n,i,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var n=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var i=[],o=0,r=n[e].length;o<r;o++)n[e][o].h!==t&&i.push(n[e][o]);n[e]=i}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},trigger:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var i=arguments,o=i.length;3<o&&(i=De.call(i,1));for(var r=t.length,a=0;a<r;){var s=t[a];if(n&&n.filter&&null!=s.query&&!n.filter(e,s.query))a++;else{switch(o){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,i[1]);break;case 3:s.h.call(s.ctx,i[1],i[2]);break;default:s.h.apply(s.ctx,i)}s.one?(t.splice(a,1),r--):a++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var i=arguments,o=i.length;4<o&&(i=De.call(i,1,i.length-1));for(var r=i[i.length-1],a=t.length,s=0;s<a;){var l=t[s];if(n&&n.filter&&null!=l.query&&!n.filter(e,l.query))s++;else{switch(o){case 1:l.h.call(r);break;case 2:l.h.call(r,i[1]);break;case 3:l.h.call(r,i[1],i[2]);break;default:l.h.apply(r,i)}l.one?(t.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this}};var Re=Math.log(2);function ke(e,t,n,i,o,r){var a=i+"-"+o,s=e.length;if(r.hasOwnProperty(a))return r[a];if(1===t){var l=Math.round(Math.log((1<<s)-1&~o)/Re);return e[n][l]}for(var u=i|1<<n,c=n+1;i&1<<c;)c++;for(var d=0,f=0,h=0;f<s;f++){var g=1<<f;g&o||(d+=(h%2?-1:1)*e[n][f]*ke(e,t-1,c,u,o|g,r),h++)}return r[a]=d}function Se(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},o=ke(n,8,0,0,0,i);if(0!==o){for(var r=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==r[s]&&(r[s]=0),r[s]+=((a+s)%2?-1:1)*ke(n,7,0===a?1:0,1<<a,1<<s,i)/o*t[a];return function(e,t,n){var i=t*r[6]+n*r[7]+1;e[0]=(t*r[0]+n*r[1]+r[2])/i,e[1]=(t*r[3]+n*r[4]+r[5])/i}}}var Ae="___zrEVENTSAVED",Ne=[];function Me(e,t,n,i,r){if(t.getBoundingClientRect&&o.domSupported&&!Ke(t)){var a=t[Ae]||(t[Ae]={}),s=function(e,t,n){for(var i=n?"invTrans":"trans",o=t[i],r=t.srcCoords,a=!0,s=[],l=[],u=0;u<4;u++){var c=e[u].getBoundingClientRect(),d=2*u,f=c.left,h=c.top;s.push(f,h),a=a&&r&&f===r[d]&&h===r[1+d],l.push(e[u].offsetLeft,e[u].offsetTop)}return a&&o?o:(t.srcCoords=s,t[i]=n?Se(l,s):Se(s,l))}(function(e,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var i=["left","right"],o=["top","bottom"],r=0;r<4;r++){var a=document.createElement("div"),s=r%2,l=(r>>1)%2;a.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[s]+":0",o[l]+":0",i[1-s]+":auto",o[1-l]+":auto",""].join("!important;"),e.appendChild(a),n.push(a)}return n}(t,a),a,r);if(s)return s(e,n,i),!0}return!1}function Ke(e){return"CANVAS"===e.nodeName.toUpperCase()}var Pe="undefined"!=typeof window&&!!window.addEventListener,Le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Be=[];function Fe(e,t,n,i){return n=n||{},i||!o.canvasSupported?ze(e,t,n):o.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):ze(e,t,n),n}function ze(e,t,n){if(o.domSupported&&e.getBoundingClientRect){var i=t.clientX,r=t.clientY;if(Ke(e)){var a=e.getBoundingClientRect();return n.zrX=i-a.left,void(n.zrY=r-a.top)}if(Me(Be,e,i,r))return n.zrX=Be[0],void(n.zrY=Be[1])}n.zrX=n.zrY=0}function He(e){return e||window.event}function Ve(e,t,n){if(null!=(t=He(t)).zrX)return t;var i=t.type;if(i&&0<=i.indexOf("touch")){var o="touchend"!==i?t.targetTouches[0]:t.changedTouches[0];o&&Fe(e,o,t,n)}else Fe(e,t,t,n),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var r=t.button;return null==t.which&&void 0!==r&&Le.test(t.type)&&(t.which=1&r?1:2&r?3:4&r?2:0),t}function We(e,t,n,i){Pe?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)}var $e=Pe?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function qe(e){return 2===e.which||3===e.which}function Ue(){this._track=[]}function je(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}Ue.prototype={constructor:Ue,recognize:function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,n){var i=e.touches;if(i){for(var o={points:[],touches:[],target:t,event:e},r=0,a=i.length;r<a;r++){var s=i[r],l=Fe(n,s,{});o.points.push([l.zrX,l.zrY]),o.touches.push(s)}this._track.push(o)}},_recognize:function(e){for(var t in Ge)if(Ge.hasOwnProperty(t)){var n=Ge[t](this._track,e);if(n)return n}}};var Ge={pinch:function(e,t){var n=e.length;if(n){var i=(e[n-1]||{}).points,o=(e[n-2]||{}).points||i;if(o&&1<o.length&&i&&1<i.length){var r=je(i)/je(o);isFinite(r)||(r=1),t.pinchScale=r;var a=function(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}(i);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Xe(){$e(this.event)}function Ye(){}function Ze(e,t,n,i){we.call(this),this.storage=e,this.painter=t,this.painterRoot=i,n=n||new Ye,this.proxy=null,this._hovered={},xe.call(this),this.setHandlerProxy(n)}Ye.prototype.dispose=function(){};var Je=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function Qe(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var i,o=e;o;){if(o.clipPath&&!o.clipPath.contain(t,n))return!1;o.silent&&(i=!0),o=o.parent}return!i||"silent"}return!1}function et(e,t,n){var i=e.painter;return t<0||t>i.getWidth()||n<0||n>i.getHeight()}Ze.prototype={constructor:Ze,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(w(Je,(function(t){e.on&&e.on(t,this[t],this)}),this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,n=e.zrY,i=et(this,t,n),o=this._hovered,r=o.target;r&&!r.__zr&&(r=(o=this.findHover(o.x,o.y)).target);var a=this._hovered=i?{x:t,y:n}:this.findHover(t,n),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),r&&s!==r&&this.dispatchToElement(o,"mouseout",e),this.dispatchToElement(a,"mousemove",e),s&&s!==r&&this.dispatchToElement(a,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,n=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&(n||this.trigger("globalout",{type:"globalout",event:e}))},resize:function(e){this._hovered={}},dispatch:function(e,t){var n=this[e];n&&n.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,n){var i=(e=e||{}).target;if(!i||!i.silent){for(var o="on"+t,r=function(e,t,n){return{type:e,event:n,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Xe}}(t,e,n);i&&(i[o]&&(r.cancelBubble=i[o].call(i,r)),i.trigger(t,r),i=i.parent,!r.cancelBubble););r.cancelBubble||(this.trigger(t,r),this.painter&&this.painter.eachOtherLayer((function(e){"function"==typeof e[o]&&e[o].call(e,r),e.trigger&&e.trigger(t,r)})))}},findHover:function(e,t,n){for(var i=this.storage.getDisplayList(),o={x:e,y:t},r=i.length-1;0<=r;r--){var a;if(i[r]!==n&&!i[r].ignore&&(a=Qe(i[r],e,t))&&(o.topTarget||(o.topTarget=i[r]),"silent"!==a)){o.target=i[r];break}}return o},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new Ue);var n=this._gestureMgr;"start"===t&&n.clear();var i=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),i){var o=i.type;e.gestureEvent=o,this.dispatchToElement({target:i.target},o,i.event)}}},w(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(e){Ze.prototype[e]=function(t){var n,i,o=t.zrX,r=t.zrY,a=et(this,o,r);if("mouseup"===e&&a||(i=(n=this.findHover(o,r)).target),"mousedown"===e)this._downEl=i,this._downPoint=[t.zrX,t.zrY],this._upEl=i;else if("mouseup"===e)this._upEl=i;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||4<me(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(n,e,t)}})),I(Ze,we),I(Ze,xe);var tt="undefined"==typeof Float32Array?Array:Float32Array;function nt(){var e=new tt(6);return it(e),e}function it(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function ot(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function rt(e,t,n){var i=t[1]*n[0]+t[3]*n[1],o=t[0]*n[2]+t[2]*n[3],r=t[1]*n[2]+t[3]*n[3],a=t[0]*n[4]+t[2]*n[5]+t[4],s=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=i,e[2]=o,e[3]=r,e[4]=a,e[5]=s,e}function at(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function st(e,t,n){var i=t[0],o=t[2],r=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=i*c+a*u,e[1]=-i*u+a*c,e[2]=o*c+s*u,e[3]=-o*u+c*s,e[4]=c*r+u*l,e[5]=c*l-u*r,e}function lt(e,t,n){var i=n[0],o=n[1];return e[0]=t[0]*i,e[1]=t[1]*o,e[2]=t[2]*i,e[3]=t[3]*o,e[4]=t[4]*i,e[5]=t[5]*o,e}function ut(e,t){var n=t[0],i=t[2],o=t[4],r=t[1],a=t[3],s=t[5],l=n*a-r*i;return l?(e[0]=a*(l=1/l),e[1]=-r*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-a*o)*l,e[5]=(r*o-n*s)*l,e):null}function ct(e){var t=nt();return ot(t,e),t}var dt=(Object.freeze||Object)({create:nt,identity:it,copy:ot,mul:rt,translate:at,rotate:st,scale:lt,invert:ut,clone:ct}),ft=it;function ht(e){return 5e-5<e||e<-5e-5}var gt=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},pt=gt.prototype;pt.transform=null,pt.needLocalTransform=function(){return ht(this.rotation)||ht(this.position[0])||ht(this.position[1])||ht(this.scale[0]-1)||ht(this.scale[1]-1)};var mt=[];pt.updateTransform=function(){var e=this.parent,t=e&&e.transform,n=this.needLocalTransform(),i=this.transform;if(n||t){i=i||nt(),n?this.getLocalTransform(i):ft(i),t&&(n?rt(i,e.transform,i):ot(i,e.transform)),this.transform=i;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(mt);var r=mt[0]<0?-1:1,a=mt[1]<0?-1:1,s=((mt[0]-r)*o+r)/mt[0]||0,l=((mt[1]-a)*o+a)/mt[1]||0;i[0]*=s,i[1]*=s,i[2]*=l,i[3]*=l}this.invTransform=this.invTransform||nt(),ut(this.invTransform,i)}else i&&ft(i)},pt.getLocalTransform=function(e){return gt.getLocalTransform(this,e)},pt.setTransform=function(e){var t=this.transform,n=e.dpr||1;t?e.setTransform(n*t[0],n*t[1],n*t[2],n*t[3],n*t[4],n*t[5]):e.setTransform(n,0,0,n,0,0)},pt.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var vt=[],yt=nt();pt.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],i=this.position,o=this.scale;ht(t-1)&&(t=Math.sqrt(t)),ht(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(t=-t),e[3]<0&&(n=-n),i[0]=e[4],i[1]=e[5],o[0]=t,o[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/t)}},pt.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(rt(vt,e.invTransform,t),t=vt);var n=this.origin;n&&(n[0]||n[1])&&(yt[4]=n[0],yt[5]=n[1],rt(vt,t,yt),vt[4]-=n[0],vt[5]-=n[1],t=vt),this.setLocalTransform(t)}},pt.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1])):(e[0]=1,e[1]=1),e},pt.transformCoordToLocal=function(e,t){var n=[e,t],i=this.invTransform;return i&&Te(n,n,i),n},pt.transformCoordToGlobal=function(e,t){var n=[e,t],i=this.transform;return i&&Te(n,n,i),n},gt.getLocalTransform=function(e,t){ft(t=t||[]);var n=e.origin,i=e.scale||[1,1],o=e.rotation||0,r=e.position||[0,0];return n&&(t[4]-=n[0],t[5]-=n[1]),lt(t,t,i),o&&st(t,t,o),n&&(t[4]+=n[0],t[5]+=n[1]),t[4]+=r[0],t[5]+=r[1],t};var bt={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)},bounceIn:function(e){return 1-bt.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*bt.bounceIn(2*e):.5*bt.bounceOut(2*e-1)+.5}};function Tt(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}function Ct(){this.head=null,this.tail=null,this._len=0}Tt.prototype={constructor:Tt,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var n=(e-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,o="string"==typeof i?bt[i]:i,r="function"==typeof o?o(n):n;return this.fire("frame",r),1===n?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){this._startTime=e-(e-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Et=Ct.prototype;function _t(e){this._list=new Ct,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null}Et.insert=function(e){var t=new xt(e);return this.insertEntry(t),t},Et.insertEntry=function(e){this.head?((this.tail.next=e).prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},Et.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},Et.len=function(){return this._len},Et.clear=function(){this.head=this.tail=null,this._len=0};var xt=function(e){this.value=e},It=_t.prototype;It.put=function(e,t){var n=this._list,i=this._map,o=null;if(null==i[e]){var r=n.len(),a=this._lastRemovedEntry;if(r>=this._maxSize&&0<r){var s=n.head;n.remove(s),delete i[s.key],o=s.value,this._lastRemovedEntry=s}a?a.value=t:a=new xt(t),a.key=e,n.insertEntry(a),i[e]=a}return o},It.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},It.clear=function(){this._list.clear(),this._map={}};var Dt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function wt(e){return(e=Math.round(e))<0?0:255<e?255:e}function Ot(e){return e<0?0:1<e?1:e}function Rt(e){return e.length&&"%"===e.charAt(e.length-1)?wt(parseFloat(e)/100*255):wt(parseInt(e,10))}function kt(e){return e.length&&"%"===e.charAt(e.length-1)?Ot(parseFloat(e)/100):Ot(parseFloat(e))}function St(e,t,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function At(e,t,n){return e+(t-e)*n}function Nt(e,t,n,i,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=o,e}function Mt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Kt=new _t(20),Pt=null;function Lt(e,t){Pt&&Mt(Pt,t),Pt=Kt.put(e,Pt||t.slice())}function Bt(e,t){if(e){t=t||[];var n=Kt.get(e);if(n)return Mt(t,n);var i,o=(e+="").replace(/ /g,"").toLowerCase();if(o in Dt)return Mt(t,Dt[o]),Lt(e,t),t;if("#"===o.charAt(0))return 4===o.length?0<=(i=parseInt(o.substr(1),16))&&i<=4095?(Nt(t,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),Lt(e,t),t):void Nt(t,0,0,0,1):7===o.length?0<=(i=parseInt(o.substr(1),16))&&i<=16777215?(Nt(t,(16711680&i)>>16,(65280&i)>>8,255&i,1),Lt(e,t),t):void Nt(t,0,0,0,1):void 0;var r=o.indexOf("("),a=o.indexOf(")");if(-1!==r&&a+1===o.length){var s=o.substr(0,r),l=o.substr(r+1,a-(r+1)).split(","),u=1;switch(s){case"rgba":if(4!==l.length)return void Nt(t,0,0,0,1);u=kt(l.pop());case"rgb":return 3!==l.length?void Nt(t,0,0,0,1):(Nt(t,Rt(l[0]),Rt(l[1]),Rt(l[2]),u),Lt(e,t),t);case"hsla":return 4!==l.length?void Nt(t,0,0,0,1):(l[3]=kt(l[3]),Ft(l,t),Lt(e,t),t);case"hsl":return 3!==l.length?void Nt(t,0,0,0,1):(Ft(l,t),Lt(e,t),t);default:return}}Nt(t,0,0,0,1)}}function Ft(e,t){var n=(parseFloat(e[0])%360+360)%360/360,i=kt(e[1]),o=kt(e[2]),r=o<=.5?o*(i+1):o+i-o*i,a=2*o-r;return Nt(t=t||[],wt(255*St(a,r,n+1/3)),wt(255*St(a,r,n)),wt(255*St(a,r,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function zt(e,t){var n=Bt(e);if(n){for(var i=0;i<3;i++)n[i]=t<0?n[i]*(1-t)|0:(255-n[i])*t+n[i]|0,255<n[i]?n[i]=255:e[i]<0&&(n[i]=0);return Ut(n,4===n.length?"rgba":"rgb")}}function Ht(e){var t=Bt(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function Vt(e,t,n){if(t&&t.length&&0<=e&&e<=1){n=n||[];var i=e*(t.length-1),o=Math.floor(i),r=Math.ceil(i),a=t[o],s=t[r],l=i-o;return n[0]=wt(At(a[0],s[0],l)),n[1]=wt(At(a[1],s[1],l)),n[2]=wt(At(a[2],s[2],l)),n[3]=Ot(At(a[3],s[3],l)),n}}function Wt(e,t,n){if(t&&t.length&&0<=e&&e<=1){var i=e*(t.length-1),o=Math.floor(i),r=Math.ceil(i),a=Bt(t[o]),s=Bt(t[r]),l=i-o,u=Ut([wt(At(a[0],s[0],l)),wt(At(a[1],s[1],l)),wt(At(a[2],s[2],l)),Ot(At(a[3],s[3],l))],"rgba");return n?{color:u,leftIndex:o,rightIndex:r,value:i}:u}}function $t(e,t,n,i){if(e=Bt(e))return e=function(e){if(e){var t,n,i=e[0]/255,o=e[1]/255,r=e[2]/255,a=Math.min(i,o,r),s=Math.max(i,o,r),l=s-a,u=(s+a)/2;if(0==l)n=t=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-i)/6+l/2)/l,d=((s-o)/6+l/2)/l,f=((s-r)/6+l/2)/l;i===s?t=f-d:o===s?t=1/3+c-f:r===s&&(t=2/3+d-c),t<0&&(t+=1),1<t&&(t-=1)}var h=[360*t,n,u];return null!=e[3]&&h.push(e[3]),h}}(e),null!=t&&(e[0]=function(e){return(e=Math.round(e))<0?0:360<e?360:e}(t)),null!=n&&(e[1]=kt(n)),null!=i&&(e[2]=kt(i)),Ut(Ft(e),"rgba")}function qt(e,t){if((e=Bt(e))&&null!=t)return e[3]=Ot(t),Ut(e,"rgba")}function Ut(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}var jt=(Object.freeze||Object)({parse:Bt,lift:zt,toHex:Ht,fastLerp:Vt,fastMapToColor:Vt,lerp:Wt,mapToColor:Wt,modifyHSL:$t,modifyAlpha:qt,stringify:Ut}),Gt=Array.prototype.slice;function Xt(e,t){return e[t]}function Yt(e,t,n){e[t]=n}function Zt(e,t,n){return(t-e)*n+e}function Jt(e,t,n){return.5<n?t:e}function Qt(e,t,n,i,o){var r=e.length;if(1===o)for(var a=0;a<r;a++)i[a]=Zt(e[a],t[a],n);else{var s=r&&e[0].length;for(a=0;a<r;a++)for(var l=0;l<s;l++)i[a][l]=Zt(e[a][l],t[a][l],n)}}function en(e,t,n){var i=e.length,o=t.length;if(i!==o)if(o<i)e.length=o;else for(var r=i;r<o;r++)e.push(1===n?t[r]:Gt.call(t[r]));var a=e[0]&&e[0].length;for(r=0;r<e.length;r++)if(1===n)isNaN(e[r])&&(e[r]=t[r]);else for(var s=0;s<a;s++)isNaN(e[r][s])&&(e[r][s]=t[r][s])}function tn(e,t,n){if(e===t)return!0;var i=e.length;if(i!==t.length)return!1;if(1===n){for(var o=0;o<i;o++)if(e[o]!==t[o])return!1}else{var r=e[0].length;for(o=0;o<i;o++)for(var a=0;a<r;a++)if(e[o][a]!==t[o][a])return!1}return!0}function nn(e,t,n,i,o,r,a,s,l){var u=e.length;if(1===l)for(var c=0;c<u;c++)s[c]=on(e[c],t[c],n[c],i[c],o,r,a);else{var d=e[0].length;for(c=0;c<u;c++)for(var f=0;f<d;f++)s[c][f]=on(e[c][f],t[c][f],n[c][f],i[c][f],o,r,a)}}function on(e,t,n,i,o,r,a){var s=.5*(n-e),l=.5*(i-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*r+s*o+t}function rn(e){if(D(e)){var t=e.length;if(D(e[0])){for(var n=[],i=0;i<t;i++)n.push(Gt.call(e[i]));return n}return Gt.call(e)}return e}function an(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function sn(e,t,n,i,o,r){var a=e._getter,s=e._setter,l="spline"===t,u=i.length;if(u){var c,d=D(i[0].value),f=!1,h=!1,g=d?function(e){var t=e[e.length-1].value;return D(t&&t[0])?2:1}(i):0;i.sort((function(e,t){return e.time-t.time})),c=i[u-1].time;for(var p=[],m=[],v=i[0].value,y=!0,b=0;b<u;b++){p.push(i[b].time/c);var T=i[b].value;if(d&&tn(T,v,g)||!d&&T===v||(y=!1),"string"==typeof(v=T)){var C=Bt(T);C?(T=C,f=!0):h=!0}m.push(T)}if(r||!y){var E=m[u-1];for(b=0;b<u-1;b++)d?en(m[b],E,g):!isNaN(m[b])||isNaN(E)||h||f||(m[b]=E);d&&en(a(e._target,o),E,g);var _,x,I,w,O,R=0,k=0;if(f)var S=[0,0,0,0];var A=new Tt({target:e._target,life:c,loop:e._loop,delay:e._delay,onframe:function(e,t){var n;if(t<0)n=0;else if(t<k){for(n=Math.min(R+1,u-1);0<=n&&!(p[n]<=t);n--);n=Math.min(n,u-2)}else{for(n=R;n<u&&!(p[n]>t);n++);n=Math.min(n-1,u-2)}k=t;var i=p[(R=n)+1]-p[n];if(0!=i)if(_=(t-p[n])/i,l)if(I=m[n],x=m[0===n?n:n-1],w=m[u-2<n?u-1:n+1],O=m[u-3<n?u-1:n+2],d)nn(x,I,w,O,_,_*_,_*_*_,a(e,o),g);else{if(f)r=nn(x,I,w,O,_,_*_,_*_*_,S,1),r=an(S);else{if(h)return Jt(I,w,_);r=on(x,I,w,O,_,_*_,_*_*_)}s(e,o,r)}else if(d)Qt(m[n],m[n+1],_,a(e,o),g);else{var r;if(f)Qt(m[n],m[n+1],_,S,1),r=an(S);else{if(h)return Jt(m[n],m[n+1],_);r=Zt(m[n],m[n+1],_)}s(e,o,r)}},ondestroy:n});return t&&"spline"!==t&&(A.easing=t),A}}}function ln(e,t,n,i){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||Xt,this._setter=i||Yt,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}ln.prototype={when:function(e,t){var n=this._tracks;for(var i in t)if(t.hasOwnProperty(i)){if(!n[i]){n[i]=[];var o=this._getter(this._target,i);if(null==o)continue;0!==e&&n[i].push({time:0,value:rn(o)})}n[i].push({time:e,value:t[i]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,n=0;n<t;n++)e[n].call(this)},start:function(e,t){function n(){--r||o._doneCallback()}var i,o=this,r=0;for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=sn(this,e,n,this._tracks[a],a,t);s&&(this._clipList.push(s),r++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(e,t){l(e,t);for(var n=0;n<o._onframeList.length;n++)o._onframeList[n](e,t)}}return r||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,n=this.animation,i=0;i<t.length;i++){var o=t[i];e&&o.onframe(this._target,1),n&&n.removeClip(o)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var un=1;"undefined"!=typeof window&&(un=Math.max(window.devicePixelRatio||1,1));var cn=un;function dn(){this.animators=[]}function fn(e,t,n,i,o,r,a,s){P(i)?(r=o,o=i,i=0):K(o)?(r=o,o="linear",i=0):K(i)?(r=i,i=0):n=K(n)?(r=n,500):n||500,e.stopAnimation(),function e(t,n,i,o,r,a,s){var l={},u=0;for(var c in o)o.hasOwnProperty(c)&&(null!=i[c]?L(o[c])&&!D(o[c])?e(t,n?n+"."+c:c,i[c],o[c],r,a,s):(s?(l[c]=i[c],hn(t,n,c,o[c])):l[c]=o[c],u++):null==o[c]||s||hn(t,n,c,o[c]));0<u&&t.animate(n,!1).when(null==r?500:r,l).delay(a||0)}(e,"",e,t,n,i,s);var l=e.animators.slice(),u=l.length;function c(){--u||r&&r()}u||r&&r();for(var d=0;d<l.length;d++)l[d].done(c).start(o,a)}function hn(e,t,n,i){if(t){var o={};o[t]={},o[t][n]=i,e.attr(o)}else e.attr(n,i)}dn.prototype={constructor:dn,animate:function(e,t){var n,i=!1,o=this,r=this.__zr;if(e){var a=e.split("."),s=o;i="shape"===a[0];for(var l=0,u=a.length;l<u;l++)s=s&&s[a[l]];s&&(n=s)}else n=o;if(n){var c=o.animators,d=new ln(n,t);return d.during((function(e){o.dirty(i)})).done((function(){c.splice(_(c,d),1)})),c.push(d),r&&r.animation.addAnimator(d),d}},stopAnimation:function(e){for(var t=this.animators,n=t.length,i=0;i<n;i++)t[i].stop(e);return t.length=0,this},animateTo:function(e,t,n,i,o,r){fn(this,e,t,n,i,o,r)},animateFrom:function(e,t,n,i,o,r){fn(this,e,t,n,i,o,r,!0)}};var gn=function(e){gt.call(this,e),we.call(this,e),dn.call(this,e),this.id=e.id||i()};gn.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=e,n[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var n=this[e];(n=n||(this[e]=[]))[0]=t[0],n[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(L(e))for(var n in e)e.hasOwnProperty(n)&&this.attrKV(n,e[n]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),(this.clipPath=e).__zr=t,(e.__clipTarget=this).dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},I(gn,dn),I(gn,gt),I(gn,we);var pn,mn,vn,yn,bn=Te,Tn=Math.min,Cn=Math.max;function En(e,t,n,i){n<0&&(e+=n,n=-n),i<0&&(t+=i,i=-i),this.x=e,this.y=t,this.width=n,this.height=i}En.prototype={constructor:En,union:function(e){var t=Tn(e.x,this.x),n=Tn(e.y,this.y);this.width=Cn(e.x+e.width,this.x+this.width)-t,this.height=Cn(e.y+e.height,this.y+this.height)-n,this.x=t,this.y=n},applyTransform:(pn=[],mn=[],vn=[],yn=[],function(e){if(e){pn[0]=vn[0]=this.x,pn[1]=yn[1]=this.y,mn[0]=yn[0]=this.x+this.width,mn[1]=vn[1]=this.y+this.height,bn(pn,pn,e),bn(mn,mn,e),bn(vn,vn,e),bn(yn,yn,e),this.x=Tn(pn[0],mn[0],vn[0],yn[0]),this.y=Tn(pn[1],mn[1],vn[1],yn[1]);var t=Cn(pn[0],mn[0],vn[0],yn[0]),n=Cn(pn[1],mn[1],vn[1],yn[1]);this.width=t-this.x,this.height=n-this.y}}),calculateTransform:function(e){var t=e.width/this.width,n=e.height/this.height,i=nt();return at(i,i,[-this.x,-this.y]),lt(i,i,[t,n]),at(i,i,[e.x,e.y]),i},intersect:function(e){if(!e)return!1;e instanceof En||(e=En.create(e));var t=this;return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)},contain:function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},clone:function(){return new En(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},En.create=function(e){return new En(e.x,e.y,e.width,e.height)};var _n=function(e){for(var t in gn.call(this,e=e||{}),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};function xn(e,t,n,i){var o=t+1;if(o===n)return 1;if(i(e[o++],e[t])<0){for(;o<n&&i(e[o],e[o-1])<0;)o++;!function(e,t,n){for(n--;t<n;){var i=e[t];e[t++]=e[n],e[n--]=i}}(e,t,o)}else for(;o<n&&0<=i(e[o],e[o-1]);)o++;return o-t}function In(e,t,n,i,o){for(i===t&&i++;i<n;i++){for(var r,a=e[i],s=t,l=i;s<l;)o(a,e[r=s+l>>>1])<0?l=r:s=1+r;var u=i-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;0<u;)e[s+u]=e[s+u-1],u--}e[s]=a}}function Dn(e,t,n,i,o,r){var a=0,s=0,l=1;if(0<r(e,t[n+o])){for(s=i-o;l<s&&0<r(e,t[n+o+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=o,l+=o}else{for(s=o+1;l<s&&r(e,t[n+o-l])<=0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var u=a;a=o-l,l=o-u}for(a++;a<l;){var c=a+(l-a>>>1);0<r(e,t[n+c])?a=c+1:l=c}return l}function wn(e,t,n,i,o,r){var a=0,s=0,l=1;if(r(e,t[n+o])<0){for(s=o+1;l<s&&r(e,t[n+o-l])<0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var u=a;a=o-l,l=o-u}else{for(s=i-o;l<s&&0<=r(e,t[n+o+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=o,l+=o}for(a++;a<l;){var c=a+(l-a>>>1);r(e,t[n+c])<0?l=c:a=c+1}return l}function On(e,t){var n,i,o=7,r=0,a=[];function s(s){var l=n[s],u=i[s],c=n[s+1],d=i[s+1];i[s]=u+d,s===r-3&&(n[s+1]=n[s+2],i[s+1]=i[s+2]),r--;var f=wn(e[c],e,l,u,0,t);l+=f,0!=(u-=f)&&0!==(d=Dn(e[l+u-1],e,c,d,d-1,t))&&(u<=d?function(n,i,r,s){var l=0;for(l=0;l<i;l++)a[l]=e[n+l];var u=0,c=r,d=n;if(e[d++]=e[c++],0!=--s){if(1===i){for(l=0;l<s;l++)e[d+l]=e[c+l];return e[d+s]=a[u]}for(var f,h,g,p=o;;){h=f=0,g=!1;do{if(t(e[c],a[u])<0){if(e[d++]=e[c++],h++,(f=0)==--s){g=!0;break}}else if(e[d++]=a[u++],f++,h=0,1==--i){g=!0;break}}while((f|h)<p);if(g)break;do{if(0!==(f=wn(e[c],a,u,i,0,t))){for(l=0;l<f;l++)e[d+l]=a[u+l];if(d+=f,u+=f,(i-=f)<=1){g=!0;break}}if(e[d++]=e[c++],0==--s){g=!0;break}if(0!==(h=Dn(a[u],e,c,s,0,t))){for(l=0;l<h;l++)e[d+l]=e[c+l];if(d+=h,c+=h,0==(s-=h)){g=!0;break}}if(e[d++]=a[u++],1==--i){g=!0;break}p--}while(7<=f||7<=h);if(g)break;p<0&&(p=0),p+=2}if((o=p)<1&&(o=1),1===i){for(l=0;l<s;l++)e[d+l]=e[c+l];e[d+s]=a[u]}else{if(0===i)throw new Error;for(l=0;l<i;l++)e[d+l]=a[u+l]}}else for(l=0;l<i;l++)e[d+l]=a[u+l]}(l,u,c,d):function(n,i,r,s){var l=0;for(l=0;l<s;l++)a[l]=e[r+l];var u=n+i-1,c=s-1,d=r+s-1,f=0,h=0;if(e[d--]=e[u--],0!=--i){if(1===s){for(h=1+(d-=i),f=1+(u-=i),l=i-1;0<=l;l--)e[h+l]=e[f+l];return e[d]=a[c]}for(var g=o;;){var p=0,m=0,v=!1;do{if(t(a[c],e[u])<0){if(e[d--]=e[u--],p++,(m=0)==--i){v=!0;break}}else if(e[d--]=a[c--],m++,p=0,1==--s){v=!0;break}}while((p|m)<g);if(v)break;do{if(0!=(p=i-wn(a[c],e,n,i,i-1,t))){for(i-=p,h=1+(d-=p),f=1+(u-=p),l=p-1;0<=l;l--)e[h+l]=e[f+l];if(0===i){v=!0;break}}if(e[d--]=a[c--],1==--s){v=!0;break}if(0!=(m=s-Dn(e[u],a,0,s,s-1,t))){for(s-=m,h=1+(d-=m),f=1+(c-=m),l=0;l<m;l++)e[h+l]=a[f+l];if(s<=1){v=!0;break}}if(e[d--]=e[u--],0==--i){v=!0;break}g--}while(7<=p||7<=m);if(v)break;g<0&&(g=0),g+=2}if((o=g)<1&&(o=1),1===s){for(h=1+(d-=i),f=1+(u-=i),l=i-1;0<=l;l--)e[h+l]=e[f+l];e[d]=a[c]}else{if(0===s)throw new Error;for(f=d-(s-1),l=0;l<s;l++)e[f+l]=a[l]}}else for(f=d-(s-1),l=0;l<s;l++)e[f+l]=a[l]}(l,u,c,d))}n=[],i=[],this.mergeRuns=function(){for(;1<r;){var e=r-2;if(1<=e&&i[e-1]<=i[e]+i[e+1]||2<=e&&i[e-2]<=i[e]+i[e-1])i[e-1]<i[e+1]&&e--;else if(i[e]>i[e+1])break;s(e)}},this.forceMergeRuns=function(){for(;1<r;){var e=r-2;0<e&&i[e-1]<i[e+1]&&e--,s(e)}},this.pushRun=function(e,t){n[r]=e,i[r]=t,r+=1}}function Rn(e,t,n,i){var o=(i=i||e.length)-(n=n||0);if(!(o<2)){var r=0;if(o<32)In(e,n,i,n+(r=xn(e,n,i,t)),t);else{var a=new On(e,t),s=function(e){for(var t=0;32<=e;)t|=1&e,e>>=1;return e+t}(o);do{if((r=xn(e,n,i,t))<s){var l=o;s<l&&(l=s),In(e,n,n+l,n+r,t),r=l}a.pushRun(n,r),a.mergeRuns(),o-=r,n+=r}while(0!==o);a.forceMergeRuns()}}}function kn(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}function Sn(){this._roots=[],this._displayList=[],this._displayListLen=0}_n.prototype={constructor:_n,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,i=n.indexOf(t);0<=i&&(n.splice(i,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e);var t=(e.parent=this).__storage,n=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof _n&&e.addChildrenToStorage(t)),n&&n.refresh()},remove:function(e){var t=this.__zr,n=this.__storage,i=this._children,o=_(i,e);return o<0||(i.splice(o,1),e.parent=null,n&&(n.delFromStorage(e),e instanceof _n&&e.delChildrenFromStorage(n)),t&&t.refresh()),this},removeAll:function(){var e,t,n=this._children,i=this.__storage;for(t=0;t<n.length;t++)e=n[t],i&&(i.delFromStorage(e),e instanceof _n&&e.delChildrenFromStorage(i)),e.parent=null;return n.length=0,this},eachChild:function(e,t){for(var n=this._children,i=0;i<n.length;i++)e.call(t,n[i],i);return this},traverse:function(e,t){for(var n=0;n<this._children.length;n++){var i=this._children[n];e.call(t,i),"group"===i.type&&i.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToStorage(n),n instanceof _n&&n.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromStorage(n),n instanceof _n&&n.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,n=new En(0,0,0,0),i=e||this._children,o=[],r=0;r<i.length;r++){var a=i[r];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(o);l?(n.copy(s),n.applyTransform(l),(t=t||n.clone()).union(n)):(t=t||s.clone()).union(s)}}return t||n}},x(_n,gn),Sn.prototype={constructor:Sn,traverse:function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,i=0,r=t.length;i<r;i++)this._updateAndAddDisplayable(t[i],null,e);n.length=this._displayListLen,o.canvasSupported&&Rn(n,kn)},_updateAndAddDisplayable:function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var i=e.clipPath;if(i){t=t?t.slice():[];for(var o=i,r=e;o;)o.parent=r,o.updateTransform(),t.push(o),o=(r=o).clipPath}if(e.isGroup){for(var a=e._children,s=0;s<a.length;s++){var l=a[s];e.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,t,n)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof _n&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof _n&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var i=e.length;t<i;t++)this.delRoot(e[t])}else{var o=_(this._roots,e);0<=o&&(this.delFromStorage(e),this._roots.splice(o,1),e instanceof _n&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:kn};var An={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},Nn=function(e,t,n){return An.hasOwnProperty(t)?n*e.dpr:n},Mn=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Kn=function(e){this.extendFrom(e,!1)};function Pn(e,t,n){var i=null==t.x?0:t.x,o=null==t.x2?1:t.x2,r=null==t.y?0:t.y,a=null==t.y2?0:t.y2;return t.global||(i=i*n.width+n.x,o=o*n.width+n.x,r=r*n.height+n.y,a=a*n.height+n.y),i=isNaN(i)?0:i,o=isNaN(o)?1:o,r=isNaN(r)?0:r,a=isNaN(a)?0:a,e.createLinearGradient(i,r,o,a)}function Ln(e,t,n){var i=n.width,o=n.height,r=Math.min(i,o),a=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;return t.global||(a=a*i+n.x,s=s*o+n.y,l*=r),e.createRadialGradient(a,s,0,a,s,l)}for(var Bn=Kn.prototype={constructor:Kn,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,n){var i=this,o=n&&n.style,r=!o||1!==e.__attrCachedBy;e.__attrCachedBy=1;for(var a=0;a<Mn.length;a++){var s=Mn[a],l=s[0];!r&&i[l]===o[l]||(e[l]=Nn(e,l,i[l]||s[1]))}!r&&i.fill===o.fill||(e.fillStyle=i.fill),!r&&i.stroke===o.stroke||(e.strokeStyle=i.stroke),!r&&i.opacity===o.opacity||(e.globalAlpha=null==i.opacity?1:i.opacity),!r&&i.blend===o.blend||(e.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()&&(e.lineWidth=i.lineWidth/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1))},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&0<this.lineWidth},extendFrom:function(e,t){if(e)for(var n in e)!e.hasOwnProperty(n)||!0!==t&&(!1===t?this.hasOwnProperty(n):null==e[n])||(this[n]=e[n])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,n){for(var i=("radial"===t.type?Ln:Pn)(e,t,n),o=t.colorStops,r=0;r<o.length;r++)i.addColorStop(o[r].offset,o[r].color);return i}},Fn=0;Fn<Mn.length;Fn++){var zn=Mn[Fn];zn[0]in Bn||(Bn[zn[0]]=zn[1])}function Hn(e,t){this.image=e,this.repeat=t,this.type="pattern"}function Vn(){return!1}function Wn(e,t,n){var i=C(),o=t.getWidth(),r=t.getHeight(),a=i.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=o+"px",a.height=r+"px",i.setAttribute("data-zr-dom-id",e)),i.width=o*n,i.height=r*n,i}function $n(e,t,n){var i;n=n||cn,"string"==typeof e?i=Wn(e,t,n):L(e)&&(e=(i=e).id),this.id=e;var o=(this.dom=i).style;o&&(i.onselectstart=Vn,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o.padding=0,o.margin=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}Kn.getGradient=Bn.getGradient,$n.prototype={constructor:$n,__dirty:!0,__used:!(Hn.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=Wn("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var n=this.dpr,i=this.dom,o=i.style,r=this.domBack;o&&(o.width=e+"px",o.height=t+"px"),i.width=e*n,i.height=t*n,r&&(r.width=e*n,r.height=t*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(e,t){var n,i=this.dom,o=this.ctx,r=i.width,a=i.height,s=(t=t||this.clearColor,this.motionBlur&&!e),l=this.lastFrameAlpha,u=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,r/u,a/u)),o.clearRect(0,0,r,a),t&&"transparent"!==t&&(t.colorStops?(n=t.__canvasGradient||Kn.getGradient(o,t,{x:0,y:0,width:r,height:a}),t.__canvasGradient=n):t.image&&(n=Hn.prototype.getCanvasPattern.call(t,o)),o.save(),o.fillStyle=n||t,o.fillRect(0,0,r,a),o.restore()),s){var c=this.domBack;o.save(),o.globalAlpha=l,o.drawImage(c,0,0,r,a),o.restore()}}};var qn="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},Un=new _t(50);function jn(e){if("string"!=typeof e)return e;var t=Un.get(e);return t&&t.image}function Gn(e,t,n,i,o){if(e){if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!n)return t;var r=Un.get(e),a={hostEl:n,cb:i,cbPayload:o};return r?Yn(t=r.image)||r.pending.push(a):((t=new Image).onload=t.onerror=Xn,Un.put(e,t.__cachedImgObj={image:t,pending:[a]}),t.src=t.__zrImageSrc=e),t}return t}function Xn(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function Yn(e){return e&&e.width&&e.height}var Zn={},Jn=0,Qn=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,ei="12px sans-serif",ti={};function ni(e,t){var n=e+":"+(t=t||ei);if(Zn[n])return Zn[n];for(var i,o,r=(e+"").split("\n"),a=0,s=0,l=r.length;s<l;s++)a=Math.max((i=r[s],o=t,ti.measureText(i,o)).width,a);return 5e3<Jn&&(Jn=0,Zn={}),Jn++,Zn[n]=a}function ii(e,t,n,i,o,r,a,s){return a?function(e,t,n,i,o,r,a,s){var l=hi(e,{rich:a,truncate:s,font:t,textAlign:n,textPadding:o,textLineHeight:r}),u=l.outerWidth,c=l.outerHeight;return new En(oi(0,u,n),ri(0,c,i),u,c)}(e,t,n,i,o,r,a,s):function(e,t,n,i,o,r,a){var s=fi(e,t,o,r,a),l=ni(e,t);o&&(l+=o[1]+o[3]);var u=s.outerHeight,c=new En(oi(0,l,n),ri(0,u,i),l,u);return c.lineHeight=s.lineHeight,c}(e,t,n,i,o,r,s)}function oi(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function ri(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function ai(e,t,n){var i=t.textDistance,o=n.x,r=n.y;i=i||0;var a=n.height,s=n.width,l=a/2,u="left",c="top";switch(t.textPosition){case"left":o-=i,r+=l,u="right",c="middle";break;case"right":o+=i+s,r+=l,c="middle";break;case"top":o+=s/2,r-=i,u="center",c="bottom";break;case"bottom":o+=s/2,r+=a+i,u="center";break;case"inside":o+=s/2,r+=l,u="center",c="middle";break;case"insideLeft":o+=i,r+=l,c="middle";break;case"insideRight":o+=s-i,r+=l,u="right",c="middle";break;case"insideTop":o+=s/2,r+=i,u="center";break;case"insideBottom":o+=s/2,r+=a-i,u="center",c="bottom";break;case"insideTopLeft":o+=i,r+=i;break;case"insideTopRight":o+=s-i,r+=i,u="right";break;case"insideBottomLeft":o+=i,r+=a-i,c="bottom";break;case"insideBottomRight":o+=s-i,r+=a-i,u="right",c="bottom"}return(e=e||{}).x=o,e.y=r,e.textAlign=u,e.textVerticalAlign=c,e}function si(e,t,n,i,o){if(!t)return"";var r=(e+"").split("\n");o=li(t,n,i,o);for(var a=0,s=r.length;a<s;a++)r[a]=ui(r[a],o);return r.join("\n")}function li(e,t,n,i){(i=b({},i)).font=t,n=W(n,"..."),i.maxIterations=W(i.maxIterations,2);var o=i.minChar=W(i.minChar,0);i.cnCharWidth=ni("国",t);var r=i.ascCharWidth=ni("a",t);i.placeholder=W(i.placeholder,"");for(var a=e=Math.max(0,e-1),s=0;s<o&&r<=a;s++)a-=r;var l=ni(n,t);return a<l&&(n="",l=0),a=e-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=a,i.containerWidth=e,i}function ui(e,t){var n=t.containerWidth,i=t.font,o=t.contentWidth;if(!n)return"";var r=ni(e,i);if(r<=n)return e;for(var a=0;;a++){if(r<=o||a>=t.maxIterations){e+=t.ellipsis;break}var s=0===a?ci(e,o,t.ascCharWidth,t.cnCharWidth):0<r?Math.floor(e.length*o/r):0;r=ni(e=e.substr(0,s),i)}return""===e&&(e=t.placeholder),e}function ci(e,t,n,i){for(var o=0,r=0,a=e.length;r<a&&o<t;r++){var s=e.charCodeAt(r);o+=0<=s&&s<=127?n:i}return r}function di(e){return ni("国",e)}function fi(e,t,n,i,o){null!=e&&(e+="");var r=W(i,di(t)),a=e?e.split("\n"):[],s=a.length*r,l=s,u=!0;if(n&&(l+=n[0]+n[2]),e&&o){u=!1;var c=o.outerHeight,d=o.outerWidth;if(null!=c&&c<l)e="",a=[];else if(null!=d)for(var f=li(d-(n?n[1]+n[3]:0),t,o.ellipsis,{minChar:o.minChar,placeholder:o.placeholder}),h=0,g=a.length;h<g;h++)a[h]=ui(a[h],f)}return{lines:a,height:s,outerHeight:l,lineHeight:r,canCacheByTextString:u}}function hi(e,t){var n={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return n;for(var i,o=Qn.lastIndex=0;null!=(i=Qn.exec(e));){var r=i.index;o<r&&gi(n,e.substring(o,r)),gi(n,i[2],i[1]),o=Qn.lastIndex}o<e.length&&gi(n,e.substring(o,e.length));var a=n.lines,s=0,l=0,u=[],c=t.textPadding,d=t.truncate,f=d&&d.outerWidth,h=d&&d.outerHeight;c&&(null!=f&&(f-=c[1]+c[3]),null!=h&&(h-=c[0]+c[2]));for(var g=0;g<a.length;g++){for(var p=a[g],m=0,v=0,y=0;y<p.tokens.length;y++){var b=(R=p.tokens[y]).styleName&&t.rich[R.styleName]||{},T=R.textPadding=b.textPadding,C=R.font=b.font||t.font,E=R.textHeight=W(b.textHeight,di(C));if(T&&(E+=T[0]+T[2]),R.height=E,R.lineHeight=$(b.textLineHeight,t.textLineHeight,E),R.textAlign=b&&b.textAlign||t.textAlign,R.textVerticalAlign=b&&b.textVerticalAlign||"middle",null!=h&&s+R.lineHeight>h)return{lines:[],width:0,height:0};R.textWidth=ni(R.text,C);var _=b.textWidth,x=null==_||"auto"===_;if("string"==typeof _&&"%"===_.charAt(_.length-1))R.percentWidth=_,u.push(R),_=0;else{if(x){_=R.textWidth;var I=b.textBackgroundColor,D=I&&I.image;D&&Yn(D=jn(D))&&(_=Math.max(_,D.width*E/D.height))}var w=T?T[1]+T[3]:0;_+=w;var O=null!=f?f-v:null;null!=O&&O<_&&(!x||O<w?(R.text="",R.textWidth=_=0):(R.text=si(R.text,O-w,C,d.ellipsis,{minChar:d.minChar}),R.textWidth=ni(R.text,C),_=R.textWidth+w))}v+=R.width=_,b&&(m=Math.max(m,R.lineHeight))}p.width=v,s+=p.lineHeight=m,l=Math.max(l,v)}for(n.outerWidth=n.width=W(t.textWidth,l),n.outerHeight=n.height=W(t.textHeight,s),c&&(n.outerWidth+=c[1]+c[3],n.outerHeight+=c[0]+c[2]),g=0;g<u.length;g++){var R,k=(R=u[g]).percentWidth;R.width=parseInt(k,10)/100*l}return n}function gi(e,t,n){for(var i=""===t,o=t.split("\n"),r=e.lines,a=0;a<o.length;a++){var s=o[a],l={styleName:n,text:s,isLineHolder:!s&&!i};if(a)r.push({tokens:[l]});else{var u=(r[r.length-1]||(r[0]={tokens:[]})).tokens,c=u.length;1===c&&u[0].isLineHolder?u[0]=l:!s&&c&&!i||u.push(l)}}}function pi(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&G(t)||e.textFont||e.font}function mi(e,t){var n,i,o,r,a,s=t.x,l=t.y,u=t.width,c=t.height,d=t.r;u<0&&(s+=u,u=-u),c<0&&(l+=c,c=-c),"number"==typeof d?n=i=o=r=d:d instanceof Array?1===d.length?n=i=o=r=d[0]:2===d.length?(n=o=d[0],i=r=d[1]):3===d.length?(n=d[0],i=r=d[1],o=d[2]):(n=d[0],i=d[1],o=d[2],r=d[3]):n=i=o=r=0,u<n+i&&(n*=u/(a=n+i),i*=u/a),u<o+r&&(o*=u/(a=o+r),r*=u/a),c<i+o&&(i*=c/(a=i+o),o*=c/a),c<n+r&&(n*=c/(a=n+r),r*=c/a),e.moveTo(s+n,l),e.lineTo(s+u-i,l),0!==i&&e.arc(s+u-i,l+i,i,-Math.PI/2,0),e.lineTo(s+u,l+c-o),0!==o&&e.arc(s+u-o,l+c-o,o,0,Math.PI/2),e.lineTo(s+r,l+c),0!==r&&e.arc(s+r,l+c-r,r,Math.PI/2,Math.PI),e.lineTo(s,l+n),0!==n&&e.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}ti.measureText=function(e,t){var n=E();return n.font=t||ei,n.measureText(e)};var vi=ei,yi={left:1,right:1,center:1},bi={top:1,bottom:1,middle:1},Ti=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],Ci={},Ei={};function _i(e){return xi(e),w(e.rich,xi),e}function xi(e){if(e){e.font=pi(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||yi[t]?t:"left";var n=e.textVerticalAlign||e.textBaseline;"center"===n&&(n="middle"),e.textVerticalAlign=null==n||bi[n]?n:"top",e.textPadding&&(e.textPadding=U(e.textPadding))}}function Ii(e,t,n,i,o,r){i.rich?function(e,t,n,i,o,r){9!==r&&(t.__attrCachedBy=0);var a=e.__textCotentBlock;a&&!e.__dirtyText||(a=e.__textCotentBlock=hi(n,i)),function(e,t,n,i,o){var r=n.width,a=n.outerWidth,s=n.outerHeight,l=i.textPadding,u=Si(Ei,e,i,o),c=u.baseX,d=u.baseY,f=u.textAlign,h=u.textVerticalAlign;Di(t,i,o,c,d);var g=oi(c,a,f),p=ri(d,s,h),m=g,v=p;l&&(m+=l[3],v+=l[0]);var y=m+r;Oi(i)&&Ri(e,t,i,g,p,a,s);for(var b=0;b<n.lines.length;b++){for(var T,C=n.lines[b],E=C.tokens,_=E.length,x=C.lineHeight,I=C.width,D=0,w=m,O=y,R=_-1;D<_&&(!(T=E[D]).textAlign||"left"===T.textAlign);)wi(e,t,T,i,x,v,w,"left"),I-=T.width,w+=T.width,D++;for(;0<=R&&"right"===(T=E[R]).textAlign;)wi(e,t,T,i,x,v,O,"right"),I-=T.width,O-=T.width,R--;for(w+=(r-(w-m)-(y-O)-I)/2;D<=R;)wi(e,t,T=E[D],i,x,v,w+T.width/2,"center"),w+=T.width,D++;v+=x}}(e,t,a,i,o)}(e,t,n,i,o,r):function(e,t,n,i,o,r){var a,s=Oi(i),l=!1,u=2===t.__attrCachedBy;9!==r?(r&&(a=r.style,l=!s&&u&&a),t.__attrCachedBy=s?0:2):u&&(t.__attrCachedBy=0);var c=i.font||vi;l&&c===(a.font||vi)||(t.font=c);var d=e.__computedFont;e.__styleFont!==c&&(e.__styleFont=c,d=e.__computedFont=t.font);var f=i.textPadding,h=e.__textCotentBlock;h&&!e.__dirtyText||(h=e.__textCotentBlock=fi(n,d,f,i.textLineHeight,i.truncate));var g=h.outerHeight,p=h.lines,m=h.lineHeight,v=Si(Ei,e,i,o),y=v.baseX,b=v.baseY,T=v.textAlign||"left",C=v.textVerticalAlign;Di(t,i,o,y,b);var E=ri(b,g,C),_=y,x=E;if(s||f){var I=ni(n,d);f&&(I+=f[1]+f[3]);var D=oi(y,I,T);s&&Ri(e,t,i,D,E,I,g),f&&(_=Pi(y,T,f),x+=f[0])}t.textAlign=T,t.textBaseline="middle",t.globalAlpha=i.opacity||1;for(var w=0;w<Ti.length;w++){var O=Ti[w],R=O[0],k=O[1],S=i[R];l&&S===a[R]||(t[k]=Nn(t,k,S||O[2]))}x+=m/2;var A=i.textStrokeWidth,N=!l||A!==(l?a.textStrokeWidth:null),M=!l||N||i.textStroke!==a.textStroke,K=Ni(i.textStroke,A),P=Mi(i.textFill);if(K&&(N&&(t.lineWidth=A),M&&(t.strokeStyle=K)),P&&(l&&i.textFill===a.textFill||(t.fillStyle=P)),1===p.length)K&&t.strokeText(p[0],_,x),P&&t.fillText(p[0],_,x);else for(w=0;w<p.length;w++)K&&t.strokeText(p[w],_,x),P&&t.fillText(p[w],_,x),x+=m}(e,t,n,i,o,r)}function Di(e,t,n,i,o){if(n&&t.textRotation){var r=t.textOrigin;"center"===r?(i=n.width/2+n.x,o=n.height/2+n.y):r&&(i=r[0]+n.x,o=r[1]+n.y),e.translate(i,o),e.rotate(-t.textRotation),e.translate(-i,-o)}}function wi(e,t,n,i,o,r,a,s){var l=i.rich[n.styleName]||{};l.text=n.text;var u=n.textVerticalAlign,c=r+o/2;"top"===u?c=r+n.height/2:"bottom"===u&&(c=r+o-n.height/2),!n.isLineHolder&&Oi(l)&&Ri(e,t,l,"right"===s?a-n.width:"center"===s?a-n.width/2:a,c-n.height/2,n.width,n.height);var d=n.textPadding;d&&(a=Pi(a,s,d),c-=n.height/2-d[2]-n.textHeight/2),Ai(t,"shadowBlur",$(l.textShadowBlur,i.textShadowBlur,0)),Ai(t,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),Ai(t,"shadowOffsetX",$(l.textShadowOffsetX,i.textShadowOffsetX,0)),Ai(t,"shadowOffsetY",$(l.textShadowOffsetY,i.textShadowOffsetY,0)),Ai(t,"textAlign",s),Ai(t,"textBaseline","middle"),Ai(t,"font",n.font||vi);var f=Ni(l.textStroke||i.textStroke,g),h=Mi(l.textFill||i.textFill),g=W(l.textStrokeWidth,i.textStrokeWidth);f&&(Ai(t,"lineWidth",g),Ai(t,"strokeStyle",f),t.strokeText(n.text,a,c)),h&&(Ai(t,"fillStyle",h),t.fillText(n.text,a,c))}function Oi(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function Ri(e,t,n,i,o,r,a){var s=n.textBackgroundColor,l=n.textBorderWidth,u=n.textBorderColor,c=P(s);if(Ai(t,"shadowBlur",n.textBoxShadowBlur||0),Ai(t,"shadowColor",n.textBoxShadowColor||"transparent"),Ai(t,"shadowOffsetX",n.textBoxShadowOffsetX||0),Ai(t,"shadowOffsetY",n.textBoxShadowOffsetY||0),c||l&&u){t.beginPath();var d=n.textBorderRadius;d?mi(t,{x:i,y:o,width:r,height:a,r:d}):t.rect(i,o,r,a),t.closePath()}if(c)if(Ai(t,"fillStyle",s),null!=n.fillOpacity){var f=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=f}else t.fill();else if(L(s)){var h=s.image;(h=Gn(h,null,e,ki,s))&&Yn(h)&&t.drawImage(h,i,o,r,a)}l&&u&&(Ai(t,"lineWidth",l),Ai(t,"strokeStyle",u),null!=n.strokeOpacity?(f=t.globalAlpha,t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=f):t.stroke())}function ki(e,t){t.image=e}function Si(e,t,n,i){var o=n.x||0,r=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(i){var l=n.textPosition;if(l instanceof Array)o=i.x+Ki(l[0],i.width),r=i.y+Ki(l[1],i.height);else{var u=t&&t.calculateTextPosition?t.calculateTextPosition(Ci,n,i):ai(Ci,n,i);o=u.x,r=u.y,a=a||u.textAlign,s=s||u.textVerticalAlign}var c=n.textOffset;c&&(o+=c[0],r+=c[1])}return(e=e||{}).baseX=o,e.baseY=r,e.textAlign=a,e.textVerticalAlign=s,e}function Ai(e,t,n){return e[t]=Nn(e,t,n),e[t]}function Ni(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function Mi(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function Ki(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e}function Pi(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function Li(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}function Bi(){}var Fi=new En;function zi(e){for(var t in gn.call(this,e=e||{}),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new Kn(e.style,this),this._rect=null,this.__clipPaths=null}function Hi(e){zi.call(this,e)}zi.prototype={constructor:zi,type:"displayable",__dirty:!0,invisible:!(Bi.prototype={constructor:Bi,drawRectText:function(e,t){var n=this.style;t=n.textRect||t,this.__dirty&&_i(n);var i=n.text;if(null!=i&&(i+=""),Li(i,n)){e.save();var o=this.transform;n.transformText?this.setTransform(e):o&&(Fi.copy(t),Fi.applyTransform(o),t=Fi),Ii(this,e,i,n,t,9),e.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?gn.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new Kn(e,this),this.dirty(!1),this},calculateTextPosition:null},x(zi,gn),I(zi,Bi),Hi.prototype={constructor:Hi,type:"image",brush:function(e,t){var n=this.style,i=n.image;n.bind(e,this,t);var o=this._image=Gn(i,this._image,this,this.onload);if(o&&Yn(o)){var r=n.x||0,a=n.y||0,s=n.width,l=n.height,u=o.width/o.height;if(null==s&&null!=l?s=l*u:null==l&&null!=s?l=s/u:null==s&&null==l&&(s=o.width,l=o.height),this.setTransform(e),n.sWidth&&n.sHeight){var c=n.sx||0,d=n.sy||0;e.drawImage(o,c,d,n.sWidth,n.sHeight,r,a,s,l)}else if(n.sx&&n.sy){var f=s-(c=n.sx),h=l-(d=n.sy);e.drawImage(o,c,d,f,h,r,a,s,l)}else e.drawImage(o,r,a,s,l);null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new En(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},x(Hi,zi);var Vi=314159;function Wi(e){return parseInt(e,10)}var $i=new En(0,0,0,0),qi=new En(0,0,0,0);function Ui(e,t,n){this.type="canvas";var i=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=b({},n||{}),this.dpr=n.devicePixelRatio||cn,this._singleCanvas=i;var o=(this.root=e).style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var r=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var s=e.width,l=e.height;null!=n.width&&(s=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,e.width=s*this.dpr,e.height=l*this.dpr,this._width=s,this._height=l;var u=new $n(e,this,this.dpr);u.__builtin__=!0,u.initContext(),(a[Vi]=u).zlevel=Vi,r.push(Vi),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var c=this._domRoot=function(e,t){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);e.appendChild(c)}this._hoverlayer=null,this._hoverElements=[]}function ji(e){this.stage=(e=e||{}).stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,we.call(this)}Ui.prototype={constructor:Ui,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var i=0;i<n.length;i++){var o=this._layers[n[i]];!o.__builtin__&&o.refresh&&o.refresh(0===i?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var n=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return(n.__from=e).__hoverMir=n,t&&n.setStyle(t),this._hoverElements.push(n),n}},removeHover:function(e){var t=this._hoverElements,n=_(t,e.__hoverMir);0<=n&&t.splice(n,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,n=0;n<t.length;n++){var i=t[n].__from;i&&(i.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){Rn(e,this.storage.displayableSortFunc);var i={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var o=0;o<t;){var r=e[o],a=r.__from;a&&a.__zr?(o++,a.invisible||(r.transform=a.transform,r.invTransform=a.invTransform,r.__clipPaths=a.__clipPaths,this._doPaintEl(r,n,!0,i))):(e.splice(o,1),a.__hoverMir=null,t--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,n){if(this._redrawId===n){t=t||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var o=this;qn((function(){o._paintList(e,t,n)}))}}},_compositeManually:function(){var e=this.getLayer(Vi).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer((function(i){i.virtual&&e.drawImage(i.dom,0,0,t,n)}))},_doPaintList:function(e,t){for(var n=[],i=0;i<this._zlevelList.length;i++)(s=this._layers[this._zlevelList[i]]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||t)&&n.push(s);for(var r=!0,a=0;a<n.length;a++){var s,l=(s=n[a]).ctx,u={};l.save();var c=t?s.__startIndex:s.__drawIndex,d=!t&&s.incremental&&Date.now,f=d&&Date.now(),h=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,h);else if(c===s.__startIndex){var g=e[c];g.incremental&&g.notClear&&!t||s.clear(!1,h)}-1===c&&(console.error("For some unknown reason. drawIndex is -1"),c=s.__startIndex);for(var p=c;p<s.__endIndex;p++){var m=e[p];if(this._doPaintEl(m,s,t,u),m.__dirty=m.__dirtyText=!1,d&&15<Date.now()-f)break}s.__drawIndex=p,s.__drawIndex<s.__endIndex&&(r=!1),u.prevElClipPaths&&l.restore(),l.restore()}return o.wxa&&w(this._layers,(function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()})),r},_doPaintEl:function(e,t,n,i){var o=t.ctx,r=e.transform;if((t.__dirty||n)&&!e.invisible&&0!==e.style.opacity&&(!r||r[0]||r[3])&&(!e.culling||!function(e,t,n){return $i.copy(e.getBoundingRect()),e.transform&&$i.applyTransform(e.transform),qi.width=t,qi.height=n,!$i.intersect(qi)}(e,this._width,this._height))){var a=e.__clipPaths,s=i.prevElClipPaths;s&&!function(e,t){if(e===t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(a,s)||(s&&(o.restore(),i.prevElClipPaths=null,i.prevEl=null),a&&(o.save(),function(e,t){for(var n=0;n<e.length;n++){var i=e[n];i.setTransform(t),t.beginPath(),i.buildPath(t,i.shape),t.clip(),i.restoreTransform(t)}}(a,o),i.prevElClipPaths=a)),e.beforeBrush&&e.beforeBrush(o),e.brush(o,i.prevEl||null),(i.prevEl=e).afterBrush&&e.afterBrush(o)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Vi);var n=this._layers[e];return n||((n=new $n("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?v(n,this._layerConfig[e],!0):this._layerConfig[e-.01]&&v(n,this._layerConfig[e-.01],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},insertLayer:function(e,t){var n=this._layers,i=this._zlevelList,o=i.length,r=null,a=-1,s=this._domRoot;if(n[e]);else if(function(e){return!!e&&(!!e.__builtin__||"function"==typeof e.resize&&"function"==typeof e.refresh)}(t)){if(0<o&&e>i[0]){for(a=0;a<o-1&&!(i[a]<e&&i[a+1]>e);a++);r=n[i[a]]}if(i.splice(a+1,0,e),!(n[e]=t).virtual)if(r){var l=r.dom;l.nextSibling?s.insertBefore(t.dom,l.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom)}},eachLayer:function(e,t){var n,i,o=this._zlevelList;for(i=0;i<o.length;i++)e.call(t,this._layers[n=o[i]],n)},eachBuiltinLayer:function(e,t){var n,i,o,r=this._zlevelList;for(o=0;o<r.length;o++)(n=this._layers[i=r[o]]).__builtin__&&e.call(t,n,i)},eachOtherLayer:function(e,t){var n,i,o,r=this._zlevelList;for(o=0;o<r.length;o++)(n=this._layers[i=r[o]]).__builtin__||e.call(t,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(e){o&&(o.__endIndex!==e&&(o.__dirty=!0),o.__endIndex=e)}if(this.eachBuiltinLayer((function(e,t){e.__dirty=e.__used=!1})),this._singleCanvas)for(var n=1;n<e.length;n++)if((a=e[n]).zlevel!==e[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}var i,o=null,r=0;for(n=0;n<e.length;n++){var a,s,l=(a=e[n]).zlevel;i!==l&&(i=l,r=0),a.incremental?((s=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,r=1):s=this.getLayer(l+(0<r?.01:0),this._needsManuallyCompositing),s!==o&&(s.__used=!0,s.__startIndex!==n&&(s.__dirty=!0),s.__startIndex=n,s.__drawIndex=s.incremental?-1:n,t(n),o=s),a.__dirty&&(s.__dirty=!0,s.incremental&&s.__drawIndex<0&&(s.__drawIndex=n))}t(n),this.eachBuiltinLayer((function(e,t){!e.__used&&0<e.getElementCount()&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)}))},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var n=this._layerConfig;n[e]?v(n[e],t,!0):n[e]=t;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];o!==e&&o!==e+.01||v(this._layers[o],n[e],!0)}}},delLayer:function(e){var t=this._layers,n=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],n.splice(_(n,e),1))},resize:function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||t!==this._height){for(var o in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);w(this._progressiveLayers,(function(n){n.resize(e,t)})),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(Vi).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(this._singleCanvas&&!this._compositeManually)return this._layers[Vi].dom;var t=new $n("image",this,(e=e||{}).pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,i=t.dom.height,o=t.ctx;this.eachLayer((function(e){e.__builtin__?o.drawImage(e.dom,0,0,n,i):e.renderToCanvas&&(t.ctx.save(),e.renderToCanvas(t.ctx),t.ctx.restore())}))}else for(var r={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++)this._doPaintEl(a[s],t,!0,r);return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],i=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],r=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||Wi(s[n])||Wi(a.style[n]))-(Wi(s[o])||0)-(Wi(s[r])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),o=e.getBoundingRect(),r=e.style,a=r.shadowBlur*t,s=r.shadowOffsetX*t,l=r.shadowOffsetY*t,u=r.hasStroke()?r.lineWidth:0,c=Math.max(u/2,a-s),d=Math.max(u/2,s+a),f=Math.max(u/2,a-l),h=Math.max(u/2,l+a),g=o.width+c+d,p=o.height+f+h;n.width=g*t,n.height=p*t,i.scale(t,t),i.clearRect(0,0,g,p),i.dpr=t;var m={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[c-o.x,f-o.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(i);var v=new Hi({style:{x:0,y:0,image:n}});return null!=m.position&&(v.position=e.position=m.position),null!=m.rotation&&(v.rotation=e.rotation=m.rotation),null!=m.scale&&(v.scale=e.scale=m.scale),v}},ji.prototype={constructor:ji,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),n=0;n<t.length;n++)this.addClip(t[n])},removeClip:function(e){var t=_(this._clips,e);0<=t&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),n=0;n<t.length;n++)this.removeClip(t[n]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,n=this._clips,i=n.length,o=[],r=[],a=0;a<i;a++){var s=n[a],l=s.step(e,t);l&&(o.push(l),r.push(s))}for(a=0;a<i;)n[a]._needsRemove?(n[a]=n[i-1],n.pop(),i--):a++;for(i=o.length,a=0;a<i;a++)r[a].fire(o[a]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,qn((function t(){e._running&&(qn(t),e._paused||e._update())}))},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var n=new ln(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(n),n}},I(ji,we);var Gi,Xi,Yi=o.domSupported,Zi=(Xi={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Gi=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:O(Gi,(function(e){var t=e.replace("mouse","pointer");return Xi.hasOwnProperty(t)?t:e}))}),Ji=["mousemove","mouseup"],Qi=["pointermove","pointerup"];function eo(e){return"mousewheel"===e&&o.browser.firefox?"DOMMouseScroll":e}function to(e){var t=e.pointerType;return"pen"===t||"touch"===t}function no(e){e&&(e.zrByTouch=!0)}function io(e,t){for(var n=t,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return i}function oo(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var ro=oo.prototype;ro.stopPropagation=ro.stopImmediatePropagation=ro.preventDefault=te;var ao={mousedown:function(e){e=Ve(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Ve(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||co(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=Ve(this.dom,e),co(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=Ve(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout"),e.zrIsToLocalDOM=io(this,e.toElement||e.relatedTarget),this.trigger("mouseout",e)},touchstart:function(e){no(e=Ve(this.dom,e)),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),ao.mousemove.call(this,e),ao.mousedown.call(this,e)},touchmove:function(e){no(e=Ve(this.dom,e)),this.handler.processGesture(e,"change"),ao.mousemove.call(this,e)},touchend:function(e){no(e=Ve(this.dom,e)),this.handler.processGesture(e,"end"),ao.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&ao.click.call(this,e)},pointerdown:function(e){ao.mousedown.call(this,e)},pointermove:function(e){to(e)||ao.mousemove.call(this,e)},pointerup:function(e){ao.mouseup.call(this,e)},pointerout:function(e){to(e)||ao.mouseout.call(this,e)}};w(["click","mousewheel","dblclick","contextmenu"],(function(e){ao[e]=function(t){t=Ve(this.dom,t),this.trigger(e,t)}}));var so={pointermove:function(e){to(e)||so.mousemove.call(this,e)},pointerup:function(e){so.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;co(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function lo(e,t,n,i){e.mounted[t]=n,e.listenerOpts[t]=i,We(e.domTarget,eo(t),n,i)}function uo(e){var t,n,i,o=e.mounted;for(var r in o)o.hasOwnProperty(r)&&(t=e.domTarget,n=eo(r),i=o[r],Pe?t.removeEventListener(n,i,e.listenerOpts[r]):t.detachEvent("on"+n,i));e.mounted={}}function co(e,t){if(e._mayPointerCapture=null,Yi&&e._pointerCapturing^t){e._pointerCapturing=t;var n=e._globalHandlerScope;t?function(e,t){function n(n){lo(t,n,(function(i){i=He(i),io(e,i.target)||(i=function(e,t){return Ve(e.dom,new oo(e,t),!0)}(e,i),t.domHandlers[n].call(e,i))}),{capture:!0})}o.pointerEventsSupported?w(Qi,n):o.touchEventsSupported||w(Ji,n)}(e,n):uo(n)}}function fo(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function ho(e,t){we.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new fo(e,ao),Yi&&(this._globalHandlerScope=new fo(document,so)),this._pointerCapturing=!1,this._mayPointerCapture=null,function(e,t){var n=t.domHandlers;o.pointerEventsSupported?w(Zi.pointer,(function(i){lo(t,i,(function(t){n[i].call(e,t)}))})):(o.touchEventsSupported&&w(Zi.touch,(function(i){lo(t,i,(function(o){n[i].call(e,o),function(e){e.touching=!0,null!=e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout((function(){e.touching=!1,e.touchTimer=null}),700)}(t)}))})),w(Zi.mouse,(function(i){lo(t,i,(function(o){o=He(o),t.touching||n[i].call(e,o)}))})))}(this,this._localHandlerScope)}var go=ho.prototype;go.dispose=function(){uo(this._localHandlerScope),Yi&&uo(this._globalHandlerScope)},go.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},I(ho,we);var po=!o.canvasSupported,mo={canvas:Ui},vo={};function yo(e,t){var n=new To(i(),e,t);return vo[n.id]=n}function bo(e,t){mo[e]=t}var To=function(e,t,n){n=n||{},this.dom=t,this.id=e;var i=this,r=new Sn,a=n.renderer;if(po){if(!mo.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&mo[a]||(a="canvas");var s=new mo[a](t,r,n,e);this.storage=r,this.painter=s;var l=o.node||o.worker?null:new ho(s.getViewportRoot(),s.root);this.handler=new Ze(r,s,l,s.root),this.animation=new ji({stage:{update:A(this.flush,this)}}),this.animation.start();var u=r.delFromStorage,c=r.addToStorage;r.delFromStorage=function(e){u.call(r,e),e&&e.removeSelfFromZr(i)},r.addToStorage=function(e){c.call(r,e),e.addSelfToZr(i)}};To.prototype={constructor:To,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var n=this.painter.addHover(e,t);return this.refreshHover(),n}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){this.painter.resize((e=e||{}).width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,n){this.handler.on(e,t,n)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(e){delete vo[e]}(this.id)}};var Co=(Object.freeze||Object)({version:"4.3.1",init:yo,dispose:function(e){if(e)e.dispose();else{for(var t in vo)vo.hasOwnProperty(t)&&vo[t].dispose();vo={}}return this},getInstance:function(e){return vo[e]},registerPainter:bo}),Eo=w,_o=L,xo=M,Io="series\0";function Do(e){return e instanceof Array?e:null==e?[]:[e]}function wo(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,o=n.length;i<o;i++){var r=n[i];!e.emphasis[t].hasOwnProperty(r)&&e[t].hasOwnProperty(r)&&(e.emphasis[t][r]=e[t][r])}}}var Oo=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Ro(e){return!_o(e)||xo(e)||e instanceof Date?e:e.value}function ko(e,t){t=(t||[]).slice();var n=O(e||[],(function(e,t){return{exist:e}}));return Eo(t,(function(e,i){if(_o(e)){for(var o=0;o<n.length;o++)if(!n[o].option&&null!=e.id&&n[o].exist.id===e.id+"")return n[o].option=e,void(t[i]=null);for(o=0;o<n.length;o++){var r=n[o].exist;if(!(n[o].option||null!=r.id&&null!=e.id||null==e.name||No(e)||No(r)||r.name!==e.name+""))return n[o].option=e,void(t[i]=null)}}})),Eo(t,(function(e,t){if(_o(e)){for(var i=0;i<n.length;i++)if(!n[i].option&&!No(n[i].exist)&&null==e.id){n[i].option=e;break}i>=n.length&&n.push({option:e})}})),n}function So(e){var t=Q();Eo(e,(function(e,n){var i=e.exist;i&&t.set(i.id,e)})),Eo(e,(function(e,n){var i=e.option;j(!i||null==i.id||!t.get(i.id)||t.get(i.id)===e,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&t.set(i.id,e),e.keyInfo||(e.keyInfo={})})),Eo(e,(function(e,n){var i=e.exist,o=e.option,r=e.keyInfo;if(_o(o)){if(r.name=null!=o.name?o.name+"":i?i.name:Io+n,i)r.id=i.id;else if(null!=o.id)r.id=o.id+"";else for(var a=0;r.id="\0"+r.name+"\0"+a++,t.get(r.id););t.set(r.id,e)}}))}function Ao(e){var t=e.name;return!(!t||!t.indexOf(Io))}function No(e){return _o(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function Mo(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?M(t.dataIndex)?O(t.dataIndex,(function(t){return e.indexOfRawIndex(t)})):e.indexOfRawIndex(t.dataIndex):null!=t.name?M(t.name)?O(t.name,(function(t){return e.indexOfName(t)})):e.indexOfName(t.name):void 0}function Ko(){var e="__\0ec_inner_"+Po+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var Po=0;function Lo(e,t,n){if(P(t)){var i={};i[t+"Index"]=0,t=i}var o=n&&n.defaultMainType;!o||Bo(t,o+"Index")||Bo(t,o+"Id")||Bo(t,o+"Name")||(t[o+"Index"]=0);var r={};return Eo(t,(function(i,o){if(i=t[o],"dataIndex"!==o&&"dataIndexInside"!==o){var a=o.match(/^(\w+)(Index|Id|Name)$/)||[],s=a[1],l=(a[2]||"").toLowerCase();if(!(!s||!l||null==i||"index"===l&&"none"===i||n&&n.includeMainTypes&&_(n.includeMainTypes,s)<0)){var u={mainType:s};"index"===l&&"all"===i||(u[l]=i);var c=e.queryComponents(u);r[s+"Models"]=c,r[s+"Model"]=c[0]}}else r[o]=i})),r}function Bo(e,t){return e&&e.hasOwnProperty(t)}function Fo(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function zo(e){return"auto"===e?o.domSupported?"html":"richText":e||"html"}function Ho(e,t){var n=Q(),i=[];return w(e,(function(e){var o=t(e);(n.get(o)||(i.push(o),n.set(o,[]))).push(e)})),{keys:i,buckets:n}}var Vo="___EC__COMPONENT__CONTAINER___";function Wo(e){var t={main:"",sub:""};return e&&(e=e.split("."),t.main=e[0]||"",t.sub=e[1]||""),t}function $o(e){(e.$constructor=e).extend=function(e){function t(){e.$constructor?e.$constructor.apply(this,arguments):n.apply(this,arguments)}var n=this;return b(t.prototype,e),t.extend=this.extend,t.superCall=jo,t.superApply=Go,x(t,this),t.superClass=n,t}}var qo=0;function Uo(e){var t=["__\0is_clz",qo++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,e.isInstance=function(e){return!(!e||!e[t])}}function jo(e,t){var n=q(arguments,2);return this.superClass.prototype[t].apply(e,n)}function Go(e,t,n){return this.superClass.prototype[t].apply(e,n)}function Xo(e,t){t=t||{};var n={};if(e.registerClass=function(e,t){return t&&(function(e){j(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}(t),(t=Wo(t)).sub?t.sub!==Vo&&((function(e){var t=n[e.main];return t&&t[Vo]||((t=n[e.main]={})[Vo]=!0),t}(t))[t.sub]=e):n[t.main]=e),e},e.getClass=function(e,t,i){var o=n[e];if(o&&o[Vo]&&(o=t?o[t]:null),i&&!o)throw new Error(t?"Component "+e+"."+(t||"")+" not exists. Load it first.":e+".type should be specified.");return o},e.getClassesByMainType=function(e){e=Wo(e);var t=[],i=n[e.main];return i&&i[Vo]?w(i,(function(e,n){n!==Vo&&t.push(e)})):t.push(i),t},e.hasClass=function(e){return e=Wo(e),!!n[e.main]},e.getAllClassMainTypes=function(){var e=[];return w(n,(function(t,n){e.push(n)})),e},e.hasSubTypes=function(e){e=Wo(e);var t=n[e.main];return t&&t[Vo]},e.parseClassType=Wo,t.registerWhenExtend){var i=e.extend;i&&(e.extend=function(t){var n=i.call(this,t);return e.registerClass(n,t.type)})}return e}function Yo(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(t,n,i){for(var o={},r=0;r<e.length;r++){var a=e[r][1];if(!(n&&0<=_(n,a)||i&&_(i,a)<0)){var s=t.getShallow(a);null!=s&&(o[e[r][0]]=s)}}return o}}var Zo=Yo([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Jo={getLineStyle:function(e){var t=Zo(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),n=Math.max(e,2),i=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[i,i]:[n,n])}},Qo=Yo([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),er={getAreaStyle:function(e,t){return Qo(this,e,t)}},tr=Math.pow,nr=Math.sqrt,ir=nr(3),or=oe(),rr=oe(),ar=oe();function sr(e){return-1e-8<e&&e<1e-8}function lr(e){return 1e-8<e||e<-1e-8}function ur(e,t,n,i,o){var r=1-o;return r*r*(r*e+3*o*t)+o*o*(o*i+3*r*n)}function cr(e,t,n,i,o){var r=1-o;return 3*(((t-e)*r+2*(n-t)*o)*r+(i-n)*o*o)}function dr(e,t,n,i,o){var r=6*n-12*t+6*e,a=9*t+3*i-3*e-9*n,s=3*t-3*e,l=0;if(sr(a))lr(r)&&0<=(c=-s/r)&&c<=1&&(o[l++]=c);else{var u=r*r-4*a*s;if(sr(u))o[0]=-r/(2*a);else if(0<u){var c,d=nr(u),f=(-r-d)/(2*a);0<=(c=(-r+d)/(2*a))&&c<=1&&(o[l++]=c),0<=f&&f<=1&&(o[l++]=f)}}return l}function fr(e,t,n,i,o,r){var a=(t-e)*o+e,s=(n-t)*o+t,l=(i-n)*o+n,u=(s-a)*o+a,c=(l-s)*o+s,d=(c-u)*o+u;r[0]=e,r[1]=a,r[2]=u,r[3]=d,r[4]=d,r[5]=c,r[6]=l,r[7]=i}function hr(e,t,n,i){var o=1-i;return o*(o*e+2*i*t)+i*i*n}function gr(e,t,n,i){return 2*((1-i)*(t-e)+i*(n-t))}function pr(e,t,n){var i=e+n-2*t;return 0==i?.5:(e-t)/i}function mr(e,t,n,i,o){var r=(t-e)*i+e,a=(n-t)*i+t,s=(a-r)*i+r;o[0]=e,o[1]=r,o[2]=s,o[3]=s,o[4]=a,o[5]=n}var vr=Math.min,yr=Math.max,br=Math.sin,Tr=Math.cos,Cr=2*Math.PI,Er=oe(),_r=oe(),xr=oe();function Ir(e,t,n){if(0!==e.length){var i,o=e[0],r=o[0],a=o[0],s=o[1],l=o[1];for(i=1;i<e.length;i++)r=vr(r,(o=e[i])[0]),a=yr(a,o[0]),s=vr(s,o[1]),l=yr(l,o[1]);t[0]=r,t[1]=s,n[0]=a,n[1]=l}}function Dr(e,t,n,i,o,r){o[0]=vr(e,n),o[1]=vr(t,i),r[0]=yr(e,n),r[1]=yr(t,i)}var wr=[],Or=[];function Rr(e,t,n,i,o,r,a,s,l,u){var c,d=dr,f=ur,h=d(e,n,o,a,wr);for(l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0,c=0;c<h;c++){var g=f(e,n,o,a,wr[c]);l[0]=vr(g,l[0]),u[0]=yr(g,u[0])}for(h=d(t,i,r,s,Or),c=0;c<h;c++){var p=f(t,i,r,s,Or[c]);l[1]=vr(p,l[1]),u[1]=yr(p,u[1])}l[0]=vr(e,l[0]),u[0]=yr(e,u[0]),l[0]=vr(a,l[0]),u[0]=yr(a,u[0]),l[1]=vr(t,l[1]),u[1]=yr(t,u[1]),l[1]=vr(s,l[1]),u[1]=yr(s,u[1])}function kr(e,t,n,i,o,r,a,s,l){var u=Ce,c=Ee,d=Math.abs(o-r);if(d%Cr<1e-4&&1e-4<d)return s[0]=e-n,s[1]=t-i,l[0]=e+n,void(l[1]=t+i);if(Er[0]=Tr(o)*n+e,Er[1]=br(o)*i+t,_r[0]=Tr(r)*n+e,_r[1]=br(r)*i+t,u(s,Er,_r),c(l,Er,_r),(o%=Cr)<0&&(o+=Cr),(r%=Cr)<0&&(r+=Cr),r<o&&!a?r+=Cr:o<r&&a&&(o+=Cr),a){var f=r;r=o,o=f}for(var h=0;h<r;h+=Math.PI/2)o<h&&(xr[0]=Tr(h)*n+e,xr[1]=br(h)*i+t,u(s,xr,s),c(l,xr,l))}var Sr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ar=[],Nr=[],Mr=[],Kr=[],Pr=Math.min,Lr=Math.max,Br=Math.cos,Fr=Math.sin,zr=Math.sqrt,Hr=Math.abs,Vr="undefined"!=typeof Float32Array,Wr=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function $r(e,t,n,i,o,r,a){if(0===o)return!1;var s,l=o;if(t+l<a&&i+l<a||a<t-l&&a<i-l||e+l<r&&n+l<r||r<e-l&&r<n-l)return!1;if(e===n)return Math.abs(r-e)<=l/2;var u=(s=(t-i)/(e-n))*r-a+(e*i-n*t)/(e-n);return u*u/(s*s+1)<=l/2*l/2}function qr(e,t,n,i,o,r,a,s,l,u,c){if(0===l)return!1;var d=l;return!(t+d<c&&i+d<c&&r+d<c&&s+d<c||c<t-d&&c<i-d&&c<r-d&&c<s-d||e+d<u&&n+d<u&&o+d<u&&a+d<u||u<e-d&&u<n-d&&u<o-d&&u<a-d)&&function(e,t,n,i,o,r,a,s,l,u,c){var d,f,h,g,p,m=.005,v=1/0;or[0]=l,or[1]=u;for(var y=0;y<1;y+=.05)rr[0]=ur(e,n,o,a,y),rr[1]=ur(t,i,r,s,y),(g=ye(or,rr))<v&&(d=y,v=g);v=1/0;for(var b=0;b<32&&!(m<1e-4);b++)h=d+m,rr[0]=ur(e,n,o,a,f=d-m),rr[1]=ur(t,i,r,s,f),g=ye(rr,or),0<=f&&g<v?(d=f,v=g):(ar[0]=ur(e,n,o,a,h),ar[1]=ur(t,i,r,s,h),p=ye(ar,or),h<=1&&p<v?(d=h,v=p):m*=.5);return nr(v)}(e,t,n,i,o,r,a,s,u,c)<=d/2}function Ur(e,t,n,i,o,r,a,s,l){if(0===a)return!1;var u=a;return!(t+u<l&&i+u<l&&r+u<l||l<t-u&&l<i-u&&l<r-u||e+u<s&&n+u<s&&o+u<s||s<e-u&&s<n-u&&s<o-u)&&function(e,t,n,i,o,r,a,s,l){var u,c=.005,d=1/0;or[0]=a,or[1]=s;for(var f=0;f<1;f+=.05)rr[0]=hr(e,n,o,f),rr[1]=hr(t,i,r,f),(m=ye(or,rr))<d&&(u=f,d=m);d=1/0;for(var h=0;h<32&&!(c<1e-4);h++){var g=u-c,p=u+c;rr[0]=hr(e,n,o,g),rr[1]=hr(t,i,r,g);var m=ye(rr,or);if(0<=g&&m<d)u=g,d=m;else{ar[0]=hr(e,n,o,p),ar[1]=hr(t,i,r,p);var v=ye(ar,or);p<=1&&v<d?(u=p,d=v):c*=.5}}return nr(d)}(e,t,n,i,o,r,s,l)<=u/2}Wr.prototype={constructor:Wr,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,n){this._ux=Hr((n=n||0)/cn/e)||0,this._uy=Hr(n/cn/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return(this._ctx=e)&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(Sr.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var n=Hr(e-this._xi)>this._ux||Hr(t-this._yi)>this._uy||this._len<5;return this.addData(Sr.L,e,t),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),n&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,n,i,o,r){return this.addData(Sr.C,e,t,n,i,o,r),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,n,i,o,r):this._ctx.bezierCurveTo(e,t,n,i,o,r)),this._xi=o,this._yi=r,this},quadraticCurveTo:function(e,t,n,i){return this.addData(Sr.Q,e,t,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,n,i):this._ctx.quadraticCurveTo(e,t,n,i)),this._xi=n,this._yi=i,this},arc:function(e,t,n,i,o,r){return this.addData(Sr.A,e,t,n,n,i,o-i,0,r?0:1),this._ctx&&this._ctx.arc(e,t,n,i,o,r),this._xi=Br(o)*n+e,this._yi=Fr(o)*n+t,this},arcTo:function(e,t,n,i,o){return this._ctx&&this._ctx.arcTo(e,t,n,i,o),this},rect:function(e,t,n,i){return this._ctx&&this._ctx.rect(e,t,n,i),this.addData(Sr.R,e,t,n,i),this},closePath:function(){this.addData(Sr.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,n),e.closePath()),this._xi=t,this._yi=n,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e;for(var t=this._dashIdx=0,n=0;n<e.length;n++)t+=e[n];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!Vr||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,i=this._len,o=0;o<t;o++)n+=e[o].len();for(Vr&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),o=0;o<t;o++)for(var r=e[o].data,a=0;a<r.length;a++)this.data[i++]=r[a];this._len=i},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var n=0;n<arguments.length;n++)t[this._len++]=arguments[n];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var n,i,o=this._dashSum,r=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,c=e-l,d=t-u,f=zr(c*c+d*d),h=l,g=u,p=a.length;for(r<0&&(r=o+r),h-=(r%=o)*(c/=f),g-=r*(d/=f);0<c&&h<=e||c<0&&e<=h||0===c&&(0<d&&g<=t||d<0&&t<=g);)h+=c*(n=a[i=this._dashIdx]),g+=d*n,this._dashIdx=(i+1)%p,0<c&&h<l||c<0&&l<h||0<d&&g<u||d<0&&u<g||s[i%2?"moveTo":"lineTo"](0<=c?Pr(h,e):Lr(h,e),0<=d?Pr(g,t):Lr(g,t));this._dashOffset=-zr((c=h-e)*c+(d=g-t)*d)},_dashedBezierTo:function(e,t,n,i,o,r){var a,s,l,u,c,d=this._dashSum,f=this._dashOffset,h=this._lineDash,g=this._ctx,p=this._xi,m=this._yi,v=ur,y=0,b=this._dashIdx,T=h.length,C=0;for(f<0&&(f=d+f),f%=d,a=0;a<1;a+=.1)s=v(p,e,n,o,a+.1)-v(p,e,n,o,a),l=v(m,t,i,r,a+.1)-v(m,t,i,r,a),y+=zr(s*s+l*l);for(;b<T&&!(f<(C+=h[b]));b++);for(a=(C-f)/y;a<=1;)u=v(p,e,n,o,a),c=v(m,t,i,r,a),b%2?g.moveTo(u,c):g.lineTo(u,c),a+=h[b]/y,b=(b+1)%T;b%2!=0&&g.lineTo(o,r),this._dashOffset=-zr((s=o-u)*s+(l=r-c)*l)},_dashedQuadraticTo:function(e,t,n,i){var o=n,r=i;n=(n+2*e)/3,i=(i+2*t)/3,this._dashedBezierTo(e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,n,i,o,r)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,Vr&&(this.data=new Float32Array(e)))},getBoundingRect:function(){Ar[0]=Ar[1]=Mr[0]=Mr[1]=Number.MAX_VALUE,Nr[0]=Nr[1]=Kr[0]=Kr[1]=-Number.MAX_VALUE;for(var e,t,n,i,o,r,a,s,l,u,c,d,f,h,g=this.data,p=0,m=0,v=0,y=0,b=0;b<g.length;){var T=g[b++];switch(1===b&&(v=p=g[b],y=m=g[b+1]),T){case Sr.M:p=v=g[b++],m=y=g[b++],Mr[0]=v,Mr[1]=y,Kr[0]=v,Kr[1]=y;break;case Sr.L:Dr(p,m,g[b],g[b+1],Mr,Kr),p=g[b++],m=g[b++];break;case Sr.C:Rr(p,m,g[b++],g[b++],g[b++],g[b++],g[b],g[b+1],Mr,Kr),p=g[b++],m=g[b++];break;case Sr.Q:t=m,n=g[b++],i=g[b++],r=g[b+1],a=Mr,s=Kr,u=l=void 0,u=hr,c=yr(vr((l=pr)(e=p,n,o=g[b]),1),0),d=yr(vr(l(t,i,r),1),0),f=u(e,n,o,c),h=u(t,i,r,d),a[0]=vr(e,o,f),a[1]=vr(t,r,h),s[0]=yr(e,o,f),s[1]=yr(t,r,h),p=g[b++],m=g[b++];break;case Sr.A:var C=g[b++],E=g[b++],_=g[b++],x=g[b++],I=g[b++],D=g[b++]+I;b+=1;var w=1-g[b++];1===b&&(v=Br(I)*_+C,y=Fr(I)*x+E),kr(C,E,_,x,I,D,w,Mr,Kr),p=Br(D)*_+C,m=Fr(D)*x+E;break;case Sr.R:Dr(v=p=g[b++],y=m=g[b++],v+g[b++],y+g[b++],Mr,Kr);break;case Sr.Z:p=v,m=y}Ce(Ar,Ar,Mr),Ee(Nr,Nr,Kr)}return 0===b&&(Ar[0]=Ar[1]=Nr[0]=Nr[1]=0),new En(Ar[0],Ar[1],Nr[0]-Ar[0],Nr[1]-Ar[1])},rebuildPath:function(e){for(var t,n,i,o,r,a,s=this.data,l=this._ux,u=this._uy,c=this._len,d=0;d<c;){var f=s[d++];switch(1===d&&(t=i=s[d],n=o=s[d+1]),f){case Sr.M:t=i=s[d++],n=o=s[d++],e.moveTo(i,o);break;case Sr.L:r=s[d++],a=s[d++],(Hr(r-i)>l||Hr(a-o)>u||d===c-1)&&(e.lineTo(r,a),i=r,o=a);break;case Sr.C:e.bezierCurveTo(s[d++],s[d++],s[d++],s[d++],s[d++],s[d++]),i=s[d-2],o=s[d-1];break;case Sr.Q:e.quadraticCurveTo(s[d++],s[d++],s[d++],s[d++]),i=s[d-2],o=s[d-1];break;case Sr.A:var h=s[d++],g=s[d++],p=s[d++],m=s[d++],v=s[d++],y=s[d++],b=s[d++],T=s[d++],C=m<p?p:m,E=m<p?1:p/m,_=m<p?m/p:1,x=v+y;.001<Math.abs(p-m)?(e.translate(h,g),e.rotate(b),e.scale(E,_),e.arc(0,0,C,v,x,1-T),e.scale(1/E,1/_),e.rotate(-b),e.translate(-h,-g)):e.arc(h,g,C,v,x,1-T),1===d&&(t=Br(v)*p+h,n=Fr(v)*m+g),i=Br(x)*p+h,o=Fr(x)*m+g;break;case Sr.R:t=i=s[d],n=o=s[d+1],e.rect(s[d++],s[d++],s[d++],s[d++]);break;case Sr.Z:e.closePath(),i=t,o=n}}}},Wr.CMD=Sr;var jr=2*Math.PI;function Gr(e){return(e%=jr)<0&&(e+=jr),e}var Xr=2*Math.PI;function Yr(e,t,n,i,o,r,a,s,l){if(0===a)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(n<c-u||c+u<n)return!1;if(Math.abs(i-o)%Xr<1e-4)return!0;if(r){var d=i;i=Gr(o),o=Gr(d)}else i=Gr(i),o=Gr(o);o<i&&(o+=Xr);var f=Math.atan2(l,s);return f<0&&(f+=Xr),i<=f&&f<=o||i<=f+Xr&&f+Xr<=o}function Zr(e,t,n,i,o,r){if(t<r&&i<r||r<t&&r<i)return 0;if(i===t)return 0;var a=i<t?1:-1,s=(r-t)/(i-t);1!=s&&0!=s||(a=i<t?.5:-.5);var l=s*(n-e)+e;return l===o?1/0:o<l?a:0}var Jr=Wr.CMD,Qr=2*Math.PI,ea=[-1,-1,-1],ta=[-1,-1];function na(e,t,n,i,o,r,a,s,l,u){if(t<u&&i<u&&r<u&&s<u||u<t&&u<i&&u<r&&u<s)return 0;var c,d=function(e,t,n,i,o,r){var a=i+3*(t-n)-e,s=3*(n-2*t+e),l=3*(t-e),u=e-o,c=s*s-3*a*l,d=s*l-9*a*u,f=l*l-3*s*u,h=0;if(sr(c)&&sr(d))sr(s)?r[0]=0:0<=(x=-l/s)&&x<=1&&(r[h++]=x);else{var g=d*d-4*c*f;if(sr(g)){var p=d/c,m=-p/2;0<=(x=-s/a+p)&&x<=1&&(r[h++]=x),0<=m&&m<=1&&(r[h++]=m)}else if(0<g){var v=nr(g),y=c*s+1.5*a*(-d+v),b=c*s+1.5*a*(-d-v);0<=(x=(-s-((y=y<0?-tr(-y,1/3):tr(y,1/3))+(b=b<0?-tr(-b,1/3):tr(b,1/3))))/(3*a))&&x<=1&&(r[h++]=x)}else{var T=(2*c*s-3*a*d)/(2*nr(c*c*c)),C=Math.acos(T)/3,E=nr(c),_=Math.cos(C),x=(-s-2*E*_)/(3*a),I=(m=(-s+E*(_+ir*Math.sin(C)))/(3*a),(-s+E*(_-ir*Math.sin(C)))/(3*a));0<=x&&x<=1&&(r[h++]=x),0<=m&&m<=1&&(r[h++]=m),0<=I&&I<=1&&(r[h++]=I)}}return h}(t,i,r,s,u,ea);if(0===d)return 0;for(var f,h,g=0,p=-1,m=0;m<d;m++){var v=ea[m],y=0===v||1===v?.5:1;ur(e,n,o,a,v)<l||(p<0&&(p=dr(t,i,r,s,ta),ta[1]<ta[0]&&1<p&&(c=ta[0],ta[0]=ta[1],ta[1]=c),f=ur(t,i,r,s,ta[0]),1<p&&(h=ur(t,i,r,s,ta[1]))),g+=2===p?v<ta[0]?f<t?y:-y:v<ta[1]?h<f?y:-y:s<h?y:-y:v<ta[0]?f<t?y:-y:s<f?y:-y)}return g}function ia(e,t,n,i,o,r,a,s){if(t<s&&i<s&&r<s||s<t&&s<i&&s<r)return 0;var l=function(e,t,n,i,o){var r=e-2*t+n,a=2*(t-e),s=e-i,l=0;if(sr(r))lr(a)&&0<=(c=-s/a)&&c<=1&&(o[l++]=c);else{var u=a*a-4*r*s;if(sr(u))0<=(c=-a/(2*r))&&c<=1&&(o[l++]=c);else if(0<u){var c,d=nr(u),f=(-a-d)/(2*r);0<=(c=(-a+d)/(2*r))&&c<=1&&(o[l++]=c),0<=f&&f<=1&&(o[l++]=f)}}return l}(t,i,r,s,ea);if(0===l)return 0;var u=pr(t,i,r);if(0<=u&&u<=1){for(var c=0,d=hr(t,i,r,u),f=0;f<l;f++){var h=0===ea[f]||1===ea[f]?.5:1;hr(e,n,o,ea[f])<a||(c+=ea[f]<u?d<t?h:-h:r<d?h:-h)}return c}return h=0===ea[0]||1===ea[0]?.5:1,hr(e,n,o,ea[0])<a?0:r<t?h:-h}function oa(e,t,n,i,o,r,a,s){if(n<(s-=t)||s<-n)return 0;var l=Math.sqrt(n*n-s*s);ea[0]=-l,ea[1]=l;var u=Math.abs(i-o);if(u<1e-4)return 0;if(u%Qr<1e-4){o=Qr;var c=r?1:-1;return a>=ea[i=0]+e&&a<=ea[1]+e?c:0}r?(l=i,i=Gr(o),o=Gr(l)):(i=Gr(i),o=Gr(o)),o<i&&(o+=Qr);for(var d=0,f=0;f<2;f++){var h=ea[f];if(a<h+e){var g=Math.atan2(s,h);c=r?1:-1,g<0&&(g=Qr+g),(i<=g&&g<=o||i<=g+Qr&&g+Qr<=o)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),d+=c)}}return d}function ra(e,t,n,i,o){for(var r=0,a=0,s=0,l=0,u=0,c=0;c<e.length;){var d=e[c++];switch(d===Jr.M&&1<c&&(n||(r+=Zr(a,s,l,u,i,o))),1===c&&(l=a=e[c],u=s=e[c+1]),d){case Jr.M:a=l=e[c++],s=u=e[c++];break;case Jr.L:if(n){if($r(a,s,e[c],e[c+1],t,i,o))return!0}else r+=Zr(a,s,e[c],e[c+1],i,o)||0;a=e[c++],s=e[c++];break;case Jr.C:if(n){if(qr(a,s,e[c++],e[c++],e[c++],e[c++],e[c],e[c+1],t,i,o))return!0}else r+=na(a,s,e[c++],e[c++],e[c++],e[c++],e[c],e[c+1],i,o)||0;a=e[c++],s=e[c++];break;case Jr.Q:if(n){if(Ur(a,s,e[c++],e[c++],e[c],e[c+1],t,i,o))return!0}else r+=ia(a,s,e[c++],e[c++],e[c],e[c+1],i,o)||0;a=e[c++],s=e[c++];break;case Jr.A:var f=e[c++],h=e[c++],g=e[c++],p=e[c++],m=e[c++],v=e[c++];c+=1;var y=1-e[c++],b=Math.cos(m)*g+f,T=Math.sin(m)*p+h;1<c?r+=Zr(a,s,b,T,i,o):(l=b,u=T);var C=(i-f)*p/g+f;if(n){if(Yr(f,h,p,m,m+v,y,t,C,o))return!0}else r+=oa(f,h,p,m,m+v,y,C,o);a=Math.cos(m+v)*g+f,s=Math.sin(m+v)*p+h;break;case Jr.R:if(l=a=e[c++],u=s=e[c++],b=l+e[c++],T=u+e[c++],n){if($r(l,u,b,u,t,i,o)||$r(b,u,b,T,t,i,o)||$r(b,T,l,T,t,i,o)||$r(l,T,l,u,t,i,o))return!0}else r+=Zr(b,u,b,T,i,o),r+=Zr(l,T,l,u,i,o);break;case Jr.Z:if(n){if($r(a,s,l,u,t,i,o))return!0}else r+=Zr(a,s,l,u,i,o);a=l,s=u}}return n||function(e,t){return Math.abs(e-t)<1e-4}(s,u)||(r+=Zr(a,s,l,u,i,o)||0),0!==r}var aa=Hn.prototype.getCanvasPattern,sa=Math.abs,la=new Wr(!0);function ua(e){zi.call(this,e),this.path=null}function ca(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}ua.prototype={constructor:ua,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var n,i=this.style,o=this.path||la,r=i.hasStroke(),a=i.hasFill(),s=i.fill,l=i.stroke,u=a&&!!s.colorStops,c=r&&!!l.colorStops,d=a&&!!s.image,f=r&&!!l.image;i.bind(e,this,t),this.setTransform(e),this.__dirty&&(u&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(e,s,n)),c&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(e,l,n))),u?e.fillStyle=this._fillGradient:d&&(e.fillStyle=aa.call(s,e)),c?e.strokeStyle=this._strokeGradient:f&&(e.strokeStyle=aa.call(l,e));var h=i.lineDash,g=i.lineDashOffset,p=!!e.setLineDash,m=this.getGlobalScale();if(o.setScale(m[0],m[1],this.segmentIgnoreThreshold),this.__dirtyPath||h&&!p&&r?(o.beginPath(e),h&&!p&&(o.setLineDash(h),o.setLineDashOffset(g)),this.buildPath(o,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),a)if(null!=i.fillOpacity){var v=e.globalAlpha;e.globalAlpha=i.fillOpacity*i.opacity,o.fill(e),e.globalAlpha=v}else o.fill(e);h&&p&&(e.setLineDash(h),e.lineDashOffset=g),r&&(null!=i.strokeOpacity?(v=e.globalAlpha,e.globalAlpha=i.strokeOpacity*i.opacity,o.stroke(e),e.globalAlpha=v):o.stroke(e)),h&&p&&e.setLineDash([]),null!=i.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,n){},createPathProxy:function(){this.path=new Wr},getBoundingRect:function(){var e=this._rect,t=this.style,n=!e;if(n){var i=this.path;i=i||(this.path=new Wr),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),e=i.getBoundingRect()}if(this._rect=e,t.hasStroke()){var o=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||n){o.copy(e);var r=t.lineWidth,a=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(r=Math.max(r,this.strokeContainThreshold||4)),1e-10<a&&(o.width+=r/a,o.height+=r/a,o.x-=r/a/2,o.y-=r/a/2)}return o}return e},contain:function(e,t){var n=this.transformCoordToLocal(e,t),i=this.getBoundingRect(),o=this.style;if(i.contain(e=n[0],t=n[1])){var r=this.path.data;if(o.hasStroke()){var a=o.lineWidth,s=o.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(o.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),function(e,t,n,i){return ra(e,t,!0,n,i)}(r,a/s,e,t)))return!0}if(o.hasFill())return function(e,t,n){return ra(e,0,!1,t,n)}(r,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):zi.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var n=this.shape;if(n){if(L(e))for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);else n[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&1e-10<sa(e[0]-1)&&1e-10<sa(e[3]-1)?Math.sqrt(sa(e[0]*e[3]-e[2]*e[1])):1}},ua.extend=function(e){function t(t){ua.call(this,t),e.style&&this.style.extendFrom(e.style,!1);var n=e.shape;if(n){this.shape=this.shape||{};var i=this.shape;for(var o in n)!i.hasOwnProperty(o)&&n.hasOwnProperty(o)&&(i[o]=n[o])}e.init&&e.init.call(this,t)}for(var n in x(t,ua),e)"style"!==n&&"shape"!==n&&(t.prototype[n]=e[n]);return t},x(ua,zi);var da=Wr.CMD,fa=[[],[],[]],ha=Math.sqrt,ga=Math.atan2,pa=Math.sqrt,ma=Math.sin,va=Math.cos,ya=Math.PI,ba=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(ca(e)*ca(t))},Ta=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(ba(e,t))};function Ca(e,t,n,i,o,r,a,s,l,u,c){var d=l*(ya/180),f=va(d)*(e-n)/2+ma(d)*(t-i)/2,h=-1*ma(d)*(e-n)/2+va(d)*(t-i)/2,g=f*f/(a*a)+h*h/(s*s);1<g&&(a*=pa(g),s*=pa(g));var p=(o===r?-1:1)*pa((a*a*(s*s)-a*a*(h*h)-s*s*(f*f))/(a*a*(h*h)+s*s*(f*f)))||0,m=p*a*h/s,v=p*-s*f/a,y=(e+n)/2+va(d)*m-ma(d)*v,b=(t+i)/2+ma(d)*m+va(d)*v,T=Ta([1,0],[(f-m)/a,(h-v)/s]),C=[(f-m)/a,(h-v)/s],E=[(-1*f-m)/a,(-1*h-v)/s],_=Ta(C,E);ba(C,E)<=-1&&(_=ya),1<=ba(C,E)&&(_=0),0===r&&0<_&&(_-=2*ya),1===r&&_<0&&(_+=2*ya),c.addData(u,y,b,a,s,T,_,d,r)}var Ea=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,_a=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function xa(e,t){var n=function(e){if(!e)return new Wr;for(var t,n=0,i=0,o=n,r=i,a=new Wr,s=Wr.CMD,l=e.match(Ea),u=0;u<l.length;u++){for(var c,d=l[u],f=d.charAt(0),h=d.match(_a)||[],g=h.length,p=0;p<g;p++)h[p]=parseFloat(h[p]);for(var m=0;m<g;){var v,y,b,T,C,E,_,x=n,I=i;switch(f){case"l":n+=h[m++],i+=h[m++],a.addData(c=s.L,n,i);break;case"L":n=h[m++],i=h[m++],a.addData(c=s.L,n,i);break;case"m":n+=h[m++],i+=h[m++],a.addData(c=s.M,n,i),o=n,r=i,f="l";break;case"M":n=h[m++],i=h[m++],a.addData(c=s.M,n,i),o=n,r=i,f="L";break;case"h":n+=h[m++],a.addData(c=s.L,n,i);break;case"H":n=h[m++],a.addData(c=s.L,n,i);break;case"v":i+=h[m++],a.addData(c=s.L,n,i);break;case"V":i=h[m++],a.addData(c=s.L,n,i);break;case"C":a.addData(c=s.C,h[m++],h[m++],h[m++],h[m++],h[m++],h[m++]),n=h[m-2],i=h[m-1];break;case"c":a.addData(c=s.C,h[m++]+n,h[m++]+i,h[m++]+n,h[m++]+i,h[m++]+n,h[m++]+i),n+=h[m-2],i+=h[m-1];break;case"S":v=n,y=i;var D=a.len(),w=a.data;t===s.C&&(v+=n-w[D-4],y+=i-w[D-3]),x=h[m++],I=h[m++],n=h[m++],i=h[m++],a.addData(c=s.C,v,y,x,I,n,i);break;case"s":v=n,y=i,D=a.len(),w=a.data,t===s.C&&(v+=n-w[D-4],y+=i-w[D-3]),x=n+h[m++],I=i+h[m++],n+=h[m++],i+=h[m++],a.addData(c=s.C,v,y,x,I,n,i);break;case"Q":x=h[m++],I=h[m++],n=h[m++],i=h[m++],a.addData(c=s.Q,x,I,n,i);break;case"q":x=h[m++]+n,I=h[m++]+i,n+=h[m++],i+=h[m++],a.addData(c=s.Q,x,I,n,i);break;case"T":v=n,y=i,D=a.len(),w=a.data,t===s.Q&&(v+=n-w[D-4],y+=i-w[D-3]),n=h[m++],i=h[m++],a.addData(c=s.Q,v,y,n,i);break;case"t":v=n,y=i,D=a.len(),w=a.data,t===s.Q&&(v+=n-w[D-4],y+=i-w[D-3]),n+=h[m++],i+=h[m++],a.addData(c=s.Q,v,y,n,i);break;case"A":b=h[m++],T=h[m++],C=h[m++],E=h[m++],_=h[m++],Ca(x=n,I=i,n=h[m++],i=h[m++],E,_,b,T,C,c=s.A,a);break;case"a":b=h[m++],T=h[m++],C=h[m++],E=h[m++],_=h[m++],Ca(x=n,I=i,n+=h[m++],i+=h[m++],E,_,b,T,C,c=s.A,a)}}"z"!==f&&"Z"!==f||(a.addData(c=s.Z),n=o,i=r),t=c}return a.toStatic(),a}(e);return(t=t||{}).buildPath=function(e){if(e.setData)e.setData(n.data),(t=e.getContext())&&e.rebuildPath(t);else{var t=e;n.rebuildPath(t)}},t.applyTransform=function(e){(function(e,t){var n,i,o,r,a,s=e.data,l=da.M,u=da.C,c=da.L,d=da.R,f=da.A,h=da.Q;for(r=o=0;o<s.length;){switch(n=s[o++],r=o,i=0,n){case l:case c:i=1;break;case u:i=3;break;case h:i=2;break;case f:var g=t[4],p=t[5],m=ha(t[0]*t[0]+t[1]*t[1]),v=ha(t[2]*t[2]+t[3]*t[3]),y=ga(-t[1]/v,t[0]/m);s[o]*=m,s[o++]+=g,s[o]*=v,s[o++]+=p,s[o++]*=m,s[o++]*=v,s[o++]+=y,s[o++]+=y,r=o+=2;break;case d:b[0]=s[o++],b[1]=s[o++],Te(b,b,t),s[r++]=b[0],s[r++]=b[1],b[0]+=s[o++],b[1]+=s[o++],Te(b,b,t),s[r++]=b[0],s[r++]=b[1]}for(a=0;a<i;a++){var b;(b=fa[a])[0]=s[o++],b[1]=s[o++],Te(b,b,t),s[r++]=b[0],s[r++]=b[1]}}})(n,e),this.dirty(!0)},t}function Ia(e,t){return new ua(xa(e,t))}var Da=function(e){zi.call(this,e)};function wa(e){return o.browser.ie&&11<=o.browser.version?function(){var t,n=this.__clipPaths,i=this.style;if(n)for(var o=0;o<n.length;o++){var r=n[o],a=r&&r.shape,s=r&&r.type;if(a&&("sector"===s&&a.startAngle===a.endAngle||"rect"===s&&(!a.width||!a.height))){for(var l=0;l<Ra.length;l++)Ra[l][2]=i[Ra[l][0]],i[Ra[l][0]]=Ra[l][1];t=!0;break}}if(e.apply(this,arguments),t)for(l=0;l<Ra.length;l++)i[Ra[l][0]]=Ra[l][2]}:e}Da.prototype={constructor:Da,type:"text",brush:function(e,t){var n=this.style;this.__dirty&&_i(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),Li(i,n)?(this.setTransform(e),Ii(this,e,i,n,null,t),this.restoreTransform(e)):e.__attrCachedBy=0},getBoundingRect:function(){var e=this.style;if(this.__dirty&&_i(e),!this._rect){var t=e.text;null!=t?t+="":t="";var n=ii(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(n.x+=e.x||0,n.y+=e.y||0,Ni(e.textStroke,e.textStrokeWidth)){var i=e.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},x(Da,zi);var Oa=ua.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,n){n&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),Ra=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],ka=ua.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:wa(ua.prototype.brush),buildPath:function(e,t){var n=t.cx,i=t.cy,o=Math.max(t.r0||0,0),r=Math.max(t.r,0),a=t.startAngle,s=t.endAngle,l=t.clockwise,u=Math.cos(a),c=Math.sin(a);e.moveTo(u*o+n,c*o+i),e.lineTo(u*r+n,c*r+i),e.arc(n,i,r,a,s,!l),e.lineTo(Math.cos(s)*o+n,Math.sin(s)*o+i),0!==o&&e.arc(n,i,o,s,a,l),e.closePath()}}),Sa=ua.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var n=t.cx,i=t.cy,o=2*Math.PI;e.moveTo(n+t.r,i),e.arc(n,i,t.r,0,o,!1),e.moveTo(n+t.r0,i),e.arc(n,i,t.r0,0,o,!0)}});function Aa(e,t,n,i,o,r,a){var s=.5*(n-e),l=.5*(i-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*r+s*o+t}function Na(e,t,n){var i=t.points,o=t.smooth;if(i&&2<=i.length){if(o&&"spline"!==o){var r=function(e,t,n,i){var o,r,a,s,l=[],u=[],c=[],d=[];if(i){a=[1/0,1/0],s=[-1/0,-1/0];for(var f=0,h=e.length;f<h;f++)Ce(a,a,e[f]),Ee(s,s,e[f]);Ce(a,a,i[0]),Ee(s,s,i[1])}for(f=0,h=e.length;f<h;f++){var g=e[f];if(n)o=e[f?f-1:h-1],r=e[(f+1)%h];else{if(0===f||f===h-1){l.push(ae(e[f]));continue}o=e[f-1],r=e[f+1]}ce(u,r,o),he(u,u,t);var p=pe(g,o),m=pe(g,r),v=p+m;0!==v&&(p/=v,m/=v),he(c,u,-p),he(d,u,m);var y=le([],g,c),b=le([],g,d);i&&(Ee(y,y,a),Ce(y,y,s),Ee(b,b,a),Ce(b,b,s)),l.push(y),l.push(b)}return n&&l.push(l.shift()),l}(i,o,n,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(n?a:a-1);s++){var l=r[2*s],u=r[2*s+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{"spline"===o&&(i=function(e,t){for(var n=e.length,i=[],o=0,r=1;r<n;r++)o+=pe(e[r-1],e[r]);var a=o/2;for(a=a<n?n:a,r=0;r<a;r++){var s,l,u,c=r/(a-1)*(t?n:n-1),d=Math.floor(c),f=c-d,h=e[d%n];u=t?(s=e[(d-1+n)%n],l=e[(d+1)%n],e[(d+2)%n]):(s=e[0===d?d:d-1],l=e[n-2<d?n-1:d+1],e[n-3<d?n-1:d+2]);var g=f*f,p=f*g;i.push([Aa(s[0],h[0],l[0],u[0],f,g,p),Aa(s[1],h[1],l[1],u[1],f,g,p)])}return i}(i,n)),e.moveTo(i[0][0],i[0][1]),s=1;for(var d=i.length;s<d;s++)e.lineTo(i[s][0],i[s][1])}n&&e.closePath()}}var Ma=ua.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){Na(e,t,!0)}}),Ka=ua.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){Na(e,t,!1)}}),Pa=Math.round;function La(e,t,n){if(t){var i=t.x1,o=t.x2,r=t.y1,a=t.y2;e.x1=i,e.x2=o,e.y1=r,e.y2=a;var s=n&&n.lineWidth;s&&(Pa(2*i)===Pa(2*o)&&(e.x1=e.x2=Fa(i,s,!0)),Pa(2*r)===Pa(2*a)&&(e.y1=e.y2=Fa(r,s,!0)))}}function Ba(e,t,n){if(t){var i=t.x,o=t.y,r=t.width,a=t.height;e.x=i,e.y=o,e.width=r,e.height=a;var s=n&&n.lineWidth;s&&(e.x=Fa(i,s,!0),e.y=Fa(o,s,!0),e.width=Math.max(Fa(i+r,s,!1)-e.x,0===r?0:1),e.height=Math.max(Fa(o+a,s,!1)-e.y,0===a?0:1))}}function Fa(e,t,n){if(!t)return e;var i=Pa(2*e);return(i+Pa(t))%2==0?i/2:(i+(n?1:-1))/2}var za={},Ha=ua.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var n,i,o,r;this.subPixelOptimize?(Ba(za,t,this.style),n=za.x,i=za.y,o=za.width,r=za.height,za.r=t.r,t=za):(n=t.x,i=t.y,o=t.width,r=t.height),t.r?mi(e,t):e.rect(n,i,o,r),e.closePath()}}),Va={},Wa=ua.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n,i,o,r;r=this.subPixelOptimize?(La(Va,t,this.style),n=Va.x1,i=Va.y1,o=Va.x2,Va.y2):(n=t.x1,i=t.y1,o=t.x2,t.y2);var a=t.percent;0!==a&&(e.moveTo(n,i),a<1&&(o=n*(1-a)+o*a,r=i*(1-a)+r*a),e.lineTo(o,r))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),$a=[];function qa(e,t,n){return null===e.cpx2||null===e.cpy2?[(n?cr:ur)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?cr:ur)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?gr:hr)(e.x1,e.cpx1,e.x2,t),(n?gr:hr)(e.y1,e.cpy1,e.y2,t)]}function Ua(e){this.colorStops=e||[]}var ja=ua.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.x1,i=t.y1,o=t.x2,r=t.y2,a=t.cpx1,s=t.cpy1,l=t.cpx2,u=t.cpy2,c=t.percent;0!==c&&(e.moveTo(n,i),null==l||null==u?(c<1&&(mr(n,a,o,c,$a),a=$a[1],o=$a[2],mr(i,s,r,c,$a),s=$a[1],r=$a[2]),e.quadraticCurveTo(a,s,o,r)):(c<1&&(fr(n,a,l,o,c,$a),a=$a[1],l=$a[2],o=$a[3],fr(i,s,u,r,c,$a),s=$a[1],u=$a[2],r=$a[3]),e.bezierCurveTo(a,s,l,u,o,r)))},pointAt:function(e){return qa(this.shape,e,!1)},tangentAt:function(e){var t=qa(this.shape,e,!0);return ge(t,t)}}),Ga=ua.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.cx,i=t.cy,o=Math.max(t.r,0),r=t.startAngle,a=t.endAngle,s=t.clockwise,l=Math.cos(r),u=Math.sin(r);e.moveTo(l*o+n,u*o+i),e.arc(n,i,o,r,a,!s)}}),Xa=ua.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,n=0;n<t.length;n++)e=e||t[n].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},buildPath:function(e,t){for(var n=t.paths||[],i=0;i<n.length;i++)n[i].buildPath(e,n[i].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),ua.prototype.getBoundingRect.call(this)}});function Ya(e,t,n,i,o,r){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=r||!1,Ua.call(this,o)}function Za(e,t,n,i,o){this.x=null==e?.5:e,this.y=null==t?.5:t,this.r=null==n?.5:n,this.type="radial",this.global=o||!1,Ua.call(this,i)}function Ja(e){zi.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Ua.prototype={constructor:Ua,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}},Ya.prototype={constructor:Ya},x(Ya,Ua),Za.prototype={constructor:Za},x(Za,Ua),Ja.prototype.incremental=!0,Ja.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Ja.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},Ja.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},Ja.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},Ja.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(t=this._displayables[e]).parent=this,t.update(),t.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},Ja.prototype.brush=function(e,t){for(var n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(e),i.brush(e,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(e);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var i;(i=this._temporaryDisplayables[n]).beforeBrush&&i.beforeBrush(e),i.brush(e,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var Qa=[];Ja.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new En(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(Qa)),e.union(i)}this._rect=e}return this._rect},Ja.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(e,t))return!0;return!1},x(Ja,zi);var es=Math.max,ts=Math.min,ns={},is={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},os="emphasis",rs=1,as={},ss={};function ls(e){return ua.extend(e)}function us(e,t){ss[e]=t}function cs(e){if(ss.hasOwnProperty(e))return ss[e]}function ds(e,t,n,i){var o=Ia(e,t);return n&&("center"===i&&(n=hs(n,o.getBoundingRect())),ps(o,n)),o}function fs(e,t,n){var i=new Hi({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){"center"===n&&i.setStyle(hs(t,{width:e.width,height:e.height}))}});return i}function hs(e,t){var n,i=t.width/t.height,o=e.height*i;return n=o<=e.width?e.height:(o=e.width)/i,{x:e.x+e.width/2-o/2,y:e.y+e.height/2-n/2,width:o,height:n}}var gs=function(e,t){for(var n=[],i=e.length,o=0;o<i;o++){var r=e[o];r.path||r.createPathProxy(),r.__dirtyPath&&r.buildPath(r.path,r.shape,!0),n.push(r.path)}var a=new ua(t);return a.createPathProxy(),a.buildPath=function(e){e.appendPath(n);var t=e.getContext();t&&e.rebuildPath(t)},a};function ps(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}var ms=Fa;function vs(e){return null!=e&&"none"!==e}var ys=Q(),bs=0;function Ts(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var n=e.__zr,i=e.useHoverLayer&&n&&"canvas"===n.painter.type;if(e.__highlighted=i?"layer":"plain",!(e.isGroup||!n&&e.useHoverLayer)){var o=e,r=e.style;i&&(r=(o=n.addHover(e)).style),Hs(r),i||function(e){if(e.__hoverStlDirty){e.__hoverStlDirty=!1;var t=e.__hoverStl;if(t){var n=e.__cachedNormalStl={};e.__cachedNormalZ2=e.z2;var i=e.style;for(var o in t)null!=t[o]&&(n[o]=i[o]);n.fill=i.fill,n.stroke=i.stroke}else e.__cachedNormalStl=e.__cachedNormalZ2=null}}(o),r.extendFrom(t),Cs(r,t,"fill"),Cs(r,t,"stroke"),zs(r),i||(e.dirty(!1),e.z2+=1)}}}function Cs(e,t,n){!vs(t[n])&&vs(e[n])&&(e[n]=function(e){if("string"!=typeof e)return e;var t=ys.get(e);return t||(t=zt(e,-.1),bs<1e4&&(ys.set(e,t),bs++)),t}(e[n]))}function Es(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var n=e.style,i=e.__cachedNormalStl;i&&(Hs(n),e.setStyle(i),zs(n));var o=e.__cachedNormalZ2;null!=o&&e.z2-o==1&&(e.z2=o)}}function _s(e,t,n){var i,o="normal",r="normal";e.__highlighted&&(o=os,i=!0),t(e,n),e.__highlighted&&(r=os,i=!0),e.isGroup&&e.traverse((function(e){e.isGroup||t(e,n)})),i&&e.__highDownOnUpdate&&e.__highDownOnUpdate(o,r)}function xs(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,Es(e),Ts(e))}function Is(e){Rs(this,e)||this.__highByOuter||_s(this,Ts)}function Ds(e){Rs(this,e)||this.__highByOuter||_s(this,Es)}function ws(e){this.__highByOuter|=1<<(e||0),_s(this,Ts)}function Os(e){(this.__highByOuter&=~(1<<(e||0)))||_s(this,Es)}function Rs(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function ks(e,t){Ss(e,!0),_s(e,xs,t)}function Ss(e,t){var n=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!n||e.__highDownDispatcher){var i=n?"off":"on";e[i]("mouseover",Is)[i]("mouseout",Ds),e[i]("emphasis",ws)[i]("normal",Os),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!n}}function As(e){return!(!e||!e.__highDownDispatcher)}function Ns(e){var t=as[e];return null==t&&rs<=32&&(t=as[e]=rs++),t}function Ms(e,t,n,i,o,r,a){var s,l=(o=o||ns).labelFetcher,u=o.labelDataIndex,c=o.labelDimIndex,d=o.labelProp,f=n.getShallow("show"),h=i.getShallow("show");(f||h)&&(l&&(s=l.getFormattedLabel(u,"normal",null,c,d)),null==s&&(s=K(o.defaultText)?o.defaultText(u,o):o.defaultText));var g=f?s:null,p=h?W(l?l.getFormattedLabel(u,"emphasis",null,c,d):null,s):null;null==g&&null==p||(Ps(e,n,r,o),Ps(t,i,a,o,!0)),e.text=g,t.text=p}function Ks(e,t,n){var i=e.style;t&&(Hs(i),e.setStyle(t),zs(i)),i=e.__hoverStl,n&&i&&(Hs(i),b(i,n),zs(i))}function Ps(e,t,n,i,o){return Ls(e,t,i,o),n&&b(e,n),e}function Ls(e,t,n,i){if((n=n||ns).isRectText){var o;n.getTextPosition?o=n.getTextPosition(t,i):"outside"===(o=t.getShallow("position")||(i?null:"inside"))&&(o="top"),e.textPosition=o,e.textOffset=t.getShallow("offset");var r=t.getShallow("rotate");null!=r&&(r*=Math.PI/180),e.textRotation=r,e.textDistance=W(t.getShallow("distance"),i?null:5)}var a,s=t.ecModel,l=s&&s.option.textStyle,u=function(e){for(var t;e&&e!==e.ecModel;){var n=(e.option||ns).rich;if(n)for(var i in t=t||{},n)n.hasOwnProperty(i)&&(t[i]=1);e=e.parentModel}return t}(t);if(u)for(var c in a={},u)if(u.hasOwnProperty(c)){var d=t.getModel(["rich",c]);Bs(a[c]={},d,l,n,i)}return e.rich=a,Bs(e,t,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),e}function Bs(e,t,n,i,o,r){n=!o&&n||ns,e.textFill=Fs(t.getShallow("color"),i)||n.color,e.textStroke=Fs(t.getShallow("textBorderColor"),i)||n.textBorderColor,e.textStrokeWidth=W(t.getShallow("textBorderWidth"),n.textBorderWidth),o||(r&&(e.insideRollbackOpt=i,zs(e)),null==e.textFill&&(e.textFill=i.autoColor)),e.fontStyle=t.getShallow("fontStyle")||n.fontStyle,e.fontWeight=t.getShallow("fontWeight")||n.fontWeight,e.fontSize=t.getShallow("fontSize")||n.fontSize,e.fontFamily=t.getShallow("fontFamily")||n.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),r&&i.disableBox||(e.textBackgroundColor=Fs(t.getShallow("backgroundColor"),i),e.textPadding=t.getShallow("padding"),e.textBorderColor=Fs(t.getShallow("borderColor"),i),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||n.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||n.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||n.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function Fs(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function zs(e){var t,n=e.textPosition,i=e.insideRollbackOpt;if(i&&null==e.textFill){var o=i.autoColor,r=i.useInsideStyle,a=!1!==r&&(!0===r||i.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),s=!a&&null!=o;(a||s)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),a&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=o,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),s&&(e.textFill=o)}e.insideRollback=t}function Hs(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function Vs(e,t){var n=t&&t.getModel("textStyle");return G([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function Ws(e,t,n,i,o,r){if("function"==typeof o&&(r=o,o=null),i&&i.isAnimationEnabled()){var a=e?"Update":"",s=i.getShallow("animationDuration"+a),l=i.getShallow("animationEasing"+a),u=i.getShallow("animationDelay"+a);"function"==typeof u&&(u=u(o,i.getAnimationDelayParams?i.getAnimationDelayParams(t,o):null)),"function"==typeof s&&(s=s(o)),0<s?t.animateTo(n,s,u||0,l,r,!!r):(t.stopAnimation(),t.attr(n),r&&r())}else t.stopAnimation(),t.attr(n),r&&r()}function $s(e,t,n,i,o){Ws(!0,e,t,n,i,o)}function qs(e,t,n,i,o){Ws(!1,e,t,n,i,o)}function Us(e,t){for(var n=it([]);e&&e!==t;)rt(n,e.getLocalTransform(),n),e=e.parent;return n}function js(e,t,n){return t&&!D(t)&&(t=gt.getLocalTransform(t)),n&&(t=ut([],t)),Te([],e,t)}function Gs(e,t,n){var i=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),r=["left"===e?-i:"right"===e?i:0,"top"===e?-o:"bottom"===e?o:0];return r=js(r,t,n),Math.abs(r[0])>Math.abs(r[1])?0<r[0]?"right":"left":0<r[1]?"bottom":"top"}function Xs(e,t,n,i){if(e&&t){var o,r=(o={},e.traverse((function(e){!e.isGroup&&e.anid&&(o[e.anid]=e)})),o);t.traverse((function(e){if(!e.isGroup&&e.anid){var t=r[e.anid];if(t){var i=a(e);e.attr(a(t)),$s(e,i,n,e.dataIndex)}}}))}function a(e){var t={position:ae(e.position),rotation:e.rotation};return e.shape&&(t.shape=b({},e.shape)),t}}function Ys(e,t){return O(e,(function(e){var n=e[0];n=es(n,t.x),n=ts(n,t.x+t.width);var i=e[1];return i=es(i,t.y),[n,i=ts(i,t.y+t.height)]}))}function Zs(e,t,n){var i=(t=b({rectHover:!0},t)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(i.image=e.slice(8),T(i,n),new Hi(t)):ds(e.replace("path://",""),t,n,"center")}function Js(e,t,n,i,o){for(var r=0,a=o[o.length-1];r<o.length;r++){var s=o[r];if(Qs(e,t,n,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function Qs(e,t,n,i,o,r,a,s){var l=n-e,u=i-t,c=a-o,d=s-r,f=el(c,d,l,u);if(function(e){return e<=1e-6&&-1e-6<=e}(f))return!1;var h=e-o,g=t-r,p=el(h,g,l,u)/f;if(p<0||1<p)return!1;var m=el(h,g,c,d)/f;return!(m<0||1<m)}function el(e,t,n,i){return e*i-n*t}us("circle",Oa),us("sector",ka),us("ring",Sa),us("polygon",Ma),us("polyline",Ka),us("rect",Ha),us("line",Wa),us("bezierCurve",ja),us("arc",Ga);var tl=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:is,extendShape:ls,extendPath:function(e,t){return function(e,t){return ua.extend(xa(e,t))}(e,t)},registerShape:us,getShapeClass:cs,makePath:ds,makeImage:fs,mergePath:gs,resizePath:ps,subPixelOptimizeLine:function(e){return La(e.shape,e.shape,e.style),e},subPixelOptimizeRect:function(e){return Ba(e.shape,e.shape,e.style),e},subPixelOptimize:ms,setElementHoverStyle:xs,setHoverStyle:ks,setAsHighDownDispatcher:Ss,isHighDownDispatcher:As,getHighlightDigit:Ns,setLabelStyle:Ms,modifyLabelStyle:Ks,setTextStyle:Ps,setText:function(e,t,n){var i,o={isRectText:!0};!1===n?i=!0:o.autoColor=n,Ls(e,t,o,i)},getFont:Vs,updateProps:$s,initProps:qs,getTransform:Us,applyTransform:js,transformDirection:Gs,groupTransition:Xs,clipPointsByRect:Ys,clipRectByRect:function(e,t){var n=es(e.x,t.x),i=ts(e.x+e.width,t.x+t.width),o=es(e.y,t.y),r=ts(e.y+e.height,t.y+t.height);if(n<=i&&o<=r)return{x:n,y:o,width:i-n,height:r-o}},createIcon:Zs,linePolygonIntersect:Js,lineLineIntersect:Qs,Group:_n,Image:Hi,Text:Da,Circle:Oa,Sector:ka,Ring:Sa,Polygon:Ma,Polyline:Ka,Rect:Ha,Line:Wa,BezierCurve:ja,Arc:Ga,IncrementalDisplayable:Ja,CompoundPath:Xa,LinearGradient:Ya,RadialGradient:Za,BoundingRect:En}),nl=["textStyle","color"],il={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(nl):null)},getFont:function(){return Vs({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return ii(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},ol=Yo([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),rl={getItemStyle:function(e,t){var n=ol(this,e,t),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},al=I,sl=Ko();function ll(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}function ul(e,t,n){for(var i=0;i<t.length&&(!t[i]||null!=(e=e&&"object"==typeof e?e[t[i]]:null));i++);return null==e&&n&&(e=n.get(t)),e}function cl(e,t){var n=sl(e).getParent;return n?n.call(e,t):e.parentModel}ll.prototype={constructor:ll,init:null,mergeOption:function(e){v(this.option,e,!0)},get:function(e,t){return null==e?this.option:ul(this.option,this.parsePath(e),!t&&cl(this,e))},getShallow:function(e,t){var n=this.option,i=null==n?n:n[e],o=!t&&cl(this,e);return null==i&&o&&(i=o.getShallow(e)),i},getModel:function(e,t){var n;return new ll(null==e?this.option:ul(this.option,e=this.parsePath(e)),t=t||(n=cl(this,e))&&n.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(m(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){sl(this).getParent=e},isAnimationEnabled:function(){if(!o.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},$o(ll),Uo(ll),al(ll,Jo),al(ll,er),al(ll,il),al(ll,rl);var dl=0;function fl(e){return[e||"",dl++,Math.random().toFixed(5)].join("_")}function hl(e,t,n,i){var o=t[1]-t[0],r=n[1]-n[0];if(0==o)return 0==r?n[0]:(n[0]+n[1])/2;if(i)if(0<o){if(e<=t[0])return n[0];if(e>=t[1])return n[1]}else{if(e>=t[0])return n[0];if(e<=t[1])return n[1]}else{if(e===t[0])return n[0];if(e===t[1])return n[1]}return(e-t[0])/o*r+n[0]}function gl(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?function(e){return e.replace(/^\s+|\s+$/g,"")}(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e}function pl(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function ml(e){return e.sort((function(e,t){return e-t})),e}function vl(e){if(e=+e,isNaN(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}function yl(e){var t=e.toString(),n=t.indexOf("e");if(0<n){var i=+t.slice(n+1);return i<0?-i:0}var o=t.indexOf(".");return o<0?0:t.length-1-o}function bl(e,t){var n=Math.log,i=Math.LN10,o=Math.floor(n(e[1]-e[0])/i),r=Math.round(n(Math.abs(t[1]-t[0]))/i),a=Math.min(Math.max(-o+r,0),20);return isFinite(a)?a:20}function Tl(e,t,n){if(!e[t])return 0;var i=R(e,(function(e,t){return e+(isNaN(t)?0:t)}),0);if(0===i)return 0;for(var o=Math.pow(10,n),r=O(e,(function(e){return(isNaN(e)?0:e)/i*o*100})),a=100*o,s=O(r,(function(e){return Math.floor(e)})),l=R(s,(function(e,t){return e+t}),0),u=O(r,(function(e,t){return e-s[t]}));l<a;){for(var c=Number.NEGATIVE_INFINITY,d=null,f=0,h=u.length;f<h;++f)u[f]>c&&(c=u[f],d=f);++s[d],u[d]=0,++l}return s[t]/o}var Cl=9007199254740991;function El(e){var t=2*Math.PI;return(e%t+t)%t}function _l(e){return-1e-4<e&&e<1e-4}var xl=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Il(e){if(e instanceof Date)return e;if("string"!=typeof e)return null==e?new Date(NaN):new Date(Math.round(e));var t=xl.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}function Dl(e){return Math.pow(10,wl(e))}function wl(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return 10<=e/Math.pow(10,t)&&t++,t}function Ol(e,t){var n=wl(e),i=Math.pow(10,n),o=e/i;return e=(t?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*i,-20<=n?+e.toFixed(n<0?-n:0):e}function Rl(e){e.sort((function(e,t){return function e(t,n,i){return t.interval[i]<n.interval[i]||t.interval[i]===n.interval[i]&&(t.close[i]-n.close[i]==(i?-1:1)||!i&&e(t,n,1))}(e,t,0)?-1:1}));for(var t=-1/0,n=1,i=0;i<e.length;){for(var o=e[i].interval,r=e[i].close,a=0;a<2;a++)o[a]<=t&&(o[a]=t,r[a]=a?1:1-n),t=o[a],n=r[a];o[0]===o[1]&&r[0]*r[1]!=1?e.splice(i,1):i++}return e}function kl(e){return 0<=e-parseFloat(e)}var Sl=(Object.freeze||Object)({linearMap:hl,parsePercent:gl,round:pl,asc:ml,getPrecision:vl,getPrecisionSafe:yl,getPixelPrecision:bl,getPercentWithPrecision:Tl,MAX_SAFE_INTEGER:Cl,remRadian:El,isRadianAroundZero:_l,parseDate:Il,quantity:Dl,quantityExponent:wl,nice:Ol,quantile:function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),o=+e[i-1],r=n-i;return r?o+r*(e[i]-o):o},reformIntervals:Rl,isNumeric:kl});function Al(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<e.length?"."+e[1]:"")}function Nl(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()})),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Ml=U,Kl=/([&<>"'])/g,Pl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ll(e){return null==e?"":(e+"").replace(Kl,(function(e,t){return Pl[t]}))}function Bl(e,t){return"{"+e+(null==t?"":t)+"}"}var Fl=["a","b","c","d","e","f","g"];function zl(e,t,n){M(t)||(t=[t]);var i=t.length;if(!i)return"";for(var o=t[0].$vars||[],r=0;r<o.length;r++){var a=Fl[r];e=e.replace(Bl(a),Bl(a,0))}for(var s=0;s<i;s++)for(var l=0;l<o.length;l++){var u=t[s][o[l]];e=e.replace(Bl(Fl[l],s),n?Ll(u):u)}return e}function Hl(e,t,n){return w(t,(function(t,i){e=e.replace("{"+i+"}",n?Ll(t):t)})),e}function Vl(e,t){var n=(e=P(e)?{color:e,extraCssText:t}:e||{}).color,i=(t=e.extraCssText,e.renderMode||"html"),o=e.markerId||"X";return n?"html"===i?"subItem"===e.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ll(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Ll(n)+";"+(t||"")+'"></span>':{renderMode:i,content:"{marker"+o+"|}  ",style:{color:n}}:""}function Wl(e,t){return"0000".substr(0,t-(e+="").length)+e}function $l(e,t,n){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var i=Il(t),o=n?"UTC":"",r=i["get"+o+"FullYear"](),a=i["get"+o+"Month"]()+1,s=i["get"+o+"Date"](),l=i["get"+o+"Hours"](),u=i["get"+o+"Minutes"](),c=i["get"+o+"Seconds"](),d=i["get"+o+"Milliseconds"]();return e.replace("MM",Wl(a,2)).replace("M",a).replace("yyyy",r).replace("yy",r%100).replace("dd",Wl(s,2)).replace("d",s).replace("hh",Wl(l,2)).replace("h",l).replace("mm",Wl(u,2)).replace("m",u).replace("ss",Wl(c,2)).replace("s",c).replace("SSS",Wl(d,3))}function ql(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e}var Ul=si;function jl(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location=e}else window.open(e,t)}var Gl=(Object.freeze||Object)({addCommas:Al,toCamelCase:Nl,normalizeCssArray:Ml,encodeHTML:Ll,formatTpl:zl,formatTplSimple:Hl,getTooltipMarker:Vl,formatTime:$l,capitalFirst:ql,truncateText:Ul,getTextBoundingRect:function(e){return ii(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)},getTextRect:function(e,t,n,i,o,r,a,s){return ii(e,t,n,i,o,s,r,a)},windowOpen:jl}),Xl=w,Yl=["left","right","top","bottom","width","height"],Zl=[["width","left","right"],["height","top","bottom"]];function Jl(e,t,n,i,o){var r=0,a=0;null==i&&(i=1/0),null==o&&(o=1/0);var s=0;t.eachChild((function(l,u){var c,d,f=l.position,h=l.getBoundingRect(),g=t.childAt(u+1),p=g&&g.getBoundingRect();if("horizontal"===e){var m=h.width+(p?-p.x+h.x:0);s=i<(c=r+m)||l.newline?(r=0,c=m,a+=s+n,h.height):Math.max(s,h.height)}else{var v=h.height+(p?-p.y+h.y:0);s=o<(d=a+v)||l.newline?(r+=s+n,a=0,d=v,h.width):Math.max(s,h.width)}l.newline||(f[0]=r,f[1]=a,"horizontal"===e?r=c+n:a=d+n)}))}var Ql=Jl;function eu(e,t,n){n=Ml(n||0);var i=t.width,o=t.height,r=gl(e.left,i),a=gl(e.top,o),s=gl(e.right,i),l=gl(e.bottom,o),u=gl(e.width,i),c=gl(e.height,o),d=n[2]+n[0],f=n[1]+n[3],h=e.aspect;switch(isNaN(u)&&(u=i-s-f-r),isNaN(c)&&(c=o-l-d-a),null!=h&&(isNaN(u)&&isNaN(c)&&(i/o<h?u=.8*i:c=.8*o),isNaN(u)&&(u=h*c),isNaN(c)&&(c=u/h)),isNaN(r)&&(r=i-s-u-f),isNaN(a)&&(a=o-l-c-d),e.left||e.right){case"center":r=i/2-u/2-n[3];break;case"right":r=i-u-f}switch(e.top||e.bottom){case"middle":case"center":a=o/2-c/2-n[0];break;case"bottom":a=o-c-d}r=r||0,a=a||0,isNaN(u)&&(u=i-f-r-(s||0)),isNaN(c)&&(c=o-d-a-(l||0));var g=new En(r+n[3],a+n[0],u,c);return g.margin=n,g}function tu(e,t,n,i,o){var r=!o||!o.hv||o.hv[0],a=!o||!o.hv||o.hv[1],s=o&&o.boundingMode||"all";if(r||a){var l;if("raw"===s)l="group"===e.type?new En(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(l=e.getBoundingRect(),e.needLocalTransform()){var u=e.getLocalTransform();(l=l.clone()).applyTransform(u)}t=eu(T({width:l.width,height:l.height},t),n,i);var c=e.position,d=r?t.x-l.x:0,f=a?t.y-l.y:0;e.attr("position","raw"===s?[d,f]:[c[0]+d,c[1]+f])}}function nu(e,t,n){L(n)||(n={});var i=n.ignoreSize;M(i)||(i=[i,i]);var o=a(Zl[0],0),r=a(Zl[1],1);function a(n,o){var r={},a=0,u={},c=0;if(Xl(n,(function(t){u[t]=e[t]})),Xl(n,(function(e){s(t,e)&&(r[e]=u[e]=t[e]),l(r,e)&&a++,l(u,e)&&c++})),i[o])return l(t,n[1])?u[n[2]]=null:l(t,n[2])&&(u[n[1]]=null),u;if(2!==c&&a){if(2<=a)return r;for(var d=0;d<n.length;d++){var f=n[d];if(!s(r,f)&&s(e,f)){r[f]=e[f];break}}return r}return u}function s(e,t){return e.hasOwnProperty(t)}function l(e,t){return null!=e[t]&&"auto"!==e[t]}function u(e,t,n){Xl(e,(function(e){t[e]=n[e]}))}u(Zl[0],e,o),u(Zl[1],e,r)}function iu(e){return ou({},e)}function ou(e,t){return t&&e&&Xl(Yl,(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}N(Jl,"vertical"),N(Jl,"horizontal");var ru,au,su,lu=Ko(),uu=ll.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,n,i){ll.call(this,e,t,n,i),this.uid=fl("ec_cpt_model")},init:function(e,t,n,i){this.mergeDefaultAndTheme(e,n)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,i=n?iu(e):{};v(e,t.getTheme().get(this.mainType)),v(e,this.getDefaultOption()),n&&nu(e,i,n)},mergeOption:function(e,t){v(this.option,e,!0);var n=this.layoutMode;n&&nu(this.option,e,n)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=lu(this);if(!e.defaultOption){for(var t=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&t.push(i),n=n.superClass}for(var o={},r=t.length-1;0<=r;r--)o=v(o,t[r],!0);e.defaultOption=o}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});function cu(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}Xo(uu,{registerWhenExtend:!0}),au={},(ru=uu).registerSubTypeDefaulter=function(e,t){e=Wo(e),au[e.main]=t},ru.determineSubType=function(e,t){var n=t.type;if(!n){var i=Wo(e).main;ru.hasSubTypes(e)&&au[i]&&(n=au[i](t))}return n},su=function(e){var t=[];return w(uu.getClassesByMainType(e),(function(e){t=t.concat(e.prototype.dependencies||[])})),t=O(t,(function(e){return Wo(e).main})),"dataset"!==e&&_(t,"dataset")<=0&&t.unshift("dataset"),t},uu.topologicalTravel=function(e,t,n,i){if(e.length){var o=function(e){var t={},n=[];return w(e,(function(i){var o=cu(t,i),r=function(e,t){var n=[];return w(e,(function(e){0<=_(t,e)&&n.push(e)})),n}(o.originalDeps=su(i),e);o.entryCount=r.length,0===o.entryCount&&n.push(i),w(r,(function(e){_(o.predecessor,e)<0&&o.predecessor.push(e);var n=cu(t,e);_(n.successor,e)<0&&n.successor.push(i)}))})),{graph:t,noEntryList:n}}(t),r=o.graph,a=o.noEntryList,s={};for(w(e,(function(e){s[e]=!0}));a.length;){var l=a.pop(),u=r[l],c=!!s[l];c&&(n.call(i,l,u.originalDeps.slice()),delete s[l]),w(u.successor,c?f:d)}w(s,(function(){throw new Error("Circle dependency may exists")}))}function d(e){r[e].entryCount--,0===r[e].entryCount&&a.push(e)}function f(e){s[e]=!0,d(e)}},I(uu,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var du="";"undefined"!=typeof navigator&&(du=navigator.platform||"");var fu={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:du.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},hu=Ko(),gu={clearColorPalette:function(){hu(this).colorIdx=0,hu(this).colorNameMap={}},getColorFromPalette:function(e,t,n){var i=hu(t=t||this),o=i.colorIdx||0,r=i.colorNameMap=i.colorNameMap||{};if(r.hasOwnProperty(e))return r[e];var a=Do(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=n&&s?function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i].length>t)return e[i];return e[n-1]}(s,n):a;if((l=l||a)&&l.length){var u=l[o];return e&&(r[e]=u),i.colorIdx=(o+1)%l.length,u}}},pu="original",mu="arrayRows",vu="objectRows",yu="keyedColumns",bu="unknown",Tu="typedArray";function Cu(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===yu?{}:[]),this.sourceFormat=e.sourceFormat||bu,this.seriesLayoutBy=e.seriesLayoutBy||"column",this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&Q(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}Cu.seriesDataToSource=function(e){return new Cu({data:e,sourceFormat:F(e)?Tu:pu,fromDataset:!1})},Uo(Cu);var Eu=Ko();function _u(e){var t=e.option,n=t.data,i=F(n)?Tu:pu,o=!1,r=t.seriesLayoutBy,a=t.sourceHeader,s=t.dimensions,l=Ou(e);if(l){var u=l.option;n=u.source,i=Eu(l).sourceFormat,o=!0,r=r||u.seriesLayoutBy,null==a&&(a=u.sourceHeader),s=s||u.dimensions}var c=function(e,t,n,i,o){if(!e)return{dimensionsDefine:xu(o)};var r,a;if(t===mu)"auto"===i||null==i?Iu((function(e){null!=e&&"-"!==e&&(P(e)?null==a&&(a=1):a=0)}),n,e,10):a=i?1:0,o||1!==a||(o=[],Iu((function(e,t){o[t]=null!=e?e:""}),n,e)),r=o?o.length:"row"===n?e.length:e[0]?e[0].length:null;else if(t===vu)o=o||function(e){for(var t,n=0;n<e.length&&!(t=e[n++]););if(t){var i=[];return w(t,(function(e,t){i.push(t)})),i}}(e);else if(t===yu)o||(o=[],w(e,(function(e,t){o.push(t)})));else if(t===pu){var s=Ro(e[0]);r=M(s)&&s.length||1}return{startIndex:a,dimensionsDefine:xu(o),dimensionsDetectCount:r}}(n,i,r,a,s);Eu(e).source=new Cu({data:n,fromDataset:o,seriesLayoutBy:r,sourceFormat:i,dimensionsDefine:c.dimensionsDefine,startIndex:c.startIndex,dimensionsDetectCount:c.dimensionsDetectCount,encodeDefine:t.encode})}function xu(e){if(e){var t=Q();return O(e,(function(e,n){if(null==(e=b({},L(e)?e:{name:e})).name)return e;e.name+="",null==e.displayName&&(e.displayName=e.name);var i=t.get(e.name);return i?e.name+="-"+i.count++:t.set(e.name,{count:1}),e}))}}function Iu(e,t,n,i){if(null==i&&(i=1/0),"row"===t)for(var o=0;o<n.length&&o<i;o++)e(n[o]?n[o][0]:null,o);else{var r=n[0]||[];for(o=0;o<r.length&&o<i;o++)e(r[o],o)}}function Du(e,t,n){var i={},o=Ou(t);if(!o||!e)return i;var r,a,s=[],l=[],u=Eu(t.ecModel).datasetMap,c=o.uid+"_"+n.seriesLayoutBy;w(e=e.slice(),(function(t,n){L(t)||(e[n]={name:t}),"ordinal"===t.type&&null==r&&(a=h(e[r=n])),i[t.name]=[]}));var d=u.get(c)||u.set(c,{categoryWayDim:a,valueWayDim:0});function f(e,t,n){for(var i=0;i<n;i++)e.push(t+i)}function h(e){var t=e.dimsDef;return t?t.length:1}return w(e,(function(e,t){var n=e.name,o=h(e);if(null==r){var a=d.valueWayDim;f(i[n],a,o),f(l,a,o),d.valueWayDim+=o}else r===t?(f(i[n],0,o),f(s,0,o)):(f(i[n],a=d.categoryWayDim,o),f(l,a,o),d.categoryWayDim+=o)})),s.length&&(i.itemName=s),l.length&&(i.seriesName=l),i}function wu(e,t,n){var i={};if(!Ou(e))return i;var o,r=t.sourceFormat,a=t.dimensionsDefine;r!==vu&&r!==yu||w(a,(function(e,t){"name"===(L(e)?e.name:e)&&(o=t)}));var s=function(){for(var e={},i={},s=[],l=0,u=Math.min(5,n);l<u;l++){var c=Ru(t.data,r,t.seriesLayoutBy,a,t.startIndex,l);s.push(c);var d=3===c;if(d&&null==e.v&&l!==o&&(e.v=l),null!=e.n&&e.n!==e.v&&(d||3!==s[e.n])||(e.n=l),f(e)&&3!==s[e.n])return e;d||(2===c&&null==i.v&&l!==o&&(i.v=l),null!=i.n&&i.n!==i.v||(i.n=l))}function f(e){return null!=e.v&&null!=e.n}return f(e)?e:f(i)?i:null}();if(s){i.value=s.v;var l=null!=o?o:s.n;i.itemName=[l],i.seriesName=[l]}return i}function Ou(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function Ru(e,t,n,i,o,r){var a,s,l;if(F(e))return 3;if(i){var u=i[r];L(u)?(s=u.name,l=u.type):P(u)&&(s=u)}if(null!=l)return"ordinal"===l?1:3;if(t===mu)if("row"===n){for(var c=e[r],d=0;d<(c||[]).length&&d<5;d++)if(null!=(a=p(c[o+d])))return a}else for(d=0;d<e.length&&d<5;d++){var f=e[o+d];if(f&&null!=(a=p(f[r])))return a}else if(t===vu){if(!s)return 3;for(d=0;d<e.length&&d<5;d++)if((h=e[d])&&null!=(a=p(h[s])))return a}else if(t===yu){if(!s)return 3;if(!(c=e[s])||F(c))return 3;for(d=0;d<c.length&&d<5;d++)if(null!=(a=p(c[d])))return a}else if(t===pu)for(d=0;d<e.length&&d<5;d++){var h,g=Ro(h=e[d]);if(!M(g))return 3;if(null!=(a=p(g[r])))return a}function p(e){var t=P(e);return null!=e&&isFinite(e)&&""!==e?t?2:3:t&&"-"!==e?1:void 0}return 3}var ku="\0_ec_inner",Su=ll.extend({init:function(e,t,n,i){n=n||{},this.option=null,this._theme=new ll(n),this._optionManager=i},setOption:function(e,t){j(!(ku in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,n=this._optionManager;if(!e||"recreate"===e){var i=n.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(i)):(function(e){e=e,this.option={},this.option[ku]=1,this._componentsMap=Q({series:[]}),function(e,t){var n=e.color&&!e.colorLayer;w(t,(function(t,i){"colorLayer"===i&&n||uu.hasClass(i)||("object"==typeof t?e[i]=e[i]?v(e[i],t,!1):m(t):null==e[i]&&(e[i]=t))}))}(e,this._theme.option),v(e,fu,!1),this.mergeOption(e)}).call(this,i),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var o=n.getTimelineOption(this);o&&(this.mergeOption(o),t=!0)}if(!e||"recreate"===e||"media"===e){var r=n.getMediaOption(this,this._api);r.length&&w(r,(function(e){this.mergeOption(e,t=!0)}),this)}return t},mergeOption:function(e){var t=this.option,n=this._componentsMap,i=[];!function(e){Eu(e).datasetMap=Q()}(this),w(e,(function(e,n){null!=e&&(uu.hasClass(n)?n&&i.push(n):t[n]=null==t[n]?m(e):v(t[n],e,!0))})),uu.topologicalTravel(i,uu.getAllClassMainTypes(),(function(i,o){var r=Do(e[i]),a=ko(n.get(i),r);So(a),w(a,(function(e,t){var n=e.option;L(n)&&(e.keyInfo.mainType=i,e.keyInfo.subType=function(e,t,n){return t.type?t.type:n?n.subType:uu.determineSubType(e,t)}(i,n,e.exist))}));var s=function(e,t){M(t)||(t=t?[t]:[]);var n={};return w(t,(function(t){n[t]=(e.get(t)||[]).slice()})),n}(n,o);t[i]=[],n.set(i,[]),w(a,(function(e,o){var r=e.exist,a=e.option;if(j(L(a)||r,"Empty component definition"),a){var l=uu.getClass(i,e.keyInfo.subType,!0);if(r&&r.constructor===l)r.name=e.keyInfo.name,r.mergeOption(a,this),r.optionUpdated(a,!1);else{var u=b({dependentModels:s,componentIndex:o},e.keyInfo);b(r=new l(a,this,this,u),u),r.init(a,this,this,u),r.optionUpdated(null,!0)}}else r.mergeOption({},this),r.optionUpdated({},!1);n.get(i)[o]=r,t[i][o]=r.option}),this),"series"===i&&Au(this,n.get("series"))}),this),this._seriesIndicesMap=Q(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=m(this.option);return w(e,(function(t,n){if(uu.hasClass(n)){for(var i=(t=Do(t)).length-1;0<=i;i--)No(t[i])&&t.splice(i,1);e[n]=t}})),delete e[ku],e},getTheme:function(){return this._theme},getComponent:function(e,t){var n=this._componentsMap.get(e);if(n)return n[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var n,i=e.index,o=e.id,r=e.name,a=this._componentsMap.get(t);if(!a||!a.length)return[];if(null!=i)M(i)||(i=[i]),n=k(O(i,(function(e){return a[e]})),(function(e){return!!e}));else if(null!=o){var s=M(o);n=k(a,(function(e){return s&&0<=_(o,e.id)||!s&&e.id===o}))}else if(null!=r){var l=M(r);n=k(a,(function(e){return l&&0<=_(r,e.name)||!l&&e.name===r}))}else n=a.slice();return Nu(n,e)},findComponents:function(e){var t,n,i,o,r,a=e.mainType,s=(n=a+"Index",i=a+"Id",o=a+"Name",!(t=e.query)||null==t[n]&&null==t[i]&&null==t[o]?null:{mainType:a,index:t[n],id:t[i],name:t[o]});return r=Nu(s?this.queryComponents(s):this._componentsMap.get(a),e),e.filter?k(r,e.filter):r},eachComponent:function(e,t,n){var i=this._componentsMap;"function"==typeof e?(n=t,t=e,i.each((function(e,i){w(e,(function(e,o){t.call(n,i,e,o)}))}))):P(e)?w(i.get(e),t,n):L(e)&&w(this.findComponents(e),t,n)},getSeriesByName:function(e){return k(this._componentsMap.get("series"),(function(t){return t.name===e}))},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){return k(this._componentsMap.get("series"),(function(t){return t.subType===e}))},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){w(this._seriesIndices,(function(n){var i=this._componentsMap.get("series")[n];e.call(t,i,n)}),this)},eachRawSeries:function(e,t){w(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,n){w(this._seriesIndices,(function(i){var o=this._componentsMap.get("series")[i];o.subType===e&&t.call(n,o,i)}),this)},eachRawSeriesByType:function(e,t,n){return w(this.getSeriesByType(e),t,n)},isSeriesFiltered:function(e){return null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){Au(this,k(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;Au(this,t.get("series"));var n=[];t.each((function(e,t){n.push(t)})),uu.topologicalTravel(n,uu.getAllClassMainTypes(),(function(n,i){w(t.get(n),(function(t){"series"===n&&function(e,t){if(t){var n=t.seiresIndex,i=t.seriesId,o=t.seriesName;return null!=n&&e.componentIndex!==n||null!=i&&e.id!==i||null!=o&&e.name!==o}}(t,e)||t.restoreData()}))}))}});function Au(e,t){e._seriesIndicesMap=Q(e._seriesIndices=O(t,(function(e){return e.componentIndex}))||[])}function Nu(e,t){return t.hasOwnProperty("subType")?k(e,(function(e){return e.subType===t.subType})):e}I(Su,gu);var Mu=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function Ku(e){w(Mu,(function(t){this[t]=A(e[t],e)}),this)}var Pu={};function Lu(){this._coordinateSystems=[]}Lu.prototype={constructor:Lu,create:function(e,t){var n=[];w(Pu,(function(i,o){var r=i.create(e,t);n=n.concat(r||[])})),this._coordinateSystems=n},update:function(e,t){w(this._coordinateSystems,(function(n){n.update&&n.update(e,t)}))},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},Lu.register=function(e,t){Pu[e]=t},Lu.get=function(e){return Pu[e]};var Bu=w,Fu=m,zu=O,Hu=v,Vu=/^(min|max)?(.+)$/;function Wu(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function $u(e,t,n){var i={width:t,height:n,aspectratio:t/n},o=!0;return w(e,(function(e,t){var n=t.match(Vu);if(n&&n[1]&&n[2]){var r=n[1],a=n[2].toLowerCase();!function(e,t,n){return"min"===n?t<=e:"max"===n?e<=t:e===t}(i[a],e,r)&&(o=!1)}})),o}Wu.prototype={constructor:Wu,setOption:function(e,t){e&&w(Do(e.series),(function(e){e&&e.data&&F(e.data)&&Y(e.data)})),e=Fu(e);var n=this._optionBackup,i=(function(e,t,n){var i,o,r=[],a=[],s=e.timeline;return e.baseOption&&(o=e.baseOption),(s||e.options)&&(o=o||{},r=(e.options||[]).slice()),e.media&&(o=o||{},Bu(e.media,(function(e){e&&e.option&&(e.query?a.push(e):i=i||e)}))),(o=o||e).timeline||(o.timeline=s),Bu([o].concat(r).concat(O(a,(function(e){return e.option}))),(function(e){Bu(t,(function(t){t(e,n)}))})),{baseOption:o,timelineOptions:r,mediaDefault:i,mediaList:a}}).call(this,e,t,!n);this._newBaseOption=i.baseOption,n?(function(e,t){Bu(t=t||{},(function(t,n){if(null!=t){var i=e[n];if(uu.hasClass(n)){t=Do(t);var o=ko(i=Do(i),t);e[n]=zu(o,(function(e){return e.option&&e.exist?Hu(e.exist,e.option,!0):e.exist||e.option}))}else e[n]=Hu(i,t,!0)}}))}(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=zu(t.timelineOptions,Fu),this._mediaList=zu(t.mediaList,Fu),this._mediaDefault=Fu(t.mediaDefault),this._currentMediaIndices=[],Fu(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,n=this._timelineOptions;if(n.length){var i=e.getComponent("timeline");i&&(t=Fu(n[i.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var t=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,r=[],a=[];if(!i.length&&!o)return a;for(var s=0,l=i.length;s<l;s++)$u(i[s].query,t,n)&&r.push(s);return!r.length&&o&&(r=[-1]),r.length&&!function(e,t){return e.join(",")===t.join(",")}(r,this._currentMediaIndices)&&(a=zu(r,(function(e){return Fu(-1===e?o.option:i[e].option)}))),this._currentMediaIndices=r,a}};var qu=w,Uu=L,ju=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Gu(e){var t=e&&e.itemStyle;if(t)for(var n=0,i=ju.length;n<i;n++){var o=ju[n],r=t.normal,a=t.emphasis;r&&r[o]&&(e[o]=e[o]||{},e[o].normal?v(e[o].normal,r[o]):e[o].normal=r[o],r[o]=null),a&&a[o]&&(e[o]=e[o]||{},e[o].emphasis?v(e[o].emphasis,a[o]):e[o].emphasis=a[o],a[o]=null)}}function Xu(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,o=e[t].emphasis;i&&(n?(e[t].normal=e[t].emphasis=null,T(e[t],i)):e[t]=i),o&&(e.emphasis=e.emphasis||{},e.emphasis[t]=o)}}function Yu(e){Xu(e,"itemStyle"),Xu(e,"lineStyle"),Xu(e,"areaStyle"),Xu(e,"label"),Xu(e,"labelLine"),Xu(e,"upperLabel"),Xu(e,"edgeLabel")}function Zu(e,t){var n=Uu(e)&&e[t],i=Uu(n)&&n.textStyle;if(i)for(var o=0,r=Oo.length;o<r;o++)i.hasOwnProperty(t=Oo[o])&&(n[t]=i[t])}function Ju(e){e&&(Yu(e),Zu(e,"label"),e.emphasis&&Zu(e.emphasis,"label"))}function Qu(e){return M(e)?e:e?[e]:[]}function ec(e){return(M(e)?e[0]:e)||{}}function tc(e){w(nc,(function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])}))}var nc=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],ic=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],oc=function(e,t){(function(e,t){qu(Qu(e.series),(function(e){Uu(e)&&function(e){if(Uu(e)){Gu(e),Yu(e),Zu(e,"label"),Zu(e,"upperLabel"),Zu(e,"edgeLabel"),e.emphasis&&(Zu(e.emphasis,"label"),Zu(e.emphasis,"upperLabel"),Zu(e.emphasis,"edgeLabel")),(n=e.markPoint)&&(Gu(n),Ju(n)),(i=e.markLine)&&(Gu(i),Ju(i));var t=e.markArea;t&&Ju(t);var n,i,o=e.data;if("graph"===e.type){o=o||e.nodes;var r=e.links||e.edges;if(r&&!F(r))for(var a=0;a<r.length;a++)Ju(r[a]);w(e.categories,(function(e){Yu(e)}))}if(o&&!F(o))for(a=0;a<o.length;a++)Ju(o[a]);if((n=e.markPoint)&&n.data){var s=n.data;for(a=0;a<s.length;a++)Ju(s[a])}if((i=e.markLine)&&i.data){var l=i.data;for(a=0;a<l.length;a++)M(l[a])?(Ju(l[a][0]),Ju(l[a][1])):Ju(l[a])}"gauge"===e.type?(Zu(e,"axisLabel"),Zu(e,"title"),Zu(e,"detail")):"treemap"===e.type?(Xu(e.breadcrumb,"itemStyle"),w(e.levels,(function(e){Yu(e)}))):"tree"===e.type&&Yu(e.leaves)}}(e)}));var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),qu(n,(function(t){qu(Qu(e[t]),(function(e){e&&(Zu(e,"axisLabel"),Zu(e.axisPointer,"label"))}))})),qu(Qu(e.parallel),(function(e){var t=e&&e.parallelAxisDefault;Zu(t,"axisLabel"),Zu(t&&t.axisPointer,"label")})),qu(Qu(e.calendar),(function(e){Xu(e,"itemStyle"),Zu(e,"dayLabel"),Zu(e,"monthLabel"),Zu(e,"yearLabel")})),qu(Qu(e.radar),(function(e){Zu(e,"name")})),qu(Qu(e.geo),(function(e){Uu(e)&&(Ju(e),qu(Qu(e.regions),(function(e){Ju(e)})))})),qu(Qu(e.timeline),(function(e){Ju(e),Xu(e,"label"),Xu(e,"itemStyle"),Xu(e,"controlStyle",!0);var t=e.data;M(t)&&w(t,(function(e){L(e)&&(Xu(e,"label"),Xu(e,"itemStyle"))}))})),qu(Qu(e.toolbox),(function(e){Xu(e,"iconStyle"),qu(e.feature,(function(e){Xu(e,"iconStyle")}))})),Zu(ec(e.axisPointer),"label"),Zu(ec(e.tooltip).axisPointer,"label")})(e,t),e.series=Do(e.series),w(e.series,(function(e){if(L(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t)null!=e.clockWise&&(e.clockwise=e.clockWise);else if("gauge"===t){var n=function(e,t){t=t.split(",");for(var n=e,i=0;i<t.length&&null!=(n=n&&n[t[i]]);i++);return n}(e,"pointer.color");null!=n&&function(e,t,n,i){t=t.split(",");for(var o,r=e,a=0;a<t.length-1;a++)null==r[o=t[a]]&&(r[o]={}),r=r[o];null!=r[t[a]]||(r[t[a]]=n)}(e,"itemStyle.color",n)}tc(e)}})),e.dataRange&&(e.visualMap=e.dataRange),w(ic,(function(t){var n=e[t];n&&(M(n)||(n=[n]),w(n,(function(e){tc(e)})))}))};function rc(e){w(e,(function(t,n){var i=[],o=[NaN,NaN],r=t.data,a=t.isStackedByIndex,s=r.map([t.stackResultDimension,t.stackedOverDimension],(function(s,l,u){var c,d,f=r.get(t.stackedDimension,u);if(isNaN(f))return o;a?d=r.getRawIndex(u):c=r.get(t.stackedByDimension,u);for(var h=NaN,g=n-1;0<=g;g--){var p=e[g];if(a||(d=p.data.rawIndexOf(p.stackedByDimension,c)),0<=d){var m=p.data.getByRawIndex(p.stackResultDimension,d);if(0<=f&&0<m||f<=0&&m<0){f+=m,h=m;break}}}return i[0]=f,i[1]=h,i}));r.hostModel.setData(s),t.data=s}))}function ac(e,t){Cu.isInstance(e)||(e=Cu.seriesDataToSource(e)),this._source=e;var n=this._data=e.data,i=e.sourceFormat;i===Tu&&(this._offset=0,this._dimSize=t,this._data=n),b(this,lc[i===mu?i+"_"+e.seriesLayoutBy:i])}var sc=ac.prototype;sc.pure=!1;var lc={arrayRows_column:{pure:sc.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:dc},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],n=this._data,i=0;i<n.length;i++){var o=n[i];t.push(o?o[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:uc,getItem:cc,appendData:dc},keyedColumns:{pure:!0,count:function(){var e=this._data[this._source.dimensionsDefine[0].name];return e?e.length:0},getItem:function(e){for(var t=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var o=this._data[n[i].name];t.push(o?o[e]:null)}return t},appendData:function(e){var t=this._data;w(e,(function(e,n){for(var i=t[n]||(t[n]=[]),o=0;o<(e||[]).length;o++)i.push(e[o])}))}},original:{count:uc,getItem:cc,appendData:dc},typedArray:{persistent:!(sc.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){t=t||[];for(var n=this._dimSize*(e-=this._offset),i=0;i<this._dimSize;i++)t[i]=this._data[n+i];return t},appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function uc(){return this._data.length}function cc(e){return this._data[e]}function dc(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var fc={arrayRows:hc,objectRows:function(e,t,n,i){return null!=n?e[i]:e},keyedColumns:hc,original:function(e,t,n,i){var o=Ro(e);return null!=n&&o instanceof Array?o[n]:o},typedArray:hc};function hc(e,t,n,i){return null!=n?e[n]:e}var gc={arrayRows:pc,objectRows:function(e,t,n,i){return mc(e[t],this._dimensionInfos[t])},keyedColumns:pc,original:function(e,t,n,i){var o=e&&(null==e.value?e:e.value);return!this._rawData.pure&&function(e){return _o(e)&&!(e instanceof Array)}(e)&&(this.hasItemOption=!0),mc(o instanceof Array?o[i]:o,this._dimensionInfos[t])},typedArray:function(e,t,n,i){return e[i]}};function pc(e,t,n,i){return mc(e[i],this._dimensionInfos[t])}function mc(e,t){var n=t&&t.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+Il(e)),null==e||""===e?NaN:+e;var i=t&&t.ordinalMeta;return i?i.parseAndCollect(e):e}function vc(e,t,n){if(e){var i=e.getRawDataItem(t);if(null!=i){var o,r,a=e.getProvider().getSource().sourceFormat,s=e.getDimensionInfo(n);return s&&(o=s.name,r=s.index),fc[a](i,t,r,o)}}}function yc(e,t,n){if(e){var i=e.getProvider().getSource().sourceFormat;if(i===pu||i===vu){var o=e.getRawDataItem(t);return i!==pu||L(o)||(o=null),o?o[n]:void 0}}}var bc=/\{@(.+?)\}/g,Tc={getDataParams:function(e,t){var n=this.getData(t),i=this.getRawValue(e,t),o=n.getRawIndex(e),r=n.getName(e),a=n.getRawDataItem(e),s=n.getItemVisual(e,"color"),l=n.getItemVisual(e,"borderColor"),u=this.ecModel.getComponent("tooltip"),c=zo(u&&u.get("renderMode")),d=this.mainType,f="series"===d,h=n.userOutput;return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:r,dataIndex:o,data:a,dataType:t,value:i,color:s,borderColor:l,dimensionNames:h?h.dimensionNames:null,encode:h?h.encode:null,marker:Vl({color:s,renderMode:c}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,n,i,o){t=t||"normal";var r=this.getData(n),a=r.getItemModel(e),s=this.getDataParams(e,n);null!=i&&s.value instanceof Array&&(s.value=s.value[i]);var l=a.get("normal"===t?[o||"label","formatter"]:[t,o||"label","formatter"]);return"function"==typeof l?(s.status=t,s.dimensionIndex=i,l(s)):"string"==typeof l?zl(l,s).replace(bc,(function(t,n){var i=n.length;return"["===n.charAt(0)&&"]"===n.charAt(i-1)&&(n=+n.slice(1,i-1)),vc(r,e,n)})):void 0},getRawValue:function(e,t){return vc(this.getData(t),e)},formatTooltip:function(){}};function Cc(e){return new Ec(e)}function Ec(e){this._reset=(e=e||{}).reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}var _c=Ec.prototype;_c.perform=function(e){var t,n=this._upstream,i=e&&e.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(t=this._plan(this.context));var r,a=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;function c(e){return 1<=e||(e=1),e}a===l&&s===u||(t="reset"),!this._dirty&&"reset"!==t||(this._dirty=!1,r=function(e,t){var n,i;e._dueIndex=e._outputDueEnd=e._dueEnd=0,e._settedOutputEnd=null,!t&&e._reset&&((n=e._reset(e.context))&&n.progress&&(i=n.forceFirstProgress,n=n.progress),M(n)&&!n.length&&(n=null)),e._progress=n,e._modBy=e._modDataCount=null;var o=e._downstream;return o&&o.dirty(),i}(this,i)),this._modBy=l,this._modDataCount=u;var d=e&&e.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,h=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(r||f<h)){var g=this._progress;if(M(g))for(var p=0;p<g.length;p++)Nc(this,g[p],f,h,l,u);else Nc(this,g,f,h,l,u)}this._dueIndex=h,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:h}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var xc,Ic,Dc,wc,Oc,Rc,kc=Rc={reset:function(e,t,n,i){Ic=e,xc=t,Dc=n,wc=i,Oc=Math.ceil(wc/Dc),Rc.next=1<Dc&&0<wc?Ac:Sc}};function Sc(){return Ic<xc?Ic++:null}function Ac(){var e=Ic%Oc*Dc+Math.ceil(Ic/Oc),t=xc<=Ic?null:e<wc?e:Ic;return Ic++,t}function Nc(e,t,n,i,o,r){kc.reset(n,i,o,r),e._callingProgress=t,e._callingProgress({start:n,end:i,count:i-n,next:kc.next},e.context)}_c.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},_c.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},_c.pipe=function(e){this._downstream===e&&!this._dirty||((this._downstream=e)._upstream=this,e.dirty())},_c.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},_c.getUpstream=function(){return this._upstream},_c.getDownstream=function(){return this._downstream},_c.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var Mc=Ko(),Kc=uu.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Cc({count:Lc,reset:Bc}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),_u(this);var o=this.getInitialData(e,n);zc(o,this),this.dataTask.context.data=o,Mc(this).dataBeforeProcessed=o,Pc(this)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,i=n?iu(e):{},o=this.subType;uu.hasClass(o)&&(o+="Series"),v(e,t.getTheme().get(this.subType)),v(e,this.getDefaultOption()),wo(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&nu(e,i,n)},mergeOption:function(e,t){e=v(this.option,e,!0),this.fillDataTextStyle(e.data);var n=this.layoutMode;n&&nu(this.option,e,n),_u(this);var i=this.getInitialData(e,t);zc(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,Mc(this).dataBeforeProcessed=i,Pc(this)},fillDataTextStyle:function(e){if(e&&!F(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&wo(e[n],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=Vc(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return Mc(this).data},setData:function(e){var t=Vc(this);if(t){var n=t.context;n.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),n.outputData=e,t!==this.dataTask&&(n.data=e)}Mc(this).data=e},getSource:function(){return function(e){return Eu(e).source}(this)},getRawData:function(){return Mc(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,n,i){var o=this,r="html"===(i=i||"html")?"<br/>":"\n",a="richText"===i,s={},l=0,u=this.getData(),c=u.mapDimension("defaultedTooltip",!0),d=c.length,f=this.getRawValue(e),h=M(f),g=u.getItemVisual(e,"color");L(g)&&g.colorStops&&(g=(g.colorStops[0]||{}).color),g=g||"transparent";var p=(1<d||h&&!d?function(n){var r=R(n,(function(e,t,n){var i=u.getDimensionInfo(n);return e|(i&&!1!==i.tooltip&&null!=i.displayName)}),0),d=[];function f(e,n){var c=u.getDimensionInfo(n);if(c&&!1!==c.otherDims.tooltip){var f=c.type,h="sub"+o.seriesIndex+"at"+l,p=Vl({color:g,type:"subItem",renderMode:i,markerId:h}),m=(r?("string"==typeof p?p:p.content)+Ll(c.displayName||"-")+": ":"")+Ll("ordinal"===f?e+"":"time"===f?t?"":$l("yyyy/MM/dd hh:mm:ss",e):Al(e));m&&d.push(m),a&&(s[h]=g,++l)}}c.length?w(c,(function(t){f(vc(u,e,t),t)})):w(n,f);var h=r?a?"\n":"<br/>":"",p=h+d.join(h||", ");return{renderMode:i,content:p,style:s}}(f):function(e){return{renderMode:i,content:Ll(Al(e)),style:s}}(d?vc(u,e,c[0]):h?f[0]:f)).content,m=o.seriesIndex+"at"+l,v=Vl({color:g,type:"item",renderMode:i,markerId:m});s[m]=g,++l;var y=u.getName(e),b=this.name;Ao(this)||(b=""),b=b?Ll(b)+(t?": ":r):"";var T="string"==typeof v?v:v.content;return{html:t?T+b+p:b+T+(y?Ll(y)+": "+p:p),markers:s}},isAnimationEnabled:function(){if(o.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,n){var i=this.ecModel;return gu.getColorFromPalette.call(this,e,t,n)||i.getColorFromPalette(e,t,n)},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Pc(e){var t=e.name;Ao(e)||(e.name=function(e){var t=e.getRawData(),n=t.mapDimension("seriesName",!0),i=[];return w(n,(function(e){var n=t.getDimensionInfo(e);n.displayName&&i.push(n.displayName)})),i.join(" ")}(e)||t)}function Lc(e){return e.model.getRawData().count()}function Bc(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Fc}function Fc(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function zc(e,t){w(e.CHANGABLE_METHODS,(function(n){e.wrapMethod(n,N(Hc,t))}))}function Hc(e){var t=Vc(e);t&&t.setOutputEnd(this.count())}function Vc(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var i=n.currentTask;if(i){var o=i.agentStubMap;o&&(i=o.get(e.uid))}return i}}I(Kc,Tc),I(Kc,gu);var Wc=function(){this.group=new _n,this.uid=fl("viewComponent")},$c=Wc.prototype={constructor:Wc,init:function(e,t){},render:function(e,t,n,i){},dispose:function(){},filterForExposedEvent:null};function qc(){var e=Ko();return function(t){var n=e(t),i=t.pipelineContext,o=n.large,r=n.progressiveRender,a=n.large=i&&i.large,s=n.progressiveRender=i&&i.progressiveRender;return!!(o^a||r^s)&&"reset"}}$c.updateView=$c.updateLayout=$c.updateVisual=function(e,t,n,i){},$o(Wc),Xo(Wc,{registerWhenExtend:!0});var Uc=Ko(),jc=qc();function Gc(){this.group=new _n,this.uid=fl("viewChart"),this.renderTask=Cc({plan:Jc,reset:Qc}),this.renderTask.context={view:this}}var Xc=Gc.prototype={type:"chart",init:function(e,t){},render:function(e,t,n,i){},highlight:function(e,t,n,i){Zc(e.getData(),i,"emphasis")},downplay:function(e,t,n,i){Zc(e.getData(),i,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function Yc(e,t,n){if(e&&(e.trigger(t,n),e.isGroup&&!As(e)))for(var i=0,o=e.childCount();i<o;i++)Yc(e.childAt(i),t,n)}function Zc(e,t,n){var i=Mo(e,t),o=t&&null!=t.highlightKey?Ns(t.highlightKey):null;null!=i?w(Do(i),(function(t){Yc(e.getItemGraphicEl(t),n,o)})):e.eachItemGraphicEl((function(e){Yc(e,n,o)}))}function Jc(e){return jc(e.model)}function Qc(e){var t=e.model,n=e.ecModel,i=e.api,o=e.payload,r=t.pipelineContext.progressiveRender,a=e.view,s=o&&Uc(o).updateMethod,l=r?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](t,n,i,o),ed[l]}Xc.updateView=Xc.updateLayout=Xc.updateVisual=function(e,t,n,i){this.render(e,t,n,i)},$o(Gc),Xo(Gc,{registerWhenExtend:!0}),Gc.markUpdateMethod=function(e,t){Uc(e).updateMethod=t};var ed={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},td="\0__throttleOriginMethod",nd="\0__throttleRate",id="\0__throttleType";function od(e,t,n){var i,o,r,a,s,l=0,u=0,c=null;function d(){u=(new Date).getTime(),c=null,e.apply(r,a||[])}function f(){i=(new Date).getTime(),r=this,a=arguments;var e=s||t,f=s||n;s=null,o=i-(f?l:u)-e,clearTimeout(c),f?c=setTimeout(d,e):0<=o?d():c=setTimeout(d,-o),l=i}return t=t||0,f.clear=function(){c&&(clearTimeout(c),c=null)},f.debounceNextCall=function(e){s=e},f}function rd(e,t,n,i){var o=e[t];if(o){var r=o[td]||o;if(o[nd]!==n||o[id]!==i){if(null==n||!i)return e[t]=r;(o=e[t]=od(r,n,"debounce"===i))[td]=r,o[id]=i,o[nd]=n}return o}}function ad(e,t){var n=e[t];n&&n[td]&&(e[t]=n[td])}var sd={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),i=(e.visualColorAccessPath||"itemStyle.color").split("."),o=e.get(i),r=!K(o)||o instanceof Ua?null:o;o&&!r||(o=e.getColorFromPalette(e.name,null,t.getSeriesCount())),n.setVisual("color",o);var a=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),s=e.get(a);if(n.setVisual("borderColor",s),!t.isSeriesFiltered(e))return r&&n.each((function(t){n.setItemVisual(t,"color",r(e.getDataParams(t)))})),{dataEach:n.hasItemOption?function(e,t){var n=e.getItemModel(t),o=n.get(i,!0),r=n.get(a,!0);null!=o&&e.setItemVisual(t,"color",o),null!=r&&e.setItemVisual(t,"borderColor",r)}:null}}},ld={legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}},ud=Math.PI;function cd(e,t,n,i){this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i),this._stageTaskMap=Q()}var dd=cd.prototype;function fd(e,t,n,i,o){var r;function a(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}o=o||{},w(t,(function(t,s){if(!o.visualType||o.visualType===t.visualType){var l=e._stageTaskMap.get(t.uid),u=l.seriesTaskMap,c=l.overallTask;if(c){var d,f=c.agentStubMap;f.each((function(e){a(o,e)&&(e.dirty(),d=!0)})),d&&c.dirty(),hd(c,i);var h=e.getPerformArgs(c,o.block);f.each((function(e){e.perform(h)})),r|=c.perform(h)}else u&&u.each((function(s,l){a(o,s)&&s.dirty();var u=e.getPerformArgs(s,o.block);u.skip=!t.performRawSeries&&n.isSeriesFiltered(s.context.model),hd(s,i),r|=s.perform(u)}))}})),e.unfinished|=r}dd.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each((function(e){var t=e.overallTask;t&&t.dirty()}))},dd.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),i=n.context,o=!t&&n.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,r=i&&i.modDataCount;return{step:o,modBy:null!=r?Math.ceil(r/o):null,modDataCount:r}}},dd.getPipeline=function(e){return this._pipelineMap.get(e)},dd.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),i=e.getData().count(),o=n.progressiveEnabled&&t.incrementalPrepareRender&&i>=n.threshold,r=e.get("large")&&i>=e.get("largeThreshold"),a="mod"===e.get("progressiveChunkMode")?i:null;e.pipelineContext=n.context={progressiveRender:o,modDataCount:a,large:r}},dd.restorePipelines=function(e){var t=this,n=t._pipelineMap=Q();e.eachSeries((function(e){var i=e.getProgressive(),o=e.uid;n.set(o,{id:o,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:i&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),_d(t,e,e.dataTask)}))},dd.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),n=this.api;w(this._allHandlers,(function(i){var o=e.get(i.uid)||e.set(i.uid,[]);i.reset&&function(e,t,n,i,o){var r=n.seriesTaskMap||(n.seriesTaskMap=Q()),a=t.seriesType,s=t.getTargetSeries;function l(n){var a=n.uid,s=r.get(a)||r.set(a,Cc({plan:yd,reset:bd,count:Ed}));s.context={model:n,ecModel:i,api:o,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:e},_d(e,n,s)}t.createOnAllSeries?i.eachRawSeries(l):a?i.eachRawSeriesByType(a,l):s&&s(i,o).each(l);var u=e._pipelineMap;r.each((function(e,t){u.get(t)||(e.dispose(),r.removeKey(t))}))}(this,i,o,t,n),i.overallReset&&function(e,t,n,i,o){var r=n.overallTask=n.overallTask||Cc({reset:gd});r.context={ecModel:i,api:o,overallReset:t.overallReset,scheduler:e};var a=r.agentStubMap=r.agentStubMap||Q(),s=t.seriesType,l=t.getTargetSeries,u=!0,c=t.modifyOutputEnd;function d(t){var n=t.uid,i=a.get(n);i||(i=a.set(n,Cc({reset:pd,onDirty:vd})),r.dirty()),i.context={model:t,overallProgress:u,modifyOutputEnd:c},i.agent=r,i.__block=u,_d(e,t,i)}s?i.eachRawSeriesByType(s,d):l?l(i,o).each(d):(u=!1,w(i.getSeries(),d));var f=e._pipelineMap;a.each((function(e,t){f.get(t)||(e.dispose(),r.dirty(),a.removeKey(t))}))}(this,i,o,t,n)}),this)},dd.prepareView=function(e,t,n,i){var o=e.renderTask,r=o.context;r.model=t,r.ecModel=n,r.api=i,o.__block=!e.incrementalPrepareRender,_d(this,t,o)},dd.performDataProcessorTasks=function(e,t){fd(this,this._dataProcessorHandlers,e,t,{block:!0})},dd.performVisualTasks=function(e,t,n){fd(this,this._visualHandlers,e,t,n)},dd.performSeriesTasks=function(e){var t;e.eachSeries((function(e){t|=e.dataTask.perform()})),this.unfinished|=t},dd.plan=function(){this._pipelineMap.each((function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)}))};var hd=dd.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function gd(e){e.overallReset(e.ecModel,e.api,e.payload)}function pd(e,t){return e.overallProgress&&md}function md(){this.agent.dirty(),this.getDownstream().dirty()}function vd(){this.agent&&this.agent.dirty()}function yd(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function bd(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Do(e.reset(e.model,e.ecModel,e.api,e.payload));return 1<t.length?O(t,(function(e,t){return Cd(t)})):Td}var Td=Cd(0);function Cd(e){return function(t,n){var i=n.data,o=n.resetDefines[e];if(o&&o.dataEach)for(var r=t.start;r<t.end;r++)o.dataEach(i,r);else o&&o.progress&&o.progress(t,i)}}function Ed(e){return e.data.count()}function _d(e,t,n){var i=e._pipelineMap.get(t.uid);i.head||(i.head=n),i.tail&&i.tail.pipe(n),(i.tail=n).__idxInPipeline=i.count++,n.__pipeline=i}cd.wrapStageHandler=function(e,t){return K(e)&&(e={overallReset:e,seriesType:function(e){xd=null;try{e(Id,Dd)}catch(e){}return xd}(e)}),e.uid=fl("stageHandler"),t&&(e.visualType=t),e};var xd,Id={},Dd={};function wd(e,t){for(var n in t.prototype)e[n]=te}function Od(){return{axisLine:{lineStyle:{color:Sd}},axisTick:{lineStyle:{color:Sd}},axisLabel:{textStyle:{color:Sd}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:Sd}}}}wd(Id,Su),wd(Dd,Ku),Id.eachSeriesByType=Id.eachRawSeriesByType=function(e){xd=e},Id.eachComponent=function(e){"series"===e.mainType&&e.subType&&(xd=e.subType)};var Rd=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],kd={color:Rd,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Rd]},Sd="#eee",Ad=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Nd={color:Ad,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:Sd},crossStyle:{color:Sd},label:{color:"#000"}}},legend:{textStyle:{color:Sd}},textStyle:{color:Sd},title:{textStyle:{color:Sd}},toolbox:{iconStyle:{normal:{borderColor:Sd}}},dataZoom:{textStyle:{color:Sd}},visualMap:{textStyle:{color:Sd}},timeline:{lineStyle:{color:Sd},itemStyle:{normal:{color:Ad[1]}},label:{normal:{textStyle:{color:Sd}}},controlStyle:{normal:{color:Sd,borderColor:Sd}}},timeAxis:Od(),logAxis:Od(),valueAxis:Od(),categoryAxis:Od(),line:{symbol:"circle"},graph:{color:Ad},gauge:{title:{textStyle:{color:Sd}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Nd.categoryAxis.splitLine.show=!1,uu.extend({type:"dataset",defaultOption:{seriesLayoutBy:"column",sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,n=bu;if(F(t))n=Tu;else if(M(t)){0===t.length&&(n=mu);for(var i=0,o=t.length;i<o;i++){var r=t[i];if(null!=r){if(M(r)){n=mu;break}if(L(r)){n=vu;break}}}}else if(L(t)){for(var a in t)if(t.hasOwnProperty(a)&&D(t[a])){n=yu;break}}else if(null!=t)throw new Error("Invalid data");Eu(e).sourceFormat=n}(this)}}),Wc.extend({type:"dataset"});var Md=ua.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var n=t.cx,i=t.cy,o=t.rx,r=t.ry,a=.5522848*o,s=.5522848*r;e.moveTo(n-o,i),e.bezierCurveTo(n-o,i-s,n-a,i-r,n,i-r),e.bezierCurveTo(n+a,i-r,n+o,i-s,n+o,i),e.bezierCurveTo(n+o,i+s,n+a,i+r,n,i+r),e.bezierCurveTo(n-a,i+r,n-o,i+s,n-o,i),e.closePath()}}),Kd=/[\s,]+/;function Pd(e){for(P(e)&&(e=(new DOMParser).parseFromString(e,"text/xml")),9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}function Ld(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}Ld.prototype.parse=function(e,t){t=t||{};var n=Pd(e);if(!n)throw new Error("Illegal svg");var i=new _n;this._root=i;var o=n.getAttribute("viewBox")||"",r=parseFloat(n.getAttribute("width")||t.width),a=parseFloat(n.getAttribute("height")||t.height);isNaN(r)&&(r=null),isNaN(a)&&(a=null),Wd(n,i,null,!0);for(var s,l,u=n.firstChild;u;)this._parseNode(u,i),u=u.nextSibling;if(o){var c=G(o).split(Kd);4<=c.length&&(s={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(s&&null!=r&&null!=a&&(l=Gd(s,r,a),!t.ignoreViewBox)){var d=i;(i=new _n).add(d),d.scale=l.scale.slice(),d.position=l.position.slice()}return t.ignoreRootClip||null==r||null==a||i.setClipPath(new Ha({shape:{x:0,y:0,width:r,height:a}})),{root:i,width:r,height:a,viewBoxRect:s,viewBoxTransform:l}},Ld.prototype._parseNode=function(e,t){var n,i,o=e.nodeName.toLowerCase();if("defs"===o?this._isDefine=!0:"text"===o&&(this._isText=!0),this._isDefine){if(i=Fd[o]){var r=i.call(this,e),a=e.getAttribute("id");a&&(this._defs[a]=r)}}else(i=Bd[o])&&(n=i.call(this,e,t),t.add(n));for(var s=e.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===o?this._isDefine=!1:"text"===o&&(this._isText=!1)},Ld.prototype._parseText=function(e,t){if(1===e.nodeType){var n=e.getAttribute("dx")||0,i=e.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(i)}var o=new Da({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});zd(t,o),Wd(e,o,this._defs);var r=o.style.fontSize;r&&r<9&&(o.style.fontSize=9,o.scale=o.scale||[1,1],o.scale[0]*=r/9,o.scale[1]*=r/9);var a=o.getBoundingRect();return this._textX+=a.width,t.add(o),o};var Bd={g:function(e,t){var n=new _n;return zd(t,n),Wd(e,n,this._defs),n},rect:function(e,t){var n=new Ha;return zd(t,n),Wd(e,n,this._defs),n.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),n},circle:function(e,t){var n=new Oa;return zd(t,n),Wd(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),n},line:function(e,t){var n=new Wa;return zd(t,n),Wd(e,n,this._defs),n.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),n},ellipse:function(e,t){var n=new Md;return zd(t,n),Wd(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),n},polygon:function(e,t){var n=e.getAttribute("points");n=n&&Hd(n);var i=new Ma({shape:{points:n||[]}});return zd(t,i),Wd(e,i,this._defs),i},polyline:function(e,t){var n=new ua;zd(t,n),Wd(e,n,this._defs);var i=e.getAttribute("points");return i=i&&Hd(i),new Ka({shape:{points:i||[]}})},image:function(e,t){var n=new Hi;return zd(t,n),Wd(e,n,this._defs),n.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),n},text:function(e,t){var n=e.getAttribute("x")||0,i=e.getAttribute("y")||0,o=e.getAttribute("dx")||0,r=e.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(i)+parseFloat(r);var a=new _n;return zd(t,a),Wd(e,a,this._defs),a},tspan:function(e,t){var n=e.getAttribute("x"),i=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var o=e.getAttribute("dx")||0,r=e.getAttribute("dy")||0,a=new _n;return zd(t,a),Wd(e,a,this._defs),this._textX+=o,this._textY+=r,a},path:function(e,t){var n=Ia(e.getAttribute("d")||"");return zd(t,n),Wd(e,n,this._defs),n}},Fd={lineargradient:function(e){var t=new Ya(parseInt(e.getAttribute("x1")||0,10),parseInt(e.getAttribute("y1")||0,10),parseInt(e.getAttribute("x2")||10,10),parseInt(e.getAttribute("y2")||0,10));return function(e,t){for(var n=e.firstChild;n;){if(1===n.nodeType){var i=n.getAttribute("offset");i=0<i.indexOf("%")?parseInt(i,10)/100:i?parseFloat(i):0;var o=n.getAttribute("stop-color")||"#000000";t.addColorStop(i,o)}n=n.nextSibling}}(e,t),t},radialgradient:function(e){}};function zd(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),T(t.__inheritedStyle,e.__inheritedStyle))}function Hd(e){for(var t=G(e).split(Kd),n=[],i=0;i<t.length;i+=2){var o=parseFloat(t[i]),r=parseFloat(t[i+1]);n.push([o,r])}return n}var Vd={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function Wd(e,t,n,i){var o=t.__inheritedStyle||{},r="text"===t.type;if(1===e.nodeType&&(function(e,t){var n=e.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=null,o=[];n.replace(Ud,(function(e,t,n){o.push(t,n)}));for(var r=o.length-1;0<r;r-=2){var a=o[r],s=o[r-1];switch(i=i||nt(),s){case"translate":a=G(a).split(Kd),at(i,i,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=G(a).split(Kd),lt(i,i,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=G(a).split(Kd),st(i,i,parseFloat(a[0]));break;case"skew":a=G(a).split(Kd),console.warn("Skew transform is not supported yet");break;case"matrix":a=G(a).split(Kd),i[0]=parseFloat(a[0]),i[1]=parseFloat(a[1]),i[2]=parseFloat(a[2]),i[3]=parseFloat(a[3]),i[4]=parseFloat(a[4]),i[5]=parseFloat(a[5])}}t.setLocalTransform(i)}}(e,t),b(o,function(e){var t=e.getAttribute("style"),n={};if(!t)return n;var i,o={};for(jd.lastIndex=0;null!=(i=jd.exec(t));)o[i[1]]=i[2];for(var r in Vd)Vd.hasOwnProperty(r)&&null!=o[r]&&(n[Vd[r]]=o[r]);return n}(e)),!i))for(var a in Vd)if(Vd.hasOwnProperty(a)){var s=e.getAttribute(a);null!=s&&(o[Vd[a]]=s)}var l=r?"textFill":"fill",u=r?"textStroke":"stroke";t.style=t.style||new Kn;var c=t.style;null!=o.fill&&c.set(l,qd(o.fill,n)),null!=o.stroke&&c.set(u,qd(o.stroke,n)),w(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(e){null!=o[e]&&c.set("lineWidth"===e&&r?"textStrokeWidth":e,parseFloat(o[e]))})),o.textBaseline&&"auto"!==o.textBaseline||(o.textBaseline="alphabetic"),"alphabetic"===o.textBaseline&&(o.textBaseline="bottom"),"start"===o.textAlign&&(o.textAlign="left"),"end"===o.textAlign&&(o.textAlign="right"),w(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],(function(e){null!=o[e]&&c.set(e,o[e])})),o.lineDash&&(t.style.lineDash=G(o.lineDash).split(Kd)),c[u]&&"none"!==c[u]&&(t[u]=!0),t.__inheritedStyle=o}var $d=/url\(\s*#(.*?)\)/;function qd(e,t){var n=t&&e&&e.match($d);return n?t[G(n[1])]:e}var Ud=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,jd=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Gd(e,t,n){var i=Math.min(t/e.width,n/e.height);return{scale:[i,i],position:[-(e.x+e.width/2)*i+t/2,-(e.y+e.height/2)*i+n/2]}}var Xd=Q(),Yd=function(e){return Xd.get(e)},Zd={geoJSON:function(e){var t=e.source;e.geoJSON=P(t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=Pd(e.source)}},Jd=j,Qd=w,ef=K,tf=L,nf=uu.parseClassType,of={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},rf="__flagInMainProcess",af="__optionUpdated",sf=/^[a-zA-Z0-9_]+$/;function lf(e,t){return function(n,i,o){!t&&this._disposed||(n=n&&n.toLowerCase(),we.prototype[e].call(this,n,i,o))}}function uf(){we.call(this)}function cf(e,t,n){n=n||{},"string"==typeof t&&(t=Mf[t]),this._dom=e;var i=this._zr=yo(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=od(A(i.flush,i),17),(t=m(t))&&oc(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new Lu;var o=this._api=function(e){var t=e._coordSysMgr;return b(new Ku(e),{getCoordinateSystems:A(t.getCoordinateSystems,t),getComponentByElement:function(t){for(;t;){var n=t.__ecComponentInfo;if(null!=n)return e._model.getComponent(n.mainType,n.index);t=t.parent}}})}(this);function r(e,t){return e.__prio-t.__prio}Rn(Nf,r),Rn(kf,r),this._scheduler=new cd(this,o,kf,Nf),we.call(this,this._ecEventProcessor=new wf),this._messageCenter=new uf,this._initEvents(),this.resize=A(this.resize,this),this._pendingActions=[],i.animation.on("frame",this._onframe,this),function(e,t){e.on("rendered",(function(){t.trigger("rendered"),!e.animation.isFinished()||t[af]||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")}))}(i,this),Y(this)}uf.prototype.on=lf("on",!0),uf.prototype.off=lf("off",!0),uf.prototype.one=lf("one",!0),I(uf,we);var df=cf.prototype;function ff(e,t,n){if(!this._disposed){var i,o=this._model,r=this._coordSysMgr.getCoordinateSystems();t=Lo(o,t);for(var a=0;a<r.length;a++){var s=r[a];if(s[e]&&null!=(i=s[e](o,t,n)))return i}}}df._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[af]){var t=this[af].silent;this[rf]=!0,gf(this),hf.update.call(this),this[rf]=!1,this[af]=!1,yf.call(this,t),bf.call(this,t)}else if(e.unfinished){var n=1,i=this._model;e.unfinished=!1;do{var o=+new Date;e.performSeriesTasks(i),e.performDataProcessorTasks(i),mf(this,i),e.performVisualTasks(i),_f(this,this._model,0,"remain"),n-=+new Date-o}while(0<n&&e.unfinished);e.unfinished||this._zr.flush()}}},df.getDom=function(){return this._dom},df.getZr=function(){return this._zr},df.setOption=function(e,t,n){if(!this._disposed){var i;if(tf(t)&&(n=t.lazyUpdate,i=t.silent,t=t.notMerge),this[rf]=!0,!this._model||t){var o=new Wu(this._api),r=this._theme,a=this._model=new Su;a.scheduler=this._scheduler,a.init(null,null,r,o)}this._model.setOption(e,Sf),n?(this[af]={silent:i},this[rf]=!1):(gf(this),hf.update.call(this),this._zr.flush(),this[af]=!1,this[rf]=!1,yf.call(this,i),bf.call(this,i))}},df.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},df.getModel=function(){return this._model},df.getOption=function(){return this._model&&this._model.getOption()},df.getWidth=function(){return this._zr.getWidth()},df.getHeight=function(){return this._zr.getHeight()},df.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},df.getRenderedCanvas=function(e){if(o.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},df.getSvgDataURL=function(){if(o.svgSupported){var e=this._zr;return w(e.storage.getDisplayList(),(function(e){e.stopAnimation(!0)})),e.painter.toDataURL()}},df.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,i=[],o=this;Qd(t,(function(e){n.eachComponent({mainType:e},(function(e){var t=o._componentsMap[e.__viewId];t.group.ignore||(i.push(t),t.group.ignore=!0)}))}));var r="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Qd(i,(function(e){e.group.ignore=!1})),r}},df.getConnectedDataURL=function(e){if(!this._disposed&&o.canvasSupported){var t="svg"===e.type,n=this.group,i=Math.min,r=Math.max;if(Lf[n]){var a=1/0,s=1/0,l=-1/0,u=-1/0,c=[],d=e&&e.pixelRatio||1;w(Pf,(function(o,d){if(o.group===n){var f=t?o.getZr().painter.getSvgDom().innerHTML:o.getRenderedCanvas(m(e)),h=o.getDom().getBoundingClientRect();a=i(h.left,a),s=i(h.top,s),l=r(h.right,l),u=r(h.bottom,u),c.push({dom:f,left:h.left,top:h.top})}}));var f=(l*=d)-(a*=d),h=(u*=d)-(s*=d),g=C(),p=yo(g,{renderer:t?"svg":"canvas"});if(p.resize({width:f,height:h}),t){var v="";return Qd(c,(function(e){v+='<g transform="translate('+(e.left-a)+","+(e.top-s)+')">'+e.dom+"</g>"})),p.painter.getSvgRoot().innerHTML=v,e.connectedBackgroundColor&&p.painter.setBackgroundColor(e.connectedBackgroundColor),p.refreshImmediately(),p.painter.toDataURL()}return e.connectedBackgroundColor&&p.add(new Ha({shape:{x:0,y:0,width:f,height:h},style:{fill:e.connectedBackgroundColor}})),Qd(c,(function(e){var t=new Hi({style:{x:e.left*d-a,y:e.top*d-s,image:e.dom}});p.add(t)})),p.refreshImmediately(),g.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},df.convertToPixel=N(ff,"convertToPixel"),df.convertFromPixel=N(ff,"convertFromPixel"),df.containPixel=function(e,t){var n;if(!this._disposed)return w(e=Lo(this._model,e),(function(e,i){0<=i.indexOf("Models")&&w(e,(function(e){var o=e.coordinateSystem;if(o&&o.containPoint)n|=!!o.containPoint(t);else if("seriesModels"===i){var r=this._chartsMap[e.__viewId];r&&r.containPoint&&(n|=r.containPoint(t,e))}}),this)}),this),!!n},df.getVisual=function(e,t){var n=(e=Lo(this._model,e,{defaultMainType:"series"})).seriesModel.getData(),i=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?n.indexOfRawIndex(e.dataIndex):null;return null!=i?n.getItemVisual(i,t):n.getVisual(t)},df.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},df.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var hf={prepareAndUpdate:function(e){gf(this),hf.update.call(this,e)},update:function(e){var t=this._model,n=this._api,i=this._zr,r=this._coordSysMgr,a=this._scheduler;if(t){a.restoreData(t,e),a.performSeriesTasks(t),r.create(t,n),a.performDataProcessorTasks(t,e),mf(this,t),r.update(t,n),Cf(t),a.performVisualTasks(t,e),Ef(this,t,n,e);var s=t.get("backgroundColor")||"transparent";if(o.canvasSupported)i.setBackgroundColor(s);else{var l=Bt(s);s=Ut(l,"rgb"),0===l[3]&&(s="transparent")}xf(t,n)}},updateTransform:function(e){var t=this._model,n=this,i=this._api;if(t){var o=[];t.eachComponent((function(r,a){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(a,t,i,e);l&&l.update&&o.push(s)}else o.push(s)}));var r=Q();t.eachSeries((function(o){var a=n._chartsMap[o.__viewId];if(a.updateTransform){var s=a.updateTransform(o,t,i,e);s&&s.update&&r.set(o.uid,1)}else r.set(o.uid,1)})),Cf(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:r}),_f(n,t,0,e,r),xf(t,this._api)}},updateView:function(e){var t=this._model;t&&(Gc.markUpdateMethod(e,"updateView"),Cf(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),Ef(this,this._model,this._api,e),xf(t,this._api))},updateVisual:function(e){hf.update.call(this,e)},updateLayout:function(e){hf.update.call(this,e)}};function gf(e){var t=e._model,n=e._scheduler;n.restorePipelines(t),n.prepareStageTasks(),Tf(e,"component",t,n),Tf(e,"chart",t,n),n.plan()}function pf(e,t,n,i,o){var r=e._model;if(i){var a={};a[i+"Id"]=n[i+"Id"],a[i+"Index"]=n[i+"Index"],a[i+"Name"]=n[i+"Name"];var s={mainType:i,query:a};o&&(s.subType=o);var l=n.excludeSeriesId;null!=l&&(l=Q(Do(l))),r&&r.eachComponent(s,(function(t){l&&null!=l.get(t.id)||u(e["series"===i?"_chartsMap":"_componentsMap"][t.__viewId])}),e)}else Qd(e._componentsViews.concat(e._chartsViews),u);function u(i){i&&i.__alive&&i[t]&&i[t](i.__model,r,e._api,n)}}function mf(e,t){var n=e._chartsMap,i=e._scheduler;t.eachSeries((function(e){i.updateStreamModes(e,n[e.__viewId])}))}function vf(e,t){var n=e.type,i=e.escapeConnect,o=Of[n],r=o.actionInfo,a=(r.update||"update").split(":"),s=a.pop();a=null!=a[0]&&nf(a[0]),this[rf]=!0;var l=[e],u=!1;e.batch&&(u=!0,l=O(e.batch,(function(t){return(t=T(b({},t),e)).batch=null,t})));var c,d=[],f="highlight"===n||"downplay"===n;Qd(l,(function(e){(c=(c=o.action(e,this._model,this._api))||b({},e)).type=r.event||c.type,d.push(c),f?pf(this,s,e,"series"):a&&pf(this,s,e,a.main,a.sub)}),this),"none"===s||f||a||(this[af]?(gf(this),hf.update.call(this,e),this[af]=!1):hf[s].call(this,e)),c=u?{type:r.event||n,escapeConnect:i,batch:d}:d[0],this[rf]=!1,t||this._messageCenter.trigger(c.type,c)}function yf(e){for(var t=this._pendingActions;t.length;){var n=t.shift();vf.call(this,n,e)}}function bf(e){e||this.trigger("updated")}function Tf(e,t,n,i){for(var o="component"===t,r=o?e._componentsViews:e._chartsViews,a=o?e._componentsMap:e._chartsMap,s=e._zr,l=e._api,u=0;u<r.length;u++)r[u].__alive=!1;function c(e){var t="_ec_"+e.id+"_"+e.type,u=a[t];if(!u){var c=nf(e.type);(u=new(o?Wc.getClass(c.main,c.sub):Gc.getClass(c.sub))).init(n,l),a[t]=u,r.push(u),s.add(u.group)}e.__viewId=u.__id=t,u.__alive=!0,u.__model=e,u.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},o||i.prepareView(u,e,n,l)}for(o?n.eachComponent((function(e,t){"series"!==e&&c(t)})):n.eachSeries(c),u=0;u<r.length;){var d=r[u];d.__alive?u++:(o||d.renderTask.dispose(),s.remove(d.group),d.dispose(n,l),r.splice(u,1),delete a[d.__id],d.__id=d.group.__ecComponentInfo=null)}}function Cf(e){e.clearColorPalette(),e.eachSeries((function(e){e.clearColorPalette()}))}function Ef(e,t,n,i){!function(e,t,n,i,o){Qd(e._componentsViews,(function(e){var o=e.__model;e.render(o,t,n,i),Df(o,e)}))}(e,t,n,i),Qd(e._chartsViews,(function(e){e.__alive=!1})),_f(e,t,0,i),Qd(e._chartsViews,(function(e){e.__alive||e.remove(t,n)}))}function _f(e,t,n,i,r){var a,s=e._scheduler;t.eachSeries((function(t){var n=e._chartsMap[t.__viewId];n.__alive=!0;var o=n.renderTask;s.updatePayload(o,i),r&&r.get(t.uid)&&o.dirty(),a|=o.perform(s.getPerformArgs(o)),n.group.silent=!!t.get("silent"),Df(t,n),function(e,t){var n=e.get("blendMode")||null;t.group.traverse((function(e){e.isGroup||e.style.blend!==n&&e.setStyle("blend",n),e.eachPendingDisplayable&&e.eachPendingDisplayable((function(e){e.setStyle("blend",n)}))}))}(t,n)})),s.unfinished|=a,function(e,t){var n=0;e._zr.storage.traverse((function(e){n++})),n>t.get("hoverLayerThreshold")&&!o.node&&t.eachSeries((function(t){if(!t.preventUsingHoverLayer){var n=e._chartsMap[t.__viewId];n.__alive&&n.group.traverse((function(e){e.useHoverLayer=!0}))}}))}(e,t),function(e,t){var n=t.getModel("aria");if(n.get("show"))if(n.get("description"))e.setAttribute("aria-label",n.get("description"));else{var i=0;t.eachSeries((function(e,t){++i}),this);var o,r=n.get("data.maxCount")||10,a=n.get("series.maxCount")||10,s=Math.min(i,a);if(!(i<1)){var l=function(){var e=t.getModel("title").option;return e&&e.length&&(e=e[0]),e&&e.text}();o=l?c(d("general.withTitle"),{title:l}):d("general.withoutTitle");var u=[];o+=c(d(1<i?"series.multiple.prefix":"series.single.prefix"),{seriesCount:i}),t.eachSeries((function(e,t){if(t<s){var n,o=e.get("name"),a="series."+(1<i?"multiple":"single")+".";n=c(n=d(o?a+"withName":a+"withoutName"),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:function(e){return ld.series.typeNames[e]||"自定义图"}(e.subType)});var l=e.getData();(window.data=l).count()>r?n+=c(d("data.partialData"),{displayCnt:r}):n+=d("data.allData");for(var f=[],h=0;h<l.count();h++)if(h<r){var g=l.getName(h),p=vc(l,h);f.push(c(d(g?"data.withName":"data.withoutName"),{name:g,value:p}))}n+=f.join(d("data.separator.middle"))+d("data.separator.end"),u.push(n)}})),o+=u.join(d("series.multiple.separator.middle"))+d("series.multiple.separator.end"),e.setAttribute("aria-label",o)}}function c(e,t){if("string"!=typeof e)return e;var n=e;return w(t,(function(e,t){n=n.replace(new RegExp("\\{\\s*"+t+"\\s*\\}","g"),e)})),n}function d(e){var t=n.get(e);if(null!=t)return t;for(var i=e.split("."),o=ld.aria,r=0;r<i.length;++r)o=o[i[r]];return o}}(e._zr.dom,t)}function xf(e,t){Qd(Af,(function(n){n(e,t)}))}df.resize=function(e){if(!this._disposed){this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),i=e&&e.silent;this[rf]=!0,n&&gf(this),hf.update.call(this),this[rf]=!1,yf.call(this,i),bf.call(this,i)}}},df.showLoading=function(e,t){if(!this._disposed&&(tf(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),Kf[e])){var n=Kf[e](this._api,t),i=this._zr;this._loadingFX=n,i.add(n)}},df.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},df.makeActionFromEvent=function(e){var t=b({},e);return t.type=Rf[e.type],t},df.dispatchAction=function(e,t){this._disposed||(tf(t)||(t={silent:!!t}),Of[e.type]&&this._model&&(this[rf]?this._pendingActions.push(e):(vf.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&o.browser.weChat&&this._throttledZrFlush(),yf.call(this,t.silent),bf.call(this,t.silent))))},df.appendData=function(e){if(!this._disposed){var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0}},df.on=lf("on",!1),df.off=lf("off",!1),df.one=lf("one",!1);var If=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Df(e,t){var n=e.get("z"),i=e.get("zlevel");t.group.traverse((function(e){"group"!==e.type&&(null!=n&&(e.z=n),null!=i&&(e.zlevel=i))}))}function wf(){}df._initEvents=function(){Qd(If,(function(e){function t(t){var n,i=this.getModel(),o=t.target;if("globalout"===e)n={};else if(o&&null!=o.dataIndex){var r=o.dataModel||i.getSeriesByIndex(o.seriesIndex);n=r&&r.getDataParams(o.dataIndex,o.dataType,o)||{}}else o&&o.eventData&&(n=b({},o.eventData));if(n){var a=n.componentType,s=n.componentIndex;"markLine"!==a&&"markPoint"!==a&&"markArea"!==a||(a="series",s=n.seriesIndex);var l=a&&null!=s&&i.getComponent(a,s),u=l&&this["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=t,n.type=e,this._ecEventProcessor.eventInfo={targetEl:o,packedEvent:n,model:l,view:u},this.trigger(e,n)}}t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)}),this),Qd(Rf,(function(e,t){this._messageCenter.on(t,(function(e){this.trigger(t,e)}),this)}),this)},df.isDisposed=function(){return this._disposed},df.clear=function(){this._disposed||this.setOption({series:[]},!0)},df.dispose=function(){if(!this._disposed){this._disposed=!0,Fo(this.getDom(),zf,"");var e=this._api,t=this._model;Qd(this._componentsViews,(function(n){n.dispose(t,e)})),Qd(this._chartsViews,(function(n){n.dispose(t,e)})),this._zr.dispose(),delete Pf[this.id]}},I(cf,we),wf.prototype={constructor:wf,normalizeQuery:function(e){var t={},n={},i={};if(P(e)){var o=nf(e);t.mainType=o.main||null,t.subType=o.sub||null}else{var r=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};w(e,(function(e,o){for(var s=!1,l=0;l<r.length;l++){var u=r[l],c=o.lastIndexOf(u);if(0<c&&c===o.length-u.length){var d=o.slice(0,c);"data"!==d&&(t.mainType=d,t[u.toLowerCase()]=e,s=!0)}}a.hasOwnProperty(o)&&(n[o]=e,s=!0),s||(i[o]=e)}))}return{cptQuery:t,dataQuery:n,otherQuery:i}},filter:function(e,t,n){var i=this.eventInfo;if(!i)return!0;var o=i.targetEl,r=i.packedEvent,a=i.model,s=i.view;if(!a||!s)return!0;var l=t.cptQuery,u=t.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,r,"name")&&c(u,r,"dataIndex")&&c(u,r,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,o,r));function c(e,t,n,i){return null==e[n]||t[i||n]===e[n]}},afterTrigger:function(){this.eventInfo=null}};var Of={},Rf={},kf=[],Sf=[],Af=[],Nf=[],Mf={},Kf={},Pf={},Lf={},Bf=new Date-0,Ff=new Date-0,zf="_echarts_instance_";function Hf(e){Lf[e]=!1}var Vf=Hf;function Wf(e){return Pf[function(e,t){return e.getAttribute?e.getAttribute(t):e[t]}(e,zf)]}function $f(e,t){Mf[e]=t}function qf(e){Sf.push(e)}function Uf(e,t){Zf(kf,e,t,1e3)}function jf(e,t,n){"function"==typeof t&&(n=t,t="");var i=tf(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,Jd(sf.test(i)&&sf.test(t)),Of[i]||(Of[i]={action:n,actionInfo:e}),Rf[t]=i}function Gf(e,t){Lu.register(e,t)}function Xf(e,t){Zf(Nf,e,t,1e3,"layout")}function Yf(e,t){Zf(Nf,e,t,3e3,"visual")}function Zf(e,t,n,i,o){(ef(t)||tf(t))&&(n=t,t=i);var r=cd.wrapStageHandler(n,o);return r.__prio=t,r.__raw=n,e.push(r),r}function Jf(e,t){Kf[e]=t}function Qf(e){return uu.extend(e)}function eh(e){return Wc.extend(e)}function th(e){return Kc.extend(e)}function nh(e){return Gc.extend(e)}function ih(e){return e}function oh(e,t,n,i,o){this._old=e,this._new=t,this._oldKeyGetter=n||ih,this._newKeyGetter=i||ih,this.context=o}function rh(e,t,n,i,o){for(var r=0;r<e.length;r++){var a="_ec_"+o[i](e[r],r),s=t[a];null==s?(n.push(a),t[a]=r):(s.length||(t[a]=s=[s]),s.push(r))}}Yf(2e3,sd),qf(oc),Uf(900,(function(e){var t=Q();e.eachSeries((function(e){var n=e.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=e.getData(),r={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:e};if(!r.stackedDimension||!r.isStackedByIndex&&!r.stackedByDimension)return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(r)}})),t.each(rc)})),Jf("default",(function(e,t){T(t=t||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new _n,i=new Ha({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(i);var o=t.fontSize+" sans-serif",r=new Ha({style:{fill:"none",text:t.text,font:o,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(n.add(r),t.showSpinner){var a=new Ga({shape:{startAngle:-ud/2,endAngle:-ud/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*ud/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*ud/2}).delay(300).start("circularInOut"),n.add(a)}return n.resize=function(){var n=ni(t.text,o),s=t.showSpinner?t.spinnerRadius:0,l=(e.getWidth()-2*s-(t.showSpinner&&n?10:0)-n)/2-(t.showSpinner?0:n/2),u=e.getHeight()/2;t.showSpinner&&a.setShape({cx:l,cy:u}),r.setShape({x:l-s,y:u-s,width:2*s,height:2*s}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n})),jf({type:"highlight",event:"highlight",update:"highlight"},te),jf({type:"downplay",event:"downplay",update:"downplay"},te),$f("light",kd),$f("dark",Nd),oh.prototype={constructor:oh,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,n={},i=[],o=[];for(rh(e,{},i,"_oldKeyGetter",this),rh(t,n,o,"_newKeyGetter",this),r=0;r<e.length;r++)null!=(s=n[a=i[r]])?((u=s.length)?(1===u&&(n[a]=null),s=s.shift()):n[a]=null,this._update&&this._update(s,r)):this._remove&&this._remove(r);for(var r=0;r<o.length;r++){var a=o[r];if(n.hasOwnProperty(a)){var s;if(null==(s=n[a]))continue;if(s.length)for(var l=0,u=s.length;l<u;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var ah=Q(["tooltip","label","itemName","itemId","seriesName"]);function sh(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function lh(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function uh(e){null!=e&&b(this,e),this.otherDims={}}var ch=L,dh="undefined",fh={float:typeof Float64Array==dh?Array:Float64Array,int:typeof Int32Array==dh?Array:Int32Array,ordinal:Array,number:Array,time:Array},hh=typeof Uint32Array==dh?Array:Uint32Array,gh=typeof Int32Array==dh?Array:Int32Array,ph=typeof Uint16Array==dh?Array:Uint16Array;function mh(e){return 65535<e._rawCount?hh:ph}var vh=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],yh=["_extent","_approximateExtent","_rawExtent"];function bh(e,t){w(vh.concat(t.__wrappedMethods||[]),(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e.__wrappedMethods=t.__wrappedMethods,w(yh,(function(n){e[n]=m(t[n])})),e._calculationInfo=b(t._calculationInfo)}var Th=function(e,t){e=e||["x","y"];for(var n={},i=[],o={},r=0;r<e.length;r++){var a=e[r];P(a)?a=new uh({name:a}):a instanceof uh||(a=new uh(a));var s=a.name;a.type=a.type||"float",a.coordDim||(a.coordDim=s,a.coordDimIndex=0),a.otherDims=a.otherDims||{},i.push(s),(n[s]=a).index=r,a.createInvertedIndices&&(o[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=t,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(e){var t={},n=t.encode={},i=Q(),o=[],r=[],a=t.userOutput={dimensionNames:e.dimensions.slice(),encode:{}};w(e.dimensions,(function(t){var s=e.getDimensionInfo(t),l=s.coordDim;if(l){var u=s.coordDimIndex;sh(n,l)[u]=t,s.isExtraCoord||(i.set(l,1),function(e){return!("ordinal"===e||"time"===e)}(s.type)&&(o[0]=t),sh(a.encode,l)[u]=s.index),s.defaultTooltip&&r.push(t)}ah.each((function(e,t){var i=sh(n,t),o=s.otherDims[t];null!=o&&!1!==o&&(i[o]=s.name)}))}));var s=[],l={};i.each((function(e,t){var i=n[t];l[t]=i[0],s=s.concat(i)})),t.dataDimsOnCoord=s,t.encodeFirstDimNotExtra=l;var u=n.label;u&&u.length&&(o=u.slice());var c=n.tooltip;return c&&c.length?r=c.slice():r.length||(r=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=r,t}(this),this._invertedIndicesMap=o,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},Ch=Th.prototype;function Eh(e,t,n,i,o){var r=fh[t.type],a=i-1,s=t.name,l=e[s][a];if(l&&l.length<n){for(var u=new r(Math.min(o-a*n,n)),c=0;c<l.length;c++)u[c]=l[c];e[s][a]=u}for(var d=i*n;d<o;d+=n)e[s].push(new r(Math.min(o-d,n)))}function _h(e){var t=e._invertedIndicesMap;w(t,(function(n,i){var o=e._dimensionInfos[i].ordinalMeta;if(o){n=t[i]=new gh(o.categories.length);for(var r=0;r<n.length;r++)n[r]=-1;for(r=0;r<e._count;r++)n[e.get(i,r)]=r}}))}function xh(e,t,n){var i;if(null!=t){var o=e._chunkSize,r=Math.floor(n/o),a=e.dimensions[t],s=e._storage[a][r];if(s){i=s[n%o];var l=e._dimensionInfos[a].ordinalMeta;l&&l.categories.length&&(i=l.categories[i])}}return i}function Ih(e){return e}function Dh(e){return e<this._count&&0<=e?this._indices[e]:-1}function wh(e,t){var n=e._idList[t];return null==n&&(n=xh(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n}function Oh(e){return M(e)||(e=[e]),e}function Rh(e,t){var n=e.dimensions,i=new Th(O(n,e.getDimensionInfo,e),e.hostModel);bh(i,e);for(var o=i._storage={},r=e._storage,a=0;a<n.length;a++){var s=n[a];r[s]&&(0<=_(t,s)?(o[s]=kh(r[s]),i._rawExtent[s]=[1/0,-1/0],i._extent[s]=null):o[s]=r[s])}return i}function kh(e){for(var t,n,i=new Array(e.length),o=0;o<e.length;o++)i[o]=(n=void 0,(n=(t=e[o]).constructor)===Array?t.slice():new n(t));return i}function Sh(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType}function Ah(e,t,n){Cu.isInstance(t)||(t=Cu.seriesDataToSource(t)),n=n||{},e=(e||[]).slice();for(var i=(n.dimsDef||[]).slice(),o=Q(),r=Q(),a=[],s=function(e,t,n,i){var o=Math.max(e.dimensionsDetectCount||1,t.length,n.length,i||0);return w(t,(function(e){var t=e.dimsDef;t&&(o=Math.max(o,t.length))})),o}(t,e,i,n.dimCount),l=0;l<s;l++){var u=i[l]=b({},L(i[l])?i[l]:{name:i[l]}),c=u.name,d=a[l]=new uh;null!=c&&null==o.get(c)&&(d.name=d.displayName=c,o.set(c,l)),null!=u.type&&(d.type=u.type),null!=u.displayName&&(d.displayName=u.displayName)}var f=n.encodeDef;!f&&n.encodeDefaulter&&(f=n.encodeDefaulter(t,s)),(f=Q(f)).each((function(e,t){if(1===(e=Do(e).slice()).length&&!P(e[0])&&e[0]<0)f.set(t,!1);else{var n=f.set(t,[]);w(e,(function(e,i){P(e)&&(e=o.get(e)),null!=e&&e<s&&(n[i]=e,g(a[e],t,i))}))}}));var h=0;function g(e,t,n){null!=ah.get(t)?e.otherDims[t]=n:(e.coordDim=t,e.coordDimIndex=n,r.set(t,!0))}w(e,(function(e,t){var n,i,o;if(P(e))n=e,e={};else{n=e.name;var r=e.ordinalMeta;e.ordinalMeta=null,(e=m(e)).ordinalMeta=r,i=e.dimsDef,o=e.otherDims,e.name=e.coordDim=e.coordDimIndex=e.dimsDef=e.otherDims=null}if(!1!==(s=f.get(n))){var s;if(!(s=Do(s)).length)for(var l=0;l<(i&&i.length||1);l++){for(;h<a.length&&null!=a[h].coordDim;)h++;h<a.length&&s.push(h++)}w(s,(function(t,r){var s=a[t];if(g(T(s,e),n,r),null==s.name&&i){var l=i[r];L(l)||(l={name:l}),s.name=s.displayName=l.name,s.defaultTooltip=l.defaultTooltip}o&&T(s.otherDims,o)}))}}));var p=n.generateCoord,v=n.generateCoordCount,y=null!=v;v=p?v||1:0;for(var C,E=p||"value",_=0;_<s;_++)null==(d=a[_]=a[_]||new uh).coordDim&&(d.coordDim=Nh(E,r,y),d.coordDimIndex=0,(!p||v<=0)&&(d.isExtraCoord=!0),v--),null==d.name&&(d.name=Nh(d.coordDim,o)),null==d.type&&(1===Ru((C=t).data,C.sourceFormat,C.seriesLayoutBy,C.dimensionsDefine,C.startIndex,_)||d.isExtraCoord&&(null!=d.otherDims.itemName||null!=d.otherDims.seriesName))&&(d.type="ordinal");return a}function Nh(e,t,n){if(n||null!=t.get(e)){for(var i=0;null!=t.get(e+i);)i++;e+=i}return t.set(e,!0),e}Ch.type="list",Ch.hasItemOption=!0,Ch.getDimension=function(e){return"number"!=typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},Ch.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},Ch.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},Ch.mapDimension=function(e,t){var n=this._dimensionsSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var i=n.encode[e];return!0===t?(i||[]).slice():i&&i[t]},Ch.initData=function(e,t,n){(Cu.isInstance(e)||D(e))&&(e=new ac(e,this.dimensions.length)),this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=gc[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=gc.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},Ch.getProvider=function(){return this._rawData},Ch.appendData=function(e){var t=this._rawData,n=this.count();t.appendData(e);var i=t.count();t.persistent||(i+=n),this._initDataFromProvider(n,i)},Ch.appendValues=function(e,t){for(var n=this._chunkSize,i=this._storage,o=this.dimensions,r=o.length,a=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t?t.length:0),u=this._chunkCount,c=0;c<r;c++)a[v=o[c]]||(a[v]=[1/0,-1/0]),i[v]||(i[v]=[]),Eh(i,this._dimensionInfos[v],n,u,l),this._chunkCount=i[v].length;for(var d=new Array(r),f=s;f<l;f++){for(var h=f-s,g=Math.floor(f/n),p=f%n,m=0;m<r;m++){var v=o[m],y=this._dimValueGetterArrayRows(e[h]||d,v,h,m);i[v][g][p]=y;var b=a[v];y<b[0]&&(b[0]=y),y>b[1]&&(b[1]=y)}t&&(this._nameList[f]=t[h])}this._rawCount=this._count=l,this._extent={},_h(this)},Ch._initDataFromProvider=function(e,t){if(!(t<=e)){for(var n,i=this._chunkSize,o=this._rawData,r=this._storage,a=this.dimensions,s=a.length,l=this._dimensionInfos,u=this._nameList,c=this._idList,d=this._rawExtent,f=this._nameRepeatCount={},h=this._chunkCount,g=0;g<s;g++){d[C=a[g]]||(d[C]=[1/0,-1/0]);var p=l[C];0===p.otherDims.itemName&&(n=this._nameDimIdx=g),0===p.otherDims.itemId&&(this._idDimIdx=g),r[C]||(r[C]=[]),Eh(r,p,i,h,t),this._chunkCount=r[C].length}for(var m=new Array(s),v=e;v<t;v++){m=o.getItem(v,m);for(var y=Math.floor(v/i),b=v%i,T=0;T<s;T++){var C,E=r[C=a[T]][y],_=this._dimValueGetter(m,C,v,T);E[b]=_;var x=d[C];_<x[0]&&(x[0]=_),_>x[1]&&(x[1]=_)}if(!o.pure){var I=u[v];if(m&&null==I)if(null!=m.name)u[v]=I=m.name;else if(null!=n){var D=a[n],w=r[D][y];if(w){I=w[b];var O=l[D].ordinalMeta;O&&O.categories.length&&(I=O.categories[I])}}var R=null==m?null:m.id;null==R&&null!=I&&(f[I]=f[I]||0,0<f[R=I]&&(R+="__ec__"+f[I]),f[I]++),null!=R&&(c[v]=R)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=t,this._extent={},_h(this)}},Ch.count=function(){return this._count},Ch.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,n=this._count;if(t===Array){o=new t(n);for(var i=0;i<n;i++)o[i]=e[i]}else o=new t(e.buffer,0,n)}else{var o=new(t=mh(this))(this.count());for(i=0;i<o.length;i++)o[i]=i}return o},Ch.get=function(e,t){if(!(0<=t&&t<this._count))return NaN;var n=this._storage;if(!n[e])return NaN;t=this.getRawIndex(t);var i=Math.floor(t/this._chunkSize);return n[e][i][t%this._chunkSize]},Ch.getByRawIndex=function(e,t){if(!(0<=t&&t<this._rawCount))return NaN;var n=this._storage[e];return n?n[Math.floor(t/this._chunkSize)][t%this._chunkSize]:NaN},Ch._getFast=function(e,t){var n=Math.floor(t/this._chunkSize);return this._storage[e][n][t%this._chunkSize]},Ch.getValues=function(e,t){var n=[];M(e)||(t=e,e=this.dimensions);for(var i=0,o=e.length;i<o;i++)n.push(this.get(e[i],t));return n},Ch.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,n=0,i=t.length;n<i;n++)if(isNaN(this.get(t[n],e)))return!1;return!0},Ch.getDataExtent=function(e){e=this.getDimension(e);var t=[1/0,-1/0];if(!this._storage[e])return t;var n,i=this.count();if(!this._indices)return this._rawExtent[e].slice();if(n=this._extent[e])return n.slice();for(var o=(n=t)[0],r=n[1],a=0;a<i;a++){var s=this._getFast(e,this.getRawIndex(a));s<o&&(o=s),r<s&&(r=s)}return this._extent[e]=[o,r]},Ch.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},Ch.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},Ch.getCalculationInfo=function(e){return this._calculationInfo[e]},Ch.setCalculationInfo=function(e,t){ch(e)?b(this._calculationInfo,e):this._calculationInfo[e]=t},Ch.getSum=function(e){var t=0;if(this._storage[e])for(var n=0,i=this.count();n<i;n++){var o=this.get(e,n);isNaN(o)||(t+=o)}return t},Ch.getMedian=function(e){var t=[];this.each(e,(function(e,n){isNaN(e)||t.push(e)}));var n=[].concat(t).sort((function(e,t){return e-t})),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},Ch.rawIndexOf=function(e,t){var n=(e&&this._invertedIndicesMap[e])[t];return null==n||isNaN(n)?-1:n},Ch.indexOfName=function(e){for(var t=0,n=this.count();t<n;t++)if(this.getName(t)===e)return t;return-1},Ch.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var i=0,o=this._count-1;i<=o;){var r=(i+o)/2|0;if(t[r]<e)i=1+r;else{if(!(t[r]>e))return r;o=r-1}}return-1},Ch.indicesOfNearest=function(e,t,n){var i=[];if(!this._storage[e])return i;null==n&&(n=1/0);for(var o=1/0,r=-1,a=0,s=0,l=this.count();s<l;s++){var u=t-this.get(e,s),c=Math.abs(u);c<=n&&((c<o||c===o&&0<=u&&r<0)&&(o=c,r=u,a=0),u===r&&(i[a++]=s))}return i.length=a,i},Ch.getRawIndex=Ih,Ch.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],n=0;n<this.dimensions.length;n++)t.push(this.get(this.dimensions[n],e));return t},Ch.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||xh(this,this._nameDimIdx,t)||""},Ch.getId=function(e){return wh(this,this.getRawIndex(e))},Ch.each=function(e,t,n,i){if(this._count){"function"==typeof e&&(i=n,n=t,t=e,e=[]),n=n||i||this;for(var o=(e=O(Oh(e),this.getDimension,this)).length,r=0;r<this.count();r++)switch(o){case 0:t.call(n,r);break;case 1:t.call(n,this.get(e[0],r),r);break;case 2:t.call(n,this.get(e[0],r),this.get(e[1],r),r);break;default:for(var a=0,s=[];a<o;a++)s[a]=this.get(e[a],r);s[a]=r,t.apply(n,s)}}},Ch.filterSelf=function(e,t,n,i){if(this._count){"function"==typeof e&&(i=n,n=t,t=e,e=[]),n=n||i||this,e=O(Oh(e),this.getDimension,this);for(var o=this.count(),r=new(mh(this))(o),a=[],s=e.length,l=0,u=e[0],c=0;c<o;c++){var d,f=this.getRawIndex(c);if(0===s)d=t.call(n,c);else if(1===s){var h=this._getFast(u,f);d=t.call(n,h,c)}else{for(var g=0;g<s;g++)a[g]=this._getFast(u,f);a[g]=c,d=t.apply(n,a)}d&&(r[l++]=f)}return l<o&&(this._indices=r),this._count=l,this._extent={},this.getRawIndex=this._indices?Dh:Ih,this}},Ch.selectRange=function(e){if(this._count){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var i=t.length;if(i){var o=this.count(),r=new(mh(this))(o),a=0,s=t[0],l=e[s][0],u=e[s][1],c=!1;if(!this._indices){var d=0;if(1===i){for(var f=this._storage[t[0]],h=0;h<this._chunkCount;h++)for(var g=f[h],p=Math.min(this._count-h*this._chunkSize,this._chunkSize),m=0;m<p;m++)(l<=(C=g[m])&&C<=u||isNaN(C))&&(r[a++]=d),d++;c=!0}else if(2===i){f=this._storage[s];var v=this._storage[t[1]],y=e[t[1]][0],b=e[t[1]][1];for(h=0;h<this._chunkCount;h++){g=f[h];var T=v[h];for(p=Math.min(this._count-h*this._chunkSize,this._chunkSize),m=0;m<p;m++){var C=g[m],E=T[m];(l<=C&&C<=u||isNaN(C))&&(y<=E&&E<=b||isNaN(E))&&(r[a++]=d),d++}}c=!0}}if(!c)if(1===i)for(m=0;m<o;m++){var _=this.getRawIndex(m);(l<=(C=this._getFast(s,_))&&C<=u||isNaN(C))&&(r[a++]=_)}else for(m=0;m<o;m++){var x=!0;for(_=this.getRawIndex(m),h=0;h<i;h++){var I=t[h];((C=this._getFast(n,_))<e[I][0]||C>e[I][1])&&(x=!1)}x&&(r[a++]=this.getRawIndex(m))}return a<o&&(this._indices=r),this._count=a,this._extent={},this.getRawIndex=this._indices?Dh:Ih,this}}},Ch.mapArray=function(e,t,n,i){"function"==typeof e&&(i=n,n=t,t=e,e=[]);var o=[];return this.each(e,(function(){o.push(t&&t.apply(this,arguments))}),n=n||i||this),o},Ch.map=function(e,t,n,i){n=n||i||this;var o=Rh(this,e=O(Oh(e),this.getDimension,this));o._indices=this._indices,o.getRawIndex=o._indices?Dh:Ih;for(var r=o._storage,a=[],s=this._chunkSize,l=e.length,u=this.count(),c=[],d=o._rawExtent,f=0;f<u;f++){for(var h=0;h<l;h++)c[h]=this.get(e[h],f);c[l]=f;var g=t&&t.apply(n,c);if(null!=g){"object"!=typeof g&&(a[0]=g,g=a);for(var p=this.getRawIndex(f),m=Math.floor(p/s),v=p%s,y=0;y<g.length;y++){var b=e[y],T=g[y],C=d[b],E=r[b];E&&(E[m][v]=T),T<C[0]&&(C[0]=T),T>C[1]&&(C[1]=T)}}}return o},Ch.downSample=function(e,t,n,i){for(var o=Rh(this,[e]),r=o._storage,a=[],s=Math.floor(1/t),l=r[e],u=this.count(),c=this._chunkSize,d=o._rawExtent[e],f=new(mh(this))(u),h=0,g=0;g<u;g+=s){u-g<s&&(a.length=s=u-g);for(var p=0;p<s;p++){var m=this.getRawIndex(g+p),v=Math.floor(m/c);a[p]=l[v][m%c]}var y=n(a),b=this.getRawIndex(Math.min(g+i(a,y)||0,u-1)),T=b%c;(l[Math.floor(b/c)][T]=y)<d[0]&&(d[0]=y),y>d[1]&&(d[1]=y),f[h++]=b}return o._count=h,o._indices=f,o.getRawIndex=Dh,o},Ch.getItemModel=function(e){var t=this.hostModel;return new ll(this.getRawDataItem(e),t,t&&t.ecModel)},Ch.diff=function(e){var t=this;return new oh(e?e.getIndices():[],this.getIndices(),(function(t){return wh(e,t)}),(function(e){return wh(t,e)}))},Ch.getVisual=function(e){var t=this._visual;return t&&t[e]},Ch.setVisual=function(e,t){if(ch(e))for(var n in e)e.hasOwnProperty(n)&&this.setVisual(n,e[n]);else this._visual=this._visual||{},this._visual[e]=t},Ch.setLayout=function(e,t){if(ch(e))for(var n in e)e.hasOwnProperty(n)&&this.setLayout(n,e[n]);else this._layout[e]=t},Ch.getLayout=function(e){return this._layout[e]},Ch.getItemLayout=function(e){return this._itemLayouts[e]},Ch.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?b(this._itemLayouts[e]||{},t):t},Ch.clearItemLayouts=function(){this._itemLayouts.length=0},Ch.getItemVisual=function(e,t,n){var i=this._itemVisuals[e],o=i&&i[t];return null!=o||n?o:this.getVisual(t)},Ch.setItemVisual=function(e,t,n){var i=this._itemVisuals[e]||{},o=this.hasItemVisual;if(this._itemVisuals[e]=i,ch(t))for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r],o[r]=!0);else i[t]=n,o[t]=!0},Ch.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},Ch.setItemGraphicEl=function(e,t){var n=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=n&&n.seriesIndex,"group"===t.type&&t.traverse(Sh,t)),this._graphicEls[e]=t},Ch.getItemGraphicEl=function(e){return this._graphicEls[e]},Ch.eachItemGraphicEl=function(e,t){w(this._graphicEls,(function(n,i){n&&e&&e.call(t,n,i)}))},Ch.cloneShallow=function(e){if(!e){var t=O(this.dimensions,this.getDimensionInfo,this);e=new Th(t,this.hostModel)}return e._storage=this._storage,bh(e,this),e._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,e.getRawIndex=e._indices?Dh:Ih,e},Ch.wrapMethod=function(e,t){var n=this[e];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=n.apply(this,arguments);return t.apply(this,[e].concat(q(arguments)))})},Ch.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],Ch.CHANGABLE_METHODS=["filterSelf","selectRange"];var Mh=function(e,t){return Ah((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function Kh(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=Q(),this.categoryAxisMap=Q(),this.firstCategoryDimIndex=null}var Ph={cartesian2d:function(e,t,n,i){var o=e.getReferringComponents("xAxis")[0],r=e.getReferringComponents("yAxis")[0];t.coordSysDims=["x","y"],n.set("x",o),n.set("y",r),Lh(o)&&(i.set("x",o),t.firstCategoryDimIndex=0),Lh(r)&&(i.set("y",r),t.firstCategoryDimIndex=1)},singleAxis:function(e,t,n,i){var o=e.getReferringComponents("singleAxis")[0];t.coordSysDims=["single"],n.set("single",o),Lh(o)&&(i.set("single",o),t.firstCategoryDimIndex=0)},polar:function(e,t,n,i){var o=e.getReferringComponents("polar")[0],r=o.findAxisModel("radiusAxis"),a=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",r),n.set("angle",a),Lh(r)&&(i.set("radius",r),t.firstCategoryDimIndex=0),Lh(a)&&(i.set("angle",a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,i){var o=e.ecModel,r=o.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=r.dimensions.slice();w(r.parallelAxisIndex,(function(e,r){var s=o.getComponent("parallelAxis",e),l=a[r];n.set(l,s),Lh(s)&&null==t.firstCategoryDimIndex&&(i.set(l,s),t.firstCategoryDimIndex=r)}))}};function Lh(e){return"category"===e.get("type")}function Bh(e,t,n){var i,o,r,a,s=(n=n||{}).byIndex,l=n.stackedCoordDimension,u=!(!e||!e.get("stack"));if(w(t,(function(e,n){P(e)&&(t[n]=e={name:e}),u&&!e.isExtraCoord&&(s||i||!e.ordinalMeta||(i=e),o||"ordinal"===e.type||"time"===e.type||l&&l!==e.coordDim||(o=e))})),!o||s||i||(s=!0),o){r="__\0ecstackresult",a="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var c=o.coordDim,d=o.type,f=0;w(t,(function(e){e.coordDim===c&&f++})),t.push({name:r,coordDim:c,coordDimIndex:f,type:d,isExtraCoord:!0,isCalculationCoord:!0}),f++,t.push({name:a,coordDim:a,coordDimIndex:f,type:d,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:i&&i.name,isStackedByIndex:s,stackedOverDimension:a,stackResultDimension:r}}function Fh(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function zh(e,t){return Fh(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Hh(e,t,n){n=n||{},Cu.isInstance(e)||(e=Cu.seriesDataToSource(e));var i,o=t.get("coordinateSystem"),r=Lu.get(o),a=function(e){var t=e.get("coordinateSystem"),n=new Kh(t),i=Ph[t];if(i)return i(e,n,n.axisMap,n.categoryAxisMap),n}(t);a&&(i=O(a.coordSysDims,(function(e){var t={name:e},n=a.axisMap.get(e);if(n){var i=n.get("type");t.type=lh(i)}return t}))),i=i||r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"];var s,l,u=Mh(e,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?N(Du,i,t):null});a&&w(u,(function(e,t){var n=a.categoryAxisMap.get(e.coordDim);n&&(null==s&&(s=t),e.ordinalMeta=n.getOrdinalMeta()),null!=e.otherDims.itemName&&(l=!0)})),l||null==s||(u[s].otherDims.itemName=0);var c=Bh(t,u),d=new Th(u,t);d.setCalculationInfo(c);var f=null!=s&&function(e){if(e.sourceFormat===pu){var t=function(e){for(var t=0;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[]);return null!=t&&!M(Ro(t))}}(e)?function(e,t,n,i){return i===s?n:this.defaultDimValueGetter(e,t,n,i)}:null;return d.hasItemOption=!1,d.initData(e,null,f),d}function Vh(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Wh(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication}Vh.prototype.parse=function(e){return e},Vh.prototype.getSetting=function(e){return this._setting[e]},Vh.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},Vh.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},Vh.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},Vh.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},Vh.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},Vh.prototype.getExtent=function(){return this._extent.slice()},Vh.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},Vh.prototype.isBlank=function(){return this._isBlank},Vh.prototype.setBlank=function(e){this._isBlank=e},Vh.prototype.getLabel=null,$o(Vh),Xo(Vh,{registerWhenExtend:!0}),Wh.createByAxisModel=function(e){var t=e.option,n=t.data,i=n&&O(n,Uh);return new Wh({categories:i,needCollect:!i,deduplication:!1!==t.dedplication})};var $h=Wh.prototype;function qh(e){return e._map||(e._map=Q(e.categories))}function Uh(e){return L(e)&&null!=e.value?e.value:e+""}$h.getOrdinal=function(e){return qh(this).get(e)},$h.parseAndCollect=function(e){var t,n=this._needCollect;if("string"!=typeof e&&!n)return e;if(n&&!this._deduplication)return this.categories[t=this.categories.length]=e,t;var i=qh(this);return null==(t=i.get(e))&&(n?(this.categories[t=this.categories.length]=e,i.set(e,t)):t=NaN),t};var jh=Vh.prototype,Gh=Vh.extend({type:"ordinal",init:function(e,t){e&&!M(e)||(e=new Wh({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),jh.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return jh.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(jh.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push(n),n++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:te,niceExtent:te});Gh.create=function(){return new Gh};var Xh=pl;function Yh(e){return yl(e)+2}function Zh(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function Jh(e,t){isFinite(e[0])||(e[0]=t[0]),isFinite(e[1])||(e[1]=t[1]),Zh(e,0,t),Zh(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var Qh=pl,eg=Vh.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),eg.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=Yh(e)},getTicks:function(e){var t=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,r=[];if(!t)return r;n[0]<i[0]&&r.push(e?Qh(i[0]-t,o):n[0]);for(var a=i[0];a<=i[1]&&(r.push(a),(a=Qh(a+t,o))!==r[r.length-1]);)if(1e4<r.length)return[];var s=r.length?r[r.length-1]:i[1];return n[1]>s&&r.push(e?Qh(s+t,o):n[1]),r},getMinorTicks:function(e){for(var t=this.getTicks(!0),n=[],i=this.getExtent(),o=1;o<t.length;o++){for(var r=t[o-1],a=0,s=[],l=(t[o]-r)/e;a<e-1;){var u=pl(r+(a+1)*l);u>i[0]&&u<i[1]&&s.push(u),a++}n.push(s)}return n},getLabel:function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=yl(e)||0:"auto"===n&&(n=this._intervalPrecision),Al(e=Qh(e,n,!0))},niceTicks:function(e,t,n){e=e||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var r=function(e,t,n,i){var o={},r=o.interval=Ol((e[1]-e[0])/t,!0);null!=n&&r<n&&(r=o.interval=n),null!=i&&i<r&&(r=o.interval=i);var a=o.intervalPrecision=Yh(r);return Jh(o.niceTickExtent=[Xh(Math.ceil(e[0]/r)*r,a),Xh(Math.floor(e[1]/r)*r,a)],e),o}(i,e,t,n);this._intervalPrecision=r.intervalPrecision,this._interval=r.interval,this._niceExtent=r.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=t[0];e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1;isFinite(t[1]-t[0])||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var i=this._interval;e.fixMin||(t[0]=Qh(Math.floor(t[0]/i)*i)),e.fixMax||(t[1]=Qh(Math.ceil(t[1]/i)*i))}});eg.create=function(){return new eg};var tg="__ec_stack_",ng="undefined"!=typeof Float32Array?Float32Array:Array;function ig(e){return e.get("stack")||tg+e.seriesIndex}function og(e){return e.dim+e.index}function rg(e,t){var n=[];return t.eachSeriesByType(e,(function(e){dg(e)&&!fg(e)&&n.push(e)})),n}function ag(e){var t=function(e){var t={};w(e,(function(e){var n=e.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var i=e.getData(),o=n.dim+"_"+n.index,r=i.mapDimension(n.dim),a=0,s=i.count();a<s;++a){var l=i.get(r,a);t[o]?t[o].push(l):t[o]=[l]}}));var n=[];for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(o){o.sort((function(e,t){return e-t}));for(var r=null,a=1;a<o.length;++a){var s=o[a]-o[a-1];0<s&&(r=null===r?s:Math.min(r,s))}n[i]=r}}return n}(e),n=[];return w(e,(function(e){var i,o=e.coordinateSystem.getBaseAxis(),r=o.getExtent();if("category"===o.type)i=o.getBandWidth();else if("value"===o.type||"time"===o.type){var a=t[o.dim+"_"+o.index],s=Math.abs(r[1]-r[0]),l=o.scale.getExtent(),u=Math.abs(l[1]-l[0]);i=a?s/u*a:s}else{var c=e.getData();i=Math.abs(r[1]-r[0])/c.count()}var d=gl(e.get("barWidth"),i),f=gl(e.get("barMaxWidth"),i),h=gl(e.get("barMinWidth")||1,i),g=e.get("barGap"),p=e.get("barCategoryGap");n.push({bandWidth:i,barWidth:d,barMaxWidth:f,barMinWidth:h,barGap:g,barCategoryGap:p,axisKey:og(o),stackId:ig(e)})})),sg(n)}function sg(e){var t={};w(e,(function(e,n){var i=e.axisKey,o=e.bandWidth,r=t[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=r.stacks;t[i]=r;var s=e.stackId;a[s]||r.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=e.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(r.remainedWidth,l),r.remainedWidth-=l);var u=e.barMaxWidth;u&&(a[s].maxWidth=u);var c=e.barMinWidth;c&&(a[s].minWidth=c);var d=e.barGap;null!=d&&(r.gap=d);var f=e.barCategoryGap;null!=f&&(r.categoryGap=f)}));var n={};return w(t,(function(e,t){n[t]={};var i=e.stacks,o=e.bandWidth,r=gl(e.categoryGap,o),a=gl(e.gap,1),s=e.remainedWidth,l=e.autoWidthCount,u=(s-r)/(l+(l-1)*a);u=Math.max(u,0),w(i,(function(e){var t=e.maxWidth,n=e.minWidth;if(e.width)i=e.width,t&&(i=Math.min(i,t)),n&&(i=Math.max(i,n)),e.width=i,s-=i+a*i,l--;else{var i=u;t&&t<i&&(i=Math.min(t,s)),n&&i<n&&(i=n),i!==u&&(e.width=i,s-=i+a*i,l--)}})),u=(s-r)/(l+(l-1)*a),u=Math.max(u,0);var c,d=0;w(i,(function(e,t){e.width||(e.width=u),d+=(c=e).width*(1+a)})),c&&(d-=c.width*a);var f=-d/2;w(i,(function(e,i){n[t][i]=n[t][i]||{bandWidth:o,offset:f,width:e.width},f+=e.width*(1+a)}))})),n}function lg(e,t,n){if(e&&t){var i=e[og(t)];return null!=i&&null!=n&&(i=i[ig(n)]),i}}function ug(e,t){var n=rg(e,t),i=ag(n),o={};w(n,(function(e){var t=e.getData(),n=e.coordinateSystem,r=n.getBaseAxis(),a=ig(e),s=i[og(r)][a],l=s.offset,u=s.width,c=n.getOtherAxis(r),d=e.get("barMinHeight")||0;o[a]=o[a]||[],t.setLayout({bandWidth:s.bandWidth,offset:l,size:u});for(var f=t.mapDimension(c.dim),h=t.mapDimension(r.dim),g=Fh(t,f),p=c.isHorizontal(),m=hg(0,c),v=0,y=t.count();v<y;v++){var b,T,C,E,_,x=t.get(f,v),I=t.get(h,v),D=0<=x?"p":"n",w=m;g&&(o[a][I]||(o[a][I]={p:m,n:m}),w=o[a][I][D]),p?(b=w,T=(_=n.dataToPoint([x,I]))[1]+l,C=_[0]-m,E=u,Math.abs(C)<d&&(C=(C<0?-1:1)*d),isNaN(C)||g&&(o[a][I][D]+=C)):(b=(_=n.dataToPoint([I,x]))[0]+l,T=w,C=u,E=_[1]-m,Math.abs(E)<d&&(E=(E<=0?-1:1)*d),isNaN(E)||g&&(o[a][I][D]+=E)),t.setItemLayout(v,{x:b,y:T,width:C,height:E})}}),this)}var cg={seriesType:"bar",plan:qc(),reset:function(e){if(dg(e)&&fg(e)){var t=e.getData(),n=e.coordinateSystem,i=n.grid.getRect(),o=n.getBaseAxis(),r=n.getOtherAxis(o),a=t.mapDimension(r.dim),s=t.mapDimension(o.dim),l=r.isHorizontal(),u=l?0:1,c=lg(ag([e]),o,e).width;return.5<c||(c=.5),{progress:function(e,t){for(var o,d=e.count,f=new ng(2*d),h=new ng(2*d),g=new ng(d),p=[],m=[],v=0,y=0;null!=(o=e.next());)m[u]=t.get(a,o),m[1-u]=t.get(s,o),p=n.dataToPoint(m,null,p),h[v]=l?i.x+i.width:p[0],f[v++]=p[0],h[v]=l?p[1]:i.y+i.height,f[v++]=p[1],g[y++]=o;t.setLayout({largePoints:f,largeDataIndices:g,largeBackgroundPoints:h,barWidth:c,valueAxisStart:hg(0,r),backgroundStart:l?i.x:i.y,valueAxisHorizontal:l})}}}}};function dg(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function fg(e){return e.pipelineContext&&e.pipelineContext.large}function hg(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var gg=eg.prototype,pg=Math.ceil,mg=Math.floor,vg=864e5,yg=eg.extend({type:"time",getLabel:function(e){var t=this._stepLvl,n=new Date(e);return $l(t[0],n,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=vg,t[1]+=vg),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-vg}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var i=this._interval;e.fixMin||(t[0]=pl(mg(t[0]/i)*i)),e.fixMax||(t[1]=pl(pg(t[1]/i)*i))},niceTicks:function(e,t,n){var i=this._extent,o=i[1]-i[0],r=o/(e=e||10);null!=t&&r<t&&(r=t),null!=n&&n<r&&(r=n);var a=bg.length,s=function(e,t,n,i){for(;n<i;){var o=n+i>>>1;e[o][1]<t?n=1+o:i=o}return n}(bg,r,0,a),l=bg[Math.min(s,a-1)],u=l[1];"year"===l[0]&&(u*=Ol(o/u/e,!0));var c=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,d=[Math.round(pg((i[0]-c)/u)*u+c),Math.round(mg((i[1]-c)/u)*u+c)];Jh(d,i),this._stepLvl=l,this._interval=u,this._niceExtent=d},parse:function(e){return+Il(e)}});w(["contain","normalize"],(function(e){yg.prototype[e]=function(t){return gg[e].call(this,this.parse(t))}}));var bg=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",vg],["MM-dd\nyyyy",2*vg],["MM-dd\nyyyy",3*vg],["MM-dd\nyyyy",4*vg],["MM-dd\nyyyy",5*vg],["MM-dd\nyyyy",6*vg],["week",7*vg],["MM-dd\nyyyy",864e6],["week",14*vg],["week",21*vg],["month",31*vg],["week",42*vg],["month",62*vg],["week",70*vg],["quarter",95*vg],["month",31*vg*4],["month",13392e6],["half-year",16416e6],["month",31*vg*8],["month",26784e6],["year",380*vg]];yg.create=function(e){return new yg({useUTC:e.ecModel.get("useUTC")})};var Tg=Vh.prototype,Cg=eg.prototype,Eg=yl,_g=pl,xg=Math.floor,Ig=Math.ceil,Dg=Math.pow,wg=Math.log,Og=Vh.extend({type:"log",base:10,$constructor:function(){Vh.apply(this,arguments),this._originalScale=new eg},getTicks:function(e){var t=this._originalScale,n=this._extent,i=t.getExtent();return O(Cg.getTicks.call(this,e),(function(e){var o=pl(Dg(this.base,e));return o=e===n[0]&&t.__fixMin?Rg(o,i[0]):o,e===n[1]&&t.__fixMax?Rg(o,i[1]):o}),this)},getMinorTicks:Cg.getMinorTicks,getLabel:Cg.getLabel,scale:function(e){return e=Tg.scale.call(this,e),Dg(this.base,e)},setExtent:function(e,t){var n=this.base;e=wg(e)/wg(n),t=wg(t)/wg(n),Cg.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=Tg.getExtent.call(this);t[0]=Dg(e,t[0]),t[1]=Dg(e,t[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(t[0]=Rg(t[0],i[0])),n.__fixMax&&(t[1]=Rg(t[1],i[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=wg(e[0])/wg(t),e[1]=wg(e[1])/wg(t),Tg.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n==1/0||n<=0)){var i=Dl(n);for(e/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;var o=[pl(Ig(t[0]/i)*i),pl(xg(t[1]/i)*i)];this._interval=i,this._niceExtent=o}},niceExtent:function(e){Cg.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function Rg(e,t){return _g(e,Eg(t))}function kg(e,t){var n,i,o,r=e.type,a=t.getMin(),s=t.getMax(),l=e.getExtent();"ordinal"===r?n=t.getCategories().length:(M(i=t.get("boundaryGap"))||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=gl(i[0],1),i[1]=gl(i[1],1),o=l[1]-l[0]||Math.abs(l[0])),"dataMin"===a?a=l[0]:"function"==typeof a&&(a=a({min:l[0],max:l[1]})),"dataMax"===s?s=l[1]:"function"==typeof s&&(s=s({min:l[0],max:l[1]}));var u=null!=a,c=null!=s;null==a&&(a="ordinal"===r?n?0:NaN:l[0]-i[0]*o),null==s&&(s="ordinal"===r?n?n-1:NaN:l[1]+i[1]*o),null!=a&&isFinite(a)||(a=NaN),null!=s&&isFinite(s)||(s=NaN),e.setBlank(H(a)||H(s)||"ordinal"===r&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(0<a&&0<s&&!u&&(a=0),a<0&&s<0&&!c&&(s=0));var d=t.ecModel;if(d&&"time"===r){var f,h=rg("bar",d);if(w(h,(function(e){f|=e.getBaseAxis()===t.axis})),f){var g=ag(h),p=function(e,t,n,i){var o=n.axis.getExtent(),r=o[1]-o[0],a=lg(i,n.axis);if(void 0===a)return{min:e,max:t};var s=1/0;w(a,(function(e){s=Math.min(e.offset,s)}));var l=-1/0;w(a,(function(e){l=Math.max(e.offset+e.width,l)})),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,d=c/(1-(s+l)/r)-c;return{min:e-=s/u*d,max:t+=l/u*d}}(a,s,t,g);a=p.min,s=p.max}}return{extent:[a,s],fixMin:u,fixMax:c}}function Sg(e,t){var n=kg(e,t),i=n.extent,o=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var r=e.type;e.setExtent(i[0],i[1]),e.niceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===r||"time"===r?t.get("minInterval"):null,maxInterval:"interval"===r||"time"===r?t.get("maxInterval"):null});var a=t.get("interval");null!=a&&e.setInterval&&e.setInterval(a)}function Ag(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Gh(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new eg;default:return(Vh.getClass(t)||eg).create(e)}}function Ng(e){var t,n=e.getLabelModel().get("formatter"),i="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof n?(t=n,n=function(n){return n=e.scale.getLabel(n),t.replace("{value}",null!=n?n:"")}):"function"==typeof n?function(t,o){return null!=i&&(o=t-i),n(Mg(e,t),o)}:function(t){return e.scale.getLabel(t)}}function Mg(e,t){return"category"===e.type?e.scale.getLabel(t):t}function Kg(e){var t=e.get("interval");return null==t?"auto":t}function Pg(e){return"category"===e.type&&0===Kg(e.getLabelModel())}w(["contain","normalize"],(function(e){Og.prototype[e]=function(t){return t=wg(t)/wg(this.base),Tg[e].call(this,t)}})),Og.create=function(){return new Og};var Lg={getMin:function(e){var t=this.option,n=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!H(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(e){var t=this.option,n=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!H(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:te,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},Bg=ls({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,i=t.cy,o=t.width/2,r=t.height/2;e.moveTo(n,i-r),e.lineTo(n+o,i+r),e.lineTo(n-o,i+r),e.closePath()}}),Fg=ls({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,i=t.cy,o=t.width/2,r=t.height/2;e.moveTo(n,i-r),e.lineTo(n+o,i),e.lineTo(n,i+r),e.lineTo(n-o,i),e.closePath()}}),zg=ls({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,i=t.y,o=t.width/5*3,r=Math.max(o,t.height),a=o/2,s=a*a/(r-a),l=i-r+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,d=Math.sin(u),f=Math.cos(u),h=.6*a,g=.7*a;e.moveTo(n-c,l+s),e.arc(n,l,a,Math.PI-u,2*Math.PI+u),e.bezierCurveTo(n+c-d*h,l+s+f*h,n,i-g,n,i),e.bezierCurveTo(n,i-g,n-c+d*h,l+s+f*h,n-c,l+s),e.closePath()}}),Hg=ls({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,i=t.x,o=t.y,r=t.width/3*2;e.moveTo(i,o),e.lineTo(i+r,o+n),e.lineTo(i,o+n/4*3),e.lineTo(i-r,o+n),e.lineTo(i,o),e.closePath()}}),Vg={line:function(e,t,n,i,o){o.x1=e,o.y1=t+i/2,o.x2=e+n,o.y2=t+i/2},rect:function(e,t,n,i,o){o.x=e,o.y=t,o.width=n,o.height=i},roundRect:function(e,t,n,i,o){o.x=e,o.y=t,o.width=n,o.height=i,o.r=Math.min(n,i)/4},square:function(e,t,n,i,o){var r=Math.min(n,i);o.x=e,o.y=t,o.width=r,o.height=r},circle:function(e,t,n,i,o){o.cx=e+n/2,o.cy=t+i/2,o.r=Math.min(n,i)/2},diamond:function(e,t,n,i,o){o.cx=e+n/2,o.cy=t+i/2,o.width=n,o.height=i},pin:function(e,t,n,i,o){o.x=e+n/2,o.y=t+i/2,o.width=n,o.height=i},arrow:function(e,t,n,i,o){o.x=e+n/2,o.y=t+i/2,o.width=n,o.height=i},triangle:function(e,t,n,i,o){o.cx=e+n/2,o.cy=t+i/2,o.width=n,o.height=i}},Wg={};w({line:Wa,rect:Ha,roundRect:Ha,square:Ha,circle:Oa,diamond:Fg,pin:zg,arrow:Hg,triangle:Bg},(function(e,t){Wg[t]=new e}));var $g=ls({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var i=ai(e,t,n),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===t.textPosition&&(i.y=n.y+.4*n.height),i},buildPath:function(e,t,n){var i=t.symbolType;if("none"!==i){var o=Wg[i];o=o||Wg[i="rect"],Vg[i](t.x,t.y,t.width,t.height,o.shape),o.buildPath(e,o.shape,n)}}});function qg(e,t){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=e:this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff"):(n.fill&&(n.fill=e),n.stroke&&(n.stroke=e)),this.dirty(!1)}}function Ug(e,t,n,i,o,r,a){var s,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(s=0===e.indexOf("image://")?fs(e.slice(8),new En(t,n,i,o),a?"center":"cover"):0===e.indexOf("path://")?ds(e.slice(7),{},new En(t,n,i,o),a?"center":"cover"):new $g({shape:{symbolType:e,x:t,y:n,width:i,height:o}})).__isEmptyBrush=l,s.setColor=qg,s.setColor(r),s}var jg=(Object.freeze||Object)({createList:function(e){return Hh(e.getSource(),e)},getLayoutRect:eu,dataStack:{isDimensionStacked:Fh,enableDataStack:Bh,getStackedDimension:zh},createScale:function(e,t){var n=t;ll.isInstance(t)||I(n=new ll(t),Lg);var i=Ag(n);return i.setExtent(e[0],e[1]),Sg(i,n),i},mixinAxisModelCommonMethods:function(e){I(e,Lg)},completeDimensions:Ah,createDimensions:Mh,createSymbol:Ug});function Gg(e,t){return Math.abs(e-t)<1e-8}function Xg(e,t,n){var i=0,o=e[0];if(!o)return!1;for(var r=1;r<e.length;r++){var a=e[r];i+=Zr(o[0],o[1],a[0],a[1],t,n),o=a}var s=e[0];return Gg(o[0],s[0])&&Gg(o[1],s[1])||(i+=Zr(o[0],o[1],s[0],s[1],t,n)),0!==i}function Yg(e,t,n){if(this.name=e,this.geometries=t,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}function Zg(e,t,n){for(var i=[],o=t[0],r=t[1],a=0;a<e.length;a+=2){var s=e.charCodeAt(a)-64,l=e.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),o=s+=o,r=l+=r,i.push([s/n,l/n])}return i}function Jg(e,t){return function(e){if(e.UTF8Encoding){var t=e.UTF8Scale;null==t&&(t=1024);for(var n=e.features,i=0;i<n.length;i++)for(var o=n[i].geometry,r=o.coordinates,a=o.encodeOffsets,s=0;s<r.length;s++){var l=r[s];if("Polygon"===o.type)r[s]=Zg(l,a[s],t);else if("MultiPolygon"===o.type)for(var u=0;u<l.length;u++)l[u]=Zg(l[u],a[s][u],t)}e.UTF8Encoding=!1}}(e),O(k(e.features,(function(e){return e.geometry&&e.properties&&0<e.geometry.coordinates.length})),(function(e){var n=e.properties,i=e.geometry,o=i.coordinates,r=[];"Polygon"===i.type&&r.push({type:"polygon",exterior:o[0],interiors:o.slice(1)}),"MultiPolygon"===i.type&&w(o,(function(e){e[0]&&r.push({type:"polygon",exterior:e[0],interiors:e.slice(1)})}));var a=new Yg(n[t||"name"],r,n.cp);return a.properties=n,a}))}Yg.prototype={constructor:Yg,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,n=[t,t],i=[-t,-t],o=[],r=[],a=this.geometries,s=0;s<a.length;s++)"polygon"===a[s].type&&(Ir(a[s].exterior,o,r),Ce(n,n,o),Ee(i,i,r));return 0===s&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new En(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var i=0,o=n.length;i<o;i++)if("polygon"===n[i].type){var r=n[i].interiors;if(Xg(n[i].exterior,e[0],e[1])){for(var a=0;a<(r?r.length:0);a++)if(Xg(r[a]))continue e;return!0}}return!1},transformTo:function(e,t,n,i){var o=this.getBoundingRect(),r=o.width/o.height;n?i=i||n/r:n=r*i;for(var a=new En(e,t,n,i),s=o.calculateTransform(a),l=this.geometries,u=0;u<l.length;u++)if("polygon"===l[u].type){for(var c=l[u].exterior,d=l[u].interiors,f=0;f<c.length;f++)Te(c[f],c[f],s);for(var h=0;h<(d?d.length:0);h++)for(f=0;f<d[h].length;f++)Te(d[h][f],d[h][f],s)}(o=this._rect).copy(a),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new Yg(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var Qg=Ko();function ep(e,t){var n,i=tp(e,"labels"),o=Kg(t);return np(i,o)||ip(i,o,{labels:K(o)?rp(e,o):op(e,n="auto"===o?function(e){var t=Qg(e).autoInterval;return null!=t?t:Qg(e).autoInterval=e.calculateCategoryInterval()}(e):o),labelCategoryInterval:n})}function tp(e,t){return Qg(e)[t]||(Qg(e)[t]=[])}function np(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function ip(e,t,n){return e.push({key:t,value:n}),n}function op(e,t,n){var i=Ng(e),o=e.scale,r=o.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=r[0],c=o.count();0!==u&&1<l&&2<c/l&&(u=Math.round(Math.ceil(u/l)*l));var d=Pg(e),f=a.get("showMinLabel")||d,h=a.get("showMaxLabel")||d;f&&u!==r[0]&&p(r[0]);for(var g=u;g<=r[1];g+=l)p(g);function p(e){s.push(n?e:{formattedLabel:i(e),rawLabel:o.getLabel(e),tickValue:e})}return h&&g-l!==r[1]&&p(r[1]),s}function rp(e,t,n){var i=e.scale,o=Ng(e),r=[];return w(i.getTicks(),(function(e){var a=i.getLabel(e);t(e,a)&&r.push(n?e:{formattedLabel:o(e),rawLabel:a,tickValue:e})})),r}var ap=[0,1],sp=function(e,t,n){this.dim=e,this.scale=t,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function lp(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}sp.prototype={constructor:sp,contain:function(e){var t=this._extent,n=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return n<=e&&e<=i},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return bl(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var n=this._extent;n[0]=e,n[1]=t},dataToCoord:function(e,t){var n=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&"ordinal"===i.type&&lp(n=n.slice(),i.count()),hl(e,ap,n,t)},coordToData:function(e,t){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&lp(n=n.slice(),i.count());var o=hl(e,n,ap,t);return this.scale.scale(o)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=O(function(e,t){return"category"===e.type?function(e,t){var n,i,o=tp(e,"ticks"),r=Kg(t),a=np(o,r);if(a)return a;if(t.get("show")&&!e.scale.isBlank()||(n=[]),K(r))n=rp(e,r,!0);else if("auto"===r){var s=ep(e,e.getLabelModel());i=s.labelCategoryInterval,n=O(s.labels,(function(e){return e.tickValue}))}else n=op(e,i=r,!0);return ip(o,r,{ticks:n,tickCategoryInterval:i})}(e,t):{ticks:e.scale.getTicks()}}(this,t).ticks,(function(e){return{coord:this.dataToCoord(e),tickValue:e}}),this);return function(e,t,n,i){var o=t.length;if(e.onBand&&!n&&o){var r,a=e.getExtent();if(1===o)t[0].coord=a[0],r=t[1]={coord:a[0]};else{var s=(t[o-1].coord-t[0].coord)/(t[o-1].tickValue-t[0].tickValue);w(t,(function(e){e.coord-=s/2}));var l=e.scale.getExtent();t.push(r={coord:t[o-1].coord+s*(1+l[1]-t[o-1].tickValue)})}var u=a[0]>a[1];c(t[0].coord,a[0])&&(i?t[0].coord=a[0]:t.shift()),i&&c(a[0],t[0].coord)&&t.unshift({coord:a[0]}),c(a[1],r.coord)&&(i?r.coord=a[1]:t.pop()),i&&c(r.coord,a[1])&&t.push({coord:a[1]})}function c(e,t){return e=pl(e),t=pl(t),u?t<e:e<t}}(this,n,t.get("alignWithLabel"),e.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return 0<e&&e<100||(e=5),O(this.scale.getMinorTicks(e),(function(e){return O(e,(function(e){return{coord:this.dataToCoord(e),tickValue:e}}),this)}),this)},getViewLabels:function(){return function(e){return"category"===e.type?function(e){var t=e.getLabelModel(),n=ep(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(e):function(e){var t=e.scale.getTicks(),n=Ng(e);return{labels:O(t,(function(t,i){return{formattedLabel:n(t,i),rawLabel:e.scale.getLabel(t),tickValue:t}}))}}(e)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var t=function(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}(e),n=Ng(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,o=e.scale,r=o.getExtent(),a=o.count();if(r[1]-r[0]<1)return 0;var s=1;40<a&&(s=Math.max(1,Math.floor(a/40)));for(var l=r[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(i)),d=Math.abs(u*Math.sin(i)),f=0,h=0;l<=r[1];l+=s){var g,p=ii(n(l),t.font,"center","top");g=1.3*p.height,f=Math.max(f,1.3*p.width,7),h=Math.max(h,g,7)}var m=f/c,v=h/d;isNaN(m)&&(m=1/0),isNaN(v)&&(v=1/0);var y=Math.max(0,Math.floor(Math.min(m,v))),b=Qg(e.model),T=e.getExtent(),C=b.lastAutoInterval,E=b.lastTickCount;return null!=C&&null!=E&&Math.abs(C-y)<=1&&Math.abs(E-a)<=1&&y<C&&b.axisExtend0===T[0]&&b.axisExtend1===T[1]?y=C:(b.lastTickCount=a,b.lastAutoInterval=y,b.axisExtend0=T[0],b.axisExtend1=T[1]),y}(this)}};var up=Jg,cp={};w(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],(function(e){cp[e]=ne[e]}));var dp={};function fp(e,t){var n=e.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return vc(e,t,n[0]);if(i){for(var o=[],r=0;r<n.length;r++){var a=vc(e,t,n[r]);o.push(a)}return o.join(" ")}}function hp(e,t,n){_n.call(this),this.updateData(e,t,n)}w(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],(function(e){dp[e]=tl[e]})),Kc.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){return Hh(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var gp=hp.prototype,pp=hp.getSymbolSize=function(e,t){var n=e.getItemVisual(t,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function mp(e){return[e[0]/2,e[1]/2]}function vp(e,t){this.parent.drift(e,t)}gp._createSymbol=function(e,t,n,i,o){this.removeAll();var r=Ug(e,-1,-1,2,2,t.getItemVisual(n,"color"),o);r.attr({z2:100,culling:!0,scale:mp(i)}),r.drift=vp,this._symbolType=e,this.add(r)},gp.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},gp.getSymbolPath=function(){return this.childAt(0)},gp.getScale=function(){return this.childAt(0).scale},gp.highlight=function(){this.childAt(0).trigger("emphasis")},gp.downplay=function(){this.childAt(0).trigger("normal")},gp.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},gp.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},gp.updateData=function(e,t,n){this.silent=!1;var i=e.getItemVisual(t,"symbol")||"circle",o=e.hostModel,r=pp(e,t),a=i!==this._symbolType;if(a){var s=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(i,e,t,r,s)}else(l=this.childAt(0)).silent=!1,$s(l,{scale:mp(r)},o,t);if(this._updateCommon(e,t,r,n),a){var l=this.childAt(0),u=n&&n.fadeIn,c={scale:l.scale.slice()};u&&(c.style={opacity:l.style.opacity}),l.scale=[0,0],u&&(l.style.opacity=0),qs(l,c,o,t)}this._seriesModel=o};var yp=["itemStyle"],bp=["emphasis","itemStyle"],Tp=["label"],Cp=["emphasis","label"];function Ep(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var n=this.__symbolOriginalScale,i=n[1]/n[0],o={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(o,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function _p(e){this.group=new _n,this._symbolCtor=e||hp}gp._updateCommon=function(e,t,n,i){var o=this.childAt(0),r=e.hostModel,a=e.getItemVisual(t,"color");"image"!==o.type?o.useStyle({strokeNoScale:!0}):o.setStyle({opacity:null,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,u=i&&i.symbolOffset,c=i&&i.labelModel,d=i&&i.hoverLabelModel,f=i&&i.hoverAnimation,h=i&&i.cursorStyle;if(!i||e.hasItemOption){var g=i&&i.itemModel?i.itemModel:e.getItemModel(t);s=g.getModel(yp).getItemStyle(["color"]),l=g.getModel(bp).getItemStyle(),u=g.getShallow("symbolOffset"),c=g.getModel(Tp),d=g.getModel(Cp),f=g.getShallow("hoverAnimation"),h=g.getShallow("cursor")}else l=b({},l);var p=o.style,m=e.getItemVisual(t,"symbolRotate");o.attr("rotation",(m||0)*Math.PI/180||0),u&&o.attr("position",[gl(u[0],n[0]),gl(u[1],n[1])]),h&&o.attr("cursor",h),o.setColor(a,i&&i.symbolInnerColor),o.setStyle(s);var v=e.getItemVisual(t,"opacity");null!=v&&(p.opacity=v);var y=e.getItemVisual(t,"liftZ"),T=o.__z2Origin;null!=y?null==T&&(o.__z2Origin=o.z2,o.z2+=y):null!=T&&(o.z2=T,o.__z2Origin=null);var C=i&&i.useNameLabel;Ms(p,l,c,d,{labelFetcher:r,labelDataIndex:t,defaultText:function(t,n){return C?e.getName(t):fp(e,t)},isRectText:!0,autoColor:a}),o.__symbolOriginalScale=mp(n),o.hoverStyle=l,o.highDownOnUpdate=f&&r.isAnimationEnabled()?Ep:null,ks(o)},gp.fadeOut=function(e,t){var n=this.childAt(0);this.silent=n.silent=!0,t&&t.keepLabel||(n.style.text=null),$s(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},x(hp,_n);var xp=_p.prototype;function Ip(e,t,n,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function Dp(e){return null==e||L(e)||(e={isIgnore:e}),e||{}}function wp(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function Op(e,t,n){var i,o=e.getBaseAxis(),r=e.getOtherAxis(o),a=function(e,t){var n=0,i=e.scale.getExtent();return"start"===t?n=i[0]:"end"===t?n=i[1]:0<i[0]?n=i[0]:i[1]<0&&(n=i[1]),n}(r,n),s=o.dim,l=r.dim,u=t.mapDimension(l),c=t.mapDimension(s),d="x"===l||"radius"===l?1:0,f=O(e.dimensions,(function(e){return t.mapDimension(e)})),h=t.getCalculationInfo("stackResultDimension");return(i|=Fh(t,f[0]))&&(f[0]=h),(i|=Fh(t,f[1]))&&(f[1]=h),{dataDimsForPoint:f,valueStart:a,valueAxisDim:l,baseAxisDim:s,stacked:!!i,valueDim:u,baseDim:c,baseDataOffset:d,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Rp(e,t,n,i){var o=NaN;e.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(o)&&(o=e.valueStart);var r=e.baseDataOffset,a=[];return a[r]=n.get(e.baseDim,i),a[1-r]=o,t.dataToPoint(a)}xp.updateData=function(e,t){t=Dp(t);var n=this.group,i=e.hostModel,o=this._data,r=this._symbolCtor,a=wp(e);o||n.removeAll(),e.diff(o).add((function(i){var o=e.getItemLayout(i);if(Ip(e,o,i,t)){var s=new r(e,i,a);s.attr("position",o),e.setItemGraphicEl(i,s),n.add(s)}})).update((function(s,l){var u=o.getItemGraphicEl(l),c=e.getItemLayout(s);Ip(e,c,s,t)?(u?(u.updateData(e,s,a),$s(u,{position:c},i)):(u=new r(e,s)).attr("position",c),n.add(u),e.setItemGraphicEl(s,u)):n.remove(u)})).remove((function(e){var t=o.getItemGraphicEl(e);t&&t.fadeOut((function(){n.remove(t)}))})).execute(),this._data=e},xp.isPersistent=function(){return!0},xp.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl((function(t,n){var i=e.getItemLayout(n);t.attr("position",i)}))},xp.incrementalPrepareUpdate=function(e){this._seriesScope=wp(e),this._data=null,this.group.removeAll()},xp.incrementalUpdate=function(e,t,n){function i(e){e.isGroup||(e.incremental=e.useHoverLayer=!0)}n=Dp(n);for(var o=e.start;o<e.end;o++){var r=t.getItemLayout(o);if(Ip(t,r,o,n)){var a=new this._symbolCtor(t,o,this._seriesScope);a.traverse(i),a.attr("position",r),this.group.add(a),t.setItemGraphicEl(o,a)}}},xp.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl((function(e){e.fadeOut((function(){t.remove(e)}))})):t.removeAll()};var kp=Ce,Sp=Ee,Ap=ue,Np=re,Mp=[],Kp=[],Pp=[];function Lp(e){return isNaN(e[0])||isNaN(e[1])}function Bp(e,t,n,i,o,r,a,s,l,u){return"none"!==u&&u?(function(e,t,n,i,o,r,a,s,l,u,c){for(var d=0,f=n,h=0;h<i;h++){var g=t[f];if(o<=f||f<0)break;if(Lp(g)){if(c){f+=r;continue}break}if(f===n)e[0<r?"moveTo":"lineTo"](g[0],g[1]);else if(0<l){var p=t[d],m="y"===u?1:0,v=(g[m]-p[m])*l;Np(Kp,p),Kp[m]=p[m]+v,Np(Pp,g),Pp[m]=g[m]-v,e.bezierCurveTo(Kp[0],Kp[1],Pp[0],Pp[1],g[0],g[1])}else e.lineTo(g[0],g[1]);d=f,f+=r}return h}).apply(this,arguments):(function(e,t,n,i,o,r,a,s,l,u,c){for(var d=0,f=n,h=0;h<i;h++){var g=t[f];if(o<=f||f<0)break;if(Lp(g)){if(c){f+=r;continue}break}if(f===n)e[0<r?"moveTo":"lineTo"](g[0],g[1]),Np(Kp,g);else if(0<l){var p=f+r,m=t[p];if(c)for(;m&&Lp(t[p]);)m=t[p+=r];var v=.5,y=t[d];if(!(m=t[p])||Lp(m))Np(Pp,g);else{var b,T;if(Lp(m)&&!c&&(m=g),ce(Mp,m,y),"x"===u||"y"===u){var C="x"===u?0:1;b=Math.abs(g[C]-y[C]),T=Math.abs(g[C]-m[C])}else b=me(g,y),T=me(g,m);Ap(Pp,g,Mp,-l*(1-(v=T/(T+b))))}kp(Kp,Kp,s),Sp(Kp,Kp,a),kp(Pp,Pp,s),Sp(Pp,Pp,a),e.bezierCurveTo(Kp[0],Kp[1],Pp[0],Pp[1],g[0],g[1]),Ap(Kp,g,Mp,l*v)}else e.lineTo(g[0],g[1]);d=f,f+=r}return h}).apply(this,arguments)}function Fp(e,t){var n=[1/0,1/0],i=[-1/0,-1/0];if(t)for(var o=0;o<e.length;o++){var r=e[o];r[0]<n[0]&&(n[0]=r[0]),r[1]<n[1]&&(n[1]=r[1]),r[0]>i[0]&&(i[0]=r[0]),r[1]>i[1]&&(i[1]=r[1])}return{min:t?n:i,max:t?i:n}}var zp=ua.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:wa(ua.prototype.brush),buildPath:function(e,t){var n=t.points,i=0,o=n.length,r=Fp(n,t.smoothConstraint);if(t.connectNulls){for(;0<o&&Lp(n[o-1]);o--);for(;i<o&&Lp(n[i]);i++);}for(;i<o;)i+=Bp(e,n,i,o,o,1,r.min,r.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),Hp=ua.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:wa(ua.prototype.brush),buildPath:function(e,t){var n=t.points,i=t.stackedOnPoints,o=0,r=n.length,a=t.smoothMonotone,s=Fp(n,t.smoothConstraint),l=Fp(i,t.smoothConstraint);if(t.connectNulls){for(;0<r&&Lp(n[r-1]);r--);for(;o<r&&Lp(n[o]);o++);}for(;o<r;){var u=Bp(e,n,o,r,r,1,s.min,s.max,t.smooth,a,t.connectNulls);Bp(e,i,o+u-1,u,r,-1,l.min,l.max,t.stackedOnSmooth,a,t.connectNulls),o+=u+1,e.closePath()}}});function Vp(e,t,n){var i=e.getArea(),o=e.getBaseAxis().isHorizontal(),r=i.x,a=i.y,s=i.width,l=i.height,u=n.get("lineStyle.width")||2;r-=u/2,a-=u/2,s+=u,l+=u,r=Math.floor(r),s=Math.round(s);var c=new Ha({shape:{x:r,y:a,width:s,height:l}});return t&&(c.shape[o?"width":"height"]=0,qs(c,{shape:{width:s,height:l}},n)),c}function Wp(e,t,n){var i=e.getArea(),o=new ka({shape:{cx:pl(e.cx,1),cy:pl(e.cy,1),r0:pl(i.r0,1),r:pl(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return t&&(o.shape.endAngle=i.startAngle,qs(o,{shape:{endAngle:i.endAngle}},n)),o}function $p(e,t,n){return e?"polar"===e.type?Wp(e,t,n):"cartesian2d"===e.type?Vp(e,t,n):null:null}function qp(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++){var i=e[n],o=t[n];if(i[0]!==o[0]||i[1]!==o[1])return}return!0}}function Up(e,t){var n=[],i=[],o=[],r=[];return Ir(e,n,i),Ir(t,o,r),Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(i[0]-r[0]),Math.abs(i[1]-r[1]))}function jp(e){return"number"==typeof e?e:e?.5:0}function Gp(e,t,n){for(var i=t.getBaseAxis(),o="x"===i.dim||"radius"===i.dim?0:1,r=[],a=0;a<e.length-1;a++){var s=e[a+1],l=e[a];r.push(l);var u=[];switch(n){case"end":u[o]=s[o],u[1-o]=l[1-o],r.push(u);break;case"middle":var c=[];u[o]=c[o]=(l[o]+s[o])/2,u[1-o]=l[1-o],c[1-o]=s[1-o],r.push(u),r.push(c);break;default:u[o]=l[o],u[1-o]=s[1-o],r.push(u)}}return e[a]&&r.push(e[a]),r}function Xp(e,t,n){if("cartesian2d"!==e.type)return Wp(e,t,n);var i=e.getBaseAxis().isHorizontal(),o=Vp(e,t,n);if(!n.get("clip",!0)){var r=o.shape,a=Math.max(r.width,r.height);i?(r.y-=a,r.height+=2*a):(r.x-=a,r.width+=2*a)}return o}function Yp(e,t,n){return{seriesType:e,performRawSeries:!0,reset:function(e,i,o){var r=e.getData(),a=e.get("symbol"),s=e.get("symbolSize"),l=e.get("symbolKeepAspect"),u=e.get("symbolRotate"),c=K(a),d=K(s),f=K(u),h=c||d||f,g=!c&&a?a:t;if(r.setVisual({legendSymbol:n||g,symbol:g,symbolSize:d?null:s,symbolKeepAspect:l,symbolRotate:u}),!i.isSeriesFiltered(e))return{dataEach:r.hasItemOption||h?function(t,n){if(h){var i=e.getRawValue(n),o=e.getDataParams(n);c&&t.setItemVisual(n,"symbol",a(i,o)),d&&t.setItemVisual(n,"symbolSize",s(i,o)),f&&t.setItemVisual(n,"symbolRotate",u(i,o))}if(t.hasItemOption){var r=t.getItemModel(n),l=r.getShallow("symbol",!0),g=r.getShallow("symbolSize",!0),p=r.getShallow("symbolRotate",!0),m=r.getShallow("symbolKeepAspect",!0);null!=l&&t.setItemVisual(n,"symbol",l),null!=g&&t.setItemVisual(n,"symbolSize",g),null!=p&&t.setItemVisual(n,"symbolRotate",p),null!=m&&t.setItemVisual(n,"symbolKeepAspect",m)}}:null}}}}function Zp(e){return{seriesType:e,plan:qc(),reset:function(e){var t=e.getData(),n=e.coordinateSystem,i=e.pipelineContext.large;if(n){var o=O(n.dimensions,(function(e){return t.mapDimension(e)})).slice(0,2),r=o.length,a=t.getCalculationInfo("stackResultDimension");return Fh(t,o[0])&&(o[0]=a),Fh(t,o[1])&&(o[1]=a),r&&{progress:function(e,t){for(var a=i&&new Float32Array((e.end-e.start)*r),s=e.start,l=0,u=[],c=[];s<e.end;s++){var d;if(1===r){var f=t.get(o[0],s);d=!isNaN(f)&&n.dataToPoint(f,null,c)}else{f=u[0]=t.get(o[0],s);var h=u[1]=t.get(o[1],s);d=!isNaN(f)&&!isNaN(h)&&n.dataToPoint(u,null,c)}i?(a[l++]=d?d[0]:NaN,a[l++]=d?d[1]:NaN):t.setItemLayout(s,d&&d.slice()||[NaN,NaN])}i&&t.setLayout("symbolPoints",a)}}}}}}function Jp(e,t){return Math.round(e.length/2)}Gc.extend({type:"line",init:function(){var e=new _n,t=new _p;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,n){var i=e.coordinateSystem,o=this.group,r=e.getData(),a=e.getModel("lineStyle"),s=e.getModel("areaStyle"),l=r.mapArray(r.getItemLayout),u="polar"===i.type,c=this._coordSys,d=this._symbolDraw,f=this._polyline,h=this._polygon,g=this._lineGroup,p=e.get("animation"),m=!s.isEmpty(),v=s.get("origin"),y=function(e,t,n){if(!n.valueDim)return[];for(var i=[],o=0,r=t.count();o<r;o++)i.push(Rp(n,e,t,o));return i}(i,r,Op(i,r,v)),b=e.get("showSymbol"),C=b&&!u&&function(e,t,n){var i=e.get("showAllSymbol"),o="auto"===i;if(!i||o){var r=n.getAxesByScale("ordinal")[0];if(r&&(!o||!function(e,t){var n=e.getExtent(),i=Math.abs(n[1]-n[0])/e.scale.count();isNaN(i)&&(i=0);for(var o=t.count(),r=Math.max(1,Math.round(o/5)),a=0;a<o;a+=r)if(1.5*hp.getSymbolSize(t,a)[e.isHorizontal()?1:0]>i)return!1;return!0}(r,t))){var a=t.mapDimension(r.dim),s={};return w(r.getViewLabels(),(function(e){s[e.tickValue]=1})),function(e){return!s.hasOwnProperty(t.get(a,e))}}}}(e,r,i),E=this._data;E&&E.eachItemGraphicEl((function(e,t){e.__temp&&(o.remove(e),E.setItemGraphicEl(t,null))})),b||d.remove(),o.add(g);var _,x=!u&&e.get("step");i&&i.getArea&&e.get("clip",!0)&&(null!=(_=i.getArea()).width?(_.x-=.1,_.y-=.1,_.width+=.2,_.height+=.2):_.r0&&(_.r0-=.5,_.r1+=.5)),this._clipShapeForSymbol=_,f&&c.type===i.type&&x===this._step?(m&&!h?h=this._newPolygon(l,y,i,p):h&&!m&&(g.remove(h),h=this._polygon=null),g.setClipPath(Xp(i,!1,e)),b&&d.updateData(r,{isIgnore:C,clipShape:_}),r.eachItemGraphicEl((function(e){e.stopAnimation(!0)})),qp(this._stackedOnPoints,y)&&qp(this._points,l)||(p?this._updateAnimation(r,y,i,n,x,v):(x&&(l=Gp(l,i,x),y=Gp(y,i,x)),f.setShape({points:l}),h&&h.setShape({points:l,stackedOnPoints:y})))):(b&&d.updateData(r,{isIgnore:C,clipShape:_}),x&&(l=Gp(l,i,x),y=Gp(y,i,x)),f=this._newPolyline(l,i,p),m&&(h=this._newPolygon(l,y,i,p)),g.setClipPath(Xp(i,!0,e)));var I=function(e,t){var n=e.getVisual("visualMeta");if(n&&n.length&&e.count()&&"cartesian2d"===t.type){for(var i,o,r=n.length-1;0<=r;r--){var a=e.getDimensionInfo(e.dimensions[n[r].dimension]);if("x"===(i=a&&a.coordDim)||"y"===i){o=n[r];break}}if(o){var s=t.getAxis(i),l=O(o.stops,(function(e){return{coord:s.toGlobalCoord(s.dataToCoord(e.value)),color:e.color}})),u=l.length,c=o.outerColors.slice();u&&l[0].coord>l[u-1].coord&&(l.reverse(),c.reverse());var d=l[0].coord-10,f=l[u-1].coord+10,h=f-d;if(h<.001)return"transparent";w(l,(function(e){e.offset=(e.coord-d)/h})),l.push({offset:u?l[u-1].offset:.5,color:c[1]||"transparent"}),l.unshift({offset:u?l[0].offset:.5,color:c[0]||"transparent"});var g=new Ya(0,0,0,0,l,!0);return g[i]=d,g[i+"2"]=f,g}}}(r,i)||r.getVisual("color");f.useStyle(T(a.getLineStyle(),{fill:"none",stroke:I,lineJoin:"bevel"}));var D=e.get("smooth");if(D=jp(e.get("smooth")),f.setShape({smooth:D,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),h){var R=r.getCalculationInfo("stackedOnSeries"),k=0;h.useStyle(T(s.getAreaStyle(),{fill:I,opacity:.7,lineJoin:"bevel"})),R&&(k=jp(R.get("smooth"))),h.setShape({smooth:D,stackedOnSmooth:k,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=r,this._coordSys=i,this._stackedOnPoints=y,this._points=l,this._step=x,this._valueOrigin=v},dispose:function(){},highlight:function(e,t,n,i){var o=e.getData(),r=Mo(o,i);if(!(r instanceof Array)&&null!=r&&0<=r){var a=o.getItemGraphicEl(r);if(!a){var s=o.getItemLayout(r);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;(a=new hp(o,r)).position=s,a.setZ(e.get("zlevel"),e.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,o.setItemGraphicEl(r,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else Gc.prototype.highlight.call(this,e,t,n,i)},downplay:function(e,t,n,i){var o=e.getData(),r=Mo(o,i);if(null!=r&&0<=r){var a=o.getItemGraphicEl(r);a&&(a.__temp?(o.setItemGraphicEl(r,null),this.group.remove(a)):a.downplay())}else Gc.prototype.downplay.call(this,e,t,n,i)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new zp({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t},_newPolygon:function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Hp({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(e,t,n,i,o,r){var a=this._polyline,s=this._polygon,l=e.hostModel,u=function(e,t,n,i,o,r,a,s){for(var l=function(e,t){var n=[];return t.diff(e).add((function(e){n.push({cmd:"+",idx:e})})).update((function(e,t){n.push({cmd:"=",idx:t,idx1:e})})).remove((function(e){n.push({cmd:"-",idx:e})})).execute(),n}(e,t),u=[],c=[],d=[],f=[],h=[],g=[],p=[],m=Op(o,t,a),v=Op(r,e,s),y=0;y<l.length;y++){var b=l[y],T=!0;switch(b.cmd){case"=":var C=e.getItemLayout(b.idx),E=t.getItemLayout(b.idx1);(isNaN(C[0])||isNaN(C[1]))&&(C=E.slice()),u.push(C),c.push(E),d.push(n[b.idx]),f.push(i[b.idx1]),p.push(t.getRawIndex(b.idx1));break;case"+":var _=b.idx;u.push(o.dataToPoint([t.get(m.dataDimsForPoint[0],_),t.get(m.dataDimsForPoint[1],_)])),c.push(t.getItemLayout(_).slice()),d.push(Rp(m,o,t,_)),f.push(i[_]),p.push(t.getRawIndex(_));break;case"-":var x=e.getRawIndex(_=b.idx);x!==_?(u.push(e.getItemLayout(_)),c.push(r.dataToPoint([e.get(v.dataDimsForPoint[0],_),e.get(v.dataDimsForPoint[1],_)])),d.push(n[_]),f.push(Rp(v,r,e,_)),p.push(x)):T=!1}T&&(h.push(b),g.push(g.length))}g.sort((function(e,t){return p[e]-p[t]}));var I=[],D=[],w=[],O=[],R=[];for(y=0;y<g.length;y++)I[y]=u[_=g[y]],D[y]=c[_],w[y]=d[_],O[y]=f[_],R[y]=h[_];return{current:I,next:D,stackedOnCurrent:w,stackedOnNext:O,status:R}}(this._data,e,this._stackedOnPoints,t,this._coordSys,n,this._valueOrigin,r),c=u.current,d=u.stackedOnCurrent,f=u.next,h=u.stackedOnNext;if(o&&(c=Gp(u.current,n,o),d=Gp(u.stackedOnCurrent,n,o),f=Gp(u.next,n,o),h=Gp(u.stackedOnNext,n,o)),3e3<Up(c,f)||s&&3e3<Up(d,h))return a.setShape({points:f}),void(s&&s.setShape({points:f,stackedOnPoints:h}));a.shape.__points=u.current,a.shape.points=c,$s(a,{shape:{points:f}},l),s&&(s.setShape({points:c,stackedOnPoints:d}),$s(s,{shape:{points:f,stackedOnPoints:h}},l));for(var g=[],p=u.status,m=0;m<p.length;m++)if("="===p[m].cmd){var v=e.getItemGraphicEl(p[m].idx1);v&&g.push({el:v,ptIdx:m})}a.animators&&a.animators.length&&a.animators[0].during((function(){for(var e=0;e<g.length;e++)g[e].el.attr("position",a.shape.__points[g[e].ptIdx])}))},remove:function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(e,i){e.__temp&&(t.remove(e),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Qp={average:function(e){for(var t=0,n=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}};function em(e){return this._axes[e]}function tm(e){this._axes={},this._dimList=[],this.name=e||""}function nm(e){tm.call(this,e)}function im(e,t,n,i,o){sp.call(this,e,t,n),this.type=i||"value",this.position=o||"bottom"}tm.prototype={constructor:tm,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return O(this._dimList,em,this)},getAxesByScale:function(e){return e=e.toLowerCase(),k(this.getAxes(),(function(t){return t.scale.type===e}))},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var n=this._dimList,i=e instanceof Array?[]:{},o=0;o<n.length;o++){var r=n[o];i[r]=this._axes[r][t](e[r])}return i}},nm.prototype={constructor:nm,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,n){var i=this.getAxis("x"),o=this.getAxis("y");return(n=n||[])[0]=i.toGlobalCoord(i.dataToCoord(e[0])),n[1]=o.toGlobalCoord(o.dataToCoord(e[1])),n},clampData:function(e,t){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),r=i.getExtent(),a=n.parse(e[0]),s=i.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(o[0],o[1]),a),Math.max(o[0],o[1])),t[1]=Math.min(Math.max(Math.min(r[0],r[1]),s),Math.max(r[0],r[1])),t},pointToData:function(e,t){var n=this.getAxis("x"),i=this.getAxis("y");return(t=t||[])[0]=n.coordToData(n.toLocalCoord(e[0])),t[1]=i.coordToData(i.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),i=Math.min(t[0],t[1]);return new En(n,i,Math.max(e[0],e[1])-n,Math.max(t[0],t[1])-i)}},x(nm,tm),im.prototype={constructor:im,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},x(im,sp);var om={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},rm={};function am(e,t,n,i){w(sm,(function(o){t.extend({type:e+"Axis."+o,mergeDefaultAndTheme:function(t,i){var r=this.layoutMode,a=r?iu(t):{};v(t,i.getTheme().get(o+"Axis")),v(t,this.getDefaultOption()),t.type=n(e,t),r&&nu(t,a,r)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Wh.createByAxisModel(this))},getCategories:function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:y([{},rm[o+"Axis"],i],!0)})})),uu.registerSubTypeDefaulter(e+"Axis",N(n,e))}rm.categoryAxis=v({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},om),rm.valueAxis=v({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},om),rm.timeAxis=T({scale:!0,min:"dataMin",max:"dataMax"},rm.valueAxis),rm.logAxis=T({scale:!0,logBase:10},rm.valueAxis);var sm=["value","category","time","log"],lm=uu.extend({type:"cartesian2dAxis",axis:null,init:function(){lm.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){lm.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){lm.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function um(e,t){return t.type||(t.data?"category":"value")}v(lm.prototype,Lg);var cm={offset:0};function dm(e,t){return e.getCoordSysModel()===t}function fm(e,t,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,n),this.model=e}am("x",lm,um,cm),am("y",lm,um,cm),uu.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var hm=fm.prototype;function gm(e,t,n,i){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,r=e[t],a=n.model,s=a.get("axisLine.onZero"),l=a.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)pm(r[l])&&(o=r[l]);else for(var u in r)if(r.hasOwnProperty(u)&&pm(r[u])&&!i[c(r[u])]){o=r[u];break}o&&(i[c(o)]=!0)}function c(e){return e.dim+"_"+e.index}}function pm(e){return e&&"category"!==e.type&&"time"!==e.type&&function(e){var t=e.scale.getExtent(),n=t[0],i=t[1];return!(0<n&&0<i||n<0&&i<0)}(e)}hm.type="grid",hm.axisPointerEnabled=!0,hm.getRect=function(){return this._rect},hm.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model),w(n.x,(function(e){Sg(e.scale,e.model)})),w(n.y,(function(e){Sg(e.scale,e.model)}));var i={};w(n.x,(function(e){gm(n,"y",e,i)})),w(n.y,(function(e){gm(n,"x",e,i)})),this.resize(this.model,t)},hm.resize=function(e,t,n){var i=eu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=i;var o=this._axesList;function r(){w(o,(function(e){var t=e.isHorizontal(),n=t?[0,i.width]:[0,i.height],o=e.inverse?1:0;e.setExtent(n[o],n[1-o]),function(e,t){var n=e.getExtent(),i=n[0]+n[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return i-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return i-e+t}}(e,t?i.x:i.y)}))}r(),!n&&e.get("containLabel")&&(w(o,(function(e){if(!e.model.get("axisLabel.inside")){var t=function(e){var t=e.scale;if(e.model.get("axisLabel.show")&&!t.isBlank()){var n,i,o="category"===e.type,r=t.getExtent();i=o?t.count():(n=t.getTicks()).length;var a,s,l,u,c,d,f,h,g=e.getLabelModel(),p=Ng(e),m=1;40<i&&(m=Math.ceil(i/40));for(var v=0;v<i;v+=m){var y=p(n?n[v]:r[0]+v),b=(s=g.getTextRect(y),l=(g.get("rotate")||0)*Math.PI/180,d=(u=s.plain()).height,f=(c=u.width)*Math.cos(l)+d*Math.sin(l),h=c*Math.sin(l)+d*Math.cos(l),new En(u.x,u.y,f,h));a?a.union(b):a=b}return a}}(e);if(t){var n=e.isHorizontal()?"height":"width",o=e.model.get("axisLabel.margin");i[n]-=t[n]+o,"top"===e.position?i.y+=t.height+o:"left"===e.position&&(i.x+=t.width+o)}}})),r())},hm.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n){if(null==t)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[t]}},hm.getAxes=function(){return this._axesList.slice()},hm.getCartesian=function(e,t){if(null!=e&&null!=t)return this._coordsMap["x"+e+"y"+t];L(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===e||i[n].getAxis("y").index===t)return i[n]},hm.getCartesians=function(){return this._coordsList.slice()},hm.convertToPixel=function(e,t,n){var i=this._findConvertTarget(e,t);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},hm.convertFromPixel=function(e,t,n){var i=this._findConvertTarget(e,t);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},hm._findConvertTarget=function(e,t){var n,i,o=t.seriesModel,r=t.xAxisModel||o&&o.getReferringComponents("xAxis")[0],a=t.yAxisModel||o&&o.getReferringComponents("yAxis")[0],s=t.gridModel;return o?_(this._coordsList,n=o.coordinateSystem)<0&&(n=null):r&&a?n=this.getCartesian(r.componentIndex,a.componentIndex):r?i=this.getAxis("x",r.componentIndex):a?i=this.getAxis("y",a.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},hm.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},hm._initCartesian=function(e,t,n){var i={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},r={x:0,y:0};if(t.eachComponent("xAxis",a("x"),this),t.eachComponent("yAxis",a("y"),this),!r.x||!r.y)return this._axesMap={},void(this._axesList=[]);function a(t){return function(n,a){if(dm(n,e)){var s=n.get("position");"x"===t?"top"!==s&&"bottom"!==s&&(s=i.bottom?"top":"bottom"):"left"!==s&&"right"!==s&&(s=i.left?"right":"left"),i[s]=!0;var l=new im(t,Ag(n),[0,0],n.get("type"),s);l.onBand="category"===l.type&&n.get("boundaryGap"),l.inverse=n.get("inverse"),(n.axis=l).model=n,l.grid=this,l.index=a,this._axesList.push(l),o[t][a]=l,r[t]++}}}w((this._axesMap=o).x,(function(t,n){w(o.y,(function(i,o){var r="x"+n+"y"+o,a=new nm(r);a.grid=this,a.model=e,this._coordsMap[r]=a,this._coordsList.push(a),a.addAxis(t),a.addAxis(i)}),this)}),this)},hm._updateScale=function(e,t){function n(e,t){w(e.mapDimension(t.dim,!0),(function(n){t.scale.unionExtentFromData(e,zh(e,n))}))}w(this._axesList,(function(e){e.scale.setExtent(1/0,-1/0)})),e.eachSeries((function(e){if(ym(e)){var i=vm(e),o=i[0],r=i[1];if(!dm(o,t)||!dm(r,t))return;var a=this.getCartesian(o.componentIndex,r.componentIndex),s=e.getData(),l=a.getAxis("x"),u=a.getAxis("y");"list"===s.type&&(n(s,l),n(s,u))}}),this)},hm.getTooltipAxes=function(e){var t=[],n=[];return w(this.getCartesians(),(function(i){var o=null!=e&&"auto"!==e?i.getAxis(e):i.getBaseAxis(),r=i.getOtherAxis(o);_(t,o)<0&&t.push(o),_(n,r)<0&&n.push(r)})),{baseAxes:t,otherAxes:n}};var mm=["xAxis","yAxis"];function vm(e){return O(mm,(function(t){return e.getReferringComponents(t)[0]}))}function ym(e){return"cartesian2d"===e.get("coordinateSystem")}function bm(e,t){this.opt=t,this.axisModel=e,T(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new _n;var n=new _n({position:t.position.slice(),rotation:t.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}fm.create=function(e,t){var n=[];return e.eachComponent("grid",(function(i,o){var r=new fm(i,e,t);r.name="grid_"+o,r.resize(i,t,!0),i.coordinateSystem=r,n.push(r)})),e.eachSeries((function(e){if(ym(e)){var t=vm(e),n=t[0],i=t[1],o=n.getCoordSysModel().coordinateSystem;e.coordinateSystem=o.getCartesian(n.componentIndex,i.componentIndex)}})),n},fm.dimensions=fm.prototype.dimensions=nm.prototype.dimensions,Lu.register("cartesian2d",fm);var Tm=Math.PI;bm.prototype={constructor:bm,hasBuilder:function(e){return!!Cm[e]},add:function(e){Cm[e].call(this)},getGroup:function(){return this.group}};var Cm={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,o=[n[0],0],r=[n[1],0];i&&(Te(o,o,i),Te(r,r,i));var a=b({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Wa({anid:"line",subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:r[0],y2:r[1]},style:a,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var s=t.get("axisLine.symbol"),l=t.get("axisLine.symbolSize"),u=t.get("axisLine.symbolOffset")||0;if("number"==typeof u&&(u=[u,u]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var c=l[0],d=l[1];w([{rotate:e.rotation+Math.PI/2,offset:u[0],r:0},{rotate:e.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((o[0]-r[0])*(o[0]-r[0])+(o[1]-r[1])*(o[1]-r[1]))}],(function(t,n){if("none"!==s[n]&&null!=s[n]){var i=Ug(s[n],-c/2,-d/2,c,d,a.stroke,!0),r=t.r+t.offset,l=[o[0]+r*Math.cos(e.rotation),o[1]-r*Math.sin(e.rotation)];i.attr({rotation:t.rotate,position:l,silent:!0,z2:11}),this.group.add(i)}}),this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,n=function(e,t,n){var i=t.axis,o=t.getModel("axisTick");if(o.get("show")&&!i.scale.isBlank()){for(var r=o.getModel("lineStyle"),a=n.tickDirection*o.get("length"),s=Om(i.getTicksCoords(),e._transform,a,T(r.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}),"ticks"),l=0;l<s.length;l++)e.group.add(s[l]);return s}}(this,e,t);!function(e,t,n){if(!Pg(e.axis)){var i=e.get("axisLabel.showMinLabel"),o=e.get("axisLabel.showMaxLabel"),r=(t=t||[])[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=(n=n||[])[0],c=n[1],d=n[n.length-1],f=n[n.length-2];!1===i?(Im(r),Im(u)):Dm(r,a)&&(i?(Im(a),Im(c)):(Im(r),Im(u))),!1===o?(Im(s),Im(d)):Dm(l,s)&&(o?(Im(l),Im(f)):(Im(s),Im(d)))}}(e,function(e,t,n){var i=t.axis;if(V(n.axisLabelShow,t.get("axisLabel.show"))&&!i.scale.isBlank()){var o=t.getModel("axisLabel"),r=o.get("margin"),a=i.getViewLabels(),s=(V(n.labelRotate,o.get("rotate"))||0)*Tm/180,l=_m(n.rotation,s,n.labelDirection),u=t.getCategories&&t.getCategories(!0),c=[],d=xm(t),f=t.get("triggerEvent");return w(a,(function(a,s){var h=a.tickValue,g=a.formattedLabel,p=a.rawLabel,m=o;u&&u[h]&&u[h].textStyle&&(m=new ll(u[h].textStyle,o,t.ecModel));var v=m.getTextColor()||t.get("axisLine.lineStyle.color"),y=[i.dataToCoord(h),n.labelOffset+n.labelDirection*r],b=new Da({anid:"label_"+h,position:y,rotation:l.rotation,silent:d,z2:10});Ps(b.style,m,{text:g,textAlign:m.getShallow("align",!0)||l.textAlign,textVerticalAlign:m.getShallow("verticalAlign",!0)||m.getShallow("baseline",!0)||l.textVerticalAlign,textFill:"function"==typeof v?v("category"===i.type?p:"value"===i.type?h+"":h,s):v}),f&&(b.eventData=Em(t),b.eventData.targetType="axisLabel",b.eventData.value=p),e._dumbGroup.add(b),b.updateTransform(),c.push(b),e.group.add(b),b.decomposeTransform()})),c}}(this,e,t),n),function(e,t,n){var i=t.axis,o=t.getModel("minorTick");if(o.get("show")&&!i.scale.isBlank()){var r=i.getMinorTicksCoords();if(r.length)for(var a=o.getModel("lineStyle"),s=n.tickDirection*o.get("length"),l=T(a.getLineStyle(),T(t.getModel("axisTick").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})),u=0;u<r.length;u++)for(var c=Om(r[u],e._transform,s,l,"minorticks_"+u),d=0;d<c.length;d++)e.group.add(c[d])}}(this,e,t)},axisName:function(){var e=this.opt,t=this.axisModel,n=V(e.axisName,t.get("name"));if(n){var i,o,r=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=this.axisModel.axis.getExtent(),c=u[0]>u[1]?-1:1,d=["start"===r?u[0]-c*l:"end"===r?u[1]+c*l:(u[0]+u[1])/2,wm(r)?e.labelOffset+a*l:0],f=t.get("nameRotate");null!=f&&(f=f*Tm/180),wm(r)?i=_m(e.rotation,null!=f?f:e.rotation,a):(i=function(e,t,n,i){var o,r=El(n-e.rotation),a=i[0]>i[1],s="start"===t&&!a||"start"!==t&&a;return{rotation:r,textAlign:_l(r-Tm/2)?(o=s?"bottom":"top","center"):_l(r-1.5*Tm)?(o=s?"top":"bottom","center"):(o="middle",r<1.5*Tm&&Tm/2<r?s?"left":"right":s?"right":"left"),textVerticalAlign:o}}(e,r,f||0,u),null!=(o=e.axisNameAvailableWidth)&&(o=Math.abs(o/Math.sin(i.rotation)),isFinite(o)||(o=null)));var h=s.getFont(),g=t.get("nameTruncate",!0)||{},p=g.ellipsis,m=V(e.nameTruncateMaxWidth,g.maxWidth,o),v=null!=p&&null!=m?Ul(n,m,h,p,{minChar:2,placeholder:g.placeholder}):n,y=t.get("tooltip",!0),T=t.mainType,C={componentType:T,name:n,$vars:["name"]};C[T+"Index"]=t.componentIndex;var E=new Da({anid:"name",__fullText:n,__truncatedText:v,position:d,rotation:i.rotation,silent:xm(t),z2:1,tooltip:y&&y.show?b({content:n,formatter:function(){return n},formatterParams:C},y):null});Ps(E.style,s,{text:v,textFont:h,textFill:s.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:s.get("align")||i.textAlign,textVerticalAlign:s.get("verticalAlign")||i.textVerticalAlign}),t.get("triggerEvent")&&(E.eventData=Em(t),E.eventData.targetType="axisName",E.eventData.name=n),this._dumbGroup.add(E),E.updateTransform(),this.group.add(E),E.decomposeTransform()}}},Em=bm.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},_m=bm.innerTextLayout=function(e,t,n){var i,o=El(t-e);return{rotation:o,textAlign:_l(o)?(i=0<n?"top":"bottom","center"):_l(o-Tm)?(i=0<n?"bottom":"top","center"):(i="middle",0<o&&o<Tm?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:i}},xm=bm.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function Im(e){e&&(e.ignore=!0)}function Dm(e,t){var n=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(n&&i){var o=it([]);return st(o,o,-e.rotation),n.applyTransform(rt([],o,e.getLocalTransform())),i.applyTransform(rt([],o,t.getLocalTransform())),n.intersect(i)}}function wm(e){return"middle"===e||"center"===e}function Om(e,t,n,i,o){for(var r=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,s[a[1]=0]=u,s[1]=n,t&&(Te(a,a,t),Te(s,s,t));var c=new Wa({anid:o+"_"+e[l].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,silent:!0});r.push(c)}return r}var Rm=w,km=N;function Sm(e,t){return"all"===e||M(e)&&0<=_(e,t)||e===t}function Am(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Mm(e)]}function Nm(e){return!!e.get("handle.show")}function Mm(e){return e.type+"||"+e.id}var Km=eh({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,n,i){this.axisPointerClass&&function(e){var t=Am(e);if(t){var n=t.axisPointerModel,i=t.axis.scale,o=n.option,r=n.get("status"),a=n.get("value");null!=a&&(a=i.parse(a));var s=Nm(n);null==r&&(o.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),o.value=a,s&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}(e),Km.superApply(this,"render",arguments),Pm(this,e,0,n,0,!0)},updateAxisPointer:function(e,t,n,i,o){Pm(this,e,0,n,0,!1)},remove:function(e,t){var n=this._axisPointer;n&&n.remove(t),Km.superApply(this,"remove",arguments)},dispose:function(e,t){Lm(this,t),Km.superApply(this,"dispose",arguments)}});function Pm(e,t,n,i,o,r){var a=Km.getAxisPointerClass(e.axisPointerClass);if(a){var s=function(e){var t=Am(e);return t&&t.axisPointerModel}(t);s?(e._axisPointer||(e._axisPointer=new a)).render(t,s,i,r):Lm(e,i)}}function Lm(e,t,n){var i=e._axisPointer;i&&i.dispose(t,n),e._axisPointer=null}var Bm=[];function Fm(e,t,n){n=n||{};var i=e.coordinateSystem,o=t.axis,r={},a=o.getAxesOnZeroOf()[0],s=o.position,l=a?"onZero":s,u=o.dim,c=i.getRect(),d=[c.x,c.x+c.width,c.y,c.y+c.height],f={left:0,right:1,top:0,bottom:1,onZero:2},h=t.get("offset")||0,g="x"===u?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h];if(a){var p=a.toGlobalCoord(a.dataToCoord(0));g[f.onZero]=Math.max(Math.min(p,g[1]),g[0])}r.position=["y"===u?g[f[l]]:d[0],"x"===u?g[f[l]]:d[3]],r.rotation=Math.PI/2*("x"===u?0:1),r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],r.labelOffset=a?g[f[s]]-g[f.onZero]:0,t.get("axisTick.inside")&&(r.tickDirection=-r.tickDirection),V(n.labelInside,t.get("axisLabel.inside"))&&(r.labelDirection=-r.labelDirection);var m=t.get("axisLabel.rotate");return r.labelRotate="top"===l?-m:m,r.z2=1,r}function zm(e,t,n,i){var o=n.axis;if(!o.scale.isBlank()){var r=n.getModel("splitArea"),a=r.getModel("areaStyle"),s=a.get("color"),l=i.coordinateSystem.getRect(),u=o.getTicksCoords({tickModel:r,clamp:!0});if(u.length){var c=s.length,d=e.__splitAreaColors,f=Q(),h=0;if(d)for(var g=0;g<u.length;g++){var p=d.get(u[g].tickValue);if(null!=p){h=(p+(c-1)*g)%c;break}}var m=o.toGlobalCoord(u[0].coord),v=a.getAreaStyle();for(s=M(s)?s:[s],g=1;g<u.length;g++){var y,b,C,E,_=o.toGlobalCoord(u[g].coord);m=o.isHorizontal()?(b=l.y,E=l.height,(y=m)+(C=_-y)):(y=l.x,C=l.width,(b=m)+(E=_-b));var x=u[g-1].tickValue;null!=x&&f.set(x,h),t.add(new Ha({anid:null!=x?"area_"+x:null,shape:{x:y,y:b,width:C,height:E},style:T({fill:s[h]},v),silent:!0})),h=(h+1)%c}e.__splitAreaColors=f}}}function Hm(e){e.__splitAreaColors=null}Km.registerAxisPointerClass=function(e,t){Bm[e]=t},Km.getAxisPointerClass=function(e){return e&&Bm[e]};var Vm=["axisLine","axisTickLabel","axisName"],Wm=["splitArea","splitLine","minorSplitLine"],$m=Km.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new _n,this.group.add(this._axisGroup),e.get("show")){var r=e.getCoordSysModel(),a=Fm(r,e),s=new bm(e,a);w(Vm,s.add,s),this._axisGroup.add(s.getGroup()),w(Wm,(function(t){e.get(t+".show")&&this["_"+t](e,r)}),this),Xs(o,this._axisGroup,e),$m.superCall(this,"render",e,t,n,i)}},remove:function(){Hm(this)},_splitLine:function(e,t){var n=e.axis;if(!n.scale.isBlank()){var i=e.getModel("splitLine"),o=i.getModel("lineStyle"),r=o.get("color");r=M(r)?r:[r];for(var a=t.coordinateSystem.getRect(),s=n.isHorizontal(),l=0,u=n.getTicksCoords({tickModel:i}),c=[],d=[],f=o.getLineStyle(),h=0;h<u.length;h++){var g=n.toGlobalCoord(u[h].coord);s?(c[0]=g,c[1]=a.y,d[0]=g,d[1]=a.y+a.height):(c[0]=a.x,c[1]=g,d[0]=a.x+a.width,d[1]=g);var p=l++%r.length;this._axisGroup.add(new Wa({anid:null!=u[h].tickValue?"line_"+u[h].tickValue:null,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:T({stroke:r[p]},f),silent:!0}))}}},_minorSplitLine:function(e,t){var n=e.axis,i=e.getModel("minorSplitLine").getModel("lineStyle"),o=t.coordinateSystem.getRect(),r=n.isHorizontal(),a=n.getMinorTicksCoords();if(a.length)for(var s=[],l=[],u=i.getLineStyle(),c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++){var f=n.toGlobalCoord(a[c][d].coord);r?(s[0]=f,s[1]=o.y,l[0]=f,l[1]=o.y+o.height):(s[0]=o.x,s[1]=f,l[0]=o.x+o.width,l[1]=f),this._axisGroup.add(new Wa({anid:"minor_line_"+a[c][d].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,silent:!0}))}},_splitArea:function(e,t){zm(this,this._axisGroup,e,t)}});$m.extend({type:"xAxis"}),$m.extend({type:"yAxis"}),eh({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new Ha({shape:e.coordinateSystem.getRect(),style:T({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),qf((function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})),Yf(Yp("line","circle","line")),Xf(Zp("line")),Uf(of.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(e,t,n){var i=e.getData(),o=e.get("sampling"),r=e.coordinateSystem;if("cartesian2d"===r.type&&o){var a,s=r.getBaseAxis(),l=r.getOtherAxis(s),u=s.getExtent(),c=u[1]-u[0],d=Math.round(i.count()/c);1<d&&("string"==typeof o?a=Qp[o]:"function"==typeof o&&(a=o),a&&e.setData(i.downSample(i.mapDimension(l.dim),1/d,a,Jp)))}}});var qm=Kc.extend({type:"series.__base_bar__",getInitialData:function(e,t){return Hh(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var n=t.dataToPoint(t.clampData(e)),i=this.getData(),o=i.getLayout("offset"),r=i.getLayout("size");return n[t.getBaseAxis().isHorizontal()?0:1]+=o+r/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function Um(e,t,n,i,o,r){Ms(e,t,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:o,labelDataIndex:r,defaultText:fp(o.getData(),r),isRectText:!0,autoColor:i}),jm(e),jm(t)}function jm(e,t){"outside"===e.textPosition&&(e.textPosition=t)}qm.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return e<t&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var Gm=Yo([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Xm={getBarItemStyle:function(e){var t=Gm(this,e);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(t.lineDash=n)}return t}},Ym=ls({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var n=t.cx,i=t.cy,o=Math.max(t.r0||0,0),r=Math.max(t.r,0),a=.5*(r-o),s=o+a,l=t.startAngle,u=t.endAngle,c=t.clockwise,d=Math.cos(l),f=Math.sin(l),h=Math.cos(u),g=Math.sin(u);(c?u-l<2*Math.PI:l-u<2*Math.PI)&&(e.moveTo(d*o+n,f*o+i),e.arc(d*s+n,f*s+i,a,-Math.PI+l,l,!c)),e.arc(n,i,r,l,u,!c),e.moveTo(h*r+n,g*r+i),e.arc(h*s+n,g*s+i,a,u-2*Math.PI,u-Math.PI,!c),0!==o&&(e.arc(n,i,o,u,l,c),e.moveTo(d*o+n,g*o+i)),e.closePath()}}),Zm=["itemStyle","barBorderWidth"],Jm=[0,0];b(ll.prototype,Xm),nh({type:"bar",render:function(e,t,n){this._updateDrawMode(e);var i=e.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n)),this.group},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,i){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,n){var i,o=this.group,r=e.getData(),a=this._data,s=e.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?i=l.isHorizontal():"polar"===s.type&&(i="angle"===l.dim);var u=e.isAnimationEnabled()?e:null,c=e.get("clip",!0),d=function(e,t){var n=e.getArea&&e.getArea();if("cartesian2d"===e.type){var i=e.getBaseAxis();if("category"!==i.type||!i.onBand){var o=t.getLayout("bandWidth");i.isHorizontal()?(n.x-=o,n.width+=2*o):(n.y-=o,n.height+=2*o)}}return n}(s,r);o.removeClipPath();var f=e.get("roundCap",!0),h=e.get("showBackground",!0),g=e.getModel("backgroundStyle"),p=g.get("barBorderRadius")||0,m=[],v=this._backgroundEls||[];r.diff(a).add((function(t){var n=r.getItemModel(t),a=rv[s.type](r,t,n);if(h){var l=rv[s.type](r,t),v=function(e,t,n){return new("polar"===e.type?ka:Ha)({shape:dv(t,n,e),silent:!0,z2:0})}(s,i,l);v.useStyle(g.getBarItemStyle()),"cartesian2d"===s.type&&v.setShape("r",p),m[t]=v}if(r.hasValue(t)){if(c&&tv[s.type](d,a))return void o.remove(y);var y=nv[s.type](t,a,i,u,!1,f);r.setItemGraphicEl(t,y),o.add(y),sv(y,r,t,n,a,e,0,"polar"===s.type)}})).update((function(t,n){var l=r.getItemModel(t),y=rv[s.type](r,t,l);if(h){var b=v[n];b.useStyle(g.getBarItemStyle()),"cartesian2d"===s.type&&b.setShape("r",p),m[t]=b;var T=rv[s.type](r,t);$s(b,{shape:dv(i,T,s)},u,t)}var C=a.getItemGraphicEl(n);if(r.hasValue(t)){if(c&&tv[s.type](d,y))return void o.remove(C);C?$s(C,{shape:y},u,t):C=nv[s.type](t,y,i,u,!0,f),r.setItemGraphicEl(t,C),o.add(C),sv(C,r,t,l,y,e,0,"polar"===s.type)}else o.remove(C)})).remove((function(e){var t=a.getItemGraphicEl(e);"cartesian2d"===s.type?t&&iv(e,u,t):t&&ov(e,u,t)})).execute();var y=this._backgroundGroup||(this._backgroundGroup=new _n);y.removeAll();for(var b=0;b<m.length;++b)y.add(m[b]);o.add(y),this._backgroundEls=m,this._data=r},_renderLarge:function(e,t,n){this._clear(),uv(e,this.group);var i=e.get("clip",!0)?$p(e.coordinateSystem,!1,e):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),uv(t,this.group,!0)},dispose:te,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,n=this._data;e&&e.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(t){"sector"===t.type?ov(t.dataIndex,e,t):iv(t.dataIndex,e,t)}))):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var Qm=Math.max,ev=Math.min,tv={cartesian2d:function(e,t){var n=t.width<0?-1:1,i=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var o=Qm(t.x,e.x),r=ev(t.x+t.width,e.x+e.width),a=Qm(t.y,e.y),s=ev(t.y+t.height,e.y+e.height);t.x=o,t.y=a,t.width=r-o,t.height=s-a;var l=t.width<0||t.height<0;return n<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),l},polar:function(e){return!1}},nv={cartesian2d:function(e,t,n,i,o){var r=new Ha({shape:b({},t),z2:1});if(r.name="item",i){var a=n?"height":"width",s={};r.shape[a]=0,s[a]=t[a],tl[o?"updateProps":"initProps"](r,{shape:s},i,e)}return r},polar:function(e,t,n,i,o,r){var a=new(!n&&r?Ym:ka)({shape:T({clockwise:t.startAngle<t.endAngle},t),z2:1});if(a.name="item",i){var s=n?"r":"endAngle",l={};a.shape[s]=n?0:t.startAngle,l[s]=t[s],tl[o?"updateProps":"initProps"](a,{shape:l},i,e)}return a}};function iv(e,t,n){n.style.text=null,$s(n,{shape:{width:0}},t,e,(function(){n.parent&&n.parent.remove(n)}))}function ov(e,t,n){n.style.text=null,$s(n,{shape:{r:n.shape.r0}},t,e,(function(){n.parent&&n.parent.remove(n)}))}var rv={cartesian2d:function(e,t,n){var i=e.getItemLayout(t),o=n?function(e,t){var n=e.get(Zm)||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}(n,i):0,r=0<i.width?1:-1,a=0<i.height?1:-1;return{x:i.x+r*o/2,y:i.y+a*o/2,width:i.width-r*o,height:i.height-a*o}},polar:function(e,t,n){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function av(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function sv(e,t,n,i,o,r,a,s){var l=t.getItemVisual(n,"color"),u=t.getItemVisual(n,"opacity"),c=t.getVisual("borderColor"),d=i.getModel("itemStyle"),f=i.getModel("emphasis.itemStyle").getBarItemStyle();s||e.setShape("r",d.get("barBorderRadius")||0),e.useStyle(T({stroke:av(o)?"none":c,fill:av(o)?"none":l,opacity:u},d.getBarItemStyle()));var h=i.getShallow("cursor");h&&e.attr("cursor",h),s||Um(e.style,f,i,l,r,n),av(o)&&(f.fill=f.stroke="none"),ks(e,f)}var lv=ua.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var n=t.points,i=this.__startPoint,o=this.__baseDimIdx,r=0;r<n.length;r+=2)i[o]=n[r+o],e.moveTo(i[0],i[1]),e.lineTo(n[r],n[r+1])}});function uv(e,t,n){var i=e.getData(),o=[],r=i.getLayout("valueAxisHorizontal")?1:0;o[1-r]=i.getLayout("valueAxisStart");var a=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var u=i.getLayout("largeBackgroundPoints"),c=[];c[1-r]=i.getLayout("backgroundStart");var d=new lv({shape:{points:u},incremental:!!n,__startPoint:c,__baseDimIdx:r,__largeDataIndices:a,__barWidth:s,silent:!0,z2:0});!function(e,t,n){var i=t.get("borderColor")||t.get("color"),o=t.getItemStyle(["color","borderColor"]);e.useStyle(o),e.style.fill=null,e.style.stroke=i,e.style.lineWidth=n.getLayout("barWidth")}(d,l,i),t.add(d)}var f=new lv({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:o,__baseDimIdx:r,__largeDataIndices:a,__barWidth:s});t.add(f),function(e,t,n){var i=n.getVisual("borderColor")||n.getVisual("color"),o=t.getModel("itemStyle").getItemStyle(["color","borderColor"]);e.useStyle(o),e.style.fill=null,e.style.stroke=i,e.style.lineWidth=n.getLayout("barWidth")}(f,e,i),f.seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",cv),f.on("mousemove",cv))}var cv=od((function(e){var t=function(e,t,n){var i=e.__baseDimIdx,o=1-i,r=e.shape.points,a=e.__largeDataIndices,s=Math.abs(e.__barWidth/2),l=e.__startPoint[o];Jm[0]=t,Jm[1]=n;for(var u=Jm[i],c=Jm[1-i],d=u-s,f=u+s,h=0,g=r.length/2;h<g;h++){var p=2*h,m=r[p+i],v=r[p+o];if(d<=m&&m<=f&&(l<=v?l<=c&&c<=v:v<=c&&c<=l))return a[h]}return-1}(this,e.offsetX,e.offsetY);this.dataIndex=0<=t?t:null}),30,!1);function dv(e,t,n){var i,o="polar"===n.type;return i=o?n.getArea():n.grid.getRect(),o?{cx:i.cx,cy:i.cy,r0:e?i.r0:t.r0,r:e?i.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:i.x,y:e?i.y:t.y,width:e?t.width:i.width,height:e?i.height:t.height}}function fv(e,t,n){t=M(t)&&{coordDimensions:t}||b({},t);var i=e.getSource(),o=Mh(i,t),r=new Th(o,e);return r.initData(i,n),r}Xf(of.VISUAL.LAYOUT,N(ug,"bar")),Xf(of.VISUAL.PROGRESSIVE_LAYOUT,cg),Yf({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var hv={updateSelectedMap:function(e){this._targetList=M(e)?e.slice():[],this._selectTargetMap=R(e||[],(function(e,t){return e.set(t.name,t),e}),Q())},select:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each((function(e){e.selected=!1})),n&&(n.selected=!0)},unSelect:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);n&&(n.selected=!1)},toggleSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=n)return this[n.selected?"unSelect":"select"](e,t),n.selected},isSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return n&&n.selected}};function gv(e,t){this.getAllNames=function(){var e=t();return e.mapArray(e.getName)},this.containName=function(e){return 0<=t().indexOfName(e)},this.indexOfName=function(t){return e().indexOfName(t)},this.getItemVisual=function(t,n){return e().getItemVisual(t,n)}}var pv=th({type:"series.pie",init:function(e){pv.superApply(this,"init",arguments),this.legendVisualProvider=new gv(A(this.getData,this),A(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){pv.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return fv(this,{coordDimensions:["value"],encodeDefaulter:N(wu,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),n=[],i=0,o=e.count();i<o;i++)n.push({name:e.getName(i),value:e.get(t,i),selected:yc(e,i,"selected")});return n},getDataParams:function(e){var t=this.getData(),n=pv.superCall(this,"getDataParams",e),i=[];return t.each(t.mapDimension("value"),(function(e){i.push(e)})),n.percent=Tl(i,e,t.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(e){wo(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function mv(e,t,n,i){var o=t.getData(),r=o.getName(this.dataIndex),a=t.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:e,name:r,seriesId:t.id}),o.each((function(e){vv(o.getItemGraphicEl(e),o.getItemLayout(e),t.isSelected(o.getName(e)),a,n)}))}function vv(e,t,n,i,o){var r=(t.startAngle+t.endAngle)/2,a=n?i:0,s=[Math.cos(r)*a,Math.sin(r)*a];o?e.animate().when(200,{position:s}).start("bounceOut"):e.attr("position",s)}function yv(e,t){_n.call(this);var n=new ka({z2:2}),i=new Ka,o=new Da;this.add(n),this.add(i),this.add(o),this.updateData(e,t,!0)}I(pv,hv);var bv=yv.prototype;function Tv(e,t){w(t,(function(t){t.update="updateView",jf(t,(function(n,i){var o={};return i.eachComponent({mainType:"series",subType:e,query:n},(function(e){e[t.method]&&e[t.method](n.name,n.dataIndex);var i=e.getData();i.each((function(t){var n=i.getName(t);o[n]=e.isSelected(n)||!1}))})),{name:n.name,selected:o,seriesId:n.seriesId}}))}))}function Cv(e){return{getTargetSeries:function(t){var n={},i=Q();return t.eachSeriesByType(e,(function(e){e.__paletteScope=n,i.set(e.uid,e)})),i},reset:function(e,t){var n=e.getRawData(),i={},o=e.getData();o.each((function(e){var t=o.getRawIndex(e);i[t]=e})),n.each((function(t){var r,a=i[t],s=null!=a&&o.getItemVisual(a,"color",!0),l=null!=a&&o.getItemVisual(a,"borderColor",!0);if(s&&l||(r=n.getItemModel(t)),!s){var u=r.get("itemStyle.color")||e.getColorFromPalette(n.getName(t)||t+"",e.__paletteScope,n.count());null!=a&&o.setItemVisual(a,"color",u)}if(!l){var c=r.get("itemStyle.borderColor");null!=a&&o.setItemVisual(a,"borderColor",c)}}))}}}bv.updateData=function(e,t,n){var i=this.childAt(0),o=this.childAt(1),r=this.childAt(2),a=e.hostModel,s=e.getItemModel(t),l=e.getItemLayout(t),u=b({},l);u.label=null;var c=a.getShallow("animationTypeUpdate");n?(i.setShape(u),"scale"===a.getShallow("animationType")?(i.shape.r=l.r0,qs(i,{shape:{r:l.r}},a,t)):(i.shape.endAngle=l.startAngle,$s(i,{shape:{endAngle:l.endAngle}},a,t))):"expansion"===c?i.setShape(u):$s(i,{shape:u},a,t);var d=e.getItemVisual(t,"color");i.useStyle(T({lineJoin:"bevel",fill:d},s.getModel("itemStyle").getItemStyle())),i.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var f=s.getShallow("cursor");f&&i.attr("cursor",f),vv(this,e.getItemLayout(t),a.isSelected(e.getName(t)),a.get("selectedOffset"),a.get("animation")),this._updateLabel(e,t,!n&&"transition"===c),this.highDownOnUpdate=a.get("silent")?null:function(e,t){var n=a.isAnimationEnabled()&&s.get("hoverAnimation");"emphasis"===t?(o.ignore=o.hoverIgnore,r.ignore=r.hoverIgnore,n&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r+a.get("hoverOffset")}},300,"elasticOut"))):(o.ignore=o.normalIgnore,r.ignore=r.normalIgnore,n&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r}},300,"elasticOut")))},ks(this)},bv._updateLabel=function(e,t,n){var i=this.childAt(1),o=this.childAt(2),r=e.hostModel,a=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"color");if(!s||isNaN(s.x)||isNaN(s.y))o.ignore=o.normalIgnore=o.hoverIgnore=i.ignore=i.normalIgnore=i.hoverIgnore=!0;else{var u={points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]},c={x:s.x,y:s.y};n?($s(i,{shape:u},r,t),$s(o,{style:c},r,t)):(i.attr({shape:u}),o.attr({style:c})),o.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var d=a.getModel("label"),f=a.getModel("emphasis.label"),h=a.getModel("labelLine"),g=a.getModel("emphasis.labelLine");l=e.getItemVisual(t,"color"),Ms(o.style,o.hoverStyle={},d,f,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:s.text,autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),o.ignore=o.normalIgnore=!d.get("show"),o.hoverIgnore=!f.get("show"),i.ignore=i.normalIgnore=!h.get("show"),i.hoverIgnore=!g.get("show"),i.setStyle({stroke:l,opacity:e.getItemVisual(t,"opacity")}),i.setStyle(h.getModel("lineStyle").getLineStyle()),i.hoverStyle=g.getModel("lineStyle").getLineStyle();var p=h.get("smooth");p&&!0===p&&(p=.4),i.setShape({smooth:p})}},x(yv,_n),Gc.extend({type:"pie",init:function(){var e=new _n;this._sectorGroup=e},render:function(e,t,n,i){if(!i||i.from!==this.uid){var o=e.getData(),r=this._data,a=this.group,s=t.get("animation"),l=!r,u=e.get("animationType"),c=e.get("animationTypeUpdate"),d=N(mv,this.uid,e,s,n),f=e.get("selectedMode");if(o.diff(r).add((function(e){var t=new yv(o,e);l&&"scale"!==u&&t.eachChild((function(e){e.stopAnimation(!0)})),f&&t.on("click",d),o.setItemGraphicEl(e,t),a.add(t)})).update((function(e,t){var n=r.getItemGraphicEl(t);l||"transition"===c||n.eachChild((function(e){e.stopAnimation(!0)})),n.updateData(o,e),n.off("click"),f&&n.on("click",d),a.add(n),o.setItemGraphicEl(e,n)})).remove((function(e){var t=r.getItemGraphicEl(e);a.remove(t)})).execute(),s&&0<o.count()&&(l?"scale"!==u:"transition"!==c)){for(var h=o.getItemLayout(0),g=1;isNaN(h.startAngle)&&g<o.count();++g)h=o.getItemLayout(g);var p=Math.max(n.getWidth(),n.getHeight())/2,m=A(a.removeClipPath,a);a.setClipPath(this._createClipPath(h.cx,h.cy,p,h.startAngle,h.clockwise,m,e,l))}else a.removeClipPath();this._data=o}},dispose:function(){},_createClipPath:function(e,t,n,i,o,r,a,s){var l=new ka({shape:{cx:e,cy:t,r0:0,r:n,startAngle:i,endAngle:i,clockwise:o}});return(s?qs:$s)(l,{shape:{endAngle:i+(o?1:-1)*Math.PI*2}},a,r),l},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var i=e[0]-n.cx,o=e[1]-n.cy,r=Math.sqrt(i*i+o*o);return r<=n.r&&r>=n.r0}}});var Ev=Math.PI/180;function _v(e,t,n,i,o,r,a,s,l,u){function c(t,n,i){for(var o=t;o<n&&!(e[o].y+i>l+a);o++)if(e[o].y+=i,t<o&&o+1<n&&e[o+1].y>e[o].y+e[o].height)return void d(o,i/2);d(n-1,i/2)}function d(t,n){for(var i=t;0<=i&&!(e[i].y-n<l)&&(e[i].y-=n,!(0<i&&e[i].y>e[i-1].y+e[i-1].height));i--);}function f(e,t,n,i,o,r){for(var a=t?Number.MAX_VALUE:0,s=0,l=e.length;s<l;s++)if("none"===e[s].labelAlignTo){var u=Math.abs(e[s].y-i),c=e[s].len,d=e[s].len2,f=u<o+c?Math.sqrt((o+c+d)*(o+c+d)-u*u):Math.abs(e[s].x-n);t&&a<=f&&(f=a-10),!t&&f<=a&&(f=a+10),e[s].x=n+f*r,a=f}}e.sort((function(e,t){return e.y-t.y}));for(var h,g=0,p=e.length,m=[],v=[],y=0;y<p;y++)"outer"===e[y].position&&"labelLine"===e[y].labelAlignTo&&(e[y].linePoints[1][0]+=e[y].x-u,e[y].x=u),(h=e[y].y-g)<0&&c(y,p,-h),g=e[y].y+e[y].height;for(a-g<0&&d(p-1,g-a),y=0;y<p;y++)e[y].y>=n?v.push(e[y]):m.push(e[y]);f(m,!1,t,n,i,o),f(v,!0,t,n,i,o)}function xv(e){return"center"===e.position}var Iv=2*Math.PI,Dv=Math.PI/180;function wv(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var i=e.getData();i.filterSelf((function(e){for(var t=i.getName(e),o=0;o<n.length;o++)if(!n[o].isSelected(t))return!1;return!0}))}}}}Tv("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),Yf(Cv("pie")),Xf(N((function(e,t,n,i){t.eachSeriesByType(e,(function(e){var t=e.getData(),i=t.mapDimension("value"),o=function(e,t){return eu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,n),r=e.get("center"),a=e.get("radius");M(a)||(a=[0,a]),M(r)||(r=[r,r]);var s=gl(o.width,n.getWidth()),l=gl(o.height,n.getHeight()),u=Math.min(s,l),c=gl(r[0],s)+o.x,d=gl(r[1],l)+o.y,f=gl(a[0],u/2),h=gl(a[1],u/2),g=-e.get("startAngle")*Dv,p=e.get("minAngle")*Dv,m=0;t.each(i,(function(e){isNaN(e)||m++}));var v=t.getSum(i),y=Math.PI/(v||m)*2,b=e.get("clockwise"),T=e.get("roseType"),C=e.get("stillShowZeroSum"),E=t.getDataExtent(i);E[0]=0;var _=Iv,x=0,I=g,D=b?1:-1;if(t.each(i,(function(e,n){var i;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:c,cy:d,r0:f,r:T?NaN:h,viewRect:o});else{(i="area"!==T?0===v&&C?y:e*y:Iv/m)<p?_-=i=p:x+=e;var r=I+D*i;t.setItemLayout(n,{angle:i,startAngle:I,endAngle:r,clockwise:b,cx:c,cy:d,r0:f,r:T?hl(e,E,[f,h]):h,viewRect:o}),I=r}})),_<Iv&&m)if(_<=.001){var w=Iv/m;t.each(i,(function(e,n){if(!isNaN(e)){var i=t.getItemLayout(n);i.angle=w,i.startAngle=g+D*n*w,i.endAngle=g+D*(n+1)*w}}))}else y=_/x,I=g,t.each(i,(function(e,n){if(!isNaN(e)){var i=t.getItemLayout(n),o=i.angle===p?p:e*y;i.startAngle=I,i.endAngle=I+D*o,I+=D*o}}));!function(e,t,n,i,o,r){var a,s,l=e.getData(),u=[],c=!1,d=(e.get("minShowLabelAngle")||0)*Ev;l.each((function(i){var r=l.getItemLayout(i),f=l.getItemModel(i),h=f.getModel("label"),g=h.get("position")||f.get("emphasis.label.position"),p=h.get("distanceToLabelLine"),m=h.get("alignTo"),v=gl(h.get("margin"),n),y=h.get("bleedMargin"),b=h.getFont(),T=f.getModel("labelLine"),C=T.get("length");C=gl(C,n);var E=T.get("length2");if(E=gl(E,n),!(r.angle<d)){var _,x,I,D,w=(r.startAngle+r.endAngle)/2,O=Math.cos(w),R=Math.sin(w);a=r.cx,s=r.cy;var k,S=e.getFormattedLabel(i,"normal")||l.getName(i),A=ii(S,b,D,"top"),N="inside"===g||"inner"===g;if("center"===g)_=r.cx,x=r.cy,D="center";else{var M=(N?(r.r+r.r0)/2*O:r.r*O)+a,K=(N?(r.r+r.r0)/2*R:r.r*R)+s;if(_=M+3*O,x=K+3*R,!N){var P=M+O*(C+t-r.r),L=K+R*(C+t-r.r),B=P+(O<0?-1:1)*E;_="edge"===m?O<0?o+v:o+n-v:B+(O<0?-p:p),I=[[M,K],[P,L],[B,x=L]]}D=N?"center":"edge"===m?0<O?"right":"left":0<O?"left":"right"}var F=h.get("rotate");k="number"==typeof F?F*(Math.PI/180):F?O<0?-w+Math.PI:-w:0,c=!!k,r.label={x:_,y:x,position:g,height:A.height,len:C,len2:E,linePoints:I,textAlign:D,verticalAlign:"middle",rotation:k,inside:N,labelDistance:p,labelAlignTo:m,labelMargin:v,bleedMargin:y,textRect:A,text:S,font:b},N||u.push(r.label)}})),!c&&e.get("avoidLabelOverlap")&&function(e,t,n,i,o,r,a,s){for(var l=[],u=[],c=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<e.length;f++)xv(e[f])||(e[f].x<t?(c=Math.min(c,e[f].x),l.push(e[f])):(d=Math.max(d,e[f].x),u.push(e[f])));for(_v(u,t,n,i,1,0,r,0,s,d),_v(l,t,n,i,-1,0,r,0,s,c),f=0;f<e.length;f++){var h=e[f];if(!xv(h)){var g=h.linePoints;if(g){var p,m="edge"===h.labelAlignTo,v=h.textRect.width;(p=m?h.x<t?g[2][0]-h.labelDistance-a-h.labelMargin:a+o-h.labelMargin-g[2][0]-h.labelDistance:h.x<t?h.x-a-h.bleedMargin:a+o-h.x-h.bleedMargin)<h.textRect.width&&(h.text=si(h.text,p,h.font),"edge"===h.labelAlignTo&&(v=ni(h.text,h.font)));var y=g[1][0]-g[2][0];m?g[2][0]=h.x<t?a+h.labelMargin+v+h.labelDistance:a+o-h.labelMargin-v-h.labelDistance:(g[2][0]=h.x<t?h.x+h.labelDistance:h.x-h.labelDistance,g[1][0]=g[2][0]+y),g[1][1]=g[2][1]=h.y}}}}(u,a,s,t,n,i,o,r)}(e,h,o.width,o.height,o.x,o.y)}))}),"pie")),Uf(wv("pie")),Kc.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return Hh(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var Ov=ls({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var n=t.points,i=t.size,o=this.symbolProxy,r=o.shape;if(!((e.getContext?e.getContext():e)&&i[0]<4))for(var a=0;a<n.length;){var s=n[a++],l=n[a++];isNaN(s)||isNaN(l)||this.softClipShape&&!this.softClipShape.contain(s,l)||(r.x=s-i[0]/2,r.y=l-i[1]/2,r.width=i[0],r.height=i[1],o.buildPath(e,r,!0))}},afterBrush:function(e){var t=this.shape,n=t.points,i=t.size;if(i[0]<4){this.setTransform(e);for(var o=0;o<n.length;){var r=n[o++],a=n[o++];isNaN(r)||isNaN(a)||this.softClipShape&&!this.softClipShape.contain(r,a)||e.fillRect(r-i[0]/2,a-i[1]/2,i[0],i[1])}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var n=this.shape,i=n.points,o=n.size,r=Math.max(o[0],4),a=Math.max(o[1],4),s=i.length/2-1;0<=s;s--){var l=2*s,u=i[l]-r/2,c=i[1+l]-a/2;if(u<=e&&c<=t&&e<=u+r&&t<=c+a)return s}return-1}});function Rv(){this.group=new _n}var kv=Rv.prototype;function Sv(e,t,n){sp.call(this,e,t,n),this.type="value",this.angle=0,this.name=""}function Av(e,t,n){this._model=e,this.dimensions=[],this._indicatorAxes=O(e.getIndicatorModels(),(function(e,t){var n="indicator_"+t,i=new Sv(n,"log"===e.get("axisType")?new Og:new eg);return i.name=e.get("name"),(i.model=e).axis=i,this.dimensions.push(n),i}),this),this.resize(e,n)}kv.isPersistent=function(){return!this._incremental},kv.updateData=function(e,t){this.group.removeAll();var n=new Ov({rectHover:!0,cursor:"default"});n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!1,t),this.group.add(n),this._incremental=null},kv.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild((function(e){null!=e.startIndex&&(t=new Float32Array(t.buffer,4*e.startIndex*2,2*(e.endIndex-e.startIndex))),e.setShape("points",t)}))}},kv.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),2e6<e.count()?(this._incremental||(this._incremental=new Ja({silent:!0})),this.group.add(this._incremental)):this._incremental=null},kv.incrementalUpdate=function(e,t,n){var i;this._incremental?(i=new Ov,this._incremental.addDisplayable(i,!0)):((i=new Ov({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(i)),i.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(i,t,!!this._incremental,n)},kv._setCommon=function(e,t,n,i){var o=t.hostModel;i=i||{};var r=t.getVisual("symbolSize");e.setShape("size",r instanceof Array?r:[r,r]),e.softClipShape=i.clipShape||null,e.symbolProxy=Ug(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var a=e.shape.size[0]<4;e.useStyle(o.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("color");s&&e.setColor(s),n||(e.seriesIndex=o.seriesIndex,e.on("mousemove",(function(t){e.dataIndex=null;var n=e.findDataIndex(t.offsetX,t.offsetY);0<=n&&(e.dataIndex=n+(e.startIndex||0))})))},kv.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},kv._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},nh({type:"scatter",render:function(e,t,n){var i=e.getData();this._updateSymbolDraw(i,e).updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,n){var i=e.getData();this._updateSymbolDraw(i,e).incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var i=e.getData();if(this.group.dirty(),!this._finished||1e4<i.count()||!this._symbolDraw.isPersistent())return{update:!0};var o=Zp().reset(e);o.progress&&o.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_getClipShape:function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},_updateSymbolDraw:function(e,t){var n=this._symbolDraw,i=t.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new Rv:new _p,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),Yf(Yp("scatter","circle")),Xf(Zp("scatter")),x(Sv,sp),Av.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Av.prototype.dataToPoint=function(e,t){return this.coordToPoint(this._indicatorAxes[t].dataToCoord(e),t)},Av.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},Av.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,i=Math.sqrt(t*t+n*n);t/=i,n/=i;for(var o,r=Math.atan2(-n,t),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],c=Math.abs(r-u.angle);c<a&&(o=u,s=l,a=c)}return[s,+(o&&o.coordToData(i))]},Av.prototype.resize=function(e,t){var n=e.get("center"),i=t.getWidth(),o=t.getHeight(),r=Math.min(i,o)/2;this.cx=gl(n[0],i),this.cy=gl(n[1],o),this.startAngle=e.get("startAngle")*Math.PI/180;var a=e.get("radius");"string"!=typeof a&&"number"!=typeof a||(a=[0,a]),this.r0=gl(a[0],r),this.r=gl(a[1],r),w(this._indicatorAxes,(function(e,t){e.setExtent(this.r0,this.r);var n=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),e.angle=n}),this)},Av.prototype.update=function(e,t){var n=this._indicatorAxes,i=this._model;w(n,(function(e){e.scale.setExtent(1/0,-1/0)})),e.eachSeriesByType("radar",(function(t,o){if("radar"===t.get("coordinateSystem")&&e.getComponent("radar",t.get("radarIndex"))===i){var r=t.getData();w(n,(function(e){e.scale.unionExtentFromData(r,r.mapDimension(e.dim))}))}}),this);var o=i.get("splitNumber");function r(e){var t=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),n=e/t;return 2===n?n=5:n*=2,n*t}w(n,(function(e,t){var n=kg(e.scale,e.model).extent;Sg(e.scale,e.model);var i=e.model,a=e.scale,s=i.getMin(),l=i.getMax(),u=a.getInterval();if(null!=s&&null!=l)a.setExtent(+s,+l),a.setInterval((l-s)/o);else if(null!=s)for(;a.setExtent(+s,d=s+u*o),a.setInterval(u),u=r(u),d<n[1]&&isFinite(d)&&isFinite(n[1]););else if(null!=l)for(;a.setExtent(f=l-u*o,+l),a.setInterval(u),u=r(u),f>n[0]&&isFinite(f)&&isFinite(n[0]););else{var c=a.getTicks().length-1;o<c&&(u=r(u));var d,f=pl((d=Math.ceil(n[1]/u)*u)-u*o);a.setExtent(f,d),a.setInterval(u)}}))},Av.dimensions=[],Av.create=function(e,t){var n=[];return e.eachComponent("radar",(function(i){var o=new Av(i,e,t);n.push(o),i.coordinateSystem=o})),e.eachSeriesByType("radar",(function(e){"radar"===e.get("coordinateSystem")&&(e.coordinateSystem=n[e.get("radarIndex")||0])})),n},Lu.register("radar",Av);var Nv=rm.valueAxis;function Mv(e,t){return T({show:t},e)}Qf({type:"radar",optionUpdated:function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),o=this.get("axisTick"),r=this.get("axisType"),a=this.get("axisLabel"),s=this.get("name"),l=this.get("name.show"),u=this.get("name.formatter"),c=this.get("nameGap"),d=this.get("triggerEvent"),f=O(this.get("indicator")||[],(function(f){null!=f.max&&0<f.max&&!f.min?f.min=0:null!=f.min&&f.min<0&&!f.max&&(f.max=0);var h=s;if(null!=f.color&&(h=T({color:f.color},s)),f=v(m(f),{boundaryGap:e,splitNumber:t,scale:n,axisLine:i,axisTick:o,axisType:r,axisLabel:a,name:f.text,nameLocation:"end",nameGap:c,nameTextStyle:h,triggerEvent:d},!1),l||(f.name=""),"string"==typeof u){var g=f.name;f.name=u.replace("{value}",null!=g?g:"")}else"function"==typeof u&&(f.name=u(f.name,f));var p=b(new ll(f,null,this.ecModel),Lg);return p.mainType="radar",p.componentIndex=this.componentIndex,p}),this);this.getIndicatorModels=function(){return f}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:v({lineStyle:{color:"#bbb"}},Nv.axisLine),axisLabel:Mv(Nv.axisLabel,!1),axisTick:Mv(Nv.axisTick,!1),axisType:"interval",splitLine:Mv(Nv.splitLine,!0),splitArea:Mv(Nv.splitArea,!0),indicator:[]}});var Kv=["axisLine","axisTickLabel","axisName"];eh({type:"radar",render:function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;w(O(t.getIndicatorAxes(),(function(e){return new bm(e.model,{position:[t.cx,t.cy],rotation:e.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})})),(function(e){w(Kv,e.add,e),this.group.add(e.getGroup())}),this)},_buildSplitLineAndArea:function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var i=e.get("shape"),o=e.getModel("splitLine"),r=e.getModel("splitArea"),a=o.getModel("lineStyle"),s=r.getModel("areaStyle"),l=o.get("show"),u=r.get("show"),c=a.get("color"),d=s.get("color");c=M(c)?c:[c],d=M(d)?d:[d];var f=[],h=[];if("circle"===i)for(var g=n[0].getTicksCoords(),p=t.cx,m=t.cy,v=0;v<g.length;v++)l&&f[D(f,c,v)].push(new Oa({shape:{cx:p,cy:m,r:g[v].coord}})),u&&v<g.length-1&&h[D(h,d,v)].push(new Sa({shape:{cx:p,cy:m,r0:g[v].coord,r:g[v+1].coord}}));else{var y,b=O(n,(function(e,n){var i=e.getTicksCoords();return y=null==y?i.length-1:Math.min(i.length-1,y),O(i,(function(e){return t.coordToPoint(e.coord,n)}))})),C=[];for(v=0;v<=y;v++){for(var E=[],_=0;_<n.length;_++)E.push(b[_][v]);E[0]&&E.push(E[0].slice()),l&&f[D(f,c,v)].push(new Ka({shape:{points:E}})),u&&C&&h[D(h,d,v-1)].push(new Ma({shape:{points:E.concat(C)}})),C=E.slice().reverse()}}var x=a.getLineStyle(),I=s.getAreaStyle();w(h,(function(e,t){this.group.add(gs(e,{style:T({stroke:"none",fill:d[t%d.length]},I),silent:!0}))}),this),w(f,(function(e,t){this.group.add(gs(e,{style:T({fill:"none",stroke:c[t%c.length]},x),silent:!0}))}),this)}function D(e,t,n){var i=n%t.length;return e[i]=e[i]||[],i}}});var Pv=Kc.extend({type:"series.radar",dependencies:["radar"],init:function(e){Pv.superApply(this,"init",arguments),this.legendVisualProvider=new gv(A(this.getData,this),A(this.getRawData,this))},getInitialData:function(e,t){return fv(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e){var t=this.getData(),n=this.coordinateSystem.getIndicatorAxes(),i=this.getData().getName(e);return Ll(""===i?this.name:i)+"<br/>"+O(n,(function(n,i){var o=t.get(t.mapDimension(n.dim),e);return Ll(n.name+" : "+o)})).join("<br />")},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,i=t.getValues(O(n.dimensions,(function(e){return t.mapDimension(e)})),e,!0),o=0,r=i.length;o<r;o++)if(!isNaN(i[o])){var a=n.getIndicatorAxes();return n.coordToPoint(a[o].dataToCoord(i[o]),o)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function Lv(e){return!isNaN(e[0])&&!isNaN(e[1])}function Bv(e){return[e.cx,e.cy]}nh({type:"radar",render:function(e,t,n){var i=e.coordinateSystem,o=this.group,r=e.getData(),a=this._data;function s(e,t){var n=e.getItemVisual(t,"symbol")||"circle",i=e.getItemVisual(t,"color");if("none"!==n){var o=function(e){return M(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),r=Ug(n,-1,-1,2,2,i);return r.attr({style:{strokeNoScale:!0},z2:100,scale:[o[0]/2,o[1]/2]}),r}}function l(t,n,i,o,r,a){i.removeAll();for(var l=0;l<n.length-1;l++){var u=s(o,r);u&&(t[u.__dimIdx=l]?(u.attr("position",t[l]),tl[a?"initProps":"updateProps"](u,{position:n[l]},e,r)):u.attr("position",n[l]),i.add(u))}}function u(e){return O(e,(function(e){return[i.cx,i.cy]}))}r.diff(a).add((function(t){var n=r.getItemLayout(t);if(n){var i=new Ma,o=new Ka,a={shape:{points:n}};i.shape.points=u(n),o.shape.points=u(n),qs(i,a,e,t),qs(o,a,e,t);var s=new _n,c=new _n;s.add(o),s.add(i),s.add(c),l(o.shape.points,n,c,r,t,!0),r.setItemGraphicEl(t,s)}})).update((function(t,n){var i=a.getItemGraphicEl(n),o=i.childAt(0),s=i.childAt(1),u=i.childAt(2),c={shape:{points:r.getItemLayout(t)}};c.shape.points&&(l(o.shape.points,c.shape.points,u,r,t,!1),$s(o,c,e),$s(s,c,e),r.setItemGraphicEl(t,i))})).remove((function(e){o.remove(a.getItemGraphicEl(e))})).execute(),r.eachItemGraphicEl((function(e,t){var n=r.getItemModel(t),i=e.childAt(0),a=e.childAt(1),s=e.childAt(2),l=r.getItemVisual(t,"color");o.add(e),i.useStyle(T(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),i.hoverStyle=n.getModel("emphasis.lineStyle").getLineStyle();var u=n.getModel("areaStyle"),c=n.getModel("emphasis.areaStyle"),d=u.isEmpty()&&u.parentModel.isEmpty(),f=c.isEmpty()&&c.parentModel.isEmpty();f=f&&d,a.ignore=d,a.useStyle(T(u.getAreaStyle(),{fill:l,opacity:.7})),a.hoverStyle=c.getAreaStyle();var h=n.getModel("itemStyle").getItemStyle(["color"]),g=n.getModel("emphasis.itemStyle").getItemStyle(),p=n.getModel("label"),v=n.getModel("emphasis.label");s.eachChild((function(e){e.setStyle(h),e.hoverStyle=m(g);var n=r.get(r.dimensions[e.__dimIdx],t);null!=n&&!isNaN(n)||(n=""),Ms(e.style,e.hoverStyle,p,v,{labelFetcher:r.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:n,autoColor:l,isRectText:!0})})),e.highDownOnUpdate=function(e,t){a.attr("ignore","emphasis"===t?f:d)},ks(e)})),this._data=r},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Yf(Cv("radar")),Yf(Yp("radar","circle")),Xf((function(e){e.eachSeriesByType("radar",(function(e){var t=e.getData(),n=[],i=e.coordinateSystem;if(i){var o=i.getIndicatorAxes();w(o,(function(e,r){t.each(t.mapDimension(o[r].dim),(function(e,t){n[t]=n[t]||[];var o=i.dataToPoint(e,r);n[t][r]=Lv(o)?o:Bv(i)}))})),t.each((function(e){var o=S(n[e],(function(e){return Lv(e)}))||Bv(i);n[e].push(o.slice()),t.setItemLayout(e,n[e])}))}}))})),Uf(wv("radar")),qf((function(e){var t=e.polar;if(t){M(t)||(t=[t]);var n=[];w(t,(function(t,i){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],M(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):n.push(t)})),e.polar=n}w(e.series,(function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)}))}));for(var Fv=[126,25],zv=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Hv=0;Hv<zv.length;Hv++)for(var Vv=0;Vv<zv[Hv].length;Vv++)zv[Hv][Vv][0]/=10.5,zv[Hv][Vv][1]/=-14,zv[Hv][Vv][0]+=Fv[0],zv[Hv][Vv][1]+=Fv[1];var Wv={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]},$v={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},qv=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Uv=Ko(),jv={load:function(e,t,n){var i=Uv(t).parsed;if(i)return i;var o,r=t.specialAreas||{},a=t.geoJSON;try{o=a?Jg(a,n):[]}catch(t){throw new Error("Invalid geoJson format\n"+t.message)}return function(e,t){"china"===e&&t.push(new Yg("南海诸岛",O(zv,(function(e){return{type:"polygon",exterior:e}})),Fv))}(e,o),w(o,(function(t){var n=t.name;!function(e,t){if("china"===e){var n=Wv[t.name];if(n){var i=t.center;i[0]+=n[0]/10.5,i[1]+=-n[1]/14}}}(e,t),function(e,t){if("world"===e){var n=$v[t.name];if(n){var i=t.center;i[0]=n[0],i[1]=n[1]}}}(e,t),function(e,t){"china"===e&&"台湾"===t.name&&t.geometries.push({type:"polygon",exterior:qv[0]})}(e,t);var i=r[n];i&&t.transformTo(i.left,i.top,i.width,i.height)})),Uv(t).parsed={regions:o,boundingRect:function(e){for(var t,n=0;n<e.length;n++){var i=e[n].getBoundingRect();(t=t||i.clone()).union(i)}return t}(o)}}},Gv=Ko();function Xv(e,t){var n,i,o=e.svgXML;try{j(null!=(i=(n=o&&function(e,t){return(new Ld).parse(e,{ignoreViewBox:!0,ignoreRootClip:!0})}(o)||{}).root))}catch(e){throw new Error("Invalid svg format\n"+e.message)}var r=n.width,a=n.height,s=n.viewBoxRect;if(t||(t=null==r||null==a?i.getBoundingRect():new En(0,0,0,0),null!=r&&(t.width=r),null!=a&&(t.height=a)),s){var l=Gd(s,t.width,t.height),u=i;(i=new _n).add(u),u.scale=l.scale,u.position=l.position}return i.setClipPath(new Ha({shape:t.plain()})),{root:i,boundingRect:t}}var Yv={geoJSON:jv,svg:{load:function(e,t){var n=Gv(t).originRoot;if(n)return{root:n,boundingRect:Gv(t).boundingRect};var i=Xv(t);return Gv(t).originRoot=i.root,Gv(t).boundingRect=i.boundingRect,i},makeGraphic:function(e,t,n){var i=Gv(t),o=i.rootMap||(i.rootMap=Q()),r=o.get(n);if(r)return r;var a=i.originRoot;return r=i.originRootHostKey?Xv(t,i.boundingRect).root:(i.originRootHostKey=n,a),o.set(n,r)},removeGraphic:function(e,t,n){var i=Gv(t),o=i.rootMap;o&&o.removeKey(n),n===i.originRootHostKey&&(i.originRootHostKey=null)}}},Zv={load:function(e,t,n){var i,o=[],r=Q(),a=Q();return w(Qv(e),(function(s){var l=Yv[s.type].load(e,s,n);w(l.regions,(function(e){var n=e.name;t&&t.hasOwnProperty(n)&&(e=e.cloneShallow(n=t[n])),o.push(e),r.set(n,e),a.set(n,e.center)}));var u=l.boundingRect;u&&(i?i.union(u):i=u.clone())})),{regions:o,regionsMap:r,nameCoordMap:a,boundingRect:i||new En(0,0,0,0)}},makeGraphic:Jv("makeGraphic"),removeGraphic:Jv("removeGraphic")};function Jv(e){return function(t,n){var i=Qv(t),o=[];return w(i,(function(i){var r=Yv[i.type][e];r&&o.push(r(t,i,n))})),o}}function Qv(e){return Yd(e)||[]}I(Kc.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=fv(this,{coordDimensions:["value"],encodeDefaulter:N(wu,this)}),n=t.mapDimension("value"),i=Q(),o=[],r=[],a=0,s=t.count();a<s;a++){var l=t.getName(a);i.set(l,!0),o.push({name:l,value:t.get(n,a),selected:yc(t,a,"selected")})}return w(Zv.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,(function(e){var t=e.name;i.get(t)||(o.push({name:t}),r.push(t))})),this.updateSelectedMap(o),t.appendValues([],r),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e){for(var t=this.getData(),n=Al(this.getRawValue(e)),i=t.getName(e),o=this.seriesGroup,r=[],a=0;a<o.length;a++){var s=o[a].originalData.indexOfName(i),l=t.mapDimension("value");isNaN(o[a].originalData.get(l,s))||r.push(Ll(o[a].name))}return r.join(", ")+"<br />"+Ll(i+" : "+n)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,i=n.getRegion(t);return i&&n.dataToPoint(i.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),hv);var ey="\0_ec_interaction_mutex";function ty(e,t){return!!ny(e)[t]}function ny(e){return e[ey]||(e[ey]={})}function iy(e){this._zr=e,this._opt={};var t=A,n=t(oy,this),i=t(ry,this),o=t(ay,this),r=t(sy,this),a=t(ly,this);we.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(t,s){this.disable(),this._opt=T(m(s)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",n),e.on("mousemove",i),e.on("mouseup",o)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",r),e.on("pinch",a))},this.disable=function(){e.off("mousedown",n),e.off("mousemove",i),e.off("mouseup",o),e.off("mousewheel",r),e.off("pinch",a)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function oy(e){if(!(qe(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}}function ry(e){if(this._dragging&&dy("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!ty(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,i=this._x,o=this._y,r=t-i,a=n-o;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&$e(e.event),cy(this,"pan","moveOnMouseMove",e,{dx:r,dy:a,oldX:i,oldY:o,newX:t,newY:n})}}function ay(e){qe(e)||(this._dragging=!1)}function sy(e){var t=dy("zoomOnMouseWheel",e,this._opt),n=dy("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,o=Math.abs(i),r=e.offsetX,a=e.offsetY;if(0!==i&&(t||n)){if(t){var s=3<o?1.4:1<o?1.2:1.1;uy(this,"zoom","zoomOnMouseWheel",e,{scale:0<i?s:1/s,originX:r,originY:a})}if(n){var l=Math.abs(i);uy(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(0<i?1:-1)*(3<l?.4:1<l?.15:.05),originX:r,originY:a})}}}function ly(e){ty(this._zr,"globalPan")||uy(this,"zoom",null,e,{scale:1<e.pinchScale?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function uy(e,t,n,i,o){e.pointerChecker&&e.pointerChecker(i,o.originX,o.originY)&&($e(i.event),cy(e,t,n,i,o))}function cy(e,t,n,i,o){o.isAvailableBehavior=A(dy,null,n,i),e.trigger(t,o)}function dy(e,t,n){var i=n[e];return!e||i&&(!P(i)||t.event[i+"Key"])}function fy(e,t,n){var i=e.target,o=i.position;o[0]+=t,o[1]+=n,i.dirty()}function hy(e,t,n,i){var o=e.target,r=e.zoomLimit,a=o.position,s=o.scale,l=e.zoom=e.zoom||1;if(l*=t,r){var u=r.min||0;l=Math.max(Math.min(r.max||1/0,l),u)}var c=l/e.zoom;e.zoom=l,a[0]-=(n-a[0])*(c-1),a[1]-=(i-a[1])*(c-1),s[0]*=c,s[1]*=c,o.dirty()}jf({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){})),I(iy,we);var gy={axisPointer:1,tooltip:1,brush:1};function py(e,t,n){var i=t.getComponentByElement(e.topTarget),o=i&&i.coordinateSystem;return i&&i!==n&&!gy[i.mainType]&&o&&o.model!==n}function my(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function vy(e,t){t.eachChild((function(t){w(t.__regions,(function(n){t.trigger(e.isSelected(n.name)?"emphasis":"normal")}))}))}function yy(e,t){var n=new _n;this.uid=fl("ec_map_draw"),this._controller=new iy(e.getZr()),this._controllerHost={target:t?n:null},this.group=n,this._updateGroup=t,n.add(this._regionsGroup=new _n),n.add(this._backgroundGroup=new _n)}yy.prototype={constructor:yy,draw:function(e,t,n,i,o){var r="geo"===e.mainType,a=e.getData&&e.getData();r&&t.eachComponent({mainType:"series",subType:"map"},(function(t){a||t.getHostGeoModel()!==e||(a=t.getData())}));var s=e.coordinateSystem;this._updateBackground(s);var l,u=this._regionsGroup,c=this.group,d=s.getTransformInfo(),f=!u.childAt(0)||o;if(f)c.transform=d.roamTransform,c.decomposeTransform(),c.dirty();else{var h=new gt;h.transform=d.roamTransform,h.decomposeTransform(),l=h.scale,$s(c,{scale:h.scale,position:h.position},e)}var g=d.rawScale,p=d.rawPosition;u.removeAll();var m=["itemStyle"],v=["emphasis","itemStyle"],y=["label"],b=["emphasis","label"],T=Q();w(s.regions,(function(t){var n=T.get(t.name)||T.set(t.name,new _n),i=new Xa({segmentIgnoreThreshold:1,shape:{paths:[]}});n.add(i);var o,s=(M=e.getRegionModel(t.name)||e).getModel(m),d=M.getModel(v),h=my(s),C=my(d),E=M.getModel(y),_=M.getModel(b);if(a){o=a.indexOfName(t.name);var x=a.getItemVisual(o,"color",!0);x&&(h.fill=x)}function I(e){return[e[0]*g[0]+p[0],e[1]*g[1]+p[1]]}w(t.geometries,(function(e){if("polygon"===e.type){for(var t=[],n=0;n<e.exterior.length;++n)t.push(I(e.exterior[n]));for(i.shape.paths.push(new Ma({segmentIgnoreThreshold:1,shape:{points:t}})),n=0;n<(e.interiors?e.interiors.length:0);++n){for(var o=e.interiors[n],r=(t=[],0);r<o.length;++r)t.push(I(o[r]));i.shape.paths.push(new Ma({segmentIgnoreThreshold:1,shape:{points:t}}))}}})),i.setStyle(h),i.style.strokeNoScale=!0,i.culling=!0;var D=E.get("show"),O=_.get("show"),R=a&&isNaN(a.get(a.mapDimension("value"),o)),k=a&&a.getItemLayout(o);if(r||R&&(D||O)||k&&k.showLabel){var S,A=r?t.name:o;(!a||0<=o)&&(S=e);var N=new Da({position:I(t.center.slice()),scale:[1/c.scale[0],1/c.scale[1]],z2:10,silent:!0});Ms(N.style,N.hoverStyle={},E,_,{labelFetcher:S,labelDataIndex:A,defaultText:t.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),f||$s(N,{scale:[1/l[0],1/l[1]]},e),n.add(N)}if(a)a.setItemGraphicEl(o,n);else{var M=e.getRegionModel(t.name);i.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:t.name,region:M&&M.option||{}}}(n.__regions||(n.__regions=[])).push(t),n.highDownSilentOnTouch=!!e.get("selectedMode"),ks(n,C),u.add(n)})),this._updateController(e,t,n),function(e,t,n,i,o){n.off("click"),n.off("mousedown"),t.get("selectedMode")&&(n.on("mousedown",(function(){e._mouseDownFlag=!0})),n.on("click",(function(r){if(e._mouseDownFlag){e._mouseDownFlag=!1;for(var a=r.target;!a.__regions;)a=a.parent;if(a){var s={type:("geo"===t.mainType?"geo":"map")+"ToggleSelect",batch:O(a.__regions,(function(e){return{name:e.name,from:o.uid}}))};s[t.mainType+"Id"]=t.id,i.dispatchAction(s),vy(t,n)}}})))}(this,e,u,n,i),vy(e,u)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&Zv.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&w(Zv.makeGraphic(t,this.uid),(function(e){this._backgroundGroup.add(e)}),this),this._mapName=t},_updateController:function(e,t,n){var i=e.coordinateSystem,o=this._controller,r=this._controllerHost;r.zoomLimit=e.get("scaleLimit"),r.zoom=i.getZoom(),o.enable(e.get("roam")||!1);var a=e.mainType;function s(){var t={type:"geoRoam",componentType:a};return t[a+"Id"]=e.id,t}o.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,fy(r,e.dx,e.dy),n.dispatchAction(b(s(),{dx:e.dx,dy:e.dy}))}),this),o.off("zoom").on("zoom",(function(e){if(this._mouseDownFlag=!1,hy(r,e.scale,e.originX,e.originY),n.dispatchAction(b(s(),{zoom:e.scale,originX:e.originX,originY:e.originY})),this._updateGroup){var t=this.group.scale;this._regionsGroup.traverse((function(e){"text"===e.type&&e.attr("scale",[1/t[0],1/t[1]])}))}}),this),o.setPointerChecker((function(t,o,r){return i.getViewRectAfterRoam().contain(o,r)&&!py(t,n,e)}))}};var by="__seriesMapHighDown",Ty="__seriesMapCallKey";function Cy(e){var t=this[by];t&&t.recordVersion===this[Ty]&&Ey(t,e)}function Ey(e,t){var n=e.circle,i=e.labelModel,o=e.hoverLabelModel,r=e.emphasisText,a=e.normalText;t?(n.style.extendFrom(Ps({},o,{text:o.get("show")?r:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(Ps(n.style,i,{text:i.get("show")?a:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function _y(e,t,n){var i=e.getZoom(),o=e.getCenter(),r=t.zoom,a=e.dataToPoint(o);if(null!=t.dx&&null!=t.dy&&(a[0]-=t.dx,a[1]-=t.dy,o=e.pointToData(a),e.setCenter(o)),null!=r){if(n){var s=n.min||0;r=Math.max(Math.min(i*r,n.max||1/0),s)/i}e.scale[0]*=r,e.scale[1]*=r;var l=e.position,u=(t.originY-l[1])*(r-1);l[0]-=(t.originX-l[0])*(r-1),l[1]-=u,e.updateTransform(),o=e.pointToData(a),e.setCenter(o),e.setZoom(r*i)}return{center:e.getCenter(),zoom:e.getZoom()}}nh({type:"map",render:function(e,t,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(r=this._mapDraw)&&o.add(r.group);else if(e.needsDrawMap){var r=this._mapDraw||new yy(n,!0);o.add(r.group),r.draw(e,t,n,this,i),this._mapDraw=r}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,n){var i=e.originalData,o=this.group;i.each(i.mapDimension("value"),(function(t,n){if(!isNaN(t)){var r=i.getItemLayout(n);if(r&&r.point){var a=r.point,s=r.offset,l=new Oa({style:{fill:e.getData().getVisual("color")},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:2)});if(!s){var u=e.mainSeries.getData(),c=i.getName(n),d=u.indexOfName(c),f=i.getItemModel(n),h=f.getModel("label"),g=f.getModel("emphasis.label"),p=u.getItemGraphicEl(d),m=W(e.getFormattedLabel(d,"normal"),c),v=W(e.getFormattedLabel(d,"emphasis"),m),y=p[by],T=Math.random();if(!y){y=p[by]={};var C=N(Cy,!0),E=N(Cy,!1);p.on("mouseover",C).on("mouseout",E).on("emphasis",C).on("normal",E)}b(y,{recordVersion:p[Ty]=T,circle:l,labelModel:h,hoverLabelModel:g,emphasisText:v,normalText:m}),Ey(y,!1)}o.add(l)}}}))}}),jf({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},(function(t){var i=t.coordinateSystem;if("geo"===i.type){var o=_y(i,e,t.get("scaleLimit"));t.setCenter&&t.setCenter(o.center),t.setZoom&&t.setZoom(o.zoom),"series"===n&&w(t.seriesGroup,(function(e){e.setCenter(o.center),e.setZoom(o.zoom)}))}}))}));var xy=Te;function Iy(){gt.call(this)}function Dy(e){this.name=e,gt.call(this),this._roamTransformable=new Iy,this._rawTransformable=new Iy}function wy(e,t,n,i){var o=n.seriesModel,r=o?o.coordinateSystem:null;return r===this?r[e](i):null}function Oy(e,t,n,i){Dy.call(this,e),this.map=t;var o=Zv.load(t,n);this._nameCoordMap=o.nameCoordMap,this._regionsMap=o.regionsMap,this._invertLongitute=null==i||i,this.regions=o.regions,this._rect=o.boundingRect}function Ry(e,t,n,i){var o=n.geoModel,r=n.seriesModel,a=o?o.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return a===this?a[e](i):null}function ky(e,t){var n=e.get("boundingCoords");if(null!=n){var i=n[0],o=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(o[0])||isNaN(o[1])||this.setBoundingRect(i[0],i[1],o[0]-i[0],o[1]-i[1])}var r,a=this.getBoundingRect(),s=e.get("layoutCenter"),l=e.get("layoutSize"),u=t.getWidth(),c=t.getHeight(),d=a.width/a.height*this.aspectScale,f=!1;if(s&&l&&(s=[gl(s[0],u),gl(s[1],c)],l=gl(l,Math.min(u,c)),isNaN(s[0])||isNaN(s[1])||isNaN(l)||(f=!0)),f){var h={};1<d?(h.width=l,h.height=l/d):(h.height=l,h.width=l*d),h.y=s[1]-h.height/2,h.x=s[0]-h.width/2}else(r=e.getBoxLayoutParams()).aspect=d,h=eu(r,{width:u,height:c});this.setViewRect(h.x,h.y,h.width,h.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function Sy(e,t){w(t.get("geoCoord"),(function(t,n){e.addGeoCoord(n,t)}))}I(Iy,gt),Dy.prototype={constructor:Dy,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,n,i){return this._rect=new En(e,t,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,n,i){this.transformTo(e,t,n,i),this._viewRect=new En(e,t,n,i)},transformTo:function(e,t,n,i){var o=this.getBoundingRect(),r=this._rawTransformable;r.transform=o.calculateTransform(new En(e,t,n,i)),r.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=Te([],i,e),n=Te([],n,e),t.origin=i,t.position=[n[0]-i[0],n[1]-i[1]],t.scale=[o,o],this._updateTransform()},_updateTransform:function(){var e=this._rawTransformable;(e.parent=this._roamTransformable).updateTransform(),e.updateTransform(),ot(this.transform||(this.transform=[]),e.transform||nt()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],ut(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?q(e):nt(),rawScale:q(t.scale),rawPosition:q(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,n){var i=t?this._rawTransform:this.transform;return n=n||[],i?xy(n,e,i):re(n,e)},pointToData:function(e){var t=this.invTransform;return t?xy([],e,t):[e[0],e[1]]},convertToPixel:N(wy,"dataToPoint"),convertFromPixel:N(wy,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},I(Dy,gt),Oy.prototype={constructor:Oy,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return!0;return!1},transformTo:function(e,t,n,i){var o=this.getBoundingRect(),r=this._invertLongitute;o=o.clone(),r&&(o.y=-o.y-o.height);var a=this._rawTransformable;if(a.transform=o.calculateTransform(new En(e,t,n,i)),a.decomposeTransform(),r){var s=a.scale;s[1]=-s[1]}a.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return t[n]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,n){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return Dy.prototype.dataToPoint.call(this,e,t,n)},convertToPixel:N(Ry,"dataToPoint"),convertFromPixel:N(Ry,"pointToData")},I(Oy,Dy);var Ay={dimensions:Oy.prototype.dimensions,create:function(e,t){var n=[];e.eachComponent("geo",(function(e,i){var o=e.get("map"),r=e.get("aspectScale"),a=!0,s=Yd(o);s&&s[0]&&"svg"===s[0].type?(null==r&&(r=1),a=!1):null==r&&(r=.75);var l=new Oy(o+i,o,e.get("nameMap"),a);l.aspectScale=r,l.zoomLimit=e.get("scaleLimit"),n.push(l),Sy(l,e),(e.coordinateSystem=l).model=e,l.resize=ky,l.resize(e,t)})),e.eachSeries((function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=n[t]}}));var i={};return e.eachSeriesByType("map",(function(e){if(!e.getHostGeoModel()){var t=e.getMapType();i[t]=i[t]||[],i[t].push(e)}})),w(i,(function(e,i){var o=new Oy(i,i,y(O(e,(function(e){return e.get("nameMap")}))));o.zoomLimit=V.apply(null,O(e,(function(e){return e.get("scaleLimit")}))),n.push(o),o.resize=ky,o.aspectScale=e[0].get("aspectScale"),o.resize(e[0],t),w(e,(function(e){Sy(e.coordinateSystem=o,e)}))})),n},getFilledRegions:function(e,t,n){for(var i=(e||[]).slice(),o=Q(),r=0;r<i.length;r++)o.set(i[r].name,i[r]);return w(Zv.load(t,n).regions,(function(e){var t=e.name;o.get(t)||i.push({name:t})})),i}};Gf("geo",Ay),Xf((function(e){var t={};e.eachSeriesByType("map",(function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!t[i]){var o={};w(n.seriesGroup,(function(t){var n=t.coordinateSystem,i=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&i.each(i.mapDimension("value"),(function(e,t){var r=i.getName(t),a=n.getRegion(r);if(a&&!isNaN(e)){var s=o[r]||0,l=n.dataToPoint(a.center);o[r]=s+1,i.setItemLayout(t,{point:l,offset:s})}}))}));var r=n.getData();r.each((function(e){var t=r.getName(e),n=r.getItemLayout(e)||{};n.showLabel=!o[t],r.setItemLayout(e,n)})),t[i]=!0}}))})),Yf((function(e){e.eachSeriesByType("map",(function(e){var t=e.get("color"),n=e.getModel("itemStyle"),i=n.get("areaColor"),o=n.get("color")||t[e.seriesIndex%t.length];e.getData().setVisual({areaColor:i,color:o})}))})),Uf(of.PROCESSOR.STATISTIC,(function(e){var t={};e.eachSeriesByType("map",(function(e){var n=e.getHostGeoModel(),i=n?"o"+n.id:"i"+e.getMapType();(t[i]=t[i]||[]).push(e)})),w(t,(function(e,t){for(var n=function(e,t){var n={};return w(e,(function(e){e.each(e.mapDimension("value"),(function(t,i){var o="ec-"+e.getName(i);n[o]=n[o]||[],isNaN(t)||n[o].push(t)}))})),e[0].map(e[0].mapDimension("value"),(function(i,o){for(var r="ec-"+e[0].getName(o),a=0,s=1/0,l=-1/0,u=n[r].length,c=0;c<u;c++)s=Math.min(s,n[r][c]),l=Math.max(l,n[r][c]),a+=n[r][c];return 0===u?NaN:"min"===t?s:"max"===t?l:"average"===t?a/u:a}))}(O(e,(function(e){return e.getData()})),e[0].get("mapValueCalculation")),i=0;i<e.length;i++)e[i].originalData=e[i].getData();for(i=0;i<e.length;i++)(e[i].seriesGroup=e)[i].needsDrawMap=0===i&&!e[i].getHostGeoModel(),e[i].setData(n.cloneShallow()),e[i].mainSeries=e[0]}))})),qf((function(e){var t=[];w(e.series,(function(e){e&&"map"===e.type&&(t.push(e),e.map=e.map||e.mapType,T(e,e.mapLocation))}))})),Tv("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var Ny=w,My="\0__link_datas",Ky="\0__link_mainData";function Py(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,Hy(t,n,e),Ny(n,(function(n){Ny(t.TRANSFERABLE_METHODS,(function(t){n.wrapMethod(t,N(Ly,e))}))})),t.wrapMethod("cloneShallow",N(Fy,e)),Ny(t.CHANGABLE_METHODS,(function(n){t.wrapMethod(n,N(By,e))})),j(n[t.dataType]===t)}function Ly(e,t){if(function(e){return e[Ky]===e}(this)){var n=b({},this[My]);Hy(n[this.dataType]=t,n,e)}else Vy(t,this.dataType,this[Ky],e);return t}function By(e,t){return e.struct&&e.struct.update(this),t}function Fy(e,t){return Ny(t[My],(function(n,i){n!==t&&Vy(n.cloneShallow(),i,t,e)})),t}function zy(e){var t=this[Ky];return null==e||null==t?t:t[My][e]}function Hy(e,t,n){e[My]={},Ny(t,(function(t,i){Vy(t,i,e,n)}))}function Vy(e,t,n,i){(n[My][t]=e)[Ky]=n,e.dataType=t,i.struct&&(e[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=e),e.getLinkedData=zy}function Wy(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t}function $y(e,t){this._nodes=[],this.hostModel=e,this.levelModels=O(t||[],(function(t){return new ll(t,e,e.ecModel)}))}function qy(e,t){var n=e.isExpand?e.children:[],i=e.parentNode.children,o=e.hierNode.i?i[e.hierNode.i-1]:null;if(n.length){!function(e){for(var t=e.children,n=t.length,i=0,o=0;0<=--n;){var r=t[n];r.hierNode.prelim+=i,r.hierNode.modifier+=i,i+=r.hierNode.shift+(o+=r.hierNode.change)}}(e);var r=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;o?(e.hierNode.prelim=o.hierNode.prelim+t(e,o),e.hierNode.modifier=e.hierNode.prelim-r):e.hierNode.prelim=r}else o&&(e.hierNode.prelim=o.hierNode.prelim+t(e,o));e.parentNode.hierNode.defaultAncestor=function(e,t,n,i){if(t){for(var o=e,r=e,a=r.parentNode.children[0],s=t,l=o.hierNode.modifier,u=r.hierNode.modifier,c=a.hierNode.modifier,d=s.hierNode.modifier;s=Xy(s),r=Yy(r),s&&r;){o=Xy(o),a=Yy(a),o.hierNode.ancestor=e;var f=s.hierNode.prelim+d-r.hierNode.prelim-u+i(s,r);0<f&&(Zy((h=s).hierNode.ancestor.parentNode===e.parentNode?h.hierNode.ancestor:n,e,f),u+=f,l+=f),d+=s.hierNode.modifier,u+=r.hierNode.modifier,l+=o.hierNode.modifier,c+=a.hierNode.modifier}s&&!Xy(o)&&(o.hierNode.thread=s,o.hierNode.modifier+=d-l),r&&!Yy(a)&&(a.hierNode.thread=r,a.hierNode.modifier+=u-c,n=e)}var h;return n}(e,o,e.parentNode.hierNode.defaultAncestor||i[0],t)}function Uy(e){e.setLayout({x:e.hierNode.prelim+e.parentNode.hierNode.modifier},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function jy(e){return arguments.length?e:Jy}function Gy(e,t){var n={};return e-=Math.PI/2,n.x=t*Math.cos(e),n.y=t*Math.sin(e),n}function Xy(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Yy(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Zy(e,t,n){var i=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=i}function Jy(e,t){return e.parentNode===t.parentNode?1:2}Wy.prototype={constructor:Wy,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),P(e=e||{})&&(e={order:e});var i,o=e.order||"preorder",r=this[e.attr||"children"];"preorder"===o&&(i=t.call(n,this));for(var a=0;!i&&a<r.length;a++)r[a].eachNode(e,t,n);"postorder"===o&&t.call(n,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,i=n.length;t<i;t++){var o=n[t].getNodeById(e);if(o)return o}},contains:function(e){if(e===this)return!0;for(var t=0,n=this.children,i=n.length;t<i;t++){var o=n[t].contains(e);if(o)return o}},getAncestors:function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0)){var t=this.hostTree.data.getItemModel(this.dataIndex),n=this.getLevelModel();return n?t.getModel(e,n.getModel(e)):t.getModel(e)}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},setVisual:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},$y.prototype={constructor:$y,type:"tree",eachNode:function(e,t,n){this.root.eachNode(e,t,n)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,n=0,i=t.length;n<i;n++)t[n].dataIndex=-1;for(n=0,i=e.count();n<i;n++)t[e.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},$y.createTree=function(e,t,n,i){var o=new $y(t,n&&n.levels),r=[],a=1;!function e(t,n){var i=t.value;a=Math.max(a,M(i)?i.length:1),r.push(t);var s=new Wy(t.name,o);n?function(e,t){e.parentNode!==t&&(t.children.push(e),e.parentNode=t)}(s,n):o.root=s,o._nodes.push(s);var l=t.children;if(l)for(var u=0;u<l.length;u++)e(l[u],s)}(e),o.root.updateDepthAndHeight(0);var s=Mh(r,{coordDimensions:["value"],dimensionsCount:a}),l=new Th(s,t);return l.initData(r),i&&i(l),Py({mainData:l,struct:o,structAttr:"tree"}),o.update(),o},Kc.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},n=new ll(e.leaves||{},this,this.ecModel),i=$y.createTree(t,this,{},(function(e){e.wrapMethod("getItemModel",(function(e,t){var o=i.getNodeByDataIndex(t);return o.children.length&&o.isExpand||(e.parentModel=n),e}))})),o=0;i.eachNode("preorder",(function(e){e.depth>o&&(o=e.depth)}));var r=e.expandAndCollapse&&0<=e.initialTreeDepth?e.initialTreeDepth:o;return i.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=r})),i.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,n=t.root.children[0],i=t.getNodeByDataIndex(e),o=i.getValue(),r=i.name;i&&i!==n;)r=i.parentNode.name+"."+r,i=i.parentNode;return Ll(r+(isNaN(o)||null==o?"":" : "+o))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var Qy=ls({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.childPoints,i=n.length,o=t.parentPoint,r=n[0],a=n[i-1];if(1===i)return e.moveTo(o[0],o[1]),void e.lineTo(r[0],r[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,u=1-l,c=gl(t.forkPosition,1),d=[];d[l]=o[l],d[u]=o[u]+(a[u]-o[u])*c,e.moveTo(o[0],o[1]),e.lineTo(d[0],d[1]),e.moveTo(r[0],r[1]),d[l]=r[l],e.lineTo(d[0],d[1]),d[l]=a[l],e.lineTo(d[0],d[1]),e.lineTo(a[0],a[1]);for(var f=1;f<i-1;f++){var h=n[f];e.moveTo(h[0],h[1]),d[l]=h[l],e.lineTo(d[0],d[1])}}});function eb(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==e.getItemVisual(t,"symbol")}function tb(e,t,n){return n.itemModel=t,n.itemStyle=t.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=t.getModel("lineStyle").getLineStyle(),n.labelModel=t.getModel("label"),n.hoverLabelModel=t.getModel("emphasis.label"),n.symbolInnerColor=!1===e.isExpand&&0!==e.children.length?n.itemStyle.fill:"#fff",n}function nb(e,t,n,i,o,r){var a=!n,s=e.tree.getNodeByDataIndex(t),l=s.getModel(),u=(r=tb(s,l,r),e.tree.root),c=s.parentNode===u?s:s.parentNode||s,d=e.getItemGraphicEl(c.dataIndex),f=c.getLayout(),h=d?{x:d.position[0],y:d.position[1],rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,g=s.getLayout();a?(n=new hp(e,t,r)).attr("position",[h.x,h.y]):n.updateData(e,t,r),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,i.add(n),e.setItemGraphicEl(t,n),$s(n,{position:[g.x,g.y]},o);var p=n.getSymbolPath();if("radial"===r.layout){var m,v,y=u.children[0],b=y.getLayout(),C=y.children.length;if(g.x===b.x&&!0===s.isExpand){var E={};E.x=(y.children[0].getLayout().x+y.children[C-1].getLayout().x)/2,E.y=(y.children[0].getLayout().y+y.children[C-1].getLayout().y)/2,(m=Math.atan2(E.y-b.y,E.x-b.x))<0&&(m=2*Math.PI+m),(v=E.x<b.x)&&(m-=Math.PI)}else(m=Math.atan2(g.y-b.y,g.x-b.x))<0&&(m=2*Math.PI+m),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(v=g.x<b.x)&&(m-=Math.PI):(v=g.x>b.x)||(m-=Math.PI);var _=v?"left":"right",x=r.labelModel.get("rotate"),I=x*(Math.PI/180);p.setStyle({textPosition:r.labelModel.get("position")||_,textRotation:null==x?-m:I,textOrigin:"center",verticalAlign:"middle"})}!function(e,t,n,i,o,r,a,s,l){var u=l.edgeShape,c=i.__edge;if("curve"===u)t.parentNode&&t.parentNode!==n&&$s(c=c||(i.__edge=new ja({shape:ob(l,o,o),style:T({opacity:0,strokeNoScale:!0},l.lineStyle)})),{shape:ob(l,r,a),style:{opacity:1}},e);else if("polyline"===u&&"orthogonal"===l.layout&&t!==n&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var d=t.children,f=[],h=0;h<d.length;h++){var g=d[h].getLayout();f.push([g.x,g.y])}$s(c=c||(i.__edge=new Qy({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:l.orient,forkPosition:l.edgeForkPosition},style:T({opacity:0,strokeNoScale:!0},l.lineStyle)})),{shape:{parentPoint:[a.x,a.y],childPoints:f},style:{opacity:1}},e)}s.add(c)}(o,s,u,n,h,f,g,i,r)}function ib(e,t,n,i,o,r){for(var a,s,l=e.tree.getNodeByDataIndex(t),u=e.tree.root,c=l.getModel(),d=(r=tb(l,c,r),l.parentNode===u?l:l.parentNode||l);null==(a=d.getLayout());)d=d.parentNode===u?d:d.parentNode||d;$s(n,{position:[a.x+1,a.y+1]},o,(function(){i.remove(n),e.setItemGraphicEl(t,null)})),n.fadeOut(null,{keepLabel:!0});var f=e.getItemGraphicEl(d.dataIndex).__edge,h=n.__edge||(!1===d.isExpand||1===d.children.length?f:void 0);s=r.edgeShape,h&&("curve"===s?$s(h,{shape:ob(r,a,a),style:{opacity:0}},o,(function(){i.remove(h)})):"polyline"===s&&"orthogonal"===r.layout&&$s(h,{shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]]},style:{opacity:0}},o,(function(){i.remove(h)})))}function ob(e,t,n){var i,o,r,a,s,l,u,c,d=e.orient;if("radial"!==e.layout)return s=t.x,u=t.y,l=n.x,c=n.y,"LR"!==d&&"RL"!==d||(i=s+(l-s)*e.curvature,o=u,r=l+(s-l)*e.curvature,a=c),"TB"!==d&&"BT"!==d||(i=s,o=u+(c-u)*e.curvature,r=l,a=c+(u-c)*e.curvature),{x1:s,y1:u,x2:l,y2:c,cpx1:i,cpy1:o,cpx2:r,cpy2:a};l=n.rawX,c=n.rawY;var f=Gy(s=t.rawX,u=t.rawY),h=Gy(s,u+(c-u)*e.curvature),g=Gy(l,c+(u-c)*e.curvature),p=Gy(l,c);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y,cpx1:h.x,cpy1:h.y,cpx2:g.x,cpy2:g.y}}function rb(e,t){for(var n,i=[e];n=i.pop();)if(t(n),n.isExpand){var o=n.children;if(o.length)for(var r=o.length-1;0<=r;r--)i.push(o[r])}}function ab(e,t,n){if(e&&0<=_(t,e.type)){var i=n.getData().tree.root,o=e.targetNode;if("string"==typeof o&&(o=i.getNodeById(o)),o&&i.contains(o))return{node:o};var r=e.targetNodeId;if(null!=r&&(o=i.getNodeById(r)))return{node:o}}}function sb(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function lb(e,t){return 0<=_(sb(e),t)}function ub(e,t){for(var n=[];e;){var i=e.dataIndex;n.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return n.reverse(),n}function cb(e){this.group=new _n,e.add(this.group)}function db(e,t,n,i,o,r){var a=[[o?e:e-5,t],[e+n,t],[e+n,t+i],[o?e:e-5,t+i]];return r||a.splice(2,0,[e+n+5,t+i/2]),o||a.push([e,t+i/2]),a}function fb(e){var t=Cb(e);return t.stroke=t.fill=t.lineWidth=null,t}nh({type:"tree",init:function(e,t){this._mainGroup=new _n,this._controller=new iy(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,n,i){var o=e.getData(),r=e.layoutInfo,a=this._mainGroup,s=e.get("layout");a.attr("position","radial"===s?[r.x+r.width/2,r.y+r.height/2]:[r.x,r.y]),this._updateViewCoordSys(e,r,s),this._updateController(e,t,n);var l=this._data,u={expandAndCollapse:e.get("expandAndCollapse"),layout:s,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};o.diff(l).add((function(t){eb(o,t)&&nb(o,t,null,a,e,u)})).update((function(t,n){var i=l.getItemGraphicEl(n);eb(o,t)?nb(o,t,i,a,e,u):i&&ib(l,n,i,a,e,u)})).remove((function(t){var n=l.getItemGraphicEl(t);n&&ib(l,t,n,a,e,u)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===u.expandAndCollapse&&o.eachItemGraphicEl((function(t,i){t.off("click").on("click",(function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:i})}))})),this._data=o},_updateViewCoordSys:function(e){var t=e.getData(),n=[];t.each((function(e){var i=t.getItemLayout(e);!i||isNaN(i.x)||isNaN(i.y)||n.push([+i.x,+i.y])}));var i=[],o=[];Ir(n,i,o);var r=this._min,a=this._max;o[0]-i[0]==0&&(i[0]=r?r[0]:i[0]-1,o[0]=a?a[0]:o[0]+1),o[1]-i[1]==0&&(i[1]=r?r[1]:i[1]-1,o[1]=a?a[1]:o[1]+1);var s=e.coordinateSystem=new Dy;s.zoomLimit=e.get("scaleLimit"),s.setBoundingRect(i[0],i[1],o[0]-i[0],o[1]-i[1]),s.setCenter(e.get("center")),s.setZoom(e.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=i,this._max=o},_updateController:function(e,t,n){var i=this._controller,o=this._controllerHost,r=this.group;i.setPointerChecker((function(t,i,o){var a=r.getBoundingRect();return a.applyTransform(r.transform),a.contain(i,o)&&!py(t,n,e)})),i.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){fy(o,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})}),this).on("zoom",(function(t){hy(o,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(e)}),this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),n=this._getNodeGlobalScale(e),i=[n,n];t.eachItemGraphicEl((function(e,t){e.attr("scale",i)}))},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,i=t.scale,o=i&&i[0]||1;return((t.getZoom()-1)*n+1)/o},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),jf({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var n=e.dataIndex,i=t.getData().tree.getNodeByDataIndex(n);i.isExpand=!i.isExpand}))})),jf({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var n=_y(t.coordinateSystem,e);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)}))})),Yf(Yp("tree","circle")),Xf((function(e,t){e.eachSeriesByType("tree",(function(e){!function(e,t){var n=function(e,t){return eu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=n;var i=e.get("layout"),o=0,r=0,a=null;a="radial"===i?(o=2*Math.PI,r=Math.min(n.height,n.width)/2,jy((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(o=n.width,r=n.height,jy());var s=e.getData().tree.root,l=s.children[0];if(l){!function(e){e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t,n,i=[e];t=i.pop();)if(n=t.children,t.isExpand&&n.length)for(var o=n.length-1;0<=o;o--){var r=n[o];r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},i.push(r)}}(s),function(e,t,n){for(var i,o=[e],r=[];i=o.pop();)if(r.push(i),i.isExpand){var a=i.children;if(a.length)for(var s=0;s<a.length;s++)o.push(a[s])}for(;i=r.pop();)t(i,n)}(l,qy,a),s.hierNode.modifier=-l.hierNode.prelim,rb(l,Uy);var u=l,c=l,d=l;rb(l,(function(e){var t=e.getLayout().x;t<u.getLayout().x&&(u=e),t>c.getLayout().x&&(c=e),e.depth>d.depth&&(d=e)}));var f=u===c?1:a(u,c)/2,h=f-u.getLayout().x,g=0,p=0,m=0,v=0;if("radial"===i)g=o/(c.getLayout().x+f+h),p=r/(d.depth-1||1),rb(l,(function(e){var t=Gy(m=(e.getLayout().x+h)*g,v=(e.depth-1)*p);e.setLayout({x:t.x,y:t.y,rawX:m,rawY:v},!0)}));else{var y=e.getOrient();"RL"===y||"LR"===y?(p=r/(c.getLayout().x+f+h),g=o/(d.depth-1||1),rb(l,(function(e){v=(e.getLayout().x+h)*p,e.setLayout({x:m="LR"===y?(e.depth-1)*g:o-(e.depth-1)*g,y:v},!0)}))):"TB"!==y&&"BT"!==y||(g=o/(c.getLayout().x+f+h),p=r/(d.depth-1||1),rb(l,(function(e){m=(e.getLayout().x+h)*g,e.setLayout({x:m,y:v="TB"===y?(e.depth-1)*p:r-(e.depth-1)*p},!0)})))}}}(e,t)}))})),Kc.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var n={name:e.name,children:e.data};!function e(t){var n=0;w(t.children,(function(t){e(t);var i=t.value;M(i)&&(i=i[0]),n+=i}));var i=t.value;M(i)&&(i=i[0]),null!=i&&!isNaN(i)||(i=n),i<0&&(i=0),M(t.value)?t.value[0]=i:t.value=i}(n);var i=e.levels||[],o=O((i=e.levels=function(e,t){var n,i=t.get("color");if(i)return w(e=e||[],(function(e){var t=new ll(e),i=t.get("color");(t.get("itemStyle.color")||i&&"none"!==i)&&(n=!0)})),n||((e[0]||(e[0]={})).color=i.slice()),e}(i,t))||[],(function(e){return new ll(e,this,t)}),this),r=$y.createTree(n,this,null,(function(e){e.wrapMethod("getItemModel",(function(e,t){var n=r.getNodeByDataIndex(t),i=o[n.depth];return i&&(e.parentModel=i),e}))}));return r.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),n=this.getRawValue(e),i=M(n)?Al(n[0]):Al(n);return Ll(t.getName(e)+": "+i)},getDataParams:function(e){var t=Kc.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=ub(n,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},b(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=Q(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}}),cb.prototype={constructor:cb,render:function(e,t,n,i){var o=e.getModel("breadcrumb"),r=this.group;if(r.removeAll(),o.get("show")&&n){var a=o.getModel("itemStyle"),s=a.getModel("textStyle"),l={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(e,l,a,s,i),tu(r,l.pos,l.box)}},_prepare:function(e,t,n){for(var i=e;i;i=i.parentNode){var o=i.getModel().get("name"),r=n.getTextRect(o),a=Math.max(r.width+16,t.emptyItemWidth);t.totalWidth+=a+8,t.renderList.push({node:i,text:o,width:a})}},_renderContent:function(e,t,n,i,o){for(var r,a,s=0,l=t.emptyItemWidth,u=e.get("breadcrumb.height"),c=function(e,t,n){var i=t.width,o=t.height,r=gl(e.x,i),a=gl(e.y,o),s=gl(e.x2,i),l=gl(e.y2,o);return(isNaN(r)||isNaN(parseFloat(e.x)))&&(r=0),(isNaN(s)||isNaN(parseFloat(e.x2)))&&(s=i),(isNaN(a)||isNaN(parseFloat(e.y)))&&(a=0),(isNaN(l)||isNaN(parseFloat(e.y2)))&&(l=o),n=Ml(n||0),{width:Math.max(s-r-n[1]-n[3],0),height:Math.max(l-a-n[0]-n[2],0)}}(t.pos,t.box),d=t.totalWidth,f=t.renderList,h=f.length-1;0<=h;h--){var g=f[h],p=g.node,m=g.width,v=g.text;d>c.width&&(d-=m-l,m=l,v=null);var y=new Ma({shape:{points:db(s,0,m,u,h===f.length-1,0===h)},style:T(n.getItemStyle(),{lineJoin:"bevel",text:v,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:N(o,p)});this.group.add(y),y.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(r=e).componentIndex,seriesIndex:r.componentIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(a=p)&&a.dataIndex,name:a&&a.name},treePathInfo:a&&ub(a,r)},s+=m+8}},remove:function(){this.group.removeAll()}};var hb=A,gb=_n,pb=Ha,mb=w,vb=["label"],yb=["emphasis","label"],bb=["upperLabel"],Tb=["emphasis","upperLabel"],Cb=Yo([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function Eb(e,t,n,i,o,r,a,s,l,u){if(a){var c=a.getLayout(),d=e.getData();if(d.setItemGraphicEl(a.dataIndex,null),c&&c.isInView){var f=c.width,h=c.height,g=c.borderWidth,p=c.invisible,v=a.getRawIndex(),y=s&&s.getRawIndex(),T=a.viewChildren,C=c.upperHeight,E=T&&T.length,_=a.getModel("itemStyle"),x=a.getModel("emphasis.itemStyle"),I=A("nodeGroup",gb);if(I){if(l.add(I),I.attr("position",[c.x||0,c.y||0]),I.__tmNodeWidth=f,I.__tmNodeHeight=h,c.isAboveViewRoot)return I;var D=a.getModel(),w=A("background",pb,u,1);if(w&&function(t,n,i){if(n.dataIndex=a.dataIndex,n.seriesIndex=e.seriesIndex,n.setShape({x:0,y:0,width:f,height:h}),p)R(n);else{n.invisible=!1;var o=a.getVisual("borderColor",!0),r=x.get("borderColor"),s=fb(_);s.fill=o;var l=Cb(x);if(l.fill=r,i){var u=f-2*g;k(s,l,o,u,C,{x:g,y:0,width:u,height:C})}else s.text=l.text=null;n.setStyle(s),xs(n,l)}t.add(n)}(I,w,E&&c.upperLabelHeight),E)As(I)&&Ss(I,!1),w&&(Ss(w,!0),d.setItemGraphicEl(a.dataIndex,w));else{var O=A("content",pb,u,2);O&&function(t,n){n.dataIndex=a.dataIndex,n.seriesIndex=e.seriesIndex;var i=Math.max(f-2*g,0),o=Math.max(h-2*g,0);if(n.culling=!0,n.setShape({x:g,y:g,width:i,height:o}),p)R(n);else{n.invisible=!1;var r=a.getVisual("color",!0),s=fb(_);s.fill=r;var l=Cb(x);k(s,l,r,i,o),n.setStyle(s),xs(n,l)}t.add(n)}(I,O),w&&As(w)&&Ss(w,!1),Ss(I,!0),d.setItemGraphicEl(a.dataIndex,I)}return I}}}function R(e){e.invisible||r.push(e)}function k(t,n,i,o,r,s){var l=D.get("name"),u=D.getModel(s?bb:vb),d=D.getModel(s?Tb:yb),f=u.getShallow("show");Ms(t,n,u,d,{defaultText:f?l:null,autoColor:i,isRectText:!0,labelFetcher:e,labelDataIndex:a.dataIndex,labelProp:s?"upperLabel":"label"}),S(t,s,c),S(n,s,c),s&&(t.textRect=m(s)),t.truncate=f&&u.get("ellipsis")?{outerWidth:o,outerHeight:r,minChar:2}:null}function S(t,n,i){var o=t.text;if(!n&&i.isLeafRoot&&null!=o){var r=e.get("drillDownIcon",!0);t.text=r?r+" "+o:o}}function A(e,r,s,l){var u=null!=y&&n[e][y],c=o[e];return u?(n[e][y]=null,function(e,t,n){(e[v]={}).old="nodeGroup"===n?t.position.slice():b({},t.shape)}(c,u,e)):p||((u=new r({z:function(e,t){var n=10*e+t;return(n-1)/n}(s,l)})).__tmDepth=s,function(e,t,n){var r=e[v]={},s=a.parentNode;if(s&&(!i||"drillDown"===i.direction)){var l=0,u=0,c=o.background[s.getRawIndex()];!i&&c&&c.old&&(l=c.old.width,u=c.old.height),r.old="nodeGroup"===n?[0,u]:{x:l,y:u,width:0,height:0}}r.fadein="nodeGroup"!==n}(c,0,u.__tmStorageName=e)),t[e][v]=u}}nh({type:"treemap",init:function(e,t){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(e,t,n,i){if(!(_(t.findComponents({mainType:"series",subType:"treemap",query:i}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var o=ab(i,["treemapZoomToNode","treemapRootToNode"],e),r=i&&i.type,a=e.layoutInfo,s=!this._oldTree,l=this._storage,u="treemapRootToNode"===r&&o&&l?{rootNodeGroup:l.nodeGroup[o.node.getRawIndex()],direction:i.direction}:null,c=this._giveContainerGroup(a),d=this._doRender(c,e,u);s||r&&"treemapZoomToNode"!==r&&"treemapRootToNode"!==r?d.renderFinally():this._doAnimation(c,d,e,u),this._resetController(n),this._renderBreadcrumb(e,n,o)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new gb,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,n){var i=t.getData().tree,o=this._oldTree,r={nodeGroup:[],background:[],content:[]},a={nodeGroup:[],background:[],content:[]},s=this._storage,l=[],u=N(Eb,t,a,s,n,r,l);!function e(t,n,i,o,r){function a(e){return e.getId()}function s(a,s){var l=null!=a?t[a]:null,c=null!=s?n[s]:null,d=u(l,c,i,r);d&&e(l&&l.viewChildren||[],c&&c.viewChildren||[],d,o,r+1)}o?mb(n=t,(function(e,t){e.isRemoved()||s(t,t)})):new oh(n,t,a,a).add(s).update(s).remove(N(s,null)).execute()}(i.root?[i.root]:[],o&&o.root?[o.root]:[],e,i===o||!o,0);var c,d,f=(d={nodeGroup:[],background:[],content:[]},(c=s)&&mb(c,(function(e,t){var n=d[t];mb(e,(function(e){e&&(n.push(e),e.__tmWillDelete=1)}))})),d);return this._oldTree=i,this._storage=a,{lastsForAnimation:r,willDeleteEls:f,renderFinally:function(){mb(f,(function(e){mb(e,(function(e){e.parent&&e.parent.remove(e)}))})),mb(l,(function(e){e.invisible=!0,e.dirty()}))}}},_doAnimation:function(e,t,n,i){if(n.get("animation")){var o=n.get("animationDurationUpdate"),r=n.get("animationEasing"),a=function(){var e,t=[],n={};return{add:function(e,i,o,r,a){return P(r)&&(a=r,r=0),!n[e.id]&&(n[e.id]=1,t.push({el:e,target:i,time:o,delay:r,easing:a}),!0)},done:function(t){return e=t,this},start:function(){for(var i=t.length,o=0,r=t.length;o<r;o++){var a=t[o];a.el.animateTo(a.target,a.time,a.delay,a.easing,s)}return this;function s(){--i||(t.length=0,n={},e&&e())}}}}();mb(t.willDeleteEls,(function(e,t){mb(e,(function(e,n){if(!e.invisible){var s,l=e.parent;if(i&&"drillDown"===i.direction)s=l===i.rootNodeGroup?{shape:{x:0,y:0,width:l.__tmNodeWidth,height:l.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,c=0;l.__tmWillDelete||(u=l.__tmNodeWidth/2,c=l.__tmNodeHeight/2),s="nodeGroup"===t?{position:[u,c],style:{opacity:0}}:{shape:{x:u,y:c,width:0,height:0},style:{opacity:0}}}s&&a.add(e,s,o,r)}}))})),mb(this._storage,(function(e,n){mb(e,(function(e,i){var s=t.lastsForAnimation[n][i],l={};s&&("nodeGroup"===n?s.old&&(l.position=e.position.slice(),e.attr("position",s.old)):(s.old&&(l.shape=b({},e.shape),e.setShape(s.old)),s.fadein?(e.setStyle("opacity",0),l.style={opacity:1}):1!==e.style.opacity&&(l.style={opacity:1})),a.add(e,l,o,r))}))}),this),this._state="animating",a.done(hb((function(){this._state="ready",t.renderFinally()}),this)).start()}},_resetController:function(e){var t=this._controller;t||((t=this._controller=new iy(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",hb(this._onPan,this)),t.on("zoom",hb(this._onZoom,this)));var n=new En(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,i){return n.contain(t,i)}))},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(3<Math.abs(e.dx)||3<Math.abs(e.dy))){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},_onZoom:function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var o=i.getLayout();if(!o)return;var r=new En(o.x,o.y,o.width,o.height),a=this.seriesModel.layoutInfo;t-=a.x,n-=a.y;var s=nt();at(s,s,[-t,-n]),lt(s,s,[e.scale,e.scale]),at(s,s,[t,n]),r.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x,y:r.y,width:r.width,height:r.height}})}},_initEvents:function(e){e.on("click",(function(e){if("ready"===this._state){var t=this.seriesModel.get("nodeClick",!0);if(t){var n=this.findTarget(e.offsetX,e.offsetY);if(n){var i=n.node;if(i.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===t)this._zoomToNode(n);else if("link"===t){var o=i.hostTree.data.getItemModel(i.dataIndex),r=o.get("link",!0),a=o.get("target",!0)||"blank";r&&jl(r,a)}}}}}),this)},_renderBreadcrumb:function(e,t,n){n=n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||{node:e.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new cb(this.group))).render(e,t,n.node,hb((function(t){"animating"!==this._state&&(lb(e.getViewRoot(),t)?this._rootToNode({node:t}):this._zoomToNode({node:t}))}),this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(i){var o=this._storage.background[i.getRawIndex()];if(o){var r=o.transformCoordToLocal(e,t),a=o.shape;if(!(a.x<=r[0]&&r[0]<=a.x+a.width&&a.y<=r[1]&&r[1]<=a.y+a.height))return!1;n={node:i,offsetX:r[0],offsetY:r[1]}}}),this),n}});for(var _b=function(){},xb=["treemapZoomToNode","treemapRender","treemapMove"],Ib=0;Ib<xb.length;Ib++)jf({type:xb[Ib],update:"updateView"},_b);jf({type:"treemapRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},(function(t,n){var i=ab(e,["treemapZoomToNode","treemapRootToNode"],t);if(i){var o=t.getViewRoot();o&&(e.direction=lb(o,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}))}));var Db=w,wb=L,Ob=function(e){var t=e.mappingMethod,n=e.type,i=this.option=m(e);this.type=n,this.mappingMethod=t,this._normalizeData=Fb[t];var o=Rb[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._doMap=o._doMap[t],"piecewise"===t?(kb(i),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,w(t,(function(t,n){t.originIndex=n,null!=t.visual&&(e.hasSpecialVisual=!0)}))}(i)):"category"===t?i.categories?function(e){var t=e.categories,n=e.visual,i=e.categoryMap={};if(Db(t,(function(e,t){i[e]=t})),!M(n)){var o=[];L(n)?Db(n,(function(e,t){var n=i[t];o[null!=n?n:-1]=e})):o[-1]=n,n=Bb(e,o)}for(var r=t.length-1;0<=r;r--)null==n[r]&&(delete i[t[r]],t.pop())}(i):kb(i,!0):(j("linear"!==t||i.dataExtent),kb(i))};Ob.prototype={constructor:Ob,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return A(this._normalizeData,this)}};var Rb=Ob.visualHandlers={color:{applyVisual:Nb("color"),getColorMapper:function(){var e=this.option;return A("category"===e.mappingMethod?function(e,t){return t||(e=this._normalizeData(e)),Mb.call(this,e)}:function(t,n,i){var o=!!i;return n||(t=this._normalizeData(t)),i=Vt(t,e.parsedVisual,i),o?i:Ut(i,"rgba")},this)},_doMap:{linear:function(e){return Ut(Vt(e,this.option.parsedVisual),"rgba")},category:Mb,piecewise:function(e,t){var n=Lb.call(this,t);return null==n&&(n=Ut(Vt(e,this.option.parsedVisual),"rgba")),n},fixed:Kb}},colorHue:Sb((function(e,t){return $t(e,t)})),colorSaturation:Sb((function(e,t){return $t(e,null,t)})),colorLightness:Sb((function(e,t){return $t(e,null,null,t)})),colorAlpha:Sb((function(e,t){return qt(e,t)})),opacity:{applyVisual:Nb("opacity"),_doMap:Pb([0,1])},liftZ:{applyVisual:Nb("liftZ"),_doMap:{linear:Kb,category:Kb,piecewise:Kb,fixed:Kb}},symbol:{applyVisual:function(e,t,n){var i=this.mapValueToVisual(e);if(P(i))n("symbol",i);else if(wb(i))for(var o in i)i.hasOwnProperty(o)&&n(o,i[o])},_doMap:{linear:Ab,category:Mb,piecewise:function(e,t){var n=Lb.call(this,t);return null==n&&(n=Ab.call(this,e)),n},fixed:Kb}},symbolSize:{applyVisual:Nb("symbolSize"),_doMap:Pb([0,1])}};function kb(e,t){var n=e.visual,i=[];L(n)?Db(n,(function(e){i.push(e)})):null!=n&&i.push(n),t||1!==i.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(i[1]=i[0]),Bb(e,i)}function Sb(e){return{applyVisual:function(t,n,i){t=this.mapValueToVisual(t),i("color",e(n("color"),t))},_doMap:Pb([0,1])}}function Ab(e){var t=this.option.visual;return t[Math.round(hl(e,[0,1],[0,t.length-1],!0))]||{}}function Nb(e){return function(t,n,i){i(e,this.mapValueToVisual(t))}}function Mb(e){var t=this.option.visual;return t[this.option.loop&&-1!==e?e%t.length:e]}function Kb(){return this.option.visual[0]}function Pb(e){return{linear:function(t){return hl(t,e,this.option.visual,!0)},category:Mb,piecewise:function(t,n){var i=Lb.call(this,n);return null==i&&(i=hl(t,e,this.option.visual,!0)),i},fixed:Kb}}function Lb(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var i=n[Ob.findPieceIndex(e,n)];if(i&&i.visual)return i.visual[this.type]}}function Bb(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=O(t,(function(e){return Bt(e)}))),t}var Fb={linear:function(e){return hl(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Ob.findPieceIndex(e,t,!0);if(null!=n)return hl(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?-1:t},fixed:te};function zb(e,t,n){return e?t<=n:t<n}Ob.listVisualTypes=function(){var e=[];return w(Rb,(function(t,n){e.push(n)})),e},Ob.addVisualHandler=function(e,t){Rb[e]=t},Ob.isValidType=function(e){return Rb.hasOwnProperty(e)},Ob.eachVisual=function(e,t,n){L(e)?w(e,t,n):t.call(n,e)},Ob.mapVisual=function(e,t,n){var i,o=M(e)?[]:L(e)?{}:(i=!0,null);return Ob.eachVisual(e,(function(e,r){var a=t.call(n,e,r);i?o=a:o[r]=a})),o},Ob.retrieveVisuals=function(e){var t,n={};return e&&Db(Rb,(function(i,o){e.hasOwnProperty(o)&&(n[o]=e[o],t=!0)})),t?n:null},Ob.prepareVisualTypes=function(e){if(wb(e)){var t=[];Db(e,(function(e,n){t.push(n)})),e=t}else{if(!M(e))return[];e=e.slice()}return e.sort((function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1})),e},Ob.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},Ob.findPieceIndex=function(e,t,n){for(var i,o=1/0,r=0,a=t.length;r<a;r++){var s=t[r].value;if(null!=s){if(s===e||"string"==typeof s&&s===e+"")return r;n&&d(s,r)}}for(r=0,a=t.length;r<a;r++){var l=t[r],u=l.interval,c=l.close;if(u){if(u[0]===-1/0){if(zb(c[1],e,u[1]))return r}else if(u[1]===1/0){if(zb(c[0],u[0],e))return r}else if(zb(c[0],u[0],e)&&zb(c[1],e,u[1]))return r;n&&d(u[0],r),n&&d(u[1],r)}}if(n)return e===1/0?t.length-1:e===-1/0?0:i;function d(t,n){var r=Math.abs(t-e);r<o&&(o=r,i=n)}};var Hb=M,Vb="itemStyle",Wb={seriesType:"treemap",reset:function(e,t,n,i){var o=e.getData().tree,r=o.root,a=e.getModel(Vb);r.isRemoved()||function e(t,n,i,o,r,a){var s=t.getModel(),l=t.getLayout();if(l&&!l.invisible&&l.isInView){var u,c,d=t.getModel(Vb),f=function(e,t,n,i){var o=b({},t);return w(["color","colorAlpha","colorSaturation"],(function(r){var a=e.get(r,!0);null==a&&n&&(a=n[r]),null==a&&(a=t[r]),null==a&&(a=i.get(r)),null!=a&&(o[r]=a)})),o}(d,n,i[t.depth],o),h=d.get("borderColor"),g=d.get("borderColorSaturation");null!=g&&(h=null!=(c=u=$b(f))?$t(c,null,null,g):null),t.setVisual("borderColor",h);var p=t.viewChildren;if(p&&p.length){var m=function(e,t,n,i,o,r){if(r&&r.length){var a=Ub(t,"color")||null!=o.color&&"none"!==o.color&&(Ub(t,"colorAlpha")||Ub(t,"colorSaturation"));if(a){var s=t.get("visualMin"),l=t.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var c=t.get("colorMappingBy"),d={type:a.name,dataExtent:u,visual:a.range};"color"!==d.type||"index"!==c&&"id"!==c?d.mappingMethod="linear":(d.mappingMethod="category",d.loop=!0);var f=new Ob(d);return f.__drColorMappingBy=c,f}}}(0,s,l,0,f,p);w(p,(function(t,n){if(t.depth>=r.length||t===r[t.depth]){var l=function(e,t,n,i,o,r){var a=b({},t);if(o){var s=o.type,l="color"===s&&o.__drColorMappingBy,u="index"===l?i:"id"===l?r.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));a[s]=o.mapValueToVisual(u)}return a}(s,f,t,n,m,a);e(t,l,i,o,r,a)}}))}else u=$b(f),t.setVisual("color",u)}}(r,{},O(o.levelModels,(function(e){return e?e.get(Vb):null})),a,e.getViewRoot().getAncestors(),e)}};function $b(e){var t=qb(e,"color");if(t){var n=qb(e,"colorAlpha"),i=qb(e,"colorSaturation");return i&&(t=$t(t,null,null,i)),n&&(t=qt(t,n)),t}}function qb(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function Ub(e,t){var n=e.get(t);return Hb(n)&&n.length?{name:t,range:n}:null}var jb=Math.max,Gb=Math.min,Xb=V,Yb=w,Zb=["itemStyle","borderWidth"],Jb=["itemStyle","gapWidth"],Qb=["upperLabel","show"],eT=["upperLabel","height"],tT={seriesType:"treemap",reset:function(e,t,n,i){var o=n.getWidth(),r=n.getHeight(),a=e.option,s=eu(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],u=gl(Xb(s.width,l[0]),o),c=gl(Xb(s.height,l[1]),r),d=i&&i.type,f=ab(i,["treemapZoomToNode","treemapRootToNode"],e),h="treemapRender"===d||"treemapMove"===d?i.rootRect:null,g=e.getViewRoot(),p=sb(g);if("treemapMove"!==d){var m="treemapZoomToNode"===d?function(e,t,n,i,o){var r,a=(t||{}).node,s=[i,o];if(!a||a===n)return s;for(var l=i*o,u=l*e.option.zoomToNodeRatio;r=a.parentNode;){for(var c=0,d=r.children,f=0,h=d.length;f<h;f++)c+=d[f].getValue();var g=a.getValue();if(0===g)return s;u*=c/g;var p=r.getModel(),m=p.get(Zb);u+=4*m*m+(3*m+Math.max(m,rT(p)))*Math.pow(u,.5),Cl<u&&(u=Cl),a=r}u<l&&(u=l);var v=Math.pow(u/l,.5);return[i*v,o*v]}(e,f,g,u,c):h?[h.width,h.height]:[u,c],v=a.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:a.squareRatio,sort:v,leafDepth:a.leafDepth};g.hostTree.clearLayouts();var T={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};g.setLayout(T),function e(t,n,i,o){var r,a;if(!t.isRemoved()){var s=t.getLayout();r=s.width,a=s.height;var l=(g=t.getModel()).get(Zb),u=g.get(Jb)/2,c=rT(g),d=Math.max(l,c),f=l-u,h=d-u,g=t.getModel();t.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:c},!0);var p=(r=jb(r-2*f,0))*(a=jb(a-f-h,0)),m=nT(t,g,p,n,i,o);if(m.length){var v={x:f,y:h,width:r,height:a},y=Gb(r,a),b=1/0,T=[];T.area=0;for(var C=0,E=m.length;C<E;){var _=m[C];T.push(_),T.area+=_.getLayout().area;var x=iT(T,y,n.squareRatio);b=x<=b?(C++,x):(T.area-=T.pop().getLayout().area,oT(T,y,v,u,!1),y=Gb(v.width,v.height),T.length=T.area=0,1/0)}if(T.length&&oT(T,y,v,u,!0),!i){var I=g.get("childrenVisibleMin");null!=I&&p<I&&(i=!0)}for(C=0,E=m.length;C<E;C++)e(m[C],n,i,o+1)}}}(g,y,!1,0),T=g.getLayout(),Yb(p,(function(e,t){var n=(p[t+1]||g).getValue();e.setLayout(b({dataExtent:[n,n],borderWidth:0,upperHeight:0},T))}))}var C=e.getData().tree.root;C.setLayout(function(e,t,n){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!n)return i;var o=n.node,r=o.getLayout();if(!r)return i;for(var a=[r.width/2,r.height/2],s=o;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:e.width/2-a[0],y:e.height/2-a[1]}}(s,h,f),!0),e.setLayoutInfo(s),function e(t,n,i,o,r){var a=t.getLayout(),s=i[r],l=s&&s===t;if(!(s&&!l||r===i.length&&t!==o)){t.setLayout({isInView:!0,invisible:!l&&!n.intersect(a),isAboveViewRoot:l},!0);var u=new En(n.x-a.x,n.y-a.y,n.width,n.height);Yb(t.viewChildren||[],(function(t){e(t,u,i,o,r+1)}))}}(C,new En(-s.x,-s.y,o,r),p,g,0)}};function nT(e,t,n,i,o,r){var a=e.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=r;if(o&&!l)return e.viewChildren=[];!function(e,t){t&&e.sort((function(e,n){var i="asc"===t?e.getValue()-n.getValue():n.getValue()-e.getValue();return 0==i?"asc"===t?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:i}))}(a=k(a,(function(e){return!e.isRemoved()})),s);var u=function(e,t,n){for(var i=0,o=0,r=t.length;o<r;o++)i+=t[o].getValue();var a=e.get("visualDimension");if(t&&t.length)if("value"===a&&n)s=[t[t.length-1].getValue(),t[0].getValue()],"asc"===n&&s.reverse();else{var s=[1/0,-1/0];Yb(t,(function(e){var t=e.getValue(a);t<s[0]&&(s[0]=t),t>s[1]&&(s[1]=t)}))}else s=[NaN,NaN];return{sum:i,dataExtent:s}}(t,a,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(e,t,n,i,o){if(!i)return n;for(var r=e.get("visibleMin"),a=o.length,s=a,l=a-1;0<=l;l--){var u=o["asc"===i?a-l-1:l].getValue();u/n*t<r&&(s=l,n-=u)}return o.splice("asc"===i?0:s,a-s),n}(t,n,u.sum,s,a),0===u.sum)return e.viewChildren=[];for(var c=0,d=a.length;c<d;c++){var f=a[c].getValue()/u.sum*n;a[c].setLayout({area:f})}return l&&(a.length&&e.setLayout({isLeafRoot:!0},!0),a.length=0),e.viewChildren=a,e.setLayout({dataExtent:u.dataExtent},!0),a}function iT(e,t,n){for(var i,o=0,r=1/0,a=0,s=e.length;a<s;a++)(i=e[a].getLayout().area)&&(i<r&&(r=i),o<i&&(o=i));var l=e.area*e.area,u=t*t*n;return l?jb(u*o/l,l/(u*r)):1/0}function oT(e,t,n,i,o){var r=t===n.width?0:1,a=1-r,s=["x","y"],l=["width","height"],u=n[s[r]],c=t?e.area/t:0;(o||c>n[l[a]])&&(c=n[l[a]]);for(var d=0,f=e.length;d<f;d++){var h=e[d],g={},p=c?h.getLayout().area/c:0,m=g[l[a]]=jb(c-2*i,0),v=n[s[r]]+n[l[r]]-u,y=d===f-1||v<p?v:p,b=g[l[r]]=jb(y-2*i,0);g[s[a]]=n[s[a]]+Gb(i,m/2),g[s[r]]=u+Gb(i,b/2),u+=y,h.setLayout(g,!0)}n[s[a]]+=c,n[l[a]]-=c}function rT(e){return e.get(Qb)?e.get(eT):0}function aT(e){return"_EC_"+e}function sT(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}Yf(Wb),Xf(tT);var lT=sT.prototype;function uT(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==t?-1:t}function cT(e,t,n){this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}function dT(e,t){return{getValue:function(n){var i=this[e][t];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){0<=this.dataIndex&&this[e][t].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[e][t].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){0<=this.dataIndex&&this[e][t].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function fT(e,t,n,i,o){for(var r=new sT(i),a=0;a<e.length;a++)r.addNode(V(e[a].id,e[a].name,a),a);var s=[],l=[],u=0;for(a=0;a<t.length;a++){var c=t[a],d=c.source,f=c.target;r.addEdge(d,f,u)&&(l.push(c),s.push(V(c.id,d+" > "+f)),u++)}var h,g=n.get("coordinateSystem");if("cartesian2d"===g||"polar"===g)h=Hh(e,n);else{var p=Lu.get(g),m=p&&"view"!==p.type&&p.dimensions||[];_(m,"value")<0&&m.concat(["value"]);var v=Mh(e,{coordDimensions:m});(h=new Th(v,n)).initData(e)}var y=new Th(["value"],n);return y.initData(l,s),o&&o(h,y),Py({mainData:h,struct:r,structAttr:"graph",datas:{node:h,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),r.update(),r}lT.type="graph",lT.isDirected=function(){return this._directed},lT.addNode=function(e,t){var n=this._nodesMap;if(!n[aT(e=null==e?""+t:""+e)]){var i=new uT(e,t);return(i.hostGraph=this).nodes.push(i),n[aT(e)]=i}},lT.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},lT.getNodeById=function(e){return this._nodesMap[aT(e)]},lT.addEdge=function(e,t,n){var i=this._nodesMap,o=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),uT.isInstance(e)||(e=i[aT(e)]),uT.isInstance(t)||(t=i[aT(t)]),e&&t){var r=e.id+"-"+t.id;if(!o[r]){var a=new cT(e,t,n);return(a.hostGraph=this)._directed&&(e.outEdges.push(a),t.inEdges.push(a)),e.edges.push(a),e!==t&&t.edges.push(a),this.edges.push(a),o[r]=a}}},lT.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},lT.getEdge=function(e,t){uT.isInstance(e)&&(e=e.id),uT.isInstance(t)&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},lT.eachNode=function(e,t){for(var n=this.nodes,i=n.length,o=0;o<i;o++)0<=n[o].dataIndex&&e.call(t,n[o],o)},lT.eachEdge=function(e,t){for(var n=this.edges,i=n.length,o=0;o<i;o++)0<=n[o].dataIndex&&0<=n[o].node1.dataIndex&&0<=n[o].node2.dataIndex&&e.call(t,n[o],o)},lT.breadthFirstTraverse=function(e,t,n,i){if(uT.isInstance(t)||(t=this._nodesMap[aT(t)]),t){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",r=0;r<this.nodes.length;r++)this.nodes[r].__visited=!1;if(!e.call(i,t,null))for(var a=[t];a.length;){var s=a.shift(),l=s[o];for(r=0;r<l.length;r++){var u=l[r],c=u.node1===s?u.node2:u.node1;if(!c.__visited){if(e.call(i,c,s))return;a.push(c),c.__visited=!0}}}}},lT.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,i=this.edges,o=0,r=n.length;o<r;o++)n[o].dataIndex=-1;for(o=0,r=e.count();o<r;o++)n[e.getRawIndex(o)].dataIndex=o;for(t.filterSelf((function(e){var n=i[t.getRawIndex(e)];return 0<=n.node1.dataIndex&&0<=n.node2.dataIndex})),o=0,r=i.length;o<r;o++)i[o].dataIndex=-1;for(o=0,r=t.count();o<r;o++)i[t.getRawIndex(o)].dataIndex=o},lT.clone=function(){for(var e=new sT(this._directed),t=this.nodes,n=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(i=0;i<n.length;i++){var o=n[i];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},uT.prototype={constructor:uT,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},cT.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},I(uT,dT("hostGraph","data")),I(cT,dT("hostGraph","edgeData")),sT.Node=uT,sT.Edge=cT,Uo(uT),Uo(cT);var hT=th({type:"series.graph",init:function(e){hT.superApply(this,"init",arguments);var t=this;function n(){return t._categoriesData}this.legendVisualProvider=new gv(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){hT.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){hT.superApply(this,"mergeDefaultAndTheme",arguments),wo(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var n=e.edges||e.links||[],i=e.data||e.nodes||[],o=this;if(i&&n)return fT(i,n,this,!0,(function(e,n){e.wrapMethod("getItemModel",(function(e){var t=o._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var i=o.getModel("edgeLabel"),r=new ll({label:i.option},i.parentModel,t),a=o.getModel("emphasis.edgeLabel"),s=new ll({emphasis:{label:a.option}},a.parentModel,t);function l(e){return(e=this.parsePath(e))&&"label"===e[0]?r:e&&"emphasis"===e[0]&&"label"===e[1]?s:this.parentModel}n.wrapMethod("getItemModel",(function(e){return e.customizeGetParent(l),e}))})).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,n){if("edge"!==n)return hT.superApply(this,"formatTooltip",arguments);var i=this.getData(),o=this.getDataParams(e,n),r=i.graph.getEdgeByIndex(e),a=i.getName(r.node1.dataIndex),s=i.getName(r.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),l=Ll(l.join(" > ")),o.value&&(l+=" : "+Ll(o.value)),l},_updateCategoriesData:function(){var e=O(this.option.categories||[],(function(e){return null!=e.value?e:b({value:0},e)})),t=new Th(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e,!0)}))},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return hT.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:!0}}}}),gT=Wa.prototype,pT=ja.prototype;function mT(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var vT=ls({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[mT(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:gT.buildPath,_buildPathCurve:pT.buildPath,pointAt:function(e){return this[mT(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:gT.pointAt,_pointAtCurve:pT.pointAt,tangentAt:function(e){var t=this.shape,n=mT(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return ge(n,n)},_tangentAtCurve:pT.tangentAt}),yT=["fromSymbol","toSymbol"];function bT(e){return"_"+e+"Type"}function TT(e,t,n){var i=t.getItemVisual(n,"color"),o=t.getItemVisual(n,e),r=t.getItemVisual(n,e+"Size");if(o&&"none"!==o){M(r)||(r=[r,r]);var a=Ug(o,-r[0]/2,-r[1]/2,r[0],r[1],i);return a.name=e,a}}function CT(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}function ET(e,t,n){_n.call(this),this._createLine(e,t,n)}var _T=ET.prototype;function xT(e){this._ctor=e||ET,this.group=new _n}_T.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),n=this.childOfName("label");if(e||t||!n.ignore){for(var i=1,o=this.parent;o;)o.scale&&(i/=o.scale[0]),o=o.parent;var r=this.childOfName("line");if(this.__dirty||r.__dirty){var a=r.shape.percent,s=r.pointAt(0),l=r.pointAt(a),u=ce([],l,s);if(ge(u,u),e){e.attr("position",s);var c=r.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(c[1],c[0])),e.attr("scale",[i*a,i*a])}if(t&&(t.attr("position",l),c=r.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(c[1],c[0])),t.attr("scale",[i*a,i*a])),!n.ignore){var d,f,h,g;n.attr("position",l);var p=n.__labelDistance,m=p[0]*i,v=p[1]*i,y=a/2,b=[(c=r.tangentAt(y))[1],-c[0]],T=r.pointAt(y);0<b[1]&&(b[0]=-b[0],b[1]=-b[1]);var C,E=c[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var _=-Math.atan2(c[1],c[0]);l[0]<s[0]&&(_=Math.PI+_),n.attr("rotation",_)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-v,h="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=v,h="top";break;default:C=0,h="middle"}switch(n.__position){case"end":d=[u[0]*m+l[0],u[1]*v+l[1]],f=.8<u[0]?"left":u[0]<-.8?"right":"center",h=.8<u[1]?"top":u[1]<-.8?"bottom":"middle";break;case"start":d=[-u[0]*m+s[0],-u[1]*v+s[1]],f=.8<u[0]?"right":u[0]<-.8?"left":"center",h=.8<u[1]?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":d=[m*E+s[0],s[1]+C],f=c[0]<0?"right":"left",g=[-m*E,-C];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":d=[T[0],T[1]+C],f="center",g=[0,-C];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":d=[-m*E+l[0],l[1]+C],f=0<=c[0]?"right":"left",g=[m*E,-C]}n.attr({style:{textVerticalAlign:n.__verticalAlign||h,textAlign:n.__textAlign||f},position:d,scale:[i,i],origin:g})}}}},_T._createLine=function(e,t,n){var i=e.hostModel,o=function(e){var t=new vT({name:"line",subPixelOptimize:!0});return CT(t.shape,e),t}(e.getItemLayout(t));o.shape.percent=0,qs(o,{shape:{percent:1}},i,t),this.add(o);var r=new Da({name:"label",lineLabelOriginalOpacity:1});this.add(r),w(yT,(function(n){var i=TT(n,e,t);this.add(i),this[bT(n)]=e.getItemVisual(t,n)}),this),this._updateCommonStl(e,t,n)},_T.updateData=function(e,t,n){var i=e.hostModel,o=this.childOfName("line"),r=e.getItemLayout(t),a={shape:{}};CT(a.shape,r),$s(o,a,i,t),w(yT,(function(n){var i=e.getItemVisual(t,n),o=bT(n);if(this[o]!==i){this.remove(this.childOfName(n));var r=TT(n,e,t);this.add(r)}this[o]=i}),this),this._updateCommonStl(e,t,n)},_T._updateCommonStl=function(e,t,n){var i=e.hostModel,o=this.childOfName("line"),r=n&&n.lineStyle,a=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||e.hasItemOption){var u=e.getItemModel(t);r=u.getModel("lineStyle").getLineStyle(),a=u.getModel("emphasis.lineStyle").getLineStyle(),s=u.getModel("label"),l=u.getModel("emphasis.label")}var c=e.getItemVisual(t,"color"),d=$(e.getItemVisual(t,"opacity"),r.opacity,1);o.useStyle(T({strokeNoScale:!0,fill:"none",stroke:c,opacity:d},r)),o.hoverStyle=a,w(yT,(function(e){var t=this.childOfName(e);t&&(t.setColor(c),t.setStyle({opacity:d}))}),this);var f,h,g=s.getShallow("show"),p=l.getShallow("show"),m=this.childOfName("label");if((g||p)&&(f=c||"#000",null==(h=i.getFormattedLabel(t,"normal",e.dataType)))){var v=i.getRawValue(t);h=null==v?e.getName(t):isFinite(v)?pl(v):v}var y=g?h:null,b=p?W(i.getFormattedLabel(t,"emphasis",e.dataType),h):null,C=m.style;if(null!=y||null!=b){Ps(m.style,s,{text:y},{autoColor:f}),m.__textAlign=C.textAlign,m.__verticalAlign=C.textVerticalAlign,m.__position=s.get("position")||"middle";var E=s.get("distance");M(E)||(E=[E,E]),m.__labelDistance=E}m.hoverStyle=null!=b?{text:b,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},m.ignore=!g&&!p,ks(this)},_T.highlight=function(){this.trigger("emphasis")},_T.downplay=function(){this.trigger("normal")},_T.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},_T.setLinePoints=function(e){var t=this.childOfName("line");CT(t.shape,e),t.dirty()},x(ET,_n);var IT=xT.prototype;function DT(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function wT(e){return isNaN(e[0])||isNaN(e[1])}function OT(e){return!wT(e[0])&&!wT(e[1])}function RT(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,i=t.scale,o=i&&i[0]||1;return((t.getZoom()-1)*n+1)/o}function kT(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}IT.isPersistent=function(){return!0},IT.updateData=function(e){var t=this,n=t.group,i=t._lineData;t._lineData=e,i||n.removeAll();var o=DT(e);e.diff(i).add((function(n){!function(e,t,n,i){if(OT(t.getItemLayout(n))){var o=new e._ctor(t,n,i);t.setItemGraphicEl(n,o),e.group.add(o)}}(t,e,n,o)})).update((function(n,r){!function(e,t,n,i,o,r){var a=t.getItemGraphicEl(i);if(!OT(n.getItemLayout(o)))return e.group.remove(a);a?a.updateData(n,o,r):a=new e._ctor(n,o,r),n.setItemGraphicEl(o,a),e.group.add(a)}(t,i,e,r,n,o)})).remove((function(e){n.remove(i.getItemGraphicEl(e))})).execute()},IT.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,n){t.updateLayout(e,n)}),this)},IT.incrementalPrepareUpdate=function(e){this._seriesScope=DT(e),this._lineData=null,this.group.removeAll()},IT.incrementalUpdate=function(e,t){function n(e){e.isGroup||function(e){return e.animators&&0<e.animators.length}(e)||(e.incremental=e.useHoverLayer=!0)}for(var i=e.start;i<e.end;i++)if(OT(t.getItemLayout(i))){var o=new this._ctor(t,i,this._seriesScope);o.traverse(n),this.group.add(o),t.setItemGraphicEl(i,o)}},IT.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},IT._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var ST=[],AT=[],NT=[],MT=hr,KT=ye,PT=Math.abs;function LT(e,t,n){for(var i,o=e[0],r=e[1],a=e[2],s=1/0,l=n*n,u=.1,c=.1;c<=.9;c+=.1)ST[0]=MT(o[0],r[0],a[0],c),ST[1]=MT(o[1],r[1],a[1],c),(h=PT(KT(ST,t)-l))<s&&(s=h,i=c);for(var d=0;d<32;d++){var f=i+u;AT[0]=MT(o[0],r[0],a[0],i),AT[1]=MT(o[1],r[1],a[1],i),NT[0]=MT(o[0],r[0],a[0],f),NT[1]=MT(o[1],r[1],a[1],f);var h=KT(AT,t)-l;if(PT(h)<.01)break;var g=KT(NT,t)-l;u/=2,h<0?0<=g?i+=u:i-=u:0<=g?i-=u:i+=u}return i}function BT(e,t){var n=[],i=mr,o=[[],[],[]],r=[[],[]],a=[];t/=2,e.eachEdge((function(e,s){var l=e.getLayout(),u=e.getVisual("fromSymbol"),c=e.getVisual("toSymbol");l.__original||(l.__original=[ae(l[0]),ae(l[1])],l[2]&&l.__original.push(ae(l[2])));var d=l.__original;if(null!=l[2]){if(re(o[0],d[0]),re(o[1],d[2]),re(o[2],d[1]),u&&"none"!==u){var f=kT(e.node1),h=LT(o,d[0],f*t);i(o[0][0],o[1][0],o[2][0],h,n),o[0][0]=n[3],o[1][0]=n[4],i(o[0][1],o[1][1],o[2][1],h,n),o[0][1]=n[3],o[1][1]=n[4]}c&&"none"!==c&&(f=kT(e.node2),h=LT(o,d[1],f*t),i(o[0][0],o[1][0],o[2][0],h,n),o[1][0]=n[1],o[2][0]=n[2],i(o[0][1],o[1][1],o[2][1],h,n),o[1][1]=n[1],o[2][1]=n[2]),re(l[0],o[0]),re(l[1],o[2]),re(l[2],o[1])}else re(r[0],d[0]),re(r[1],d[1]),ce(a,r[1],r[0]),ge(a,a),u&&"none"!==u&&(f=kT(e.node1),ue(r[0],r[0],a,f*t)),c&&"none"!==c&&(f=kT(e.node2),ue(r[1],r[1],a,-f*t)),re(l[0],r[0]),re(l[1],r[1])}))}var FT="__focusNodeAdjacency",zT="__unfocusNodeAdjacency",HT=["itemStyle","opacity"],VT=["lineStyle","opacity"];function WT(e,t){var n=e.getVisual("opacity");return null!=n?n:e.getModel().get(t)}function $T(e,t,n){var i=e.getGraphicEl(),o=WT(e,t);null!=n&&(null==o&&(o=1),o*=n),i.downplay&&i.downplay(),i.traverse((function(e){if(!e.isGroup){var t=e.lineLabelOriginalOpacity;null!=t&&null==n||(t=o),e.setStyle("opacity",t)}}))}function qT(e,t){var n=WT(e,t),i=e.getGraphicEl();i.traverse((function(e){e.isGroup||e.setStyle("opacity",n)})),i.highlight&&i.highlight()}function UT(e){return e instanceof Array||(e=[e,e]),e}function jT(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),GT(n)}}function GT(e){e.eachEdge((function(e){var t=e.getModel().get("lineStyle.curveness")||0,n=ae(e.node1.getLayout()),i=ae(e.node2.getLayout()),o=[n,i];+t&&o.push([(n[0]+i[0])/2-(n[1]-i[1])*t,(n[1]+i[1])/2-(i[0]-n[0])*t]),e.setLayout(o)}))}nh({type:"graph",init:function(e,t){var n=new _p,i=new xT,o=this.group;this._controller=new iy(t.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(e,t,n){var i=this,o=e.coordinateSystem;this._model=e;var r=this._symbolDraw,a=this._lineDraw,s=this.group;if("view"===o.type){var l={position:o.position,scale:o.scale};this._firstRender?s.attr(l):$s(s,l,e)}BT(e.getGraph(),RT(e));var u=e.getData();r.updateData(u);var c=e.getEdgeData();a.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var d=e.forceLayout,f=e.get("force.layoutAnimation");d&&this._startForceLayoutIteration(d,f),u.eachItemGraphicEl((function(t,o){var r=u.getItemModel(o);t.off("drag").off("dragend");var a=r.get("draggable");a&&t.on("drag",(function(){d&&(d.warmUp(),this._layouting||this._startForceLayoutIteration(d,f),d.setFixed(o),u.setItemLayout(o,t.position))}),this).on("dragend",(function(){d&&d.setUnfixed(o)}),this),t.setDraggable(a&&d),t[FT]&&t.off("mouseover",t[FT]),t[zT]&&t.off("mouseout",t[zT]),r.get("focusNodeAdjacency")&&(t.on("mouseover",t[FT]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex})}),t.on("mouseout",t[zT]=function(){i._dispatchUnfocus(n)}))}),this),u.graph.eachEdge((function(t){var o=t.getGraphicEl();o[FT]&&o.off("mouseover",o[FT]),o[zT]&&o.off("mouseout",o[zT]),t.getModel().get("focusNodeAdjacency")&&(o.on("mouseover",o[FT]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex})}),o.on("mouseout",o[zT]=function(){i._dispatchUnfocus(n)}))}));var h="circular"===e.get("layout")&&e.get("circular.rotateLabel"),g=u.getLayout("cx"),p=u.getLayout("cy");u.eachItemGraphicEl((function(e,t){var n=u.getItemModel(t).get("label.rotate")||0,i=e.getSymbolPath();if(h){var o=u.getItemLayout(t),r=Math.atan2(o[1]-p,o[0]-g);r<0&&(r=2*Math.PI+r);var a=o[0]<g;a&&(r-=Math.PI);var s=a?"left":"right";Ks(i,{textRotation:-r,textPosition:s,textOrigin:"center"},{textPosition:s})}else Ks(i,{textRotation:n*=Math.PI/180})})),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){n._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,i){var o=e.getData().graph,r=i.edgeDataIndex,a=o.getNodeByIndex(i.dataIndex),s=o.getEdgeByIndex(r);(a||s)&&(o.eachNode((function(e){$T(e,HT,.1)})),o.eachEdge((function(e){$T(e,VT,.1)})),a&&(qT(a,HT),w(a.edges,(function(e){e.dataIndex<0||(qT(e,VT),qT(e.node1,HT),qT(e.node2,HT))}))),s&&(qT(s,VT),qT(s.node1,HT),qT(s.node2,HT)))},unfocusNodeAdjacency:function(e,t,n,i){var o=e.getData().graph;o.eachNode((function(e){$T(e,HT)})),o.eachEdge((function(e){$T(e,VT)}))},_startForceLayoutIteration:function(e,t){var n=this;!function i(){e.step((function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(i,16):i())}))}()},_updateController:function(e,t,n){var i=this._controller,o=this._controllerHost,r=this.group;i.setPointerChecker((function(t,i,o){var a=r.getBoundingRect();return a.applyTransform(r.transform),a.contain(i,o)&&!py(t,n,e)})),"view"===e.coordinateSystem.type?(i.enable(e.get("roam")),o.zoomLimit=e.get("scaleLimit"),o.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){fy(o,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){hy(o,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(),BT(e.getGraph(),RT(e)),this._lineDraw.updateLayout()}),this)):i.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),n=RT(e),i=[n,n];t.eachItemGraphicEl((function(e,t){e.attr("scale",i)}))},updateLayout:function(e){BT(e.getGraph(),RT(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),jf({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},(function(){})),jf({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},(function(){})),jf({type:"graphRoam",event:"graphRoam",update:"none"},(function(e,t){t.eachComponent({mainType:"series",query:e},(function(t){var n=_y(t.coordinateSystem,e);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)}))}));var XT=Math.PI,YT=[];function ZT(e,t){var n=e.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),o=e.getData(),r=o.graph,a=i.width/2+i.x,s=i.height/2+i.y,l=Math.min(i.width,i.height)/2,u=o.count();o.setLayout({cx:a,cy:s}),u&&(JT[t](e,n,r,o,l,a,s,u),r.eachEdge((function(e){var t,n=e.getModel().get("lineStyle.curveness")||0,i=ae(e.node1.getLayout()),o=ae(e.node2.getLayout());+n&&(t=[a*(n*=3)+(i[0]+o[0])/2*(1-n),s*n+(i[1]+o[1])/2*(1-n)]),e.setLayout([i,o,t])})))}}var JT={value:function(e,t,n,i,o,r,a,s){var l=0,u=i.getSum("value"),c=2*Math.PI/(u||s);n.eachNode((function(e){var t=e.getValue("value"),n=c*(u?t:1)/2;l+=n,e.setLayout([o*Math.cos(l)+r,o*Math.sin(l)+a]),l+=n}))},symbolSize:function(e,t,n,i,o,r,a,s){var l=0;YT.length=s;var u=RT(e);n.eachNode((function(e){var t=kT(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=u;var n=Math.asin(t/2/o);isNaN(n)&&(n=XT/2),YT[e.dataIndex]=n,l+=2*n}));var c=(2*XT-l)/s/2,d=0;n.eachNode((function(e){var t=c+YT[e.dataIndex];d+=t,e.setLayout([o*Math.cos(d)+r,o*Math.sin(d)+a]),d+=t}))}},QT=ue;Uf((function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),i=e.getGraph().data,o=n.mapArray(n.getName);i.filterSelf((function(e){var n=i.getItemModel(e).getShallow("category");if(null!=n){"number"==typeof n&&(n=o[n]);for(var r=0;r<t.length;r++)if(!t[r].isSelected(n))return!1}return!0}))}),this)})),Yf(Yp("graph","circle",null)),Yf((function(e){var t={};e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),i=e.getData(),o={};n.each((function(i){var r=n.getName(i);o["ec-"+r]=i;var a=n.getItemModel(i),s=a.get("itemStyle.color")||e.getColorFromPalette(r,t);n.setItemVisual(i,"color",s);for(var l=["opacity","symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var c=a.getShallow(l[u],!0);null!=c&&n.setItemVisual(i,l[u],c)}})),n.count()&&i.each((function(e){var t=i.getItemModel(e).getShallow("category");if(null!=t){"string"==typeof t&&(t=o["ec-"+t]);for(var r=["color","opacity","symbol","symbolSize","symbolKeepAspect"],a=0;a<r.length;a++)null==i.getItemVisual(e,r[a],!0)&&i.setItemVisual(e,r[a],n.getItemVisual(t,r[a]))}}))}))})),Yf((function(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),n=e.getEdgeData(),i=UT(e.get("edgeSymbol")),o=UT(e.get("edgeSymbolSize")),r="lineStyle.color".split("."),a="lineStyle.opacity".split(".");n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("color",e.get(r)),n.setVisual("opacity",e.get(a)),n.each((function(e){var i=n.getItemModel(e),o=t.getEdgeByIndex(e),s=UT(i.getShallow("symbol",!0)),l=UT(i.getShallow("symbolSize",!0)),u=i.get(r),c=i.get(a);switch(u){case"source":u=o.node1.getVisual("color");break;case"target":u=o.node2.getVisual("color")}s[0]&&o.setVisual("fromSymbol",s[0]),s[1]&&o.setVisual("toSymbol",s[1]),l[0]&&o.setVisual("fromSymbolSize",l[0]),l[1]&&o.setVisual("toSymbolSize",l[1]),o.setVisual("color",u),o.setVisual("opacity",c)}))}))})),Xf((function(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),n=e.coordinateSystem;if(n&&"view"!==n.type){var i=e.getData(),o=[];w(n.dimensions,(function(e){o=o.concat(i.mapDimension(e,!0))}));for(var r=0;r<i.count();r++){for(var a=[],s=!1,l=0;l<o.length;l++){var u=i.get(o[l],r);isNaN(u)||(s=!0),a.push(u)}i.setItemLayout(r,s?n.dataToPoint(a):[NaN,NaN])}GT(i.graph)}else t&&"none"!==t||jT(e)}))})),Xf(of.VISUAL.POST_CHART_LAYOUT,(function(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&ZT(e,"symbolSize")}))})),Xf((function(e){e.eachSeriesByType("graph",(function(e){if(!(d=e.coordinateSystem)||"view"===d.type)if("force"===e.get("layout")){var t=e.preservedPoints||{},n=e.getGraph(),i=n.data,o=n.edgeData,r=e.getModel("force"),a=r.get("initLayout");e.preservedPoints?i.each((function(e){var n=i.getId(e);i.setItemLayout(e,t[n]||[NaN,NaN])})):a&&"none"!==a?"circular"===a&&ZT(e,"value"):jT(e);var s=i.getDataExtent("value"),l=o.getDataExtent("value"),u=r.get("repulsion"),c=r.get("edgeLength");M(u)||(u=[u,u]),M(c)||(c=[c,c]),c=[c[1],c[0]];var d,f=i.mapArray("value",(function(e,t){var n=i.getItemLayout(t),o=hl(e,s,u);return isNaN(o)&&(o=(u[0]+u[1])/2),{w:o,rep:o,fixed:i.getItemModel(t).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),h=o.mapArray("value",(function(e,t){var i=n.getEdgeByIndex(t),o=hl(e,l,c);isNaN(o)&&(o=(c[0]+c[1])/2);var r=i.getModel();return{n1:f[i.node1.dataIndex],n2:f[i.node2.dataIndex],d:o,curveness:r.get("lineStyle.curveness")||0,ignoreForceLayout:r.get("ignoreForceLayout")}})),g=(d=e.coordinateSystem).getBoundingRect(),p=function(e,t,n){for(var i=n.rect,o=i.width,r=i.height,a=[i.x+o/2,i.y+r/2],s=null==n.gravity?.1:n.gravity,l=0;l<e.length;l++){var u=e[l];u.p||(u.p=oe(o*(Math.random()-.5)+a[0],r*(Math.random()-.5)+a[1])),u.pp=ae(u.p),u.edges=null}var c=null==n.friction?.6:n.friction,d=c;return{warmUp:function(){d=.8*c},setFixed:function(t){e[t].fixed=!0},setUnfixed:function(t){e[t].fixed=!1},step:function(n){for(var i=[],o=e.length,r=0;r<t.length;r++){var l=t[r];if(!l.ignoreForceLayout){var u=l.n1;ce(i,(g=l.n2).p,u.p);var c=de(i)-l.d,f=g.w/(u.w+g.w);isNaN(f)&&(f=0),ge(i,i),u.fixed||QT(u.p,u.p,i,f*c*d),g.fixed||QT(g.p,g.p,i,-(1-f)*c*d)}}for(r=0;r<o;r++)(v=e[r]).fixed||(ce(i,a,v.p),QT(v.p,v.p,i,s*d));for(r=0;r<o;r++){u=e[r];for(var h=r+1;h<o;h++){var g;ce(i,(g=e[h]).p,u.p),0===(c=de(i))&&(se(i,Math.random()-.5,Math.random()-.5),c=1);var p=(u.rep+g.rep)/c/c;u.fixed||QT(u.pp,u.pp,i,p),g.fixed||QT(g.pp,g.pp,i,-p)}}var m=[];for(r=0;r<o;r++){var v;(v=e[r]).fixed||(ce(m,v.p,v.pp),QT(v.p,v.p,m,d),re(v.pp,v.p))}d*=.992,n&&n(e,t,d<.01)}}}(f,h,{rect:g,gravity:r.get("gravity"),friction:r.get("friction")}),m=p.step;p.step=function(e){for(var o=0,r=f.length;o<r;o++)f[o].fixed&&re(f[o].p,n.getNodeByIndex(o).getLayout());m((function(o,r,a){for(var s=0,l=o.length;s<l;s++)o[s].fixed||n.getNodeByIndex(s).setLayout(o[s].p),t[i.getId(s)]=o[s].p;for(s=0,l=r.length;s<l;s++){var u=r[s],c=n.getEdgeByIndex(s),d=u.n1.p,f=u.n2.p,h=c.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],re(h[0],d),re(h[1],f),+u.curveness&&(h[2]=[(d[0]+f[0])/2-(d[1]-f[1])*u.curveness,(d[1]+f[1])/2-(f[0]-d[0])*u.curveness]),c.setLayout(h)}e&&e(a)}))},e.forceLayout=p,e.preservedPoints=t,p.step()}else e.forceLayout=null}))})),Gf("graphView",{create:function(e,t){var n=[];return e.eachSeriesByType("graph",(function(e){var i=e.get("coordinateSystem");if(!i||"view"===i){var o=e.getData(),r=[],a=[];Ir(o.mapArray((function(e){var t=o.getItemModel(e);return[+t.get("x"),+t.get("y")]})),r,a),a[0]-r[0]==0&&(a[0]+=1,r[0]-=1),a[1]-r[1]==0&&(a[1]+=1,r[1]-=1);var s=(a[0]-r[0])/(a[1]-r[1]),l=function(e,t,n){var i=e.getBoxLayoutParams();return i.aspect=n,eu(i,{width:t.getWidth(),height:t.getHeight()})}(e,t,s);isNaN(s)&&(r=[l.x,l.y],a=[l.x+l.width,l.y+l.height]);var u=a[0]-r[0],c=a[1]-r[1],d=l.width,f=l.height,h=e.coordinateSystem=new Dy;h.zoomLimit=e.get("scaleLimit"),h.setBoundingRect(r[0],r[1],u,c),h.setViewRect(l.x,l.y,d,f),h.setCenter(e.get("center")),h.setZoom(e.get("zoom")),n.push(h)}})),n}}),Kc.extend({type:"series.gauge",getInitialData:function(e,t){return fv(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var eC=ua.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var n=Math.cos,i=Math.sin,o=t.r,r=t.width,a=t.angle,s=t.x-n(a)*r*(o/3<=r?1:2),l=t.y-i(a)*r*(o/3<=r?1:2);a=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+n(a)*r,t.y+i(a)*r),e.lineTo(t.x+n(t.angle)*o,t.y+i(t.angle)*o),e.lineTo(t.x-n(a)*r,t.y-i(a)*r),e.lineTo(s,l)}});function tC(e,t){return t&&("string"==typeof t?e=t.replace("{value}",null!=e?e:""):"function"==typeof t&&(e=t(e))),e}var nC=2*Math.PI,iC=(Gc.extend({type:"gauge",render:function(e,t,n){this.group.removeAll();var i=e.get("axisLine.lineStyle.color"),o=function(e,t){var n=e.get("center"),i=t.getWidth(),o=t.getHeight(),r=Math.min(i,o);return{cx:gl(n[0],t.getWidth()),cy:gl(n[1],t.getHeight()),r:gl(e.get("radius"),r/2)}}(e,n);this._renderMain(e,t,n,i,o)},dispose:function(){},_renderMain:function(e,t,n,i,o){for(var r=this.group,a=e.getModel("axisLine"),s=a.getModel("lineStyle"),l=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,c=((p=-e.get("endAngle")/180*Math.PI)-u)%nC,d=u,f=s.get("width"),h=a.get("show"),g=0;h&&g<i.length;g++){var p,m=Math.min(Math.max(i[g][0],0),1),v=new ka({shape:{startAngle:d,endAngle:p=u+c*m,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-f,r:o.r},silent:!0});v.setStyle({fill:i[g][1]}),v.setStyle(s.getLineStyle(["color","borderWidth","borderColor"])),r.add(v),d=p}function y(e){if(e<=0)return i[0][1];for(var t=0;t<i.length;t++)if(i[t][0]>=e&&(0===t?0:i[t-1][0])<e)return i[t][1];return i[t-1][1]}if(!l){var b=u;u=p,p=b}this._renderTicks(e,t,n,y,o,u,p,l),this._renderPointer(e,t,n,y,o,u,p,l),this._renderTitle(e,t,n,y,o),this._renderDetail(e,t,n,y,o)},_renderTicks:function(e,t,n,i,o,r,a,s){for(var l=this.group,u=o.cx,c=o.cy,d=o.r,f=+e.get("min"),h=+e.get("max"),g=e.getModel("splitLine"),p=e.getModel("axisTick"),m=e.getModel("axisLabel"),v=e.get("splitNumber"),y=p.get("splitNumber"),b=gl(g.get("length"),d),T=gl(p.get("length"),d),C=r,E=(a-r)/v,_=E/y,x=g.getModel("lineStyle").getLineStyle(),I=p.getModel("lineStyle").getLineStyle(),D=0;D<=v;D++){var w=Math.cos(C),O=Math.sin(C);if(g.get("show")){var R=new Wa({shape:{x1:w*d+u,y1:O*d+c,x2:w*(d-b)+u,y2:O*(d-b)+c},style:x,silent:!0});"auto"===x.stroke&&R.setStyle({stroke:i(D/v)}),l.add(R)}if(m.get("show")){var k=tC(pl(D/v*(h-f)+f),m.get("formatter")),S=m.get("distance"),A=i(D/v);l.add(new Da({style:Ps({},m,{text:k,x:w*(d-b-S)+u,y:O*(d-b-S)+c,textVerticalAlign:O<-.4?"top":.4<O?"bottom":"middle",textAlign:w<-.4?"left":.4<w?"right":"center"},{autoColor:A}),silent:!0}))}if(p.get("show")&&D!==v){for(var N=0;N<=y;N++){w=Math.cos(C),O=Math.sin(C);var M=new Wa({shape:{x1:w*d+u,y1:O*d+c,x2:w*(d-T)+u,y2:O*(d-T)+c},silent:!0,style:I});"auto"===I.stroke&&M.setStyle({stroke:i((D+N/y)/v)}),l.add(M),C+=_}C-=_}else C+=E}},_renderPointer:function(e,t,n,i,o,r,a,s){var l=this.group,u=this._data;if(e.get("pointer.show")){var c=[+e.get("min"),+e.get("max")],d=[r,a],f=e.getData(),h=f.mapDimension("value");f.diff(u).add((function(t){var n=new eC({shape:{angle:r}});qs(n,{shape:{angle:hl(f.get(h,t),c,d,!0)}},e),l.add(n),f.setItemGraphicEl(t,n)})).update((function(t,n){var i=u.getItemGraphicEl(n);$s(i,{shape:{angle:hl(f.get(h,t),c,d,!0)}},e),l.add(i),f.setItemGraphicEl(t,i)})).remove((function(e){var t=u.getItemGraphicEl(e);l.remove(t)})).execute(),f.eachItemGraphicEl((function(e,t){var n=f.getItemModel(t),r=n.getModel("pointer");e.setShape({x:o.cx,y:o.cy,width:gl(r.get("width"),o.r),r:gl(r.get("length"),o.r)}),e.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===e.style.fill&&e.setStyle("fill",i(hl(f.get(h,t),c,[0,1],!0))),ks(e,n.getModel("emphasis.itemStyle").getItemStyle())})),this._data=f}else u&&u.eachItemGraphicEl((function(e){l.remove(e)}))},_renderTitle:function(e,t,n,i,o){var r=e.getData(),a=r.mapDimension("value"),s=e.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),u=o.cx+gl(l[0],o.r),c=o.cy+gl(l[1],o.r),d=+e.get("min"),f=+e.get("max"),h=i(hl(e.getData().get(a,0),[d,f],[0,1],!0));this.group.add(new Da({silent:!0,style:Ps({},s,{x:u,y:c,text:r.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:h,forceRich:!0})}))}},_renderDetail:function(e,t,n,i,o){var r=e.getModel("detail"),a=+e.get("min"),s=+e.get("max");if(r.get("show")){var l=r.get("offsetCenter"),u=o.cx+gl(l[0],o.r),c=o.cy+gl(l[1],o.r),d=gl(r.get("width"),o.r),f=gl(r.get("height"),o.r),h=e.getData(),g=h.get(h.mapDimension("value"),0),p=i(hl(g,[a,s],[0,1],!0));this.group.add(new Da({silent:!0,style:Ps({},r,{x:u,y:c,text:tC(g,r.get("formatter")),textWidth:isNaN(d)?null:d,textHeight:isNaN(f)?null:f,textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:!0})}))}}}),th({type:"series.funnel",init:function(e){iC.superApply(this,"init",arguments),this.legendVisualProvider=new gv(A(this.getData,this),A(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return fv(this,{coordDimensions:["value"],encodeDefaulter:N(wu,this)})},_defaultLabelLine:function(e){wo(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),n=iC.superCall(this,"getDataParams",e),i=t.mapDimension("value"),o=t.getSum(i);return n.percent=o?+(t.get(i,e)/o*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function oC(e,t){_n.call(this);var n=new Ma,i=new Ka,o=new Da;this.add(n),this.add(i),this.add(o),this.highDownOnUpdate=function(e,t){"emphasis"===t?(i.ignore=i.hoverIgnore,o.ignore=o.hoverIgnore):(i.ignore=i.normalIgnore,o.ignore=o.normalIgnore)},this.updateData(e,t,!0)}var rC=oC.prototype,aC=["itemStyle","opacity"];function sC(e,t,n,i,o){sp.call(this,e,t,n),this.type=i||"value",this.axisIndex=o}function lC(e,t,n,i,o,r){e=e||0;var a=n[1]-n[0];if(null!=o&&(o=cC(o,[0,a])),null!=r&&(r=Math.max(r,null!=o?o:0)),"all"===i){var s=Math.abs(t[1]-t[0]);o=r=cC(s=cC(s,[0,a]),[o,r]),i=0}t[0]=cC(t[0],n),t[1]=cC(t[1],n);var l=uC(t,i);t[i]+=e;var u=o||0,c=n.slice();l.sign<0?c[0]+=u:c[1]-=u,t[i]=cC(t[i],c);var d=uC(t,i);return null!=o&&(d.sign!==l.sign||d.span<o)&&(t[1-i]=t[i]+l.sign*o),d=uC(t,i),null!=r&&d.span>r&&(t[1-i]=t[i]+d.sign*r),t}function uC(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:0<n?-1:n<0?1:t?-1:1}}function cC(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}rC.updateData=function(e,t,n){var i=this.childAt(0),o=e.hostModel,r=e.getItemModel(t),a=e.getItemLayout(t),s=e.getItemModel(t).get(aC);s=null==s?1:s,i.useStyle({}),n?(i.setShape({points:a.points}),i.setStyle({opacity:0}),qs(i,{style:{opacity:s}},o,t)):$s(i,{style:{opacity:s},shape:{points:a.points}},o,t);var l=r.getModel("itemStyle"),u=e.getItemVisual(t,"color");i.setStyle(T({lineJoin:"round",fill:u},l.getItemStyle(["opacity"]))),i.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),ks(this)},rC._updateLabel=function(e,t){var n=this.childAt(1),i=this.childAt(2),o=e.hostModel,r=e.getItemModel(t),a=e.getItemLayout(t).label,s=e.getItemVisual(t,"color");$s(n,{shape:{points:a.linePoints||a.linePoints}},o,t),$s(i,{style:{x:a.x,y:a.y}},o,t),i.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var l=r.getModel("label"),u=r.getModel("emphasis.label"),c=r.getModel("labelLine"),d=r.getModel("emphasis.labelLine");s=e.getItemVisual(t,"color"),Ms(i.style,i.hoverStyle={},l,u,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:s,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign}),i.ignore=i.normalIgnore=!l.get("show"),i.hoverIgnore=!u.get("show"),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!d.get("show"),n.setStyle({stroke:s}),n.setStyle(c.getModel("lineStyle").getLineStyle()),n.hoverStyle=d.getModel("lineStyle").getLineStyle()},x(oC,_n),Gc.extend({type:"funnel",render:function(e,t,n){var i=e.getData(),o=this._data,r=this.group;i.diff(o).add((function(e){var t=new oC(i,e);i.setItemGraphicEl(e,t),r.add(t)})).update((function(e,t){var n=o.getItemGraphicEl(t);n.updateData(i,e),r.add(n),i.setItemGraphicEl(e,n)})).remove((function(e){var t=o.getItemGraphicEl(e);r.remove(t)})).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Yf(Cv("funnel")),Xf((function(e,t,n){e.eachSeriesByType("funnel",(function(e){var n=e.getData(),i=n.mapDimension("value"),o=e.get("sort"),r=function(e,t){return eu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),a=function(e,t){for(var n=e.mapDimension("value"),i=e.mapArray(n,(function(e){return e})),o=[],r="ascending"===t,a=0,s=e.count();a<s;a++)o[a]=a;return"function"==typeof t?o.sort(t):"none"!==t&&o.sort((function(e,t){return r?i[e]-i[t]:i[t]-i[e]})),o}(n,o),s=[gl(e.get("minSize"),r.width),gl(e.get("maxSize"),r.width)],l=n.getDataExtent(i),u=e.get("min"),c=e.get("max");function d(e,t){var o,a=hl(n.get(i,e)||0,[u,c],s,!0);switch(f){case"left":o=r.x;break;case"center":o=r.x+(r.width-a)/2;break;case"right":o=r.x+r.width-a}return[[o,t],[o+a,t]]}null==u&&(u=Math.min(l[0],0)),null==c&&(c=l[1]);var f=e.get("funnelAlign"),h=e.get("gap"),g=(r.height-h*(n.count()-1))/n.count(),p=r.y;"ascending"===o&&(g=-g,h=-h,p+=r.height,a=a.reverse());for(var m=0;m<a.length;m++){var v=a[m],y=a[m+1],b=n.getItemModel(v).get("itemStyle.height");null==b?b=g:(b=gl(b,r.height),"ascending"===o&&(b=-b));var T=d(v,p),C=d(y,p+b);p+=b+h,n.setItemLayout(v,{points:T.concat(C.slice().reverse())})}!function(e){e.each((function(t){var n,i,o,r,a=e.getItemModel(t),s=a.getModel("label").get("position"),l=a.getModel("labelLine"),u=e.getItemLayout(t),c=u.points,d="inner"===s||"inside"===s||"center"===s||"insideLeft"===s||"insideRight"===s;if(d)n="insideLeft"===s?(i=(c[0][0]+c[3][0])/2+5,o=(c[0][1]+c[3][1])/2,"left"):"insideRight"===s?(i=(c[1][0]+c[2][0])/2-5,o=(c[1][1]+c[2][1])/2,"right"):(i=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,o=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,"center"),r=[[i,o],[i,o]];else{var f,h,g,p=l.get("length");n="left"===s?(h=(c[3][1]+c[0][1])/2,i=(g=(f=(c[3][0]+c[0][0])/2)-p)-5,"right"):"right"===s?(h=(c[1][1]+c[2][1])/2,i=(g=(f=(c[1][0]+c[2][0])/2)+p)+5,"left"):"rightTop"===s?(h=c[1][1],i=(g=(f=c[1][0])+p)+5,"top"):"rightBottom"===s?(h=c[2][1],i=(g=(f=c[2][0])+p)+5,"bottom"):"leftTop"===s?(h=c[1][1],i=(g=(f=c[0][0])-p)-5,"right"):"leftBottom"===s?(h=c[2][1],i=(g=(f=c[3][0])-p)-5,"right"):(h=(c[1][1]+c[2][1])/2,i=(g=(f=(c[1][0]+c[2][0])/2)+p)+5,"left"),r=[[f,h],[g,h]],o=h}u.label={linePoints:r,x:i,y:o,verticalAlign:"middle",textAlign:n,inside:d}}))}(n)}))})),Uf(wv("funnel")),sC.prototype={constructor:sC,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},x(sC,sp);var dC=w,fC=Math.min,hC=Math.max,gC=Math.floor,pC=Math.ceil,mC=pl,vC=Math.PI;function yC(e,t,n){this._axesMap=Q(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}function bC(e,t){return fC(hC(e,t[0]),t[1])}yC.prototype={type:"parallel",constructor:yC,_init:function(e,t,n){var i=e.parallelAxisIndex;dC(e.dimensions,(function(e,n){var o=i[n],r=t.getComponent("parallelAxis",o),a=this._axesMap.set(e,new sC(e,Ag(r),[0,0],r.get("type"),o));a.onBand="category"===a.type&&r.get("boundaryGap"),a.inverse=r.get("inverse"),(r.axis=a).model=r,a.coordinateSystem=r.coordinateSystem=this}),this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),n=t.axisBase,i=t.layoutBase,o=t.pixelDimIndex,r=e[1-o],a=e[o];return n<=r&&r<=n+t.axisLength&&i<=a&&a<=i+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,t){t.eachSeries((function(n){if(e.contains(n,t)){var i=n.getData();dC(this.dimensions,(function(e){var t=this._axesMap.get(e);t.scale.unionExtentFromData(i,i.mapDimension(e)),Sg(t.scale,t.model)}),this)}}),this)},resize:function(e,t){this._rect=eu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,n=this._rect,i=["x","y"],o=["width","height"],r=t.get("layout"),a="horizontal"===r?0:1,s=n[o[a]],l=[0,s],u=this.dimensions.length,c=bC(t.get("axisExpandWidth"),l),d=bC(t.get("axisExpandCount")||0,[0,u]),f=t.get("axisExpandable")&&3<u&&d<u&&1<d&&0<c&&0<s,h=t.get("axisExpandWindow");h?(e=bC(h[1]-h[0],l),h[1]=h[0]+e):(e=bC(c*(d-1),l),(h=[c*(t.get("axisExpandCenter")||gC(u/2))-e/2])[1]=h[0]+e);var g=(s-e)/(u-d);g<3&&(g=0);var p=[gC(mC(h[0]/c,1))+1,pC(mC(h[1]/c,1))-1];return{layout:r,pixelDimIndex:a,layoutBase:n[i[a]],layoutLength:s,axisBase:n[i[1-a]],axisLength:n[o[1-a]],axisExpandable:f,axisExpandWidth:c,axisCollapseWidth:g,axisExpandWindow:h,axisCount:u,winInnerIndices:p,axisExpandWindow0Pos:g/c*h[0]}},_layoutAxes:function(){var e=this._rect,t=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),o=i.layout;t.each((function(e){var t=[0,i.axisLength],n=e.inverse?1:0;e.setExtent(t[n],t[1-n])})),dC(n,(function(t,n){var r=(i.axisExpandable?function(e,t){var n,i,o=t.axisExpandWidth,r=t.axisCollapseWidth,a=t.winInnerIndices,s=r,l=!1;return e<a[0]?(n=e*r,i=r):e<=a[1]?(n=t.axisExpandWindow0Pos+e*o-t.axisExpandWindow[0],s=o,l=!0):(n=t.layoutLength-(t.axisCount-1-e)*r,i=r),{position:n,axisNameAvailableWidth:s,axisLabelShow:l,nameTruncateMaxWidth:i}}:function(e,t){var n=t.layoutLength/(t.axisCount-1);return{position:n*e,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,i),a={horizontal:{x:r.position,y:i.axisLength},vertical:{x:0,y:r.position}},s=[a[o].x+e.x,a[o].y+e.y],l={horizontal:vC/2,vertical:0}[o],u=nt();st(u,u,l),at(u,u,s),this._axesLayout[t]={position:s,rotation:l,transform:u,axisNameAvailableWidth:r.axisNameAvailableWidth,axisLabelShow:r.axisLabelShow,nameTruncateMaxWidth:r.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(e,t,n,i){null==n&&(n=0),null==i&&(i=e.count());var o=this._axesMap,r=this.dimensions,a=[],s=[];w(r,(function(t){a.push(e.mapDimension(t)),s.push(o.get(t).model)}));for(var l=this.hasAxisBrushed(),u=n;u<i;u++){var c;if(l){c="active";for(var d=e.getValues(a,u),f=0,h=r.length;f<h;f++)if("inactive"===s[f].getActiveState(d[f])){c="inactive";break}}else c="normal";t(c,u)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,n=!1,i=0,o=e.length;i<o;i++)"normal"!==t.get(e[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(e,t){return js([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return m(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,i=t.axisExpandWindow.slice(),o=i[1]-i[0],r=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var a,s=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l="slide",u=t.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),d=null!=c[0];return u?(d&&u&&s<o*c[0]?(l="jump",a=s-o*c[2]):d&&u&&s>o*(1-c[0])?(l="jump",a=s-o*(1-c[2])):0<=(a=s-o*c[1])&&(a=s-o*(1-c[1]))<=0&&(a=0),(a*=t.axisExpandWidth/u)?lC(a,i,r,"all"):l="none"):((i=[hC(0,r[1]*s/(o=i[1]-i[0])-o/2)])[1]=fC(r[1],i[0]+o),i[0]=i[1]-o),{axisExpandWindow:i,behavior:l}}},Lu.register("parallel",{create:function(e,t){var n=[];return e.eachComponent("parallel",(function(i,o){var r=new yC(i,e,t);r.name="parallel_"+o,r.resize(i,t),(i.coordinateSystem=r).model=i,n.push(r)})),e.eachSeries((function(t){if("parallel"===t.get("coordinateSystem")){var n=e.queryComponents({mainType:"parallel",index:t.get("parallelIndex"),id:t.get("parallelId")})[0];t.coordinateSystem=n.coordinateSystem}})),n}});var TC=uu.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Yo([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=m(e);if(t)for(var n=t.length-1;0<=n;n--)ml(t[n])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var i=0,o=t.length;i<o;i++)if(t[i][0]<=e&&e<=t[i][1])return"active";return"inactive"}});v(TC.prototype,Lg),am("parallel",TC,(function(e,t){return t.type||(t.data?"category":"value")}),{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),uu.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){uu.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){e&&v(this.option,e,!0),this._initDimensions()},contains:function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},setAxisExpand:function(e){w(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])}),this)},_initDimensions:function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];w(k(this.dependentModels.parallelAxis,(function(e){return(e.get("parallelIndex")||0)===this.componentIndex}),this),(function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)}))}}),jf({type:"axisAreaSelect",event:"axisAreaSelected"},(function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},(function(t){t.axis.model.setActiveIntervals(e.intervals)}))})),jf("parallelAxisExpand",(function(e,t){t.eachComponent({mainType:"parallel",query:e},(function(t){t.setAxisExpand(e)}))}));var CC=N,EC=w,_C=O,xC=Math.min,IC=Math.max,DC=Math.pow,wC={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},OC={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},RC={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},kC=0;function SC(e){we.call(this),this._zr=e,this.group=new _n,this._track=[],this._covers=[],this._uid="brushController_"+kC++,this._handlers={},EC(iE,(function(e,t){this._handlers[t]=A(e,this)}),this)}function AC(e,t){var n=rE[t.brushType].createCover(e,t);return n.__brushOption=t,KC(n,t),e.group.add(n),n}function NC(e,t){var n=LC(t);return n.endCreating&&(n.endCreating(e,t),KC(t,t.__brushOption)),t}function MC(e,t){var n=t.__brushOption;LC(t).updateCoverShape(e,t,n.range,n)}function KC(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function PC(e,t){LC(t).updateCommon(e,t),MC(e,t)}function LC(e){return rE[e.__brushOption.brushType]}function BC(e,t,n){var i,o=e._panels;if(!o)return!0;var r=e._transform;return EC(o,(function(e){e.isTargetByCursor(t,n,r)&&(i=e)})),i}function FC(e,t){var n=e._panels;if(!n)return!0;var i=t.__brushOption.panelId;return null==i||n[i]}function zC(e){var t=e._covers,n=t.length;return EC(t,(function(t){e.group.remove(t)}),e),t.length=0,!!n}function HC(e,t){var n=_C(e._covers,(function(e){var t=e.__brushOption,n=m(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",n,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function VC(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function WC(e,t,n,i){var o=new _n;return o.add(new Ha({name:"main",style:jC(n),silent:!0,draggable:!0,cursor:"move",drift:CC(e,t,o,"nswe"),ondragend:CC(HC,t,{isEnd:!0})})),EC(i,(function(n){o.add(new Ha({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:CC(e,t,o,n),ondragend:CC(HC,t,{isEnd:!0})}))})),o}function $C(e,t,n,i){var o=i.brushStyle.lineWidth||0,r=IC(o,6),a=n[0][0],s=n[1][0],l=a-o/2,u=s-o/2,c=n[0][1],d=n[1][1],f=c-r+o/2,h=d-r+o/2,g=c-a,p=d-s,m=g+o,v=p+o;UC(e,t,"main",a,s,g,p),i.transformable&&(UC(e,t,"w",l,u,r,v),UC(e,t,"e",f,u,r,v),UC(e,t,"n",l,u,m,r),UC(e,t,"s",l,h,m,r),UC(e,t,"nw",l,u,r,r),UC(e,t,"ne",f,u,r,r),UC(e,t,"sw",l,h,r,r),UC(e,t,"se",f,h,r,r))}function qC(e,t){var n=t.__brushOption,i=n.transformable,o=t.childAt(0);o.useStyle(jC(n)),o.attr({silent:!i,cursor:i?"move":"default"}),EC(["w","e","n","s","se","sw","ne","nw"],(function(n){var o=t.childOfName(n),r=function e(t,n){return 1<n.length?("e"!==(i=[e(t,(n=n.split(""))[0]),e(t,n[1])])[0]&&"w"!==i[0]||i.reverse(),i.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[i=Gs({w:"left",e:"right",n:"top",s:"bottom"}[n],Us(t.group))];var i}(e,n);o&&o.attr({silent:!i,invisible:!i,cursor:i?OC[r]+"-resize":null})}))}function UC(e,t,n,i,o,r,a){var s=t.childOfName(n);s&&s.setShape(function(e){var t=xC(e[0][0],e[1][0]),n=xC(e[0][1],e[1][1]);return{x:t,y:n,width:IC(e[0][0],e[1][0])-t,height:IC(e[0][1],e[1][1])-n}}(JC(e,t,[[i,o],[i+r,o+a]])))}function jC(e){return T({strokeNoScale:!0},e.brushStyle)}function GC(e,t,n,i){var o=[xC(e,n),xC(t,i)],r=[IC(e,n),IC(t,i)];return[[o[0],r[0]],[o[1],r[1]]]}function XC(e,t,n,i,o,r,a,s){var l=i.__brushOption,u=e(l.range),c=ZC(n,r,a);EC(o.split(""),(function(e){var t=wC[e];u[t[0]][t[1]]+=c[t[0]]})),l.range=t(GC(u[0][0],u[1][0],u[0][1],u[1][1])),PC(n,i),HC(n,{isEnd:!1})}function YC(e,t,n,i,o){var r=t.__brushOption.range,a=ZC(e,n,i);EC(r,(function(e){e[0]+=a[0],e[1]+=a[1]})),PC(e,t),HC(e,{isEnd:!1})}function ZC(e,t,n){var i=e.group,o=i.transformCoordToLocal(t,n),r=i.transformCoordToLocal(0,0);return[o[0]-r[0],o[1]-r[1]]}function JC(e,t,n){var i=FC(e,t);return i&&!0!==i?i.clipPath(n,e._transform):m(n)}function QC(e){var t=e.event;t.preventDefault&&t.preventDefault()}function eE(e,t,n){return e.childOfName("main").contain(t,n)}function tE(e,t,n,i){var o,r=e._creatingCover,a=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],i=t[0],o=n[0]-i[0],r=n[1]-i[1];return 6<DC(o*o+r*r,.5)}(e)||r){if(a&&!r){"single"===s.brushMode&&zC(e);var l=m(s);l.brushType=nE(l.brushType,a),l.panelId=!0===a?null:a.panelId,r=e._creatingCover=AC(e,l),e._covers.push(r)}if(r){var u=rE[nE(e._brushType,a)];r.__brushOption.range=u.getCreatingRange(JC(e,r,e._track)),i&&(NC(e,r),u.updateCommon(e,r)),MC(e,r),o={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&BC(e,t,n)&&zC(e)&&(o={isEnd:i,removeOnClick:!0});return o}function nE(e,t){return"auto"===e?t.defaultBrushType:e}SC.prototype={constructor:SC,enableBrush:function(e){return this._brushType&&function(e){var t=e._zr;(function(e,t,n){var i=ny(e);i[t]===n&&(i[t]=null)})(t,"globalPan",e._uid),function(e,t){EC(t,(function(t,n){e.off(n,t)}))}(t,e._handlers),e._brushType=e._brushOption=null}(this),e.brushType&&function(e,t){var n=e._zr;e._enableGlobalPan||function(e,t,n){ny(e).globalPan=n}(n,0,e._uid),function(e,t){EC(t,(function(t,n){e.on(n,t)}))}(n,e._handlers),e._brushType=t.brushType,e._brushOption=v(m(RC),t,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};w(e,(function(e){t[e.panelId]=m(e)}))}else this._panels=null;return this},mount:function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){EC(this._covers,e,t)},updateCovers:function(e){e=O(e,(function(e){return v(m(RC),e,!0)}));var t=this._covers,n=this._covers=[],i=this,o=this._creatingCover;return new oh(t,e,(function(e,t){return r(e.__brushOption,t)}),r).add(a).update(a).remove((function(e){t[e]!==o&&i.group.remove(t[e])})).execute(),this;function r(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function a(r,a){var s=e[r];if(null!=a&&t[a]===o)n[r]=t[a];else{var l=n[r]=null!=a?(t[a].__brushOption=s,t[a]):NC(i,AC(i,s));PC(i,l)}}},unmount:function(){return this.enableBrush(!1),zC(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},I(SC,we);var iE={mousedown:function(e){if(this._dragging)oE(this,e);else if(!e.target||!e.target.draggable){QC(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=BC(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var i=e._zr;return t<0||t>i.getWidth()||void 0>i.getHeight()}(e,t)){var i=e._zr,o=e._covers,r=BC(e,t,n);if(!e._dragging)for(var a=0;a<o.length;a++){var s=o[a].__brushOption;if(r&&(!0===r||s.panelId===r.panelId)&&rE[s.brushType].contain(o[a],n[0],n[1]))return}r&&i.setCursorStyle("crosshair")}}(this,e,t),this._dragging){QC(e);var n=tE(this,e,t,!1);n&&HC(this,n)}},mouseup:function(e){oE(this,e)}};function oE(e,t){if(e._dragging){QC(t);var n=e.group.transformCoordToLocal(t.offsetX,t.offsetY),i=tE(e,t,n,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&HC(e,i)}}var rE={lineX:aE(0),lineY:aE(1),rect:{createCover:function(e,t){return WC(CC(XC,(function(e){return e}),(function(e){return e})),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=VC(e);return GC(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,i){$C(e,t,n,i)},updateCommon:qC,contain:eE},polygon:{createCover:function(e,t){var n=new _n;return n.add(new Ka({name:"main",style:jC(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Ma({name:"main",draggable:!0,drift:CC(YC,e,t),ondragend:CC(HC,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,i){t.childAt(0).setShape({points:JC(e,t,n)})},updateCommon:qC,contain:eE}};function aE(e){return{createCover:function(t,n){return WC(CC(XC,(function(t){var n=[t,[0,100]];return e&&n.reverse(),n}),(function(t){return t[e]})),t,n,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var n=VC(t);return[xC(n[0][e],n[1][e]),IC(n[0][e],n[1][e])]},updateCoverShape:function(t,n,i,o){var r,a=FC(t,n);if(!0!==a&&a.getLinearBrushOtherExtent)r=a.getLinearBrushOtherExtent(e,t._transform);else{var s=t._zr;r=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[i,r];e&&l.reverse(),$C(t,n,l,o)},updateCommon:qC,contain:eE}}function sE(e){return e=cE(e),function(t,n){return Ys(t,e)}}function lE(e,t){return e=cE(e),function(n){var i=null!=t?t:n,o=i?e.x:e.y;return[o,o+((i?e.width:e.height)||0)]}}function uE(e,t,n){return e=cE(e),function(i,o,r){return e.contain(o[0],o[1])&&!py(i,t,n)}}function cE(e){return En.create(e)}var dE=["axisLine","axisTickLabel","axisName"],fE=eh({type:"parallelAxis",init:function(e,t){fE.superApply(this,"init",arguments),(this._brushController=new SC(t.getZr())).on("brush",A(this._onBrush,this))},render:function(e,t,n,i){if(!function(e,t,n){return n&&"axisAreaSelect"===n.type&&t.findComponents({mainType:"parallelAxis",query:n})[0]===e}(e,t,i)){this.axisModel=e,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new _n,this.group.add(this._axisGroup),e.get("show")){var r=function(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}(e,t),a=r.coordinateSystem,s=e.getAreaSelectStyle(),l=s.width,u=b({strokeContainThreshold:l},a.getAxisLayout(e.axis.dim)),c=new bm(e,u);w(dE,c.add,c),this._axisGroup.add(c.getGroup()),this._refreshBrushController(u,s,e,r,l,n),Xs(o,this._axisGroup,i&&!1===i.animation?null:e)}}},_refreshBrushController:function(e,t,n,i,o,r){var a=n.axis.getExtent(),s=a[1]-a[0],l=Math.min(30,.1*Math.abs(s)),u=En.create({x:a[0],y:-o/2,width:s,height:o});u.x-=l,u.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:sE(u),isTargetByCursor:uE(u,r,i),getLinearBrushOtherExtent:lE(u,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers(function(e){var t=e.axis;return O(e.activeIntervals,(function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}}))}(n))},_onBrush:function(e,t){var n=this.axisModel,i=n.axis,o=O(e,(function(e){return[i.coordToData(e.range[0],!0),i.coordToData(e.range[1],!0)]}));!n.option.realtime!==t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},dispose:function(){this._brushController.dispose()}});eh({type:"parallel",render:function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},w(hE,(function(e,t){n.getZr().on(t,this._handlers[t]=A(e,this))}),this)),rd(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,t){w(this._handlers,(function(e,n){t.getZr().off(n,e)})),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(b({type:"parallelAxisExpand"},e))}});var hE={mousedown:function(e){gE(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(gE(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(5<Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&gE(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i&&null})}}};function gE(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}function pE(e,t,n,i){for(var o,r=[],a=0;a<n.length;a++){var s=n[a],l=e.get(e.mapDimension(s),t);o=l,("category"===i.getAxis(s).type?null==o:null==o||isNaN(o))||r.push(i.dataToPoint(l,s))}return r}function mE(e,t,n,i,o){var r=pE(e,n,i,o),a=new Ka({shape:{points:r},silent:!0,z2:10});return t.add(a),e.setItemGraphicEl(n,a),a}function vE(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:null!=t?t:.3}}function yE(e,t,n,i){var o=i.lineStyle;t.hasItemOption&&(o=t.getItemModel(n).getModel("lineStyle").getLineStyle()),e.useStyle(o);var r=e.style;r.fill=null,r.stroke=t.getItemVisual(n,"color"),r.opacity=t.getItemVisual(n,"opacity"),i.smooth&&(e.shape.smooth=i.smooth)}qf((function(e){!function(e){if(!e.parallel){var t=!1;w(e.series,(function(e){e&&"parallel"===e.type&&(t=!0)})),t&&(e.parallel=[{}])}}(e),function(e){w(Do(e.parallelAxis),(function(t){if(L(t)){var n=t.parallelIndex||0,i=Do(e.parallel)[n];i&&i.parallelAxisDefault&&v(t,i.parallelAxisDefault,!1)}}))}(e)})),Kc.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var n=this.getSource();return function(e,t){if(!e.encodeDefine){var n=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(n){var i=e.encodeDefine=Q();w(n.dimensions,(function(e){var t=function(e){return+e.replace("dim","")}(e);i.set(e,t)}))}}}(n,this),Hh(n,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,n=this.getData(),i=[];return t.eachActiveState(n,(function(t,o){e===t&&i.push(n.getRawIndex(o))})),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),Gc.extend({type:"parallel",init:function(){this._dataGroup=new _n,this.group.add(this._dataGroup)},render:function(e,t,n,i){var o=this._dataGroup,r=e.getData(),a=this._data,s=e.coordinateSystem,l=s.dimensions,u=vE(e);if(r.diff(a).add((function(e){yE(mE(r,o,e,l,s),r,e,u)})).update((function(t,n){var o=a.getItemGraphicEl(n),c=pE(r,t,l,s);r.setItemGraphicEl(t,o),$s(o,{shape:{points:c}},i&&!1===i.animation?null:e,t),yE(o,r,t,u)})).remove((function(e){var t=a.getItemGraphicEl(e);o.remove(t)})).execute(),!this._initialized){this._initialized=!0;var c=function(e,t,n){var i=e.model,o=e.getRect(),r=new Ha({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),a="horizontal"===i.get("layout")?"width":"height";return r.setShape(a,0),qs(r,{shape:{width:o.width,height:o.height}},t,n),r}(s,e,(function(){setTimeout((function(){o.removeClipPath()}))}));o.setClipPath(c)}this._data=r},incrementalPrepareRender:function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,n){for(var i=t.getData(),o=t.coordinateSystem,r=o.dimensions,a=vE(t),s=e.start;s<e.end;s++){var l=mE(i,this._dataGroup,s,r,o);l.incremental=!0,yE(l,i,s,a)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var bE=["lineStyle","normal","opacity"];Yf({seriesType:"parallel",reset:function(e,t,n){var i=e.getModel("itemStyle"),o=e.getModel("lineStyle"),r=t.get("color"),a=o.get("color")||i.get("color")||r[e.seriesIndex%r.length],s=e.get("inactiveOpacity"),l=e.get("activeOpacity"),u=e.getModel("lineStyle").getLineStyle(),c=e.coordinateSystem,d=e.getData(),f={normal:u.opacity,active:l,inactive:s};return d.setVisual("color",a),{progress:function(e,t){c.eachActiveState(t,(function(e,n){var i=f[e];if("normal"===e&&t.hasItemOption){var o=t.getItemModel(n).get(bE,!0);null!=o&&(i=o)}t.setItemVisual(n,"opacity",i)}),e.start,e.end)}}}});var TE=Kc.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var n=e.edges||e.links,i=e.data||e.nodes,o=e.levels,r=this.levelModels={},a=0;a<o.length;a++)null!=o[a].depth&&0<=o[a].depth&&(r[o[a].depth]=new ll(o[a],this,t));if(i&&n)return fT(i,n,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){return e.customizeGetParent((function(e){var n=this.parentModel,i=n.getData().getItemLayout(t).depth;return n.levelModels[i]||this.parentModel})),e})),t.wrapMethod("getItemModel",(function(e,t){return e.customizeGetParent((function(e){var n=this.parentModel,i=n.getGraph().getEdgeByIndex(t).node1.getLayout().depth;return n.levelModels[i]||this.parentModel})),e}))})).data},setNodePosition:function(e,t){var n=this.option.data[e];n.localX=t[0],n.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,n){if("edge"===n){var i=this.getDataParams(e,n),o=i.data,r=o.source+" -- "+o.target;return i.value&&(r+=" : "+i.value),Ll(r)}if("node"!==n)return TE.superCall(this,"formatTooltip",e,t);var a=this.getGraph().getNodeByIndex(e).getLayout().value,s=this.getDataParams(e,n).data.name;return a&&(r=s+" : "+a),Ll(r)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var n=TE.superCall(this,"getDataParams",e,t);if(null==n.value&&"node"===t){var i=this.getGraph().getNodeByIndex(e).getLayout().value;n.value=i}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),CE=["itemStyle","opacity"],EE=["emphasis","itemStyle","opacity"],_E=["lineStyle","opacity"],xE=["emphasis","lineStyle","opacity"];function IE(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function DE(e,t,n){var i=e.getGraphicEl(),o=IE(e,t);null!=n&&(null==o&&(o=1),o*=n),i.downplay&&i.downplay(),i.traverse((function(e){"group"!==e.type&&e.setStyle("opacity",o)}))}function wE(e,t){var n=IE(e,t),i=e.getGraphicEl();i.traverse((function(e){"group"!==e.type&&e.setStyle("opacity",n)})),i.highlight&&i.highlight()}var OE=ls({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function RE(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&0<=t.depth}function kE(e,t,n,i,o){var r="vertical"===o?"x":"y";w(e,(function(e){var a,s,l;e.sort((function(e,t){return e.getLayout()[r]-t.getLayout()[r]}));for(var u=0,c=e.length,d="vertical"===o?"dx":"dy",f=0;f<c;f++)0<(l=u-(s=e[f]).getLayout()[r])&&(a=s.getLayout()[r]+l,s.setLayout("vertical"===o?{x:a}:{y:a},!0)),u=s.getLayout()[r]+s.getLayout()[d]+t;if(0<(l=u-t-("vertical"===o?i:n)))for(a=s.getLayout()[r]-l,s.setLayout("vertical"===o?{x:a}:{y:a},!0),u=a,f=c-2;0<=f;--f)0<(l=(s=e[f]).getLayout()[r]+s.getLayout()[d]+t-u)&&(a=s.getLayout()[r]-l,s.setLayout("vertical"===o?{x:a}:{y:a},!0)),u=s.getLayout()[r]}))}function SE(e,t,n){w(e.slice().reverse(),(function(e){w(e,(function(e){if(e.outEdges.length){var i=BE(e.outEdges,AE,n)/BE(e.outEdges,LE,n);if(isNaN(i)){var o=e.outEdges.length;i=o?BE(e.outEdges,NE,n)/o:0}if("vertical"===n){var r=e.getLayout().x+(i-PE(e,n))*t;e.setLayout({x:r},!0)}else{var a=e.getLayout().y+(i-PE(e,n))*t;e.setLayout({y:a},!0)}}}))}))}function AE(e,t){return PE(e.node2,t)*e.getValue()}function NE(e,t){return PE(e.node2,t)}function ME(e,t){return PE(e.node1,t)*e.getValue()}function KE(e,t){return PE(e.node1,t)}function PE(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function LE(e){return e.getValue()}function BE(e,t,n){for(var i=0,o=e.length,r=-1;++r<o;){var a=+t.call(e,e[r],n);isNaN(a)||(i+=a)}return i}function FE(e,t,n){w(e,(function(e){w(e,(function(e){if(e.inEdges.length){var i=BE(e.inEdges,ME,n)/BE(e.inEdges,LE,n);if(isNaN(i)){var o=e.inEdges.length;i=o?BE(e.inEdges,KE,n)/o:0}if("vertical"===n){var r=e.getLayout().x+(i-PE(e,n))*t;e.setLayout({x:r},!0)}else{var a=e.getLayout().y+(i-PE(e,n))*t;e.setLayout({y:a},!0)}}}))}))}nh({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,n){var i=this,o=e.getGraph(),r=this.group,a=e.layoutInfo,s=a.width,l=a.height,u=e.getData(),c=e.getData("edge"),d=e.get("orient");this._model=e,r.removeAll(),r.attr("position",[a.x,a.y]),o.eachEdge((function(t){var n=new OE;n.dataIndex=t.dataIndex,n.seriesIndex=e.seriesIndex,n.dataType="edge";var i,o,a,u,f,h,g,p,m=t.getModel("lineStyle"),v=m.get("curveness"),y=t.node1.getLayout(),b=t.node1.getModel(),T=b.get("localX"),C=b.get("localY"),E=t.node2.getLayout(),_=t.node2.getModel(),x=_.get("localX"),I=_.get("localY"),D=t.getLayout();switch(n.shape.extent=Math.max(1,D.dy),p="vertical"===(n.shape.orient=d)?(f=i=(null!=T?T*s:y.x)+D.sy,h=(o=(null!=C?C*l:y.y)+y.dy)*(1-v)+(u=null!=I?I*l:E.y)*v,g=a=(null!=x?x*s:E.x)+D.ty,o*v+u*(1-v)):(f=(i=(null!=T?T*s:y.x)+y.dx)*(1-v)+(a=null!=x?x*s:E.x)*v,h=o=(null!=C?C*l:y.y)+D.sy,g=i*v+a*(1-v),u=(null!=I?I*l:E.y)+D.ty),n.setShape({x1:i,y1:o,x2:a,y2:u,cpx1:f,cpy1:h,cpx2:g,cpy2:p}),n.setStyle(m.getItemStyle()),n.style.fill){case"source":n.style.fill=t.node1.getVisual("color");break;case"target":n.style.fill=t.node2.getVisual("color")}ks(n,t.getModel("emphasis.lineStyle").getItemStyle()),r.add(n),c.setItemGraphicEl(t.dataIndex,n)})),o.eachNode((function(t){var n=t.getLayout(),i=t.getModel(),o=i.get("localX"),a=i.get("localY"),c=i.getModel("label"),d=i.getModel("emphasis.label"),f=new Ha({shape:{x:null!=o?o*s:n.x,y:null!=a?a*l:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle()}),h=t.getModel("emphasis.itemStyle").getItemStyle();Ms(f.style,h,c,d,{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id,isRectText:!0}),f.setStyle("fill",t.getVisual("color")),ks(f,h),r.add(f),u.setItemGraphicEl(t.dataIndex,f),f.dataType="node"})),u.eachItemGraphicEl((function(t,o){var r=u.getItemModel(o);r.get("draggable")&&(t.drift=function(t,r){i._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=r,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:u.getRawIndex(o),localX:this.shape.x/s,localY:this.shape.y/l})},t.ondragend=function(){i._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move"),t.highlight=function(){this.trigger("emphasis")},t.downplay=function(){this.trigger("normal")},t.focusNodeAdjHandler&&t.off("mouseover",t.focusNodeAdjHandler),t.unfocusNodeAdjHandler&&t.off("mouseout",t.unfocusNodeAdjHandler),r.get("focusNodeAdjacency")&&(t.on("mouseover",t.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex}))}),t.on("mouseout",t.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))})),c.eachItemGraphicEl((function(t,o){var r=c.getItemModel(o);t.focusNodeAdjHandler&&t.off("mouseover",t.focusNodeAdjHandler),t.unfocusNodeAdjHandler&&t.off("mouseout",t.unfocusNodeAdjHandler),r.get("focusNodeAdjacency")&&(t.on("mouseover",t.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex}))}),t.on("mouseout",t.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))})),!this._data&&e.get("animation")&&r.setClipPath(function(e,t,n){var i=new Ha({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return qs(i,{shape:{width:e.width+20}},t,(function(){r.removeClipPath()})),i}(r.getBoundingRect(),e)),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,i){var o=e.getData(),r=o.graph,a=i.dataIndex,s=o.getItemModel(a),l=i.edgeDataIndex;if(null!=a||null!=l){var u=r.getNodeByIndex(a),c=r.getEdgeByIndex(l);if(r.eachNode((function(e){DE(e,CE,.1)})),r.eachEdge((function(e){DE(e,_E,.1)})),u){wE(u,EE);var d=s.get("focusNodeAdjacency");"outEdges"===d?w(u.outEdges,(function(e){e.dataIndex<0||(wE(e,xE),wE(e.node2,EE))})):"inEdges"===d?w(u.inEdges,(function(e){e.dataIndex<0||(wE(e,xE),wE(e.node1,EE))})):"allEdges"===d&&w(u.edges,(function(e){e.dataIndex<0||(wE(e,xE),e.node1!==u&&wE(e.node1,EE),e.node2!==u&&wE(e.node2,EE))}))}c&&(wE(c,xE),wE(c.node1,EE),wE(c.node2,EE))}},unfocusNodeAdjacency:function(e,t,n,i){var o=e.getGraph();o.eachNode((function(e){DE(e,CE)})),o.eachEdge((function(e){DE(e,_E)}))}}),jf({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))})),Xf((function(e,t,n){e.eachSeriesByType("sankey",(function(e){var n=e.get("nodeWidth"),i=e.get("nodeGap"),o=function(e,t){return eu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),r=(e.layoutInfo=o).width,a=o.height,s=e.getGraph(),l=s.nodes,u=s.edges;!function(e){w(e,(function(e){var t=BE(e.outEdges,LE),n=BE(e.inEdges,LE),i=e.getValue()||0,o=Math.max(t,n,i);e.setLayout({value:o},!0)}))}(l),function(e,t,n,i,o,r,a,s,l){(function(e,t,n,i,o,r,a){for(var s=[],l=[],u=[],c=[],d=0,f=0;f<t.length;f++)s[f]=1;for(f=0;f<e.length;f++)l[f]=e[f].inEdges.length,0===l[f]&&u.push(e[f]);for(var h=-1;u.length;){for(var g=0;g<u.length;g++){var p=u[g],m=p.hostGraph.data.getRawDataItem(p.dataIndex),v=null!=m.depth&&0<=m.depth;v&&m.depth>h&&(h=m.depth),p.setLayout({depth:v?m.depth:d},!0),p.setLayout("vertical"===r?{dy:n}:{dx:n},!0);for(var y=0;y<p.outEdges.length;y++){var b=p.outEdges[y];s[t.indexOf(b)]=0;var T=b.node2;0==--l[e.indexOf(T)]&&c.indexOf(T)<0&&c.push(T)}}++d,u=c,c=[]}for(f=0;f<s.length;f++)if(1===s[f])throw new Error("Sankey is a DAG, the original data has cycle!");var C=d-1<h?h:d-1;a&&"left"!==a&&function(e,t,n,i){if("right"===t){for(var o=[],r=e,a=0;r.length;){for(var s=0;s<r.length;s++){var l=r[s];l.setLayout({skNodeHeight:a},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];o.indexOf(c.node1)<0&&o.push(c.node1)}}r=o,o=[],++a}w(e,(function(e){RE(e)||e.setLayout({depth:Math.max(0,i-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){w(e,(function(e){RE(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,i)}(e,a,0,C),function(e,t,n){w(e,(function(e){var i=e.getLayout().depth*t;e.setLayout("vertical"===n?{y:i}:{x:i},!0)}))}(e,"vertical"===r?(o-n)/C:(i-n)/C,r)})(e,t,n,o,r,s,l),function(e,t,n,i,o,r,a){var s=function(e,t){var n=[],i="vertical"===t?"y":"x",o=Ho(e,(function(e){return e.getLayout()[i]}));return o.keys.sort((function(e,t){return e-t})),w(o.keys,(function(e){n.push(o.buckets.get(e))})),n}(e,a);(function(e,t,n,i,o,r){var a=1/0;w(e,(function(e){var t=e.length,s=0;w(e,(function(e){s+=e.getLayout().value}));var l="vertical"===r?(i-(t-1)*o)/s:(n-(t-1)*o)/s;l<a&&(a=l)})),w(e,(function(e){w(e,(function(e,t){var n=e.getLayout().value*a;"vertical"===r?(e.setLayout({x:t},!0),e.setLayout({dx:n},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:n},!0))}))})),w(t,(function(e){var t=+e.getValue()*a;e.setLayout({dy:t},!0)}))})(s,t,n,i,o,a),kE(s,o,n,i,a);for(var l=1;0<r;r--)SE(s,l*=.99,a),kE(s,o,n,i,a),FE(s,l,a),kE(s,o,n,i,a)}(e,t,r,o,i,a,s),function(e,t){var n="vertical"===t?"x":"y";w(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[n]-t.node2.getLayout()[n]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[n]-t.node1.getLayout()[n]}))})),w(e,(function(e){var t=0,n=0;w(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),w(e.inEdges,(function(e){e.setLayout({ty:n},!0),n+=e.getLayout().dy}))}))}(e,s)}(l,u,n,i,r,a,0!==k(l,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))}))})),Yf((function(e,t){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph().nodes;if(t.length){var n=1/0,i=-1/0;w(t,(function(e){var t=e.getLayout().value;t<n&&(n=t),i<t&&(i=t)})),w(t,(function(t){var o=new Ob({type:"color",mappingMethod:"linear",dataExtent:[n,i],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),r=t.getModel().get("itemStyle.color");t.setVisual("color",null!=r?r:o)}))}}))}));var zE={_baseAxisDim:null,getInitialData:function(e,t){var n,i,o=t.getComponent("xAxis",this.get("xAxisIndex")),r=t.getComponent("yAxis",this.get("yAxisIndex")),a=o.get("type"),s=r.get("type");"category"===a?(e.layout="horizontal",n=o.getOrdinalMeta(),i=!0):"category"===s?(e.layout="vertical",n=r.getOrdinalMeta(),i=!0):e.layout=e.layout||"horizontal";var l=["x","y"],u="horizontal"===e.layout?0:1,c=this._baseAxisDim=l[u],d=l[1-u],f=[o,r],h=f[u].get("type"),g=f[1-u].get("type"),p=e.data;if(p&&i){var m=[];w(p,(function(e,t){var n;e.value&&M(e.value)?(n=e.value.slice(),e.value.unshift(t)):M(e)?(n=e.slice(),e.unshift(t)):n=e,m.push(n)})),e.data=m}var v=this.defaultValueDimensions,y=[{name:c,type:lh(h),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:lh(g),dimsDef:v.slice()}];return fv(this,{coordDimensions:y,dimensionsCount:v.length+1,encodeDefaulter:N(Du,y,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};I(Kc.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),zE,!0);var HE=["itemStyle"],VE=["emphasis","itemStyle"],WE=(Gc.extend({type:"boxplot",render:function(e,t,n){var i=e.getData(),o=this.group,r=this._data;this._data||o.removeAll();var a="horizontal"===e.get("layout")?1:0;i.diff(r).add((function(e){if(i.hasValue(e)){var t=$E(i.getItemLayout(e),i,e,a,!0);i.setItemGraphicEl(e,t),o.add(t)}})).update((function(e,t){var n=r.getItemGraphicEl(t);if(i.hasValue(e)){var s=i.getItemLayout(e);n?qE(s,n,i,e):n=$E(s,i,e,a),o.add(n),i.setItemGraphicEl(e,n)}else o.remove(n)})).remove((function(e){var t=r.getItemGraphicEl(e);t&&o.remove(t)})).execute(),this._data=i},remove:function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl((function(e){e&&t.remove(e)}))},dispose:te}),ua.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var n=t.points,i=0;for(e.moveTo(n[i][0],n[i][1]),i++;i<4;i++)e.lineTo(n[i][0],n[i][1]);for(e.closePath();i<n.length;i++)e.moveTo(n[i][0],n[i][1]),i++,e.lineTo(n[i][0],n[i][1])}}));function $E(e,t,n,i,o){var r=e.ends,a=new WE({shape:{points:o?function(e,t,n){return O(e,(function(e){return(e=e.slice())[t]=n.initBaseline,e}))}(r,i,e):r}});return qE(e,a,t,n,o),a}function qE(e,t,n,i,o){(0,tl[o?"initProps":"updateProps"])(t,{shape:{points:e.ends}},n.hostModel,i);var r=n.getItemModel(i),a=r.getModel(HE),s=n.getItemVisual(i,"color"),l=a.getItemStyle(["borderColor"]);l.stroke=s,l.strokeNoScale=!0,t.useStyle(l),t.z2=100,ks(t,r.getModel(VE).getItemStyle())}var UE=["itemStyle","borderColor"],jE=w;Yf((function(e,t){var n=e.get("color");e.eachRawSeriesByType("boxplot",(function(t){var i=n[t.seriesIndex%n.length],o=t.getData();o.setVisual({legendSymbol:"roundRect",color:t.get(UE)||i}),e.isSeriesFiltered(t)||o.each((function(e){var t=o.getItemModel(e);o.setItemVisual(e,{color:t.get(UE,!0)})}))}))})),Xf((function(e){var t=function(e){var t=[],n=[];return e.eachSeriesByType("boxplot",(function(e){var i=e.getBaseAxis(),o=_(n,i);o<0&&(n[o=n.length]=i,t[o]={axis:i,seriesModels:[]}),t[o].seriesModels.push(e)})),t}(e);jE(t,(function(e){var t=e.seriesModels;t.length&&(function(e){var t,n,i=e.axis,o=e.seriesModels,r=o.length,a=e.boxWidthList=[],s=e.boxOffsetList=[],l=[];if("category"===i.type)n=i.getBandWidth();else{var u=0;jE(o,(function(e){u=Math.max(u,e.getData().count())})),t=i.getExtent(),Math.abs(t[1]-t[0])}jE(o,(function(e){var t=e.get("boxWidth");M(t)||(t=[t,t]),l.push([gl(t[0],n)||0,gl(t[1],n)||0])}));var c=.8*n-2,d=c/r*.3,f=(c-d*(r-1))/r,h=f/2-c/2;jE(o,(function(e,t){s.push(h),h+=d+f,a.push(Math.min(Math.max(f,l[t][0]),l[t][1]))}))}(e),jE(t,(function(t,n){!function(e,t,n){var i=e.coordinateSystem,o=e.getData(),r=n/2,a="horizontal"===e.get("layout")?0:1,s=1-a,l=["x","y"],u=o.mapDimension(l[a]),c=o.mapDimension(l[s],!0);if(!(null==u||c.length<5))for(var d=0;d<o.count();d++){var f=o.get(u,d),h=b(f,c[2],d),g=b(f,c[0],d),p=b(f,c[1],d),m=b(f,c[3],d),v=b(f,c[4],d),y=[];T(y,p,0),T(y,m,1),y.push(g,p,v,m),C(y,g),C(y,v),C(y,h),o.setItemLayout(d,{initBaseline:h[s],ends:y})}function b(e,n,r){var l,u=o.get(n,r),c=[];return c[a]=e,c[s]=u,isNaN(e)||isNaN(u)?l=[NaN,NaN]:(l=i.dataToPoint(c))[a]+=t,l}function T(e,t,n){var i=t.slice(),o=t.slice();i[a]+=r,o[a]-=r,n?e.push(i,o):e.push(o,i)}function C(e,t){var n=t.slice(),i=t.slice();n[a]-=r,i[a]+=r,e.push(n,i)}}(t,e.boxOffsetList[n],e.boxWidthList[n])})))}))})),I(Kc.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,n){var i=t.getItemLayout(e);return i&&n.rect(i.brushRect)}}),zE,!0);var GE=["itemStyle"],XE=["emphasis","itemStyle"],YE=["color","color0","borderColor","borderColor0"],ZE=(Gc.extend({type:"candlestick",render:function(e,t,n){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,i){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),n=this._data,i=this.group,o=t.getLayout("isSimpleBox"),r=e.get("clip",!0),a=e.coordinateSystem,s=a.getArea&&a.getArea();this._data||i.removeAll(),t.diff(n).add((function(n){if(t.hasValue(n)){var a,l=t.getItemLayout(n);if(r&&QE(s,l))return;qs(a=JE(l,0,!0),{shape:{points:l.ends}},e,n),e_(a,t,n,o),i.add(a),t.setItemGraphicEl(n,a)}})).update((function(a,l){var u=n.getItemGraphicEl(l);if(t.hasValue(a)){var c=t.getItemLayout(a);r&&QE(s,c)?i.remove(u):(u?$s(u,{shape:{points:c.ends}},e,a):u=JE(c),e_(u,t,a,o),i.add(u),t.setItemGraphicEl(a,u))}else i.remove(u)})).remove((function(e){var t=n.getItemGraphicEl(e);t&&i.remove(t)})).execute(),this._data=t},_renderLarge:function(e){this._clear(),n_(e,this.group);var t=e.get("clip",!0)?$p(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var n,i=t.getData(),o=i.getLayout("isSimpleBox");null!=(n=e.next());){var r;e_(r=JE(i.getItemLayout(n)),i,n,o),r.incremental=!0,this.group.add(r)}},_incrementalRenderLarge:function(e,t){n_(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:te}),ua.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))}}));function JE(e,t,n){var i=e.ends;return new ZE({shape:{points:n?function(e,t){return O(e,(function(e){return(e=e.slice())[1]=t.initBaseline,e}))}(i,e):i},z2:100})}function QE(e,t){for(var n=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){n=!1;break}return n}function e_(e,t,n,i){var o=t.getItemModel(n),r=o.getModel(GE),a=t.getItemVisual(n,"color"),s=t.getItemVisual(n,"borderColor")||a,l=r.getItemStyle(YE);e.useStyle(l),e.style.strokeNoScale=!0,e.style.fill=a,e.style.stroke=s,e.__simpleBox=i,ks(e,o.getModel(XE).getItemStyle())}var t_=ua.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var n=t.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];e.moveTo(o,n[i++]),e.lineTo(o,n[i++])}else i+=3}});function n_(e,t,n){var i=e.getData(),o=i.getLayout("largePoints"),r=new t_({shape:{points:o},__sign:1});t.add(r);var a=new t_({shape:{points:o},__sign:-1});t.add(a),i_(1,r,e,i),i_(-1,a,e,i),n&&(r.incremental=!0,a.incremental=!0)}function i_(e,t,n,i){var o=0<e?"P":"N",r=i.getVisual("borderColor"+o)||i.getVisual("color"+o),a=n.getModel(GE).getItemStyle(YE);t.useStyle(a),t.style.fill=null,t.style.stroke=r}var o_=["itemStyle","borderColor"],r_=["itemStyle","borderColor0"],a_=["itemStyle","color"],s_=["itemStyle","color0"],l_={seriesType:"candlestick",plan:qc(),performRawSeries:!0,reset:function(e,t){if(e.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,e),colorN:n(-1,e),borderColorP:i(1,e),borderColorN:i(-1,e)}),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,t){for(var o;null!=(o=e.next());){var r=t.getItemModel(o),a=t.getItemLayout(o).sign;t.setItemVisual(o,{color:n(a,r),borderColor:i(a,r)})}}};function n(e,t){return t.get(0<e?a_:s_)}function i(e,t){return t.get(0<e?o_:r_)}}},u_="undefined"!=typeof Float32Array?Float32Array:Array,c_={seriesType:"candlestick",plan:qc(),reset:function(e){var t=e.coordinateSystem,n=e.getData(),i=function(e,t){var n,i=e.getBaseAxis(),o="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/t.count()),r=gl(W(e.get("barMaxWidth"),o),o),a=gl(W(e.get("barMinWidth"),1),o),s=e.get("barWidth");return null!=s?gl(s,o):Math.max(Math.min(o/2,r),a)}(e,n),o=["x","y"],r=n.mapDimension(o[0]),a=n.mapDimension(o[1],!0),s=a[0],l=a[1],u=a[2],c=a[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==r||a.length<4))return{progress:e.pipelineContext.large?function(e,n){for(var i,o,a=new u_(4*e.count),d=0,f=[],h=[];null!=(o=e.next());){var g=n.get(r,o),p=n.get(s,o),m=n.get(l,o),v=n.get(u,o),y=n.get(c,o);isNaN(g)||isNaN(v)||isNaN(y)?(a[d++]=NaN,d+=3):(a[d++]=d_(n,o,p,m,l),f[0]=g,f[1]=v,i=t.dataToPoint(f,null,h),a[d++]=i?i[0]:NaN,a[d++]=i?i[1]:NaN,f[1]=y,i=t.dataToPoint(f,null,h),a[d++]=i?i[1]:NaN)}n.setLayout("largePoints",a)}:function(e,n){for(var o;null!=(o=e.next());){var a=n.get(r,o),d=n.get(s,o),f=n.get(l,o),h=n.get(u,o),g=n.get(c,o),p=Math.min(d,f),m=Math.max(d,f),v=E(p,a),y=E(m,a),b=E(h,a),T=E(g,a),C=[];_(C,y,0),_(C,v,1),C.push(I(T),I(y),I(b),I(v)),n.setItemLayout(o,{sign:d_(n,o,d,f,l),initBaseline:f<d?y[1]:v[1],ends:C,brushRect:x(h,g,a)})}function E(e,n){var i=[];return i[0]=n,i[1]=e,isNaN(n)||isNaN(e)?[NaN,NaN]:t.dataToPoint(i)}function _(e,t,n){var o=t.slice(),r=t.slice();o[0]=ms(o[0]+i/2,1,!1),r[0]=ms(r[0]-i/2,1,!0),n?e.push(o,r):e.push(r,o)}function x(e,t,n){var o=E(e,n),r=E(t,n);return o[0]-=i/2,r[0]-=i/2,{x:o[0],y:o[1],width:i,height:r[1]-o[1]}}function I(e){return e[0]=ms(e[0],1),e}}}}};function d_(e,t,n,i,o){return i<n?-1:n<i?1:0<t?e.get(o,t-1)<=i?1:-1:1}function f_(e,t){var n=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})}))}function h_(e,t){_n.call(this);var n=new hp(e,t),i=new _n;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(e,t)}qf((function(e){e&&M(e.series)&&w(e.series,(function(e){L(e)&&"k"===e.type&&(e.type="candlestick")}))})),Yf(l_),Xf(c_),Kc.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return Hh(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var g_=h_.prototype;g_.stopEffectAnimation=function(){this.childAt(1).removeAll()},g_.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,i=this.childAt(1),o=0;o<3;o++){var r=Ug(t,-1,-1,2,2,n);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var a=-o/3*e.period+e.effectOffset;r.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(a).start(),r.animateStyle(!0).when(e.period,{opacity:0}).delay(a).start(),i.add(r)}f_(i,e)},g_.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],o=0;o<i.length;o++){var r=i[o];if(t[r]!==e[r])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}f_(n,e)},g_.highlight=function(){this.trigger("emphasis")},g_.downplay=function(){this.trigger("normal")},g_.updateData=function(e,t){var n=e.hostModel;this.childAt(0).updateData(e,t);var i=this.childAt(1),o=e.getItemModel(t),r=e.getItemVisual(t,"symbol"),a=function(e){return M(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),s=e.getItemVisual(t,"color");i.attr("scale",a),i.traverse((function(e){e.attr({fill:s})}));var l=o.getShallow("symbolOffset");if(l){var u=i.position;u[0]=gl(l[0],a[0]),u[1]=gl(l[1],a[1])}var c=e.getItemVisual(t,"symbolRotate");i.rotation=(c||0)*Math.PI/180||0;var d={};if(d.showEffectOn=n.get("showEffectOn"),d.rippleScale=o.get("rippleEffect.scale"),d.brushType=o.get("rippleEffect.brushType"),d.period=1e3*o.get("rippleEffect.period"),d.effectOffset=t/e.count(),d.z=o.getShallow("z")||0,d.zlevel=o.getShallow("zlevel")||0,d.symbolType=r,d.color=s,d.rippleEffectColor=o.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===d.showEffectOn)this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d;else{this._effectCfg=null,this.stopEffectAnimation();var f=this.childAt(0),h=function(){f.highlight(),"render"!==d.showEffectOn&&this.startEffectAnimation(d)},g=function(){f.downplay(),"render"!==d.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",h,this).on("mouseout",g,this).on("emphasis",h,this).on("normal",g,this)}this._effectCfg=d},g_.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},x(h_,_n),nh({type:"effectScatter",init:function(){this._symbolDraw=new _p(h_)},render:function(e,t,n){var i=e.getData(),o=this._symbolDraw;o.updateData(i),this.group.add(o.group)},updateTransform:function(e,t,n){var i=e.getData();this.group.dirty();var o=Zp().reset(e);o.progress&&o.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=ct(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),Yf(Yp("effectScatter","circle")),Xf(Zp("effectScatter"));var p_="undefined"==typeof Uint32Array?Array:Uint32Array,m_="undefined"==typeof Float64Array?Array:Float64Array;function v_(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=O(t,(function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),y([t,e[0],e[1]])})))}var y_=Kc.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],v_(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),y_.superApply(this,"init",arguments)},mergeOption:function(e){if(e.data=e.data||[],v_(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}y_.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=ee(this._flatCoords,t.flatCoords),this._flatCoordsOffset=ee(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],i=this._flatCoordsOffset[2*e+1],o=0;o<i;o++)t[o]=t[o]||[],t[o][0]=this._flatCoords[n+2*o],t[o][1]=this._flatCoords[n+2*o+1];return i}var r=this._getCoordsFromItemModel(e);for(o=0;o<r.length;o++)t[o]=t[o]||[],t[o][0]=r[o][0],t[o][1]=r[o][1];return r.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"!=typeof e[0])return{flatCoordsOffset:null,flatCoords:null,count:e.length};for(var n=e.length,i=new p_(n),o=new m_(n),r=0,a=0,s=0,l=0;l<n;){s++;var u=e[l++];i[a++]=r+t,i[a++]=u;for(var c=0;c<u;c++){var d=e[l++],f=e[l++];o[r++]=d,o[r++]=f}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,a),flatCoords:o,count:s}},getInitialData:function(e,t){var n=new Th(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],(function(e,t,i,o){if(e instanceof Array)return NaN;n.hasItemOption=!0;var r=e.value;return null!=r?r instanceof Array?r[o]:r:void 0})),n},formatTooltip:function(e){var t=this.getData().getItemModel(e),n=t.get("name");if(n)return n;var i=t.get("fromName"),o=t.get("toName"),r=[];return null!=i&&r.push(i),null!=o&&r.push(o),Ll(r.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function b_(e,t,n){_n.call(this),this.add(this.createLine(e,t,n)),this._updateEffectSymbol(e,t)}var T_=b_.prototype;function C_(e,t,n){_n.call(this),this._createPolyline(e,t,n)}T_.createLine=function(e,t,n){return new ET(e,t,n)},T_._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),i=n.get("symbolSize"),o=n.get("symbol");M(i)||(i=[i,i]);var r=n.get("color")||e.getItemVisual(t,"color"),a=this.childAt(1);this._symbolType!==o&&(this.remove(a),(a=Ug(o,-.5,-.5,1,1,r)).z2=100,a.culling=!0,this.add(a)),a&&(a.setStyle("shadowColor",r),a.setStyle(n.getItemStyle(["color"])),a.attr("scale",i),a.setColor(r),a.attr("scale",i),this._symbolType=o,this._symbolScale=i,this._updateEffectAnimation(e,n,t))},T_._updateEffectAnimation=function(e,t,n){var i=this.childAt(1);if(i){var o=this,r=e.getItemLayout(n),a=1e3*t.get("period"),s=t.get("loop"),l=t.get("constantSpeed"),u=V(t.get("delay"),(function(t){return t/e.count()*a/3})),c="function"==typeof u;if(i.ignore=!0,this.updateAnimationPoints(i,r),0<l&&(a=this.getLineLength(i)/l*1e3),a!==this._period||s!==this._loop){i.stopAnimation();var d=u;c&&(d=u(n)),0<i.__t&&(d=-a*i.__t),i.__t=0;var f=i.animate("",s).when(a,{__t:1}).delay(d).during((function(){o.updateSymbolPosition(i)}));s||f.done((function(){o.remove(i)})),f.start()}this._period=a,this._loop=s}},T_.getLineLength=function(e){return me(e.__p1,e.__cp1)+me(e.__cp1,e.__p2)},T_.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},T_.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},T_.updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,i=e.__cp1,o=e.__t,r=e.position,a=[r[0],r[1]],s=hr,l=gr;r[0]=s(t[0],i[0],n[0],o),r[1]=s(t[1],i[1],n[1],o);var u=l(t[0],i[0],n[0],o),c=l(t[1],i[1],n[1],o);if(e.rotation=-Math.atan2(c,u)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var d=1.05*me(a,r);e.attr("scale",[e.scale[0],d]),1===o&&(r[0]=a[0]+(r[0]-a[0])/2,r[1]=a[1]+(r[1]-a[1])/2)}else 1===e.__lastT?(d=2*me(t,r),e.attr("scale",[e.scale[0],d])):e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},T_.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},x(b_,_n);var E_=C_.prototype;function __(e,t,n){b_.call(this,e,t,n),this._lastFrame=0,this._lastFramePercent=0}E_._createPolyline=function(e,t,n){var i=e.getItemLayout(t),o=new Ka({shape:{points:i}});this.add(o),this._updateCommonStl(e,t,n)},E_.updateData=function(e,t,n){var i=e.hostModel;$s(this.childAt(0),{shape:{points:e.getItemLayout(t)}},i,t),this._updateCommonStl(e,t,n)},E_._updateCommonStl=function(e,t,n){var i=this.childAt(0),o=e.getItemModel(t),r=e.getItemVisual(t,"color"),a=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!e.hasItemOption||(a=o.getModel("lineStyle").getLineStyle(),s=o.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(T({strokeNoScale:!0,fill:"none",stroke:r},a)),i.hoverStyle=s,ks(this)},E_.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},x(C_,_n);var x_=__.prototype;x_.createLine=function(e,t,n){return new C_(e,t,n)},x_.updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],i=0,o=1;o<t.length;o++)i+=me(t[o-1],t[o]),n.push(i);if(0!==i){for(o=0;o<n.length;o++)n[o]/=i;this._offsets=n,this._length=i}},x_.getLineLength=function(e){return this._length},x_.updateSymbolPosition=function(e){var t=e.__t,n=this._points,i=this._offsets,o=n.length;if(i){var r=this._lastFrame;if(t<this._lastFramePercent){for(a=Math.min(r+1,o-1);0<=a&&!(i[a]<=t);a--);a=Math.min(a,o-2)}else{for(var a=r;a<o&&!(i[a]>t);a++);a=Math.min(a-1,o-2)}be(e.position,n[a],n[a+1],(t-i[a])/(i[a+1]-i[a])),e.rotation=-Math.atan2(n[a+1][1]-n[a][1],n[a+1][0]-n[a][0])-Math.PI/2,this._lastFrame=a,this._lastFramePercent=t,e.ignore=!1}},x(__,b_);var I_=ls({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var n=t.segs,i=t.curveness;if(t.polyline)for(var o=0;o<n.length;){var r=n[o++];if(0<r){e.moveTo(n[o++],n[o++]);for(var a=1;a<r;a++)e.lineTo(n[o++],n[o++])}}else for(o=0;o<n.length;){var s=n[o++],l=n[o++],u=n[o++],c=n[o++];e.moveTo(s,l),0<i?e.quadraticCurveTo((s+u)/2-(l-c)*i,(l+c)/2-(u-s)*i,u,c):e.lineTo(u,c)}},findDataIndex:function(e,t){var n=this.shape,i=n.segs,o=n.curveness;if(n.polyline)for(var r=0,a=0;a<i.length;){var s=i[a++];if(0<s)for(var l=i[a++],u=i[a++],c=1;c<s;c++)if($r(l,u,d=i[a++],f=i[a++]))return r;r++}else for(r=0,a=0;a<i.length;){l=i[a++],u=i[a++];var d=i[a++],f=i[a++];if(0<o){if(Ur(l,u,(l+d)/2-(u-f)*o,(u+f)/2-(d-l)*o,d,f))return r}else if($r(l,u,d,f))return r;r++}return-1}});function D_(){this.group=new _n}var w_=D_.prototype;w_.isPersistent=function(){return!this._incremental},w_.updateData=function(e){this.group.removeAll();var t=new I_({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},w_.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),5e5<e.count()?(this._incremental||(this._incremental=new Ja({silent:!0})),this.group.add(this._incremental)):this._incremental=null},w_.incrementalUpdate=function(e,t){var n=new I_;n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=e.start,this.group.add(n))},w_.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},w_._setCommon=function(e,t,n){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var o=t.getVisual("color");o&&e.setStyle("stroke",o),e.setStyle("fill"),n||(e.seriesIndex=i.seriesIndex,e.on("mousemove",(function(t){e.dataIndex=null;var n=e.findDataIndex(t.offsetX,t.offsetY);0<n&&(e.dataIndex=n+e.__startIndex)})))},w_._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var O_={seriesType:"lines",plan:qc(),reset:function(e){var t=e.coordinateSystem,n=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(o,r){var a=[];if(i){var s,l=o.end-o.start;if(n){for(var u=0,c=o.start;c<o.end;c++)u+=e.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var d=0,f=[];for(c=o.start;c<o.end;c++){var h=e.getLineCoords(c,a);n&&(s[d++]=h);for(var g=0;g<h;g++)f=t.dataToPoint(a[g],!1,f),s[d++]=f[0],s[d++]=f[1]}r.setLayout("linesPoints",s)}else for(c=o.start;c<o.end;c++){var p=r.getItemModel(c),m=(h=e.getLineCoords(c,a),[]);if(n)for(var v=0;v<h;v++)m.push(t.dataToPoint(a[v]));else{m[0]=t.dataToPoint(a[0]),m[1]=t.dataToPoint(a[1]);var y=p.get("lineStyle.curveness");+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}r.setItemLayout(c,m)}}}}};function R_(e){return e instanceof Array||(e=[e,e]),e}nh({type:"lines",init:function(){},render:function(e,t,n){var i=e.getData(),o=this._updateLineDraw(i,e),r=e.get("zlevel"),a=e.get("effect.trailLength"),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(r).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&a&&(l||s.configLayer(r,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)})),o.updateData(i);var u=e.get("clip",!0)&&$p(e.coordinateSystem,!1,e);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=r,this._finished=!0},incrementalPrepareRender:function(e,t,n){var i=e.getData();this._updateLineDraw(i,e).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var i=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var r=O_.reset(e);r.progress&&r.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(e,t){var n=this._lineDraw,i=this._showEffect(t),o=!!t.get("polyline"),r=t.pipelineContext.large;return n&&i===this._hasEffet&&o===this._isPolyline&&r===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=r?new D_:new xT(o?i?__:C_:i?b_:ET),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var k_="lineStyle.opacity".split("."),S_={seriesType:"lines",reset:function(e,t,n){var i=R_(e.get("symbol")),o=R_(e.get("symbolSize")),r=e.getData();return r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",o&&o[0]),r.setVisual("toSymbolSize",o&&o[1]),r.setVisual("opacity",e.get(k_)),{dataEach:r.hasItemOption?function(e,t){var n=e.getItemModel(t),i=R_(n.getShallow("symbol",!0)),o=R_(n.getShallow("symbolSize",!0)),r=n.get(k_);i[0]&&e.setItemVisual(t,"fromSymbol",i[0]),i[1]&&e.setItemVisual(t,"toSymbol",i[1]),o[0]&&e.setItemVisual(t,"fromSymbolSize",o[0]),o[1]&&e.setItemVisual(t,"toSymbolSize",o[1]),e.setItemVisual(t,"opacity",r)}:null}}};function A_(){var e=C();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}Xf(O_),Yf(S_),Kc.extend({type:"series.heatmap",getInitialData:function(e,t){return Hh(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=Lu.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),A_.prototype={update:function(e,t,n,i,o,r){var a=this._getBrush(),s=this._getGradient(e,o,"inRange"),l=this._getGradient(e,o,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),f=e.length;c.width=t,c.height=n;for(var h=0;h<f;++h){var g=e[h],p=g[0],m=g[1],v=i(g[2]);d.globalAlpha=v,d.drawImage(a,p-u,m-u)}if(!c.width||!c.height)return c;for(var y=d.getImageData(0,0,c.width,c.height),b=y.data,T=0,C=b.length,E=this.minOpacity,_=this.maxOpacity-E;T<C;){v=b[T+3]/256;var x=4*Math.floor(255*v);if(0<v){var I=r(v)?s:l;0<v&&(v=v*_+E),b[T++]=I[x],b[T++]=I[1+x],b[T++]=I[2+x],b[T++]=I[3+x]*v*256}else T+=4}return d.putImageData(y,0,0),c},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=C()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var i=e.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),e},_getGradient:function(e,t,n){for(var i=this._gradientPixels,o=i[n]||(i[n]=new Uint8ClampedArray(1024)),r=[0,0,0,0],a=0,s=0;s<256;s++)t[n](s/255,!0,r),o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],o[a++]=r[3];return o}},nh({type:"heatmap",render:function(e,t,n){var i;t.eachComponent("visualMap",(function(t){t.eachTargetSeries((function(n){n===e&&(i=t)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var o=e.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):function(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}(o)&&this._renderOnGeo(o,e,i,n)},incrementalPrepareRender:function(e,t,n){this.group.removeAll()},incrementalRender:function(e,t,n,i){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,i,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,n,i,o){var r,a,s=e.coordinateSystem;if("cartesian2d"===s.type){var l=s.getAxis("x"),u=s.getAxis("y");r=l.getBandWidth(),a=u.getBandWidth()}for(var c=this.group,d=e.getData(),f="emphasis.itemStyle",h="emphasis.label",g=e.getModel("itemStyle").getItemStyle(["color"]),p=e.getModel(f).getItemStyle(),m=e.getModel("label"),v=e.getModel(h),y=s.type,T="cartesian2d"===y?[d.mapDimension("x"),d.mapDimension("y"),d.mapDimension("value")]:[d.mapDimension("time"),d.mapDimension("value")],C=n;C<i;C++){var E;if("cartesian2d"===y){if(isNaN(d.get(T[2],C)))continue;var _=s.dataToPoint([d.get(T[0],C),d.get(T[1],C)]);E=new Ha({shape:{x:Math.floor(Math.round(_[0])-r/2),y:Math.floor(Math.round(_[1])-a/2),width:Math.ceil(r),height:Math.ceil(a)},style:{fill:d.getItemVisual(C,"color"),opacity:d.getItemVisual(C,"opacity")}})}else{if(isNaN(d.get(T[1],C)))continue;E=new Ha({z2:1,shape:s.dataToRect([d.get(T[0],C)]).contentShape,style:{fill:d.getItemVisual(C,"color"),opacity:d.getItemVisual(C,"opacity")}})}var x=d.getItemModel(C);d.hasItemOption&&(g=x.getModel("itemStyle").getItemStyle(["color"]),p=x.getModel(f).getItemStyle(),m=x.getModel("label"),v=x.getModel(h));var I=e.getRawValue(C),D="-";I&&null!=I[2]&&(D=I[2]),Ms(g,p,m,v,{labelFetcher:e,labelDataIndex:C,defaultText:D,isRectText:!0}),E.setStyle(g),ks(E,d.hasItemOption?p:b({},p)),(E.incremental=o)&&(E.useHoverLayer=!0),c.add(E),d.setItemGraphicEl(C,E)}},_renderOnGeo:function(e,t,n,i){var o=n.targetVisuals.inRange,r=n.targetVisuals.outOfRange,a=t.getData(),s=this._hmLayer||this._hmLayer||new A_;s.blurSize=t.get("blurSize"),s.pointSize=t.get("pointSize"),s.minOpacity=t.get("minOpacity"),s.maxOpacity=t.get("maxOpacity");var l=e.getViewRect().clone(),u=e.getRoamTransform();l.applyTransform(u);var c=Math.max(l.x,0),d=Math.max(l.y,0),f=Math.min(l.width+l.x,i.getWidth()),h=Math.min(l.height+l.y,i.getHeight()),g=f-c,p=h-d,m=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],v=a.mapArray(m,(function(t,n,i){var o=e.dataToPoint([t,n]);return o[0]-=c,o[1]-=d,o.push(i),o})),y=n.getExtent(),b="visualMap.continuous"===n.type?function(e,t){var n=e[1]-e[0];return t=[(t[0]-e[0])/n,(t[1]-e[0])/n],function(e){return e>=t[0]&&e<=t[1]}}(y,n.option.range):function(e,t,n){var i=e[1]-e[0],o=(t=O(t,(function(t){return{interval:[(t.interval[0]-e[0])/i,(t.interval[1]-e[0])/i]}}))).length,r=0;return function(e){for(var i=r;i<o;i++)if((a=t[i].interval)[0]<=e&&e<=a[1]){r=i;break}if(i===o)for(i=r-1;0<=i;i--){var a;if((a=t[i].interval)[0]<=e&&e<=a[1]){r=i;break}}return 0<=i&&i<o&&n[i]}}(y,n.getPieceList(),n.option.selected);s.update(v,g,p,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:r.color.getColorMapper()},b);var T=new Hi({style:{width:g,height:p,x:c,y:d,image:s.canvas},silent:!0});this.group.add(T)},dispose:function(){}});var N_=qm.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,N_.superApply(this,"getInitialData",arguments)}}),M_=["itemStyle","borderWidth"],K_=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],P_=new Oa;function L_(e,t,n,i){var o=e.getItemLayout(t),r=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),d={dataIndex:t,layout:o,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:a,symbolRepeat:r,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:c?n:null,hoverAnimation:c&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};!function(e,t,n,i,o){var r,a=i.valueDim,s=e.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),c=1-+(n[a.wh]<=0);if(M(s)){var d=[B_(l,s[0])-u,B_(l,s[1])-u];d[1]<d[0]&&d.reverse(),r=d[c]}else r=null!=s?B_(l,s)-u:t?i.coordSysExtent[a.index][c]-u:n[a.wh];o.boundingLength=r,t&&(o.repeatCutLength=n[a.wh]),o.pxSign=0<r?1:r<0?-1:0}(n,r,o,i,d),function(e,t,n,i,o,r,a,s,l,u){var c=l.valueDim,d=l.categoryDim,f=Math.abs(n[d.wh]),h=e.getItemVisual(t,"symbolSize");(h=M(h)?h.slice():(null==h&&(h="100%"),[h,h]))[d.index]=gl(h[d.index],f),h[c.index]=gl(h[c.index],i?f:Math.abs(r)),u.symbolSize=h,(u.symbolScale=[h[0]/s,h[1]/s])[c.index]*=(l.isHorizontal?-1:1)*a}(e,t,o,r,0,d.boundingLength,d.pxSign,u,i,d),function(e,t,n,i,o){var r=e.get(M_)||0;r&&(P_.attr({scale:t.slice(),rotation:n}),P_.updateTransform(),r/=P_.getLineScale(),r*=t[i.valueDim.index]),o.valueLineWidth=r}(n,d.symbolScale,l,i,d);var f=d.symbolSize,h=n.get("symbolOffset");return M(h)&&(h=[gl(h[0],f[0]),gl(h[1],f[1])]),function(e,t,n,i,o,r,a,s,l,u,c,d){var f=c.categoryDim,h=c.valueDim,g=d.pxSign,p=Math.max(t[h.index]+s,0),m=p;if(i){var v=Math.abs(l),y=V(e.get("symbolMargin"),"15%")+"",T=!1;y.lastIndexOf("!")===y.length-1&&(T=!0,y=y.slice(0,y.length-1)),y=gl(y,t[h.index]);var C=Math.max(p+2*y,0),E=T?0:2*y,_=kl(i),x=_?i:ex((v+E)/C);C=p+2*(y=(v-x*p)/2/(T?x:x-1)),E=T?0:2*y,_||"fixed"===i||(x=u?ex((Math.abs(u)+E)/C):0),m=x*C-E,d.repeatTimes=x,d.symbolMargin=y}var I=g*(m/2),D=d.pathPosition=[];D[f.index]=n[f.wh]/2,D[h.index]="start"===a?I:"end"===a?l-I:l/2,r&&(D[0]+=r[0],D[1]+=r[1]);var w=d.bundlePosition=[];w[f.index]=n[f.xy],w[h.index]=n[h.xy];var O=d.barRectShape=b({},n);O[h.wh]=g*Math.max(Math.abs(n[h.wh]),Math.abs(D[h.index]+I)),O[f.wh]=n[f.wh];var R=d.clipShape={};R[f.xy]=-n[f.xy],R[f.wh]=c.ecSize[f.wh],R[h.xy]=0,R[h.wh]=n[h.wh]}(n,f,o,r,0,h,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,i,d),d}function B_(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function F_(e){var t=e.symbolPatternSize,n=Ug(e.symbolType,-t/2,-t/2,t,t,e.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function z_(e,t,n,i){var o=e.__pictorialBundle,r=n.pathPosition,a=t.valueDim,s=n.repeatTimes||0,l=0,u=n.symbolSize[t.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(Z_(e,(function(e){e.__pictorialAnimationIndex=l,e.__pictorialRepeatTimes=s,l<s?J_(e,null,f(l),n,i):J_(e,null,{scale:[0,0]},n,i,(function(){o.remove(e)})),j_(e,n),l++}));l<s;l++){var c=F_(n);c.__pictorialAnimationIndex=l,c.__pictorialRepeatTimes=s,o.add(c);var d=f(l);J_(c,{position:d.position,scale:[0,0]},{scale:d.scale,rotation:d.rotation},n,i),c.on("mouseover",h).on("mouseout",g),j_(c,n)}function f(e){var t=r.slice(),i=n.pxSign,o=e;return("start"===n.symbolRepeatDirection?0<i:i<0)&&(o=s-1-e),t[a.index]=u*(o-s/2+.5)+r[a.index],{position:t,scale:n.symbolScale.slice(),rotation:n.rotation}}function h(){Z_(e,(function(e){e.trigger("emphasis")}))}function g(){Z_(e,(function(e){e.trigger("normal")}))}}function H_(e,t,n,i){var o=e.__pictorialBundle,r=e.__pictorialMainPath;r?J_(r,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(r=e.__pictorialMainPath=F_(n),o.add(r),J_(r,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),r.on("mouseover",(function(){this.trigger("emphasis")})).on("mouseout",(function(){this.trigger("normal")}))),j_(r,n)}function V_(e,t,n){var i=b({},t.barRectShape),o=e.__pictorialBarRect;o?J_(o,null,{shape:i},t,n):(o=e.__pictorialBarRect=new Ha({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(o))}function W_(e,t,n,i){if(n.symbolClip){var o=e.__pictorialClipPath,r=b({},n.clipShape),a=t.valueDim,s=n.animationModel,l=n.dataIndex;if(o)$s(o,{shape:r},s,l);else{r[a.wh]=0,o=new Ha({shape:r}),e.__pictorialBundle.setClipPath(o),e.__pictorialClipPath=o;var u={};u[a.wh]=n.clipShape[a.wh],tl[i?"updateProps":"initProps"](o,{shape:u},s,l)}}}function $_(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=q_,n.isAnimationEnabled=U_,n}function q_(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function U_(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function j_(e,t){e.off("emphasis").off("normal");var n=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",(function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")})).on("normal",(function(){this.animateTo({scale:n.slice()},400,"elasticOut")}))}function G_(e,t,n,i){var o=new _n,r=new _n;return o.add(r),(o.__pictorialBundle=r).attr("position",n.bundlePosition.slice()),n.symbolRepeat?z_(o,t,n):H_(o,0,n),V_(o,n,i),W_(o,t,n,i),o.__pictorialShapeStr=Y_(e,n),o.__pictorialSymbolMeta=n,o}function X_(e,t,n,i){var o=i.__pictorialBarRect;o&&(o.style.text=null);var r=[];Z_(i,(function(e){r.push(e)})),i.__pictorialMainPath&&r.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),w(r,(function(e){$s(e,{scale:[0,0]},n,t,(function(){i.parent&&i.parent.remove(i)}))})),e.setItemGraphicEl(t,null)}function Y_(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function Z_(e,t,n){w(e.__pictorialBundle.children(),(function(i){i!==e.__pictorialBarRect&&t.call(n,i)}))}function J_(e,t,n,i,o,r){t&&e.attr(t),i.symbolClip&&!o?n&&e.attr(n):n&&tl[o?"updateProps":"initProps"](e,n,i.animationModel,i.dataIndex,r)}function Q_(e,t,n){var i=n.color,o=n.dataIndex,r=n.itemModel,a=r.getModel("itemStyle").getItemStyle(["color"]),s=r.getModel("emphasis.itemStyle").getItemStyle(),l=r.getShallow("cursor");Z_(e,(function(e){e.setColor(i),e.setStyle(T({fill:i,opacity:n.opacity},a)),ks(e,s),l&&(e.cursor=l),e.z2=n.z2}));var u={},c=e.__pictorialBarRect;Um(c.style,u,r,i,t.seriesModel,o),ks(c,u)}function ex(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}function tx(e,t,n,i,o){sp.call(this,e,t,n),this.type=i||"value",this.position=o||"bottom",this.orient=null}function nx(e,t,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(e,t,n),this.model=e}function ix(e,t){t=t||{};var n=e.axis,i={},o=n.position,r=n.orient,a=e.coordinateSystem.getRect(),s=[a.x,a.x+a.width,a.y,a.y+a.height],l={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};i.position=["vertical"===r?l.vertical[o]:s[0],"horizontal"===r?l.horizontal[o]:s[3]],i.rotation=Math.PI/2*{horizontal:0,vertical:1}[r],i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],e.get("axisTick.inside")&&(i.tickDirection=-i.tickDirection),V(t.labelInside,e.get("axisLabel.inside"))&&(i.labelDirection=-i.labelDirection);var u=t.rotate;return null==u&&(u=e.get("axisLabel.rotate")),i.labelRotation="top"===o?-u:u,i.z2=1,i}nh({type:"pictorialBar",render:function(e,t,n){var i=this.group,o=e.getData(),r=this._data,a=e.coordinateSystem,s=!!a.getBaseAxis().isHorizontal(),l=a.grid.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:K_[+s],categoryDim:K_[1-s]};return o.diff(r).add((function(e){if(o.hasValue(e)){var t=$_(o,e),n=L_(o,e,t,u),r=G_(o,u,n);o.setItemGraphicEl(e,r),i.add(r),Q_(r,u,n)}})).update((function(e,t){var n=r.getItemGraphicEl(t);if(o.hasValue(e)){var a=$_(o,e),s=L_(o,e,a,u),l=Y_(o,s);n&&l!==n.__pictorialShapeStr&&(i.remove(n),o.setItemGraphicEl(e,null),n=null),n?function(e,t,n){var i=n.animationModel,o=n.dataIndex;$s(e.__pictorialBundle,{position:n.bundlePosition.slice()},i,o),n.symbolRepeat?z_(e,t,n,!0):H_(e,0,n,!0),V_(e,n,!0),W_(e,t,n,!0)}(n,u,s):n=G_(o,u,s,!0),o.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=s,i.add(n),Q_(n,u,s)}else i.remove(n)})).remove((function(e){var t=r.getItemGraphicEl(e);t&&X_(r,e,t.__pictorialSymbolMeta.animationModel,t)})).execute(),this._data=o,this.group},dispose:te,remove:function(e,t){var n=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl((function(t){X_(i,t.dataIndex,e,t)})):n.removeAll()}}),Xf(N(ug,"pictorialBar")),Yf(Yp("pictorialBar","roundRect")),tx.prototype={constructor:tx,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},x(tx,sp),Lu.register("single",{create:function(e,t){var n=[];return e.eachComponent("singleAxis",(function(i,o){var r=new nx(i,e,t);r.name="single_"+o,r.resize(i,t),i.coordinateSystem=r,n.push(r)})),e.eachSeries((function(t){if("singleAxis"===t.get("coordinateSystem")){var n=e.queryComponents({mainType:"singleAxis",index:t.get("singleAxisIndex"),id:t.get("singleAxisId")})[0];t.coordinateSystem=n&&n.coordinateSystem}})),n},dimensions:(nx.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:nx,_init:function(e,t,n){var i=new tx(this.dimension,Ag(e),[0,0],e.get("type"),e.get("position"));i.onBand="category"===i.type&&e.get("boundaryGap"),i.inverse=e.get("inverse"),i.orient=e.get("orient"),(e.axis=i).model=e,(i.coordinateSystem=this)._axis=i},update:function(e,t){e.eachSeries((function(e){if(e.coordinateSystem===this){var t=e.getData();w(t.mapDimension(this.dimension,!0),(function(e){this._axis.scale.unionExtentFromData(t,e)}),this),Sg(this._axis.scale,this._axis.model)}}),this)},resize:function(e,t){this._rect=eu({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),i=n?[0,e.width]:[0,e.height],o=t.reverse?1:0;t.setExtent(i[o],i[1-o]),this._updateAxisTransform(t,n?e.x:e.y)},_updateAxisTransform:function(e,t){var n=e.getExtent(),i=n[0]+n[1],o=e.isHorizontal();e.toGlobalCoord=o?function(e){return e+t}:function(e){return i-e+t},e.toLocalCoord=o?function(e){return e-t}:function(e){return i-e+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),n=this.getRect(),i=[],o="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),i[o]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-o]=0==o?n.y+n.height/2:n.x+n.width/2,i}}).dimensions});var ox=["axisLine","axisTickLabel","axisName"],rx=["splitArea","splitLine"],ax=Km.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,n,i){var o=this.group;o.removeAll();var r=this._axisGroup;this._axisGroup=new _n;var a=ix(e),s=new bm(e,a);w(ox,s.add,s),o.add(this._axisGroup),o.add(s.getGroup()),w(rx,(function(t){e.get(t+".show")&&this["_"+t](e)}),this),Xs(r,this._axisGroup,e),ax.superCall(this,"render",e,t,n,i)},remove:function(){Hm(this)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var n=e.getModel("splitLine"),i=n.getModel("lineStyle"),o=i.get("width"),r=i.get("color");r=r instanceof Array?r:[r];for(var a=e.coordinateSystem.getRect(),s=t.isHorizontal(),l=[],u=0,c=t.getTicksCoords({tickModel:n}),d=[],f=[],h=0;h<c.length;++h){var g=t.toGlobalCoord(c[h].coord);s?(d[0]=g,d[1]=a.y,f[0]=g,f[1]=a.y+a.height):(d[0]=a.x,d[1]=g,f[0]=a.x+a.width,f[1]=g);var p=u++%r.length;l[p]=l[p]||[],l[p].push(new Wa({subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:f[0],y2:f[1]},style:{lineWidth:o},silent:!0}))}for(h=0;h<l.length;++h)this.group.add(gs(l[h],{style:{stroke:r[h%r.length],lineDash:i.getLineDash(o),lineWidth:o},silent:!0}))}},_splitArea:function(e){zm(this,this._axisGroup,e,e)}}),sx=uu.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function lx(e,t){var n,i=[],o=e.seriesIndex;if(null==o||!(n=t.getSeriesByIndex(o)))return{point:[]};var r=n.getData(),a=Mo(r,e);if(null==a||a<0||M(a))return{point:[]};var s=r.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)i=l.dataToPoint(r.getValues(O(l.dimensions,(function(e){return r.mapDimension(e)})),a,!0))||[];else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform),i=[u.x+u.width/2,u.y+u.height/2]}return{point:i,el:s}}v(sx.prototype,Lg),am("single",sx,(function(e,t){return t.type||(t.data?"category":"value")}),{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var ux=w,cx=N,dx=Ko();function fx(e,t,n,i,o){var r=e.axis;if(!r.scale.isBlank()&&r.containData(t))if(e.involveSeries){var a=function(e,t){var n=t.axis,i=n.dim,o=e,r=[],a=Number.MAX_VALUE,s=-1;return ux(t.seriesModels,(function(t,l){var u,c,d=t.getData().mapDimension(i,!0);if(t.getAxisTooltipData){var f=t.getAxisTooltipData(d,e,n);c=f.dataIndices,u=f.nestestValue}else{if(!(c=t.getData().indicesOfNearest(d[0],e,"category"===n.type?.5:null)).length)return;u=t.getData().get(d[0],c[0])}if(null!=u&&isFinite(u)){var h=e-u,g=Math.abs(h);g<=a&&((g<a||0<=h&&s<0)&&(a=g,s=h,o=u,r.length=0),ux(c,(function(e){r.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})})))}})),{payloadBatch:r,snapToValue:o}}(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&null==o.seriesIndex&&b(o,s[0]),!i&&e.snap&&r.containData(l)&&null!=l&&(t=l),n.showPointer(e,t,s,o),n.showTooltip(e,a,l)}else n.showPointer(e,t)}function hx(e,t,n,i){e[t.key]={value:n,payloadBatch:i}}function gx(e,t,n,i){var o=n.payloadBatch,r=t.axis,a=r.model,s=t.axisPointerModel;if(t.triggerTooltip&&o.length){var l=t.coordSys.model,u=Mm(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:r.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:o.slice()})}}function px(e){var t=e.axis.model,n={},i=n.axisDim=e.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=t.componentIndex,n.axisName=n[i+"AxisName"]=t.name,n.axisId=n[i+"AxisId"]=t.id,n}function mx(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}Qf({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var vx=Ko(),yx=w;function bx(e,t,n){if(!o.node){var i=t.getZr();vx(i).records||(vx(i).records={}),function(e,t){function n(n,i){e.on(n,(function(n){var o=function(e){var t={showTip:[],hideTip:[]},n=function(i){var o=t[i.type];o?o.push(i):(i.dispatchAction=n,e.dispatchAction(i))};return{dispatchAction:n,pendings:t}}(t);yx(vx(e).records,(function(e){e&&i(e,n,o.dispatchAction)})),function(e,t){var n,i=e.showTip.length,o=e.hideTip.length;i?n=e.showTip[i-1]:o&&(n=e.hideTip[o-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}(o.pendings,t)}))}vx(e).initialized||(vx(e).initialized=!0,n("click",N(Cx,"click")),n("mousemove",N(Cx,"mousemove")),n("globalout",Tx))}(i,t),(vx(i).records[e]||(vx(i).records[e]={})).handler=n}}function Tx(e,t,n){e.handler("leave",null,n)}function Cx(e,t,n,i){t.handler(e,n,i)}function Ex(e,t){if(!o.node){var n=t.getZr();(vx(n).records||{})[e]&&(vx(n).records[e]=null)}}var _x=eh({type:"axisPointer",render:function(e,t,n){var i=t.getComponent("tooltip"),o=e.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";bx("axisPointer",n,(function(e,t,n){"none"!==o&&("leave"===e||0<=o.indexOf(e))&&n({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})}))},remove:function(e,t){Ex(t.getZr(),"axisPointer"),_x.superApply(this._model,"remove",arguments)},dispose:function(e,t){Ex("axisPointer",t),_x.superApply(this._model,"dispose",arguments)}}),xx=Ko(),Ix=m,Dx=A;function Ox(){}function Rx(e,t,n,i){!function e(t,n){if(L(t)&&L(n)){var i=!0;return w(n,(function(n,o){i=i&&e(t[o],n)})),!!i}return t===n}(xx(n).lastProp,i)&&(xx(n).lastProp=i,t?$s(n,i,e):(n.stopAnimation(),n.attr(i)))}function kx(e,t){e[t.get("label.show")?"show":"hide"]()}function Sx(e){return{position:e.position.slice(),rotation:e.rotation||0}}function Ax(e,t,n){var i=t.get("z"),o=t.get("zlevel");e&&e.traverse((function(e){"group"!==e.type&&(null!=i&&(e.z=i),null!=o&&(e.zlevel=o),e.silent=n)}))}function Nx(e){var t,n=e.get("type"),i=e.getModel(n+"Style");return"line"===n?(t=i.getLineStyle()).fill=null:"shadow"===n&&((t=i.getAreaStyle()).stroke=null),t}function Mx(e,t,n,i,o){var r=Kx(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),a=n.getModel("label"),s=Ml(a.get("padding")||0),l=a.getFont(),u=ii(r,l),c=o.position,d=u.width+s[1]+s[3],f=u.height+s[0]+s[2],h=o.align;"right"===h&&(c[0]-=d),"center"===h&&(c[0]-=d/2);var g=o.verticalAlign;"bottom"===g&&(c[1]-=f),"middle"===g&&(c[1]-=f/2),function(e,t,n,i){var o=i.getWidth(),r=i.getHeight();e[0]=Math.min(e[0]+t,o)-t,e[1]=Math.min(e[1]+n,r)-n,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}(c,d,f,i);var p=a.get("backgroundColor");p&&"auto"!==p||(p=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:d,height:f,r:a.get("borderRadius")},position:c.slice(),style:{text:r,textFont:l,textFill:a.getTextColor(),textPosition:"inside",textPadding:s,fill:p,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function Kx(e,t,n,i,o){e=t.scale.parse(e);var r=t.scale.getLabel(e,{precision:o.precision}),a=o.formatter;if(a){var s={value:Mg(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};w(i,(function(e){var t=n.getSeriesByIndex(e.seriesIndex),i=t&&t.getDataParams(e.dataIndexInside);i&&s.seriesData.push(i)})),P(a)?r=a.replace("{value}",r):K(a)&&(r=a(s))}return r}function Px(e,t,n){var i=nt();return st(i,i,n.rotation),at(i,i,n.position),js([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function Lx(e,t,n,i,o,r){var a=bm.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get("label.margin"),Mx(t,i,o,r,{position:Px(i.axis,e,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function Bx(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function Fx(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function zx(e,t,n,i,o,r){return{cx:e,cy:t,r0:n,r:i,startAngle:o,endAngle:r,clockwise:!0}}$o((Ox.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,n,i){var o=t.get("value"),r=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,i||this._lastValue!==o||this._lastStatus!==r){this._lastValue=o,this._lastStatus=r;var a=this._group,s=this._handle;if(!r||"hide"===r)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,o,e,t,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var c=this._moveAnimation=this.determineAnimation(e,t);if(a){var d=N(Rx,t,c);this.updatePointerEl(a,l,d,t),this.updateLabelEl(a,l,d,t)}else a=this._group=new _n,this.createPointerEl(a,l,e,t),this.createLabelEl(a,l,e,t),n.getZr().add(a);Ax(a,t,!0),this._renderHandle(o)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var n=t.get("animation"),i=e.axis,o="category"===i.type,r=t.get("snap");if(!r&&!o)return!1;if("auto"!==n&&null!=n)return!0===n;var a=this.animationThreshold;if(o&&i.getBandWidth()>a)return!0;if(r){var s=Am(e).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1},makeElOption:function(e,t,n,i,o){},createPointerEl:function(e,t,n,i){var o=t.pointer;if(o){var r=xx(e).pointerEl=new tl[o.type](Ix(t.pointer));e.add(r)}},createLabelEl:function(e,t,n,i){if(t.label){var o=xx(e).labelEl=new Ha(Ix(t.label));e.add(o),kx(o,i)}},updatePointerEl:function(e,t,n){var i=xx(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),n(i,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,n,i){var o=xx(e).labelEl;o&&(o.setStyle(t.label.style),n(o,{shape:t.label.shape,position:t.label.position}),kx(o,i))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,i=this._api.getZr(),o=this._handle,r=n.getModel("handle"),a=n.get("status");if(!r.get("show")||!a||"hide"===a)return o&&i.remove(o),void(this._handle=null);this._handle||(t=!0,o=this._handle=Zs(r.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){$e(e.event)},onmousedown:Dx(this._onHandleDragMove,this,0,0),drift:Dx(this._onHandleDragMove,this),ondragend:Dx(this._onHandleDragEnd,this)}),i.add(o)),Ax(o,n,!1),o.setStyle(r.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=r.get("size");M(s)||(s=[s,s]),o.attr("scale",[s[0]/2,s[1]/2]),rd(this,"_doDispatchAxisPointer",r.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){Rx(this._axisPointerModel,!t&&this._moveAnimation,this._handle,Sx(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(Sx(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(Sx(i)),xx(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,i=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}}).constructor=Ox);var Hx=Ox.extend({makeElOption:function(e,t,n,i,o){var r=n.axis,a=r.grid,s=i.get("type"),l=Vx(a,r).getOtherAxis(r).getGlobalExtent(),u=r.toGlobalCoord(r.dataToCoord(t,!0));if(s&&"none"!==s){var c=Nx(i),d=Wx[s](r,u,l);d.style=c,e.graphicKey=d.type,e.pointer=d}Lx(t,e,Fm(a.model,n),n,i,o)},getHandleTransform:function(e,t,n){var i=Fm(t.axis.grid.model,t,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:Px(t.axis,e,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,i){var o=n.axis,r=o.grid,a=o.getGlobalExtent(!0),s=Vx(r,o).getOtherAxis(o).getGlobalExtent(),l="x"===o.dim?0:1,u=e.position;u[l]+=t[l],u[l]=Math.min(a[1],u[l]),u[l]=Math.max(a[0],u[l]);var c=(s[1]+s[0])/2,d=[c,c];return d[l]=u[l],{position:u,rotation:e.rotation,cursorPoint:d,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function Vx(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var Wx={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:Bx([t,n[0]],[t,n[1]],$x(e))}},shadow:function(e,t,n){var i=Math.max(1,e.getBandWidth());return{type:"Rect",shape:Fx([t-i/2,n[0]],[i,n[1]-n[0]],$x(e))}}};function $x(e){return"x"===e.dim?0:1}Km.registerAxisPointerClass("CartesianAxisPointer",Hx),qf((function(e){if(e){e.axisPointer&&0!==e.axisPointer.length||(e.axisPointer={});var t=e.axisPointer.link;t&&!M(t)&&(e.axisPointer.link=[t])}})),Uf(of.PROCESSOR.STATISTIC,(function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=function(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(e,t,n){var i=t.getComponent("tooltip"),o=t.getComponent("axisPointer"),r=o.get("link",!0)||[],a=[];Rm(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var s=Mm(n.model),l=e.coordSysAxesInfo[s]={},u=(e.coordSysMap[s]=n).model.getModel("tooltip",i);if(Rm(n.getAxes(),km(h,!1,null)),n.getTooltipAxes&&i&&u.get("show")){var c="axis"===u.get("trigger"),d="cross"===u.get("axisPointer.type"),f=n.getTooltipAxes(u.get("axisPointer.axis"));(c||d)&&Rm(f.baseAxes,km(h,!d||"cross",c)),d&&Rm(f.otherAxes,km(h,"cross",!1))}}function h(i,s,c){var d=c.model.getModel("axisPointer",o),f=d.get("show");if(f&&("auto"!==f||i||Nm(d))){null==s&&(s=d.get("triggerTooltip"));var h=(d=i?function(e,t,n,i,o,r){var a=t.getModel("axisPointer"),s={};Rm(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(e){s[e]=m(a.get(e))})),s.snap="category"!==e.type&&!!r,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===o){var u=a.get("label.show");if(l.show=null==u||u,!r){var c=s.lineStyle=a.get("crossStyle");c&&T(l,c.textStyle)}}return e.model.getModel("axisPointer",new ll(s,n,i))}(c,u,o,t,i,s):d).get("snap"),g=Mm(c.model),p=s||h||"category"===c.type,v=e.axesInfo[g]={key:g,axis:c,coordSys:n,axisPointerModel:d,triggerTooltip:s,involveSeries:p,snap:h,useHandle:Nm(d),seriesModels:[]};l[g]=v,e.seriesInvolved|=p;var y=function(e,t){for(var n=t.model,i=t.dim,o=0;o<e.length;o++){var r=e[o]||{};if(Sm(r[i+"AxisId"],n.id)||Sm(r[i+"AxisIndex"],n.componentIndex)||Sm(r[i+"AxisName"],n.name))return o}}(r,c);if(null!=y){var b=a[y]||(a[y]={axesInfo:{}});b.axesInfo[g]=v,b.mapper=r[y].mapper,v.linkGroup=b}}}}))}(n,e,t),n.seriesInvolved&&function(e,t){t.eachSeries((function(t){var n=t.coordinateSystem,i=t.get("tooltip.trigger",!0),o=t.get("tooltip.show",!0);n&&"none"!==i&&!1!==i&&"item"!==i&&!1!==o&&!1!==t.get("axisPointer.show",!0)&&Rm(e.coordSysAxesInfo[Mm(n.model)],(function(e){var i=e.axis;n.getAxis(i.dim)===i&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())}))}),this)}(n,e),n}(e,t)})),jf({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},(function(e,t,n){var i=e.currTrigger,o=[e.x,e.y],r=e,a=e.dispatchAction||A(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){mx(o)&&(o=lx({seriesIndex:r.seriesIndex,dataIndex:r.dataIndex},t).point);var l=mx(o),u=r.axesInfo,c=s.axesInfo,d="leave"===i||mx(o),f={},h={},g={list:[],map:{}},p={showPointer:cx(hx,h),showTooltip:cx(gx,g)};ux(s.coordSysMap,(function(e,t){var n=l||e.containPoint(o);ux(s.coordSysAxesInfo[t],(function(e,t){var i=e.axis,r=function(e,t){for(var n=0;n<(e||[]).length;n++){var i=e[n];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}(u,e);if(!d&&n&&(!u||r)){var a=r&&r.value;null!=a||l||(a=i.pointToData(o)),null!=a&&fx(e,a,p,!1,f)}}))}));var m={};return ux(c,(function(e,t){var n=e.linkGroup;n&&!h[t]&&ux(n.axesInfo,(function(t,i){var o=h[i];if(t!==e&&o){var r=o.value;n.mapper&&(r=e.axis.scale.parse(n.mapper(r,px(t),px(e)))),m[e.key]=r}}))})),ux(m,(function(e,t){fx(c[t],e,p,!0,f)})),function(e,t,n){var i=n.axesInfo=[];ux(t,(function(t,n){var o=t.axisPointerModel.option,r=e[n];r?(t.useHandle||(o.status="show"),o.value=r.value,o.seriesDataIndices=(r.payloadBatch||[]).slice()):t.useHandle||(o.status="hide"),"show"===o.status&&i.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:o.value})}))}(h,c,f),function(e,t,n,i){if(mx(t)||!e.list.length)return i({type:"hideTip"});var o=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:e.list})}(g,o,e,a),function(e,t,n){var i=n.getZr(),o="axisPointerLastHighlights",r=dx(i)[o]||{},a=dx(i)[o]={};ux(e,(function(e,t){var n=e.axisPointerModel.option;"show"===n.status&&ux(n.seriesDataIndices,(function(e){a[e.seriesIndex+" | "+e.dataIndex]=e}))}));var s=[],l=[];w(r,(function(e,t){a[t]||l.push(e)})),w(a,(function(e,t){r[t]||s.push(e)})),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}(c,0,n),f}}));var qx=["x","y"],Ux=["width","height"],jx=Ox.extend({makeElOption:function(e,t,n,i,o){var r=n.axis,a=r.coordinateSystem,s=Yx(a,1-Xx(r)),l=a.dataToPoint(t)[0],u=i.get("type");if(u&&"none"!==u){var c=Nx(i),d=Gx[u](r,l,s);d.style=c,e.graphicKey=d.type,e.pointer=d}Lx(t,e,ix(n),n,i,o)},getHandleTransform:function(e,t,n){var i=ix(t,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:Px(t.axis,e,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,i){var o=n.axis,r=o.coordinateSystem,a=Xx(o),s=Yx(r,a),l=e.position;l[a]+=t[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var u=Yx(r,1-a),c=(u[1]+u[0])/2,d=[c,c];return d[a]=l[a],{position:l,rotation:e.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}}}),Gx={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:Bx([t,n[0]],[t,n[1]],Xx(e))}},shadow:function(e,t,n){var i=e.getBandWidth();return{type:"Rect",shape:Fx([t-i/2,n[0]],[i,n[1]-n[0]],Xx(e))}}};function Xx(e){return e.isHorizontal()?0:1}function Yx(e,t){var n=e.getRect();return[n[qx[t]],n[qx[t]]+n[Ux[t]]]}Km.registerAxisPointerClass("SingleAxisPointer",jx),eh({type:"single"});var Zx=Kc.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){Zx.superApply(this,"init",arguments),this.legendVisualProvider=new gv(A(this.getData,this),A(this.getRawData,this))},fixData:function(e){var t=e.length,n=Ho(e,(function(e){return e[2]})),i=[];n.buckets.each((function(e,t){i.push({name:t,dataList:e})}));for(var o=i.length,r=-1,a=-1,s=0;s<o;++s){var l=i[s].dataList.length;r<l&&(r=l,a=s)}for(var u=0;u<o;++u)if(u!==a)for(var c=i[u].name,d=0;d<r;++d){for(var f=i[a].dataList[d][0],h=i[u].dataList.length,g=-1,p=0;p<h;++p)if(i[u].dataList[p][0]===f){g=p;break}-1===g&&(e[t]=[],e[t][0]=f,e[t][1]=0,e[t][2]=c,t++)}return e},getInitialData:function(e,t){for(var n=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=k(e.data,(function(e){return void 0!==e[2]})),o=this.fixData(i||[]),r=[],a=this.nameMap=Q(),s=0,l=0;l<o.length;++l)r.push(o[l][2]),a.get(o[l][2])||(a.set(o[l][2],s),s++);var u=Mh(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:lh(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),c=new Th(u,this);return c.initData(o),c},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),n=[],i=0;i<t;++i)n[i]=i;var o=e.mapDimension("single"),r=Ho(n,(function(t){return e.get("name",t)})),a=[];return r.buckets.each((function(t,n){t.sort((function(t,n){return e.get(o,t)-e.get(o,n)})),a.push({name:n,indices:t})})),a},getAxisTooltipData:function(e,t,n){M(e)||(e=e?[e]:[]);for(var i,o=this.getData(),r=this.getLayerSeries(),a=[],s=r.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,c=-1,d=r[l].indices.length,f=0;f<d;++f){var h=o.get(e[0],r[l].indices[f]),g=Math.abs(h-t);g<=u&&(i=h,u=g,c=r[l].indices[f])}a.push(c)}return{dataIndices:a,nestestValue:i}},formatTooltip:function(e){var t=this.getData(),n=t.getName(e),i=t.get(t.mapDimension("value"),e);return!isNaN(i)&&null!=i||(i="-"),Ll(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function Jx(e,t,n){if(e.count())for(var i,o=t.coordinateSystem,r=t.getLayerSeries(),a=e.mapDimension("single"),s=e.mapDimension("value"),l=O(r,(function(t){return O(t.indices,(function(t){var n=o.dataToPoint(e.get(a,t));return n[1]=e.get(s,t),n}))})),u=function(e){for(var t=e.length,n=e[0].length,i=[],o=[],r=0,a={},s=0;s<n;++s){for(var l=0,u=0;l<t;++l)u+=e[l][s][1];r<u&&(r=u),i.push(u)}for(var c=0;c<n;++c)o[c]=(r-i[c])/2;for(var d=r=0;d<n;++d){var f=i[d]+o[d];r<f&&(r=f)}return a.y0=o,a.max=r,a}(l),c=u.y0,d=n/u.max,f=r.length,h=r[0].indices.length,g=0;g<h;++g){e.setItemLayout(r[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:i=c[g]*d,y:l[0][g][1]*d});for(var p=1;p<f;++p)e.setItemLayout(r[p].indices[g],{layerIndex:p,x:l[p][g][0],y0:i+=l[p-1][g][1]*d,y:l[p][g][1]*d})}}function Qx(e,t,n){_n.call(this);var i=new ka({z2:2});i.seriesIndex=t.seriesIndex;var o=new Da({z2:4,silent:e.getModel("label").get("silent")});function r(){o.ignore=o.hoverIgnore}function a(){o.ignore=o.normalIgnore}this.add(i),this.add(o),this.updateData(!0,e,"normal",t,n),this.on("emphasis",r).on("normal",a).on("mouseover",r).on("mouseout",a)}nh({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,n){var i=e.getData(),o=this.group,r=e.getLayerSeries(),a=i.getLayout("layoutInfo");function s(e){return e.name}o.attr("position",[0,a.rect.y+a.boundaryGap[0]]);var l=new oh(this._layersSeries||[],r,s,s),u={};function c(t,n,a){var s=this._layers;if("remove"!==t){for(var l,c,d,f=[],h=[],g=r[n].indices,p=0;p<g.length;p++){var m=i.getItemLayout(g[p]),v=m.x,y=m.y0,T=m.y;f.push([v,y]),h.push([v,y+T]),l=i.getItemVisual(g[p],"color")}var C=i.getItemLayout(g[0]),E=i.getItemModel(g[p-1]),_=E.getModel("label"),x=_.get("margin");if("add"===t){var I=u[n]=new _n;c=new Hp({shape:{points:f,stackedOnPoints:h,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),d=new Da({style:{x:C.x-x,y:C.y0+C.y/2}}),I.add(c),I.add(d),o.add(I),c.setClipPath(function(e,t,n){var i=new Ha({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return qs(i,{shape:{width:e.width+20,height:e.height+20}},t,(function(){c.removeClipPath()})),i}(c.getBoundingRect(),e))}else c=(I=s[a]).childAt(0),d=I.childAt(1),o.add(I),u[n]=I,$s(c,{shape:{points:f,stackedOnPoints:h}},e),$s(d,{style:{x:C.x-x,y:C.y0+C.y/2}},e);var D=E.getModel("emphasis.itemStyle"),w=E.getModel("itemStyle");Ps(d.style,_,{text:_.get("show")?e.getFormattedLabel(g[p-1],"normal")||i.getName(g[p-1]):null,textVerticalAlign:"middle"}),c.setStyle(b({fill:l},w.getItemStyle(["color"]))),ks(c,D.getItemStyle())}else o.remove(s[n])}l.add(A(c,this,"add")).update(A(c,this,"update")).remove(A(c,this,"remove")).execute(),this._layersSeries=r,this._layers=u},dispose:function(){}}),Xf((function(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),n=e.coordinateSystem,i={},o=n.getRect();i.rect=o;var r=e.get("boundaryGap"),a=n.getAxis();i.boundaryGap=r,"horizontal"===a.orient?(r[0]=gl(r[0],o.height),r[1]=gl(r[1],o.height),Jx(t,e,o.height-r[0]-r[1])):(r[0]=gl(r[0],o.width),r[1]=gl(r[1],o.width),Jx(t,e,o.width-r[0]-r[1])),t.setLayout("layoutInfo",i)}))})),Yf((function(e){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),n=e.getRawData(),i=e.get("color"),o=Q();t.each((function(e){o.set(t.getRawIndex(e),e)})),n.each((function(r){var a=n.getName(r),s=i[(e.nameMap.get(a)-1)%i.length];n.setItemVisual(r,"color",s);var l=o.get(r);null!=l&&t.setItemVisual(l,"color",s)}))}))})),Uf(wv("themeRiver")),Kc.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var n={name:e.name,children:e.data};!function e(t){var n=0;w(t.children,(function(t){e(t);var i=t.value;M(i)&&(i=i[0]),n+=i}));var i=t.value;M(i)&&(i=i[0]),null!=i&&!isNaN(i)||(i=n),i<0&&(i=0),M(t.value)?t.value[0]=i:t.value=i}(n);var i={};return i.levels=e.levels||[],$y.createTree(n,this,i).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=Kc.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=ub(n,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var eI=Qx.prototype;eI.updateData=function(e,t,n,i,o){(this.node=t).piece=this,i=i||this._seriesModel,o=o||this._ecModel;var r=this.childAt(0);r.dataIndex=t.dataIndex;var a=t.getModel(),s=t.getLayout(),l=b({},s);l.label=null;var u=function(e,t,n){var i=e.getVisual("color"),o=e.getVisual("visualMeta");o&&0!==o.length||(i=null);var r=e.getModel("itemStyle").get("color");if(r)return r;if(i)return i;if(0===e.depth)return n.option.color[0];var a=n.option.color.length;return n.option.color[function(e){for(var t=e;1<t.depth;)t=t.parentNode;return _(e.getAncestors()[0].children,t)}(e)%a]}(t,0,o);!function(e,t,n){t.getData().setItemVisual(e.dataIndex,"color",n)}(t,i,u);var c,d=a.getModel("itemStyle").getItemStyle();c=T({lineJoin:"bevel",fill:(c="normal"===n?d:v(a.getModel(n+".itemStyle").getItemStyle(),d)).fill||u},c),e?(r.setShape(l),r.shape.r=s.r0,$s(r,{shape:{r:s.r}},i,t.dataIndex),r.useStyle(c)):"object"==typeof c.fill&&c.fill.type||"object"==typeof r.style.fill&&r.style.fill.type?($s(r,{shape:l},i),r.useStyle(c)):$s(r,{shape:l,style:c},i),this._updateLabel(i,u,n);var f=a.getShallow("cursor");if(f&&r.attr("cursor",f),e){var h=i.getShallow("highlightPolicy");this._initEvents(r,t,i,h)}this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel,ks(this)},eI.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode((function(n){n.piece&&(t.node===n?n.piece.updateData(!1,n,"emphasis"):function(e,t,n){return"none"!==n&&("self"===n?e===t:"ancestor"===n?e===t||e.isAncestorOf(t):e===t||e.isDescendantOf(t))}(n,t.node,e)?n.piece.childAt(0).trigger("highlight"):"none"!==e&&n.piece.childAt(0).trigger("downplay"))}))},eI.onNormal=function(){this.node.hostTree.root.eachNode((function(e){e.piece&&e.piece.updateData(!1,e,"normal")}))},eI.onHighlight=function(){this.updateData(!1,this.node,"highlight")},eI.onDownplay=function(){this.updateData(!1,this.node,"downplay")},eI._updateLabel=function(e,t,n){var i=this.node.getModel(),o=i.getModel("label"),r="normal"===n||"emphasis"===n?o:i.getModel(n+".label"),a=i.getModel("emphasis.label"),s=V(e.getFormattedLabel(this.node.dataIndex,n,null,null,"label"),this.node.name);!1===T("show")&&(s="");var l=this.node.getLayout(),u=r.get("minAngle");null==u&&(u=o.get("minAngle")),null!=(u=u/180*Math.PI)&&Math.abs(l.endAngle-l.startAngle)<u&&(s="");var c=this.childAt(1);Ms(c.style,c.hoverStyle||{},o,a,{defaultText:r.getShallow("show")?s:null,autoColor:t,useInsideStyle:!0});var d,f=(l.startAngle+l.endAngle)/2,h=Math.cos(f),g=Math.sin(f),p=T("position"),m=T("distance")||0,v=T("align");"outside"===p?(d=l.r+m,v=f>Math.PI/2?"right":"left"):v&&"center"!==v?"left"===v?(d=l.r0+m,f>Math.PI/2&&(v="right")):"right"===v&&(d=l.r-m,f>Math.PI/2&&(v="left")):(d=(l.r+l.r0)/2,v="center"),c.attr("style",{text:s,textAlign:v,textVerticalAlign:T("verticalAlign")||"middle",opacity:T("opacity")}),c.attr("position",[d*h+l.cx,d*g+l.cy]);var y=T("rotate"),b=0;function T(e){var t=r.get(e);return null==t?o.get(e):t}"radial"===y?(b=-f)<-Math.PI/2&&(b+=Math.PI):"tangential"===y?(b=Math.PI/2-f)>Math.PI/2?b-=Math.PI:b<-Math.PI/2&&(b+=Math.PI):"number"==typeof y&&(b=y*Math.PI/180),c.attr("rotation",b)},eI._initEvents=function(e,t,n,i){function o(){a.onEmphasis(i)}function r(){a.onNormal()}e.off("mouseover").off("mouseout").off("emphasis").off("normal");var a=this;n.isAnimationEnabled()&&e.on("mouseover",o).on("mouseout",r).on("emphasis",o).on("normal",r).on("downplay",(function(){a.onDownplay()})).on("highlight",(function(){a.onHighlight()}))},x(Qx,_n),Gc.extend({type:"sunburst",init:function(){},render:function(e,t,n,i){var o=this;this.seriesModel=e,this.api=n,this.ecModel=t;var r=e.getData(),a=r.tree.root,s=e.getViewRoot(),l=this.group,u=e.get("renderLabelForZeroData"),c=[];if(s.eachNode((function(e){c.push(e)})),function(n,i){function o(e){return e.getId()}function s(o,s){!function(n,i){if(u||!n||n.getValue()||(n=null),n!==a&&i!==a)if(i&&i.piece)n?(i.piece.updateData(!1,n,"normal",e,t),r.setItemGraphicEl(n.dataIndex,i.piece)):function(e){e&&e.piece&&(l.remove(e.piece),e.piece=null)}(i);else if(n){var o=new Qx(n,e,t);l.add(o),r.setItemGraphicEl(n.dataIndex,o)}}(null==o?null:n[o],null==s?null:i[s])}0===n.length&&0===i.length||new oh(i,n,o,o).add(s).update(s).remove(N(s,null)).execute()}(c,this._oldChildren||[]),function(n,i){if(0<i.depth){o.virtualPiece?o.virtualPiece.updateData(!1,n,"normal",e,t):(o.virtualPiece=new Qx(n,e,t),l.add(o.virtualPiece)),i.piece._onclickEvent&&i.piece.off("click",i.piece._onclickEvent);var r=function(e){o._rootToNode(i.parentNode)};i.piece._onclickEvent=r,o.virtualPiece.on("click",r)}else o.virtualPiece&&(l.remove(o.virtualPiece),o.virtualPiece=null)}(a,s),i&&i.highlight&&i.highlight.piece){var d=e.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(d)}else if(i&&i.unhighlight){var f=this.virtualPiece;!f&&a.children.length&&(f=a.children[0].piece),f&&f.onNormal()}this._initEvents(),this._oldChildren=c},dispose:function(){},_initEvents:function(){function e(e){var n=!1;t.seriesModel.getViewRoot().eachNode((function(i){if(!n&&i.piece&&i.piece.childAt(0)===e.target){var o=i.getModel().get("nodeClick");if("rootToNode"===o)t._rootToNode(i);else if("link"===o){var r=i.getModel(),a=r.get("link");a&&jl(a,r.get("target",!0)||"_blank")}n=!0}}))}var t=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var i=e[0]-n.cx,o=e[1]-n.cy,r=Math.sqrt(i*i+o*o);return r<=n.r&&r>=n.r0}}});var tI="sunburstRootToNode";jf({type:tI,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,n){var i=ab(e,[tI],t);if(i){var o=t.getViewRoot();o&&(e.direction=lb(o,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}))}));var nI="sunburstHighlight";jf({type:nI,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,n){var i=ab(e,[nI],t);i&&(e.highlight=i.node)}))})),jf({type:"sunburstUnhighlight",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,n){e.unhighlight=!0}))}));var iI=Math.PI/180;function oI(e,t){return t=t||[0,0],O(["x","y"],(function(n,i){var o=this.getAxis(n),r=t[i],a=e[i]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(r-a)-o.dataToCoord(r+a))}),this)}function rI(e,t){return t=t||[0,0],O([0,1],(function(n){var i=t[n],o=e[n]/2,r=[],a=[];return r[n]=i-o,a[n]=i+o,r[1-n]=a[1-n]=t[1-n],Math.abs(this.dataToPoint(r)[n]-this.dataToPoint(a)[n])}),this)}function aI(e,t){var n=this.getAxis(),i=t instanceof Array?t[0]:t,o=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-o)-n.dataToCoord(i+o))}function sI(e,t){return O(["Radius","Angle"],(function(n,i){var o=this["get"+n+"Axis"](),r=t[i],a=e[i]/2,s="dataTo"+n,l="category"===o.type?o.getBandWidth():Math.abs(o[s](r-a)-o[s](r+a));return"Angle"===n&&(l=l*Math.PI/180),l}),this)}Yf(N(Cv,"sunburst")),Xf(N((function(e,t,n,i){t.eachSeriesByType(e,(function(e){var t=e.get("center"),i=e.get("radius");M(i)||(i=[0,i]),M(t)||(t=[t,t]);var o=n.getWidth(),r=n.getHeight(),a=Math.min(o,r),s=gl(t[0],o),l=gl(t[1],r),u=gl(i[0],a/2),c=gl(i[1],a/2),d=-e.get("startAngle")*iI,f=e.get("minAngle")*iI,h=e.getData().tree.root,g=e.getViewRoot(),p=g.depth,m=e.get("sort");null!=m&&function e(t,n){var i=t.children||[];t.children=function(e,t){if("function"==typeof t)return e.sort(t);var n="asc"===t;return e.sort((function(e,t){var i=(e.getValue()-t.getValue())*(n?1:-1);return 0==i?(e.dataIndex-t.dataIndex)*(n?-1:1):i}))}(i,n),i.length&&w(t.children,(function(t){e(t,n)}))}(g,m);var v=0;w(g.children,(function(e){isNaN(e.getValue())||v++}));var y=g.getValue(),b=Math.PI/(y||v)*2,T=0<g.depth,C=(c-u)/(g.height-(T?-1:1)||1),E=e.get("clockwise"),_=e.get("stillShowZeroSum"),x=E?1:-1,I=function(e,t){if(e){var n=t;if(e!==h){var i=e.getValue(),o=0===y&&_?b:i*b;o<f&&(o=f),n=t+x*o;var r=e.depth-p-(T?-1:1),c=u+C*r,d=u+C*(1+r),g=e.getModel();null!=g.get("r0")&&(c=gl(g.get("r0"),a/2)),null!=g.get("r")&&(d=gl(g.get("r"),a/2)),e.setLayout({angle:o,startAngle:t,endAngle:n,clockwise:E,cx:s,cy:l,r0:c,r:d})}if(e.children&&e.children.length){var m=0;w(e.children,(function(e){m+=I(e,t+m)}))}return n-t}};if(T){var D=2*Math.PI;h.setLayout({angle:D,startAngle:d,endAngle:d+D,clockwise:E,cx:s,cy:l,r0:u,r:u+C})}I(g,d)}))}),"sunburst")),Uf(N(wv,"sunburst"));var lI=is,uI=["itemStyle"],cI=["emphasis","itemStyle"],dI=["label"],fI=["emphasis","label"],hI={cartesian2d:function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:A(oI,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:A(rI,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:A(aI,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:i[1],r0:i[0]},api:{coord:A((function(i){var o=t.dataToRadius(i[0]),r=n.dataToAngle(i[1]),a=e.coordToPoint([o,r]);return a.push(o,r*Math.PI/180),a})),size:A(sI,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(t,n){return e.dataToPoint(t,n)}}}}};function gI(e,t,n,i,o){null==n[e]||o||(t[e]=n[e],n[e]=i[e])}function pI(e,t,n,i){var o=e.get("renderItem"),r=e.coordinateSystem,a={};r&&(a=r.prepareCustoms?r.prepareCustoms():hI[r.type](r));var s,l,u,c,d,f=T({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(e,n){return null==n&&(n=s),t.get(t.getDimension(e||0),n)},style:function(n,i){null==i&&(i=s),p(i);var o=l.getModel(uI).getItemStyle();null!=d&&(o.fill=d);var r=t.getItemVisual(i,"opacity");null!=r&&(o.opacity=r);var a=n?TI(n,u):u;return Ps(o,a,null,{autoColor:d,isRectText:!0}),o.text=a.getShallow("show")?W(e.getFormattedLabel(i,"normal"),fp(t,i)):null,n&&CI(o,n),o},styleEmphasis:function(n,i){null==i&&(i=s),p(i);var o=l.getModel(cI).getItemStyle(),r=n?TI(n,c):c;return Ps(o,r,null,{isRectText:!0},!0),o.text=r.getShallow("show")?$(e.getFormattedLabel(i,"emphasis"),e.getFormattedLabel(i,"normal"),fp(t,i)):null,n&&CI(o,n),o},visual:function(e,n){return null==n&&(n=s),t.getItemVisual(n,e)},barLayout:function(e){if(r.getBaseAxis)return function(e){var t=[],n=e.axis;if("category"===n.type){for(var i=n.getBandWidth(),o=0;o<e.count;o++)t.push(T({bandWidth:i,axisKey:"axis0",stackId:tg+o},e));var r=sg(t),a=[];for(o=0;o<e.count;o++){var s=r.axis0[tg+o];s.offsetCenter=s.offset+s.width/2,a.push(s)}return a}}(T({axis:r.getBaseAxis()},e))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(e){return Vs(e,n)}},a.api||{}),h={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:function(e){var t={};return w(e.dimensions,(function(n,i){var o=e.getDimensionInfo(n);if(!o.isExtraCoord){var r=o.coordDim;(t[r]=t[r]||[])[o.coordDimIndex]=i}})),t}(e.getData())},g=!0;return function(e,n){return s=e,g=!0,o&&o(T({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:n?n.type:null},h),f)};function p(e){null==e&&(e=s),g&&(l=t.getItemModel(e),u=l.getModel(dI),c=l.getModel(fI),d=t.getItemVisual(e,"color"),g=!1)}}function mI(e,t,n,i,o,r){return(e=vI(e,t,n,i,o,r,!0))&&r.setItemGraphicEl(t,e),e}function vI(e,t,n,i,o,r,a){var s=!n,l=(n=n||{}).type,u=n.shape,c=n.style;if(e&&(s||null!=l&&l!==e.__customGraphicType||"path"===l&&function(e){return e&&(e.hasOwnProperty("pathData")||e.hasOwnProperty("d"))}(u)&&_I(u)!==e.__customPathData||"image"===l&&xI(c,"image")&&c.image!==e.__customImagePath||"text"===l&&xI(u,"text")&&c.text!==e.__customText)&&(o.remove(e),e=null),!s){var d=!e;return function(e,t,n,i,o,r,a){var s={},l=n.style||{};if(n.shape&&(s.shape=m(n.shape)),n.position&&(s.position=n.position.slice()),n.scale&&(s.scale=n.scale.slice()),n.origin&&(s.origin=n.origin.slice()),n.rotation&&(s.rotation=n.rotation),"image"===e.type&&n.style){var u=s.style={};w(["x","y","width","height"],(function(t){gI(t,u,l,e.style,r)}))}if("text"===e.type&&n.style&&(u=s.style={},w(["x","y"],(function(t){gI(t,u,l,e.style,r)})),!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill),!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke)),"group"!==e.type&&(e.useStyle(l),r)){e.style.opacity=0;var c=l.opacity;null==c&&(c=1),qs(e,{style:{opacity:c}},i,t)}r?e.attr(s):$s(e,s,i,t),n.hasOwnProperty("z2")&&e.attr("z2",n.z2||0),n.hasOwnProperty("silent")&&e.attr("silent",n.silent),n.hasOwnProperty("invisible")&&e.attr("invisible",n.invisible),n.hasOwnProperty("ignore")&&e.attr("ignore",n.ignore),n.hasOwnProperty("info")&&e.attr("info",n.info);var d=n.styleEmphasis;xs(e,d),a&&Ss(e,!1!==d)}(e=e||function(e){var t,n=e.type;if("path"===n){var i=e.shape,o=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,r=_I(i);(t=ds(r,null,o,i.layout||"center")).__customPathData=r}else if("image"===n)(t=new Hi({})).__customImagePath=e.style.image;else if("text"===n)(t=new Da({})).__customText=e.style.text;else if("group"===n)t=new _n;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');t=new(cs(n))}return t.__customGraphicType=n,t.name=e.name,t}(n),t,n,i,0,d,a),"group"===l&&function(e,t,n,i,o){var r=n.children,a=r?r.length:0,s=n.$mergeChildren,l="byName"===s||n.diffChildrenByName,u=!1===s;if(a||l||u){if(l)return function(e){new oh(e.oldChildren,e.newChildren,yI,yI,e).add(bI).update(bI).remove(EI).execute()}({oldChildren:e.children()||[],newChildren:r||[],dataIndex:t,animatableModel:i,group:e,data:o});u&&e.removeAll();for(var c=0;c<a;c++)r[c]&&vI(e.childAt(c),t,r[c],i,e,o)}}(e,t,n,i,r),o.add(e),e}}function yI(e,t){var n=e&&e.name;return null!=n?n:"e\0\0"+t}function bI(e,t){var n=this.context;vI(null!=t?n.oldChildren[t]:null,n.dataIndex,null!=e?n.newChildren[e]:null,n.animatableModel,n.group,n.data)}function TI(e,t){var n=new ll({},t);return w(lI,(function(t,i){e.hasOwnProperty(t)&&(n.option[i]=e[t])})),n}function CI(e,t){for(var n in t)!t.hasOwnProperty(n)&&lI.hasOwnProperty(n)||(e[n]=t[n])}function EI(e){var t=this.context,n=t.oldChildren[e];n&&t.group.remove(n)}function _I(e){return e&&(e.pathData||e.d)}function xI(e,t){return e&&e.hasOwnProperty(t)}function II(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function DI(e,t){return t.dim+e.model.componentIndex}function wI(e,t){sp.call(this,"radius",e,t),this.type="category"}Kc.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(e,t){return Hh(this.getSource(),this)},getDataParams:function(e,t,n){var i=Kc.prototype.getDataParams.apply(this,arguments);return n&&(i.info=n.info),i}}),Gc.extend({type:"custom",_data:null,render:function(e,t,n,i){var o=this._data,r=e.getData(),a=this.group,s=pI(e,r,t,n);r.diff(o).add((function(t){mI(null,t,s(t,i),e,a,r)})).update((function(t,n){mI(o.getItemGraphicEl(n),t,s(t,i),e,a,r)})).remove((function(e){var t=o.getItemGraphicEl(e);t&&a.remove(t)})).execute();var l=e.get("clip",!0)?$p(e.coordinateSystem,!1,e):null;l?a.setClipPath(l):a.removeClipPath(),this._data=r},incrementalPrepareRender:function(e,t,n){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,n,i,o){var r=t.getData(),a=pI(t,r,n,i);function s(e){e.isGroup||(e.incremental=!0,e.useHoverLayer=!0)}for(var l=e.start;l<e.end;l++)mI(null,l,a(l,o),t,this.group,r).traverse(s)},dispose:te,filterForExposedEvent:function(e,t,n,i){var o=t.element;if(null==o||n.name===o)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1}}),wI.prototype={constructor:wI,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:sp.prototype.dataToCoord,radiusToData:sp.prototype.coordToData},x(wI,sp);var OI=Ko();function RI(e,t){sp.call(this,"angle",e,t=t||[0,360]),this.type="category"}function kI(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new wI,this._angleAxis=new RI,this._radiusAxis.polar=this._angleAxis.polar=this}RI.prototype={constructor:RI,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:sp.prototype.dataToCoord,angleToData:sp.prototype.coordToData,calculateCategoryInterval:function(){var e=this.getLabelModel(),t=this.scale,n=t.getExtent(),i=t.count();if(n[1]-n[0]<1)return 0;var o=n[0],r=this.dataToCoord(o+1)-this.dataToCoord(o),a=Math.abs(r),s=ii(o,e.getFont(),"center","top"),l=Math.max(s.height,7)/a;isNaN(l)&&(l=1/0);var u=Math.max(0,Math.floor(l)),c=OI(this.model),d=c.lastAutoInterval,f=c.lastTickCount;return null!=d&&null!=f&&Math.abs(d-u)<=1&&Math.abs(f-i)<=1&&u<d?u=d:(c.lastTickCount=i,c.lastAutoInterval=u),u}},x(RI,sp),kI.prototype={type:"polar",axisPointerEnabled:!0,constructor:kI,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===e&&t.push(n),i.scale.type===e&&t.push(i),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,n=e[1]-this.cy,i=this.getAngleAxis(),o=i.getExtent(),r=Math.min(o[0],o[1]),a=Math.max(o[0],o[1]);i.inverse?r=a-360:a=r+360;var s=Math.sqrt(t*t+n*n);t/=s,n/=s;for(var l=Math.atan2(-n,t)/Math.PI*180,u=l<r?1:-1;l<r||a<l;)l+=360*u;return[s,l]},coordToPoint:function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},getArea:function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:e.inverse,contain:function(e,t){var n=e-this.cx,i=t-this.cy,o=n*n+i*i,r=this.r,a=this.r0;return o<=r*r&&a*a<=o}}}};var SI=uu.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function AI(e,t){return t.type||(t.data?"category":"value")}function NI(e,t){var n=this,i=n.getAngleAxis(),o=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),e.eachSeries((function(e){if(e.coordinateSystem===n){var t=e.getData();w(t.mapDimension("radius",!0),(function(e){o.scale.unionExtentFromData(t,zh(t,e))})),w(t.mapDimension("angle",!0),(function(e){i.scale.unionExtentFromData(t,zh(t,e))}))}})),Sg(i.scale,i.model),Sg(o.scale,o.model),"category"===i.type&&!i.onBand){var r=i.getExtent(),a=360/i.scale.count();i.inverse?r[1]+=a:r[1]-=a,i.setExtent(r[0],r[1])}}function MI(e,t){if(e.type=t.get("type"),e.scale=Ag(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var n=t.get("startAngle");e.setExtent(n,n+(e.inverse?-360:360))}(t.axis=e).model=t}v(SI.prototype,Lg),am("angle",SI,AI,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),am("radius",SI,AI,{splitNumber:5}),Qf({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,(function(e){e.getCoordSysModel()===this&&(t=e)}),this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),Lu.register("polar",{dimensions:kI.prototype.dimensions,create:function(e,t){var n=[];return e.eachComponent("polar",(function(e,i){var o=new kI(i);o.update=NI;var r=o.getRadiusAxis(),a=o.getAngleAxis(),s=e.findAxisModel("radiusAxis"),l=e.findAxisModel("angleAxis");MI(r,s),MI(a,l),function(e,t,n){var i=t.get("center"),o=n.getWidth(),r=n.getHeight();e.cx=gl(i[0],o),e.cy=gl(i[1],r);var a=e.getRadiusAxis(),s=Math.min(o,r)/2,l=t.get("radius");null==l?l=[0,"100%"]:M(l)||(l=[0,l]),l=[gl(l[0],s),gl(l[1],s)],a.inverse?a.setExtent(l[1],l[0]):a.setExtent(l[0],l[1])}(o,e,t),n.push(o),(e.coordinateSystem=o).model=e})),e.eachSeries((function(t){if("polar"===t.get("coordinateSystem")){var n=e.queryComponents({mainType:"polar",index:t.get("polarIndex"),id:t.get("polarId")})[0];t.coordinateSystem=n.coordinateSystem}})),n}});var KI=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function PI(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var i=e.coordToPoint([t[0],n]),o=e.coordToPoint([t[1],n]);return{x1:i[0],y1:i[1],x2:o[0],y2:o[1]}}function LI(e){return e.getRadiusAxis().inverse?0:1}function BI(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}Km.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,i=n.polar,o=i.getRadiusAxis().getExtent(),r=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=O(n.getViewLabels(),(function(e){return(e=m(e)).coord=n.dataToCoord(e.tickValue),e}));BI(s),BI(r),w(KI,(function(t){!e.get(t+".show")||n.scale.isBlank()&&"axisLine"!==t||this["_"+t](e,i,r,a,o,s)}),this)}},_axisLine:function(e,t,n,i,o){var r,a=e.getModel("axisLine.lineStyle"),s=LI(t),l=s?0:1;(r=0===o[l]?new Oa({shape:{cx:t.cx,cy:t.cy,r:o[s]},style:a.getLineStyle(),z2:1,silent:!0}):new Sa({shape:{cx:t.cx,cy:t.cy,r:o[s],r0:o[l]},style:a.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(r)},_axisTick:function(e,t,n,i,o){var r=e.getModel("axisTick"),a=(r.get("inside")?-1:1)*r.get("length"),s=o[LI(t)],l=O(n,(function(e){return new Wa({shape:PI(t,[s,s+a],e.coord)})}));this.group.add(gs(l,{style:T(r.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_minorTick:function(e,t,n,i,o){if(i.length){for(var r=e.getModel("axisTick"),a=e.getModel("minorTick"),s=(r.get("inside")?-1:1)*a.get("length"),l=o[LI(t)],u=[],c=0;c<i.length;c++)for(var d=0;d<i[c].length;d++)u.push(new Wa({shape:PI(t,[l,l+s],i[c][d].coord)}));this.group.add(gs(u,{style:T(a.getModel("lineStyle").getLineStyle(),T(r.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(e,t,n,i,o,r){var a=e.getCategories(!0),s=e.getModel("axisLabel"),l=s.get("margin"),u=e.get("triggerEvent");w(r,(function(n,i){var r=s,c=n.tickValue,d=o[LI(t)],f=t.coordToPoint([d+l,n.coord]),h=t.cx,g=t.cy,p=Math.abs(f[0]-h)/d<.3?"center":f[0]>h?"left":"right",m=Math.abs(f[1]-g)/d<.3?"middle":f[1]>g?"top":"bottom";a&&a[c]&&a[c].textStyle&&(r=new ll(a[c].textStyle,s,s.ecModel));var v=new Da({silent:bm.isLabelSilent(e)});this.group.add(v),Ps(v.style,r,{x:f[0],y:f[1],textFill:r.getTextColor()||e.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:p,textVerticalAlign:m}),u&&(v.eventData=bm.makeAxisEventDataBase(e),v.eventData.targetType="axisLabel",v.eventData.value=n.rawLabel)}),this)},_splitLine:function(e,t,n,i,o){var r=e.getModel("splitLine").getModel("lineStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=0;u<n.length;u++){var c=s++%a.length;l[c]=l[c]||[],l[c].push(new Wa({shape:PI(t,o,n[u].coord)}))}for(u=0;u<l.length;u++)this.group.add(gs(l[u],{style:T({stroke:a[u%a.length]},r.getLineStyle()),silent:!0,z:e.get("z")}))},_minorSplitLine:function(e,t,n,i,o){if(i.length){for(var r=e.getModel("minorSplitLine").getModel("lineStyle"),a=[],s=0;s<i.length;s++)for(var l=0;l<i[s].length;l++)a.push(new Wa({shape:PI(t,o,i[s][l].coord)}));this.group.add(gs(a,{style:r.getLineStyle(),silent:!0,z:e.get("z")}))}},_splitArea:function(e,t,n,i,o){if(n.length){var r=e.getModel("splitArea").getModel("areaStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=Math.PI/180,c=-n[0].coord*u,d=Math.min(o[0],o[1]),f=Math.max(o[0],o[1]),h=e.get("clockwise"),g=1;g<n.length;g++){var p=s++%a.length;l[p]=l[p]||[],l[p].push(new ka({shape:{cx:t.cx,cy:t.cy,r0:d,r:f,startAngle:c,endAngle:-n[g].coord*u,clockwise:h},silent:!0})),c=-n[g].coord*u}for(g=0;g<l.length;g++)this.group.add(gs(l[g],{style:T({fill:a[g%a.length]},r.getAreaStyle()),silent:!0}))}}});var FI=["axisLine","axisTickLabel","axisName"],zI=["splitLine","splitArea","minorSplitLine"];Km.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,i=n.polar,o=i.getAngleAxis(),r=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=o.getExtent()[0],l=n.getExtent(),u=function(e,t,n){return{position:[e.cx,e.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}(i,e,s),c=new bm(e,u);w(FI,c.add,c),this.group.add(c.getGroup()),w(zI,(function(t){e.get(t+".show")&&!n.scale.isBlank()&&this["_"+t](e,i,s,l,r,a)}),this)}},_splitLine:function(e,t,n,i,o){var r=e.getModel("splitLine").getModel("lineStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=0;u<o.length;u++){var c=s++%a.length;l[c]=l[c]||[],l[c].push(new Oa({shape:{cx:t.cx,cy:t.cy,r:o[u].coord}}))}for(u=0;u<l.length;u++)this.group.add(gs(l[u],{style:T({stroke:a[u%a.length],fill:null},r.getLineStyle()),silent:!0}))},_minorSplitLine:function(e,t,n,i,o,r){if(r.length){for(var a=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<r.length;l++)for(var u=0;u<r[l].length;u++)s.push(new Oa({shape:{cx:t.cx,cy:t.cy,r:r[l][u].coord}}));this.group.add(gs(s,{style:T({fill:null},a.getLineStyle()),silent:!0}))}},_splitArea:function(e,t,n,i,o){if(o.length){var r=e.getModel("splitArea").getModel("areaStyle"),a=r.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=o[0].coord,c=1;c<o.length;c++){var d=s++%a.length;l[d]=l[d]||[],l[d].push(new ka({shape:{cx:t.cx,cy:t.cy,r0:u,r:o[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),u=o[c].coord}for(c=0;c<l.length;c++)this.group.add(gs(l[c],{style:T({fill:a[c%a.length]},r.getAreaStyle()),silent:!0}))}}});var HI=Ox.extend({makeElOption:function(e,t,n,i,o){var r=n.axis;"angle"===r.dim&&(this.animationThreshold=Math.PI/18);var a,s=r.polar,l=s.getOtherAxis(r).getExtent();a=r["dataTo"+ql(r.dim)](t);var u=i.get("type");if(u&&"none"!==u){var c=Nx(i),d=VI[u](r,s,a,l,c);d.style=c,e.graphicKey=d.type,e.pointer=d}var f=i.get("label.margin");Mx(e,n,i,o,function(e,t,n,i,o){var r=t.axis,a=r.dataToCoord(e),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,u,c,d=i.getRadiusAxis().getExtent();if("radius"===r.dim){var f=nt();st(f,f,s),at(f,f,[i.cx,i.cy]),l=js([a,-o],f);var h=t.getModel("axisLabel").get("rotate")||0,g=bm.innerTextLayout(s,h*Math.PI/180,-1);u=g.textAlign,c=g.textVerticalAlign}else{var p=d[1];l=i.coordToPoint([p+o,a]);var m=i.cx,v=i.cy;u=Math.abs(l[0]-m)/p<.3?"center":l[0]>m?"left":"right",c=Math.abs(l[1]-v)/p<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:u,verticalAlign:c}}(t,n,0,s,f))}}),VI={line:function(e,t,n,i,o){return"angle"===e.dim?{type:"Line",shape:Bx(t.coordToPoint([i[0],n]),t.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,i,o){var r=Math.max(1,e.getBandWidth()),a=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:zx(t.cx,t.cy,i[0],i[1],(-n-r/2)*a,(r/2-n)*a)}:{type:"Sector",shape:zx(t.cx,t.cy,n-r/2,n+r/2,0,2*Math.PI)}}};function WI(e,t){t.update="updateView",jf(t,(function(t,n){var i={};return n.eachComponent({mainType:"geo",query:t},(function(n){n[e](t.name),w(n.coordinateSystem.regions,(function(e){i[e.name]=n.isSelected(e.name)||!1}))})),{selected:i,name:t.name}}))}function $I(e,t,n){this._model=e}function qI(e,t,n,i){var o=n.calendarModel,r=n.seriesModel,a=o?o.coordinateSystem:r?r.coordinateSystem:null;return a===this?a[e](i):null}Km.registerAxisPointerClass("PolarAxisPointer",HI),Xf(N((function(e,t,n){var i={},o=function(e){var t={};w(e,(function(e,n){var i=e.getData(),o=e.coordinateSystem,r=o.getBaseAxis(),a=DI(o,r),s=r.getExtent(),l="category"===r.type?r.getBandWidth():Math.abs(s[1]-s[0])/i.count(),u=t[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=u.stacks;t[a]=u;var d=II(e);c[d]||u.autoWidthCount++,c[d]=c[d]||{width:0,maxWidth:0};var f=gl(e.get("barWidth"),l),h=gl(e.get("barMaxWidth"),l),g=e.get("barGap"),p=e.get("barCategoryGap");f&&!c[d].width&&(f=Math.min(u.remainedWidth,f),c[d].width=f,u.remainedWidth-=f),h&&(c[d].maxWidth=h),null!=g&&(u.gap=g),null!=p&&(u.categoryGap=p)}));var n={};return w(t,(function(e,t){n[t]={};var i=e.stacks,o=gl(e.categoryGap,e.bandWidth),r=gl(e.gap,1),a=e.remainedWidth,s=e.autoWidthCount,l=(a-o)/(s+(s-1)*r);l=Math.max(l,0),w(i,(function(e,t){var n=e.maxWidth;n&&n<l&&(n=Math.min(n,a),e.width&&(n=Math.min(n,e.width)),a-=n,e.width=n,s--)})),l=(a-o)/(s+(s-1)*r),l=Math.max(l,0);var u,c=0;w(i,(function(e,t){e.width||(e.width=l),c+=(u=e).width*(1+r)})),u&&(c-=u.width*r);var d=-c/2;w(i,(function(e,i){n[t][i]=n[t][i]||{offset:d,width:e.width},d+=e.width*(1+r)}))})),n}(k(t.getSeriesByType(e),(function(e){return!t.isSeriesFiltered(e)&&e.coordinateSystem&&"polar"===e.coordinateSystem.type})));t.eachSeriesByType(e,(function(e){if("polar"===e.coordinateSystem.type){var t=e.getData(),n=e.coordinateSystem,r=n.getBaseAxis(),a=DI(n,r),s=II(e),l=o[a][s],u=l.offset,c=l.width,d=n.getOtherAxis(r),f=e.coordinateSystem.cx,h=e.coordinateSystem.cy,g=e.get("barMinHeight")||0,p=e.get("barMinAngle")||0;i[s]=i[s]||[];for(var m=t.mapDimension(d.dim),v=t.mapDimension(r.dim),y=Fh(t,m),b="radius"!==r.dim||!e.get("roundCap",!0),T=d.getExtent()[0],C=0,E=t.count();C<E;C++){var _,x,I,D,w=t.get(m,C),O=t.get(v,C),R=0<=w?"p":"n",k=T;if(y&&(i[s][O]||(i[s][O]={p:T,n:T}),k=i[s][O][R]),"radius"===d.dim){var S=d.dataToRadius(w)-T,A=r.dataToAngle(O);Math.abs(S)<g&&(S=(S<0?-1:1)*g),x=(_=k)+S,D=(I=A-u)-c,y&&(i[s][O][R]=x)}else{var N=d.dataToAngle(w,b)-T,M=r.dataToRadius(O);Math.abs(N)<p&&(N=(N<0?-1:1)*p),x=(_=M+u)+c,D=(I=k)+N,y&&(i[s][O][R]=D)}t.setItemLayout(C,{cx:f,cy:h,r0:_,r:x,startAngle:-I*Math.PI/180,endAngle:-D*Math.PI/180})}}}),this)}),"bar")),eh({type:"polar"}),I(uu.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){uu.prototype.init.apply(this,arguments),wo(e,"label",["show"])},optionUpdated:function(){var e=this.option,t=this;e.regions=Ay.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=R(e.regions||[],(function(e,n){return n.name&&e.set(n.name,new ll(n,t)),e}),Q()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new ll(null,this,this.ecModel)},getFormattedLabel:function(e,t){var n=this.getRegionModel(e).get("label"+("normal"===t?".":t+".")+"formatter"),i={name:e};return"function"==typeof n?(i.status=t,n(i)):"string"==typeof n?n.replace("{a}",null!=e?e:""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),hv),eh({type:"geo",init:function(e,t){var n=new yy(t,!0);this._mapDraw=n,this.group.add(n.group)},render:function(e,t,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var o=this._mapDraw;e.get("show")?o.draw(e,t,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),WI("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),WI("select",{type:"geoSelect",event:"geoselected"}),WI("unSelect",{type:"geoUnSelect",event:"geounselected"}),$I.prototype={constructor:$I,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=Il(e)).getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();i=i<10?"0"+i:i;var o=e.getDay();return{y:t,m:n,d:i,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+n+"-"+i,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],o=this._model.get("cellSize").slice(),r=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];w([0,1],(function(e){u(o,e)&&(r[i[e]]=o[e]*a[e])}));var s={width:t.getWidth(),height:t.getHeight()},l=this._rect=eu(r,s);function u(e,t){return null!=e[t]&&"auto"!==e[t]}w([0,1],(function(e){u(o,e)||(o[e]=l[i[e]]/a[e])})),this._sw=o[0],this._sh=o[1]},dataToPoint:function(e,t){M(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),i=this._rangeInfo;if(t&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var o=n.day,r=this._getRangeInfo([i.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]:[this._rect.x+r*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,i):this._getDateByWeeksAndDay(t,n-1,i)},convertToPixel:N(qI,"dataToPoint"),convertFromPixel:N(qI,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(M(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var n=this.getDateInfo(t),i=n.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);e=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var r=this._getRangeInfo(e);return r.start.time>r.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var n=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,i=new Date(e[0].time),o=i.getDate(),r=e[1].date.getDate();i.setDate(o+n-1);var a=i.getDate();if(a!==r)for(var s=0<i.getTime()-e[1].time?1:-1;(a=i.getDate())!==r&&0<(i.getTime()-e[1].time)*s;)n-=s,i.setDate(a-s);var l=Math.floor((n+e[0].day+6)/7),u=t?1-l:l-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:l,nthWeek:u,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,n){var i=this._getRangeInfo(n);if(e>i.weeks||0===e&&t<i.fweek||e===i.weeks&&t>i.lweek)return!1;var o=7*(e-1)-i.fweek+t,r=new Date(i.start.time);return r.setDate(i.start.d+o),this.getDateInfo(r)}},$I.dimensions=$I.prototype.dimensions,$I.getDimensionsInfo=$I.prototype.getDimensionsInfo,$I.create=function(e,t){var n=[];return e.eachComponent("calendar",(function(i){var o=new $I(i,e,t);n.push(o),i.coordinateSystem=o})),e.eachSeries((function(e){"calendar"===e.get("coordinateSystem")&&(e.coordinateSystem=n[e.get("calendarIndex")||0])})),n},Lu.register("calendar",$I);var UI=uu.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,n,i){var o=iu(e);UI.superApply(this,"init",arguments),jI(e,o)},mergeOption:function(e,t){UI.superApply(this,"mergeOption",arguments),jI(this.option,e)}});function jI(e,t){var n=e.cellSize;M(n)?1===n.length&&(n[1]=n[0]):n=e.cellSize=[n,n];var i=O([0,1],(function(e){return function(e,t){return null!=e[Zl[t][0]]||null!=e[Zl[t][1]]&&null!=e[Zl[t][2]]}(t,e)&&(n[e]="auto"),null!=n[e]&&"auto"!==n[e]}));nu(e,t,{type:"box",ignoreSize:i})}var GI={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},XI={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]};eh({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,n){var i=this.group;i.removeAll();var o=e.coordinateSystem,r=o.getRangeInfo(),a=o.getOrient();this._renderDayRect(e,r,i),this._renderLines(e,r,a,i),this._renderYearText(e,r,a,i),this._renderMonthText(e,a,i),this._renderWeekText(e,r,a,i)},_renderDayRect:function(e,t,n){for(var i=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),r=i.getCellWidth(),a=i.getCellHeight(),s=t.start.time;s<=t.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,u=new Ha({shape:{x:l[0],y:l[1],width:r,height:a},cursor:"default",style:o});n.add(u)}},_renderLines:function(e,t,n,i){var o=this,r=e.coordinateSystem,a=e.getModel("splitLine.lineStyle").getLineStyle(),s=e.get("splitLine.show"),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=t.start,c=0;u.time<=t.end.time;c++){f(u.formatedDate),0===c&&(u=r.getDateInfo(t.start.y+"-"+t.start.m));var d=u.date;d.setMonth(d.getMonth()+1),u=r.getDateInfo(d)}function f(t){o._firstDayOfMonth.push(r.getDateInfo(t)),o._firstDayPoints.push(r.dataToRect([t],!1).tl);var l=o._getLinePointsOfOneWeek(e,t,n);o._tlpoints.push(l[0]),o._blpoints.push(l[l.length-1]),s&&o._drawSplitline(l,a,i)}f(r.getNextNDay(t.end.time,1).formatedDate),s&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,l,n),a,i),s&&this._drawSplitline(o._getEdgesPoints(o._blpoints,l,n),a,i)},_getEdgesPoints:function(e,t,n){var i=[e[0].slice(),e[e.length-1].slice()],o="horizontal"===n?0:1;return i[0][o]=i[0][o]-t/2,i[1][o]=i[1][o]+t/2,i},_drawSplitline:function(e,t,n){var i=new Ka({z2:20,shape:{points:e},style:t});n.add(i)},_getLinePointsOfOneWeek:function(e,t,n){var i=e.coordinateSystem;t=i.getDateInfo(t);for(var o=[],r=0;r<7;r++){var a=i.getNextNDay(t.time,r),s=i.dataToRect([a.time],!1);o[2*a.day]=s.tl,o[2*a.day+1]=s["horizontal"===n?"bl":"tr"]}return o},_formatterLabel:function(e,t){return"string"==typeof e&&e?Hl(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,n,i,o){t=t.slice();var r=["center","bottom"];"bottom"===i?(t[1]+=o,r=["center","top"]):"left"===i?t[0]-=o:"right"===i?(t[0]+=o,r=["center","top"]):t[1]-=o;var a=0;return"left"!==i&&"right"!==i||(a=Math.PI/2),{rotation:a,position:t,style:{textAlign:r[0],textVerticalAlign:r[1]}}},_renderYearText:function(e,t,n,i){var o=e.getModel("yearLabel");if(o.get("show")){var r=o.get("margin"),a=o.get("position");a=a||("horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,d={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],u],right:[s[c][0],u]},f=t.start.y;+t.end.y>+t.start.y&&(f=f+"-"+t.end.y);var h=o.get("formatter"),g=this._formatterLabel(h,{start:t.start.y,end:t.end.y,nameMap:f}),p=new Da({z2:30});Ps(p.style,o,{text:g}),p.attr(this._yearTextPositionControl(p,d[a],n,a,r)),i.add(p)}},_monthTextPositionControl:function(e,t,n,i,o){var r="left",a="top",s=e[0],l=e[1];return"horizontal"===n?(l+=o,t&&(r="center"),"start"===i&&(a="bottom")):(s+=o,t&&(a="middle"),"start"===i&&(r="right")),{x:s,y:l,textAlign:r,textVerticalAlign:a}},_renderMonthText:function(e,t,n){var i=e.getModel("monthLabel");if(i.get("show")){var o=i.get("nameMap"),r=i.get("margin"),a=i.get("position"),s=i.get("align"),l=[this._tlpoints,this._blpoints];P(o)&&(o=GI[o.toUpperCase()]||[]);var u="start"===a?0:1,c="horizontal"===t?0:1;r="start"===a?-r:r;for(var d="center"===s,f=0;f<l[u].length-1;f++){var h=l[u][f].slice(),g=this._firstDayOfMonth[f];d&&(h[c]=(this._firstDayPoints[f][c]+l[0][f+1][c])/2);var p=i.get("formatter"),m=o[+g.m-1],v={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:m},y=this._formatterLabel(p,v),T=new Da({z2:30});b(Ps(T.style,i,{text:y}),this._monthTextPositionControl(h,d,t,a,r)),n.add(T)}}},_weekTextPositionControl:function(e,t,n,i,o){var r="center",a="middle",s=e[0],l=e[1],u="start"===n;return"horizontal"===t?(s=s+i+(u?1:-1)*o[0]/2,r=u?"right":"left"):(l=l+i+(u?1:-1)*o[1]/2,a=u?"bottom":"top"),{x:s,y:l,textAlign:r,textVerticalAlign:a}},_renderWeekText:function(e,t,n,i){var o=e.getModel("dayLabel");if(o.get("show")){var r=e.coordinateSystem,a=o.get("position"),s=o.get("nameMap"),l=o.get("margin"),u=r.getFirstDayOfWeek();P(s)&&(s=XI[s.toUpperCase()]||[]);var c=r.getNextNDay(t.end.time,7-t.lweek).time,d=[r.getCellWidth(),r.getCellHeight()];l=gl(l,d["horizontal"===n?0:1]),"start"===a&&(c=r.getNextNDay(t.start.time,-(7+t.fweek)).time,l=-l);for(var f=0;f<7;f++){var h,g=r.getNextNDay(c,f),p=r.dataToRect([g.time],!1).center;h=Math.abs((f+u)%7);var m=new Da({z2:30});b(Ps(m.style,o,{text:s[h]}),this._weekTextPositionControl(p,n,a,l,d)),i.add(m)}}}});var YI={path:null,compoundPath:null,group:_n,image:Hi,text:Da};qf((function(e){var t=e.graphic;M(t)?e.graphic=t[0]&&t[0].elements?[e.graphic[0]]:[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])}));var ZI=Qf({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,ZI.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var n=this.option,i=(t?n:e).elements,o=n.elements=t?[]:n.elements,r=[];this._flatten(i,r);var a=ko(o,r);So(a);var s=this._elOptionsToUpdate=[];w(a,(function(e,t){var n=e.option;n&&(s.push(n),function(e,t){var n=e.exist;if(t.id=e.keyInfo.id,!t.type&&n&&(t.type=n.type),null==t.parentId){var i=t.parentOption;i?t.parentId=i.id:n&&(t.parentId=n.parentId)}t.parentOption=null}(e,n),function(e,t,n){var i=b({},n),o=e[t],r=n.$action||"merge";"merge"===r?o?(v(o,i,!0),nu(o,i,{ignoreSize:!0}),ou(n,o)):e[t]=i:"replace"===r?e[t]=i:"remove"===r&&o&&(e[t]=null)}(o,t,n),function(e,t){e&&(e.hv=t.hv=[eD(t,["left","right"]),eD(t,["top","bottom"])],"group"===e.type&&(null==e.width&&(e.width=t.width=0),null==e.height&&(e.height=t.height=0)))}(o[t],n))}),this);for(var l=o.length-1;0<=l;l--)null==o[l]?o.splice(l,1):delete o[l].$action},_flatten:function(e,t,n){w(e,(function(e){if(e){n&&(e.parentOption=n),t.push(e);var i=e.children;"group"===e.type&&i&&this._flatten(i,t,e),delete e.children}}),this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function JI(e,t,n,i){var o=n.type,r=new(YI.hasOwnProperty(o)?YI[o]:cs(o))(n);t.add(r),i.set(e,r),r.__ecGraphicId=e}function QI(e,t){var n=e&&e.parent;n&&("group"===e.type&&e.traverse((function(e){QI(e,t)})),t.removeKey(e.__ecGraphicId),n.remove(e))}function eD(e,t){var n;return w(t,(function(t){null!=e[t]&&"auto"!==e[t]&&(n=!0)})),n}eh({type:"graphic",init:function(e,t){this._elMap=Q()},render:function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},_updateElements:function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,i=this.group;w(t,(function(t){var o=t.$action,r=t.id,a=n.get(r),s=t.parentId,l=null!=s?n.get(s):i,u=t.style;"text"===t.type&&u&&(t.hv&&t.hv[1]&&(u.textVerticalAlign=u.textBaseline=null),!u.hasOwnProperty("textFill")&&u.fill&&(u.textFill=u.fill),!u.hasOwnProperty("textStroke")&&u.stroke&&(u.textStroke=u.stroke));var c=function(e){return e=b({},e),w(["id","parentId","$action","hv","bounding"].concat(Yl),(function(t){delete e[t]})),e}(t);o&&"merge"!==o?"replace"===o?(QI(a,n),JI(r,l,c,n)):"remove"===o&&QI(a,n):a?a.attr(c):JI(r,l,c,n);var d=n.get(r);d&&(d.__ecGraphicWidthOption=t.width,d.__ecGraphicHeightOption=t.height,function(e,t){var n=e.eventData;e.silent||e.ignore||n||(n=e.eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),n&&(n.info=e.info)}(d,e))}))}},_relocate:function(e,t){for(var n=e.option.elements,i=this.group,o=this._elMap,r=t.getWidth(),a=t.getHeight(),s=0;s<n.length;s++){var l=n[s];if((c=o.get(l.id))&&c.isGroup){var u=(d=c.parent)===i;c.__ecGraphicWidth=gl(c.__ecGraphicWidthOption,u?r:d.__ecGraphicWidth)||0,c.__ecGraphicHeight=gl(c.__ecGraphicHeightOption,u?a:d.__ecGraphicHeight)||0}}for(s=n.length-1;0<=s;s--){var c,d;(c=o.get((l=n[s]).id))&&tu(c,l,(d=c.parent)===i?{width:r,height:a}:{width:d.__ecGraphicWidth,height:d.__ecGraphicHeight},null,{hv:l.hv,boundingMode:l.bounding})}},_clear:function(){var e=this._elMap;e.each((function(t){QI(t,e)})),this._elMap=Q()},dispose:function(){this._clear()}});var tD={};function nD(e,t){tD[e]=t}function iD(e){return tD[e]}var oD=Qf({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){oD.superApply(this,"optionUpdated",arguments),w(this.option.feature,(function(e,t){var n=iD(t);n&&v(e,n.defaultOption)}))},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function rD(e,t){var n=Ml(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),new Ha({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1})}eh({type:"toolbox",render:function(e,t,n,i){var o=this.group;if(o.removeAll(),e.get("show")){var r=+e.get("itemSize"),a=e.get("feature")||{},s=this._features||(this._features={}),l=[];w(a,(function(e,t){l.push(t)})),new oh(this._featureNames||[],l).add(u).update(u).remove(N(u,null)).execute(),this._featureNames=l,function(e,t,n){var i=t.getBoxLayoutParams(),o=t.get("padding"),r={width:n.getWidth(),height:n.getHeight()},a=eu(i,r,o);Ql(t.get("orient"),e,t.get("itemGap"),a.width,a.height),tu(e,i,r,o)}(o,e,n),o.add(rD(o.getBoundingRect(),e)),o.eachChild((function(e){var t=e.__title,i=e.hoverStyle;if(i&&t){var a=ii(t,pi(i)),s=e.position[0]+o.position[0],l=!1;e.position[1]+o.position[1]+r+a.height>n.getHeight()&&(i.textPosition="top",l=!0);var u=l?-5-a.height:r+8;s+a.width/2>n.getWidth()?(i.textPosition=["100%",u],i.textAlign="right"):s-a.width/2<0&&(i.textPosition=[0,u],i.textAlign="left")}}))}function u(u,c){var d,f=l[u],h=l[c],g=a[f],p=new ll(g,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===f&&(g.title=i.newTitle),f&&!h){if(function(e){return 0===e.indexOf("my")}(f))d={model:p,onclick:p.option.onclick,featureName:f};else{var m=iD(f);if(!m)return;d=new m(p,t,n)}s[f]=d}else{if(!(d=s[h]))return;d.model=p,d.ecModel=t,d.api=n}f||!h?p.get("show")&&!d.unusable?(function(i,a,s){var l=i.getModel("iconStyle"),u=i.getModel("emphasis.iconStyle"),c=a.getIcons?a.getIcons():i.get("icon"),d=i.get("title")||{};if("string"==typeof c){var f=c,h=d;d={},(c={})[s]=f,d[s]=h}var g=i.iconPaths={};w(c,(function(s,c){var f=Zs(s,{},{x:-r/2,y:-r/2,width:r,height:r});f.setStyle(l.getItemStyle()),f.hoverStyle=u.getItemStyle(),f.setStyle({text:d[c],textAlign:u.get("textAlign"),textBorderRadius:u.get("textBorderRadius"),textPadding:u.get("textPadding"),textFill:null});var h=e.getModel("tooltip");h&&h.get("show")&&f.attr("tooltip",b({content:d[c],formatter:h.get("formatter",!0)||function(){return d[c]},formatterParams:{componentType:"toolbox",name:c,title:d[c],$vars:["name","title"]},position:h.get("position",!0)||"bottom"},h.option)),ks(f),e.get("showTitle")&&(f.__title=d[c],f.on("mouseover",(function(){var t=u.getItemStyle(),n="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";f.setStyle({textFill:u.get("textFill")||t.fill||t.stroke||"#000",textBackgroundColor:u.get("textBackgroundColor"),textPosition:u.get("textPosition")||n})})).on("mouseout",(function(){f.setStyle({textFill:null,textBackgroundColor:null})}))),f.trigger(i.get("iconStatus."+c)||"normal"),o.add(f),f.on("click",A(a.onclick,a,t,n,c)),g[c]=f}))}(p,d,f),p.setIconStatus=function(e,t){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,i[e]&&i[e].trigger(t)},d.render&&d.render(p,t,n,i)):d.remove&&d.remove(t,n):d.dispose&&d.dispose(t,n)}},updateView:function(e,t,n,i){w(this._features,(function(e){e.updateView&&e.updateView(e.model,t,n,i)}))},remove:function(e,t){w(this._features,(function(n){n.remove&&n.remove(e,t)})),this.group.removeAll()},dispose:function(e,t){w(this._features,(function(n){n.dispose&&n.dispose(e,t)}))}});var aD=ld.toolbox.saveAsImage;function sD(e){this.model=e}sD.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:aD.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:aD.lang.slice()},sD.prototype.unusable=!o.canvasSupported,sD.prototype.onclick=function(e,t){var n=this.model,i=n.get("name")||e.get("title.0.text")||"echarts",r="svg"===t.getZr().painter.getType()?"svg":n.get("type",!0)||"png",a=t.getConnectedDataURL({type:r,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||o.browser.ie||o.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(a.split(",")[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var c=new Blob([u]);window.navigator.msSaveOrOpenBlob(c,i+"."+r)}else{var d=n.get("lang"),f='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(d&&d[0]||"")+'" /></body>';window.open().document.write(f)}else{var h=document.createElement("a");h.download=i+"."+r,h.target="_blank",h.href=a;var g=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});h.dispatchEvent(g)}},nD("saveAsImage",sD);var lD=ld.toolbox.magicType,uD="__ec_magicType_stack__";function cD(e){this.model=e}cD.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:m(lD.title),option:{},seriesIndex:{}};var dD=cD.prototype;dD.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return w(e.get("type"),(function(e){t[e]&&(n[e]=t[e])})),n};var fD={line:function(e,t,n,i){if("bar"===e)return v({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(e,t,n,i){if("line"===e)return v({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(e,t,n,i){var o=n.get("stack")===uD;if("line"===e||"bar"===e)return i.setIconStatus("stack",o?"normal":"emphasis"),v({id:t,stack:o?"":uD},i.get("option.stack")||{},!0)}},hD=[["line","bar"],["stack"]];dD.onclick=function(e,t,n){var i=this.model,o=i.get("seriesIndex."+n);if(fD[n]){var r,a={series:[]};w(hD,(function(e){0<=_(e,n)&&w(e,(function(e){i.setIconStatus(e,"normal")}))})),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},(function(t){var o=fD[n](t.subType,t.id,t,i);o&&(T(o,t.option),a.series.push(o));var r=t.coordinateSystem;if(r&&"cartesian2d"===r.type&&("line"===n||"bar"===n)){var s=r.getAxesByScale("ordinal")[0];if(s){var l=s.dim+"Axis",u=e.queryComponents({mainType:l,index:t.get(name+"Index"),id:t.get(name+"Id")})[0].componentIndex;a[l]=a[l]||[];for(var c=0;c<=u;c++)a[l][u]=a[l][u]||{};a[l][u].boundaryGap="bar"===n}}})),"stack"===n&&(r=a.series&&a.series[0]&&a.series[0].stack===uD?v({stack:lD.title.tiled},lD.title):m(lD.title)),t.dispatchAction({type:"changeMagicType",currentType:n,newOption:a,newTitle:r,featureName:"magicType"})}},jf({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)})),nD("magicType",cD);var gD=ld.toolbox.dataView,pD=new Array(60).join("-");function mD(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var vD=new RegExp("[\t]+","g");function yD(e){this._dom=null,this.model=e}yD.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:m(gD.title),lang:m(gD.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},yD.prototype.onclick=function(e,t){var n=t.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var r=document.createElement("h4"),a=i.get("lang")||[];r.innerHTML=a[0]||i.get("title"),r.style.cssText="margin: 10px 20px;",r.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=i.get("optionToContent"),c=i.get("contentToOption"),d=function(e){var t=function(e){var t={},n=[],i=[];return e.eachRawSeries((function(e){var o=e.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(e);else{var r=o.getBaseAxis();if("category"===r.type){var a=r.dim+"_"+r.index;t[a]||(t[a]={categoryAxis:r,valueAxis:o.getOtherAxis(r),series:[]},i.push({axisDim:r.dim,axisIndex:r.index})),t[a].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:i}}(e);return{value:k([function(e){var t=[];return w(e,(function(e,n){var i=e.categoryAxis,o=e.valueAxis.dim,r=[" "].concat(O(e.series,(function(e){return e.name}))),a=[i.model.getCategories()];w(e.series,(function(e){a.push(e.getRawData().mapArray(o,(function(e){return e})))}));for(var s=[r.join("\t")],l=0;l<a[0].length;l++){for(var u=[],c=0;c<a.length;c++)u.push(a[c][l]);s.push(u.join("\t"))}t.push(s.join("\n"))})),t.join("\n\n"+pD+"\n\n")}(t.seriesGroupByCategoryAxis),function(e){return O(e,(function(e){var t=e.getRawData(),n=[e.name],i=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,o=arguments[e-1],r=t.getName(o),a=0;a<e-1;a++)i[a]=arguments[a];n.push((r?r+"\t":"")+i.join("\t"))})),n.join("\n")})).join("\n\n"+pD+"\n\n")}(t.other)],(function(e){return e.replace(/[\n\t\s]/g,"")})).join("\n\n"+pD+"\n\n"),meta:t.meta}}(e);if("function"==typeof u){var f=u(t.getOption());"string"==typeof f?s.innerHTML=f:z(f)&&s.appendChild(f)}else s.appendChild(l),l.readOnly=i.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=i.get("textColor"),l.style.borderColor=i.get("textareaBorderColor"),l.style.backgroundColor=i.get("textareaColor"),l.value=d.value;var h=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:0;left:0;right:0;";var p="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),v=document.createElement("div");p+=";background-color:"+i.get("buttonColor"),p+=";color:"+i.get("buttonTextColor");var y=this;function b(){n.removeChild(o),y._dom=null}We(m,"click",b),We(v,"click",(function(){var e;try{e="function"==typeof c?c(s,t.getOption()):function(e,t){var n=e.split(new RegExp("\n*"+pD+"\n*","g")),i={series:[]};return w(n,(function(e,n){if(function(e){if(0<=e.slice(0,e.indexOf("\n")).indexOf("\t"))return!0}(e)){var o=function(e){for(var t=e.split(/\n+/g),n=[],i=O(mD(t.shift()).split(vD),(function(e){return{name:e,data:[]}})),o=0;o<t.length;o++){var r=mD(t[o]).split(vD);n.push(r.shift());for(var a=0;a<r.length;a++)i[a]&&(i[a].data[o]=r[a])}return{series:i,categories:n}}(e),r=t[n],a=r.axisDim+"Axis";r&&(i[a]=i[a]||[],i[a][r.axisIndex]={data:o.categories},i.series=i.series.concat(o.series))}else o=function(e){for(var t=e.split(/\n+/g),n=mD(t.shift()),i=[],o=0;o<t.length;o++){var r,a=mD(t[o]).split(vD),s="",l=!1;r=isNaN(a[0])?(l=!0,s=a[0],a=a.slice(1),i[o]={name:s,value:[]},i[o].value):i[o]=[];for(var u=0;u<a.length;u++)r.push(+a[u]);1===r.length&&(l?i[o].value=r[0]:i[o]=r[0])}return{name:n,data:i}}(e),i.series.push(o)})),i}(l.value,h)}catch(e){throw b(),new Error("Data view format error "+e)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),b()})),m.innerHTML=a[1],v.innerHTML=a[2],v.style.cssText=p,m.style.cssText=p,i.get("readOnly")||g.appendChild(v),g.appendChild(m),o.appendChild(r),o.appendChild(s),o.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},yD.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},yD.prototype.dispose=function(e,t){this.remove(e,t)},nD("dataView",yD),jf({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var n=[];w(e.newOption.series,(function(e){var i=t.getSeriesByName(e.name)[0];if(i){var o=i.get("data");n.push({name:e.name,data:function(e,t){return O(e,(function(e,n){var i=t&&t[n];return L(i)&&!M(i)?(L(e)&&!M(e)&&(e=e.value),T({value:e},i)):e}))}(e.data,o)})}else n.push(b({type:"scatter"},e))})),t.mergeOption(T({series:n},e.newOption))}));var bD=w,TD=_,CD=N,ED=["dataToPoint","pointToData"],_D=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function xD(e,t,n){var i=this._targetInfoList=[],o={},r=wD(t,e);bD(OD,(function(e,t){n&&n.include&&!(0<=TD(n.include,t))||e(r,i,o)}))}var ID=xD.prototype;function DD(e){return e[0]>e[1]&&e.reverse(),e}function wD(e,t){return Lo(e,t,{includeMainTypes:_D})}ID.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var i=SD[e.brushType](0,n,t);e.__rangeOffset={offset:ND[e.brushType](i.values,e.range,[1,1]),xyMinMax:i.xyMinMax}}}))},ID.matchOutputRanges=function(e,t,n){bD(e,(function(e){var i=this.findTargetInfo(e,t);i&&!0!==i&&w(i.coordSyses,(function(i){var o=SD[e.brushType](1,i,e.range);n(e,o.values,i,t)}))}),this)},ID.setInputRanges=function(e,t){bD(e,(function(e){var n=this.findTargetInfo(e,t);if(e.range=e.range||[],n&&!0!==n){e.panelId=n.panelId;var i=SD[e.brushType](0,n.coordSys,e.coordRange),o=e.__rangeOffset;e.range=o?ND[e.brushType](i.values,o.offset,function(e,t){var n=KD(e),i=KD(t),o=[n[0]/i[0],n[1]/i[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}(i.xyMinMax,o.xyMinMax)):i.values}}),this)},ID.makePanelOpts=function(e,t){return O(this._targetInfoList,(function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t&&t(n),clipPath:sE(i),isTargetByCursor:uE(i,e,n.coordSysModel),getLinearBrushOtherExtent:lE(i)}}))},ID.controlSeries=function(e,t,n){var i=this.findTargetInfo(e,n);return!0===i||i&&0<=TD(i.coordSyses,t.coordinateSystem)},ID.findTargetInfo=function(e,t){for(var n=this._targetInfoList,i=wD(t,e),o=0;o<n.length;o++){var r=n[o],a=e.panelId;if(a){if(r.panelId===a)return r}else for(o=0;o<RD.length;o++)if(RD[o](i,r))return r}return!0};var OD={grid:function(e,t){var n=e.xAxisModels,i=e.yAxisModels,o=e.gridModels,r=Q(),a={},s={};(n||i||o)&&(bD(n,(function(e){var t=e.axis.grid.model;r.set(t.id,t),a[t.id]=!0})),bD(i,(function(e){var t=e.axis.grid.model;r.set(t.id,t),s[t.id]=!0})),bD(o,(function(e){r.set(e.id,e),a[e.id]=!0,s[e.id]=!0})),r.each((function(e){var o=[];bD(e.coordinateSystem.getCartesians(),(function(e,t){(0<=TD(n,e.getAxis("x").model)||0<=TD(i,e.getAxis("y").model))&&o.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:o[0],coordSyses:o,getPanelRect:kD.grid,xAxisDeclared:a[e.id],yAxisDeclared:s[e.id]})})))},geo:function(e,t){bD(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:kD.geo})}))}},RD=[function(e,t){var n=e.xAxisModel,i=e.yAxisModel,o=e.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&i&&(o=i.axis.grid.model),o&&o===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],kD={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Us(e)),t}},SD={lineX:CD(AD,0),lineY:CD(AD,1),rect:function(e,t,n){var i=t[ED[e]]([n[0][0],n[1][0]]),o=t[ED[e]]([n[0][1],n[1][1]]),r=[DD([i[0],o[0]]),DD([i[1],o[1]])];return{values:r,xyMinMax:r}},polygon:function(e,t,n){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:O(n,(function(n){var o=t[ED[e]](n);return i[0][0]=Math.min(i[0][0],o[0]),i[1][0]=Math.min(i[1][0],o[1]),i[0][1]=Math.max(i[0][1],o[0]),i[1][1]=Math.max(i[1][1],o[1]),o})),xyMinMax:i}}};function AD(e,t,n,i){var o=n.getAxis(["x","y"][e]),r=DD(O([0,1],(function(e){return t?o.coordToData(o.toLocalCoord(i[e])):o.toGlobalCoord(o.dataToCoord(i[e]))}))),a=[];return a[e]=r,a[1-e]=[NaN,NaN],{values:r,xyMinMax:a}}var ND={lineX:CD(MD,0),lineY:CD(MD,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return O(e,(function(e,i){return[e[0]-n[0]*t[i][0],e[1]-n[1]*t[i][1]]}))}};function MD(e,t,n,i){return[t[0]-i[e]*n[0],t[1]-i[e]*n[1]]}function KD(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var PD=w,LD="\0_ec_hist_store";function BD(e){return e[LD]||(e[LD]=[{}])}uu.registerSubTypeDefaulter("dataZoom",(function(){return"slider"}));var FD,zD,HD,VD,WD=["cartesian2d","polar","singleAxis"],$D=(zD=["axisIndex","axis","index","id"],HD=O(FD=(FD=["x","y","z","radius","angle","single"]).slice(),ql),VD=O(zD=(zD||[]).slice(),ql),function(e,t){w(FD,(function(n,i){for(var o={name:n,capital:HD[i]},r=0;r<zD.length;r++)o[zD[r]]=n+VD[r];e.call(t,o)}))});function qD(e,t,n,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=n}var UD=w,jD=ml;function GD(e,t){var n=e.getAxisModel(),i=e._percentWindow,o=e._valueWindow;if(i){var r=bl(o,[0,500]);r=Math.min(r,20);var a=t||0===i[0]&&100===i[1];n.setRange(a?null:+o[0].toFixed(r),a?null:+o[1].toFixed(r))}}qD.prototype={constructor:qD,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries((function(n){if(function(e){return 0<=_(WD,e)}(n.get("coordinateSystem"))){var i=this._dimName,o=t.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(o&&o.componentIndex)&&e.push(n)}}),this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,n,i=this._dimName,o=this.ecModel,r=this.getAxisModel();return e="x"===i||"y"===i?(t="gridIndex","x"===i?"y":"x"):(t="polarIndex","angle"===i?"radius":"angle"),o.eachComponent(e+"Axis",(function(e){(e.get(t)||0)===(r.get(t)||0)&&(n=e)})),n},getMinMaxSpan:function(){return m(this._minMaxSpan)},calculateDataWindow:function(e){var t,n=this._dataExtent,i=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),r=[0,100],a=[],s=[];UD(["start","end"],(function(l,u){var c=e[l],d=e[l+"Value"];"percent"===o[u]?(null==c&&(c=r[u]),d=i.parse(hl(c,r,n))):(t=!0,c=hl(d=null==d?n[u]:i.parse(d),n,r)),s[u]=d,a[u]=c})),jD(s),jD(a);var l=this._minMaxSpan;function u(e,t,n,o,r){var a=r?"Span":"ValueSpan";lC(0,e,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)t[s]=hl(e[s],n,o,!0),r&&(t[s]=i.parse(t[s]))}return t?u(s,a,n,r,!1):u(a,s,r,n,!0),{valueWindow:s,percentWindow:a}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var i=[1/0,-1/0];return UD(n,(function(e){var n=e.getData();n&&UD(n.mapDimension(t,!0),(function(e){var t=n.getApproximateExtent(e);t[0]<i[0]&&(i[0]=t[0]),t[1]>i[1]&&(i[1]=t[1])}))})),i[1]<i[0]&&(i=[NaN,NaN]),function(e,t){var n=e.getAxisModel(),i=n.getMin(!0),o="category"===n.get("type"),r=o&&n.getCategories().length;null!=i&&"dataMin"!==i&&"function"!=typeof i?t[0]=i:o&&(t[0]=0<r?0:NaN);var a=n.getMax(!0);null!=a&&"dataMax"!==a&&"function"!=typeof a?t[1]=a:o&&(t[1]=0<r?r-1:NaN),n.get("scale",!0)||(0<t[0]&&(t[0]=0),t[1]<0&&(t[1]=0))}(e,i),i}(this,this._dimName,t),function(e){var t=e._minMaxSpan={},n=e._dataZoomModel,i=e._dataExtent;UD(["min","max"],(function(o){var r=n.get(o+"Span"),a=n.get(o+"ValueSpan");null!=a&&(a=e.getAxisModel().axis.scale.parse(a)),null!=a?r=hl(i[0]+a,i,[0,100],!0):null!=r&&(a=hl(r,[0,100],i,!0)-i[0]),t[o+"Span"]=r,t[o+"ValueSpan"]=a}))}(this);var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,GD(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,GD(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=e.get("filterMode"),r=this._valueWindow;"none"!==o&&UD(i,(function(e){var t=e.getData(),i=t.mapDimension(n,!0);i.length&&("weakFilter"===o?t.filterSelf((function(e){for(var n,o,a,s=0;s<i.length;s++){var l=t.get(i[s],e),u=!isNaN(l),c=l<r[0],d=l>r[1];if(u&&!c&&!d)return!0;u&&(a=!0),c&&(n=!0),d&&(o=!0)}return a&&n&&o})):UD(i,(function(n){if("empty"===o)e.setData(t=t.map(n,(function(e){return function(e){return e>=r[0]&&e<=r[1]}(e)?e:NaN})));else{var i={};i[n]=r,t.selectRange(i)}})),UD(i,(function(e){t.setApproximateExtent(r,e)})))}))}}};var XD=w,YD=$D,ZD=Qf({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var i=JD(e);this.settledOption=i,this.mergeDefaultAndTheme(e,n),this.doInit(i)},mergeOption:function(e){var t=JD(e);v(this.option,e,!0),v(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;o.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),QD(this,e);var n=this.settledOption;XD([["start","startValue"],["end","endValue"]],(function(e,i){"value"===this._rangePropMode[i]&&(t[e[0]]=n[e[0]]=null)}),this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis((function(t,n,i,o){var r=this.dependentModels[t.axis][n],a=r.__dzAxisProxy||(r.__dzAxisProxy=new qD(t.name,n,this,o));e[t.name+"_"+n]=a}),this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();YD((function(t){var n=t.axisIndex;e[n]=Do(e[n])}),this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;YD((function(n){null!=e[n.axisIndex]&&(t=!0)}),this);var n=e.orient;return null==n&&t?"orient":t?void 0:(null==n&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),n=this.option,i=this.dependentModels;if(e){var o="vertical"===t?"y":"x";i[o+"Axis"].length?(n[o+"AxisIndex"]=[0],e=!1):XD(i.singleAxis,(function(i){e&&i.get("orient",!0)===t&&(n.singleAxisIndex=[i.componentIndex],e=!1)}))}e&&YD((function(t){if(e){var i=[],o=this.dependentModels[t.axis];if(o.length&&!i.length)for(var r=0,a=o.length;r<a;r++)"category"===o[r].get("type")&&i.push(r);(n[t.axisIndex]=i).length&&(e=!1)}}),this),e&&this.ecModel.eachSeries((function(e){this._isSeriesHasAllAxesTypeOf(e,"value")&&YD((function(t){var i=n[t.axisIndex],o=e.get(t.axisIndex),r=e.get(t.axisId);_(i,o=e.ecModel.queryComponents({mainType:t.axis,index:o,id:r})[0].componentIndex)<0&&i.push(o)}))}),this)},_autoSetOrient:function(){var e;this.eachTargetAxis((function(t){e=e||t.name}),this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var n=!0;return YD((function(i){var o=e.get(i.axisIndex),r=this.dependentModels[i.axis][o];r&&r.get("type")===t||(n=!1)}),this),n},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&0<t.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var e;return YD((function(t){if(null==e){var n=this.get(t.axisIndex);n.length&&(e=this.dependentModels[t.axis][n[0]])}}),this),e},eachTargetAxis:function(e,t){var n=this.ecModel;YD((function(i){XD(this.get(i.axisIndex),(function(o){e.call(t,i,o,this,n)}),this)}),this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var n=this.getAxisProxy(e,t);return n&&n.getAxisModel()},setRawRange:function(e){var t=this.option,n=this.settledOption;XD([["start","startValue"],["end","endValue"]],(function(i){null==e[i[0]]&&null==e[i[1]]||(t[i[0]]=n[i[0]]=e[i[0]],t[i[1]]=n[i[1]]=e[i[1]])}),this),QD(this,e)},setCalculatedRange:function(e){var t=this.option;XD(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var n in t)if(t.hasOwnProperty(n)&&t[n].hostedBy(this))return t[n];for(var n in t)if(t.hasOwnProperty(n)&&!t[n].hostedBy(this))return t[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function JD(e){var t={};return XD(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}function QD(e,t){var n=e._rangePropMode,i=e.get("rangeMode");XD([["start","startValue"],["end","endValue"]],(function(e,o){var r=null!=t[e[0]],a=null!=t[e[1]];r&&!a?n[o]="percent":!r&&a?n[o]="value":i?n[o]=i[o]:r&&(n[o]="percent")}))}var ew=Wc.extend({type:"dataZoom",render:function(e,t,n,i){this.dataZoomModel=e,this.ecModel=t,this.api=n},getTargetCoordInfo:function(){var e=this.ecModel,t={};return this.dataZoomModel.eachTargetAxis((function(n,i){var o=e.getComponent(n.axis,i);if(o){var r=o.getCoordSysModel();r&&function(e,t,n,i){for(var o,r=0;r<n.length;r++)if(n[r].model===e){o=n[r];break}o||n.push(o={model:e,axisModels:[],coordIndex:i}),o.axisModels.push(t)}(r,o,t[r.mainType]||(t[r.mainType]=[]),r.componentIndex)}}),this),t}});ZD.extend({type:"dataZoom.select"}),ew.extend({type:"dataZoom.select"}),Uf({getTargetSeries:function(e){var t=Q();return e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(e,n,i){w(i.getAxisProxy(e.name,n).getTargetSeriesModels(),(function(e){t.set(e.uid,e)}))}))})),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(e,n,i){i.getAxisProxy(e.name,n).reset(i,t)})),e.eachTargetAxis((function(e,n,i){i.getAxisProxy(e.name,n).filterData(i,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy(),n=t.getDataPercentWindow(),i=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}))}}),jf("dataZoom",(function(e,t){var n=function(e,t,n){return function(o){var r,a={nodes:[],records:{}};if(t((function(e){a.records[e.name]={}})),!o)return a;for(i(o,a);r=!1,e(s),r;);function s(e){!function(e,t){return 0<=_(t.nodes,e)}(e,a)&&function(e,i){var o=!1;return t((function(t){w(n(e,t)||[],(function(e){i.records[t.name][e]&&(o=!0)}))})),o}(e,a)&&(i(e,a),r=!0)}return a};function i(e,i){i.nodes.push(e),t((function(t){w(n(e,t)||[],(function(e){i.records[t.name][e]=!0}))}))}}(A(t.eachComponent,t,"dataZoom"),$D,(function(e,t){return e.get(t.axisIndex)})),i=[];t.eachComponent({mainType:"dataZoom",query:e},(function(e,t){i.push.apply(i,n(e).nodes)})),w(i,(function(t,n){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}));var tw=w;function nw(e,t,n){(this._brushController=new SC(n.getZr())).on("brush",A(this._onBrush,this)).mount()}nw.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:m(ld.toolbox.dataZoom.title)};var iw=nw.prototype;iw.render=function(e,t,n,i){this.model=e,this.ecModel=t,this.api=n,function(e,t,n,i,o){var r=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(r="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=r,e.setIconStatus("zoom",r?"emphasis":"normal");var a=new xD(rw(e.option),t,{include:["grid"]});n._brushController.setPanels(a.makePanelOpts(o,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}))).enableBrush(!!r&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}(e,t,this,i,n),function(e,t){e.setIconStatus("back",1<function(e){return BD(e).length}(t)?"emphasis":"normal")}(e,t)},iw.onclick=function(e,t,n){ow[n].call(this)},iw.remove=function(e,t){this._brushController.unmount()},iw.dispose=function(e,t){this._brushController.dispose()};var ow={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(e){var t=BD(e),n=t[t.length-1];1<t.length&&t.pop();var i={};return PD(n,(function(e,n){for(var o=t.length-1;0<=o;o--)if(e=t[o][n]){i[n]=e;break}})),i}(this.ecModel))}};function rw(e){var t={};return w(["xAxisIndex","yAxisIndex"],(function(n){t[n]=e[n],null==t[n]&&(t[n]="all"),!1!==t[n]&&"none"!==t[n]||(t[n]=[])})),t}function aw(e){this.model=e}iw._onBrush=function(e,t){if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new xD(rw(this.model.option),i,{include:["grid"]}).matchOutputRanges(e,i,(function(e,t,n){if("cartesian2d"===n.type){var i=e.brushType;"rect"===i?(o("x",n,t[0]),o("y",n,t[1])):o({lineX:"x",lineY:"y"}[i],n,t)}})),function(e,t){var n=BD(e);PD(t,(function(t,i){for(var o=n.length-1;0<=o&&!n[o][i];o--);if(o<0){var r=e.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(r){var a=r.getPercentRange();n[0][i]={dataZoomId:i,start:a[0],end:a[1]}}}})),n.push(t)}(i,n),this._dispatchZoomAction(n)}function o(e,t,o){var r=t.getAxis(e),a=r.model,s=function(e,t,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(i=n)})),i}(e,a,i),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=lC(0,o.slice(),r.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}},iw._dispatchZoomAction=function(e){var t=[];tw(e,(function(e,n){t.push(m(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},nD("dataZoom",nw),qf((function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);M(t)||(e.dataZoom=t=[t]);var n=e.toolbox;if(n&&(M(n)&&(n=n[0]),n&&n.feature)){var i=n.feature.dataZoom;o("xAxis",i),o("yAxis",i)}}function o(n,i){if(i){var o=n+"Index",r=i[o];null==r||"all"===r||M(r)||(r=!1===r||"none"===r?[]:[r]),function(a,s){var l=e[a];M(l)||(l=l?[l]:[]),tw(l,(function(e,a){if(null==r||"all"===r||-1!==_(r,a)){var s={type:"select",$fromToolbox:!0,filterMode:i.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+n+a};s[o]=a,t.push(s)}}))}(n)}}})),aw.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:ld.toolbox.restore.title},aw.prototype.onclick=function(e,t,n){!function(e){e[LD]=null}(e),t.dispatchAction({type:"restore",from:this.uid})},nD("restore",aw),jf({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")})),Qf({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var sw=w,lw=Nl,uw=["","-webkit-","-moz-","-o-"];function cw(e,t,n,i,o){var r=t&&t.painter;if(n){var a=r&&r.getViewportRoot();a&&function(e,t,n,i,o){Me(Ne,t,i,o,!0)&&Me(e,n,Ne[0],Ne[1])}(e,a,document.body,i,o)}else{e[0]=i,e[1]=o;var s=r&&r.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}}function dw(e,t,n){if(o.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=t.getZr(),a=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0],cw(this._styleCoord,r,a,t.getWidth()/2,t.getHeight()/2),a?document.body.appendChild(i):e.appendChild(i),this._container=e,this._show=!1;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(e){if(e=e||window.event,!s._enterable){var t=r.handler;Ve(r.painter.getViewportRoot(),e,!0),t.dispatch("mousemove",e)}},i.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}function fw(e){this._zr=e.getZr(),this._show=!1}dw.prototype={constructor:dw,_enterable:!0,update:function(){var e=this._container,t=e.currentStyle||document.defaultView.getComputedStyle(e),n=e.style;"absolute"!==n.position&&"absolute"!==t.position&&(n.position="relative")},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,n=this._styleCoord;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(e){var t=[],n=e.get("transitionDuration"),i=e.get("backgroundColor"),r=e.getModel("textStyle"),a=e.get("padding");return n&&t.push(function(e){var t="cubic-bezier(0.23, 1, 0.32, 1)",n="left "+e+"s "+t+",top "+e+"s "+t;return O(uw,(function(e){return e+"transition:"+n})).join(";")}(n)),i&&(o.canvasSupported?t.push("background-Color:"+i):(t.push("background-Color:#"+Ht(i)),t.push("filter:alpha(opacity=70)"))),sw(["width","color","radius"],(function(n){var i="border-"+n,o=lw(i),r=e.get(o);null!=r&&t.push(i+":"+r+("color"===n?"":"px"))})),t.push(function(e){var t=[],n=e.get("fontSize"),i=e.getTextColor();return i&&t.push("color:"+i),t.push("font:"+e.getFont()),n&&t.push("line-height:"+Math.round(3*n/2)+"px"),sw(["decoration","align"],(function(n){var i=e.get(n);i&&t.push("text-"+n+":"+i)})),t.join(";")}(r)),null!=a&&t.push("padding:"+Ml(a).join("px ")+"px"),t.join(";")+";"}(e)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var n=this._styleCoord;cw(n,this._zr,this._appendToBody,e,t);var i=this.el.style;i.left=n[0]+"px",i.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(A(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(e+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),t+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:e,height:t}}},fw.prototype={constructor:fw,_enterable:!0,update:function(){},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,n){this.el&&this._zr.remove(this.el);for(var i={},o=e,r="{marker",a=o.indexOf(r);0<=a;){var s=o.indexOf("|}"),l=o.substr(a+r.length,s-a-r.length);i["marker"+l]=-1<l.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[l],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[l]},a=(o=o.substr(s+1)).indexOf("{marker")}this.el=new Da({style:{rich:i,text:e,textLineHeight:20,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding")},z:n.get("z")}),this._zr.add(this.el);var u=this;this.el.on("mouseover",(function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0})),this.el.on("mouseout",(function(){u._enterable&&u._show&&u.hideLater(u._hideDelay),u._inContent=!1}))},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){this.el&&this.el.attr("position",[e,t])},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(A(this.hide,this),e)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var hw=A,gw=w,pw=gl,mw=new Ha({shape:{x:-1,y:-1,width:2,height:2}});function vw(e){for(var t=e.pop();e.length;){var n=e.pop();n&&(ll.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),t=new ll(n,t,t.ecModel))}return t}function yw(e,t){return e.dispatchAction||A(t.dispatchAction,t)}function bw(e){return"center"===e||"middle"===e}eh({type:"tooltip",init:function(e,t){if(!o.node){var n,i=e.getComponent("tooltip"),r=i.get("renderMode");this._renderMode=zo(r),"html"===this._renderMode?(n=new dw(t.getDom(),t,{appendToBody:i.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new fw(t),this._newLine="\n"),this._tooltipContent=n}},render:function(e,t,n){if(!o.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var i=this._tooltipContent;i.update(),i.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel.get("triggerOn");bx("itemTooltip",this._api,hw((function(t,n,i){"none"!==e&&(0<=e.indexOf(t)?this._tryShow(n,i):"leave"===t&&this._hide(i))}),this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){n.isDisposed()||i.manuallyShowTip(e,t,n,{x:i._lastX,y:i._lastY})}))}},manuallyShowTip:function(e,t,n,i){if(i.from!==this.uid&&!o.node){var r=yw(i,n);this._ticket="";var a=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var s=mw;s.position=[i.x,i.y],s.update(),s.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:s},r)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,i))return;var l=lx(i,t),u=l.point[0],c=l.point[1];null!=u&&null!=c&&this._tryShow({offsetX:u,offsetY:c,position:i.position,target:l.el},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},r))}},manuallyHideTip:function(e,t,n,i){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(yw(i,n))},_manuallyAxisShowTip:function(e,t,n,i){var o=i.seriesIndex,r=i.dataIndex,a=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=r&&null!=a){var s=t.getSeriesByIndex(o);if(s&&"axis"===(e=vw([s.getData().getItemModel(r),s,(s.coordinateSystem||{}).model,e])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:r,position:i.position}),!0}},_tryShow:function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var i=e.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,e):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,n,t)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,n,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var n=e.get("showDelay");t=A(t,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(t,n):t()},_showAxisTooltip:function(e,t){var n=this._ecModel,i=[t.offsetX,t.offsetY],o=[],r=[],a=vw([t.tooltipOption,this._tooltipModel]),s=this._renderMode,l=this._newLine,u={};gw(e,(function(e){gw(e.dataByAxis,(function(e){var t=n.getComponent(e.axisDim+"Axis",e.axisIndex),i=e.value,a=[];if(t&&null!=i){var c=Kx(i,t.axis,n,e.seriesDataIndices,e.valueLabelOpt);w(e.seriesDataIndices,(function(o){var l=n.getSeriesByIndex(o.seriesIndex),d=o.dataIndexInside,f=l&&l.getDataParams(d);if(f.axisDim=e.axisDim,f.axisIndex=e.axisIndex,f.axisType=e.axisType,f.axisId=e.axisId,f.axisValue=Mg(t.axis,i),f.axisValueLabel=c,f){r.push(f);var h,g=l.formatTooltip(d,!0,null,s);L(g)?(h=g.html,v(u,g.markers)):h=g,a.push(h)}}));var d=c;o.push("html"!==s?a.join(l):(d?Ll(d)+l:"")+a.join(l))}}))}),this),o.reverse(),o=o.join(this._newLine+this._newLine);var c=t.position;this._showOrMove(a,(function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(a,c,i[0],i[1],this._tooltipContent,r):this._showTooltipContent(a,o,r,Math.random(),i[0],i[1],c,void 0,u)}))},_showSeriesItemTooltip:function(e,t,n){var i=t.seriesIndex,o=this._ecModel.getSeriesByIndex(i),r=t.dataModel||o,a=t.dataIndex,s=t.dataType,l=r.getData(s),u=vw([l.getItemModel(a),r,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),c=u.get("trigger");if(null==c||"item"===c){var d,f,h=r.getDataParams(a,s),g=r.formatTooltip(a,!1,s,this._renderMode);f=L(g)?(d=g.html,g.markers):(d=g,null);var p="item_"+r.name+"_"+a;this._showOrMove(u,(function(){this._showTooltipContent(u,d,h,p,e.offsetX,e.offsetY,e.position,e.target,f)})),n({type:"showTip",dataIndexInside:a,dataIndex:l.getRawIndex(a),seriesIndex:i,from:this.uid})}},_showComponentItemTooltip:function(e,t,n){var i=t.tooltip;"string"==typeof i&&(i={content:i,formatter:i});var o=new ll(i,this._tooltipModel,this._ecModel),r=o.get("content"),a=Math.random();this._showOrMove(o,(function(){this._showTooltipContent(o,r,o.get("formatterParams")||{},a,e.offsetX,e.offsetY,e.position,t)})),n({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,n,i,o,r,a,s,l){if(this._ticket="",e.get("showContent")&&e.get("show")){var u=this._tooltipContent,c=e.get("formatter");a=a||e.get("position");var d=t;if(c&&"string"==typeof c)d=zl(c,n,!0);else if("function"==typeof c){var f=hw((function(t,i){t===this._ticket&&(u.setContent(i,l,e),this._updatePosition(e,a,o,r,u,n,s))}),this);this._ticket=i,d=c(n,i,f)}u.setContent(d,l,e),u.show(e),this._updatePosition(e,a,o,r,u,n,s)}},_updatePosition:function(e,t,n,i,o,r,a){var s=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var u=o.getSize(),c=e.get("align"),d=e.get("verticalAlign"),f=a&&a.getBoundingRect().clone();if(a&&f.applyTransform(a.transform),"function"==typeof t&&(t=t([n,i],r,o.el,f,{viewSize:[s,l],contentSize:u.slice()})),M(t))n=pw(t[0],s),i=pw(t[1],l);else if(L(t)){t.width=u[0],t.height=u[1];var h=eu(t,{width:s,height:l});n=h.x,i=h.y,d=c=null}else if("string"==typeof t&&a)n=(g=function(e,t,n){var i=n[0],o=n[1],r=0,a=0,s=t.width,l=t.height;switch(e){case"inside":r=t.x+s/2-i/2,a=t.y+l/2-o/2;break;case"top":r=t.x+s/2-i/2,a=t.y-o-5;break;case"bottom":r=t.x+s/2-i/2,a=t.y+l+5;break;case"left":r=t.x-i-5,a=t.y+l/2-o/2;break;case"right":r=t.x+s+5,a=t.y+l/2-o/2}return[r,a]}(t,f,u))[0],i=g[1];else{var g;n=(g=function(e,t,n,i,o,r,a){var s=n.getOuterSize(),l=s.width,u=s.height;return null!=r&&(i<e+l+r?e-=l+r:e+=r),null!=a&&(o<t+u+a?t-=u+a:t+=a),[e,t]}(n,i,o,s,l,c?null:20,d?null:20))[0],i=g[1]}c&&(n-=bw(c)?u[0]/2:"right"===c?u[0]:0),d&&(i-=bw(d)?u[1]/2:"bottom"===d?u[1]:0),e.get("confine")&&(n=(g=function(e,t,n,i,o){var r=n.getOuterSize(),a=r.width,s=r.height;return e=Math.min(e+a,i)-a,t=Math.min(t+s,o)-s,[e=Math.max(e,0),t=Math.max(t,0)]}(n,i,o,s,l))[0],i=g[1]),o.moveTo(n,i)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,n=!!t&&t.length===e.length;return n&&gw(t,(function(t,i){var o=t.dataByAxis||{},r=(e[i]||{}).dataByAxis||[];(n&=o.length===r.length)&&gw(o,(function(e,t){var i=r[t]||{},o=e.seriesDataIndices||[],a=i.seriesDataIndices||[];(n&=e.value===i.value&&e.axisType===i.axisType&&e.axisId===i.axisId&&o.length===a.length)&&gw(o,(function(e,t){var i=a[t];n&=e.seriesIndex===i.seriesIndex&&e.dataIndex===i.dataIndex}))}))})),this._lastDataByCoordSys=e,!!n},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){o.node||(this._tooltipContent.dispose(),Ex("itemTooltip",t))}}),jf({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),jf({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}));var Tw=["rect","polygon","keep","clear"],Cw=w;function Ew(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function _w(e,t,n){var i={};return Cw(t,(function(t){var o=i[t]=function(){function e(){}return e.prototype.__hidden=e.prototype,new e}();Cw(e[t],(function(e,i){if(Ob.isValidType(i)){var r={type:i,visual:e};n&&n(r,t),o[i]=new Ob(r),"opacity"===i&&((r=m(r)).type="colorAlpha",o.__hidden.__alphaForOpacity=new Ob(r))}}))})),i}function xw(e,t,n){var i;w(n,(function(e){t.hasOwnProperty(e)&&Ew(t[e])&&(i=!0)})),i&&w(n,(function(n){t.hasOwnProperty(n)&&Ew(t[n])?e[n]=m(t[n]):delete e[n]}))}var Iw={lineX:Dw(0),lineY:Dw(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&Xg(n.range,e[0],e[1])},rect:function(e,t,n){var i=n.range;if(!e||i.length<=1)return!1;var o=e.x,r=e.y,a=e.width,s=e.height,l=i[0];return!!(Xg(i,o,r)||Xg(i,o+a,r)||Xg(i,o,r+s)||Xg(i,o+a,r+s)||En.create(e).contain(l[0],l[1])||Js(o,r,o+a,r,i)||Js(o,r,o,r+s,i)||Js(o+a,r,o+a,r+s,i)||Js(o,r+s,o+a,r+s,i))||void 0}}};function Dw(e){var t=["x","y"],n=["width","height"];return{point:function(t,n,i){if(t)return ww(t[e],i.range)},rect:function(i,o,r){if(i){var a=r.range,s=[i[t[e]],i[t[e]]+i[n[e]]];return s[1]<s[0]&&s.reverse(),ww(s[0],a)||ww(s[1],a)||ww(a[0],s)||ww(a[1],s)}}}}function ww(e,t){return t[0]<=e&&e<=t[1]}var Ow=["inBrush","outOfBrush"],Rw="__ecBrushSelect",kw="__ecInBrushSelectEvent",Sw=of.VISUAL.BRUSH;function Aw(e){e.eachComponent({mainType:"brush"},(function(t){(t.brushTargetManager=new xD(t.option,e)).setInputRanges(t.areas,e)}))}function Nw(e,t){if(!e.isDisposed()){var n=e.getZr();n[kw]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[kw]=!1}}function Mw(e,t,n,i){for(var o=0,r=t.length;o<r;o++){var a=t[o];if(e[a.brushType](i,n,a.selectors,a))return!0}}function Kw(e){var t=e.brushSelector;if(P(t)){var n=[];return w(Iw,(function(e,i){n[i]=function(n,i,o,r){var a=i.getItemLayout(n);return e[t](a,o,r)}})),n}if(K(t)){var i={};return w(Iw,(function(e,n){i[n]=t})),i}return t}Xf(Sw,(function(e,t,n){e.eachComponent({mainType:"brush"},(function(e){n&&"takeGlobalCursor"===n.type&&e.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})})),Aw(e)})),Yf(Sw,(function(e,t,n){var i,o,r=[];e.eachComponent({mainType:"brush"},(function(t,n){var a={brushId:t.id,brushIndex:n,brushName:t.name,areas:m(t.areas),selected:[]};r.push(a);var s=t.option,l=s.brushLink,u=[],c=[],d=[],f=0;n||(i=s.throttleType,o=s.throttleDelay);var h=O(t.areas,(function(e){return function(e){var t=e.selectors={};return w(Iw[e.brushType],(function(n,i){t[i]=function(i){return n(i,t,e)}})),e}(T({boundingRect:Pw[e.brushType](e)},e))})),g=_w(t.option,Ow,(function(e){e.mappingMethod="fixed"}));function p(e){return"all"===l||u[e]}function v(e){return!!e.length}M(l)&&w(l,(function(e){u[e]=1})),e.eachSeries((function(n,i){var o=d[i]=[];"parallel"===n.subType?function(e,t){var n=e.coordinateSystem;f|=n.hasAxisBrushed(),p(t)&&n.eachActiveState(e.getData(),(function(e,t){"active"===e&&(c[t]=1)}))}(n,i):function(n,i,o){var r=Kw(n);if(r&&!function(e,t){var n=e.option.seriesIndex;return null!=n&&"all"!==n&&(M(n)?_(n,t)<0:t!==n)}(t,i)&&(w(h,(function(i){r[i.brushType]&&t.brushTargetManager.controlSeries(i,n,e)&&o.push(i),f|=v(o)})),p(i)&&v(o))){var a=n.getData();a.each((function(e){Mw(r,o,a,e)&&(c[e]=1)}))}}(n,i,o)})),e.eachSeries((function(e,t){var n={seriesId:e.id,seriesIndex:t,seriesName:e.name,dataIndex:[]};a.selected.push(n);var i=Kw(e),o=d[t],r=e.getData(),s=p(t)?function(e){return c[e]?(n.dataIndex.push(r.getRawIndex(e)),"inBrush"):"outOfBrush"}:function(e){return Mw(i,o,r,e)?(n.dataIndex.push(r.getRawIndex(e)),"inBrush"):"outOfBrush"};(p(t)?f:v(o))&&function(e,t,n,i,o,r){var a,s={};function l(e){return n.getItemVisual(a,e)}function u(e,t){n.setItemVisual(a,e,t)}w(e,(function(e){var n=Ob.prepareVisualTypes(t[e]);s[e]=n})),n.each((function(e,o){var r=n.getRawDataItem(a=e);if(!r||!1!==r.visualMap)for(var c=i.call(void 0,e),d=t[c],f=s[c],h=0,g=f.length;h<g;h++){var p=f[h];d[p]&&d[p].applyVisual(e,l,u)}}))}(Ow,g,r,s)}))})),function(e,t,n,i,o){if(o){var r=e.getZr();r[kw]||(r[Rw]||(r[Rw]=Nw),rd(r,Rw,n,t)(e,i))}}(t,i,o,r,n)}));var Pw={lineX:te,lineY:te,rect:function(e){return Lw(e.range)},polygon:function(e){for(var t,n=e.range,i=0,o=n.length;i<o;i++){var r=n[i];r[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=r[0]),r[0]>t[0][1]&&(t[0][1]=r[0]),r[1]<t[1][0]&&(t[1][0]=r[1]),r[1]>t[1][1]&&(t[1][1]=r[1])}return t&&Lw(t)}};function Lw(e){return new En(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var Bw=["#ddd"];function Fw(e,t){return v({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new ll(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function zw(e,t,n,i){i&&i.$from===e.id||this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}function Hw(e,t,n){this.model=e,this.ecModel=t,this.api=n}Qf({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var n=this.option;t||xw(n,e,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:Bw},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(e){e&&(this.areas=O(e,(function(e){return Fw(this.option,e)}),this))},setBrushOption:function(e){this.brushOption=Fw(this.option,e),this.brushType=this.brushOption.brushType}}),eh({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,(this._brushController=new SC(t.getZr())).on("brush",A(this._onBrush,this)).mount()},render:function(e){return this.model=e,zw.apply(this,arguments)},updateTransform:function(e,t){return Aw(t),zw.apply(this,arguments)},updateView:zw,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:m(e),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:m(e),$from:n})}}),jf({type:"brush",event:"brush"},(function(e,t){t.eachComponent({mainType:"brush",query:e},(function(t){t.setAreas(e.areas)}))})),jf({type:"brushSelect",event:"brushSelected",update:"none"},(function(){})),jf({type:"brushEnd",event:"brushEnd",update:"none"},(function(){})),Hw.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:m(ld.toolbox.brush.title)};var Vw=Hw.prototype;function Ww(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),i=e.label||e.label||{},o=i.normal||(i.normal={}),r={normal:1,emphasis:1};w(i,(function(e,t){r[t]||$w(o,t)||(o[t]=e)})),n.label&&!$w(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function $w(e,t){return e.hasOwnProperty(t)}Vw.render=Vw.updateView=function(e,t,n){var i,o,r;t.eachComponent({mainType:"brush"},(function(e){i=e.brushType,o=e.brushOption.brushMode||"single",r|=e.areas.length})),this._brushType=i,this._brushMode=o,w(e.get("type",!0),(function(t){e.setIconStatus(t,("keep"===t?"multiple"===o:"clear"===t?r:t===i)?"emphasis":"normal")}))},Vw.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return w(e.get("type",!0),(function(e){t[e]&&(n[e]=t[e])})),n},Vw.onclick=function(e,t,n){var i=this._brushType,o=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},nD("brush",Hw),qf((function(e,t){var n=e&&e.brush;if(M(n)||(n=n?[n]:[]),n.length){var i=[];w(n,(function(e){var t=e.hasOwnProperty("toolbox")?e.toolbox:[];t instanceof Array&&(i=i.concat(t))}));var o=e&&e.toolbox;M(o)&&(o=o[0]),o||(e.toolbox=[o={feature:{}}]);var r=o.feature||(o.feature={}),a=r.brush||(r.brush={}),s=a.type||(a.type=[]);s.push.apply(s,i),function(e){var t={};w(e,(function(e){t[e]=1})),e.length=0,w(t,(function(t,n){e.push(n)}))}(s),t&&!s.length&&s.push.apply(s,Tw)}})),Qf({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),eh({type:"title",render:function(e,t,n){if(this.group.removeAll(),e.get("show")){var i=this.group,o=e.getModel("textStyle"),r=e.getModel("subtextStyle"),a=e.get("textAlign"),s=W(e.get("textBaseline"),e.get("textVerticalAlign")),l=new Da({style:Ps({},o,{text:e.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),c=e.get("subtext"),d=new Da({style:Ps({},r,{text:c,textFill:r.getTextColor(),y:u.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),f=e.get("link"),h=e.get("sublink"),g=e.get("triggerEvent",!0);l.silent=!f&&!g,d.silent=!h&&!g,f&&l.on("click",(function(){jl(f,"_"+e.get("target"))})),h&&d.on("click",(function(){jl(f,"_"+e.get("subtarget"))})),l.eventData=d.eventData=g?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(l),c&&i.add(d);var p=i.getBoundingRect(),m=e.getBoxLayoutParams();m.width=p.width,m.height=p.height;var v=eu(m,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));a||("middle"===(a=e.get("left")||e.get("right"))&&(a="center"),"right"===a?v.x+=v.width:"center"===a&&(v.x+=v.width/2)),s||("center"===(s=e.get("top")||e.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),i.attr("position",[v.x,v.y]);var y={textAlign:a,textVerticalAlign:s};l.setStyle(y),d.setStyle(y),p=i.getBoundingRect();var b=v.margin,T=e.getItemStyle(["color","opacity"]);T.fill=e.get("backgroundColor");var C=new Ha({shape:{x:p.x-b[3],y:p.y-b[0],width:p.width+b[1]+b[3],height:p.height+b[0]+b[2],r:e.get("borderRadius")},style:T,subPixelOptimize:!0,silent:!0});i.add(C)}}}),uu.registerSubTypeDefaulter("timeline",(function(){return"slider"})),jf({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(e,t){var n=t.getComponent("timeline");return n&&null!=e.currentIndex&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),t.resetOption("timeline"),T({currentIndex:n.option.currentIndex},e)})),jf({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)}));var qw=uu.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},mergeOption:function(e){qw.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(t<=e&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],n=e.axisType,i=this._names=[];if("category"===n){var o=[];w(t,(function(e,t){var n,r=Ro(e);L(e)?(n=m(e)).value=t:n=t,o.push(n),P(r)||null!=r&&!isNaN(r)||(r=""),i.push(r+"")})),t=o}(this._data=new Th([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(t,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function Uw(e,t,n,i){sp.call(this,e,t,n),this.type=i||"value",this.model=null}I(qw.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),Tc);var jw=Wc.extend({type:"timeline"});Uw.prototype={constructor:Uw,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},x(Uw,sp);var Gw=A,Xw=w,Yw=Math.PI;function Zw(e,t,n,i,o,r){var a=t.get("color");o?(o.setColor(a),n.add(o),r&&r.onUpdate(o)):((o=Ug(e.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(o),r&&r.onCreate(o));var s=t.getItemStyle(["color","symbol","symbolSize"]);o.setStyle(s),i=v({rectHover:!0,z2:100},i,!0);var l=e.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,i.scale=l;var u=e.get("symbolOffset");if(u){var c=i.position=i.position||[0,0];c[0]+=gl(u[0],l[0]),c[1]+=gl(u[1],l[1])}var d=e.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,o.attr(i),o.updateTransform(),o}function Jw(e,t,n,i,o){if(!e.dragging){var r=i.getModel("checkpointStyle"),a=n.dataToCoord(i.getData().get(["value"],t));o||!r.get("animation",!0)?e.attr({position:[a,0]}):(e.stopAnimation(!0),e.animateTo({position:[a,0]},r.get("animationDuration",!0),r.get("animationEasing",!0)))}}jw.extend({type:"timeline.slider",init:function(e,t){this.api=t},render:function(e,t,n,i){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var o=this._layout(e,n),r=this._createGroup("mainGroup"),a=this._createGroup("labelGroup"),s=this._axis=this._createAxis(o,e);e.formatTooltip=function(e){return Ll(s.scale.getLabel(e))},Xw(["AxisLine","AxisTick","Control","CurrentPointer"],(function(t){this["_render"+t](o,r,s,e)}),this),this._renderAxisLabel(o,a,s,e),this._position(o,e)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var n=e.get("label.position"),i=e.get("orient"),o=function(e,t){return eu(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}(e,t);null==n||"auto"===n?n="horizontal"===i?o.y+o.height/2<t.getHeight()/2?"-":"+":o.x+o.width/2<t.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]);var r,a,s,l,u={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},c={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:Yw/2},f="vertical"===i?o.height:o.width,h=e.getModel("controlStyle"),g=h.get("show",!0),p=g?h.get("itemSize"):0,m=g?h.get("itemGap"):0,v=p+m,y=e.get("label.rotate")||0;y=y*Yw/180;var b=h.get("position",!0),T=g&&h.get("showPlayBtn",!0),C=g&&h.get("showPrevBtn",!0),E=0,_=f;return"left"===b||"bottom"===b?(T&&(r=[0,0],E+=v),C&&(a=[E,0],E+=v)):(T&&(r=[_-p,0],_-=v),C&&(a=[0,0],E+=v)),g&&h.get("showNextBtn",!0)&&(s=[_-p,0],_-=v),l=[E,_],e.get("inverse")&&l.reverse(),{viewRect:o,mainLength:f,orient:i,rotation:d[i],labelRotation:y,labelPosOpt:n,labelAlign:e.get("label.align")||u[i],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||c[i],playPosition:r,prevBtnPosition:a,nextBtnPosition:s,axisExtent:l,controlSize:p,controlGap:m}},_position:function(e,t){var n=this._mainGroup,i=this._labelGroup,o=e.viewRect;if("vertical"===e.orient){var r=nt(),a=o.x,s=o.y+o.height;at(r,r,[-a,-s]),st(r,r,-Yw/2),at(r,r,[a,s]),(o=o.clone()).applyTransform(r)}var l=m(o),u=m(n.getBoundingRect()),c=m(i.getBoundingRect()),d=n.position,f=i.position;f[0]=d[0]=l[0][0];var h,g=e.labelPosOpt;function p(e){var t=e.position;e.origin=[l[0][0]-t[0],l[1][0]-t[1]]}function m(e){return[[e.x,e.x+e.width],[e.y,e.y+e.height]]}function v(e,t,n,i,o){e[i]+=n[i][o]-t[i][o]}isNaN(g)?(v(d,u,l,1,h="+"===g?0:1),v(f,c,l,1,1-h)):(v(d,u,l,1,h=0<=g?0:1),f[1]=d[1]+g),n.attr("position",d),i.attr("position",f),n.rotation=i.rotation=e.rotation,p(n),p(i)},_createAxis:function(e,t){var n=t.getData(),i=t.get("axisType"),o=Ag(t,i);o.getTicks=function(){return n.mapArray(["value"],(function(e){return e}))};var r=n.getDataExtent("value");o.setExtent(r[0],r[1]),o.niceTicks();var a=new Uw("value",o,e.axisExtent,i);return a.model=t,a},_createGroup:function(e){var t=this["_"+e]=new _n;return this.group.add(t),t},_renderAxisLine:function(e,t,n,i){var o=n.getExtent();i.get("lineStyle.show")&&t.add(new Wa({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:b({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,t,n,i){var o=i.getData(),r=n.scale.getTicks();Xw(r,(function(e){var r=n.dataToCoord(e),a=o.getItemModel(e),s=a.getModel("itemStyle"),l=a.getModel("emphasis.itemStyle"),u={position:[r,0],onclick:Gw(this._changeTimeline,this,e)},c=Zw(a,s,t,u);ks(c,l.getItemStyle()),a.get("tooltip")?(c.dataIndex=e,c.dataModel=i):c.dataIndex=c.dataModel=null}),this)},_renderAxisLabel:function(e,t,n,i){if(n.getLabelModel().get("show")){var o=i.getData(),r=n.getViewLabels();Xw(r,(function(i){var r=i.tickValue,a=o.getItemModel(r),s=a.getModel("label"),l=a.getModel("emphasis.label"),u=n.dataToCoord(i.tickValue),c=new Da({position:[u,0],rotation:e.labelRotation-e.rotation,onclick:Gw(this._changeTimeline,this,r),silent:!1});Ps(c.style,s,{text:i.formattedLabel,textAlign:e.labelAlign,textVerticalAlign:e.labelBaseline}),t.add(c),ks(c,Ps({},l))}),this)}},_renderControl:function(e,t,n,i){var o=e.controlSize,r=e.rotation,a=i.getModel("controlStyle").getItemStyle(),s=i.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-o/2,o,o],u=i.getPlayState(),c=i.get("inverse",!0);function d(e,n,u,c){if(e){var d=function(e,t,n,i){return ds(e.get(t).replace(/^path:\/\//,""),m(i||{}),new En(n[0],n[1],n[2],n[3]),"center")}(i,n,l,{position:e,origin:[o/2,0],rotation:c?-r:0,rectHover:!0,style:a,onclick:u});t.add(d),ks(d,s)}}d(e.nextBtnPosition,"controlStyle.nextIcon",Gw(this._changeTimeline,this,c?"-":"+")),d(e.prevBtnPosition,"controlStyle.prevIcon",Gw(this._changeTimeline,this,c?"+":"-")),d(e.playPosition,"controlStyle."+(u?"stopIcon":"playIcon"),Gw(this._handlePlayClick,this,!u),!0)},_renderCurrentPointer:function(e,t,n,i){var o=i.getData(),r=i.getCurrentIndex(),a=o.getItemModel(r).getModel("checkpointStyle"),s=this;this._currentPointer=Zw(a,a,this._mainGroup,{},this._currentPointer,{onCreate:function(e){e.draggable=!0,e.drift=Gw(s._handlePointerDrag,s),e.ondragend=Gw(s._handlePointerDragend,s),Jw(e,r,n,i,!0)},onUpdate:function(e){Jw(e,r,n,i)}})},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var n=this._toAxisCoord(e)[0],i=ml(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var o=this._findNearestTick(n),r=this.model;(t||o!==r.getCurrentIndex()&&r.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(Gw((function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))}),this),this.model.get("playInterval")))},_toAxisCoord:function(e){return js(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(e){var t,n=this.model.getData(),i=1/0,o=this._axis;return n.each(["value"],(function(n,r){var a=o.dataToCoord(n),s=Math.abs(a-e);s<i&&(i=s,t=r)})),t},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),qf((function(e){var t=e&&e.timeline;M(t)||(t=t?[t]:[]),w(t,(function(e){e&&function(e){var t=e.type,n={number:"value",time:"time"};if(n[t]&&(e.axisType=n[t],delete e.type),Ww(e),$w(e,"controlPosition")){var i=e.controlStyle||(e.controlStyle={});$w(i,"position")||(i.position=e.controlPosition),"none"!==i.position||$w(i,"show")||(i.show=!1,delete i.position),delete e.controlPosition}w(e.data||[],(function(e){L(e)&&!M(e)&&(!$w(e,"value")&&$w(e,"name")&&(e.value=e.name),Ww(e))}))}(e)}))}));var Qw=Al,eO=Ll;function tO(e){wo(e,"label",["show"])}var nO=Qf({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},isAnimationEnabled:function(){if(o.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,n,i){var o=this.constructor,r=this.mainType+"Model";n||t.eachSeries((function(e){var n=e.get(this.mainType,!0),a=e[r];n&&n.data?(a?a._mergeOption(n,t,!0):(i&&tO(n),w(n.data,(function(e){e instanceof Array?(tO(e[0]),tO(e[1])):tO(e)})),b(a=new o(n,this,t),{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),a.__hostSeries=e),e[r]=a):e[r]=null}),this)},formatTooltip:function(e){var t=this.getData(),n=this.getRawValue(e),i=M(n)?O(n,Qw).join(", "):Qw(n),o=t.getName(e),r=eO(this.name);return null==n&&!o||(r+="<br />"),o&&(r+=eO(o),null!=n&&(r+=" : ")),null!=n&&(r+=eO(i)),r},getData:function(){return this._data},setData:function(e){this._data=e}});I(nO,Tc),nO.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var iO=_;function oO(e,t,n,i,o,r){var a=[],s=Fh(t,i)?t.getCalculationInfo("stackResultDimension"):i,l=dO(t,s,e),u=t.indicesOfNearest(s,l)[0];a[o]=t.get(n,u),a[r]=t.get(s,u);var c=t.get(i,u),d=vl(t.get(i,u));return 0<=(d=Math.min(d,20))&&(a[r]=+a[r].toFixed(d)),[a,c]}var rO=N,aO={min:rO(oO,"min"),max:rO(oO,"max"),average:rO(oO,"average")};function sO(e,t){var n=e.getData(),i=e.coordinateSystem;if(t&&!function(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}(t)&&!M(t.coord)&&i){var o=i.dimensions,r=lO(t,n,i,e);if((t=m(t)).type&&aO[t.type]&&r.baseAxis&&r.valueAxis){var a=iO(o,r.baseAxis.dim),s=iO(o,r.valueAxis.dim),l=aO[t.type](n,r.baseDataDim,r.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],c=0;c<2;c++)aO[u[c]]&&(u[c]=dO(n,n.mapDimension(o[c]),u[c]));t.coord=u}}return t}function lO(e,t,n,i){var o={};return null!=e.valueIndex||null!=e.valueDim?(o.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,o.valueAxis=n.getAxis(function(e,t){var n=e.getData(),i=n.dimensions;t=n.getDimension(t);for(var o=0;o<i.length;o++){var r=n.getDimensionInfo(i[o]);if(r.name===t)return r.coordDim}}(i,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=i.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function uO(e,t){return!(e&&e.containData&&t.coord&&!function(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}(t))||e.containData(t.coord)}function cO(e,t,n,i){return i<2?e.coord&&e.coord[i]:e.value}function dO(e,t,n){if("average"!==n)return"median"===n?e.getMedian(t):e.getDataExtent(t,!0)["max"===n?1:0];var i=0,o=0;return e.each(t,(function(e,t){isNaN(e)||(i+=e,o++)})),i/o}var fO=eh({type:"marker",init:function(){this.markerGroupMap=Q()},render:function(e,t,n){var i=this.markerGroupMap;i.each((function(e){e.__keep=!1}));var o=this.type+"Model";t.eachSeries((function(e){var i=e[o];i&&this.renderSeries(e,i,t,n)}),this),i.each((function(e){e.__keep||this.group.remove(e.group)}),this)},renderSeries:function(){}});function hO(e,t,n){var i=t.coordinateSystem;e.each((function(o){var r,a=e.getItemModel(o),s=gl(a.get("x"),n.getWidth()),l=gl(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(t.getMarkerPosition)r=t.getMarkerPosition(e.getValues(e.dimensions,o));else if(i){var u=e.get(i.dimensions[0],o),c=e.get(i.dimensions[1],o);r=i.dataToPoint([u,c])}}else r=[s,l];isNaN(s)||(r[0]=s),isNaN(l)||(r[1]=l),e.setItemLayout(o,r)}))}function gO(e,t,n,i){var o=e.getData(),r=i.type;if(!M(i)&&("min"===r||"max"===r||"average"===r||"median"===r||null!=i.xAxis||null!=i.yAxis)){var a,s;if(null!=i.yAxis||null!=i.xAxis)a=t.getAxis(null!=i.yAxis?"y":"x"),s=V(i.yAxis,i.xAxis);else{var l=lO(i,o,t,e);a=l.valueAxis,s=dO(o,zh(o,l.valueDataDim),r)}var u="x"===a.dim?0:1,c=1-u,d=m(i),f={};d.type=null,d.coord=[],f.coord=[],d.coord[c]=-1/0,f.coord[c]=1/0;var h=n.get("precision");0<=h&&"number"==typeof s&&(s=+s.toFixed(Math.min(h,20))),d.coord[u]=f.coord[u]=s,i=[d,f,{type:r,valueIndex:i.valueIndex,value:s}]}return(i=[sO(e,i[0]),sO(e,i[1]),b({},i[2])])[2].type=i[2].type||"",v(i[2],i[0]),v(i[2],i[1]),i}function pO(e){return!isNaN(e)&&!isFinite(e)}function mO(e,t,n,i){var o=1-e,r=i.dimensions[e];return pO(t[o])&&pO(n[o])&&t[e]===n[e]&&i.getAxis(r).containData(t[e])}function vO(e,t){if("cartesian2d"===e.type){var n=t[0].coord,i=t[1].coord;if(n&&i&&(mO(1,n,i,e)||mO(0,n,i,e)))return!0}return uO(e,t[0])&&uO(e,t[1])}function yO(e,t,n,i,o){var r,a=i.coordinateSystem,s=e.getItemModel(t),l=gl(s.get("x"),o.getWidth()),u=gl(s.get("y"),o.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)r=i.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,d=e.get(c[0],t),f=e.get(c[1],t);r=a.dataToPoint([d,f])}if("cartesian2d"===a.type){var h=a.getAxis("x"),g=a.getAxis("y");pO(e.get((c=a.dimensions)[0],t))?r[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):pO(e.get(c[1],t))&&(r[1]=g.toGlobalCoord(g.getExtent()[n?0:1]))}isNaN(l)||(r[0]=l),isNaN(u)||(r[1]=u)}else r=[l,u];e.setItemLayout(t,r)}function bO(e,t,n,i){var o=sO(e,i[0]),r=sO(e,i[1]),a=V,s=o.coord,l=r.coord;s[0]=a(s[0],-1/0),s[1]=a(s[1],-1/0),l[0]=a(l[0],1/0),l[1]=a(l[1],1/0);var u=y([{},o,r]);return u.coord=[o.coord,r.coord],u.x0=o.x,u.y0=o.y,u.x1=r.x,u.y1=r.y,u}function TO(e){return!isNaN(e)&&!isFinite(e)}function CO(e,t,n){var i=1-e;return TO(t[i])&&TO(n[i])}function EO(e,t){var n=t.coord[0],i=t.coord[1];return!("cartesian2d"!==e.type||!n||!i||!CO(1,n,i)&&!CO(0,n,i))||uO(e,{coord:n,x:t.x0,y:t.y0})||uO(e,{coord:i,x:t.x1,y:t.y1})}function _O(e,t,n,i,o){var r,a=i.coordinateSystem,s=e.getItemModel(t),l=gl(s.get(n[0]),o.getWidth()),u=gl(s.get(n[1]),o.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)r=i.getMarkerPosition(e.getValues(n,t));else{var c=[h=e.get(n[0],t),g=e.get(n[1],t)];a.clampData&&a.clampData(c,c),r=a.dataToPoint(c,!0)}if("cartesian2d"===a.type){var d=a.getAxis("x"),f=a.getAxis("y"),h=e.get(n[0],t),g=e.get(n[1],t);TO(h)?r[0]=d.toGlobalCoord(d.getExtent()["x0"===n[0]?0:1]):TO(g)&&(r[1]=f.toGlobalCoord(f.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(r[0]=l),isNaN(u)||(r[1]=u)}else r=[l,u];return r}fO.extend({type:"markPoint",updateTransform:function(e,t,n){t.eachSeries((function(e){var t=e.markPointModel;t&&(hO(t.getData(),e,n),this.markerGroupMap.get(e.id).updateLayout(t))}),this)},renderSeries:function(e,t,n,i){var o=e.coordinateSystem,r=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,new _p),u=function(e,t,n){var i;i=e?O(e&&e.dimensions,(function(e){return T({name:e},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{})})):[{name:"value",type:"float"}];var o=new Th(i,n),r=O(n.get("data"),N(sO,t));return e&&(r=k(r,N(uO,e))),o.initData(r,null,e?cO:function(e){return e.value}),o}(o,e,t);t.setData(u),hO(t.getData(),e,i),u.each((function(e){var n=u.getItemModel(e),i=n.getShallow("symbol"),o=n.getShallow("symbolSize"),r=K(i),s=K(o);if(r||s){var l=t.getRawValue(e),c=t.getDataParams(e);r&&(i=i(l,c)),s&&(o=o(l,c))}u.setItemVisual(e,{symbol:i,symbolSize:o,color:n.get("itemStyle.color")||a.getVisual("color")})})),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl((function(e){e.traverse((function(e){e.dataModel=t}))})),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),qf((function(e){e.markPoint=e.markPoint||{}})),nO.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),fO.extend({type:"markLine",updateTransform:function(e,t,n){t.eachSeries((function(e){var t=e.markLineModel;if(t){var i=t.getData(),o=t.__from,r=t.__to;o.each((function(t){yO(o,t,!0,e,n),yO(r,t,!1,e,n)})),i.each((function(e){i.setItemLayout(e,[o.getItemLayout(e),r.getItemLayout(e)])})),this.markerGroupMap.get(e.id).updateLayout()}}),this)},renderSeries:function(e,t,n,i){var o=e.coordinateSystem,r=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,new xT);this.group.add(l.group);var u=function(e,t,n){var i;i=e?O(e&&e.dimensions,(function(e){return T({name:e},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{})})):[{name:"value",type:"float"}];var o=new Th(i,n),r=new Th(i,n),a=new Th([],n),s=O(n.get("data"),N(gO,t,e,n));e&&(s=k(s,N(vO,e)));var l=e?cO:function(e){return e.value};return o.initData(O(s,(function(e){return e[0]})),null,l),r.initData(O(s,(function(e){return e[1]})),null,l),a.initData(O(s,(function(e){return e[2]}))),a.hasItemOption=!0,{from:o,to:r,line:a}}(o,e,t),c=u.from,d=u.to,f=u.line;t.__from=c,t.__to=d,t.setData(f);var h=t.get("symbol"),g=t.get("symbolSize");function p(t,n,o){var r=t.getItemModel(n);yO(t,n,o,e,i),t.setItemVisual(n,{symbolSize:r.get("symbolSize")||g[o?0:1],symbol:r.get("symbol",!0)||h[o?0:1],color:r.get("itemStyle.color")||a.getVisual("color")})}M(h)||(h=[h,h]),"number"==typeof g&&(g=[g,g]),u.from.each((function(e){p(c,e,!0),p(d,e,!1)})),f.each((function(e){var t=f.getItemModel(e).get("lineStyle.color");f.setItemVisual(e,{color:t||c.getItemVisual(e,"color")}),f.setItemLayout(e,[c.getItemLayout(e),d.getItemLayout(e)]),f.setItemVisual(e,{fromSymbolSize:c.getItemVisual(e,"symbolSize"),fromSymbol:c.getItemVisual(e,"symbol"),toSymbolSize:d.getItemVisual(e,"symbolSize"),toSymbol:d.getItemVisual(e,"symbol")})})),l.updateData(f),u.line.eachItemGraphicEl((function(e,n){e.traverse((function(e){e.dataModel=t}))})),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),qf((function(e){e.markLine=e.markLine||{}})),nO.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var xO=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];fO.extend({type:"markArea",updateTransform:function(e,t,n){t.eachSeries((function(e){var t=e.markAreaModel;if(t){var i=t.getData();i.each((function(t){var o=O(xO,(function(o){return _O(i,t,o,e,n)}));i.setItemLayout(t,o),i.getItemGraphicEl(t).setShape("points",o)}))}}),this)},renderSeries:function(e,t,n,i){var o=e.coordinateSystem,r=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(r)||s.set(r,{group:new _n});this.group.add(l.group),l.__keep=!0;var u=function(e,t,n){var i,o;o=e?(i=O(e&&e.dimensions,(function(e){var n=t.getData();return T({name:e},n.getDimensionInfo(n.mapDimension(e))||{})})),new Th(O(["x0","y0","x1","y1"],(function(e,t){return{name:e,type:i[t%2].type}})),n)):new Th(i=[{name:"value",type:"float"}],n);var r=O(n.get("data"),N(bO,t,e,n));return e&&(r=k(r,N(EO,e))),o.initData(r,null,e?function(e,t,n,i){return e.coord[Math.floor(i/2)][i%2]}:function(e){return e.value}),o.hasItemOption=!0,o}(o,e,t);t.setData(u),u.each((function(t){u.setItemLayout(t,O(xO,(function(n){return _O(u,t,n,e,i)}))),u.setItemVisual(t,{color:a.getVisual("color")})})),u.diff(l.__data).add((function(e){var t=new Ma({shape:{points:u.getItemLayout(e)}});u.setItemGraphicEl(e,t),l.group.add(t)})).update((function(e,n){var i=l.__data.getItemGraphicEl(n);$s(i,{shape:{points:u.getItemLayout(e)}},t,e),l.group.add(i),u.setItemGraphicEl(e,i)})).remove((function(e){var t=l.__data.getItemGraphicEl(e);l.group.remove(t)})).execute(),u.eachItemGraphicEl((function(e,n){var i=u.getItemModel(n),o=i.getModel("label"),r=i.getModel("emphasis.label"),a=u.getItemVisual(n,"color");e.useStyle(T(i.getModel("itemStyle").getItemStyle(),{fill:qt(a,.4),stroke:a})),e.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle(),Ms(e.style,e.hoverStyle,o,r,{labelFetcher:t,labelDataIndex:n,defaultText:u.getName(n)||"",isRectText:!0,autoColor:a}),ks(e,{}),e.dataModel=t})),l.__data=u,l.group.silent=t.get("silent")||e.get("silent")}}),qf((function(e){e.markArea=e.markArea||{}}));var IO=ld.legend.selector,DO={all:{type:"all",title:m(IO.all)},inverse:{type:"inverse",title:m(IO.inverse)}},wO=Qf({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){wO.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),M(t)&&w(t,(function(e,n){P(e)&&(e={type:e}),t[n]=v(e,DO[e.type])}))},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var i=e[n].get("name");if(this.isSelected(i)){this.select(i),t=!0;break}}t||this.select(e[0].get("name"))}},_updateData:function(e){var t=[],n=[];e.eachRawSeries((function(i){var o;if(n.push(i.name),i.legendVisualProvider){var r=i.legendVisualProvider.getAllNames();e.isSeriesFiltered(i)||(n=n.concat(r)),r.length?t=t.concat(r):o=!0}else o=!0;o&&Ao(i)&&t.push(i.name)})),this._availableNames=n;var i=O(this.get("data")||t,(function(e){return"string"!=typeof e&&"number"!=typeof e||(e={name:e}),new ll(e,this,this.ecModel)}),this);this._data=i},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&w(this._data,(function(e){t[e.get("name")]=!1})),t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var e=this.option.selected;w(this._data,(function(t){e[t.get("name",!0)]=!0}))},inverseSelect:function(){var e=this.option.selected;w(this._data,(function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]}))},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&0<=_(this._availableNames,e)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function OO(e,t,n){var i,o={},r="toggleSelected"===e;return n.eachComponent("legend",(function(n){r&&null!=i?n[i?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?n[e]():(n[e](t.name),i=n.isSelected(t.name)),w(n.getData(),(function(e){var t=e.get("name");if("\n"!==t&&""!==t){var i=n.isSelected(t);o[t]=o.hasOwnProperty(t)?o[t]&&i:i}}))})),"allSelect"===e||"inverseSelect"===e?{selected:o}:{name:t.name,selected:o}}jf("legendToggleSelect","legendselectchanged",N(OO,"toggleSelected")),jf("legendAllSelect","legendselectall",N(OO,"allSelect")),jf("legendInverseSelect","legendinverseselect",N(OO,"inverseSelect")),jf("legendSelect","legendselected",N(OO,"select")),jf("legendUnSelect","legendunselected",N(OO,"unSelect"));var RO=N,kO=w,SO=_n,AO=eh({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new SO),this.group.add(this._selectorGroup=new SO),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),r=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===r?"right":"left");var a=e.get("selector",!0),s=e.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===r?"end":"start"),this.renderInner(o,e,t,n,a,r,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),d=eu(l,u,c),f=this.layoutInner(e,o,d,i,a,s),h=eu(T({width:f.width,height:f.height},l),u,c);this.group.attr("position",[h.x-f.x,h.y-f.y]),this.group.add(this._backgroundEl=rD(f,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,n,i,o,r,a){var s=this.getContentGroup(),l=Q(),u=t.get("selectedMode"),c=[];n.eachRawSeries((function(e){e.get("legendHoverLink")||c.push(e.id)})),kO(t.getData(),(function(o,r){var a=o.get("name");if(this.newlineDisabled||""!==a&&"\n"!==a){var d=n.getSeriesByName(a)[0];if(!l.get(a))if(d){var f=d.getData(),h=f.getVisual("color"),g=f.getVisual("borderColor");"function"==typeof h&&(h=h(d.getDataParams(0))),"function"==typeof g&&(g=g(d.getDataParams(0)));var p=f.getVisual("legendSymbol")||"roundRect",m=f.getVisual("symbol");this._createItem(a,r,o,t,p,m,e,h,g,u).on("click",RO(MO,a,null,i,c)).on("mouseover",RO(KO,d.name,null,i,c)).on("mouseout",RO(PO,d.name,null,i,c)),l.set(a,!0)}else n.eachRawSeries((function(n){if(!l.get(a)&&n.legendVisualProvider){var s=n.legendVisualProvider;if(!s.containName(a))return;var d=s.indexOfName(a),f=s.getItemVisual(d,"color"),h=s.getItemVisual(d,"borderColor");this._createItem(a,r,o,t,"roundRect",null,e,f,h,u).on("click",RO(MO,null,a,i,c)).on("mouseover",RO(KO,null,a,i,c)).on("mouseout",RO(PO,null,a,i,c)),l.set(a,!0)}}),this)}else s.add(new SO({newline:!0}))}),this),o&&this._createSelector(o,t,i,r,a)},_createSelector:function(e,t,n,i,o){var r=this.getSelectorGroup();kO(e,(function(e){!function(e){var i=e.type,o=new Da({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});r.add(o);var a=t.getModel("selectorLabel"),s=t.getModel("emphasis.selectorLabel");Ms(o.style,o.hoverStyle={},a,s,{defaultText:e.title,isRectText:!1}),ks(o)}(e)}))},_createItem:function(e,t,n,i,o,r,a,s,l,u){var c=i.get("itemWidth"),d=i.get("itemHeight"),f=i.get("inactiveColor"),h=i.get("inactiveBorderColor"),g=i.get("symbolKeepAspect"),p=i.getModel("itemStyle"),m=i.isSelected(e),v=new SO,y=n.getModel("textStyle"),T=n.get("icon"),C=n.getModel("tooltip"),E=C.parentModel,_=Ug(o=T||o,0,0,c,d,m?s:f,null==g||g);if(v.add(NO(_,o,p,l,h,m)),!T&&r&&(r!==o||"none"===r)){var x=.8*d;"none"===r&&(r="circle");var I=Ug(r,(c-x)/2,(d-x)/2,x,x,m?s:f,null==g||g);v.add(NO(I,r,p,l,h,m))}var D="left"===a?c+5:-5,w=a,O=i.get("formatter"),R=e;"string"==typeof O&&O?R=O.replace("{name}",null!=e?e:""):"function"==typeof O&&(R=O(e)),v.add(new Da({style:Ps({},y,{text:R,x:D,y:d/2,textFill:m?y.getTextColor():f,textAlign:w,textVerticalAlign:"middle"})}));var k=new Ha({shape:v.getBoundingRect(),invisible:!0,tooltip:C.get("show")?b({content:e,formatter:E.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:e,$vars:["name"]}},C.option):null});return v.add(k),v.eachChild((function(e){e.silent=!0})),k.silent=!u,this.getContentGroup().add(v),ks(v),v.__legendDataIndex=t,v},layoutInner:function(e,t,n,i,o,r){var a=this.getContentGroup(),s=this.getSelectorGroup();Ql(e.get("orient"),a,e.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(o){Ql("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),d=[-c.x,-c.y],f=e.get("selectorButtonGap",!0),h=e.getOrient().index,g=0===h?"width":"height",p=0===h?"height":"width",m=0===h?"y":"x";"end"===r?d[h]+=l[g]+f:u[h]+=c[g]+f,d[1-h]+=l[p]/2-c[p]/2,s.attr("position",d),a.attr("position",u);var v={x:0,y:0};return v[g]=l[g]+f+c[g],v[p]=Math.max(l[p],c[p]),v[m]=Math.min(0,c[m]+d[1-h]),v}return a.attr("position",u),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function NO(e,t,n,i,o,r){var a;return"line"!==t&&t.indexOf("empty")<0?(a=n.getItemStyle(),e.style.stroke=i,r||(a.stroke=o)):a=n.getItemStyle(["borderWidth","borderColor"]),e.setStyle(a)}function MO(e,t,n,i){PO(e,t,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),KO(e,t,n,i)}function KO(e,t,n,i){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function PO(e,t,n,i){var o=n.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}Uf(of.PROCESSOR.SERIES_FILTER,(function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0}))})),uu.registerSubTypeDefaulter("legend",(function(){return"plain"}));var LO=wO.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,n,i){var o=iu(e);LO.superCall(this,"init",e,t,n,i),BO(this,e,o)},mergeOption:function(e,t){LO.superCall(this,"mergeOption",e,t),BO(this,this.option,e)}});function BO(e,t,n){var i=[1,1];i[e.getOrient().index]=0,nu(t,n,{type:"box",ignoreSize:i})}var FO=_n,zO=["width","height"],HO=["x","y"],VO=AO.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){VO.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new FO),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new FO)},resetInner:function(){VO.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,i,o,r,a){var s=this;VO.superCall(this,"renderInner",e,t,n,i,o,r,a);var l=this._controllerGroup,u=t.get("pageIconSize",!0);M(u)||(u=[u,u]),d("pagePrev",0);var c=t.getModel("pageTextStyle");function d(e,n){var o=e+"DataIndex",r=Zs(t.get("pageIcons",!0)[t.getOrient().name][n],{onclick:A(s._pageGo,s,o,t,i)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});r.name=e,l.add(r)}l.add(new Da({name:"pageText",style:{textFill:c.getTextColor(),font:c.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),d("pageNext",1)},layoutInner:function(e,t,n,i,o,r){var a=this.getSelectorGroup(),s=e.getOrient().index,l=zO[s],u=HO[s],c=zO[1-s],d=HO[1-s];o&&Ql("horizontal",a,e.get("selectorItemGap",!0));var f=e.get("selectorButtonGap",!0),h=a.getBoundingRect(),g=[-h.x,-h.y],p=m(n);o&&(p[l]=n[l]-h[l]-f);var v=this._layoutContentAndController(e,i,p,s,l,c,d);if(o){if("end"===r)g[s]+=v[l]+f;else{var y=h[l]+f;g[s]-=y,v[u]-=y}v[l]+=h[l]+f,g[1-s]+=v[d]+v[c]/2-h[c]/2,v[c]=Math.max(v[c],h[c]),v[d]=Math.min(v[d],h[d]+g[1-s]),a.attr("position",g)}return v},_layoutContentAndController:function(e,t,n,i,o,r,a){var s=this.getContentGroup(),l=this._containerGroup,u=this._controllerGroup;Ql(e.get("orient"),s,e.get("itemGap"),i?n.width:null,i?null:n.height),Ql("horizontal",u,e.get("pageButtonItemGap",!0));var c=s.getBoundingRect(),d=u.getBoundingRect(),f=this._showController=c[o]>n[o],h=[-c.x,-c.y];t||(h[i]=s.position[i]);var g=[0,0],p=[-d.x,-d.y],m=W(e.get("pageButtonGap",!0),e.get("itemGap",!0));f&&("end"===e.get("pageButtonPosition",!0)?p[i]+=n[o]-d[o]:g[i]+=d[o]+m),p[1-i]+=c[r]/2-d[r]/2,s.attr("position",h),l.attr("position",g),u.attr("position",p);var v={x:0,y:0};if(v[o]=f?n[o]:c[o],v[r]=Math.max(c[r],d[r]),v[a]=Math.min(0,d[a]+p[1-i]),l.__rectSize=n[o],f){var y={x:0,y:0};y[o]=Math.max(n[o]-d[o]-m,0),y[r]=v[r],l.setClipPath(new Ha({shape:y})),l.__rectSize=y[o]}else u.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var b=this._getPageInfo(e);return null!=b.pageIndex&&$s(s,{position:b.contentPosition},f&&e),this._updatePageInfoView(e,b),v},_pageGo:function(e,t,n){var i=this._getPageInfo(t)[e];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;w(["pagePrev","pageNext"],(function(i){var o=null!=t[i+"DataIndex"],r=n.childOfName(i);r&&(r.setStyle("fill",e.get(o?"pageIconColor":"pageIconInactiveColor",!0)),r.cursor=o?"pointer":"default")}));var i=n.childOfName("pageText"),o=e.get("pageFormatter"),r=t.pageIndex,a=null!=r?r+1:0,s=t.pageCount;i&&o&&i.setStyle("text",P(o)?o.replace("{current}",a).replace("{total}",s):o({current:a,total:s}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=e.getOrient().index,r=zO[o],a=HO[o],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],c=l.length,d=c?1:0,f={contentPosition:n.position.slice(),pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return f;var h=y(u);f.contentPosition[o]=-h.s;for(var g=s+1,p=h,m=h,v=null;g<=c;++g)(!(v=y(l[g]))&&m.e>p.s+i||v&&!b(v,p.s))&&(p=m.i>p.i?m:v)&&(null==f.pageNextDataIndex&&(f.pageNextDataIndex=p.i),++f.pageCount),m=v;for(g=s-1,p=h,m=h,v=null;-1<=g;--g)(v=y(l[g]))&&b(m,v.s)||!(p.i<m.i)||(m=p,null==f.pagePrevDataIndex&&(f.pagePrevDataIndex=p.i),++f.pageCount,++f.pageIndex),p=v;return f;function y(e){if(e){var t=e.getBoundingRect(),n=t[a]+e.position[o];return{s:n,e:n+t[r],i:e.__legendDataIndex}}}function b(e,t){return e.e>=t&&e.s<=t+i}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild((function(i,o){var r=i.__legendDataIndex;null==n&&null!=r&&(n=o),r===e&&(t=o)})),null!=t?t:n):0;var t,n}});jf("legendScroll","legendscroll",(function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(n)}))})),ZD.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var WO=Ha,$O=hl,qO=ml,UO=A,jO=w,GO="horizontal",XO="vertical",YO=["line","bar","candlestick","scatter"],ZO=ew.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this.api=t},render:function(e,t,n,i){ZO.superApply(this,"render",arguments),rd(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){ZO.superApply(this,"remove",arguments),ad(this,"_dispatchZoomAction")},dispose:function(){ZO.superApply(this,"dispose",arguments),ad(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new _n;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,n=this._findCoordRect(),i={width:t.getWidth(),height:t.getHeight()},o=this._orient===GO?{right:i.width-n.x-n.width,top:i.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},r=iu(e.option);w(["right","top","width","height"],(function(e){"ph"===r[e]&&(r[e]=o[e])}));var a=eu(r,i,e.padding);this._location={x:a.x,y:a.y},this._size=[a.width,a.height],this._orient===XO&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),r=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;r.attr(n!==GO||o?n===GO&&o?{scale:a?[-1,1]:[-1,-1]}:n!==XO||o?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]});var s=e.getBoundingRect([r]);e.attr("position",[t.x-s.x,t.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var e=this._size,t=this._displayables.barGroup;t.add(new WO({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),t.add(new WO({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:A(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,n=e.series,i=n.getRawData(),o=n.getShadowDim?n.getShadowDim():e.otherDim;if(null!=o){var r=i.getDataExtent(o),a=.3*(r[1]-r[0]);r=[r[0]-a,r[1]+a];var s,l=[0,t[1]],u=[[t[0],0],[0,0]],c=[],d=t[0]/(i.count()-1),f=0,h=Math.round(i.count()/t[0]);i.each([o],(function(e,t){if(0<h&&t%h)f+=d;else{var n=null==e||isNaN(e)||""===e,i=n?0:$O(e,r,l,!0);n&&!s&&t?(u.push([u[u.length-1][0],0]),c.push([c[c.length-1][0],0])):!n&&s&&(u.push([f,0]),c.push([f,0])),u.push([f,i]),c.push([f,i]),f+=d,s=n}}));var g=this.dataZoomModel;this._displayables.barGroup.add(new Ma({shape:{points:u},style:T({fill:g.get("dataBackgroundColor")},g.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Ka({shape:{points:c},style:g.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,i=this.ecModel;return e.eachTargetAxis((function(o,r){w(e.getAxisProxy(o.name,r).getTargetSeriesModels(),(function(e){if(!(n||!0!==t&&_(YO,e.get("type"))<0)){var a,s=i.getComponent(o.axis,r).axis,l=function(e){return{x:"y",y:"x",radius:"angle",angle:"radius"}[e]}(o.name),u=e.coordinateSystem;null!=l&&u.getOtherAxis&&(a=u.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:o.name,otherDim:l,otherAxisInverse:a}}}),this)}),this),n}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],n=e.handleLabels=[],i=this._displayables.barGroup,o=this._size,r=this.dataZoomModel;i.add(e.filler=new WO({draggable:!0,cursor:JO(this._orient),drift:UO(this._onDragMove,this,"all"),ondragstart:UO(this._showDataInfo,this,!0),ondragend:UO(this._onDragEnd,this),onmouseover:UO(this._showDataInfo,this,!0),onmouseout:UO(this._showDataInfo,this,!1),style:{fill:r.get("fillerColor"),textPosition:"inside"}})),i.add(new WO({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),jO([0,1],(function(e){var o=Zs(r.get("handleIcon"),{cursor:JO(this._orient),draggable:!0,drift:UO(this._onDragMove,this,e),ondragend:UO(this._onDragEnd,this),onmouseover:UO(this._showDataInfo,this,!0),onmouseout:UO(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),a=o.getBoundingRect();this._handleHeight=gl(r.get("handleSize"),this._size[1]),this._handleWidth=a.width/a.height*this._handleHeight,o.setStyle(r.getModel("handleStyle").getItemStyle());var s=r.get("handleColor");null!=s&&(o.style.fill=s),i.add(t[e]=o);var l=r.textStyleModel;this.group.add(n[e]=new Da({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:l.getTextColor(),textFont:l.getFont()},z2:10}))}),this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[$O(e[0],[0,100],t,!0),$O(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),r=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];lC(t,i,o,n.get("zoomLock")?"all":e,null!=r.minSpan?$O(r.minSpan,a,o,!0):null,null!=r.maxSpan?$O(r.maxSpan,a,o,!0):null);var s=this._range,l=this._range=qO([$O(i[0],o,a,!0),$O(i[1],o,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(e){var t=this._displayables,n=this._handleEnds,i=qO(n.slice()),o=this._size;jO([0,1],(function(e){var i=this._handleHeight;t.handles[e].attr({scale:[i/2,i/2],position:[n[e],o[1]/2-i/2]})}),this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,r=["",""];if(t.get("showDetail")){var a=t.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,u=e?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();r=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var c=qO(this._handleEnds.slice());function d(e){var t=Us(n.handles[e].parent,this.group),a=Gs(0===e?"right":"left",t),s=this._handleWidth/2+5,l=js([c[e]+(0===e?-s:s),this._size[1]/2],t);i[e].setStyle({x:l[0],y:l[1],textVerticalAlign:o===GO?"middle":a,textAlign:o===GO?a:"center",text:r[e]})}d.call(this,0),d.call(this,1)},_formatLabel:function(e,t){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=t.getPixelPrecision());var r=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(o,20));return K(i)?i(e,r):P(i)?i.replace("{value}",r):r},_showDataInfo:function(e){var t=this._displayables.handleLabels;t[0].attr("invisible",!(e=this._dragging||e)),t[1].attr("invisible",!e)},_onDragMove:function(e,t,n,i){this._dragging=!0,$e(i.event);var o=js([t,n],this._displayables.barGroup.getLocalTransform(),!0),r=this._updateInterval(e,o[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),r&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,n=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var i=this._handleEnds,o=this._updateInterval("all",n[0]-(i[0]+i[1])/2);this._updateView(),o&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(jO(this.getTargetCoordInfo(),(function(t){if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}})),!e){var t=this.api.getWidth(),n=this.api.getHeight();e={x:.2*t,y:.2*n,width:.6*t,height:.6*n}}return e}});function JO(e){return"vertical"===e?"ns-resize":"ew-resize"}ZD.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var QO="\0_ec_dataZoom_roams";function eR(e,t){var n=nR(e),i=t.dataZoomId,o=t.coordId;w(n,(function(e,n){var r=e.dataZoomInfos;r[i]&&_(t.allCoordIds,o)<0&&(delete r[i],e.count--)})),iR(n);var r=n[o];r||((r=n[o]={coordId:o,dataZoomInfos:{},count:0}).controller=function(e,t){var n=new iy(e.getZr());return w(["pan","zoom","scrollMove"],(function(e){n.on(e,(function(n){var i=[];w(t.dataZoomInfos,(function(o){if(n.isAvailableBehavior(o.dataZoomModel.option)){var r=(o.getRange||{})[e],a=r&&r(t.controller,n);!o.dataZoomModel.get("disabled",!0)&&a&&i.push({dataZoomId:o.dataZoomId,start:a[0],end:a[1]})}})),i.length&&t.dispatchAction(i)}))})),n}(e,r),r.dispatchAction=N(oR,e)),r.dataZoomInfos[i]||r.count++,r.dataZoomInfos[i]=t;var a=function(e){var t,n={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return w(e,(function(e){var o=e.dataZoomModel,r=!o.get("disabled",!0)&&(!o.get("zoomLock",!0)||"move");n["type_"+t]<n["type_"+r]&&(t=r),i&=o.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(r.dataZoomInfos);r.controller.enable(a.controlType,a.opt),r.controller.setPointerChecker(t.containsPoint),rd(r,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}function tR(e){return e.type+"\0_"+e.id}function nR(e){var t=e.getZr();return t[QO]||(t[QO]={})}function iR(e){w(e,(function(t,n){t.count||(t.controller.dispose(),delete e[n])}))}function oR(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var rR=A,aR=ew.extend({type:"dataZoom.inside",init:function(e,t){},render:function(e,t,n,i){aR.superApply(this,"render",arguments),this._range=e.getPercentRange(),w(this.getTargetCoordInfo(),(function(t,i){var o=O(t,(function(e){return tR(e.model)}));w(t,(function(t){var r=t.model,a={};w(["pan","zoom","scrollMove"],(function(e){a[e]=rR(sR[e],this,t,i)}),this),eR(n,{coordId:tR(r),allCoordIds:o,containsPoint:function(e,t,n){return r.coordinateSystem.containPoint([t,n])},dataZoomId:e.id,dataZoomModel:e,getRange:a})}),this)}),this)},dispose:function(){!function(e,t){var n=nR(e);w(n,(function(e){e.controller.dispose();var n=e.dataZoomInfos;n[t]&&(delete n[t],e.count--)})),iR(n)}(this.api,this.dataZoomModel.id),aR.superApply(this,"dispose",arguments),this._range=null}}),sR={zoom:function(e,t,n,i){var o=this._range,r=o.slice(),a=e.axisModels[0];if(a){var s=cR[t](null,[i.originX,i.originY],a,n,e),l=(0<s.signal?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(r[1]-r[0])+r[0],u=Math.max(1/i.scale,0);r[0]=(r[0]-l)*u+l,r[1]=(r[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return lC(0,r,[0,100],0,c.minSpan,c.maxSpan),this._range=r,o[0]!==r[0]||o[1]!==r[1]?r:void 0}},pan:lR((function(e,t,n,i,o,r){var a=cR[i]([r.oldX,r.oldY],[r.newX,r.newY],t,o,n);return a.signal*(e[1]-e[0])*a.pixel/a.pixelLength})),scrollMove:lR((function(e,t,n,i,o,r){return cR[i]([0,0],[r.scrollDelta,r.scrollDelta],t,o,n).signal*(e[1]-e[0])*r.scrollDelta}))};function lR(e){return function(t,n,i,o){var r=this._range,a=r.slice(),s=t.axisModels[0];if(s)return lC(e(a,s,t,n,i,o),a,[0,100],"all"),this._range=a,r[0]!==a[0]||r[1]!==a[1]?a:void 0}}function uR(e){var t=e&&e.visualMap;M(t)||(t=t?[t]:[]),dR(t,(function(e){if(e){fR(e,"splitList")&&!fR(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&M(t)&&dR(t,(function(e){L(e)&&(fR(e,"start")&&!fR(e,"min")&&(e.min=e.start),fR(e,"end")&&!fR(e,"max")&&(e.max=e.end))}))}}))}var cR={grid:function(e,t,n,i,o){var r=n.axis,a={},s=o.model.coordinateSystem.getRect();return e=e||[0,0],"x"===r.dim?(a.pixel=t[0]-e[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=r.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=r.inverse?-1:1),a},polar:function(e,t,n,i,o){var r=n.axis,a={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(a.pixel=t[0]-e[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=r.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=u[1]-u[0],a.pixelStart=u[0],a.signal=r.inverse?-1:1),a},singleAxis:function(e,t,n,i,o){var r=n.axis,a=o.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===r.orient?(s.pixel=t[0]-e[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=r.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=r.inverse?-1:1),s}},dR=w;function fR(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}uu.registerSubTypeDefaulter("visualMap",(function(e){return e.categories||(e.pieces?0<e.pieces.length:0<e.splitNumber)&&!e.calculable?"piecewise":"continuous"}));var hR=of.VISUAL.COMPONENT;function gR(e,t,n,i){for(var o=t.targetVisuals[i],r=Ob.prepareVisualTypes(o),a={color:e.getData().getVisual("color")},s=0,l=r.length;s<l;s++){var u=r[s],c=o["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,d,f)}return a.color;function d(e){return a[e]}function f(e,t){a[e]=t}}Yf(hR,{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",(function(t){var i=e.pipelineContext;!t.isTargetSeries(e)||i&&i.large||n.push(function(e,t,n,i){var o={};return w(e,(function(e){var n=Ob.prepareVisualTypes(t[e]);o[e]=n})),{progress:function(e,r){function a(e){return r.getItemVisual(l,e)}function s(e,t){r.setItemVisual(l,e,t)}var l;for(null!=i&&(i=r.getDimension(i));null!=(l=e.next());){var u=r.getRawDataItem(l);if(!u||!1!==u.visualMap)for(var c=null!=i?r.get(i,l,!0):l,d=n(c),f=t[d],h=o[d],g=0,p=h.length;g<p;g++){var m=h[g];f[m]&&f[m].applyVisual(c,a,s)}}}}}(t.stateList,t.targetVisuals,A(t.getValueState,t),t.getDataDimension(e.getData())))})),n}}),Yf(hR,{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),i=[];t.eachComponent("visualMap",(function(t){if(t.isTargetSeries(e)){var o=t.getVisualMeta(A(gR,null,e,t))||{stops:[],outerColors:[]},r=t.getDataDimension(n),a=n.getDimensionInfo(r);null!=a&&(o.dimension=a.index,i.push(o))}})),e.getData().setVisual("visualMeta",i)}});var pR=function(e,t,n){var i=m((mR[e]||{})[t]);return n&&M(i)?i[i.length-1]:i},mR={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},vR=Ob.mapVisual,yR=Ob.eachVisual,bR=M,TR=w,CR=ml,ER=hl,_R=Qf({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(e,n)},optionUpdated:function(e,t){var n=this.option;o.canvasSupported||(n.realtime=!1),t||xw(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=A(e,this),this.controllerVisuals=_w(this.option.controller,t,e),this.targetVisuals=_w(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries((function(e,n){t.push(n)})):t=Do(e),t},eachTargetSeries:function(e,t){w(this.getTargetSeriesIndices(),(function(n){e.call(t,this.ecModel.getSeriesByIndex(n))}),this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries((function(n){n===e&&(t=!0)})),t},formatValueText:function(e,t,n){var i,o,r=this.option,a=r.precision,s=this.dataBound,l=r.formatter;return n=n||["<",">"],M(e)&&(e=e.slice(),i=!0),o=t?e:i?[u(e[0]),u(e[1])]:u(e),P(l)?l.replace("{value}",i?o[0]:o).replace("{value2}",i?o[1]:o):K(l)?i?l(e[0],e[1]):l(e):i?e[0]===s[0]?n[0]+" "+o[1]:e[1]===s[1]?n[1]+" "+o[0]:o[0]+" - "+o[1]:o;function u(e){return e===s[0]?"min":e===s[1]?"max":(+e).toFixed(Math.min(a,20))}},resetExtent:function(){var e=this.option,t=CR([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension;if(null!=t||e.dimensions.length){if(null!=t)return e.getDimension(t);for(var n=e.dimensions,i=n.length-1;0<=i;i--){var o=n[i];if(!e.getDimensionInfo(o).isCalculationCoord)return o}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},i=t.target||(t.target={}),o=t.controller||(t.controller={});v(i,n),v(o,n);var r=this.isCategory();function a(n){bR(t.color)&&!n.inRange&&(n.inRange={color:t.color.slice().reverse()}),n.inRange=n.inRange||{color:e.get("gradientColor")},TR(this.stateList,(function(e){var t=n[e];if(P(t)){var i=pR(t,"active",r);i?(n[e]={},n[e][t]=i):delete n[e]}}),this)}a.call(this,i),a.call(this,o),(function(e,t,n){var i=e[t],o=e[n];i&&!o&&(o=e[n]={},TR(i,(function(e,t){if(Ob.isValidType(t)){var n=pR(t,"inactive",r);null!=n&&(o[t]=n,"color"!==t||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}})))}).call(this,i,"inRange","outOfRange"),(function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,n=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,i=this.get("inactiveColor");TR(this.stateList,(function(o){var a=this.itemSize,s=e[o];null==(s=s||(e[o]={color:r?i:[i]})).symbol&&(s.symbol=t&&m(t)||(r?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=n&&m(n)||(r?a[0]:[a[0],a[0]])),s.symbol=vR(s.symbol,(function(e){return"none"===e||"square"===e?"roundRect":e}));var l=s.symbolSize;if(null!=l){var u=-1/0;yR(l,(function(e){u<e&&(u=e)})),s.symbolSize=vR(l,(function(e){return ER(e,[0,u],[0,a[0]],!0)}))}}),this)}).call(this,o)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:te,getValueState:te,getVisualMeta:te}),xR=[20,140],IR=_R.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){IR.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual((function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()})),this._resetRange()},resetItemSize:function(){IR.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),null!=e[0]&&!isNaN(e[0])||(e[0]=xR[0]),null!=e[1]&&!isNaN(e[1])||(e[1]=xR[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):M(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){_R.prototype.completeVisualOption.apply(this,arguments),w(this.stateList,(function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)}),this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=ml((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries((function(n){var i=[],o=n.getData();o.each(this.getDataDimension(o),(function(t,n){e[0]<=t&&t<=e[1]&&i.push(n)}),this),t.push({seriesId:n.id,dataIndex:i})}),this),t},getVisualMeta:function(e){var t=DR(0,0,this.getExtent()),n=DR(0,0,this.option.range.slice()),i=[];function o(t,n){i.push({value:t,color:e(t,n)})}for(var r=0,a=0,s=n.length,l=t.length;a<l&&(!n.length||t[a]<=n[0]);a++)t[a]<n[r]&&o(t[a],"outOfRange");for(var u=1;r<s;r++,u=0)u&&i.length&&o(n[r],"outOfRange"),o(n[r],"inRange");for(u=1;a<l;a++)(!n.length||n[n.length-1]<t[a])&&(u&&(i.length&&o(i[i.length-1].value,"outOfRange"),u=0),o(t[a],"outOfRange"));var c=i.length;return{stops:i,outerColors:[c?i[0].color:"transparent",c?i[c-1].color:"transparent"]}}});function DR(e,t,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,o=n[0],r=[],a=0;a<=200&&o<n[1];a++)r.push(o),o+=i;return r.push(n[1]),r}var wR=eh({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t},render:function(e,t,n,i){!1!==(this.visualMapModel=e).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,n=Ml(t.get("padding")||0),i=e.getBoundingRect();e.add(new Ha({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,n){var i=(n=n||{}).forceState,o=this.visualMapModel,r={};if("symbol"===t&&(r.symbol=o.get("itemSymbol")),"color"===t){var a=o.get("contentColor");r.color=a}function s(e){return r[e]}function l(e,t){r[e]=t}var u=o.controllerVisuals[i||o.getValueState(e)];return w(Ob.prepareVisualTypes(u),(function(i){var o=u[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",o=u.__alphaForOpacity),Ob.dependsOn(i,t)&&o&&o.applyVisual(e,s,l)})),r[t]},positionGroup:function(e){var t=this.api;tu(e,this.visualMapModel.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})},doRender:te});function OR(e,t,n){var i=e.option,o=i.align;if(null!=o&&"auto"!==o)return o;for(var r={width:t.getWidth(),height:t.getHeight()},a="horizontal"===i.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[a],u=[0,null,10],c={},d=0;d<3;d++)c[s[1-a][d]]=u[d],c[l[d]]=2===d?n[0]:i[l[d]];var f=[["x","width",3],["y","height",0]][a],h=eu(c,r,i.padding);return l[(h.margin[f[2]]||0)+h[f[0]]+.5*h[f[1]]<.5*r[f[1]]?0:1]}function RR(e,t){return w(e||[],(function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")})),e}var kR=hl,SR=w,AR=Math.min,NR=Math.max,MR=wR.extend({type:"visualMap.continuous",init:function(){MR.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(e,t,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,n){if(t){var i=t[1-n];i=null!=i?i+"":"";var o=this.visualMapModel,r=o.get("textGap"),a=o.itemSize,s=this._shapes.barGroup,l=this._applyTransform([a[0]/2,0===n?-r:a[1]+r],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Da({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===c?"middle":u,textAlign:"horizontal"===c?u:"center",text:i,textFont:d.getFont(),textFill:d.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,n=this._shapes,i=t.itemSize,o=this._orient,r=this._useHandle,a=OR(t,this.api,i),s=n.barGroup=this._createBarGroup(a);s.add(n.outOfRange=KR()),s.add(n.inRange=KR(null,r?LR(this._orient):null,A(this._dragHandle,this,"all",!1),A(this._dragHandle,this,"all",!0)));var l=t.textStyleModel.getTextRect("国"),u=NR(l.width,l.height);r&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,i,u,o,a),this._createHandle(s,1,i,u,o,a)),this._createIndicator(s,i,u,o),e.add(s)},_createHandle:function(e,t,n,i,o){var r=A(this._dragHandle,this,t,!1),a=A(this._dragHandle,this,t,!0),s=KR(function(e,t){return 0===e?[[0,0],[t,0],[t,-t]]:[[0,0],[t,0],[t,t]]}(t,i),LR(this._orient),r,a);s.position[0]=n[0],e.add(s);var l=this.visualMapModel.textStyleModel,u=new Da({draggable:!0,drift:r,onmousemove:function(e){$e(e.event)},ondragend:a,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(u);var c=["horizontal"===o?i/2:1.5*i,"horizontal"===o?0===t?-1.5*i:1.5*i:0===t?-i/2:i/2],d=this._shapes;d.handleThumbs[t]=s,d.handleLabelPoints[t]=c,d.handleLabels[t]=u},_createIndicator:function(e,t,n,i){var o=KR([[0,0]],"move");o.position[0]=t[0],o.attr({invisible:!0,silent:!0}),e.add(o);var r=this.visualMapModel.textStyleModel,a=new Da({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:r.getFont(),textFill:r.getTextColor()}});this.group.add(a);var s=["horizontal"===i?n/2:9,0],l=this._shapes;l.indicator=o,l.indicatorLabel=a,l.indicatorLabelPoint=s},_dragHandle:function(e,t,n,i){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(e,o[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?this._hovering||this._clearHoverLinkToSeries():PR(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[kR(t[0],n,i,!0),kR(t[1],n,i,!0)]},_updateInterval:function(e,t){var n=this.visualMapModel,i=this._handleEnds,o=[0,n.itemSize[1]];lC(t=t||0,i,o,e,0);var r=n.getExtent();this._dataInterval=[kR(i[0],o,r,!0),kR(i[1],o,r,!0)]},_updateView:function(e){var t=this.visualMapModel,n=t.getExtent(),i=this._shapes,o=[0,t.itemSize[1]],r=e?o:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,r,"inRange"),s=this._createBarVisual(n,n,o,"outOfRange");i.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(r,a)},_createBarVisual:function(e,t,n,i){var o={forceState:i,convertOpacityToAlpha:!0},r=this._makeColorGradient(e,o),a=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],s=this._createBarPoints(n,a);return{barColor:new Ya(0,0,0,1,r),barPoints:s,handlesColor:[r[0].color,r[r.length-1].color]}},_makeColorGradient:function(e,t){var n=[],i=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var o=1;o<100;o++){var r=e[0]+i*o;if(r>e[1])break;n.push({color:this.getControllerVisual(r,"color",t),offset:o/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},_createBarPoints:function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new _n("horizontal"!==t||n?"horizontal"===t&&n?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||n?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,o=n.handleThumbs,r=n.handleLabels;SR([0,1],(function(a){var s=o[a];s.setStyle("fill",t.handlesColor[a]),s.position[1]=e[a];var l=js(n.handleLabelPoints[a],Us(s,this.group));r[a].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[a]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===a?"bottom":"top":"left",n.barGroup)})}),this)}},_showIndicator:function(e,t,n,i){var o=this.visualMapModel,r=o.getExtent(),a=o.itemSize,s=kR(e,r,[0,a[1]],!0),l=this._shapes,u=l.indicator;if(u){u.position[1]=s,u.attr("invisible",!1),u.setShape("points",function(e,t,n,i){return e?[[0,-AR(t,NR(n,0))],[6,0],[0,AR(t,NR(i-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,i,s,a[1]));var c=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});u.setStyle("fill",c);var d=js(l.indicatorLabelPoint,Us(u,this.group)),f=l.indicatorLabel;f.attr("invisible",!1);var h=this._applyTransform("left",l.barGroup),g=this._orient;f.setStyle({text:(n||"")+o.formatValueText(t),textVerticalAlign:"horizontal"===g?h:"middle",textAlign:"horizontal"===g?"center":h,x:d[0],y:d[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",(function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,i=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);i[1]=AR(NR(0,i[1]),n[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}})).on("mouseout",(function(){e._hovering=!1,e._dragging||e._clearHoverLinkToSeries()}))},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var n=this.visualMapModel;if(n.option.hoverLink){var i=[0,n.itemSize[1]],o=n.getExtent();e=AR(NR(i[0],e),i[1]);var r=function(e,t,n){var i=6,o=e.get("hoverLinkDataSize");return o&&(i=kR(o,t,n,!0)/2),i}(n,o,i),a=[e-r,e+r],s=kR(e,i,o,!0),l=[kR(a[0],i,o,!0),kR(a[1],i,o,!0)];a[0]<i[0]&&(l[0]=-1/0),i[1]<a[1]&&(l[1]=1/0),t&&(l[0]===-1/0?this._showIndicator(s,l[1],"< ",r):l[1]===1/0?this._showIndicator(s,l[0],"> ",r):this._showIndicator(s,s,"≈ ",r));var u=this._hoverLinkDataIndices,c=[];(t||PR(n))&&(c=this._hoverLinkDataIndices=n.findTargetDataIndices(l));var d=function(e,t){var n={},i={};return o(e||[],n),o(t||[],i,n),[r(n),r(i)];function o(e,t,n){for(var i=0,o=e.length;i<o;i++)for(var r=e[i].seriesId,a=Do(e[i].dataIndex),s=n&&n[r],l=0,u=a.length;l<u;l++){var c=a[l];s&&s[c]?s[c]=null:(t[r]||(t[r]={}))[c]=1}}function r(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)&&null!=e[i])if(t)n.push(+i);else{var o=r(e[i],!0);o.length&&n.push({seriesId:i,dataIndex:o})}return n}}(u,c);this._dispatchHighDown("downplay",RR(d[0],n)),this._dispatchHighDown("highlight",RR(d[1],n))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,n=this.visualMapModel;if(t&&null!=t.dataIndex){var i=this.ecModel.getSeriesByIndex(t.seriesIndex);if(n.isTargetSeries(i)){var o=i.getData(t.dataType),r=o.get(n.getDataDimension(o),t.dataIndex,!0);isNaN(r)||this._showIndicator(r,r)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",RR(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,n,i){var o=Us(t,i?null:this.group);return tl[M(e)?"applyTransform":"transformDirection"](e,o,n)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function KR(e,t,n,i){return new Ma({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(e){$e(e.event)},ondragend:i})}function PR(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function LR(e){return"vertical"===e?"ns-resize":"ew-resize"}jf({type:"selectDataRange",event:"dataRangeSelected",update:"update"},(function(e,t){t.eachComponent({mainType:"visualMap",query:e},(function(t){t.setSelected(e.selected)}))})),qf(uR);var BR=_R.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){BR.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();FR[this._mode].call(this),this._resetSelected(e,t);var i=this.option.categories;this.resetVisual((function(e,t){"categories"===n?(e.mappingMethod="category",e.categories=m(i)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=O(this._pieceList,(function(e){return e=m(e),"inRange"!==t&&(e.visual=null),e})))}))},completeVisualOption:function(){var e=this.option,t={},n=Ob.listVisualTypes(),i=this.isCategory();function o(e,t,n){return e&&e[t]&&(L(e[t])?e[t].hasOwnProperty(n):e[t]===n)}w(e.pieces,(function(e){w(n,(function(n){e.hasOwnProperty(n)&&(t[n]=1)}))})),w(t,(function(t,n){var r=0;w(this.stateList,(function(t){r|=o(e,t,n)||o(e.target,t,n)}),this),r||w(this.stateList,(function(t){(e[t]||(e[t]={}))[n]=pR(n,"inRange"===t?"active":"inactive",i)}))}),this),_R.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var n=this.option,i=this._pieceList,o=(t?n:e).selected||{};if(n.selected=o,w(i,(function(e,t){var n=this.getSelectedMapKey(e);o.hasOwnProperty(n)||(o[n]=!0)}),this),"single"===n.selectedMode){var r=!1;w(i,(function(e,t){var n=this.getSelectedMapKey(e);o[n]&&(r?o[n]=!1:r=!0)}),this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&0<e.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=m(e)},getValueState:function(e){var t=Ob.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries((function(n){var i=[],o=n.getData();o.each(this.getDataDimension(o),(function(t,n){Ob.findPieceIndex(t,this._pieceList)===e&&i.push(n)}),this),t.push({seriesId:n.id,dataIndex:i})}),this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],n=[],i=this,o=this._pieceList.slice();if(o.length){var r=o[0].interval[0];r!==-1/0&&o.unshift({interval:[-1/0,r]}),(r=o[o.length-1].interval[1])!==1/0&&o.push({interval:[r,1/0]})}else o.push({interval:[-1/0,1/0]});var a=-1/0;return w(o,(function(e){var t=e.interval;t&&(t[0]>a&&s([a,t[0]],"outOfRange"),s(t.slice()),a=t[1])}),this),{stops:t,outerColors:n}}function s(o,r){var a=i.getRepresentValue({interval:o});r=r||i.getValueState(a);var s=e(a,r);o[0]===-1/0?n[0]=s:o[1]===1/0?n[1]=s:t.push({value:o[0],color:s},{value:o[1],color:s})}}}),FR={splitNumber:function(){var e=this.option,t=this._pieceList,n=Math.min(e.precision,20),i=this.getExtent(),o=e.splitNumber;o=Math.max(parseInt(o,10),1),e.splitNumber=o;for(var r=(i[1]-i[0])/o;+r.toFixed(n)!==r&&n<5;)n++;e.precision=n,r=+r.toFixed(n),e.minOpen&&t.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<o;s+=r,a++)t.push({interval:[s,a===o-1?i[1]:s+r],close:[1,1]});e.maxOpen&&t.push({interval:[i[1],1/0],close:[0,0]}),Rl(t),w(t,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(){var e=this.option;w(e.categories,(function(e){this._pieceList.push({text:this.formatValueText(e,!0),value:e})}),this),zR(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;w(e.pieces,(function(e,n){L(e)||(e={value:e});var i={text:"",index:n};if(null!=e.label&&(i.text=e.label),e.hasOwnProperty("value")){var o=i.value=e.value;i.interval=[o,o],i.close=[1,1]}else{for(var r=i.interval=[],a=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],f=0;f<3&&null==r[c];f++)r[c]=e[d[f]],a[c]=s[f],u[c]=2===f;null==r[c]&&(r[c]=l[c])}u[0]&&r[1]===1/0&&(a[0]=0),u[1]&&r[0]===-1/0&&(a[1]=0),r[0]===r[1]&&a[0]&&a[1]&&(i.value=r[0])}i.visual=Ob.retrieveVisuals(e),t.push(i)}),this),zR(e,t),Rl(t),w(t,(function(e){var t=e.close;e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,[["<","≤"][t[1]],[">","≥"][t[0]]])}),this)}};function zR(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}wR.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),i=t.textStyleModel,o=i.getFont(),r=i.getTextColor(),a=this._getItemAlign(),s=t.itemSize,l=this._getViewData(),u=l.endsText,c=V(t.get("showLabel",!0),!u);u&&this._renderEndsText(e,u[0],s,c,a),w(l.viewPieceList,(function(i){var l=i.piece,u=new _n;u.onclick=A(this._onItemClick,this,l),this._enableHoverLink(u,i.indexInModelPieceList);var d=t.getRepresentValue(l);if(this._createItemSymbol(u,d,[0,0,s[0],s[1]]),c){var f=this.visualMapModel.getValueState(d);u.add(new Da({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:l.text,textVerticalAlign:"middle",textAlign:a,textFont:o,textFill:r,opacity:"outOfRange"===f?.5:1}}))}e.add(u)}),this),u&&this._renderEndsText(e,u[1],s,c,a),Ql(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function n(e){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:e,batch:RR(n.findTargetDataIndices(t),n)})}e.on("mouseover",A(n,this,"highlight")).on("mouseout",A(n,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return OR(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(e,t,n,i,o){if(t){var r=new _n,a=this.visualMapModel.textStyleModel;r.add(new Da({style:{x:i?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?o:"center",text:t,textFont:a.getFont(),textFill:a.getTextColor()}})),e.add(r)}},_getViewData:function(){var e=this.visualMapModel,t=O(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),n=e.get("text"),i=e.get("orient"),o=e.get("inverse");return("horizontal"===i?o:!o)?t.reverse():n=n&&n.slice().reverse(),{viewPieceList:t,endsText:n}},_createItemSymbol:function(e,t,n){e.add(Ug(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,n=t.option,i=m(n.selected),o=t.getSelectedMapKey(e);"single"===n.selectedMode?(i[o]=!0,w(i,(function(e,t){i[t]=t===o}))):i[o]=!i[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),qf(uR);var HR,VR="urn:schemas-microsoft-com:vml",WR="undefined"==typeof window?null:window,$R=!1,qR=WR&&WR.document;function UR(e){return HR(e)}if(qR&&!o.canvasSupported)try{qR.namespaces.zrvml||qR.namespaces.add("zrvml",VR),HR=function(e){return qR.createElement("<zrvml:"+e+' class="zrvml">')}}catch(e){HR=function(e){return qR.createElement("<"+e+' xmlns="'+VR+'" class="zrvml">')}}var jR=Wr.CMD,GR=Math.round,XR=Math.sqrt,YR=Math.abs,ZR=Math.cos,JR=Math.sin,QR=Math.max;if(!o.canvasSupported){var ek=",",tk="progid:DXImageTransform.Microsoft",nk=21600,ik=nk/2,ok=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=nk+","+nk,e.coordorigin="0,0"},rk=function(e,t,n){return"rgb("+[e,t,n].join(",")+")"},ak=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},sk=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},lk=function(e,t,n){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+n},uk=Ki,ck=function(e,t,n){var i=Bt(t);n=+n,isNaN(n)&&(n=1),i&&(e.color=rk(i[0],i[1],i[2]),e.opacity=n*i[3])},dk=function(e,t,n,i){var o="fill"===t,r=e.getElementsByTagName(t)[0];null!=n[t]&&"none"!==n[t]&&(o||!o&&n.lineWidth)?(e[o?"filled":"stroked"]="true",n[t]instanceof Ua&&sk(e,r),r=r||UR(t),o?function(e,t,n){var i,o=t.fill;if(null!=o)if(o instanceof Ua){var r,a=0,s=[0,0],l=0,u=1,c=n.getBoundingRect(),d=c.width,f=c.height;if("linear"===o.type){r="gradient";var h=n.transform,g=[o.x*d,o.y*f],p=[o.x2*d,o.y2*f];h&&(Te(g,g,h),Te(p,p,h)),(a=180*Math.atan2(p[0]-g[0],p[1]-g[1])/Math.PI)<0&&(a+=360),a<1e-6&&(a=0)}else{r="gradientradial";var m=n.scale,v=d,y=f;s=[((g=[o.x*d,o.y*f])[0]-c.x)/v,(g[1]-c.y)/y],(h=n.transform)&&Te(g,g,h);var b=QR(v/=m[0]*nk,y/=m[1]*nk);u=2*o.r/b-(l=0/b)}var T=o.colorStops.slice();T.sort((function(e,t){return e.offset-t.offset}));for(var C=T.length,E=[],_=[],x=0;x<C;x++){var I=T[x],D=(i=Bt(I.color),[rk(i[0],i[1],i[2]),i[3]]);_.push(I.offset*u+l+" "+D[0]),0!==x&&x!==C-1||E.push(D)}if(2<=C){var w=E[0][0],O=E[1][0],R=E[0][1]*t.opacity,k=E[1][1]*t.opacity;e.type=r,e.method="none",e.focus="100%",e.angle=a,e.color=w,e.color2=O,e.colors=_.join(","),e.opacity=k,e.opacity2=R}"radial"===r&&(e.focusposition=s.join(","))}else ck(e,o,t.opacity)}(r,n,i):function(e,t){t.lineDash&&(e.dashstyle=t.lineDash.join(" ")),null==t.stroke||t.stroke instanceof Ua||ck(e,t.stroke,t.opacity)}(r,n),ak(e,r)):(e[o?"filled":"stroked"]="false",sk(e,r))},fk=[[],[],[]];ua.prototype.brushVML=function(e){var t=this.style,n=this._vmlEl;n||(n=UR("shape"),ok(n),this._vmlEl=n),dk(n,"fill",t,this),dk(n,"stroke",t,this);var i=this.transform,o=null!=i,r=n.getElementsByTagName("stroke")[0];if(r){var a=t.lineWidth;o&&!t.strokeNoScale&&(a*=XR(YR(i[0]*i[3]-i[1]*i[2]))),r.weight=a+"px"}var s=this.path||(this.path=new Wr);this.__dirtyPath&&(s.beginPath(),s.subPixelOptimize=!1,this.buildPath(s,this.shape),s.toStatic(),this.__dirtyPath=!1),n.path=function(e,t){var n,i,o,r,a,s,l=jR.M,u=jR.C,c=jR.L,d=jR.A,f=jR.Q,h=[],g=e.data,p=e.len();for(r=0;r<p;){switch(i="",n=0,o=g[r++]){case l:i=" m ",n=1,a=g[r++],s=g[r++],fk[0][0]=a,fk[0][1]=s;break;case c:i=" l ",n=1,a=g[r++],s=g[r++],fk[0][0]=a,fk[0][1]=s;break;case f:case u:i=" c ",n=3;var m,v,y=g[r++],b=g[r++],T=g[r++],C=g[r++];o===f?(T=((m=T)+2*y)/3,C=((v=C)+2*b)/3,y=(a+2*y)/3,b=(s+2*b)/3):(m=g[r++],v=g[r++]),fk[0][0]=y,fk[0][1]=b,fk[1][0]=T,fk[1][1]=C,a=fk[2][0]=m,s=fk[2][1]=v;break;case d:var E=0,_=0,x=1,I=1,D=0;t&&(E=t[4],_=t[5],x=XR(t[0]*t[0]+t[1]*t[1]),I=XR(t[2]*t[2]+t[3]*t[3]),D=Math.atan2(-t[1]/I,t[0]/x));var w=g[r++],O=g[r++],R=g[r++],k=g[r++],S=g[r++]+D,A=g[r++]+S+D;r++;var N=g[r++],M=w+ZR(S)*R,K=O+JR(S)*k,P=(y=w+ZR(A)*R,b=O+JR(A)*k,N?" wa ":" at ");Math.abs(M-y)<1e-4&&(.01<Math.abs(A-S)?N&&(M+=.0125):Math.abs(K-O)<1e-4?N&&M<w||!N&&w<M?b-=.0125:b+=.0125:N&&K<O||!N&&O<K?y+=.0125:y-=.0125),h.push(P,GR(((w-R)*x+E)*nk-ik),ek,GR(((O-k)*I+_)*nk-ik),ek,GR(((w+R)*x+E)*nk-ik),ek,GR(((O+k)*I+_)*nk-ik),ek,GR((M*x+E)*nk-ik),ek,GR((K*I+_)*nk-ik),ek,GR((y*x+E)*nk-ik),ek,GR((b*I+_)*nk-ik)),a=y,s=b;break;case jR.R:var L=fk[0],B=fk[1];L[0]=g[r++],L[1]=g[r++],B[0]=L[0]+g[r++],B[1]=L[1]+g[r++],t&&(Te(L,L,t),Te(B,B,t)),L[0]=GR(L[0]*nk-ik),B[0]=GR(B[0]*nk-ik),L[1]=GR(L[1]*nk-ik),B[1]=GR(B[1]*nk-ik),h.push(" m ",L[0],ek,L[1]," l ",B[0],ek,L[1]," l ",B[0],ek,B[1]," l ",L[0],ek,B[1]);break;case jR.Z:h.push(" x ")}if(0<n){h.push(i);for(var F=0;F<n;F++){var z=fk[F];t&&Te(z,z,t),h.push(GR(z[0]*nk-ik),ek,GR(z[1]*nk-ik),F<n-1?ek:"")}}}return h.join("")}(s,this.transform),n.style.zIndex=lk(this.zlevel,this.z,this.z2),ak(e,n),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},ua.prototype.onRemove=function(e){sk(e,this._vmlEl),this.removeRectText(e)},ua.prototype.onAdd=function(e){ak(e,this._vmlEl),this.appendRectText(e)},Hi.prototype.brushVML=function(e){var t,n,i=this.style,o=i.image;if(function(e){return"object"==typeof e&&e.tagName&&"IMG"===e.tagName.toUpperCase()}(o)){var r=o.src;if(r===this._imageSrc)t=this._imageWidth,n=this._imageHeight;else{var a=o.runtimeStyle,s=a.width,l=a.height;a.width="auto",a.height="auto",t=o.width,n=o.height,a.width=s,a.height=l,this._imageSrc=r,this._imageWidth=t,this._imageHeight=n}o=r}else o===this._imageSrc&&(t=this._imageWidth,n=this._imageHeight);if(o){var u=i.x||0,c=i.y||0,d=i.width,f=i.height,h=i.sWidth,g=i.sHeight,p=i.sx||0,m=i.sy||0,v=h&&g,y=this._vmlEl;y||(y=qR.createElement("div"),ok(y),this._vmlEl=y);var b,T=y.style,C=!1,E=1,_=1;if(this.transform&&(E=XR((b=this.transform)[0]*b[0]+b[1]*b[1]),_=XR(b[2]*b[2]+b[3]*b[3]),C=b[1]||b[2]),C){var x=[u,c],I=[u+d,c],D=[u,c+f],w=[u+d,c+f];Te(x,x,b),Te(I,I,b),Te(D,D,b),Te(w,w,b);var O=QR(x[0],I[0],D[0],w[0]),R=QR(x[1],I[1],D[1],w[1]),k=[];k.push("M11=",b[0]/E,ek,"M12=",b[2]/_,ek,"M21=",b[1]/E,ek,"M22=",b[3]/_,ek,"Dx=",GR(u*E+b[4]),ek,"Dy=",GR(c*_+b[5])),T.padding="0 "+GR(O)+"px "+GR(R)+"px 0",T.filter=tk+".Matrix("+k.join("")+", SizingMethod=clip)"}else b&&(u=u*E+b[4],c=c*_+b[5]),T.filter="",T.left=GR(u)+"px",T.top=GR(c)+"px";var S=this._imageEl,A=this._cropEl;S||(S=qR.createElement("div"),this._imageEl=S);var N=S.style;if(v){if(t&&n)N.width=GR(E*t*d/h)+"px",N.height=GR(_*n*f/g)+"px";else{var M=new Image,K=this;M.onload=function(){M.onload=null,n=M.height,N.width=GR(E*(t=M.width)*d/h)+"px",N.height=GR(_*n*f/g)+"px",K._imageWidth=t,K._imageHeight=n,K._imageSrc=o},M.src=o}A||((A=qR.createElement("div")).style.overflow="hidden",this._cropEl=A);var P=A.style;P.width=GR((d+p*d/h)*E),P.height=GR((f+m*f/g)*_),P.filter=tk+".Matrix(Dx="+-p*d/h*E+",Dy="+-m*f/g*_+")",A.parentNode||y.appendChild(A),S.parentNode!==A&&A.appendChild(S)}else N.width=GR(E*d)+"px",N.height=GR(_*f)+"px",y.appendChild(S),A&&A.parentNode&&(y.removeChild(A),this._cropEl=null);var L="",B=i.opacity;B<1&&(L+=".Alpha(opacity="+GR(100*B)+") "),N.filter=L+=tk+".AlphaImageLoader(src="+o+", SizingMethod=scale)",y.style.zIndex=lk(this.zlevel,this.z,this.z2),ak(e,y),null!=i.text&&this.drawRectText(e,this.getBoundingRect())}},Hi.prototype.onRemove=function(e){sk(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},Hi.prototype.onAdd=function(e){ak(e,this._vmlEl),this.appendRectText(e)};var hk,gk="normal",pk={},mk=0,vk=document.createElement("div");ti.measureText=function(e,t){var n=qR;hk||((hk=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",qR.body.appendChild(hk));try{hk.style.font=t}catch(e){}return hk.innerHTML="",hk.appendChild(n.createTextNode(e)),{width:hk.offsetWidth}};for(var yk=new En,bk=function(e,t,n,i){var o=this.style;this.__dirty&&_i(o);var r=o.text;if(null!=r&&(r+=""),r){if(o.rich){var a=hi(r,o);r=[];for(var s=0;s<a.lines.length;s++){for(var l=a.lines[s].tokens,u=[],c=0;c<l.length;c++)u.push(l[c].text);r.push(u.join(""))}r=r.join("\n")}var d,f,h=o.textAlign,g=o.textVerticalAlign,p=function(e){var t=pk[e];if(!t){100<mk&&(mk=0,pk={});var n,i=vk.style;try{i.font=e,n=i.fontFamily.split(",")[0]}catch(e){}t={style:i.fontStyle||gk,variant:i.fontVariant||gk,weight:i.fontWeight||gk,size:0|parseFloat(i.fontSize||12),family:n||"Microsoft YaHei"},pk[e]=t,mk++}return t}(o.font),m=p.style+" "+p.variant+" "+p.weight+" "+p.size+'px "'+p.family+'"';n=n||ii(r,m,h,g,o.textPadding,o.textLineHeight);var v=this.transform;if(v&&!i&&(yk.copy(t),yk.applyTransform(v),t=yk),i)d=t.x,f=t.y;else{var y=o.textPosition;if(y instanceof Array)d=t.x+uk(y[0],t.width),f=t.y+uk(y[1],t.height),h=h||"left";else{var b=this.calculateTextPosition?this.calculateTextPosition({},o,t):ai({},o,t);d=b.x,f=b.y,h=h||b.textAlign,g=g||b.textVerticalAlign}}d=oi(d,n.width,h),f=ri(f,n.height,g),f+=n.height/2;var T,C,E,_=UR,x=this._textVmlEl;x?C=(T=(E=x.firstChild).nextSibling).nextSibling:(x=_("line"),T=_("path"),C=_("textpath"),E=_("skew"),C.style["v-text-align"]="left",ok(x),T.textpathok=!0,C.on=!0,x.from="0 0",x.to="1000 0.05",ak(x,E),ak(x,T),ak(x,C),this._textVmlEl=x);var I=[d,f],D=x.style;v&&i?(Te(I,I,v),E.on=!0,E.matrix=v[0].toFixed(3)+ek+v[2].toFixed(3)+ek+v[1].toFixed(3)+ek+v[3].toFixed(3)+",0,0",E.offset=(GR(I[0])||0)+","+(GR(I[1])||0),E.origin="0 0",D.left="0px",D.top="0px"):(E.on=!1,D.left=GR(d)+"px",D.top=GR(f)+"px"),C.string=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}(r);try{C.style.font=m}catch(e){}dk(x,"fill",{fill:o.textFill,opacity:o.opacity},this),dk(x,"stroke",{stroke:o.textStroke,opacity:o.opacity,lineDash:o.lineDash||null},this),x.style.zIndex=lk(this.zlevel,this.z,this.z2),ak(e,x)}},Tk=function(e){sk(e,this._textVmlEl),this._textVmlEl=null},Ck=function(e){ak(e,this._textVmlEl)},Ek=[Bi,zi,Hi,ua,Da],_k=0;_k<Ek.length;_k++){var xk=Ek[_k].prototype;xk.drawRectText=bk,xk.removeRectText=Tk,xk.appendRectText=Ck}Da.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},Da.prototype.onRemove=function(e){this.removeRectText(e)},Da.prototype.onAdd=function(e){this.appendRectText(e)}}function Ik(e){return parseInt(e,10)}function Dk(e,t){!function(){if(!$R&&qR){$R=!0;var e=qR.styleSheets;e.length<31?qR.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):e[0].addRule(".zrvml","behavior:url(#default#VML)")}}(),this.root=e,this.storage=t;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",e.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var o=t.delFromStorage,r=t.addToStorage;t.delFromStorage=function(e){o.call(t,e),e&&e.onRemove&&e.onRemove(i)},t.addToStorage=function(e){e.onAdd&&e.onAdd(i),r.call(t,e)},this._firstPaint=!0}function wk(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}Dk.prototype={constructor:Dk,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,n=0;n<e.length;n++){var i=e[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(t),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(t),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,t),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){if(e=null==e?this._getWidth():e,t=null==t?this._getHeight():t,this._width!==e||this._height!==t){this._width=e,this._height=t;var n=this._vmlViewport.style;n.width=e+"px",n.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||Ik(t.width))-Ik(t.paddingLeft)-Ik(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||Ik(t.height))-Ik(t.paddingTop)-Ik(t.paddingBottom)|0}},w(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],(function(e){Dk.prototype[e]=function(){}})),bo("vml",Dk);var Ok=Wr.CMD,Rk=Array.prototype.join,kk="none",Sk=Math.round,Ak=Math.sin,Nk=Math.cos,Mk=Math.PI,Kk=2*Math.PI,Pk=180/Mk;function Lk(e){return Sk(1e4*e)/1e4}function Bk(e){return e<1e-4&&-1e-4<e}function Fk(e,t){t&&zk(e,"transform","matrix("+Rk.call(t,",")+")")}function zk(e,t,n){n&&("linear"===n.type||"radial"===n.type)||e.setAttribute(t,n)}function Hk(e,t,n,i){if(function(e,t){var n=t?e.textFill:e.fill;return null!=n&&n!==kk}(t,n)){var o=n?t.textFill:t.fill;zk(e,"fill",o="transparent"===o?kk:o),zk(e,"fill-opacity",null!=t.fillOpacity?t.fillOpacity*t.opacity:t.opacity)}else zk(e,"fill",kk);if(function(e,t){var n=t?e.textStroke:e.stroke;return null!=n&&n!==kk}(t,n)){var r=n?t.textStroke:t.stroke;zk(e,"stroke",r="transparent"===r?kk:r),zk(e,"stroke-width",(n?t.textStrokeWidth:t.lineWidth)/(!n&&t.strokeNoScale?i.getLineScale():1)),zk(e,"paint-order",n?"stroke":"fill"),zk(e,"stroke-opacity",null!=t.strokeOpacity?t.strokeOpacity:t.opacity),t.lineDash?(zk(e,"stroke-dasharray",t.lineDash.join(",")),zk(e,"stroke-dashoffset",Sk(t.lineDashOffset||0))):zk(e,"stroke-dasharray",""),t.lineCap&&zk(e,"stroke-linecap",t.lineCap),t.lineJoin&&zk(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&zk(e,"stroke-miterlimit",t.miterLimit)}else zk(e,"stroke",kk)}var Vk={brush:function(e){var t=e.style,n=e.__svgEl;n||(n=wk("path"),e.__svgEl=n),e.path||e.createPathProxy();var i=e.path;if(e.__dirtyPath){i.beginPath(),i.subPixelOptimize=!1,e.buildPath(i,e.shape),e.__dirtyPath=!1;var o=function(e){for(var t=[],n=e.data,i=e.len(),o=0;o<i;){var r="",a=0;switch(n[o++]){case Ok.M:r="M",a=2;break;case Ok.L:r="L",a=2;break;case Ok.Q:r="Q",a=4;break;case Ok.C:r="C",a=6;break;case Ok.A:var s=n[o++],l=n[o++],u=n[o++],c=n[o++],d=n[o++],f=n[o++],h=n[o++],g=n[o++],p=Math.abs(f),m=Bk(p-Kk)||(g?Kk<=f:Kk<=-f),v=0<f?f%Kk:f%Kk+Kk,y=!1;y=!!m||!Bk(p)&&Mk<=v==!!g;var b=Lk(s+u*Nk(d)),T=Lk(l+c*Ak(d));m&&(f=g?Kk-1e-4:1e-4-Kk,y=!0,9===o&&t.push("M",b,T));var C=Lk(s+u*Nk(d+f)),E=Lk(l+c*Ak(d+f));t.push("A",Lk(u),Lk(c),Sk(h*Pk),+y,+g,C,E);break;case Ok.Z:r="Z";break;case Ok.R:C=Lk(n[o++]),E=Lk(n[o++]);var _=Lk(n[o++]),x=Lk(n[o++]);t.push("M",C,E,"L",C+_,E,"L",C+_,E+x,"L",C,E+x,"L",C,E)}r&&t.push(r);for(var I=0;I<a;I++)t.push(Lk(n[o++]))}return t.join(" ")}(i);o.indexOf("NaN")<0&&zk(n,"d",o)}Hk(n,t,!1,e),Fk(n,e.transform),null!=t.text?Xk(e,e.getBoundingRect()):Zk(e)}},Wk={brush:function(e){var t=e.style,n=t.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var i=t.x||0,o=t.y||0,r=t.width,a=t.height,s=e.__svgEl;s||(s=wk("image"),e.__svgEl=s),n!==e.__imageSrc&&(function(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink","href",n)}(s,0,n),e.__imageSrc=n),zk(s,"width",r),zk(s,"height",a),zk(s,"x",i),zk(s,"y",o),Fk(s,e.transform),null!=t.text?Xk(e,e.getBoundingRect()):Zk(e)}}},$k={},qk=new En,Uk={},jk=[],Gk={left:"start",right:"end",center:"middle",middle:"middle"},Xk=function(e,t){var n=e.style,i=e.transform,o=e instanceof Da||n.transformText;e.__dirty&&_i(n);var r=n.text;if(null!=r&&(r+=""),Li(r,n)){null==r&&(r=""),!o&&i&&(qk.copy(t),qk.applyTransform(i),t=qk);var a=e.__textSvgEl;a||(a=wk("text"),e.__textSvgEl=a);var s=a.style,l=n.font||ei,u=a.__computedFont;l!==a.__styleFont&&(s.font=a.__styleFont=l,u=a.__computedFont=s.font);var c=n.textPadding,d=e.__textCotentBlock;d&&!e.__dirtyText||(d=e.__textCotentBlock=fi(r,u,c,n.textLineHeight,n.truncate));var f=d.outerHeight,h=d.lineHeight;Si(Uk,e,n,t);var g=Uk.baseX,p=Uk.baseY,m=Uk.textAlign||"left",v=Uk.textVerticalAlign;!function(e,t,n,i,o,r,a){it(jk),t&&n&&ot(jk,n);var s=i.textRotation;if(o&&s){var l=i.textOrigin;"center"===l?(r=o.width/2+o.x,a=o.height/2+o.y):l&&(r=l[0]+o.x,a=l[1]+o.y),jk[4]-=r,jk[5]-=a,st(jk,jk,s),jk[4]+=r,jk[5]+=a}Fk(e,jk)}(a,o,i,n,t,g,p);var y=g,b=ri(p,f,v);c&&(y=function(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}(g,m,c),b+=c[0]),b+=h/2,Hk(a,n,!0,e);var T=d.canCacheByTextString,C=e.__tspanList||(e.__tspanList=[]),E=C.length;if(T&&e.__canCacheByTextString&&e.__text===r){if(e.__dirtyText&&E)for(var _=0;_<E;++_)Yk(C[_],m,y,b+_*h)}else{e.__text=r,e.__canCacheByTextString=T;var x=d.lines,I=x.length;for(_=0;_<I;_++){var D=C[_],w=x[_];D?D.__zrText!==w&&(D.innerHTML="",D.appendChild(document.createTextNode(w))):(D=C[_]=wk("tspan"),a.appendChild(D),D.appendChild(document.createTextNode(w))),Yk(D,m,y,b+_*h)}if(I<E){for(;_<E;_++)a.removeChild(C[_]);C.length=I}}}};function Yk(e,t,n,i){zk(e,"dominant-baseline","middle"),zk(e,"text-anchor",Gk[t]),zk(e,"x",n),zk(e,"y",i)}function Zk(e){e&&e.__textSvgEl&&(e.__textSvgEl.parentNode&&e.__textSvgEl.parentNode.removeChild(e.__textSvgEl),e.__textSvgEl=null,e.__tspanList=[],e.__text=null)}function Jk(){}function Qk(e,t){for(var n=0,i=t.length,o=0,r=0;n<i;n++){var a=t[n];if(a.removed){for(s=[],l=r;l<r+a.count;l++)s.push(l);a.indices=s,r+=a.count}else{for(var s=[],l=o;l<o+a.count;l++)s.push(l);a.indices=s,o+=a.count,a.added||(r+=a.count)}}return t}$k.drawRectText=Xk,$k.brush=function(e){null!=e.style.text?Xk(e,!1):Zk(e)},Jk.prototype={diff:function(e,t,n){this.equals=n=n||function(e,t){return e===t};var i=this;e=e.slice();var o=(t=t.slice()).length,r=e.length,a=1,s=o+r,l=[{newPos:-1,components:[]}],u=this.extractCommon(l[0],t,e,0);if(l[0].newPos+1>=o&&r<=u+1){for(var c=[],d=0;d<t.length;d++)c.push(d);return[{indices:c,count:t.length}]}function f(){for(var n=-1*a;n<=a;n+=2){var s,u=l[n-1],c=l[n+1],d=(c?c.newPos:0)-n;u&&(l[n-1]=void 0);var f=u&&u.newPos+1<o,h=c&&0<=d&&d<r;if(f||h){if(!f||h&&u.newPos<c.newPos?(s={newPos:(g=c).newPos,components:g.components.slice(0)},i.pushComponent(s.components,void 0,!0)):((s=u).newPos++,i.pushComponent(s.components,!0,void 0)),d=i.extractCommon(s,t,e,n),s.newPos+1>=o&&r<=d+1)return Qk(0,s.components);l[n]=s}else l[n]=void 0}var g;a++}for(;a<=s;){var h=f();if(h)return h}},pushComponent:function(e,t,n){var i=e[e.length-1];i&&i.added===t&&i.removed===n?e[e.length-1]={count:i.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,i){for(var o=t.length,r=n.length,a=e.newPos,s=a-i,l=0;a+1<o&&s+1<r&&this.equals(t[a+1],n[s+1]);)a++,s++,l++;return l&&e.components.push({count:l}),e.newPos=a,s},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var eS=new Jk;function tS(e,t,n,i,o){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=o||"_dom",this.nextId=0}function nS(e,t){tS.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function iS(e,t){tS.call(this,e,t,"clipPath","__clippath_in_use__")}function oS(e,t){tS.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function rS(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function aS(e){return parseInt(e,10)}function sS(e,t){return t&&e&&t.parentNode!==e}function lS(e,t,n){if(sS(e,t)&&n){var i=n.nextSibling;i?e.insertBefore(t,i):e.appendChild(t)}}function uS(e,t){if(sS(e,t)){var n=e.firstChild;n?e.insertBefore(t,n):e.appendChild(t)}}function cS(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function dS(e){return e.__textSvgEl}function fS(e){return e.__svgEl}function hS(e,t,n,i){this.root=e,this.storage=t,this._opts=n=b({},n||{});var o=wk("svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("version","1.1"),o.setAttribute("baseProfile","full"),o.style.cssText="user-select:none;position:absolute;left:0;top:0;";var r=wk("g");o.appendChild(r);var a=wk("g");o.appendChild(a),this.gradientManager=new nS(i,a),this.clipPathManager=new iS(i,a),this.shadowManager=new oS(i,a);var s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgDom=o,this._svgRoot=a,this._backgroundRoot=r,this._viewport=s,e.appendChild(s),s.appendChild(o),this.resize(n.width,n.height),this._visibleList=[]}tS.prototype.createElement=wk,tS.prototype.getDefs=function(e){var t=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?e?((n=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(n.contains=function(e){var t=n.children;if(!t)return!1;for(var i=t.length-1;0<=i;--i)if(t[i]===e)return!0;return!1}),n):null:n[0]},tS.prototype.update=function(e,t){if(e){var n=this.getDefs(!1);if(e[this._domName]&&n.contains(e[this._domName]))"function"==typeof t&&t(e);else{var i=this.add(e);i&&(e[this._domName]=i)}}},tS.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},tS.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},tS.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return w(this._tagNames,(function(n){var i=e.getElementsByTagName(n);t=t.concat([].slice.call(i))})),t},tS.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;w(e,(function(e){e[t._markLabel]="0"}))},tS.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},tS.prototype.removeUnused=function(){var e=this.getDefs(!1);if(e){var t=this.getDoms(),n=this;w(t,(function(t){"1"!==t[n._markLabel]&&e.removeChild(t)}))}},tS.prototype.getSvgProxy=function(e){return e instanceof ua?Vk:e instanceof Hi?Wk:e instanceof Da?$k:Vk},tS.prototype.getTextSvgElement=function(e){return e.__textSvgEl},tS.prototype.getSvgElement=function(e){return e.__svgEl},x(nS,tS),nS.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var n=this;w(["fill","stroke"],(function(i){if(t.style[i]&&("linear"===t.style[i].type||"radial"===t.style[i].type)){var o,r=t.style[i],a=n.getDefs(!0);r._dom?(o=r._dom,a.contains(r._dom)||n.addDom(o)):o=n.add(r),n.markUsed(t);var s=o.getAttribute("id");e.setAttribute(i,"url(#"+s+")")}}))}},nS.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},nS.prototype.update=function(e){var t=this;tS.prototype.update.call(this,e,(function(){var n=e.type,i=e._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?t.updateDom(e,e._dom):(t.removeDom(e),t.add(e))}))},nS.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return;t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}t.setAttribute("gradientUnits",e.global?"userSpaceOnUse":"objectBoundingBox"),t.innerHTML="";for(var n=e.colorStops,i=0,o=n.length;i<o;++i){var r=this.createElement("stop");r.setAttribute("offset",100*n[i].offset+"%");var a=n[i].color;if(a.indexOf(!1)){var s=Bt(a)[3],l=Ht(a);r.setAttribute("stop-color","#"+l),r.setAttribute("stop-opacity",s)}else r.setAttribute("stop-color",n[i].color);t.appendChild(r)}e._dom=t},nS.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&tS.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&tS.prototype.markUsed.call(this,t._dom)}},x(iS,tS),iS.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var n=this.getTextSvgElement(e);n&&this.updateDom(n,e.__clipPaths,!0),this.markUsed(e)},iS.prototype.updateDom=function(e,t,n){if(t&&0<t.length){var i,o,r=this.getDefs(!0),a=t[0],s=n?"_textDom":"_dom";a[s]?(o=a[s].getAttribute("id"),r.contains(i=a[s])||r.appendChild(i)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(i=this.createElement("clipPath")).setAttribute("id",o),r.appendChild(i),a[s]=i);var l=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!n){var u=Array.prototype.slice.call(a.transform);rt(a.transform,a.parent.invTransform,a.transform),l.brush(a),a.transform=u}else l.brush(a);var c=this.getSvgElement(a);i.innerHTML="",i.appendChild(c.cloneNode()),e.setAttribute("clip-path","url(#"+o+")"),1<t.length&&this.updateDom(i,t.slice(1),n)}else e&&e.setAttribute("clip-path","none")},iS.prototype.markUsed=function(e){var t=this;e.__clipPaths&&w(e.__clipPaths,(function(e){e._dom&&tS.prototype.markUsed.call(t,e._dom),e._textDom&&tS.prototype.markUsed.call(t,e._textDom)}))},x(oS,tS),oS.prototype.addWithoutUpdate=function(e,t){if(t&&rS(t.style)){var n;t._shadowDom?(n=t._shadowDom,this.getDefs(!0).contains(t._shadowDom)||this.addDom(n)):n=this.add(t),this.markUsed(t);var i=n.getAttribute("id");e.style.filter="url(#"+i+")"}},oS.prototype.add=function(e){var t=this.createElement("filter");return e._shadowDomId=e._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+e._shadowDomId),this.updateDom(e,t),this.addDom(t),t},oS.prototype.update=function(e,t){if(rS(t.style)){var n=this;tS.prototype.update.call(this,t,(function(){n.updateDom(t,t._shadowDom)}))}else this.remove(e,t)},oS.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(e),e.style.filter="")},oS.prototype.updateDom=function(e,t){var n=t.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,o,r,a,s=e.style,l=e.scale&&e.scale[0]||1,u=e.scale&&e.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)i=s.shadowOffsetX||0,o=s.shadowOffsetY||0,r=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(t,s);i=s.textShadowOffsetX||0,o=s.textShadowOffsetY||0,r=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",i/l),n.setAttribute("dy",o/u),n.setAttribute("flood-color",a),n.setAttribute("stdDeviation",r/2/l+" "+r/2/u),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(r/2*200)+"%"),t.setAttribute("height",Math.ceil(r/2*200)+"%"),t.appendChild(n),e._shadowDom=t},oS.prototype.markUsed=function(e){e._shadowDom&&tS.prototype.markUsed.call(this,e._shadowDom)},hS.prototype={constructor:hS,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=wk("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,n,i=this._svgRoot,o=this._visibleList,r=e.length,a=[];for(t=0;t<r;t++){var s=e[t],l=(n=s)instanceof ua?Vk:n instanceof Hi?Wk:n instanceof Da?$k:Vk,u=fS(s)||dS(s);s.invisible||(s.__dirty&&(l&&l.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(u,s)),s.__dirty=!1),a.push(s))}var c,d=function(e,t,n){return eS.diff(e,t,void 0)}(o,a);for(t=0;t<d.length;t++)if((g=d[t]).removed)for(var f=0;f<g.count;f++){u=fS(s=o[g.indices[f]]);var h=dS(s);cS(i,u),cS(i,h)}for(t=0;t<d.length;t++){var g;if((g=d[t]).added)for(f=0;f<g.count;f++)u=fS(s=a[g.indices[f]]),h=dS(s),c?lS(i,u,c):uS(i,u),u?lS(i,h,u):c?lS(i,h,c):uS(i,h),lS(i,h,u),c=h||u||c,this.gradientManager.addWithoutUpdate(u||h,s),this.shadowManager.addWithoutUpdate(u||h,s),this.clipPathManager.markUsed(s);else if(!g.removed)for(f=0;f<g.count;f++)u=fS(s=a[g.indices[f]]),h=dS(s),u=fS(s),h=dS(s),this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(u||h,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(u||h,s),this.clipPathManager.markUsed(s),h&&lS(i,h,u),c=u||h||c}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(e){var t,n=this._svgDom;return 0!==(t=n.getElementsByTagName("defs")).length?t[0]:e?((t=n.insertBefore(wk("defs"),n.firstChild)).contains||(t.contains=function(e){var n=t.children;if(!n)return!1;for(var i=n.length-1;0<=i;--i)if(n[i]===e)return!0;return!1}),t):null},resize:function(e,t){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var o=n.style;o.width=e+"px",o.height=t+"px";var r=this._svgDom;r.setAttribute("width",e),r.setAttribute("height",t)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],i=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],r=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||aS(s[n])||aS(a.style[n]))-(aS(s[o])||0)-(aS(s[r])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},w(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],(function(e){hS.prototype[e]=function(){}})),bo("svg",hS),e.version="4.8.0",e.dependencies={zrender:"4.3.1"},e.PRIORITY=of,e.init=function(e,t,n){var i=Wf(e);if(i)return i;var o=new cf(e,t,n);return o.id="ec_"+Bf++,Pf[o.id]=o,Fo(e,zf,o.id),function(e){var t="__connectUpdateStatus";function n(e,n){for(var i=0;i<e.length;i++)e[i][t]=n}Qd(Rf,(function(i,o){e._messageCenter.on(o,(function(i){if(Lf[e.group]&&0!==e[t]){if(i&&i.escapeConnect)return;var o=e.makeActionFromEvent(i),r=[];Qd(Pf,(function(t){t!==e&&t.group===e.group&&r.push(t)})),n(r,0),Qd(r,(function(e){1!==e[t]&&e.dispatchAction(o)})),n(r,2)}}))}))}(o),o},e.connect=function(e){if(M(e)){var t=e;e=null,Qd(t,(function(t){null!=t.group&&(e=t.group)})),e=e||"g_"+Ff++,Qd(t,(function(t){t.group=e}))}return Lf[e]=!0,e},e.disConnect=Hf,e.disconnect=Vf,e.dispose=function(e){"string"==typeof e?e=Pf[e]:e instanceof cf||(e=Wf(e)),e instanceof cf&&!e.isDisposed()&&e.dispose()},e.getInstanceByDom=Wf,e.getInstanceById=function(e){return Pf[e]},e.registerTheme=$f,e.registerPreprocessor=qf,e.registerProcessor=Uf,e.registerPostUpdate=function(e){Af.push(e)},e.registerAction=jf,e.registerCoordinateSystem=Gf,e.getCoordinateSystemDimensions=function(e){var t=Lu.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},e.registerLayout=Xf,e.registerVisual=Yf,e.registerLoading=Jf,e.extendComponentModel=Qf,e.extendComponentView=eh,e.extendSeriesModel=th,e.extendChartView=nh,e.setCanvasCreator=function(e){p("createCanvas",e)},e.registerMap=function(e,t,n){!function(e,t,n){var i;w(i=M(t)?t:t.svg?[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(n=t.specialAreas,t=t.geoJson),[{type:"geoJSON",source:t,specialAreas:n}]),(function(e){var t=e.type;"geoJson"===t&&(t=e.type="geoJSON"),(0,Zd[t])(e)})),Xd.set(e,i)}(e,t,n)},e.getMap=function(e){var t=Yd(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},e.dataTool={},e.zrender=Co,e.number=Sl,e.format=Gl,e.throttle=od,e.helper=jg,e.matrix=dt,e.vector=_e,e.color=jt,e.parseGeoJSON=Jg,e.parseGeoJson=up,e.util=cp,e.graphic=dp,e.List=Th,e.Model=ll,e.Axis=sp,e.env=o})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],t):t(e.bmap={},e.echarts)}(this,(function(e,t){"use strict";function n(e,t){this._bmap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t,this._projection=new BMap.MercatorProjection}function i(e,n){return n=n||[0,0],t.util.map([0,1],(function(t){var i=n[t],o=e[t]/2,r=[],a=[];return r[t]=i-o,a[t]=i+o,r[1-t]=a[1-t]=n[1-t],Math.abs(this.dataToPoint(r)[t]-this.dataToPoint(a)[t])}),this)}var o;n.prototype.dimensions=["lng","lat"],n.prototype.setZoom=function(e){this._zoom=e},n.prototype.setCenter=function(e){this._center=this._projection.lngLatToPoint(new BMap.Point(e[0],e[1]))},n.prototype.setMapOffset=function(e){this._mapOffset=e},n.prototype.getBMap=function(){return this._bmap},n.prototype.dataToPoint=function(e){var t=new BMap.Point(e[0],e[1]),n=this._bmap.pointToOverlayPixel(t),i=this._mapOffset;return[n.x-i[0],n.y-i[1]]},n.prototype.pointToData=function(e){var t=this._mapOffset;return[(e=this._bmap.overlayPixelToPoint({x:e[0]+t[0],y:e[1]+t[1]})).lng,e.lat]},n.prototype.getViewRect=function(){var e=this._api;return new t.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())},n.prototype.getRoamTransform=function(){return t.matrix.create()},n.prototype.prepareCustoms=function(e){var n=this.getViewRect();return{coordSys:{type:"bmap",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:t.util.bind(this.dataToPoint,this),size:t.util.bind(i,this)}}},n.dimensions=n.prototype.dimensions,n.create=function(e,t){var i,r=t.getDom();e.eachComponent("bmap",(function(e){var a=t.getZr().painter,s=a.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(o=o||function(){function e(e){this._root=e}return(e.prototype=new BMap.Overlay).initialize=function(e){return e.getPanes().labelPane.appendChild(this._root),this._root},e.prototype.draw=function(){},e}(),i)throw new Error("Only one bmap component can exist");if(!e.__bmap){var l=r.querySelector(".ec-extension-bmap");l&&(s.style.left="0px",s.style.top="0px",r.removeChild(l)),(l=document.createElement("div")).style.cssText="width:100%;height:100%",l.classList.add("ec-extension-bmap"),r.appendChild(l);var u=e.__bmap=new BMap.Map(l),c=new o(s);u.addOverlay(c),a.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}u=e.__bmap;var d=e.get("center"),f=e.get("zoom");if(d&&f){var h=new BMap.Point(d[0],d[1]);u.centerAndZoom(h,f)}(i=new n(u,t)).setMapOffset(e.__mapOffset||[0,0]),i.setZoom(f),i.setCenter(d),e.coordinateSystem=i})),e.eachSeries((function(e){"bmap"===e.get("coordinateSystem")&&(e.coordinateSystem=i)}))},t.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(e,t){this.option.center=e,this.option.zoom=t},centerOrZoomChanged:function(e,t){var n=this.option;return!(function(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}(e,n.center)&&t===n.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},roam:!1}});var r={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},a={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},s=Object.prototype.toString;function l(e){if(null==e||"object"!=typeof e)return e;var t=e,n=s.call(e);if("[object Array]"===n){if(!u(e)){t=[];for(var i=0,o=e.length;i<o;i++)t[i]=l(e[i])}}else if(a[n]){if(!u(e)){var c=e.constructor;if(e.constructor.from)t=c.from(e);else for(t=new c(e.length),i=0,o=e.length;i<o;i++)t[i]=l(e[i])}}else if(!r[n]&&!u(e)&&!function(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}(e))for(var d in t={},e)e.hasOwnProperty(d)&&(t[d]=l(e[d]));return t}function u(e){return e.__ec_primitive__}t.extendComponentView({type:"bmap",render:function(e,t,n){function i(t,i){if(!o){var r=a.parentNode.parentNode.parentNode,l=[-parseInt(r.style.left,10)||0,-parseInt(r.style.top,10)||0];a.style.left=l[0]+"px",a.style.top=l[1]+"px",s.setMapOffset(l),e.__mapOffset=l,n.dispatchAction({type:"bmapRoam"})}}var o=!0,r=e.getBMap(),a=n.getZr().painter.getViewportRoot(),s=e.coordinateSystem;function u(){o||n.dispatchAction({type:"bmapRoam"})}r.removeEventListener("moving",this._oldMoveHandler),r.removeEventListener("zoomend",this._oldZoomEndHandler),r.addEventListener("moving",i),r.addEventListener("zoomend",u),this._oldMoveHandler=i,this._oldZoomEndHandler=u;var c=e.get("roam");c&&"scale"!==c?r.enableDragging():r.disableDragging(),c&&"move"!==c?(r.enableScrollWheelZoom(),r.enableDoubleClickZoom(),r.enablePinchToZoom()):(r.disableScrollWheelZoom(),r.disableDoubleClickZoom(),r.disablePinchToZoom());var d=e.__mapStyle,f=e.get("mapStyle")||{},h=JSON.stringify(f);JSON.stringify(d)!==h&&(Object.keys(f).length&&r.setMapStyle(l(f)),e.__mapStyle=JSON.parse(h));var g=e.__mapStyle2,p=e.get("mapStyleV2")||{},m=JSON.stringify(p);JSON.stringify(g)!==m&&(Object.keys(p).length&&r.setMapStyleV2(l(p)),e.__mapStyle2=JSON.parse(m)),o=!1}}),t.registerCoordinateSystem("bmap",n),t.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},(function(e,t){t.eachComponent("bmap",(function(e){var t=e.getBMap(),n=t.getCenter();e.setCenterAndZoom([n.lng,n.lat],t.getZoom())}))})),e.version="1.0.0"})),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chart=e()}((function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return o(t[a][1][e]||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){function i(e){if(e){var t=[0,0,0],n=1,i=e.match(/^#([a-fA-F0-9]{3})$/i);if(i)for(i=i[1],o=0;o<t.length;o++)t[o]=parseInt(i[o]+i[o],16);else if(i=e.match(/^#([a-fA-F0-9]{6})$/i))for(i=i[1],o=0;o<t.length;o++)t[o]=parseInt(i.slice(2*o,2*o+2),16);else if(i=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<t.length;o++)t[o]=parseInt(i[o+1]);n=parseFloat(i[4])}else if(i=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<t.length;o++)t[o]=Math.round(2.55*parseFloat(i[o+1]));n=parseFloat(i[4])}else if(i=e.match(/(\w+)/)){if("transparent"==i[1])return[0,0,0,0];if(!(t=d[i[1]]))return}for(var o=0;o<t.length;o++)t[o]=u(t[o],0,255);return n=n||0==n?u(n,0,1):1,t[3]=n,t}}function o(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[u(parseInt(t[1]),0,360),u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(n)?1:n,0,1)]}}}function r(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[u(parseInt(t[1]),0,360),u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(n)?1:n,0,1)]}}}function a(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function s(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function l(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function u(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var d=e(6);t.exports={getRgba:i,getHsla:o,getRgb:function(e){var t=i(e);return t&&t.slice(0,3)},getHsl:function(e){var t=o(e);return t&&t.slice(0,3)},getHwb:r,getAlpha:function(e){var t=i(e);return t||(t=o(e))||(t=r(e))?t[3]:void 0},hexString:function(e){return"#"+c(e[0])+c(e[1])+c(e[2])},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?a(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:a,percentString:function(e,t){return t<1||e[3]&&e[3]<1?s(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:s,hslString:function(e,t){return t<1||e[3]&&e[3]<1?l(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:l,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return f[e.slice(0,3)]}};var f={};for(var h in d)f[d[h]]=h},{6:6}],3:[function(e,t,n){var i=e(5),o=e(2),r=function(e){return e instanceof r?e:this instanceof r?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=o.getRgba(e))?this.setValues("rgb",t):(t=o.getHsla(e))?this.setValues("hsl",t):(t=o.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new r(e);var t};r.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return o.hexString(this.values.rgb)},rgbString:function(){return o.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return o.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return o.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return o.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return o.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return o.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return o.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var i=e[n]/255;t[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=this,i=e,o=void 0===t?.5:t,r=2*o-1,a=n.alpha()-i.alpha(),s=((r*a==-1?r:(r+a)/(1+r*a))+1)/2,l=1-s;return this.rgb(s*n.red()+l*i.red(),s*n.green()+l*i.green(),s*n.blue()+l*i.blue()).alpha(n.alpha()*o+i.alpha()*(1-o))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new r,i=this.values,o=n.values;for(var a in i)i.hasOwnProperty(a)&&("[object Array]"===(t={}.toString.call(e=i[a]))?o[a]=e.slice(0):"[object Number]"===t?o[a]=e:console.error("unexpected color value:",e));return n}},r.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},r.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},r.prototype.getValues=function(e){for(var t=this.values,n={},i=0;i<e.length;i++)n[e.charAt(i)]=t[e][i];return 1!==t.alpha&&(n.a=t.alpha),n},r.prototype.setValues=function(e,t){var n,o,r=this.values,a=this.spaces,s=this.maxes,l=1;if(this.valid=!0,"alpha"===e)l=t;else if(t.length)r[e]=t.slice(0,e.length),l=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)r[e][n]=t[e.charAt(n)];l=t.a}else if(void 0!==t[a[e][0]]){var u=a[e];for(n=0;n<e.length;n++)r[e][n]=t[u[n]];l=t.alpha}if(r.alpha=Math.max(0,Math.min(1,void 0===l?r.alpha:l)),"alpha"===e)return!1;for(n=0;n<e.length;n++)o=Math.max(0,Math.min(s[e][n],r[e][n])),r[e][n]=Math.round(o);for(var c in a)c!==e&&(r[c]=i[e][c](r[e]));return!0},r.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},r.prototype.setChannel=function(e,t,n){var i=this.values[e];return void 0===n?i[t]:(n===i[t]||(i[t]=n,this.setValues(e,i)),this)},"undefined"!=typeof window&&(window.Color=r),t.exports=r},{2:2,5:5}],4:[function(e,t,n){function i(e){var t,n,i=e[0]/255,o=e[1]/255,r=e[2]/255,a=Math.min(i,o,r),s=Math.max(i,o,r),l=s-a;return s==a?t=0:i==s?t=(o-r)/l:o==s?t=2+(r-i)/l:r==s&&(t=4+(i-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s==a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]}function o(e){var t,n,i=e[0],o=e[1],r=e[2],a=Math.min(i,o,r),s=Math.max(i,o,r),l=s-a;return n=0==s?0:l/s*1e3/10,s==a?t=0:i==s?t=(o-r)/l:o==s?t=2+(r-i)/l:r==s&&(t=4+(i-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,n,s/255*1e3/10]}function a(e){var t=e[0],n=e[1],o=e[2];return[i(e)[0],1/255*Math.min(t,Math.min(n,o))*100,100*(o=1-1/255*Math.max(t,Math.max(n,o)))]}function s(e){var t,n=e[0]/255,i=e[1]/255,o=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-i,1-o)))/(1-t)||0),100*((1-i-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]}function l(e){return I[JSON.stringify(e)]}function u(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*t+.7152*n+.0722*i),100*(.0193*t+.1192*n+.9505*i)]}function c(e){var t=u(e),n=t[0],i=t[1],o=t[2];return i/=100,o/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]}function d(e){var t,n,i,o,r,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return[r=255*l,r,r];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var u=0;u<3;u++)(i=a+1/3*-(u-1))<0&&i++,i>1&&i--,o[u]=255*(r=6*i<1?t+6*(n-t)*i:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t);return o}function f(e){var t=e[0]/60,n=e[1]/100,i=e[2]/100,o=Math.floor(t)%6,r=t-Math.floor(t),a=255*i*(1-n),s=255*i*(1-n*r),l=255*i*(1-n*(1-r));switch(i*=255,o){case 0:return[i,l,a];case 1:return[s,i,a];case 2:return[a,i,l];case 3:return[a,s,i];case 4:return[l,a,i];case 5:return[i,a,s]}}function h(e){var t,n,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100,u=s+l;switch(u>1&&(s/=u,l/=u),i=6*a-(t=Math.floor(6*a)),0!=(1&t)&&(i=1-i),o=s+i*((n=1-l)-s),t){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function p(e){var t=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,e[0]/100*(1-i)+i)),255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]}function m(e){var t,n,i,o=e[0]/100,r=e[1]/100,a=e[2]/100;return n=-.9689*o+1.8758*r+.0415*a,i=.0557*o+-.204*r+1.057*a,t=(t=3.2406*o+-1.5372*r+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]}function v(e){var t=e[0],n=e[1],i=e[2];return n/=100,i/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function y(e){var t,n,i,o,r=e[0],a=e[1],s=e[2];return r<=8?o=(n=100*r/903.3)/100*7.787+16/116:(n=100*Math.pow((r+16)/116,3),o=Math.pow(n/100,1/3)),[t=t/95.047<=.008856?t=95.047*(a/500+o-16/116)/7.787:95.047*Math.pow(a/500+o,3),n,i=i/108.883<=.008859?i=108.883*(o-s/200-16/116)/7.787:108.883*Math.pow(o-s/200,3)]}function T(e){var t,n=e[0],i=e[1],o=e[2];return(t=360*Math.atan2(o,i)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(i*i+o*o),t]}function C(e){return m(y(e))}function E(e){var t,n=e[1];return t=e[2]/360*2*Math.PI,[e[0],n*Math.cos(t),n*Math.sin(t)]}function _(e){return x[e]}t.exports={rgb2hsl:i,rgb2hsv:o,rgb2hwb:a,rgb2cmyk:s,rgb2keyword:l,rgb2xyz:u,rgb2lab:c,rgb2lch:function(e){return T(c(e))},hsl2rgb:d,hsl2hsv:function(e){var t=e[1]/100,n=e[2]/100;return 0===n?[0,0,0]:[e[0],2*(t*=(n*=2)<=1?n:2-n)/(n+t)*100,(n+t)/2*100]},hsl2hwb:function(e){return a(d(e))},hsl2cmyk:function(e){return s(d(e))},hsl2keyword:function(e){return l(d(e))},hsv2rgb:f,hsv2hsl:function(e){var t,n,i=e[1]/100,o=e[2]/100;return t=i*o,[e[0],100*(t=(t/=(n=(2-i)*o)<=1?n:2-n)||0),100*(n/=2)]},hsv2hwb:function(e){return a(f(e))},hsv2cmyk:function(e){return s(f(e))},hsv2keyword:function(e){return l(f(e))},hwb2rgb:h,hwb2hsl:function(e){return i(h(e))},hwb2hsv:function(e){return o(h(e))},hwb2cmyk:function(e){return s(h(e))},hwb2keyword:function(e){return l(h(e))},cmyk2rgb:p,cmyk2hsl:function(e){return i(p(e))},cmyk2hsv:function(e){return o(p(e))},cmyk2hwb:function(e){return a(p(e))},cmyk2keyword:function(e){return l(p(e))},keyword2rgb:_,keyword2hsl:function(e){return i(_(e))},keyword2hsv:function(e){return o(_(e))},keyword2hwb:function(e){return a(_(e))},keyword2cmyk:function(e){return s(_(e))},keyword2lab:function(e){return c(_(e))},keyword2xyz:function(e){return u(_(e))},xyz2rgb:m,xyz2lab:v,xyz2lch:function(e){return T(v(e))},lab2xyz:y,lab2rgb:C,lab2lch:T,lch2lab:E,lch2xyz:function(e){return y(E(e))},lch2rgb:function(e){return C(E(e))}};var x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},I={};for(var D in x)I[JSON.stringify(x[D])]=D},{}],5:[function(e,t,n){var i=e(4),o=function(){return new u};for(var r in i){o[r+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),i[e](t)}}(r);var a=/(\w+)2(\w+)/.exec(r),s=a[1],l=a[2];(o[s]=o[s]||{})[l]=o[r]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var n=i[e](t);if("string"==typeof n||void 0===n)return n;for(var o=0;o<n.length;o++)n[o]=Math.round(n[o]);return n}}(r)}var u=function(){this.convs={}};u.prototype.routeSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n))},u.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},u.prototype.getValues=function(e){var t=this.convs[e];if(!t){var n=this.space;t=o[n][e](this.convs[n]),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(e){u.prototype[e]=function(t){return this.routeSpace(e,arguments)}})),t.exports=o},{4:4}],6:[function(e,t,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(e,t,n){var i=e(29)();i.helpers=e(45),e(27)(i),i.defaults=e(25),i.Element=e(26),i.elements=e(40),i.Interaction=e(28),i.platform=e(48),e(31)(i),e(22)(i),e(23)(i),e(24)(i),e(30)(i),e(33)(i),e(32)(i),e(35)(i),e(54)(i),e(52)(i),e(53)(i),e(55)(i),e(56)(i),e(57)(i),e(15)(i),e(16)(i),e(17)(i),e(18)(i),e(19)(i),e(20)(i),e(21)(i),e(8)(i),e(9)(i),e(10)(i),e(11)(i),e(12)(i),e(13)(i),e(14)(i);var o=[];o.push(e(49)(i),e(50)(i),e(51)(i)),i.plugins.register(o),i.platform.initialize(),t.exports=i,"undefined"!=typeof window&&(window.Chart=i),i.canvasHelpers=i.helpers.canvas},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,35:35,40:40,45:45,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,8:8,9:9}],8:[function(e,t,n){"use strict";t.exports=function(e){e.Bar=function(t,n){return n.type="bar",new e(t,n)}}},{}],9:[function(e,t,n){"use strict";t.exports=function(e){e.Bubble=function(t,n){return n.type="bubble",new e(t,n)}}},{}],10:[function(e,t,n){"use strict";t.exports=function(e){e.Doughnut=function(t,n){return n.type="doughnut",new e(t,n)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e){e.Line=function(t,n){return n.type="line",new e(t,n)}}},{}],12:[function(e,t,n){"use strict";t.exports=function(e){e.PolarArea=function(t,n){return n.type="polarArea",new e(t,n)}}},{}],13:[function(e,t,n){"use strict";t.exports=function(e){e.Radar=function(t,n){return n.type="radar",new e(t,n)}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e){e.Scatter=function(t,n){return n.type="scatter",new e(t,n)}}},{}],15:[function(e,t,n){"use strict";var i=e(25),o=e(40),r=e(45);i._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),i._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(e,t){var n="";return e.length>0&&(e[0].yLabel?n=e[0].yLabel:t.labels.length>0&&e[0].index<t.labels.length&&(n=t.labels[e[0].index])),n},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": "+e.xLabel}},mode:"index",axis:"y"}}),t.exports=function(e){e.controllers.bar=e.DatasetController.extend({dataElementType:o.Rectangle,initialize:function(){var t,n=this;e.DatasetController.prototype.initialize.apply(n,arguments),(t=n.getMeta()).stack=n.getDataset().stack,t.bar=!0},update:function(e){var t,n,i=this,o=i.getMeta().data;for(i._ruler=i.getRuler(),t=0,n=o.length;t<n;++t)i.updateElement(o[t],t,e)},updateElement:function(e,t,n){var i=this,o=i.chart,a=i.getMeta(),s=i.getDataset(),l=e.custom||{},u=o.options.elements.rectangle;e._xScale=i.getScaleForId(a.xAxisID),e._yScale=i.getScaleForId(a.yAxisID),e._datasetIndex=i.index,e._index=t,e._model={datasetLabel:s.label,label:o.data.labels[t],borderSkipped:l.borderSkipped?l.borderSkipped:u.borderSkipped,backgroundColor:l.backgroundColor?l.backgroundColor:r.valueAtIndexOrDefault(s.backgroundColor,t,u.backgroundColor),borderColor:l.borderColor?l.borderColor:r.valueAtIndexOrDefault(s.borderColor,t,u.borderColor),borderWidth:l.borderWidth?l.borderWidth:r.valueAtIndexOrDefault(s.borderWidth,t,u.borderWidth)},i.updateElementGeometry(e,t,n),e.pivot()},updateElementGeometry:function(e,t,n){var i=this,o=e._model,r=i.getValueScale(),a=r.getBasePixel(),s=r.isHorizontal(),l=i._ruler||i.getRuler(),u=i.calculateBarValuePixels(i.index,t),c=i.calculateBarIndexPixels(i.index,t,l);o.horizontal=s,o.base=n?a:u.base,o.x=s?n?a:u.head:c.center,o.y=s?c.center:n?a:u.head,o.height=s?c.size:void 0,o.width=s?void 0:c.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},getStackCount:function(e){var t,n,i=this.chart,o=this.getIndexScale().options.stacked,r=void 0===e?i.data.datasets.length:e+1,a=[];for(t=0;t<r;++t)(n=i.getDatasetMeta(t)).bar&&i.isDatasetVisible(t)&&(!1===o||!0===o&&-1===a.indexOf(n.stack)||void 0===o&&(void 0===n.stack||-1===a.indexOf(n.stack)))&&a.push(n.stack);return a.length},getStackIndex:function(e){return this.getStackCount(e)-1},getRuler:function(){var e,t,n=this,i=n.getIndexScale(),o=n.getStackCount(),r=n.index,a=[],s=i.isHorizontal(),l=s?i.left:i.top,u=l+(s?i.width:i.height);for(e=0,t=n.getMeta().data.length;e<t;++e)a.push(i.getPixelForValue(null,e,r));return{pixels:a,start:l,end:u,stackCount:o,scale:i}},calculateBarValuePixels:function(e,t){var n,i,o,r,a,s,l=this,u=l.chart,c=l.getMeta(),d=l.getValueScale(),f=u.data.datasets,h=d.getRightValue(f[e].data[t]),g=d.options.stacked,p=c.stack,m=0;if(g||void 0===g&&void 0!==p)for(n=0;n<e;++n)(i=u.getDatasetMeta(n)).bar&&i.stack===p&&i.controller.getValueScaleId()===d.id&&u.isDatasetVisible(n)&&(o=d.getRightValue(f[n].data[t]),(h<0&&o<0||h>=0&&o>0)&&(m+=o));return r=d.getPixelForValue(m),{size:s=((a=d.getPixelForValue(m+h))-r)/2,base:r,head:a,center:a+s/2}},calculateBarIndexPixels:function(e,t,n){var i,o,a,s,l,u=n.scale.options,c=this.getStackIndex(e),d=n.pixels,f=d[t],h=d.length,g=n.start,p=n.end;return 1===h?(i=f>g?f-g:p-f,o=f<p?p-f:f-g):(t>0&&(i=(f-d[t-1])/2,t===h-1&&(o=i)),t<h-1&&(o=(d[t+1]-f)/2,0===t&&(i=o))),l=(s=((a=i*u.categoryPercentage)+o*u.categoryPercentage)/n.stackCount)*u.barPercentage,f-=a,f+=s*c,{size:l=Math.min(r.valueOrDefault(u.barThickness,l),r.valueOrDefault(u.maxBarThickness,1/0)),base:f+=(s-l)/2,head:f+l,center:f+l/2}},draw:function(){var e=this,t=e.chart,n=e.getValueScale(),i=e.getMeta().data,o=e.getDataset(),a=i.length,s=0;for(r.canvas.clipArea(t.ctx,t.chartArea);s<a;++s)isNaN(n.getRightValue(o.data[s]))||i[s].draw();r.canvas.unclipArea(t.ctx)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,i=e.custom||{},o=e._model;o.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:r.valueAtIndexOrDefault(t.hoverBackgroundColor,n,r.getHoverColor(o.backgroundColor)),o.borderColor=i.hoverBorderColor?i.hoverBorderColor:r.valueAtIndexOrDefault(t.hoverBorderColor,n,r.getHoverColor(o.borderColor)),o.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:r.valueAtIndexOrDefault(t.hoverBorderWidth,n,o.borderWidth)},removeHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,i=e.custom||{},o=e._model,a=this.chart.options.elements.rectangle;o.backgroundColor=i.backgroundColor?i.backgroundColor:r.valueAtIndexOrDefault(t.backgroundColor,n,a.backgroundColor),o.borderColor=i.borderColor?i.borderColor:r.valueAtIndexOrDefault(t.borderColor,n,a.borderColor),o.borderWidth=i.borderWidth?i.borderWidth:r.valueAtIndexOrDefault(t.borderWidth,n,a.borderWidth)}}),e.controllers.horizontalBar=e.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})}},{25:25,40:40,45:45}],16:[function(e,t,n){"use strict";var i=e(25),o=e(40),r=e(45);i._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": ("+e.xLabel+", "+e.yLabel+", "+t.datasets[e.datasetIndex].data[e.index].r+")"}}}}),t.exports=function(e){e.controllers.bubble=e.DatasetController.extend({dataElementType:o.Point,update:function(e){var t=this,n=t.getMeta().data;r.each(n,(function(n,i){t.updateElement(n,i,e)}))},updateElement:function(e,t,n){var i=this,o=i.getMeta(),r=e.custom||{},a=i.getScaleForId(o.xAxisID),s=i.getScaleForId(o.yAxisID),l=i._resolveElementOptions(e,t),u=i.getDataset().data[t],c=i.index,d=n?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof u?u:NaN,t,c),f=n?s.getBasePixel():s.getPixelForValue(u,t,c);e._xScale=a,e._yScale=s,e._options=l,e._datasetIndex=c,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,radius:n?0:l.radius,skip:r.skip||isNaN(d)||isNaN(f),x:d,y:f},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options;t.backgroundColor=r.valueOrDefault(n.hoverBackgroundColor,r.getHoverColor(n.backgroundColor)),t.borderColor=r.valueOrDefault(n.hoverBorderColor,r.getHoverColor(n.borderColor)),t.borderWidth=r.valueOrDefault(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},removeHoverStyle:function(e){var t=e._model,n=e._options;t.backgroundColor=n.backgroundColor,t.borderColor=n.borderColor,t.borderWidth=n.borderWidth,t.radius=n.radius},_resolveElementOptions:function(e,t){var n,i,o,a=this,s=a.chart,l=s.data.datasets[a.index],u=e.custom||{},c=s.options.elements.point,d=r.options.resolve,f=l.data[t],h={},g={chart:s,dataIndex:t,dataset:l,datasetIndex:a.index},p=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle"];for(n=0,i=p.length;n<i;++n)h[o=p[n]]=d([u[o],l[o],c[o]],g,t);return h.radius=d([u.radius,f?f.r:void 0,l.radius,c.radius],g,t),h}})}},{25:25,40:40,45:45}],17:[function(e,t,n){"use strict";var i=e(25),o=e(40),r=e(45);i._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,i=n.datasets,o=n.labels;if(i.length)for(var r=0;r<i[0].data.length;++r)t.push('<li><span style="background-color:'+i[0].backgroundColor[r]+'"></span>'),o[r]&&t.push(o[r]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(n,i){var o=e.getDatasetMeta(0),a=t.datasets[0],s=o.data[i],l=s&&s.custom||{},u=r.valueAtIndexOrDefault,c=e.options.elements.arc;return{text:n,fillStyle:l.backgroundColor?l.backgroundColor:u(a.backgroundColor,i,c.backgroundColor),strokeStyle:l.borderColor?l.borderColor:u(a.borderColor,i,c.borderColor),lineWidth:l.borderWidth?l.borderWidth:u(a.borderWidth,i,c.borderWidth),hidden:isNaN(a.data[i])||o.data[i].hidden,index:i}})):[]}},onClick:function(e,t){var n,i,o,r=t.index,a=this.chart;for(n=0,i=(a.data.datasets||[]).length;n<i;++n)(o=a.getDatasetMeta(n)).data[r]&&(o.data[r].hidden=!o.data[r].hidden);a.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],i=": "+t.datasets[e.datasetIndex].data[e.index];return r.isArray(n)?(n=n.slice())[0]+=i:n+=i,n}}}}),i._set("pie",r.clone(i.doughnut)),i._set("pie",{cutoutPercentage:0}),t.exports=function(e){e.controllers.doughnut=e.controllers.pie=e.DatasetController.extend({dataElementType:o.Arc,linkScales:r.noop,getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t=this,n=t.chart,i=n.chartArea,o=n.options,a=o.elements.arc,s=i.right-i.left-a.borderWidth,l=i.bottom-i.top-a.borderWidth,u=Math.min(s,l),c={x:0,y:0},d=t.getMeta(),f=o.cutoutPercentage,h=o.circumference;if(h<2*Math.PI){var g=o.rotation%(2*Math.PI),p=(g+=2*Math.PI*(g>=Math.PI?-1:g<-Math.PI?1:0))+h,m={x:Math.cos(g),y:Math.sin(g)},v={x:Math.cos(p),y:Math.sin(p)},y=g<=0&&p>=0||g<=2*Math.PI&&2*Math.PI<=p,b=g<=.5*Math.PI&&.5*Math.PI<=p||g<=2.5*Math.PI&&2.5*Math.PI<=p,T=g<=-Math.PI&&-Math.PI<=p||g<=Math.PI&&Math.PI<=p,C=g<=.5*-Math.PI&&.5*-Math.PI<=p||g<=1.5*Math.PI&&1.5*Math.PI<=p,E=f/100,_={x:T?-1:Math.min(m.x*(m.x<0?1:E),v.x*(v.x<0?1:E)),y:C?-1:Math.min(m.y*(m.y<0?1:E),v.y*(v.y<0?1:E))},x={x:y?1:Math.max(m.x*(m.x>0?1:E),v.x*(v.x>0?1:E)),y:b?1:Math.max(m.y*(m.y>0?1:E),v.y*(v.y>0?1:E))},I={width:.5*(x.x-_.x),height:.5*(x.y-_.y)};u=Math.min(s/I.width,l/I.height),c={x:-.5*(x.x+_.x),y:-.5*(x.y+_.y)}}n.borderWidth=t.getMaxBorderWidth(d.data),n.outerRadius=Math.max((u-n.borderWidth)/2,0),n.innerRadius=Math.max(f?n.outerRadius/100*f:0,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),n.offsetX=c.x*n.outerRadius,n.offsetY=c.y*n.outerRadius,d.total=t.calculateTotal(),t.outerRadius=n.outerRadius-n.radiusLength*t.getRingIndex(t.index),t.innerRadius=Math.max(t.outerRadius-n.radiusLength,0),r.each(d.data,(function(n,i){t.updateElement(n,i,e)}))},updateElement:function(e,t,n){var i=this,o=i.chart,a=o.chartArea,s=o.options,l=s.animation,u=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=s.rotation,f=s.rotation,h=i.getDataset(),g=n&&l.animateRotate||e.hidden?0:i.calculateCircumference(h.data[t])*(s.circumference/(2*Math.PI));r.extend(e,{_datasetIndex:i.index,_index:t,_model:{x:u+o.offsetX,y:c+o.offsetY,startAngle:d,endAngle:f,circumference:g,outerRadius:n&&l.animateScale?0:i.outerRadius,innerRadius:n&&l.animateScale?0:i.innerRadius,label:(0,r.valueAtIndexOrDefault)(h.label,t,o.data.labels[t])}});var p=e._model;this.removeHoverStyle(e),n&&l.animateRotate||(p.startAngle=0===t?s.rotation:i.getMeta().data[t-1]._model.endAngle,p.endAngle=p.startAngle+p.circumference),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),i=0;return r.each(n.data,(function(n,o){e=t.data[o],isNaN(e)||n.hidden||(i+=Math.abs(e))})),i},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(e/t):0},getMaxBorderWidth:function(e){for(var t,n,i=0,o=this.index,r=e.length,a=0;a<r;a++)i=(n=e[a]._chart?e[a]._chart.config.data.datasets[o].hoverBorderWidth:0)>(i=(t=e[a]._model?e[a]._model.borderWidth:0)>i?t:i)?n:i;return i}})}},{25:25,40:40,45:45}],18:[function(e,t,n){"use strict";var i=e(25),o=e(40),r=e(45);i._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),t.exports=function(e){function t(e,t){return r.valueOrDefault(e.showLine,t.showLines)}e.controllers.line=e.DatasetController.extend({datasetElementType:o.Line,dataElementType:o.Point,update:function(e){var n,i,o,a=this,s=a.getMeta(),l=s.dataset,u=s.data||[],c=a.chart.options,d=c.elements.line,f=a.getScaleForId(s.yAxisID),h=a.getDataset(),g=t(h,c);for(g&&(o=l.custom||{},void 0!==h.tension&&void 0===h.lineTension&&(h.lineTension=h.tension),l._scale=f,l._datasetIndex=a.index,l._children=u,l._model={spanGaps:h.spanGaps?h.spanGaps:c.spanGaps,tension:o.tension?o.tension:r.valueOrDefault(h.lineTension,d.tension),backgroundColor:o.backgroundColor?o.backgroundColor:h.backgroundColor||d.backgroundColor,borderWidth:o.borderWidth?o.borderWidth:h.borderWidth||d.borderWidth,borderColor:o.borderColor?o.borderColor:h.borderColor||d.borderColor,borderCapStyle:o.borderCapStyle?o.borderCapStyle:h.borderCapStyle||d.borderCapStyle,borderDash:o.borderDash?o.borderDash:h.borderDash||d.borderDash,borderDashOffset:o.borderDashOffset?o.borderDashOffset:h.borderDashOffset||d.borderDashOffset,borderJoinStyle:o.borderJoinStyle?o.borderJoinStyle:h.borderJoinStyle||d.borderJoinStyle,fill:o.fill?o.fill:void 0!==h.fill?h.fill:d.fill,steppedLine:o.steppedLine?o.steppedLine:r.valueOrDefault(h.steppedLine,d.stepped),cubicInterpolationMode:o.cubicInterpolationMode?o.cubicInterpolationMode:r.valueOrDefault(h.cubicInterpolationMode,d.cubicInterpolationMode)},l.pivot()),n=0,i=u.length;n<i;++n)a.updateElement(u[n],n,e);for(g&&0!==l._model.tension&&a.updateBezierControlPoints(),n=0,i=u.length;n<i;++n)u[n].pivot()},getPointBackgroundColor:function(e,t){var n=this.chart.options.elements.point.backgroundColor,i=this.getDataset(),o=e.custom||{};return o.backgroundColor?n=o.backgroundColor:i.pointBackgroundColor?n=r.valueAtIndexOrDefault(i.pointBackgroundColor,t,n):i.backgroundColor&&(n=i.backgroundColor),n},getPointBorderColor:function(e,t){var n=this.chart.options.elements.point.borderColor,i=this.getDataset(),o=e.custom||{};return o.borderColor?n=o.borderColor:i.pointBorderColor?n=r.valueAtIndexOrDefault(i.pointBorderColor,t,n):i.borderColor&&(n=i.borderColor),n},getPointBorderWidth:function(e,t){var n=this.chart.options.elements.point.borderWidth,i=this.getDataset(),o=e.custom||{};return isNaN(o.borderWidth)?!isNaN(i.pointBorderWidth)||r.isArray(i.pointBorderWidth)?n=r.valueAtIndexOrDefault(i.pointBorderWidth,t,n):isNaN(i.borderWidth)||(n=i.borderWidth):n=o.borderWidth,n},updateElement:function(e,t,n){var i,o,a=this,s=a.getMeta(),l=e.custom||{},u=a.getDataset(),c=a.index,d=u.data[t],f=a.getScaleForId(s.yAxisID),h=a.getScaleForId(s.xAxisID),g=a.chart.options.elements.point;void 0!==u.radius&&void 0===u.pointRadius&&(u.pointRadius=u.radius),void 0!==u.hitRadius&&void 0===u.pointHitRadius&&(u.pointHitRadius=u.hitRadius),i=h.getPixelForValue("object"==typeof d?d:NaN,t,c),o=n?f.getBasePixel():a.calculatePointY(d,t,c),e._xScale=h,e._yScale=f,e._datasetIndex=c,e._index=t,e._model={x:i,y:o,skip:l.skip||isNaN(i)||isNaN(o),radius:l.radius||r.valueAtIndexOrDefault(u.pointRadius,t,g.radius),pointStyle:l.pointStyle||r.valueAtIndexOrDefault(u.pointStyle,t,g.pointStyle),backgroundColor:a.getPointBackgroundColor(e,t),borderColor:a.getPointBorderColor(e,t),borderWidth:a.getPointBorderWidth(e,t),tension:s.dataset._model?s.dataset._model.tension:0,steppedLine:!!s.dataset._model&&s.dataset._model.steppedLine,hitRadius:l.hitRadius||r.valueAtIndexOrDefault(u.pointHitRadius,t,g.hitRadius)}},calculatePointY:function(e,t,n){var i,o,r,a=this,s=a.chart,l=a.getMeta(),u=a.getScaleForId(l.yAxisID),c=0,d=0;if(u.options.stacked){for(i=0;i<n;i++)if(o=s.data.datasets[i],"line"===(r=s.getDatasetMeta(i)).type&&r.yAxisID===u.id&&s.isDatasetVisible(i)){var f=Number(u.getRightValue(o.data[t]));f<0?d+=f||0:c+=f||0}var h=Number(u.getRightValue(e));return u.getPixelForValue(h<0?d+h:c+h)}return u.getPixelForValue(e)},updateBezierControlPoints:function(){function e(e,t,n){return Math.max(Math.min(e,n),t)}var t,n,i,o,a=this,s=a.getMeta(),l=a.chart.chartArea,u=s.data||[];if(s.dataset._model.spanGaps&&(u=u.filter((function(e){return!e._model.skip}))),"monotone"===s.dataset._model.cubicInterpolationMode)r.splineCurveMonotone(u);else for(t=0,n=u.length;t<n;++t)i=u[t]._model,o=r.splineCurve(r.previousItem(u,t)._model,i,r.nextItem(u,t)._model,s.dataset._model.tension),i.controlPointPreviousX=o.previous.x,i.controlPointPreviousY=o.previous.y,i.controlPointNextX=o.next.x,i.controlPointNextY=o.next.y;if(a.chart.options.elements.line.capBezierPoints)for(t=0,n=u.length;t<n;++t)(i=u[t]._model).controlPointPreviousX=e(i.controlPointPreviousX,l.left,l.right),i.controlPointPreviousY=e(i.controlPointPreviousY,l.top,l.bottom),i.controlPointNextX=e(i.controlPointNextX,l.left,l.right),i.controlPointNextY=e(i.controlPointNextY,l.top,l.bottom)},draw:function(){var e=this,n=e.chart,i=e.getMeta(),o=i.data||[],a=n.chartArea,s=o.length,l=0;for(r.canvas.clipArea(n.ctx,a),t(e.getDataset(),n.options)&&i.dataset.draw(),r.canvas.unclipArea(n.ctx);l<s;++l)o[l].draw(a)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,i=e.custom||{},o=e._model;o.radius=i.hoverRadius||r.valueAtIndexOrDefault(t.pointHoverRadius,n,this.chart.options.elements.point.hoverRadius),o.backgroundColor=i.hoverBackgroundColor||r.valueAtIndexOrDefault(t.pointHoverBackgroundColor,n,r.getHoverColor(o.backgroundColor)),o.borderColor=i.hoverBorderColor||r.valueAtIndexOrDefault(t.pointHoverBorderColor,n,r.getHoverColor(o.borderColor)),o.borderWidth=i.hoverBorderWidth||r.valueAtIndexOrDefault(t.pointHoverBorderWidth,n,o.borderWidth)},removeHoverStyle:function(e){var t=this,n=t.chart.data.datasets[e._datasetIndex],i=e._index,o=e.custom||{},a=e._model;void 0!==n.radius&&void 0===n.pointRadius&&(n.pointRadius=n.radius),a.radius=o.radius||r.valueAtIndexOrDefault(n.pointRadius,i,t.chart.options.elements.point.radius),a.backgroundColor=t.getPointBackgroundColor(e,i),a.borderColor=t.getPointBorderColor(e,i),a.borderWidth=t.getPointBorderWidth(e,i)}})}},{25:25,40:40,45:45}],19:[function(e,t,n){"use strict";var i=e(25),o=e(40),r=e(45);i._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,i=n.datasets,o=n.labels;if(i.length)for(var r=0;r<i[0].data.length;++r)t.push('<li><span style="background-color:'+i[0].backgroundColor[r]+'"></span>'),o[r]&&t.push(o[r]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(n,i){var o=e.getDatasetMeta(0),a=t.datasets[0],s=o.data[i].custom||{},l=r.valueAtIndexOrDefault,u=e.options.elements.arc;return{text:n,fillStyle:s.backgroundColor?s.backgroundColor:l(a.backgroundColor,i,u.backgroundColor),strokeStyle:s.borderColor?s.borderColor:l(a.borderColor,i,u.borderColor),lineWidth:s.borderWidth?s.borderWidth:l(a.borderWidth,i,u.borderWidth),hidden:isNaN(a.data[i])||o.data[i].hidden,index:i}})):[]}},onClick:function(e,t){var n,i,o,r=t.index,a=this.chart;for(n=0,i=(a.data.datasets||[]).length;n<i;++n)(o=a.getDatasetMeta(n)).data[r].hidden=!o.data[r].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}}),t.exports=function(e){e.controllers.polarArea=e.DatasetController.extend({dataElementType:o.Arc,linkScales:r.noop,update:function(e){var t=this,n=t.chart,i=n.chartArea,o=t.getMeta(),a=n.options,s=a.elements.arc,l=Math.min(i.right-i.left,i.bottom-i.top);n.outerRadius=Math.max((l-s.borderWidth/2)/2,0),n.innerRadius=Math.max(a.cutoutPercentage?n.outerRadius/100*a.cutoutPercentage:1,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),t.outerRadius=n.outerRadius-n.radiusLength*t.index,t.innerRadius=t.outerRadius-n.radiusLength,o.count=t.countVisibleElements(),r.each(o.data,(function(n,i){t.updateElement(n,i,e)}))},updateElement:function(e,t,n){for(var i=this,o=i.chart,a=i.getDataset(),s=o.options,l=s.animation,u=o.scale,c=o.data.labels,d=i.calculateCircumference(a.data[t]),f=u.xCenter,h=u.yCenter,g=0,p=i.getMeta(),m=0;m<t;++m)isNaN(a.data[m])||p.data[m].hidden||++g;var v=s.startAngle,y=e.hidden?0:u.getDistanceFromCenterForValue(a.data[t]),b=v+d*g,T=b+(e.hidden?0:d),C=l.animateScale?0:u.getDistanceFromCenterForValue(a.data[t]);r.extend(e,{_datasetIndex:i.index,_index:t,_scale:u,_model:{x:f,y:h,innerRadius:0,outerRadius:n?C:y,startAngle:n&&l.animateRotate?v:b,endAngle:n&&l.animateRotate?v:T,label:r.valueAtIndexOrDefault(c,t,c[t])}}),i.removeHoverStyle(e),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return r.each(t.data,(function(t,i){isNaN(e.data[i])||t.hidden||n++})),n},calculateCircumference:function(e){var t=this.getMeta().count;return t>0&&!isNaN(e)?2*Math.PI/t:0}})}},{25:25,40:40,45:45}],20:[function(e,t,n){"use strict";var i=e(25),o=e(40),r=e(45);i._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}}),t.exports=function(e){e.controllers.radar=e.DatasetController.extend({datasetElementType:o.Line,dataElementType:o.Point,linkScales:r.noop,update:function(e){var t=this,n=t.getMeta(),i=n.data,o=n.dataset.custom||{},a=t.getDataset(),s=t.chart.options.elements.line,l=t.chart.scale;void 0!==a.tension&&void 0===a.lineTension&&(a.lineTension=a.tension),r.extend(n.dataset,{_datasetIndex:t.index,_scale:l,_children:i,_loop:!0,_model:{tension:o.tension?o.tension:r.valueOrDefault(a.lineTension,s.tension),backgroundColor:o.backgroundColor?o.backgroundColor:a.backgroundColor||s.backgroundColor,borderWidth:o.borderWidth?o.borderWidth:a.borderWidth||s.borderWidth,borderColor:o.borderColor?o.borderColor:a.borderColor||s.borderColor,fill:o.fill?o.fill:void 0!==a.fill?a.fill:s.fill,borderCapStyle:o.borderCapStyle?o.borderCapStyle:a.borderCapStyle||s.borderCapStyle,borderDash:o.borderDash?o.borderDash:a.borderDash||s.borderDash,borderDashOffset:o.borderDashOffset?o.borderDashOffset:a.borderDashOffset||s.borderDashOffset,borderJoinStyle:o.borderJoinStyle?o.borderJoinStyle:a.borderJoinStyle||s.borderJoinStyle}}),n.dataset.pivot(),r.each(i,(function(n,i){t.updateElement(n,i,e)}),t),t.updateBezierControlPoints()},updateElement:function(e,t,n){var i=this,o=e.custom||{},a=i.getDataset(),s=i.chart.scale,l=i.chart.options.elements.point,u=s.getPointPositionForValue(t,a.data[t]);void 0!==a.radius&&void 0===a.pointRadius&&(a.pointRadius=a.radius),void 0!==a.hitRadius&&void 0===a.pointHitRadius&&(a.pointHitRadius=a.hitRadius),r.extend(e,{_datasetIndex:i.index,_index:t,_scale:s,_model:{x:n?s.xCenter:u.x,y:n?s.yCenter:u.y,tension:o.tension?o.tension:r.valueOrDefault(a.lineTension,i.chart.options.elements.line.tension),radius:o.radius?o.radius:r.valueAtIndexOrDefault(a.pointRadius,t,l.radius),backgroundColor:o.backgroundColor?o.backgroundColor:r.valueAtIndexOrDefault(a.pointBackgroundColor,t,l.backgroundColor),borderColor:o.borderColor?o.borderColor:r.valueAtIndexOrDefault(a.pointBorderColor,t,l.borderColor),borderWidth:o.borderWidth?o.borderWidth:r.valueAtIndexOrDefault(a.pointBorderWidth,t,l.borderWidth),pointStyle:o.pointStyle?o.pointStyle:r.valueAtIndexOrDefault(a.pointStyle,t,l.pointStyle),hitRadius:o.hitRadius?o.hitRadius:r.valueAtIndexOrDefault(a.pointHitRadius,t,l.hitRadius)}}),e._model.skip=o.skip?o.skip:isNaN(e._model.x)||isNaN(e._model.y)},updateBezierControlPoints:function(){var e=this.chart.chartArea,t=this.getMeta();r.each(t.data,(function(n,i){var o=n._model,a=r.splineCurve(r.previousItem(t.data,i,!0)._model,o,r.nextItem(t.data,i,!0)._model,o.tension);o.controlPointPreviousX=Math.max(Math.min(a.previous.x,e.right),e.left),o.controlPointPreviousY=Math.max(Math.min(a.previous.y,e.bottom),e.top),o.controlPointNextX=Math.max(Math.min(a.next.x,e.right),e.left),o.controlPointNextY=Math.max(Math.min(a.next.y,e.bottom),e.top),n.pivot()}))},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},i=e._index,o=e._model;o.radius=n.hoverRadius?n.hoverRadius:r.valueAtIndexOrDefault(t.pointHoverRadius,i,this.chart.options.elements.point.hoverRadius),o.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:r.valueAtIndexOrDefault(t.pointHoverBackgroundColor,i,r.getHoverColor(o.backgroundColor)),o.borderColor=n.hoverBorderColor?n.hoverBorderColor:r.valueAtIndexOrDefault(t.pointHoverBorderColor,i,r.getHoverColor(o.borderColor)),o.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:r.valueAtIndexOrDefault(t.pointHoverBorderWidth,i,o.borderWidth)},removeHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},i=e._index,o=e._model,a=this.chart.options.elements.point;o.radius=n.radius?n.radius:r.valueAtIndexOrDefault(t.pointRadius,i,a.radius),o.backgroundColor=n.backgroundColor?n.backgroundColor:r.valueAtIndexOrDefault(t.pointBackgroundColor,i,a.backgroundColor),o.borderColor=n.borderColor?n.borderColor:r.valueAtIndexOrDefault(t.pointBorderColor,i,a.borderColor),o.borderWidth=n.borderWidth?n.borderWidth:r.valueAtIndexOrDefault(t.pointBorderWidth,i,a.borderWidth)}})}},{25:25,40:40,45:45}],21:[function(e,t,n){"use strict";e(25)._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),t.exports=function(e){e.controllers.scatter=e.controllers.line}},{25:25}],22:[function(e,t,n){"use strict";var i=e(25),o=e(26),r=e(45);i._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:r.noop,onComplete:r.noop}}),t.exports=function(e){e.Animation=o.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),e.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(e,t,n,i){var o,r,a=this.animations;for(t.chart=e,i||(e.animating=!0),o=0,r=a.length;o<r;++o)if(a[o].chart===e)return void(a[o]=t);a.push(t),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=r.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=r.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){var e=this,t=Date.now(),n=0;e.dropFrames>1&&(n=Math.floor(e.dropFrames),e.dropFrames=e.dropFrames%1),e.advance(1+n);var i=Date.now();e.dropFrames+=(i-t)/e.frameDuration,e.animations.length>0&&e.requestAnimationFrame()},advance:function(e){for(var t,n,i=this.animations,o=0;o<i.length;)n=(t=i[o]).chart,t.currentStep=(t.currentStep||0)+e,t.currentStep=Math.min(t.currentStep,t.numSteps),r.callback(t.render,[n,t],n),r.callback(t.onAnimationProgress,[t],n),t.currentStep>=t.numSteps?(r.callback(t.onAnimationComplete,[t],n),n.animating=!1,i.splice(o,1)):++o}},Object.defineProperty(e.Animation.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(e.Animation.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}})}},{25:25,26:26,45:45}],23:[function(e,t,n){"use strict";var i=e(25),o=e(45),r=e(28),a=e(48);t.exports=function(e){function t(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=o.configMerge(i.global,i[e.type],e.options||{}),e}function n(e){var t=e.options;t.scale?e.scale.options=t.scale:t.scales&&t.scales.xAxes.concat(t.scales.yAxes).forEach((function(t){e.scales[t.id].options=t})),e.tooltip._options=t.tooltips}function s(e){return"top"===e||"bottom"===e}var l=e.plugins;e.types={},e.instances={},e.controllers={},o.extend(e.prototype,{construct:function(n,i){var r=this;i=t(i);var s=a.acquireContext(n,i),l=s&&s.canvas,u=l&&l.height,c=l&&l.width;r.id=o.uid(),r.ctx=s,r.canvas=l,r.config=i,r.width=c,r.height=u,r.aspectRatio=u?c/u:null,r.options=i.options,r._bufferedRender=!1,r.chart=r,r.controller=r,e.instances[r.id]=r,Object.defineProperty(r,"data",{get:function(){return r.config.data},set:function(e){r.config.data=e}}),s&&l?(r.initialize(),r.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return l.notify(e,"beforeInit"),o.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildScales(),e.initToolTip(),l.notify(e,"afterInit"),e},clear:function(){return o.canvas.clear(this),this},stop:function(){return e.animationService.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,i=t.canvas,r=n.maintainAspectRatio&&t.aspectRatio||null,a=Math.max(0,Math.floor(o.getMaximumWidth(i))),s=Math.max(0,Math.floor(r?a/r:o.getMaximumHeight(i)));if((t.width!==a||t.height!==s)&&(i.width=t.width=a,i.height=t.height=s,i.style.width=a+"px",i.style.height=s+"px",o.retinaScale(t,n.devicePixelRatio),!e)){var u={width:a,height:s};l.notify(t,"resize",[u]),t.options.onResize&&t.options.onResize(t,u),t.stop(),t.update(t.options.responsiveAnimationDuration)}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;o.each(t.xAxes,(function(e,t){e.id=e.id||"x-axis-"+t})),o.each(t.yAxes,(function(e,t){e.id=e.id||"y-axis-"+t})),n&&(n.id=n.id||"scale")},buildScales:function(){var t=this,n=t.options,i=t.scales={},r=[];n.scales&&(r=r.concat((n.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(n.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),n.scale&&r.push({options:n.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),o.each(r,(function(n){var r=n.options,a=o.valueOrDefault(r.type,n.dtype),l=e.scaleService.getScaleConstructor(a);if(l){s(r.position)!==s(n.dposition)&&(r.position=n.dposition);var u=new l({id:r.id,options:r,ctx:t.ctx,chart:t});i[u.id]=u,u.mergeTicksOptions(),n.isDefault&&(t.scale=u)}})),e.scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this,n=[],i=[];return o.each(t.data.datasets,(function(o,r){var a=t.getDatasetMeta(r),s=o.type||t.config.type;if(a.type&&a.type!==s&&(t.destroyDatasetMeta(r),a=t.getDatasetMeta(r)),a.type=s,n.push(a.type),a.controller)a.controller.updateIndex(r);else{var l=e.controllers[a.type];if(void 0===l)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(t,r),i.push(a.controller)}}),t),i},resetElements:function(){var e=this;o.each(e.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),n(t),!1!==l.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var i=t.buildOrUpdateControllers();o.each(t.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.buildOrUpdateElements()}),t),t.updateLayout(),o.each(i,(function(e){e.reset()})),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],l.notify(t,"afterUpdate"),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){var t=this;!1!==l.notify(t,"beforeLayout")&&(e.layoutService.update(this,this.width,this.height),l.notify(t,"afterScaleUpdate"),l.notify(t,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==l.notify(e,"beforeDatasetsUpdate")){for(var t=0,n=e.data.datasets.length;t<n;++t)e.updateDataset(t);l.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,n=t.getDatasetMeta(e),i={meta:n,index:e};!1!==l.notify(t,"beforeDatasetUpdate",[i])&&(n.controller.update(),l.notify(t,"afterDatasetUpdate",[i]))},render:function(t){var n=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var i=t.duration,r=t.lazy;if(!1!==l.notify(n,"beforeRender")){var a=n.options.animation,s=function(e){l.notify(n,"afterRender"),o.callback(a&&a.onComplete,[e],n)};if(a&&(void 0!==i&&0!==i||void 0===i&&0!==a.duration)){var u=new e.Animation({numSteps:(i||a.duration)/16.66,easing:t.easing||a.easing,render:function(e,t){var n=t.currentStep,i=n/t.numSteps;e.draw((0,o.easing.effects[t.easing])(i),i,n)},onAnimationProgress:a.onProgress,onAnimationComplete:s});e.animationService.addAnimation(n,u,i,r)}else n.draw(),s(new e.Animation({numSteps:0,chart:n}));return n}},draw:function(e){var t=this;t.clear(),o.isNullOrUndef(e)&&(e=1),t.transition(e),!1!==l.notify(t,"beforeDraw",[e])&&(o.each(t.boxes,(function(e){e.draw(t.chartArea)}),t),t.scale&&t.scale.draw(),t.drawDatasets(e),t._drawTooltip(e),l.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=this,n=0,i=(t.data.datasets||[]).length;n<i;++n)t.isDatasetVisible(n)&&t.getDatasetMeta(n).controller.transition(e);t.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(!1!==l.notify(t,"beforeDatasetsDraw",[e])){for(var n=(t.data.datasets||[]).length-1;n>=0;--n)t.isDatasetVisible(n)&&t.drawDataset(n,e);l.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n=this,i=n.getDatasetMeta(e),o={meta:i,index:e,easingValue:t};!1!==l.notify(n,"beforeDatasetDraw",[o])&&(i.controller.draw(t),l.notify(n,"afterDatasetDraw",[o]))},_drawTooltip:function(e){var t=this,n=t.tooltip,i={tooltip:n,easingValue:e};!1!==l.notify(t,"beforeTooltipDraw",[i])&&(n.draw(),l.notify(t,"afterTooltipDraw",[i]))},getElementAtEvent:function(e){return r.modes.single(this,e)},getElementsAtEvent:function(e){return r.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return r.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var i=r.modes[t];return"function"==typeof i?i(this,e,n):[]},getDatasetAtEvent:function(e){return r.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,n=t.data.datasets[e];n._meta||(n._meta={});var i=n._meta[t.id];return i||(i=n._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],i=n._meta&&n._meta[t];i&&(i.controller.destroy(),delete n._meta[t])},destroy:function(){var t,n,i=this,r=i.canvas;for(i.stop(),t=0,n=i.data.datasets.length;t<n;++t)i.destroyDatasetMeta(t);r&&(i.unbindEvents(),o.canvas.clear(i),a.releaseContext(i.ctx),i.canvas=null,i.ctx=null),l.notify(i,"destroy"),delete e.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new e.Tooltip({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};o.each(e.options.events,(function(i){a.addEventListener(e,i,n),t[i]=n})),e.options.responsive&&(n=function(){e.resize()},a.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,o.each(t,(function(t,n){a.removeEventListener(e,n,t)})))},updateHoverStyle:function(e,t,n){var i,o,r,a=n?"setHoverStyle":"removeHoverStyle";for(o=0,r=e.length;o<r;++o)(i=e[o])&&this.getDatasetMeta(i._datasetIndex).controller[a](i)},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==l.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var i=t.handleEvent(e);i|=n&&n.handleEvent(e),l.notify(t,"afterEvent",[e]);var o=t._bufferedRequest;return o?t.render(o):i&&!t.animating&&(t.stop(),t.render(t.options.hover.animationDuration,!0)),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,n=this,i=n.options||{},r=i.hover;return n.lastActive=n.lastActive||[],n.active="mouseout"===e.type?[]:n.getElementsAtEventForMode(e,r.mode,r),o.callback(i.onHover||i.hover.onHover,[e.native,n.active],n),"mouseup"!==e.type&&"click"!==e.type||i.onClick&&i.onClick.call(n,e.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,r.mode,!1),n.active.length&&r.mode&&n.updateHoverStyle(n.active,r.mode,!0),t=!o.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,t}}),e.Controller=e}},{25:25,28:28,45:45,48:48}],24:[function(e,t,n){"use strict";var i=e(45);t.exports=function(e){function t(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),o.forEach((function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),o=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),r=o.apply(this,t);return i.each(e._chartjs.listeners,(function(e){"function"==typeof e[n]&&e[n].apply(e,t)})),r}})})))}function n(e,t){var n=e._chartjs;if(n){var i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(o.forEach((function(t){delete e[t]})),delete e._chartjs)}}var o=["push","pop","shift","splice","unshift"];e.DatasetController=function(e,t){this.initialize(e,t)},i.extend(e.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),n=e.getDataset();null===t.xAxisID&&(t.xAxisID=n.xAxisID||e.chart.options.scales.xAxes[0].id),null===t.yAxisID&&(t.yAxisID=n.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},reset:function(){this.update(!0)},destroy:function(){this._data&&n(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,n=t.dataElementType;return n&&new n({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,n=this,i=n.getMeta(),o=n.getDataset().data||[],r=i.data;for(e=0,t=o.length;e<t;++e)r[e]=r[e]||n.createMetaData(e);i.dataset=i.dataset||n.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,i=e.getDataset(),o=i.data||(i.data=[]);e._data!==o&&(e._data&&n(e._data,e),t(o,e),e._data=o),e.resyncElements()},update:i.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],i=n.length,o=0;o<i;++o)n[o].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,i=0;for(e.dataset&&e.dataset.draw();i<n;++i)t[i].draw()},removeHoverStyle:function(e,t){var n=this.chart.data.datasets[e._datasetIndex],o=e._index,r=e.custom||{},a=i.valueAtIndexOrDefault,s=e._model;s.backgroundColor=r.backgroundColor?r.backgroundColor:a(n.backgroundColor,o,t.backgroundColor),s.borderColor=r.borderColor?r.borderColor:a(n.borderColor,o,t.borderColor),s.borderWidth=r.borderWidth?r.borderWidth:a(n.borderWidth,o,t.borderWidth)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,o=e.custom||{},r=i.valueAtIndexOrDefault,a=i.getHoverColor,s=e._model;s.backgroundColor=o.hoverBackgroundColor?o.hoverBackgroundColor:r(t.hoverBackgroundColor,n,a(s.backgroundColor)),s.borderColor=o.hoverBorderColor?o.hoverBorderColor:r(t.hoverBorderColor,n,a(s.borderColor)),s.borderWidth=o.hoverBorderWidth?o.hoverBorderWidth:r(t.hoverBorderWidth,n,s.borderWidth)},resyncElements:function(){var e=this,t=e.getMeta(),n=e.getDataset().data,i=t.data.length,o=n.length;o<i?t.data.splice(o,i-o):o>i&&e.insertElements(i,o-i)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),e.DatasetController.extend=i.inherits}},{45:45}],25:[function(e,t,n){"use strict";var i=e(45);t.exports={_set:function(e,t){return i.merge(this[e]||(this[e]={}),t)}}},{45:45}],26:[function(e,t,n){"use strict";function i(e,t,n,i){var r,a,s,l,u,c,d,f,h,g=Object.keys(n);for(r=0,a=g.length;r<a;++r)if(c=n[s=g[r]],t.hasOwnProperty(s)||(t[s]=c),(l=t[s])!==c&&"_"!==s[0]){if(e.hasOwnProperty(s)||(e[s]=l),(d=typeof c)==typeof(u=e[s]))if("string"===d){if((f=o(u)).valid&&(h=o(c)).valid){t[s]=h.mix(f,i).rgbString();continue}}else if("number"===d&&isFinite(u)&&isFinite(c)){t[s]=u+(c-u)*i;continue}t[s]=c}}var o=e(3),r=e(45),a=function(e){r.extend(this,e),this.initialize.apply(this,arguments)};r.extend(a.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=r.clone(e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,o=t._start,r=t._view;return n&&1!==e?(r||(r=t._view={}),o||(o=t._start={}),i(o,r,n,e),t):(t._view=n,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return r.isNumber(this._model.x)&&r.isNumber(this._model.y)}}),a.extend=r.inherits,t.exports=a},{3:3,45:45}],27:[function(e,t,n){"use strict";var i=e(3),o=e(25),r=e(45);t.exports=function(e){function t(e,t,n){var i;return"string"==typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}function n(e){return null!=e&&"none"!==e}function a(e,i,o){var r=document.defaultView,a=e.parentNode,s=r.getComputedStyle(e)[i],l=r.getComputedStyle(a)[i],u=n(s),c=n(l),d=Number.POSITIVE_INFINITY;return u||c?Math.min(u?t(s,e,o):d,c?t(l,a,o):d):"none"}r.configMerge=function(){return r.merge(r.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,n,i,o){var a=n[t]||{},s=i[t];"scales"===t?n[t]=r.scaleMerge(a,s):"scale"===t?n[t]=r.merge(a,[e.scaleService.getScaleDefaults(s.type),s]):r._merger(t,n,i,o)}})},r.scaleMerge=function(){return r.merge(r.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,n,i,o){if("xAxes"===t||"yAxes"===t){var a,s,l,u=i[t].length;for(n[t]||(n[t]=[]),a=0;a<u;++a)s=r.valueOrDefault((l=i[t][a]).type,"xAxes"===t?"category":"linear"),a>=n[t].length&&n[t].push({}),r.merge(n[t][a],!n[t][a].type||l.type&&l.type!==n[t][a].type?[e.scaleService.getScaleDefaults(s),l]:l)}else r._merger(t,n,i,o)}})},r.where=function(e,t){if(r.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return r.each(e,(function(e){t(e)&&n.push(e)})),n},r.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var i=0,o=e.length;i<o;++i)if(t.call(n,e[i],i,e))return i;return-1},r.findNextWhere=function(e,t,n){r.isNullOrUndef(n)&&(n=-1);for(var i=n+1;i<e.length;i++){var o=e[i];if(t(o))return o}},r.findPreviousWhere=function(e,t,n){r.isNullOrUndef(n)&&(n=e.length);for(var i=n-1;i>=0;i--){var o=e[i];if(t(o))return o}},r.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r.almostEquals=function(e,t,n){return Math.abs(e-t)<n},r.almostWhole=function(e,t){var n=Math.round(e);return n-t<e&&n+t>e},r.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},r.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},r.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},r.log10=Math.log10?function(e){return Math.log10(e)}:function(e){return Math.log(e)/Math.LN10},r.toRadians=function(e){return e*(Math.PI/180)},r.toDegrees=function(e){return e*(180/Math.PI)},r.getAngleFromPoint=function(e,t){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i),r=Math.atan2(i,n);return r<-.5*Math.PI&&(r+=2*Math.PI),{angle:r,distance:o}},r.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},r.aliasPixel=function(e){return e%2==0?0:.5},r.splineCurve=function(e,t,n,i){var o=e.skip?t:e,r=t,a=n.skip?t:n,s=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),l=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),u=s/(s+l),c=l/(s+l),d=i*(u=isNaN(u)?0:u),f=i*(c=isNaN(c)?0:c);return{previous:{x:r.x-d*(a.x-o.x),y:r.y-d*(a.y-o.y)},next:{x:r.x+f*(a.x-o.x),y:r.y+f*(a.y-o.y)}}},r.EPSILON=Number.EPSILON||1e-14,r.splineCurveMonotone=function(e){var t,n,i,o,a,s,l,u,c,d=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),f=d.length;for(t=0;t<f;++t)if(!(i=d[t]).model.skip){if(n=t>0?d[t-1]:null,(o=t<f-1?d[t+1]:null)&&!o.model.skip){var h=o.model.x-i.model.x;i.deltaK=0!==h?(o.model.y-i.model.y)/h:0}i.mK=!n||n.model.skip?i.deltaK:!o||o.model.skip?n.deltaK:this.sign(n.deltaK)!==this.sign(i.deltaK)?0:(n.deltaK+i.deltaK)/2}for(t=0;t<f-1;++t)o=d[t+1],(i=d[t]).model.skip||o.model.skip||(r.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=o.mK=0:(a=i.mK/i.deltaK,s=o.mK/i.deltaK,(u=Math.pow(a,2)+Math.pow(s,2))<=9||(l=3/Math.sqrt(u),i.mK=a*l*i.deltaK,o.mK=s*l*i.deltaK)));for(t=0;t<f;++t)(i=d[t]).model.skip||(o=t<f-1?d[t+1]:null,(n=t>0?d[t-1]:null)&&!n.model.skip&&(i.model.controlPointPreviousX=i.model.x-(c=(i.model.x-n.model.x)/3),i.model.controlPointPreviousY=i.model.y-c*i.mK),o&&!o.model.skip&&(i.model.controlPointNextX=i.model.x+(c=(o.model.x-i.model.x)/3),i.model.controlPointNextY=i.model.y+c*i.mK))},r.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},r.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},r.niceNum=function(e,t){var n=Math.floor(r.log10(e)),i=e/Math.pow(10,n);return(t?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10)*Math.pow(10,n)},r.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},r.getRelativePosition=function(e,t){var n,i,o=e.originalEvent||e,a=e.currentTarget||e.srcElement,s=a.getBoundingClientRect(),l=o.touches;l&&l.length>0?(n=l[0].clientX,i=l[0].clientY):(n=o.clientX,i=o.clientY);var u=parseFloat(r.getStyle(a,"padding-left")),c=parseFloat(r.getStyle(a,"padding-top")),d=parseFloat(r.getStyle(a,"padding-right")),f=parseFloat(r.getStyle(a,"padding-bottom")),h=s.bottom-s.top-c-f;return{x:n=Math.round((n-s.left-u)/(s.right-s.left-u-d)*a.width/t.currentDevicePixelRatio),y:i=Math.round((i-s.top-c)/h*a.height/t.currentDevicePixelRatio)}},r.getConstraintWidth=function(e){return a(e,"max-width","clientWidth")},r.getConstraintHeight=function(e){return a(e,"max-height","clientHeight")},r.getMaximumWidth=function(e){var t=e.parentNode;if(!t)return e.clientWidth;var n=parseInt(r.getStyle(t,"padding-left"),10),i=parseInt(r.getStyle(t,"padding-right"),10),o=t.clientWidth-n-i,a=r.getConstraintWidth(e);return isNaN(a)?o:Math.min(o,a)},r.getMaximumHeight=function(e){var t=e.parentNode;if(!t)return e.clientHeight;var n=parseInt(r.getStyle(t,"padding-top"),10),i=parseInt(r.getStyle(t,"padding-bottom"),10),o=t.clientHeight-n-i,a=r.getConstraintHeight(e);return isNaN(a)?o:Math.min(o,a)},r.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},r.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||window.devicePixelRatio||1;if(1!==n){var i=e.canvas,o=e.height,r=e.width;i.height=o*n,i.width=r*n,e.ctx.scale(n,n),i.style.height=o+"px",i.style.width=r+"px"}},r.fontString=function(e,t,n){return t+" "+e+"px "+n},r.longestText=function(e,t,n,i){var o=(i=i||{}).data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(o=i.data={},a=i.garbageCollect=[],i.font=t),e.font=t;var s=0;r.each(n,(function(t){null!=t&&!0!==r.isArray(t)?s=r.measureText(e,o,a,s,t):r.isArray(t)&&r.each(t,(function(t){null==t||r.isArray(t)||(s=r.measureText(e,o,a,s,t))}))}));var l=a.length/2;if(l>n.length){for(var u=0;u<l;u++)delete o[a[u]];a.splice(0,l)}return s},r.measureText=function(e,t,n,i,o){var r=t[o];return r||(r=t[o]=e.measureText(o).width,n.push(o)),r>i&&(i=r),i},r.numberOfLabelLines=function(e){var t=1;return r.each(e,(function(e){r.isArray(e)&&e.length>t&&(t=e.length)})),t},r.color=i?function(e){return e instanceof CanvasGradient&&(e=o.global.defaultColor),i(e)}:function(e){return console.error("Color.js not found!"),e},r.getHoverColor=function(e){return e instanceof CanvasPattern?e:r.color(e).saturate(.5).darken(.1).rgbString()}}},{25:25,3:3,45:45}],28:[function(e,t,n){"use strict";function i(e,t){return e.native?{x:e.x,y:e.y}:u.getRelativePosition(e,t)}function o(e,t){var n,i,o,r,a;for(i=0,r=e.data.datasets.length;i<r;++i)if(e.isDatasetVisible(i))for(o=0,a=(n=e.getDatasetMeta(i)).data.length;o<a;++o){var s=n.data[o];s._view.skip||t(s)}}function r(e,t){var n=[];return o(e,(function(e){e.inRange(t.x,t.y)&&n.push(e)})),n}function a(e,t,n,i){var r=Number.POSITIVE_INFINITY,a=[];return o(e,(function(e){if(!n||e.inRange(t.x,t.y)){var o=e.getCenterPoint(),s=i(t,o);s<r?(a=[e],r=s):s===r&&a.push(e)}})),a}function s(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){var o=t?Math.abs(e.x-i.x):0,r=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function l(e,t,n){var o=i(t,e);n.axis=n.axis||"x";var l=s(n.axis),u=n.intersect?r(e,o):a(e,o,!1,l),c=[];return u.length?(e.data.datasets.forEach((function(t,n){if(e.isDatasetVisible(n)){var i=e.getDatasetMeta(n).data[u[0]._index];i&&!i._view.skip&&c.push(i)}})),c):[]}var u=e(45);t.exports={modes:{single:function(e,t){var n=i(t,e),r=[];return o(e,(function(e){if(e.inRange(n.x,n.y))return r.push(e),r})),r.slice(0,1)},label:l,index:l,dataset:function(e,t,n){var o=i(t,e);n.axis=n.axis||"xy";var l=s(n.axis),u=n.intersect?r(e,o):a(e,o,!1,l);return u.length>0&&(u=e.getDatasetMeta(u[0]._datasetIndex).data),u},"x-axis":function(e,t){return l(e,t,{intersect:!1})},point:function(e,t){return r(e,i(t,e))},nearest:function(e,t,n){var o=i(t,e);n.axis=n.axis||"xy";var r=s(n.axis),l=a(e,o,n.intersect,r);return l.length>1&&l.sort((function(e,t){var n=e.getArea()-t.getArea();return 0===n&&(n=e._datasetIndex-t._datasetIndex),n})),l.slice(0,1)},x:function(e,t,n){var r=i(t,e),a=[],s=!1;return o(e,(function(e){e.inXRange(r.x)&&a.push(e),e.inRange(r.x,r.y)&&(s=!0)})),n.intersect&&!s&&(a=[]),a},y:function(e,t,n){var r=i(t,e),a=[],s=!1;return o(e,(function(e){e.inYRange(r.y)&&a.push(e),e.inRange(r.x,r.y)&&(s=!0)})),n.intersect&&!s&&(a=[]),a}}}},{45:45}],29:[function(e,t,n){"use strict";e(25)._set("global",{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},layout:{padding:{top:0,right:0,bottom:0,left:0}}}),t.exports=function(){var e=function(e,t){return this.construct(e,t),this};return e.Chart=e,e}},{25:25}],30:[function(e,t,n){"use strict";var i=e(45);t.exports=function(e){function t(e,t){return i.where(e,(function(e){return e.position===t}))}function n(e,t){e.forEach((function(e,t){return e._tmpIndex_=t,e})),e.sort((function(e,n){var i=t?n:e,o=t?e:n;return i.weight===o.weight?i._tmpIndex_-o._tmpIndex_:i.weight-o.weight})),e.forEach((function(e){delete e._tmpIndex_}))}e.layoutService={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var i,o=["fullWidth","position","weight"],r=o.length,a=0;a<r;++a)n.hasOwnProperty(i=o[a])&&(t[i]=n[i])},update:function(e,o,r){function a(e){var t=i.findNextWhere(I,(function(t){return t.box===e}));if(t)if(e.isHorizontal()){var n={left:Math.max(k,D),right:Math.max(S,w),top:0,bottom:0};e.update(e.fullWidth?y:_,b/2,n)}else e.update(t.minSize.width,x)}function s(e){e.isHorizontal()?(e.left=e.fullWidth?u:k,e.right=e.fullWidth?o-c:k+_,e.top=F,e.bottom=F+e.height,F=e.bottom):(e.left=B,e.right=B+e.width,e.top=A,e.bottom=A+x,B=e.right)}if(e){var l=i.options.toPadding((e.options.layout||{}).padding),u=l.left,c=l.right,d=l.top,f=l.bottom,h=t(e.boxes,"left"),g=t(e.boxes,"right"),p=t(e.boxes,"top"),m=t(e.boxes,"bottom"),v=t(e.boxes,"chartArea");n(h,!0),n(g,!1),n(p,!0),n(m,!1);var y=o-u-c,b=r-d-f,T=b/2,C=(o-y/2)/(h.length+g.length),E=(r-T)/(p.length+m.length),_=y,x=b,I=[];i.each(h.concat(g,p,m),(function(e){var t,n=e.isHorizontal();n?(t=e.update(e.fullWidth?y:_,E),x-=t.height):(t=e.update(C,T),_-=t.width),I.push({horizontal:n,minSize:t,box:e})}));var D=0,w=0,O=0,R=0;i.each(p.concat(m),(function(e){if(e.getPadding){var t=e.getPadding();D=Math.max(D,t.left),w=Math.max(w,t.right)}})),i.each(h.concat(g),(function(e){if(e.getPadding){var t=e.getPadding();O=Math.max(O,t.top),R=Math.max(R,t.bottom)}}));var k=u,S=c,A=d,N=f;i.each(h.concat(g),a),i.each(h,(function(e){k+=e.width})),i.each(g,(function(e){S+=e.width})),i.each(p.concat(m),a),i.each(p,(function(e){A+=e.height})),i.each(m,(function(e){N+=e.height})),i.each(h.concat(g),(function(e){var t=i.findNextWhere(I,(function(t){return t.box===e}));t&&e.update(t.minSize.width,x,{left:0,right:0,top:A,bottom:N})})),k=u,S=c,A=d,N=f,i.each(h,(function(e){k+=e.width})),i.each(g,(function(e){S+=e.width})),i.each(p,(function(e){A+=e.height})),i.each(m,(function(e){N+=e.height}));var M=Math.max(D-k,0);k+=M,S+=Math.max(w-S,0);var K=Math.max(O-A,0);A+=K,N+=Math.max(R-N,0);var P=r-A-N,L=o-k-S;L===_&&P===x||(i.each(h,(function(e){e.height=P})),i.each(g,(function(e){e.height=P})),i.each(p,(function(e){e.fullWidth||(e.width=L)})),i.each(m,(function(e){e.fullWidth||(e.width=L)})),x=P,_=L);var B=u+M,F=d+K;i.each(h.concat(p),s),B+=_,F+=x,i.each(g,s),i.each(m,s),e.chartArea={left:k,top:A,right:k+_,bottom:A+x},i.each(v,(function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(_,x)}))}}}}},{45:45}],31:[function(e,t,n){"use strict";var i=e(25),o=e(26),r=e(45);i._set("global",{plugins:{}}),t.exports=function(e){e.plugins={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var i,o,r,a,s,l=this.descriptors(e),u=l.length;for(i=0;i<u;++i)if("function"==typeof(s=(r=(o=l[i]).plugin)[t])&&((a=[e].concat(n||[])).push(o.options),!1===s.apply(r,a)))return!1;return!0},descriptors:function(e){var t=e._plugins||(e._plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],o=[],a=e&&e.config||{},s=a.options&&a.options.plugins||{};return this._plugins.concat(a.plugins||[]).forEach((function(e){if(-1===n.indexOf(e)){var t=e.id,a=s[t];!1!==a&&(!0===a&&(a=r.clone(i.global.plugins[t])),n.push(e),o.push({plugin:e,options:a||{}}))}})),t.descriptors=o,t.id=this._cacheId,o}},e.pluginService=e.plugins,e.PluginBase=o.extend({})}},{25:25,26:26,45:45}],32:[function(e,t,n){"use strict";function i(e){var t,n,i=[];for(t=0,n=e.length;t<n;++t)i.push(e[t].label);return i}function o(e,t,n){var i=e.getPixelForTick(t);return n&&(i-=0===t?(e.getPixelForTick(1)-i)/2:(i-e.getPixelForTick(t-1))/2),i}var r=e(25),a=e(26),s=e(45),l=e(34);r._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:l.formatters.values,minor:{},major:{}}}),t.exports=function(e){function t(e,t,n){return s.isArray(t)?s.longestText(e,n,t):e.measureText(t).width}function n(e){var t=s.valueOrDefault,n=r.global,i=t(e.fontSize,n.defaultFontSize),o=t(e.fontStyle,n.defaultFontStyle),a=t(e.fontFamily,n.defaultFontFamily);return{size:i,style:o,family:a,font:s.fontString(i,o,a)}}function l(e){return s.options.toLineHeight(s.valueOrDefault(e.lineHeight,1.2),s.valueOrDefault(e.fontSize,r.global.defaultFontSize))}e.Scale=a.extend({getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;for(var t in!1===e.minor&&(e.minor={display:!1}),!1===e.major&&(e.major={display:!1}),e)"major"!==t&&"minor"!==t&&(void 0===e.minor[t]&&(e.minor[t]=e[t]),void 0===e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){s.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var i,o,r,a,l,u,c=this;for(c.beforeUpdate(),c.maxWidth=e,c.maxHeight=t,c.margins=s.extend({left:0,right:0,top:0,bottom:0},n),c.longestTextCache=c.longestTextCache||{},c.beforeSetDimensions(),c.setDimensions(),c.afterSetDimensions(),c.beforeDataLimits(),c.determineDataLimits(),c.afterDataLimits(),c.beforeBuildTicks(),l=c.buildTicks()||[],c.afterBuildTicks(),c.beforeTickToLabelConversion(),r=c.convertTicksToLabels(l)||c.ticks,c.afterTickToLabelConversion(),c.ticks=r,i=0,o=r.length;i<o;++i)a=r[i],(u=l[i])?u.label=a:l.push(u={label:a,major:!1});return c._ticks=l,c.beforeCalculateTickRotation(),c.calculateTickRotation(),c.afterCalculateTickRotation(),c.beforeFit(),c.fit(),c.afterFit(),c.afterUpdate(),c.minSize},afterUpdate:function(){s.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){s.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){s.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){s.callback(this.options.beforeDataLimits,[this])},determineDataLimits:s.noop,afterDataLimits:function(){s.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){s.callback(this.options.beforeBuildTicks,[this])},buildTicks:s.noop,afterBuildTicks:function(){s.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){s.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){s.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){s.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,o=e.options.ticks,r=i(e._ticks),a=n(o);t.font=a.font;var l=o.minRotation||0;if(r.length&&e.options.display&&e.isHorizontal())for(var u,c=s.longestText(t,a.font,r,e.longestTextCache),d=c,f=e.getPixelForTick(1)-e.getPixelForTick(0)-6;d>f&&l<o.maxRotation;){var h=s.toRadians(l);if(u=Math.cos(h),Math.sin(h)*c>e.maxHeight){l--;break}l++,d=u*c}e.labelRotation=l},afterCalculateTickRotation:function(){s.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){s.callback(this.options.beforeFit,[this])},fit:function(){var e=this,o=e.minSize={width:0,height:0},r=i(e._ticks),a=e.options,u=a.ticks,c=a.scaleLabel,d=a.gridLines,f=a.display,h=e.isHorizontal(),g=n(u),p=a.gridLines.tickMarkLength;if(o.width=h?e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:f&&d.drawTicks?p:0,o.height=h?f&&d.drawTicks?p:0:e.maxHeight,c.display&&f){var m=l(c)+s.options.toPadding(c.padding).height;h?o.height+=m:o.width+=m}if(u.display&&f){var v=s.longestText(e.ctx,g.font,r,e.longestTextCache),y=s.numberOfLabelLines(r),b=.5*g.size,T=e.options.ticks.padding;if(h){e.longestLabelWidth=v;var C=s.toRadians(e.labelRotation),E=Math.cos(C),_=Math.sin(C)*v+g.size*y+b*(y-1)+b;o.height=Math.min(e.maxHeight,o.height+_+T),e.ctx.font=g.font;var x=t(e.ctx,r[0],g.font),I=t(e.ctx,r[r.length-1],g.font);0!==e.labelRotation?(e.paddingLeft="bottom"===a.position?E*x+3:E*b+3,e.paddingRight="bottom"===a.position?E*b+3:E*I+3):(e.paddingLeft=x/2+3,e.paddingRight=I/2+3)}else u.mirror?v=0:v+=T+b,o.width=Math.min(e.maxWidth,o.width+v),e.paddingTop=g.size/2,e.paddingBottom=g.size/2}e.handleMargins(),e.width=o.width,e.height=o.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){s.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(s.isNullOrUndef(e))return NaN;if("number"==typeof e&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:s.noop,getPixelForValue:s.noop,getValueForPixel:s.noop,getPixelForTick:function(e){var t=this,n=t.options.offset;if(t.isHorizontal()){var i=(t.width-(t.paddingLeft+t.paddingRight))/Math.max(t._ticks.length-(n?0:1),1),o=i*e+t.paddingLeft;return n&&(o+=i/2),t.left+Math.round(o)+(t.isFullWidth()?t.margins.left:0)}return t.top+e*((t.height-(t.paddingTop+t.paddingBottom))/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;return t.isHorizontal()?t.left+Math.round((t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft)+(t.isFullWidth()?t.margins.left:0):t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,n=e.max;return e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0},_autoSkip:function(e){var t,n,i,o,r=this,a=r.isHorizontal(),l=r.options.ticks.minor,u=e.length,c=s.toRadians(r.labelRotation),d=Math.cos(c),f=r.longestLabelWidth*d,h=[];for(l.maxTicksLimit&&(o=l.maxTicksLimit),a&&(t=!1,(f+l.autoSkipPadding)*u>r.width-(r.paddingLeft+r.paddingRight)&&(t=1+Math.floor((f+l.autoSkipPadding)*u/(r.width-(r.paddingLeft+r.paddingRight)))),o&&u>o&&(t=Math.max(t,Math.floor(u/o)))),n=0;n<u;n++)i=e[n],(t>1&&n%t>0||n%t==0&&n+t>=u)&&n!==u-1&&delete i.label,h.push(i);return h},draw:function(e){var t=this,i=t.options;if(i.display){var a=t.ctx,u=r.global,c=i.ticks.minor,d=i.ticks.major||c,f=i.gridLines,h=i.scaleLabel,g=0!==t.labelRotation,p=t.isHorizontal(),m=c.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),v=s.valueOrDefault(c.fontColor,u.defaultFontColor),y=n(c),b=s.valueOrDefault(d.fontColor,u.defaultFontColor),T=n(d),C=f.drawTicks?f.tickMarkLength:0,E=s.valueOrDefault(h.fontColor,u.defaultFontColor),_=n(h),x=s.options.toPadding(h.padding),I=s.toRadians(t.labelRotation),D=[],w="right"===i.position?t.left:t.right-C,O="right"===i.position?t.left+C:t.right,R="bottom"===i.position?t.top:t.bottom-C,k="bottom"===i.position?t.top+C:t.bottom;if(s.each(m,(function(n,r){if(!s.isNullOrUndef(n.label)){var a,l,d,h,v=n.label;r===t.zeroLineIndex&&i.offset===f.offsetGridLines?(a=f.zeroLineWidth,l=f.zeroLineColor,d=f.zeroLineBorderDash,h=f.zeroLineBorderDashOffset):(a=s.valueAtIndexOrDefault(f.lineWidth,r),l=s.valueAtIndexOrDefault(f.color,r),d=s.valueOrDefault(f.borderDash,u.borderDash),h=s.valueOrDefault(f.borderDashOffset,u.borderDashOffset));var y,b,T,E,_,x,S,A,N,M,K="middle",P="middle",L=c.padding;if(p){var B=C+L;"bottom"===i.position?(P=g?"middle":"top",K=g?"right":"center",M=t.top+B):(P=g?"middle":"bottom",K=g?"left":"center",M=t.bottom-B);var F=o(t,r,f.offsetGridLines&&m.length>1);F<t.left&&(l="rgba(0,0,0,0)"),F+=s.aliasPixel(a),N=t.getPixelForTick(r)+c.labelOffset,y=T=_=S=F,b=R,E=k,x=e.top,A=e.bottom}else{var z,H="left"===i.position;c.mirror?(K=H?"left":"right",z=L):(K=H?"right":"left",z=C+L),N=H?t.right-z:t.left+z;var V=o(t,r,f.offsetGridLines&&m.length>1);V<t.top&&(l="rgba(0,0,0,0)"),V+=s.aliasPixel(a),M=t.getPixelForTick(r)+c.labelOffset,y=w,T=O,_=e.left,S=e.right,b=E=x=A=V}D.push({tx1:y,ty1:b,tx2:T,ty2:E,x1:_,y1:x,x2:S,y2:A,labelX:N,labelY:M,glWidth:a,glColor:l,glBorderDash:d,glBorderDashOffset:h,rotation:-1*I,label:v,major:n.major,textBaseline:P,textAlign:K})}})),s.each(D,(function(e){if(f.display&&(a.save(),a.lineWidth=e.glWidth,a.strokeStyle=e.glColor,a.setLineDash&&(a.setLineDash(e.glBorderDash),a.lineDashOffset=e.glBorderDashOffset),a.beginPath(),f.drawTicks&&(a.moveTo(e.tx1,e.ty1),a.lineTo(e.tx2,e.ty2)),f.drawOnChartArea&&(a.moveTo(e.x1,e.y1),a.lineTo(e.x2,e.y2)),a.stroke(),a.restore()),c.display){a.save(),a.translate(e.labelX,e.labelY),a.rotate(e.rotation),a.font=e.major?T.font:y.font,a.fillStyle=e.major?b:v,a.textBaseline=e.textBaseline,a.textAlign=e.textAlign;var t=e.label;if(s.isArray(t))for(var n=0,i=0;n<t.length;++n)a.fillText(""+t[n],0,i),i+=1.5*y.size;else a.fillText(t,0,0);a.restore()}})),h.display){var S,A,N=0,M=l(h)/2;if(p)S=t.left+(t.right-t.left)/2,A="bottom"===i.position?t.bottom-M-x.bottom:t.top+M+x.top;else{var K="left"===i.position;S=K?t.left+M+x.top:t.right-M-x.top,A=t.top+(t.bottom-t.top)/2,N=K?-.5*Math.PI:.5*Math.PI}a.save(),a.translate(S,A),a.rotate(N),a.textAlign="center",a.textBaseline="middle",a.fillStyle=E,a.font=_.font,a.fillText(h.labelString,0,0),a.restore()}if(f.drawBorder){a.lineWidth=s.valueAtIndexOrDefault(f.lineWidth,0),a.strokeStyle=s.valueAtIndexOrDefault(f.color,0);var P=t.left,L=t.right,B=t.top,F=t.bottom,z=s.aliasPixel(a.lineWidth);p?(B=F="top"===i.position?t.bottom:t.top,B+=z,F+=z):(P=L="left"===i.position?t.right:t.left,P+=z,L+=z),a.beginPath(),a.moveTo(P,B),a.lineTo(L,F),a.stroke()}}}})}},{25:25,26:26,34:34,45:45}],33:[function(e,t,n){"use strict";var i=e(25),o=e(45);t.exports=function(e){e.scaleService={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=o.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?o.merge({},[i.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var n=this;n.defaults.hasOwnProperty(e)&&(n.defaults[e]=o.extend(n.defaults[e],t))},addScalesToLayout:function(t){o.each(t.scales,(function(n){n.fullWidth=n.options.fullWidth,n.position=n.options.position,n.weight=n.options.weight,e.layoutService.addBox(t,n)}))}}}},{25:25,45:45}],34:[function(e,t,n){"use strict";var i=e(45);t.exports={generators:{linear:function(e,t){var n,o=[];if(e.stepSize&&e.stepSize>0)n=e.stepSize;else{var r=i.niceNum(t.max-t.min,!1);n=i.niceNum(r/(e.maxTicks-1),!0)}var a=Math.floor(t.min/n)*n,s=Math.ceil(t.max/n)*n;e.min&&e.max&&e.stepSize&&i.almostWhole((e.max-e.min)/e.stepSize,n/1e3)&&(a=e.min,s=e.max);var l=(s-a)/n;l=i.almostEquals(l,Math.round(l),n/1e3)?Math.round(l):Math.ceil(l),o.push(void 0!==e.min?e.min:a);for(var u=1;u<l;++u)o.push(a+u*n);return o.push(void 0!==e.max?e.max:s),o},logarithmic:function(e,t){var n,o,r=[],a=i.valueOrDefault,s=a(e.min,Math.pow(10,Math.floor(i.log10(t.min)))),l=Math.floor(i.log10(t.max)),u=Math.ceil(t.max/Math.pow(10,l));0===s?(n=Math.floor(i.log10(t.minNotZero)),o=Math.floor(t.minNotZero/Math.pow(10,n)),r.push(s),s=o*Math.pow(10,n)):(n=Math.floor(i.log10(s)),o=Math.floor(s/Math.pow(10,n)));do{r.push(s),10==++o&&(o=1,++n),s=o*Math.pow(10,n)}while(n<l||n===l&&o<u);var c=a(e.max,s);return r.push(c),r}},formatters:{values:function(e){return i.isArray(e)?e:""+e},linear:function(e,t,n){var o=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(o)>1&&e!==Math.floor(e)&&(o=e-Math.floor(e));var r=i.log10(Math.abs(o)),a="";if(0!==e){var s=-1*Math.floor(r);s=Math.max(Math.min(s,20),0),a=e.toFixed(s)}else a="0";return a},logarithmic:function(e,t,n){var o=e/Math.pow(10,Math.floor(i.log10(e)));return 0===e?"0":1===o||2===o||5===o||0===t||t===n.length-1?e.toExponential():""}}}},{45:45}],35:[function(e,t,n){"use strict";var i=e(25),o=e(26),r=e(45);i._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:r.noop,title:function(e,t){var n="",i=t.labels,o=i?i.length:0;if(e.length>0){var r=e[0];r.xLabel?n=r.xLabel:o>0&&r.index<o&&(n=i[r.index])}return n},afterTitle:r.noop,beforeBody:r.noop,beforeLabel:r.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),n+e.yLabel},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:r.noop,afterBody:r.noop,beforeFooter:r.noop,footer:r.noop,afterFooter:r.noop}}}),t.exports=function(e){function t(e,t){var n=r.color(e);return n.alpha(t*n.alpha()).rgbaString()}function n(e,t){return t&&(r.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function a(e){var t=e._xScale,n=e._yScale||e._scale,i=e._index,o=e._datasetIndex;return{xLabel:t?t.getLabelForIndex(i,o):"",yLabel:n?n.getLabelForIndex(i,o):"",index:i,datasetIndex:o,x:e._model.x,y:e._model.y}}function s(e){var t=i.global,n=r.valueOrDefault;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:n(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:n(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:n(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:n(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:n(e.titleFontStyle,t.defaultFontStyle),titleFontSize:n(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:n(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:n(e.footerFontStyle,t.defaultFontStyle),footerFontSize:n(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}e.Tooltip=o.extend({initialize:function(){this._model=s(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options.callbacks,i=t.beforeTitle.apply(e,arguments),o=t.title.apply(e,arguments),r=t.afterTitle.apply(e,arguments),a=[];return a=n(a,i),a=n(a,o),n(a,r)},getBeforeBody:function(){var e=this._options.callbacks.beforeBody.apply(this,arguments);return r.isArray(e)?e:void 0!==e?[e]:[]},getBody:function(e,t){var i=this,o=i._options.callbacks,a=[];return r.each(e,(function(e){var r={before:[],lines:[],after:[]};n(r.before,o.beforeLabel.call(i,e,t)),n(r.lines,o.label.call(i,e,t)),n(r.after,o.afterLabel.call(i,e,t)),a.push(r)})),a},getAfterBody:function(){var e=this._options.callbacks.afterBody.apply(this,arguments);return r.isArray(e)?e:void 0!==e?[e]:[]},getFooter:function(){var e=this,t=e._options.callbacks,i=t.beforeFooter.apply(e,arguments),o=t.footer.apply(e,arguments),r=t.afterFooter.apply(e,arguments),a=[];return a=n(a,i),a=n(a,o),n(a,r)},update:function(t){var n,i,o=this,l=o._options,u=o._model,c=o._model=s(l),d=o._active,f=o._data,h={xAlign:u.xAlign,yAlign:u.yAlign},g={x:u.x,y:u.y},p={width:u.width,height:u.height},m={x:u.caretX,y:u.caretY};if(d.length){c.opacity=1;var v=[],y=[];m=e.Tooltip.positioners[l.position].call(o,d,o._eventPosition);var b=[];for(n=0,i=d.length;n<i;++n)b.push(a(d[n]));l.filter&&(b=b.filter((function(e){return l.filter(e,f)}))),l.itemSort&&(b=b.sort((function(e,t){return l.itemSort(e,t,f)}))),r.each(b,(function(e){v.push(l.callbacks.labelColor.call(o,e,o._chart)),y.push(l.callbacks.labelTextColor.call(o,e,o._chart))})),c.title=o.getTitle(b,f),c.beforeBody=o.getBeforeBody(b,f),c.body=o.getBody(b,f),c.afterBody=o.getAfterBody(b,f),c.footer=o.getFooter(b,f),c.x=Math.round(m.x),c.y=Math.round(m.y),c.caretPadding=l.caretPadding,c.labelColors=v,c.labelTextColors=y,c.dataPoints=b,g=function(e,t,n){var i=e.x,o=e.y,r=e.caretPadding,a=n.xAlign,s=n.yAlign,l=e.caretSize+r,u=e.cornerRadius+r;return"right"===a?i-=t.width:"center"===a&&(i-=t.width/2),"top"===s?o+=l:o-="bottom"===s?t.height+l:t.height/2,"center"===s?"left"===a?i+=l:"right"===a&&(i-=l):"left"===a?i-=u:"right"===a&&(i+=u),{x:i,y:o}}(c,p=function(e,t){var n=e._chart.ctx,i=2*t.yPadding,o=0,a=t.body,s=a.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0),l=t.title.length,u=t.footer.length,c=t.titleFontSize,d=t.bodyFontSize,f=t.footerFontSize;i+=l*c,i+=l?(l-1)*t.titleSpacing:0,i+=l?t.titleMarginBottom:0,i+=(s+=t.beforeBody.length+t.afterBody.length)*d,i+=s?(s-1)*t.bodySpacing:0,i+=u?t.footerMarginTop:0,i+=u*f,i+=u?(u-1)*t.footerSpacing:0;var h=0,g=function(e){o=Math.max(o,n.measureText(e).width+h)};return n.font=r.fontString(c,t._titleFontStyle,t._titleFontFamily),r.each(t.title,g),n.font=r.fontString(d,t._bodyFontStyle,t._bodyFontFamily),r.each(t.beforeBody.concat(t.afterBody),g),h=t.displayColors?d+2:0,r.each(a,(function(e){r.each(e.before,g),r.each(e.lines,g),r.each(e.after,g)})),h=0,n.font=r.fontString(f,t._footerFontStyle,t._footerFontFamily),r.each(t.footer,g),{width:o+=2*t.xPadding,height:i}}(this,c),h=function(e,t){var n=e._model,i=e._chart,o=e._chart.chartArea,r="center",a="center";n.y<t.height?a="top":n.y>i.height-t.height&&(a="bottom");var s,l,u,c,d,f=(o.left+o.right)/2,h=(o.top+o.bottom)/2;"center"===a?(s=function(e){return e<=f},l=function(e){return e>f}):(s=function(e){return e<=t.width/2},l=function(e){return e>=i.width-t.width/2}),u=function(e){return e+t.width>i.width},c=function(e){return e-t.width<0},d=function(e){return e<=h?"top":"bottom"},s(n.x)?(r="left",u(n.x)&&(r="center",a=d(n.y))):l(n.x)&&(r="right",c(n.x)&&(r="center",a=d(n.y)));var g=e._options;return{xAlign:g.xAlign?g.xAlign:r,yAlign:g.yAlign?g.yAlign:a}}(this,p))}else c.opacity=0;return c.xAlign=h.xAlign,c.yAlign=h.yAlign,c.x=g.x,c.y=g.y,c.width=p.width,c.height=p.height,c.caretX=m.x,c.caretY=m.y,o._model=c,t&&l.custom&&l.custom.call(o,c),o},drawCaret:function(e,t){var n=this._chart.ctx,i=this.getCaretPosition(e,t,this._view);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)},getCaretPosition:function(e,t,n){var i,o,r,a,s,l,u=n.caretSize,c=n.cornerRadius,d=n.xAlign,f=n.yAlign,h=e.x,g=e.y,p=t.width,m=t.height;if("center"===f)s=g+m/2,"left"===d?(o=(i=h)-u,r=i,a=s+u,l=s-u):(o=(i=h+p)+u,r=i,a=s-u,l=s+u);else if("left"===d?(i=(o=h+c+u)-u,r=o+u):"right"===d?(i=(o=h+p-c-u)-u,r=o+u):(i=(o=h+p/2)-u,r=o+u),"top"===f)s=(a=g)-u,l=a;else{s=(a=g+m)+u,l=a;var v=r;r=i,i=v}return{x1:i,x2:o,x3:r,y1:a,y2:s,y3:l}},drawTitle:function(e,n,i,o){var a=n.title;if(a.length){i.textAlign=n._titleAlign,i.textBaseline="top";var s,l,u=n.titleFontSize,c=n.titleSpacing;for(i.fillStyle=t(n.titleFontColor,o),i.font=r.fontString(u,n._titleFontStyle,n._titleFontFamily),s=0,l=a.length;s<l;++s)i.fillText(a[s],e.x,e.y),e.y+=u+c,s+1===a.length&&(e.y+=n.titleMarginBottom-c)}},drawBody:function(e,n,i,o){var a=n.bodyFontSize,s=n.bodySpacing,l=n.body;i.textAlign=n._bodyAlign,i.textBaseline="top",i.font=r.fontString(a,n._bodyFontStyle,n._bodyFontFamily);var u=0,c=function(t){i.fillText(t,e.x+u,e.y),e.y+=a+s};i.fillStyle=t(n.bodyFontColor,o),r.each(n.beforeBody,c);var d=n.displayColors;u=d?a+2:0,r.each(l,(function(s,l){var u=t(n.labelTextColors[l],o);i.fillStyle=u,r.each(s.before,c),r.each(s.lines,(function(r){d&&(i.fillStyle=t(n.legendColorBackground,o),i.fillRect(e.x,e.y,a,a),i.lineWidth=1,i.strokeStyle=t(n.labelColors[l].borderColor,o),i.strokeRect(e.x,e.y,a,a),i.fillStyle=t(n.labelColors[l].backgroundColor,o),i.fillRect(e.x+1,e.y+1,a-2,a-2),i.fillStyle=u),c(r)})),r.each(s.after,c)})),u=0,r.each(n.afterBody,c),e.y-=s},drawFooter:function(e,n,i,o){var a=n.footer;a.length&&(e.y+=n.footerMarginTop,i.textAlign=n._footerAlign,i.textBaseline="top",i.fillStyle=t(n.footerFontColor,o),i.font=r.fontString(n.footerFontSize,n._footerFontStyle,n._footerFontFamily),r.each(a,(function(t){i.fillText(t,e.x,e.y),e.y+=n.footerFontSize+n.footerSpacing})))},drawBackground:function(e,n,i,o,r){i.fillStyle=t(n.backgroundColor,r),i.strokeStyle=t(n.borderColor,r),i.lineWidth=n.borderWidth;var a=n.xAlign,s=n.yAlign,l=e.x,u=e.y,c=o.width,d=o.height,f=n.cornerRadius;i.beginPath(),i.moveTo(l+f,u),"top"===s&&this.drawCaret(e,o),i.lineTo(l+c-f,u),i.quadraticCurveTo(l+c,u,l+c,u+f),"center"===s&&"right"===a&&this.drawCaret(e,o),i.lineTo(l+c,u+d-f),i.quadraticCurveTo(l+c,u+d,l+c-f,u+d),"bottom"===s&&this.drawCaret(e,o),i.lineTo(l+f,u+d),i.quadraticCurveTo(l,u+d,l,u+d-f),"center"===s&&"left"===a&&this.drawCaret(e,o),i.lineTo(l,u+f),i.quadraticCurveTo(l,u,l+f,u),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},i={x:t.x,y:t.y},o=Math.abs(t.opacity<.001)?0:t.opacity;this._options.enabled&&(t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length)&&(this.drawBackground(i,t,e,n,o),i.x+=t.xPadding,i.y+=t.yPadding,this.drawTitle(i,t,e,o),this.drawBody(i,t,e,o),this.drawFooter(i,t,e,o))}},handleEvent:function(e){var t=this,n=t._options,i=!1;if(t._lastActive=t._lastActive||[],t._active="mouseout"===e.type?[]:t._chart.getElementsAtEventForMode(e,n.mode,n),!(i=!r.arrayEquals(t._active,t._lastActive)))return!1;if(t._lastActive=t._active,n.enabled||n.custom){t._eventPosition={x:e.x,y:e.y};var o=t._model;t.update(!0),t.pivot(),i|=o.x!==t._model.x||o.y!==t._model.y}return i}}),e.Tooltip.positioners={average:function(e){if(!e.length)return!1;var t,n,i=0,o=0,r=0;for(t=0,n=e.length;t<n;++t){var a=e[t];if(a&&a.hasValue()){var s=a.tooltipPosition();i+=s.x,o+=s.y,++r}}return{x:Math.round(i/r),y:Math.round(o/r)}},nearest:function(e,t){var n,i,o,a=t.x,s=t.y,l=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){var u=e[n];if(u&&u.hasValue()){var c=u.getCenterPoint(),d=r.distanceBetweenPoints(t,c);d<l&&(l=d,o=u)}}if(o){var f=o.tooltipPosition();a=f.x,s=f.y}return{x:a,y:s}}}}},{25:25,26:26,45:45}],36:[function(e,t,n){"use strict";var i=e(25),o=e(26),r=e(45);i._set("global",{elements:{arc:{backgroundColor:i.global.defaultColor,borderColor:"#fff",borderWidth:2}}}),t.exports=o.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var i=r.getAngleFromPoint(n,{x:e,y:t}),o=i.angle,a=i.distance,s=n.startAngle,l=n.endAngle;l<s;)l+=2*Math.PI;for(;o>l;)o-=2*Math.PI;for(;o<s;)o+=2*Math.PI;return o>=s&&o<=l&&a>=n.innerRadius&&a<=n.outerRadius}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e=this._chart.ctx,t=this._view,n=t.startAngle,i=t.endAngle;e.beginPath(),e.arc(t.x,t.y,t.outerRadius,n,i),e.arc(t.x,t.y,t.innerRadius,i,n,!0),e.closePath(),e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth,e.fillStyle=t.backgroundColor,e.fill(),e.lineJoin="bevel",t.borderWidth&&e.stroke()}})},{25:25,26:26,45:45}],37:[function(e,t,n){"use strict";var i=e(25),o=e(26),r=e(45),a=i.global;i._set("global",{elements:{line:{tension:.4,backgroundColor:a.defaultColor,borderWidth:3,borderColor:a.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}}),t.exports=o.extend({draw:function(){var e,t,n,i,o=this,s=o._view,l=o._chart.ctx,u=s.spanGaps,c=o._children.slice(),d=a.elements.line,f=-1;for(o._loop&&c.length&&c.push(c[0]),l.save(),l.lineCap=s.borderCapStyle||d.borderCapStyle,l.setLineDash&&l.setLineDash(s.borderDash||d.borderDash),l.lineDashOffset=s.borderDashOffset||d.borderDashOffset,l.lineJoin=s.borderJoinStyle||d.borderJoinStyle,l.lineWidth=s.borderWidth||d.borderWidth,l.strokeStyle=s.borderColor||a.defaultColor,l.beginPath(),f=-1,e=0;e<c.length;++e)t=c[e],n=r.previousItem(c,e),i=t._view,0===e?i.skip||(l.moveTo(i.x,i.y),f=e):(n=-1===f?n:c[f],i.skip||(f!==e-1&&!u||-1===f?l.moveTo(i.x,i.y):r.canvas.lineTo(l,n._view,t._view),f=e));l.stroke(),l.restore()}})},{25:25,26:26,45:45}],38:[function(e,t,n){"use strict";function i(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hitRadius,2)}var o=e(25),r=e(26),a=e(45),s=o.global.defaultColor;o._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:s,borderColor:s,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}}),t.exports=r.extend({inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:i,inXRange:i,inYRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.y,2)<Math.pow(t.radius+t.hitRadius,2)},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._model,i=this._chart.ctx,r=t.pointStyle,l=t.radius,u=t.x,c=t.y,d=a.color,f=0;t.skip||(i.strokeStyle=t.borderColor||s,i.lineWidth=a.valueOrDefault(t.borderWidth,o.global.elements.point.borderWidth),i.fillStyle=t.backgroundColor||s,void 0!==e&&(n.x<e.left||1.01*e.right<n.x||n.y<e.top||1.01*e.bottom<n.y)&&(n.x<e.left?f=(u-n.x)/(e.left-n.x):1.01*e.right<n.x?f=(n.x-u)/(n.x-e.right):n.y<e.top?f=(c-n.y)/(e.top-n.y):1.01*e.bottom<n.y&&(f=(n.y-c)/(n.y-e.bottom)),f=Math.round(100*f)/100,i.strokeStyle=d(i.strokeStyle).alpha(f).rgbString(),i.fillStyle=d(i.fillStyle).alpha(f).rgbString()),a.canvas.drawPoint(i,r,l,u,c))}})},{25:25,26:26,45:45}],39:[function(e,t,n){"use strict";function i(e){return void 0!==e._view.width}function o(e){var t,n,o,r,a=e._view;if(i(e)){var s=a.width/2;t=a.x-s,n=a.x+s,o=Math.min(a.y,a.base),r=Math.max(a.y,a.base)}else{var l=a.height/2;t=Math.min(a.x,a.base),n=Math.max(a.x,a.base),o=a.y-l,r=a.y+l}return{left:t,top:o,right:n,bottom:r}}var r=e(25),a=e(26);r._set("global",{elements:{rectangle:{backgroundColor:r.global.defaultColor,borderColor:r.global.defaultColor,borderSkipped:"bottom",borderWidth:0}}}),t.exports=a.extend({draw:function(){function e(e){return v[(y+e)%4]}var t,n,i,o,r,a,s,l=this._chart.ctx,u=this._view,c=u.borderWidth;if(u.horizontal?(i=u.y-u.height/2,o=u.y+u.height/2,r=(n=u.x)>(t=u.base)?1:-1,a=1,s=u.borderSkipped||"left"):(t=u.x-u.width/2,n=u.x+u.width/2,r=1,a=(o=u.base)>(i=u.y)?1:-1,s=u.borderSkipped||"bottom"),c){var d=Math.min(Math.abs(t-n),Math.abs(i-o)),f=(c=c>d?d:c)/2,h=t+("left"!==s?f*r:0),g=n+("right"!==s?-f*r:0),p=i+("top"!==s?f*a:0),m=o+("bottom"!==s?-f*a:0);h!==g&&(i=p,o=m),p!==m&&(t=h,n=g)}l.beginPath(),l.fillStyle=u.backgroundColor,l.strokeStyle=u.borderColor,l.lineWidth=c;var v=[[t,o],[t,i],[n,i],[n,o]],y=["bottom","left","top","right"].indexOf(s,0);-1===y&&(y=0);var b=e(0);l.moveTo(b[0],b[1]);for(var T=1;T<4;T++)b=e(T),l.lineTo(b[0],b[1]);l.fill(),c&&l.stroke()},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){var n=!1;if(this._view){var i=o(this);n=e>=i.left&&e<=i.right&&t>=i.top&&t<=i.bottom}return n},inLabelRange:function(e,t){var n=this;if(!n._view)return!1;var r=o(n);return i(n)?e>=r.left&&e<=r.right:t>=r.top&&t<=r.bottom},inXRange:function(e){var t=o(this);return e>=t.left&&e<=t.right},inYRange:function(e){var t=o(this);return e>=t.top&&e<=t.bottom},getCenterPoint:function(){var e,t,n=this._view;return i(this)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return e.width*Math.abs(e.y-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}})},{25:25,26:26}],40:[function(e,t,n){"use strict";t.exports={},t.exports.Arc=e(36),t.exports.Line=e(37),t.exports.Point=e(38),t.exports.Rectangle=e(39)},{36:36,37:37,38:38,39:39}],41:[function(e,t,n){"use strict";var i=e(42);n=t.exports={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,i,o,r){if(r){var a=Math.min(r,i/2),s=Math.min(r,o/2);e.moveTo(t+a,n),e.lineTo(t+i-a,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+o-s),e.quadraticCurveTo(t+i,n+o,t+i-a,n+o),e.lineTo(t+a,n+o),e.quadraticCurveTo(t,n+o,t,n+o-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+a,n)}else e.rect(t,n,i,o)},drawPoint:function(e,t,n,i,o){var r,a,s,l,u,c;if(!t||"object"!=typeof t||"[object HTMLImageElement]"!==(r=t.toString())&&"[object HTMLCanvasElement]"!==r){if(!(isNaN(n)||n<=0)){switch(t){default:e.beginPath(),e.arc(i,o,n,0,2*Math.PI),e.closePath(),e.fill();break;case"triangle":e.beginPath(),u=(a=3*n/Math.sqrt(3))*Math.sqrt(3)/2,e.moveTo(i-a/2,o+u/3),e.lineTo(i+a/2,o+u/3),e.lineTo(i,o-2*u/3),e.closePath(),e.fill();break;case"rect":c=1/Math.SQRT2*n,e.beginPath(),e.fillRect(i-c,o-c,2*c,2*c),e.strokeRect(i-c,o-c,2*c,2*c);break;case"rectRounded":var d=n/Math.SQRT2,f=i-d,h=o-d,g=Math.SQRT2*n;e.beginPath(),this.roundedRect(e,f,h,g,g,n/2),e.closePath(),e.fill();break;case"rectRot":c=1/Math.SQRT2*n,e.beginPath(),e.moveTo(i-c,o),e.lineTo(i,o+c),e.lineTo(i+c,o),e.lineTo(i,o-c),e.closePath(),e.fill();break;case"cross":e.beginPath(),e.moveTo(i,o+n),e.lineTo(i,o-n),e.moveTo(i-n,o),e.lineTo(i+n,o),e.closePath();break;case"crossRot":e.beginPath(),s=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,e.moveTo(i-s,o-l),e.lineTo(i+s,o+l),e.moveTo(i-s,o+l),e.lineTo(i+s,o-l),e.closePath();break;case"star":e.beginPath(),e.moveTo(i,o+n),e.lineTo(i,o-n),e.moveTo(i-n,o),e.lineTo(i+n,o),s=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,e.moveTo(i-s,o-l),e.lineTo(i+s,o+l),e.moveTo(i-s,o+l),e.lineTo(i+s,o-l),e.closePath();break;case"line":e.beginPath(),e.moveTo(i-n,o),e.lineTo(i+n,o),e.closePath();break;case"dash":e.beginPath(),e.moveTo(i,o),e.lineTo(i+n,o),e.closePath()}e.stroke()}}else e.drawImage(t,i-t.width/2,o-t.height/2,t.width,t.height)},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,i){if(n.steppedLine)return"after"===n.steppedLine&&!i||"after"!==n.steppedLine&&i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y),void e.lineTo(n.x,n.y);n.tension?e.bezierCurveTo(i?t.controlPointPreviousX:t.controlPointNextX,i?t.controlPointPreviousY:t.controlPointNextY,i?n.controlPointNextX:n.controlPointPreviousX,i?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}},i.clear=n.clear,i.drawRoundedRectangle=function(e){e.beginPath(),n.roundedRect.apply(n,arguments),e.closePath()}},{42:42}],42:[function(e,t,n){"use strict";var i={noop:function(){},uid:function(){var e=0;return function(){return e++}}(),isNullOrUndef:function(e){return null==e},isArray:Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return i.valueOrDefault(i.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,o){var r,a,s;if(i.isArray(e))if(a=e.length,o)for(r=a-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<a;r++)t.call(n,e[r],r);else if(i.isObject(e))for(a=(s=Object.keys(e)).length,r=0;r<a;r++)t.call(n,e[s[r]],s[r])},arrayEquals:function(e,t){var n,o,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,o=e.length;n<o;++n)if(a=t[n],(r=e[n])instanceof Array&&a instanceof Array){if(!i.arrayEquals(r,a))return!1}else if(r!==a)return!1;return!0},clone:function(e){if(i.isArray(e))return e.map(i.clone);if(i.isObject(e)){for(var t={},n=Object.keys(e),o=n.length,r=0;r<o;++r)t[n[r]]=i.clone(e[n[r]]);return t}return e},_merger:function(e,t,n,o){var r=t[e],a=n[e];i.isObject(r)&&i.isObject(a)?i.merge(r,a,o):t[e]=i.clone(a)},_mergerIf:function(e,t,n){var o=t[e],r=n[e];i.isObject(o)&&i.isObject(r)?i.mergeIf(o,r):t.hasOwnProperty(e)||(t[e]=i.clone(r))},merge:function(e,t,n){var o,r,a,s,l,u=i.isArray(t)?t:[t],c=u.length;if(!i.isObject(e))return e;for(o=(n=n||{}).merger||i._merger,r=0;r<c;++r)if(i.isObject(t=u[r]))for(l=0,s=(a=Object.keys(t)).length;l<s;++l)o(a[l],e,t,n);return e},mergeIf:function(e,t){return i.merge(e,t,{merger:i._mergerIf})},extend:function(e){for(var t=1,n=arguments.length;t<n;++t)i.each(arguments[t],(function(t,n){e[n]=t}));return e},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},o=function(){this.constructor=n};return o.prototype=t.prototype,n.prototype=new o,n.extend=i.inherits,e&&i.extend(n.prototype,e),n.__super__=t.prototype,n}};t.exports=i,i.callCallback=i.callback,i.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},i.getValueOrDefault=i.valueOrDefault,i.getValueAtIndexOrDefault=i.valueAtIndexOrDefault},{}],43:[function(e,t,n){"use strict";var i=e(42),o={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1===e?1:(n||(n=.3),i<1?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1===e?1:(n||(n=.3),i<1?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),i<1?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-o.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*o.easeInBounce(2*e):.5*o.easeOutBounce(2*e-1)+.5}};t.exports={effects:o},i.easingEffects=o},{42:42}],44:[function(e,t,n){"use strict";var i=e(42);t.exports={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,o,r;return i.isObject(e)?(t=+e.top||0,n=+e.right||0,o=+e.bottom||0,r=+e.left||0):t=n=o=r=+e||0,{top:t,right:n,bottom:o,left:r,height:t+o,width:r+n}},resolve:function(e,t,n){var o,r,a;for(o=0,r=e.length;o<r;++o)if(void 0!==(a=e[o])&&(void 0!==t&&"function"==typeof a&&(a=a(t)),void 0!==n&&i.isArray(a)&&(a=a[n]),void 0!==a))return a}}},{42:42}],45:[function(e,t,n){"use strict";t.exports=e(42),t.exports.easing=e(43),t.exports.canvas=e(41),t.exports.options=e(44)},{41:41,42:42,43:43,44:44}],46:[function(e,t,n){t.exports={acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}}},{}],47:[function(e,t,n){"use strict";function i(e,t){var n=s.getStyle(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?Number(i[1]):void 0}function o(e,t,n){e.addEventListener(t,n,g)}function r(e,t,n){e.removeEventListener(t,n,g)}function a(e,t,n,i,o){return{type:e,chart:t,native:o||null,x:void 0!==n?n:null,y:void 0!==i?i:null}}var s=e(45),l="$chartjs",u="chartjs-",c=u+"render-monitor",d=u+"render-animation",f=["animationstart","webkitAnimationStart"],h={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},g=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};t.exports={_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,initialize:function(){var e="from{opacity:0.99}to{opacity:1}";!function(e,t){var n=e._style||document.createElement("style");e._style||(e._style=n,t="/* Chart.js */\n"+t,n.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(n)),n.appendChild(document.createTextNode(t))}(this,"@-webkit-keyframes "+d+"{"+e+"}@keyframes "+d+"{"+e+"}."+c+"{-webkit-animation:"+d+" 0.001s;animation:"+d+" 0.001s;}")},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,o=e.getAttribute("height"),r=e.getAttribute("width");if(e[l]={initial:{height:o,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===r||""===r){var a=i(e,"width");void 0!==a&&(e.width=a)}if(null===o||""===o)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var s=i(e,"height");void 0!==a&&(e.height=s)}}(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[l]){var n=t[l].initial;["height","width"].forEach((function(e){var i=n[e];s.isNullOrUndef(i)?t.removeAttribute(e):t.setAttribute(e,i)})),s.each(n.style||{},(function(e,n){t.style[n]=e})),t.width=t.width,delete t[l]}},addEventListener:function(e,t,n){var i=e.canvas;if("resize"!==t){var r=n[l]||(n[l]={});o(i,t,(r.proxies||(r.proxies={}))[e.id+"_"+t]=function(t){n(function(e,t){var n=h[e.type]||e.type,i=s.getRelativePosition(e,t);return a(n,t,i.x,i.y,e)}(t,e))})}else!function(e,t,n){var i=e[l]||(e[l]={}),r=i.resizer=function(e){var t=document.createElement("div"),n=u+"size-monitor",i="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;";t.style.cssText=i,t.className=n,t.innerHTML='<div class="'+n+'-expand" style="'+i+'"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="'+n+'-shrink" style="'+i+'"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>';var r=t.childNodes[0],a=t.childNodes[1];t._reset=function(){r.scrollLeft=1e6,r.scrollTop=1e6,a.scrollLeft=1e6,a.scrollTop=1e6};var s=function(){t._reset(),e()};return o(r,"scroll",s.bind(r,"expand")),o(a,"scroll",s.bind(a,"shrink")),t}(function(e,t){var n=!1,i=[];return function(){i=Array.prototype.slice.call(arguments),t=t||this,n||(n=!0,s.requestAnimFrame.call(window,(function(){n=!1,e.apply(t,i)})))}}((function(){if(i.resizer)return t(a("resize",n))})));!function(e,t){var n=e[l]||(e[l]={}),i=n.renderProxy=function(e){e.animationName===d&&t()};s.each(f,(function(t){o(e,t,i)})),n.reflow=!!e.offsetParent,e.classList.add(c)}(e,(function(){if(i.resizer){var t=e.parentNode;t&&t!==r.parentNode&&t.insertBefore(r,t.firstChild),r._reset()}}))}(i,n,e)},removeEventListener:function(e,t,n){var i=e.canvas;if("resize"!==t){var o=((n[l]||{}).proxies||{})[e.id+"_"+t];o&&r(i,t,o)}else!function(e){var t=e[l]||{},n=t.resizer;delete t.resizer,function(e){var t=e[l]||{},n=t.renderProxy;n&&(s.each(f,(function(t){r(e,t,n)})),delete t.renderProxy),e.classList.remove(c)}(e),n&&n.parentNode&&n.parentNode.removeChild(n)}(i)}},s.addEvent=o,s.removeEvent=r},{45:45}],48:[function(e,t,n){"use strict";var i=e(45),o=e(46),r=e(47);t.exports=i.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},r._enabled?r:o)},{45:45,46:46,47:47}],49:[function(e,t,n){"use strict";var i=e(25),o=e(40),r=e(45);i._set("global",{plugins:{filler:{propagate:!0}}}),t.exports=function(){function e(e,t,n){var i,o=e._model||{},r=o.fill;if(void 0===r&&(r=!!o.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(i=parseFloat(r,10),isFinite(i)&&Math.floor(i)===i)return"-"!==r[0]&&"+"!==r[0]||(i=t+i),!(i===t||i<0||i>=n)&&i;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function t(e){var t,n=e.el._model||{},i=e.el._scale||{},o=e.fill,r=null;if(isFinite(o))return null;if("start"===o?r=void 0===n.scaleBottom?i.bottom:n.scaleBottom:"end"===o?r=void 0===n.scaleTop?i.top:n.scaleTop:void 0!==n.scaleZero?r=n.scaleZero:i.getBasePosition?r=i.getBasePosition():i.getBasePixel&&(r=i.getBasePixel()),null!=r){if(void 0!==r.x&&void 0!==r.y)return r;if("number"==typeof r&&isFinite(r))return{x:(t=i.isHorizontal())?r:null,y:t?null:r}}return null}function n(e,t,n){var i,o=e[t].fill,r=[t];if(!n)return o;for(;!1!==o&&-1===r.indexOf(o);){if(!isFinite(o))return o;if(!(i=e[o]))return!1;if(i.visible)return o;r.push(o),o=i.fill}return!1}function a(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),c[n](e))}function s(e){return e&&!e.skip}function l(e,t,n,i,o){var a;if(i&&o){for(e.moveTo(t[0].x,t[0].y),a=1;a<i;++a)r.canvas.lineTo(e,t[a-1],t[a]);for(e.lineTo(n[o-1].x,n[o-1].y),a=o-1;a>0;--a)r.canvas.lineTo(e,n[a],n[a-1],!0)}}function u(e,t,n,i,o,r){var a,u,c,d,f,h,g,p=t.length,m=i.spanGaps,v=[],y=[],b=0,T=0;for(e.beginPath(),a=0,u=p+!!r;a<u;++a)f=n(d=t[c=a%p]._view,c,i),h=s(d),g=s(f),h&&g?(b=v.push(d),T=y.push(f)):b&&T&&(m?(h&&v.push(d),g&&y.push(f)):(l(e,v,y,b,T),b=T=0,v=[],y=[]));l(e,v,y,b,T),e.closePath(),e.fillStyle=o,e.fill()}var c={dataset:function(e){var t=e.fill,n=e.chart,i=n.getDatasetMeta(t),o=i&&n.isDatasetVisible(t)&&i.dataset._children||[],r=o.length||0;return r?function(e,t){return t<r&&o[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,i=t?t.y:null;return function(e){return{x:null===n?e.x:n,y:null===i?e.y:i}}}};return{id:"filler",afterDatasetsUpdate:function(i,r){var s,l,u,c,d=(i.data.datasets||[]).length,f=r.propagate,h=[];for(l=0;l<d;++l)c=null,(u=(s=i.getDatasetMeta(l)).dataset)&&u._model&&u instanceof o.Line&&(c={visible:i.isDatasetVisible(l),fill:e(u,l,d),chart:i,el:u}),s.$filler=c,h.push(c);for(l=0;l<d;++l)(c=h[l])&&(c.fill=n(h,l,f),c.boundary=t(c),c.mapper=a(c))},beforeDatasetDraw:function(e,t){var n=t.meta.$filler;if(n){var o=e.ctx,a=n.el,s=a._view,l=a._children||[],c=n.mapper,d=s.backgroundColor||i.global.defaultColor;c&&d&&l.length&&(r.canvas.clipArea(o,e.chartArea),u(o,l,c,s,d,a._loop),r.canvas.unclipArea(o))}}}}},{25:25,40:40,45:45}],50:[function(e,t,n){"use strict";var i=e(25),o=e(26),r=e(45);i._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,i=this.chart,o=i.getDatasetMeta(n);o.hidden=null===o.hidden?!i.data.datasets[n].hidden:null,i.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return r.isArray(t.datasets)?t.datasets.map((function(t,n){return{text:t.label,fillStyle:r.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(n),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:n}}),this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var n=0;n<e.data.datasets.length;n++)t.push('<li><span style="background-color:'+e.data.datasets[n].backgroundColor+'"></span>'),e.data.datasets[n].label&&t.push(e.data.datasets[n].label),t.push("</li>");return t.push("</ul>"),t.join("")}}),t.exports=function(e){function t(e,t){return e.usePointStyle?t*Math.SQRT2:e.boxWidth}function n(t,n){var i=new e.Legend({ctx:t.ctx,options:n,chart:t});a.configure(t,i,n),a.addBox(t,i),t.legend=i}var a=e.layoutService,s=r.noop;return e.Legend=o.extend({initialize:function(e){r.extend(this,e),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:s,update:function(e,t,n){var i=this;return i.beforeUpdate(),i.maxWidth=e,i.maxHeight=t,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:s,beforeSetDimensions:s,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:s,beforeBuildLabels:s,buildLabels:function(){var e=this,t=e.options.labels||{},n=r.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:s,beforeFit:s,fit:function(){var e=this,n=e.options,o=n.labels,a=n.display,s=e.ctx,l=i.global,u=r.valueOrDefault,c=u(o.fontSize,l.defaultFontSize),d=u(o.fontStyle,l.defaultFontStyle),f=u(o.fontFamily,l.defaultFontFamily),h=r.fontString(c,d,f),g=e.legendHitBoxes=[],p=e.minSize,m=e.isHorizontal();if(m?(p.width=e.maxWidth,p.height=a?10:0):(p.width=a?10:0,p.height=e.maxHeight),a)if(s.font=h,m){var v=e.lineWidths=[0],y=e.legendItems.length?c+o.padding:0;s.textAlign="left",s.textBaseline="top",r.each(e.legendItems,(function(n,i){var r=t(o,c)+c/2+s.measureText(n.text).width;v[v.length-1]+r+o.padding>=e.width&&(y+=c+o.padding,v[v.length]=e.left),g[i]={left:0,top:0,width:r,height:c},v[v.length-1]+=r+o.padding})),p.height+=y}else{var b=o.padding,T=e.columnWidths=[],C=o.padding,E=0,_=0,x=c+b;r.each(e.legendItems,(function(e,n){var i=t(o,c)+c/2+s.measureText(e.text).width;_+x>p.height&&(C+=E+o.padding,T.push(E),E=0,_=0),E=Math.max(E,i),_+=x,g[n]={left:0,top:0,width:i,height:c}})),C+=E,T.push(E),p.width+=C}e.width=p.width,e.height=p.height},afterFit:s,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,n=e.options,o=n.labels,a=i.global,s=a.elements.line,l=e.width,u=e.lineWidths;if(n.display){var c,d=e.ctx,f=r.valueOrDefault,h=f(o.fontColor,a.defaultFontColor),g=f(o.fontSize,a.defaultFontSize),p=f(o.fontStyle,a.defaultFontStyle),m=f(o.fontFamily,a.defaultFontFamily),v=r.fontString(g,p,m);d.textAlign="left",d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=h,d.fillStyle=h,d.font=v;var y=t(o,g),b=e.legendHitBoxes,T=function(e,t,i){if(!(isNaN(y)||y<=0)){d.save(),d.fillStyle=f(i.fillStyle,a.defaultColor),d.lineCap=f(i.lineCap,s.borderCapStyle),d.lineDashOffset=f(i.lineDashOffset,s.borderDashOffset),d.lineJoin=f(i.lineJoin,s.borderJoinStyle),d.lineWidth=f(i.lineWidth,s.borderWidth),d.strokeStyle=f(i.strokeStyle,a.defaultColor);var o=0===f(i.lineWidth,s.borderWidth);if(d.setLineDash&&d.setLineDash(f(i.lineDash,s.borderDash)),n.labels&&n.labels.usePointStyle){var l=g*Math.SQRT2/2,u=l/Math.SQRT2;r.canvas.drawPoint(d,i.pointStyle,l,e+u,t+u)}else o||d.strokeRect(e,t,y,g),d.fillRect(e,t,y,g);d.restore()}},C=e.isHorizontal();c=C?{x:e.left+(l-u[0])/2,y:e.top+o.padding,line:0}:{x:e.left+o.padding,y:e.top+o.padding,line:0};var E=g+o.padding;r.each(e.legendItems,(function(t,n){var i=d.measureText(t.text).width,r=y+g/2+i,a=c.x,s=c.y;C?a+r>=l&&(s=c.y+=E,c.line++,a=c.x=e.left+(l-u[c.line])/2):s+E>e.bottom&&(a=c.x=a+e.columnWidths[c.line]+o.padding,s=c.y=e.top+o.padding,c.line++),T(a,s,t),b[n].left=a,b[n].top=s,function(e,t,n,i){var o=g/2,r=y+o+e,a=t+o;d.fillText(n.text,r,a),n.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(r,a),d.lineTo(r+i,a),d.stroke())}(a,s,t,i),C?c.x+=r+o.padding:c.y+=E}))}},handleEvent:function(e){var t=this,n=t.options,i="mouseup"===e.type?"click":e.type,o=!1;if("mousemove"===i){if(!n.onHover)return}else{if("click"!==i)return;if(!n.onClick)return}var r=e.x,a=e.y;if(r>=t.left&&r<=t.right&&a>=t.top&&a<=t.bottom)for(var s=t.legendHitBoxes,l=0;l<s.length;++l){var u=s[l];if(r>=u.left&&r<=u.left+u.width&&a>=u.top&&a<=u.top+u.height){if("click"===i){n.onClick.call(t,e.native,t.legendItems[l]),o=!0;break}if("mousemove"===i){n.onHover.call(t,e.native,t.legendItems[l]),o=!0;break}}}return o}}),{id:"legend",beforeInit:function(e){var t=e.options.legend;t&&n(e,t)},beforeUpdate:function(e){var t=e.options.legend,o=e.legend;t?(r.mergeIf(t,i.global.legend),o?(a.configure(e,o,t),o.options=t):n(e,t)):o&&(a.removeBox(e,o),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}}}},{25:25,26:26,45:45}],51:[function(e,t,n){"use strict";var i=e(25),o=e(26),r=e(45);i._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,lineHeight:1.2,padding:10,position:"top",text:"",weight:2e3}}),t.exports=function(e){function t(t,i){var o=new e.Title({ctx:t.ctx,options:i,chart:t});n.configure(t,o,i),n.addBox(t,o),t.titleBlock=o}var n=e.layoutService,a=r.noop;return e.Title=o.extend({initialize:function(e){r.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:a,update:function(e,t,n){var i=this;return i.beforeUpdate(),i.maxWidth=e,i.maxHeight=t,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:a,beforeSetDimensions:a,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:a,beforeBuildLabels:a,buildLabels:a,afterBuildLabels:a,beforeFit:a,fit:function(){var e=this,t=e.options,n=t.display,o=(0,r.valueOrDefault)(t.fontSize,i.global.defaultFontSize),a=e.minSize,s=r.isArray(t.text)?t.text.length:1,l=r.options.toLineHeight(t.lineHeight,o),u=n?s*l+2*t.padding:0;e.isHorizontal()?(a.width=e.maxWidth,a.height=u):(a.width=u,a.height=e.maxHeight),e.width=a.width,e.height=a.height},afterFit:a,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=r.valueOrDefault,o=e.options,a=i.global;if(o.display){var s,l,u,c=n(o.fontSize,a.defaultFontSize),d=n(o.fontStyle,a.defaultFontStyle),f=n(o.fontFamily,a.defaultFontFamily),h=r.fontString(c,d,f),g=r.options.toLineHeight(o.lineHeight,c),p=g/2+o.padding,m=0,v=e.top,y=e.left,b=e.bottom,T=e.right;t.fillStyle=n(o.fontColor,a.defaultFontColor),t.font=h,e.isHorizontal()?(l=y+(T-y)/2,u=v+p,s=T-y):(l="left"===o.position?y+p:T-p,u=v+(b-v)/2,s=b-v,m=Math.PI*("left"===o.position?-.5:.5)),t.save(),t.translate(l,u),t.rotate(m),t.textAlign="center",t.textBaseline="middle";var C=o.text;if(r.isArray(C))for(var E=0,_=0;_<C.length;++_)t.fillText(C[_],0,E,s),E+=g;else t.fillText(C,0,0,s);t.restore()}}}),{id:"title",beforeInit:function(e){var n=e.options.title;n&&t(e,n)},beforeUpdate:function(o){var a=o.options.title,s=o.titleBlock;a?(r.mergeIf(a,i.global.title),s?(n.configure(o,s,a),s.options=a):t(o,a)):s&&(e.layoutService.removeBox(o,s),delete o.titleBlock)}}}},{25:25,26:26,45:45}],52:[function(e,t,n){"use strict";t.exports=function(e){var t=e.Scale.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e,t=this,n=t.getLabels();t.minIndex=0,t.maxIndex=n.length-1,void 0!==t.options.ticks.min&&(e=n.indexOf(t.options.ticks.min),t.minIndex=-1!==e?e:t.minIndex),void 0!==t.options.ticks.max&&(e=n.indexOf(t.options.ticks.max),t.maxIndex=-1!==e?e:t.maxIndex),t.min=n[t.minIndex],t.max=n[t.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var n=this,i=n.chart.data,o=n.isHorizontal();return i.yLabels&&!o?n.getRightValue(i.datasets[t].data[e]):n.ticks[e-n.minIndex]},getPixelForValue:function(e,t){var n,i=this,o=i.options.offset,r=Math.max(i.maxIndex+1-i.minIndex-(o?0:1),1);if(null!=e&&(n=i.isHorizontal()?e.x:e.y),void 0!==n||void 0!==e&&isNaN(t)){var a=i.getLabels().indexOf(e=n||e);t=-1!==a?a:t}if(i.isHorizontal()){var s=i.width/r,l=s*(t-i.minIndex);return o&&(l+=s/2),i.left+Math.round(l)}var u=i.height/r,c=u*(t-i.minIndex);return o&&(c+=u/2),i.top+Math.round(c)},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t=this,n=t.options.offset,i=Math.max(t._ticks.length-(n?0:1),1),o=t.isHorizontal(),r=(o?t.width:t.height)/i;return e-=o?t.left:t.top,n&&(e-=r/2),(e<=0?0:Math.round(e/r))+t.minIndex},getBasePixel:function(){return this.bottom}});e.scaleService.registerScaleType("category",t,{position:"bottom"})}},{}],53:[function(e,t,n){"use strict";var i=e(25),o=e(45),r=e(34);t.exports=function(e){var t={position:"left",ticks:{callback:r.formatters.linear}},n=e.LinearScaleBase.extend({determineDataLimits:function(){function e(e){return a?e.xAxisID===t.id:e.yAxisID===t.id}var t=this,n=t.options,i=t.chart,r=i.data.datasets,a=t.isHorizontal();t.min=null,t.max=null;var s=n.stacked;if(void 0===s&&o.each(r,(function(t,n){if(!s){var o=i.getDatasetMeta(n);i.isDatasetVisible(n)&&e(o)&&void 0!==o.stack&&(s=!0)}})),n.stacked||s){var l={};o.each(r,(function(r,a){var s=i.getDatasetMeta(a),u=[s.type,void 0===n.stacked&&void 0===s.stack?a:"",s.stack].join(".");void 0===l[u]&&(l[u]={positiveValues:[],negativeValues:[]});var c=l[u].positiveValues,d=l[u].negativeValues;i.isDatasetVisible(a)&&e(s)&&o.each(r.data,(function(e,i){var o=+t.getRightValue(e);isNaN(o)||s.data[i].hidden||(c[i]=c[i]||0,d[i]=d[i]||0,n.relativePoints?c[i]=100:o<0?d[i]+=o:c[i]+=o)}))})),o.each(l,(function(e){var n=e.positiveValues.concat(e.negativeValues),i=o.min(n),r=o.max(n);t.min=null===t.min?i:Math.min(t.min,i),t.max=null===t.max?r:Math.max(t.max,r)}))}else o.each(r,(function(n,r){var a=i.getDatasetMeta(r);i.isDatasetVisible(r)&&e(a)&&o.each(n.data,(function(e,n){var i=+t.getRightValue(e);isNaN(i)||a.data[n].hidden||((null===t.min||i<t.min)&&(t.min=i),(null===t.max||i>t.max)&&(t.max=i))}))}));t.min=isFinite(t.min)&&!isNaN(t.min)?t.min:0,t.max=isFinite(t.max)&&!isNaN(t.max)?t.max:1,this.handleTickRangeOptions()},getTickLimit:function(){var e,t=this,n=t.options.ticks;if(t.isHorizontal())e=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(t.width/50));else{var r=o.valueOrDefault(n.fontSize,i.global.defaultFontSize);e=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(t.height/(2*r)))}return e},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t,n=this,i=n.start,o=+n.getRightValue(e),r=n.end-i;return n.isHorizontal()?(t=n.left+n.width/r*(o-i),Math.round(t)):(t=n.bottom-n.height/r*(o-i),Math.round(t))},getValueForPixel:function(e){var t=this,n=t.isHorizontal();return t.start+(n?e-t.left:t.bottom-e)/(n?t.width:t.height)*(t.end-t.start)},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});e.scaleService.registerScaleType("linear",n,t)}},{25:25,34:34,45:45}],54:[function(e,t,n){"use strict";var i=e(45),o=e(34);t.exports=function(e){var t=i.noop;e.LinearScaleBase=e.Scale.extend({getRightValue:function(t){return"string"==typeof t?+t:e.Scale.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var n=i.sign(e.min),o=i.sign(e.max);n<0&&o<0?e.max=0:n>0&&o>0&&(e.min=0)}var r=void 0!==t.min||void 0!==t.suggestedMin,a=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(e.min=null===e.min?t.suggestedMin:Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(e.max=null===e.max?t.suggestedMax:Math.max(e.max,t.suggestedMax)),r!==a&&e.min>=e.max&&(r?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:t,handleDirectionalChanges:t,buildTicks:function(){var e=this,t=e.options.ticks,n=e.getTickLimit(),r={maxTicks:n=Math.max(2,n),min:t.min,max:t.max,stepSize:i.valueOrDefault(t.fixedStepSize,t.stepSize)},a=e.ticks=o.generators.linear(r,e);e.handleDirectionalChanges(),e.max=i.max(a),e.min=i.min(a),t.reverse?(a.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),e.Scale.prototype.convertTicksToLabels.call(t)}})}},{34:34,45:45}],55:[function(e,t,n){"use strict";var i=e(45),o=e(34);t.exports=function(e){var t={position:"left",ticks:{callback:o.formatters.logarithmic}},n=e.Scale.extend({determineDataLimits:function(){function e(e){return l?e.xAxisID===t.id:e.yAxisID===t.id}var t=this,n=t.options,o=n.ticks,r=t.chart,a=r.data.datasets,s=i.valueOrDefault,l=t.isHorizontal();t.min=null,t.max=null,t.minNotZero=null;var u=n.stacked;if(void 0===u&&i.each(a,(function(t,n){if(!u){var i=r.getDatasetMeta(n);r.isDatasetVisible(n)&&e(i)&&void 0!==i.stack&&(u=!0)}})),n.stacked||u){var c={};i.each(a,(function(o,a){var s=r.getDatasetMeta(a),l=[s.type,void 0===n.stacked&&void 0===s.stack?a:"",s.stack].join(".");r.isDatasetVisible(a)&&e(s)&&(void 0===c[l]&&(c[l]=[]),i.each(o.data,(function(e,i){var o=c[l],r=+t.getRightValue(e);isNaN(r)||s.data[i].hidden||(o[i]=o[i]||0,n.relativePoints?o[i]=100:o[i]+=r)})))})),i.each(c,(function(e){var n=i.min(e),o=i.max(e);t.min=null===t.min?n:Math.min(t.min,n),t.max=null===t.max?o:Math.max(t.max,o)}))}else i.each(a,(function(n,o){var a=r.getDatasetMeta(o);r.isDatasetVisible(o)&&e(a)&&i.each(n.data,(function(e,n){var i=+t.getRightValue(e);isNaN(i)||a.data[n].hidden||((null===t.min||i<t.min)&&(t.min=i),(null===t.max||i>t.max)&&(t.max=i),0!==i&&(null===t.minNotZero||i<t.minNotZero)&&(t.minNotZero=i))}))}));t.min=s(o.min,t.min),t.max=s(o.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(i.log10(t.min))-1),t.max=Math.pow(10,Math.floor(i.log10(t.max))+1)):(t.min=1,t.max=10))},buildTicks:function(){var e=this,t=e.options.ticks,n=e.ticks=o.generators.logarithmic({min:t.min,max:t.max},e);e.isHorizontal()||n.reverse(),e.max=i.max(n),e.min=i.min(n),t.reverse?(n.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),e.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},getPixelForValue:function(e){var t,n,o,r=this,a=r.start,s=+r.getRightValue(e),l=r.options.ticks;return r.isHorizontal()?(o=i.log10(r.end)-i.log10(a),n=0===s?r.left:r.left+(t=r.width)/o*(i.log10(s)-i.log10(a))):(t=r.height,0!==a||l.reverse?0===r.end&&l.reverse?(o=i.log10(r.start)-i.log10(r.minNotZero),n=s===r.end?r.top:s===r.minNotZero?r.top+.02*t:r.top+.02*t+.98*t/o*(i.log10(s)-i.log10(r.minNotZero))):0===s?n=l.reverse?r.top:r.bottom:(o=i.log10(r.end)-i.log10(a),n=r.bottom-(t=r.height)/o*(i.log10(s)-i.log10(a))):(o=i.log10(r.end)-i.log10(r.minNotZero),n=s===a?r.bottom:s===r.minNotZero?r.bottom-.02*t:r.bottom-.02*t-.98*t/o*(i.log10(s)-i.log10(r.minNotZero)))),n},getValueForPixel:function(e){var t,n,o=this,r=i.log10(o.end)-i.log10(o.start);return o.isHorizontal()?(n=o.width,t=o.start*Math.pow(10,(e-o.left)*r/n)):(n=o.height,t=Math.pow(10,(o.bottom-e)*r/n)/o.start),t}});e.scaleService.registerScaleType("logarithmic",n,t)}},{34:34,45:45}],56:[function(e,t,n){"use strict";var i=e(25),o=e(45),r=e(34);t.exports=function(e){function t(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function n(e){var t=e.options.pointLabels,n=o.valueOrDefault(t.fontSize,g.defaultFontSize),i=o.valueOrDefault(t.fontStyle,g.defaultFontStyle),r=o.valueOrDefault(t.fontFamily,g.defaultFontFamily);return{size:n,style:i,family:r,font:o.fontString(n,i,r)}}function a(e,t,n){return o.isArray(n)?{w:o.longestText(e,e.font,n),h:n.length*t+1.5*(n.length-1)*t}:{w:e.measureText(n).width,h:t}}function s(e,t,n,i,o){return e===i||e===o?{start:t-n/2,end:t+n/2}:e<i||e>o?{start:t-n-5,end:t}:{start:t,end:t+n+5}}function l(e){return 0===e||180===e?"center":e<180?"left":"right"}function u(e,t,n,i){if(o.isArray(t))for(var r=n.y,a=1.5*i,s=0;s<t.length;++s)e.fillText(t[s],n.x,r),r+=a;else e.fillText(t,n.x,n.y)}function c(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function d(e){var i=e.ctx,r=o.valueOrDefault,a=e.options,s=a.angleLines,d=a.pointLabels;i.lineWidth=s.lineWidth,i.strokeStyle=s.color;var f=e.getDistanceFromCenterForValue(a.ticks.reverse?e.min:e.max),h=n(e);i.textBaseline="top";for(var p=t(e)-1;p>=0;p--){if(s.display){var m=e.getPointPosition(p,f);i.beginPath(),i.moveTo(e.xCenter,e.yCenter),i.lineTo(m.x,m.y),i.stroke(),i.closePath()}if(d.display){var v=e.getPointPosition(p,f+5),y=r(d.fontColor,g.defaultFontColor);i.font=h.font,i.fillStyle=y;var b=e.getIndexAngle(p),T=o.toDegrees(b);i.textAlign=l(T),c(T,e._pointLabelSizes[p],v),u(i,e.pointLabels[p]||"",v,h.size)}}}function f(e,n,i,r){var a=e.ctx;if(a.strokeStyle=o.valueAtIndexOrDefault(n.color,r-1),a.lineWidth=o.valueAtIndexOrDefault(n.lineWidth,r-1),e.options.gridLines.circular)a.beginPath(),a.arc(e.xCenter,e.yCenter,i,0,2*Math.PI),a.closePath(),a.stroke();else{var s=t(e);if(0===s)return;a.beginPath();var l=e.getPointPosition(0,i);a.moveTo(l.x,l.y);for(var u=1;u<s;u++)l=e.getPointPosition(u,i),a.lineTo(l.x,l.y);a.closePath(),a.stroke()}}function h(e){return o.isNumber(e)?e:0}var g=i.global,p={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:r.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}},m=e.LinearScaleBase.extend({setDimensions:function(){var e=this,t=e.options,n=t.ticks;e.width=e.maxWidth,e.height=e.maxHeight,e.xCenter=Math.round(e.width/2),e.yCenter=Math.round(e.height/2);var i=o.min([e.height,e.width]),r=o.valueOrDefault(n.fontSize,g.defaultFontSize);e.drawingArea=t.display?i/2-(r/2+n.backdropPaddingY):i/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;o.each(t.data.datasets,(function(r,a){if(t.isDatasetVisible(a)){var s=t.getDatasetMeta(a);o.each(r.data,(function(t,o){var r=+e.getRightValue(t);isNaN(r)||s.data[o].hidden||(n=Math.min(r,n),i=Math.max(r,i))}))}})),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=i===Number.NEGATIVE_INFINITY?0:i,e.handleTickRangeOptions()},getTickLimit:function(){var e=this.options.ticks,t=o.valueOrDefault(e.fontSize,g.defaultFontSize);return Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*t)))},convertTicksToLabels:function(){var t=this;e.LinearScaleBase.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){this.options.pointLabels.display?function(e){var i,r,l,u=n(e),c=Math.min(e.height/2,e.width/2),d={r:e.width,l:0,t:e.height,b:0},f={};e.ctx.font=u.font,e._pointLabelSizes=[];var h=t(e);for(i=0;i<h;i++){l=e.getPointPosition(i,c),r=a(e.ctx,u.size,e.pointLabels[i]||""),e._pointLabelSizes[i]=r;var g=e.getIndexAngle(i),p=o.toDegrees(g)%360,m=s(p,l.x,r.w,0,180),v=s(p,l.y,r.h,90,270);m.start<d.l&&(d.l=m.start,f.l=g),m.end>d.r&&(d.r=m.end,f.r=g),v.start<d.t&&(d.t=v.start,f.t=g),v.end>d.b&&(d.b=v.end,f.b=g)}e.setReductions(c,d,f)}(this):function(e){var t=Math.min(e.height/2,e.width/2);e.drawingArea=Math.round(t),e.setCenterPoint(0,0,0,0)}(this)},setReductions:function(e,t,n){var i=this,o=t.l/Math.sin(n.l),r=Math.max(t.r-i.width,0)/Math.sin(n.r),a=-t.t/Math.cos(n.t),s=-Math.max(t.b-i.height,0)/Math.cos(n.b);o=h(o),r=h(r),a=h(a),s=h(s),i.drawingArea=Math.min(Math.round(e-(o+r)/2),Math.round(e-(a+s)/2)),i.setCenterPoint(o,r,a,s)},setCenterPoint:function(e,t,n,i){var o=this,r=n+o.drawingArea,a=o.height-i-o.drawingArea;o.xCenter=Math.round((e+o.drawingArea+(o.width-t-o.drawingArea))/2+o.left),o.yCenter=Math.round((r+a)/2+o.top)},getIndexAngle:function(e){return e*(2*Math.PI/t(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this,i=n.getIndexAngle(e)-Math.PI/2;return{x:Math.round(Math.cos(i)*t)+n.xCenter,y:Math.round(Math.sin(i)*t)+n.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this,t=e.min,n=e.max;return e.getPointPositionForValue(0,e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0)},draw:function(){var e=this,t=e.options,n=t.gridLines,i=t.ticks,r=o.valueOrDefault;if(t.display){var a=e.ctx,s=this.getIndexAngle(0),l=r(i.fontSize,g.defaultFontSize),u=r(i.fontStyle,g.defaultFontStyle),c=r(i.fontFamily,g.defaultFontFamily),h=o.fontString(l,u,c);o.each(e.ticks,(function(t,o){if(o>0||i.reverse){var u=e.getDistanceFromCenterForValue(e.ticksAsNumbers[o]);if(n.display&&0!==o&&f(e,n,u,o),i.display){var c=r(i.fontColor,g.defaultFontColor);if(a.font=h,a.save(),a.translate(e.xCenter,e.yCenter),a.rotate(s),i.showLabelBackdrop){var d=a.measureText(t).width;a.fillStyle=i.backdropColor,a.fillRect(-d/2-i.backdropPaddingX,-u-l/2-i.backdropPaddingY,d+2*i.backdropPaddingX,l+2*i.backdropPaddingY)}a.textAlign="center",a.textBaseline="middle",a.fillStyle=c,a.fillText(t,0,-u),a.restore()}}})),(t.angleLines.display||t.pointLabels.display)&&d(e)}}});e.scaleService.registerScaleType("radialLinear",m,p)}},{25:25,34:34,45:45}],57:[function(e,t,n){"use strict";function i(e,t){return e-t}function o(e){var t,n,i,o={},r=[];for(t=0,n=e.length;t<n;++t)o[i=e[t]]||(o[i]=!0,r.push(i));return r}function r(e,t,n,i){var o=function(e,t,n){for(var i,o,r,a=0,s=e.length-1;a>=0&&a<=s;){if(r=e[i=a+s>>1],!(o=e[i-1]||null))return{lo:null,hi:r};if(r[t]<n)a=i+1;else{if(!(o[t]>n))return{lo:o,hi:r};s=i-1}}return{lo:r,hi:null}}(e,t,n),r=o.lo?o.hi?o.lo:e[e.length-2]:e[0],a=o.lo?o.hi?o.hi:e[e.length-1]:e[1],s=a[t]-r[t];return r[i]+(a[i]-r[i])*(s?(n-r[t])/s:0)}function a(e,t){var n=t.parser,i=t.parser||t.format;return"function"==typeof n?n(e):"string"==typeof e&&"string"==typeof i?c(e,i):(e instanceof c||(e=c(e)),e.isValid()?e:"function"==typeof i?i(e):e)}function s(e,t){if(f.isNullOrUndef(e))return null;var n=t.options.time,i=a(t.getRightValue(e),n);return i.isValid()?(n.round&&i.startOf(n.round),i.valueOf()):null}function l(e){for(var t=m.indexOf(e)+1,n=m.length;t<n;++t)if(p[m[t]].common)return m[t]}function u(e,t,n,i,o){var a,s=0,l=0;return o.offset&&t.length&&(o.time.min||(a=t[0],s=(r(e,"time",t.length>1?t[1]:i,"pos")-r(e,"time",a,"pos"))/2),o.time.max||(a=t.length>1?t[t.length-2]:n,l=(r(e,"time",t[t.length-1],"pos")-r(e,"time",a,"pos"))/2)),{left:s,right:l}}var c=e(1);c="function"==typeof c?c:window.moment;var d=e(25),f=e(45),h=Number.MIN_SAFE_INTEGER||-9007199254740991,g=Number.MAX_SAFE_INTEGER||9007199254740991,p={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},m=Object.keys(p);t.exports=function(e){var t=e.Scale.extend({initialize:function(){if(!c)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");this.mergeTicksOptions(),e.Scale.prototype.initialize.call(this)},update:function(){var t=this,n=t.options;return n.time&&n.time.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),e.Scale.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),e.Scale.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var e,t,n,r,a,l,u=this,d=u.chart,p=u.options.time,m=g,v=h,y=[],b=[],T=[];for(e=0,n=d.data.labels.length;e<n;++e)T.push(s(d.data.labels[e],u));for(e=0,n=(d.data.datasets||[]).length;e<n;++e)if(d.isDatasetVisible(e))if(f.isObject((a=d.data.datasets[e].data)[0]))for(b[e]=[],t=0,r=a.length;t<r;++t)l=s(a[t],u),y.push(l),b[e][t]=l;else y.push.apply(y,T),b[e]=T.slice(0);else b[e]=[];T.length&&(T=o(T).sort(i),m=Math.min(m,T[0]),v=Math.max(v,T[T.length-1])),y.length&&(y=o(y).sort(i),m=Math.min(m,y[0]),v=Math.max(v,y[y.length-1])),m=s(p.min,u)||m,v=s(p.max,u)||v,m=m===g?+c().startOf("day"):m,v=v===h?+c().endOf("day")+1:v,u.min=Math.min(m,v),u.max=Math.max(m+1,v),u._horizontal=u.isHorizontal(),u._table=[],u._timestamps={data:y,datasets:b,labels:T}},buildTicks:function(){var e,t,n,i=this,o=i.min,r=i.max,a=i.options,d=a.time,h=[],v=[];switch(a.ticks.source){case"data":h=i._timestamps.data;break;case"labels":h=i._timestamps.labels;break;case"auto":default:h=function(e,t,n,i){var o,r=i.time,a=r.unit||function(e,t,n,i){var o,r,a=m.length;for(o=m.indexOf(e);o<a-1;++o)if((r=p[m[o]]).common&&Math.ceil((n-t)/((r.steps?r.steps[r.steps.length-1]:g)*r.size))<=i)return m[o];return m[a-1]}(r.minUnit,e,t,n),s=l(a),u=f.valueOrDefault(r.stepSize,r.unitStepSize),d="week"===a&&r.isoWeekday,h=i.ticks.major.enabled,v=p[a],y=c(e),b=c(t),T=[];for(u||(u=function(e,t,n,i){var o,r,a,s=t-e,l=p[n],u=l.size,c=l.steps;if(!c)return Math.ceil(s/((i||1)*u));for(o=0,r=c.length;o<r&&(a=c[o],!(Math.ceil(s/(u*a))<=i));++o);return a}(e,t,a,n)),d&&(y=y.isoWeekday(d),b=b.isoWeekday(d)),y=y.startOf(d?"day":a),(b=b.startOf(d?"day":a))<t&&b.add(1,a),o=c(y),h&&s&&!d&&!r.round&&(o.startOf(s),o.add(~~((y-o)/(v.size*u))*u,a));o<b;o.add(u,a))T.push(+o);return T.push(+o),T}(o,r,i.getLabelCapacity(o),a)}for("ticks"===a.bounds&&h.length&&(o=h[0],r=h[h.length-1]),o=s(d.min,i)||o,r=s(d.max,i)||r,e=0,t=h.length;e<t;++e)(n=h[e])>=o&&n<=r&&v.push(n);return i.min=o,i.max=r,i._unit=d.unit||function(e,t,n,i){var o,r,a=c.duration(c(i).diff(c(n)));for(o=m.length-1;o>=m.indexOf(t);o--)if(p[r=m[o]].common&&a.as(r)>=e.length)return r;return m[t?m.indexOf(t):0]}(v,d.minUnit,i.min,i.max),i._majorUnit=l(i._unit),i._table=function(e,t,n,i){if("linear"===i||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var o,r,a,s,l,u=[],c=[t];for(o=0,r=e.length;o<r;++o)(s=e[o])>t&&s<n&&c.push(s);for(c.push(n),o=0,r=c.length;o<r;++o)l=c[o+1],s=c[o],void 0!==(a=c[o-1])&&void 0!==l&&Math.round((l+a)/2)===s||u.push({time:s,pos:o/(r-1)});return u}(i._timestamps.data,o,r,a.distribution),i._offsets=u(i._table,v,o,r,a),function(e,t){var n,i,o,r,a=[];for(n=0,i=e.length;n<i;++n)o=e[n],r=!!t&&o===+c(o).startOf(t),a.push({value:o,major:r});return a}(v,i._majorUnit)},getLabelForIndex:function(e,t){var n=this,i=n.chart.data,o=n.options.time,r=i.labels&&e<i.labels.length?i.labels[e]:"",s=i.datasets[t].data[e];return f.isObject(s)&&(r=n.getRightValue(s)),o.tooltipFormat&&(r=a(r,o).format(o.tooltipFormat)),r},tickFormatFunction:function(e,t,n,i){var o=this,r=o.options,a=e.valueOf(),s=r.time.displayFormats,l=s[o._unit],u=o._majorUnit,c=s[u],d=e.clone().startOf(u).valueOf(),h=r.ticks.major,g=h.enabled&&u&&c&&a===d,p=e.format(i||(g?c:l)),m=g?h:r.ticks.minor,v=f.valueOrDefault(m.callback,m.userCallback);return v?v(p,t,n):p},convertTicksToLabels:function(e){var t,n,i=[];for(t=0,n=e.length;t<n;++t)i.push(this.tickFormatFunction(c(e[t].value),t,e));return i},getPixelForOffset:function(e){var t=this,n=t._horizontal?t.width:t.height,i=t._horizontal?t.left:t.top,o=r(t._table,"time",e,"pos");return i+n*(t._offsets.left+o)/(t._offsets.left+1+t._offsets.right)},getPixelForValue:function(e,t,n){var i=this,o=null;if(void 0!==t&&void 0!==n&&(o=i._timestamps.datasets[n][t]),null===o&&(o=s(e,i)),null!==o)return i.getPixelForOffset(o)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,n=t._horizontal?t.width:t.height,i=r(t._table,"pos",(n?(e-(t._horizontal?t.left:t.top))/n:0)*(t._offsets.left+1+t._offsets.left)-t._offsets.right,"time");return c(i)},getLabelWidth:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,i=f.toRadians(t.maxRotation),o=Math.cos(i),r=Math.sin(i);return n*o+f.valueOrDefault(t.fontSize,d.global.defaultFontSize)*r},getLabelCapacity:function(e){var t=this,n=t.options.time.displayFormats.millisecond,i=t.tickFormatFunction(c(e),0,[],n),o=t.getLabelWidth(i),r=t.isHorizontal()?t.width:t.height;return Math.floor(r/o)}});e.scaleService.registerScaleType("time",t,{position:"bottom",distribution:"linear",bounds:"data",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}})}},{1:1,25:25,45:45}]},{},[7])(7)})),function(){if(!window.CKEDITOR||!window.CKEDITOR.dom){var e;window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"J8Q8",version:"4.13.0",revision:"83e9de8d6b",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var n=document.getElementsByTagName("script"),i=0;i<n.length;i++){var o=n[i].src.match(e);if(o){t=o[1];break}}if(-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t),!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(n){}}function t(){for(var e;e=n.shift();)e()}var n=[];return function(t){if(n.push(t),"complete"===document.readyState&&setTimeout(e,1),1==n.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(i){}document.documentElement.doScroll&&t&&function n(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(n,1)}e()}()}}}()},n=window.CKEDITOR_GETURL;if(n){var o=t.getUrl;t.getUrl=function(e){return n.call(t,e)||o.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,n=CKEDITOR.event.prototype;for(t in n)null==e[t]&&(e[t]=n[t])},CKEDITOR.event.prototype=function(){function e(e){var i=t(this);return i[e]||(i[e]=new n(e))}var t=function(e){return(e=e.getPrivate&&e.getPrivate()||e._||(e._={})).events||(e.events={})},n=function(e){this.name=e,this.listeners=[]};return n.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{define:function(t,n){var i=e.call(this,t);CKEDITOR.tools.extend(i,n,!0)},on:function(t,n,i,o,r){function a(e,r,a,l){return!1!==n.call(i,e={name:t,sender:this,editor:e,data:r,listenerData:o,stop:a,cancel:l,removeListener:s})&&e.data}function s(){u.removeListener(t,n)}var l=e.call(this,t);if(0>l.getListenerIndex(n)){l=l.listeners,i||(i=this),isNaN(r)&&(r=10);var u=this;a.fn=n,a.priority=r;for(var c=l.length-1;0<=c;c--)if(l[c].priority<=r)return l.splice(c+1,0,a),{removeListener:s};l.unshift(a)}return{removeListener:s}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];return e[1]=function(e){return e.removeListener(),t.apply(this,arguments)},this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,n=function(){e=1},i=0,o=function(){i=1};return function(a,s,l){var u=t(this)[a];a=e;var c=i;if(e=i=0,u&&(f=u.listeners).length)for(var d,f=f.slice(0),h=0;h<f.length;h++){if(u.errorProof)try{d=f[h].call(this,l,s,n,o)}catch(r){}else d=f[h].call(this,l,s,n,o);if(!1===d?i=1:void 0!==d&&(s=d),e||i)break}return s=!i&&(void 0===s||s),e=a,i=c,s}}(),fireOnce:function(e,n,i){return n=this.fire(e,n,i),delete t(this)[e],n},removeListener:function(e,n){var i=t(this)[e];if(i){var o=i.getListenerIndex(n);0<=o&&i.listeners.splice(o,1)}},removeAllListeners:function(){var e,n=t(this);for(e in n)delete n[e]},hasListeners:function(e){return(e=t(this)[e])&&0<e.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/edge[ \/](\d+.?\d*)/),n=-1<e.indexOf("trident/");(n={ie:n=!(!t&&!n),edge:!!t,webkit:!n&&-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!n.webkit&&!n.ie,n.webkit&&(-1<e.indexOf("chrome")?n.chrome=!0:n.safari=!0);var i=0;return n.ie&&(i=t?parseFloat(t[1]):n.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=9==i,n.ie8Compat=8==i,n.ie7Compat=7==i,n.ie6Compat=7>i||n.quirks),n.gecko&&(t=e.match(/rv:([\d\.]+)/))&&(i=1e4*(t=t[1].split("."))[0]+100*(t[1]||0)+1*(t[2]||0)),n.air&&(i=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=i,n.isCompatible=!(n.ie&&7>i||n.gecko&&4e4>i||n.webkit&&534>i),n.hidpi=2<=window.devicePixelRatio,n.needsBrFiller=n.gecko||n.webkit||n.ie&&10<i,n.needsNbspFiller=n.ie&&11>i,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" cke_browser_quirks"),n.ie&&(n.cssClass+=" cke_browser_ie"+(n.quirks?"6 cke_browser_iequirks":n.version)),n.air&&(n.cssClass+=" cke_browser_air"),n.iOS&&(n.cssClass+=" cke_browser_ios"),n.hidpi&&(n.cssClass+=" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},CKEDITOR.domReady((function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout((function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()}),1e3*t))})),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:e,additionalData:t})},CKEDITOR.error=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:e,additionalData:t})},CKEDITOR.on("log",(function(e){if(window.console&&window.console.log){var t=console[e.data.type]?e.data.type:"log",n=e.data.errorCode;(e=e.data.additionalData)?console[t]("[CKEDITOR] Error code: "+n+".",e):console[t]("[CKEDITOR] Error code: "+n+"."),console[t]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+n)}}),null,null,999),CKEDITOR.dom={},function(){function e(e,t,n){this._minInterval=e,this._context=n,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(t,n||{});var i=this;this.input=function(){function e(){i._lastOutput=(new Date).getTime(),i._scheduledTimer=0,i._call()}if(!i._scheduledTimer||!1!==i._reschedule()){var t=(new Date).getTime()-i._lastOutput;t<i._minInterval?i._scheduledTimer=setTimeout(e,i._minInterval-t):e()}}}function t(t,n,i){e.call(this,t,n,i),this._args=[];var o=this;this.input=CKEDITOR.tools.override(this.input,(function(e){return function(){o._args=Array.prototype.slice.call(arguments),e.call(this)}}))}var n=[],i=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",o=/&/g,r=/>/g,a=/</g,s=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,u={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},c=function(e,t){return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1),10)):u[t]};CKEDITOR.on("reset",(function(){n=[]})),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},getIndex:function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=CKEDITOR.tools.clone(e[n]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e.nodeType||e.window===e)return e;for(n in t=new e.constructor,e)t[n]=CKEDITOR.tools.clone(e[n]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,n,i=arguments.length;"boolean"==typeof(t=arguments[i-1])?i--:"boolean"==typeof(t=arguments[i-2])&&(n=arguments[i-1],i-=2);for(var o=1;o<i;o++){var r=arguments[o]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(r),(function(i){!0!==t&&null!=e[i]||n&&!(i in n)||(e[i]=r[i])}))}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,t,n){return n?i+e+":"+t+";"+e+":"+t:((n={})[e]=t,n[i+e]=t,n)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t=void 0!==e.cssFloat?"cssFloat":void 0!==e.styleFloat?"styleFloat":"float";return function(e){return"float"==e?t:e.replace(/-./g,(function(e){return e.substr(1).toUpperCase()}))}}(),buildStyleHtml:function(e){e=[].concat(e);for(var t,n=[],i=0;i<e.length;i++)(t=e[i])&&(/@import|[{}]/.test(t)?n.push("<style>"+t+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return n.join("")},htmlEncode:function(e){return null==e?"":String(e).replace(o,"&amp;").replace(r,"&gt;").replace(a,"&lt;")},htmlDecode:function(e){return e.replace(l,c)},htmlEncodeAttr:function(e){return CKEDITOR.tools.htmlEncode(e).replace(s,"&quot;")},htmlDecodeAttr:function(e){return CKEDITOR.tools.htmlDecode(e)},transformPlainTextToHtml:function(e,t){var n=t==CKEDITOR.ENTER_BR,i=(i=this.htmlEncode(e.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),o=t==CKEDITOR.ENTER_P?"p":"div";if(!n){var r=/\n{2}/g;if(r.test(i)){var a="<"+o+">",s="</"+o+">";i=a+i.replace(r,(function(){return s+a}))+s}}return i=i.replace(/\n/g,"<br>"),n||(i=i.replace(new RegExp("<br>(?=</"+o+">)"),(function(e){return CKEDITOR.tools.repeat(e,2)}))),(i=i.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,(function(e,t){return t+"&nbsp;"})).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var e="e",t=0;8>t;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e},override:function(e,t){var n=t(e);return n.prototype=e.prototype,n},setTimeout:function(e,t,n,i,o){return o||(o=window),n||(n=o),o.setTimeout((function(){i?e.apply(n,[].concat(i)):e.apply(n)}),t||0)},throttle:function(e,t,n){return new this.buffers.throttle(e,t,n)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if("function"==typeof t){for(var n=0,i=e.length;n<i;n++)if(t(e[n]))return n}else{if(e.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return 0<=n?e[n]:null},bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},createClass:function(e){var t=e.$,n=e.base,i=e.privates||e._,o=e.proto;if(e=e.statics,!t&&(t=function(){n&&this.base.apply(this,arguments)}),i){var r=t;t=function(){var e,t=this._||(this._={});for(e in i){var n=i[e];t[e]="function"==typeof n?CKEDITOR.tools.bind(n,this):n}r.apply(this,arguments)}}return n&&(t.prototype=this.prototypedCopy(n.prototype),t.prototype.constructor=t,t.base=n,t.baseProto=n.prototype,t.prototype.base=function e(){this.base=n.prototype.base,n.apply(this,arguments),this.base=e}),o&&this.extend(t.prototype,o,!0),e&&this.extend(t,e,!0),t},addFunction:function(e,t){return n.push((function(){return e.apply(t||this,arguments)}))-1},removeFunction:function(e){n[e]=null},callFunction:function(e){var t=n[e];return t&&t.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,t=/^-?\d+\.?\d*px$/;return function(n){return e=CKEDITOR.tools.trim(n+"")+"px",t.test(e)?e:n||""}}(),convertToPx:function(){var e;return function(t){if(e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),!/%$/.test(t)){var n=0>parseFloat(t);return n&&(t=t.replace("-","")),e.setStyle("width",t),t=e.$.clientWidth,n?-t:t}return t}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,n=arguments.length;t<n;t++){var i=arguments[t];try{e=i();break}catch(s){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,n=this;window.setTimeout((function(){e.apply(n,t)}),0)}},normalizeCssText:function(e,t){var n,i=[],o=CKEDITOR.tools.parseCssText(e,!0,t);for(n in o)i.push(n+":"+o[n]);return i.sort(),i.length?i.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,(function(e,t,n,i){for(e=[t,n,i],t=0;3>t;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")}))},normalizeHex:function(e){return e.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,(function(e,t,n,i){return 3==(e=t.toLowerCase()).length&&(e=[(e=e.split(""))[0],e[0],e[1],e[1],e[2],e[2]].join("")),"#"+e+i}))},parseCssText:function(e,t,n){var i={};return n&&(e=new CKEDITOR.dom.element("span").setAttribute("style",e).getAttribute("style")||""),e&&(e=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(e))),e&&";"!=e?(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,n,o){t&&("font-family"==(n=n.toLowerCase())&&(o=o.replace(/\s*,\s*/g,",")),o=CKEDITOR.tools.trim(o)),i[n]=o})),i):i},writeCssText:function(e,t){var n,i=[];for(n in e)i.push(n+":"+e[n]);return t&&i.sort(),i.join("; ")},objectCompare:function(e,t,n){var i;if(!e&&!t)return!0;if(!e||!t)return!1;for(i in e)if(e[i]!=t[i])return!1;if(!n)for(i in t)if(e[i]!=t[i])return!1;return!0},objectKeys:function(e){return CKEDITOR.tools.object.keys(e)},convertArrayToObject:function(e,t){var n={};1==arguments.length&&(t=!0);for(var i=0,o=e.length;i<o;++i)n[e[i]]=t;return n},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(n){if(!(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=e}return!!e},eventsBuffer:function(e,t,n){return new this.buffers.event(e,t,n)},enableHtml5Elements:function(e,t){for(var n,i="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),o=i.length;o--;)n=e.createElement(i[o]),t&&e.appendChild(n)},checkIfAnyArrayItemMatches:function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var n in e)if(n.match(t))return!0;return!1},keystrokeToString:function(e,t){var n=this.keystrokeToArray(e,t);return n.display=n.display.join("+"),n.aria=n.aria.join("+"),n},keystrokeToArray:function(e,t){var n=16711680&t,i=65535&t,o=CKEDITOR.env.mac,r=[],a=[];return n&CKEDITOR.CTRL&&(r.push(o?"⌘":e[17]),a.push(o?e[224]:e[17])),n&CKEDITOR.ALT&&(r.push(o?"⌥":e[18]),a.push(e[18])),n&CKEDITOR.SHIFT&&(r.push(o?"⇧":e[16]),a.push(e[16])),i&&(e[i]?(r.push(e[i]),a.push(e[i])):(r.push(String.fromCharCode(i)),a.push(String.fromCharCode(i)))),{display:r,aria:a}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(e){e=e.toLowerCase();for(var t,n=document.cookie.split(";"),i=0;i<n.length;i++)if(t=n[i].split("="),decodeURIComponent(CKEDITOR.tools.trim(t[0]).toLowerCase())===e)return decodeURIComponent(1<t.length?t[1]:"");return null},setCookie:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/"},getCsrfToken:function(){if(!(e=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=e.length){var e=[],t="";if(window.crypto&&window.crypto.getRandomValues)e=new Uint8Array(40),window.crypto.getRandomValues(e);else for(var n=0;40>n;n++)e.push(Math.floor(256*Math.random()));for(n=0;n<e.length;n++){var i="abcdefghijklmnopqrstuvwxyz0123456789".charAt(e[n]%36);t+=.5<Math.random()?i.toUpperCase():i}e=t,CKEDITOR.tools.setCookie("ckCsrfToken",e)}return e},escapeCss:function(e){return e?window.CSS&&CSS.escape?CSS.escape(e):isNaN(parseInt(e.charAt(0),10))?e:"\\3"+e.charAt(0)+" "+e.substring(1,e.length):""},getMouseButton:function(e){return!!(e=e&&e.data?e.data.$:e)&&CKEDITOR.tools.normalizeMouseButton(e.button)},normalizeMouseButton:function(e,t){if(!CKEDITOR.env.ie||9<=CKEDITOR.env.version&&!CKEDITOR.env.ie6Compat)return e;for(var n=[[CKEDITOR.MOUSE_BUTTON_LEFT,1],[CKEDITOR.MOUSE_BUTTON_MIDDLE,4],[CKEDITOR.MOUSE_BUTTON_RIGHT,2]],i=0;i<n.length;i++){var o=n[i];if(o[0]===e&&t)return o[1];if(!t&&o[1]===e)return o[0]}},convertHexStringToBytes:function(e){var t,n=[],i=e.length/2;for(t=0;t<i;t++)n.push(parseInt(e.substr(2*t,2),16));return n},convertBytesToBase64:function(e){var t,n="",i=e.length;for(t=0;t<i;t+=3){var o,r=e.slice(t,t+3),a=r.length,s=[];if(3>a)for(o=a;3>o;o++)r[o]=0;for(s[0]=(252&r[0])>>2,s[1]=(3&r[0])<<4|r[1]>>4,s[2]=(15&r[1])<<2|(192&r[2])>>6,s[3]=63&r[2],o=0;4>o;o++)n=o<=a?n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s[o]):n+"="}return n},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(e){var t={},n=this._findColor(e);return n.length&&(t.color=n[0],CKEDITOR.tools.array.forEach(n,(function(t){e=e.replace(t,"")}))),(e=CKEDITOR.tools.trim(e))&&(t.unprocessed=e),t},margin:function(e){return CKEDITOR.tools.style.parse.sideShorthand(e,(function(e){return e.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]}))},sideShorthand:function(e,t){function n(e){i.top=o[e[0]],i.right=o[e[1]],i.bottom=o[e[2]],i.left=o[e[3]]}var i={},o=t?t(e):e.split(/\s+/);switch(o.length){case 1:n([0,0,0,0]);break;case 2:n([0,1,0,1]);break;case 3:n([0,1,2,1]);break;case 4:n([0,1,2,3])}return i},border:function(e){return CKEDITOR.tools.style.border.fromCssRule(e)},_findColor:function(e){var t=[],n=CKEDITOR.tools.array;return(t=(t=t.concat(e.match(this._rgbaRegExp)||[])).concat(e.match(this._hslaRegExp)||[])).concat(n.filter(e.split(/\s+/),(function(e){return!!e.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||e.toLowerCase()in CKEDITOR.tools.style.parse._colors})))}}},array:{filter:function(e,t,n){var i=[];return this.forEach(e,(function(o,r){t.call(n,o,r,e)&&i.push(o)})),i},find:function(e,t,n){for(var i=e.length,o=0;o<i;){if(t.call(n,e[o],o,e))return e[o];o++}},forEach:function(e,t,n){var i,o=e.length;for(i=0;i<o;i++)t.call(n,e[i],i,e)},map:function(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push(t.call(n,e[o],o,e));return i},reduce:function(e,t,n,i){for(var o=0;o<e.length;o++)n=t.call(i,n,e[o],o,e);return n},every:function(e,t,n){return!e.length||(t=this.filter(e,t,n),e.length===t.length)},some:function(e,t,n){for(var i=0;i<e.length;i++)if(t.call(n,e[i],i,e))return!0;return!1}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(e){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(e),(function(t){return[t,e[t]]}))},values:function(e){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(e),(function(t){return e[t]}))},keys:function(e){var t=Object.prototype.hasOwnProperty,n=[],i=CKEDITOR.tools.object.DONT_ENUMS;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(!e||"object"!=typeof e)){if(t=[],"string"==typeof e)for(n=0;n<e.length;n++)t.push(String(n));return t}for(var o in e)n.push(o);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(o=0;o<i.length;o++)t.call(e,i[o])&&n.push(i[o]);return n},findKey:function(e,t){if("object"!=typeof e)return null;for(var n in e)if(e[n]===t)return n;return null},merge:function(e,t){var n=CKEDITOR.tools,i=n.clone(e),o=n.clone(t);return n.array.forEach(n.object.keys(o),(function(e){i[e]="object"==typeof o[e]&&"object"==typeof i[e]?n.object.merge(i[e],o[e]):o[e]})),i}},getAbsoluteRectPosition:function(e,t){var n=CKEDITOR.tools.copy(t);!function e(t){if(t){var i=t.getClientRect();n.top+=i.top,n.left+=i.left,"x"in n&&"y"in n&&(n.x+=i.x,n.y+=i.y),e(t.getWindow().getFrame())}}(e.getFrame());var i=CKEDITOR.document.getWindow().getScrollPosition();return n.top+=i.y,n.left+=i.x,"x"in n&&"y"in n&&(n.y+=i.y,n.x+=i.x),n.right=n.left+n.width,n.bottom=n.top+n.height,n}},e.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},(t.prototype=CKEDITOR.tools.prototypedCopy(e.prototype))._reschedule=function(){this._scheduledTimer&&this._clearTimer()},t.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=e,CKEDITOR.tools.buffers.throttle=t,CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(e){this.width=(e=e||{}).width,this.style=e.style,this.color=e.color,this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var e in this._.normalizeMap){var t=this[e];t&&(this[e]=CKEDITOR.tools.array.reduce(this._.normalizeMap[e],(function(e,t){return e.replace(t[0],t[1])}),t))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],(function(e){return!!e})).join(" ")}},statics:{fromCssRule:function(e){var t={},n=e.split(/\s+/g);return(e=CKEDITOR.tools.style.parse._findColor(e)).length&&(t.color=e[0]),CKEDITOR.tools.array.forEach(n,(function(e){t.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,e)?!t.width&&CKEDITOR.tools.style.parse._widthRegExp.test(e)&&(t.width=e):t.style=e})),new CKEDITOR.tools.style.border(t)},splitCssValues:function(e,t){t=t||{};var n=CKEDITOR.tools.array.reduce(["width","style","color"],(function(n,i){var o=e["border-"+i]||t[i];return n[i]=o?CKEDITOR.tools.style.parse.sideShorthand(o):null,n}),{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],(function(t,i){var o,r={};for(o in n)r[o]=e["border-"+i+"-"+o]||n[o]&&n[o][i];return t["border-"+i]=new CKEDITOR.tools.style.border(r),t}),{})}}}),CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var n=CKEDITOR.tools.clone(e),i=1;i<arguments.length;i++)for(var o in t=arguments[i])delete n[o];return n},n={},i={},o={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},r={command:1,link:1,meta:1,noscript:1,script:1,style:1},a={},s={"#":1},l={center:1,dir:1,noframes:1};return e(n,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},s,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(i,o,n,l),t={a:t(n,{a:1,button:1}),abbr:n,address:i,area:a,article:i,aside:i,audio:e({source:1,track:1},i),b:n,base:a,bdi:n,bdo:n,blockquote:i,body:i,br:a,button:t(n,{a:1,button:1}),canvas:n,caption:i,cite:n,code:n,col:a,colgroup:{col:1},command:a,datalist:e({option:1},n),dd:i,del:n,details:e({summary:1},i),dfn:n,div:i,dl:{dt:1,dd:1},dt:i,em:n,embed:a,fieldset:e({legend:1},i),figcaption:i,figure:e({figcaption:1},i),footer:i,form:i,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:e({title:1,base:1},r),header:i,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:a,html:e({head:1,body:1},i,r),i:n,iframe:s,img:a,input:a,ins:n,kbd:n,keygen:a,label:n,legend:n,li:i,link:a,main:i,map:i,mark:n,menu:e({li:1},i),meta:a,meter:t(n,{meter:1}),nav:i,noscript:e({link:1,meta:1,style:1},n),object:e({param:1},n),ol:{li:1},optgroup:{option:1},option:s,output:n,p:n,param:a,pre:n,progress:t(n,{progress:1}),q:n,rp:n,rt:n,ruby:e({rp:1,rt:1},n),s:n,samp:n,script:s,section:i,select:{optgroup:1,option:1},small:n,source:a,span:n,strong:n,style:s,sub:n,summary:e({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},n),sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:i,textarea:s,tfoot:{tr:1},th:i,thead:{tr:1},time:t(n,{time:1}),title:s,tr:{th:1,td:1},track:a,u:n,ul:{li:1},var:n,video:e({source:1,track:1},i),wbr:a,acronym:n,applet:e({param:1},i),basefont:a,big:n,center:i,dialog:a,dir:{li:1},font:n,isindex:a,noframes:i,strike:n,tt:n},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},o,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=(e=function(e,t){return function(n){"undefined"!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(n))}},{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var n=this.getCustomData("_cke_nativeListeners");return n||this.setCustomData("_cke_nativeListeners",n={}),n[t]||(n=n[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,n,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,n)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,n),delete t[e])}},removeAllListeners:function(){try{var e,t=this.getCustomData("_cke_nativeListeners");for(e in t){var i=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,i):this.$.removeEventListener&&this.$.removeEventListener(e,i,!1),delete t[e]}}catch(n){if(!CKEDITOR.env.edge||-2146828218!==n.number)throw n}CKEDITOR.event.prototype.removeAllListeners.call(this)}}),function(e){var t={};CKEDITOR.on("reset",(function(){t={}})),e.equals=function(e){try{return e&&e.$===this.$}catch(t){return!1}},e.setCustomData=function(e,n){var i=this.getUniqueId();return(t[i]||(t[i]={}))[e]=n,this},e.getCustomData=function(e){var n=this.$["data-cke-expando"];return(n=n&&t[n])&&e in n?n[e]:null},e.removeCustomData=function(e){var n,i,o;return(n=(n=this.$["data-cke-expando"])&&t[n])&&(i=n[e],o=e in n,delete n[e]),o?i:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.getUniqueId();e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){var n=this.$.cloneNode(e);return function n(i){if(i["data-cke-expando"]&&(i["data-cke-expando"]=!1),(i.nodeType==CKEDITOR.NODE_ELEMENT||i.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(t||i.nodeType!=CKEDITOR.NODE_ELEMENT||i.removeAttribute("id",!1),e)){i=i.childNodes;for(var o=0;o<i.length;o++)n(i[o])}}(n),n=new CKEDITOR.dom.node(n),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function t(n){if(n.type==CKEDITOR.NODE_ELEMENT||n.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(n.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=n.getName();":"==i[0]&&n.renameNode(i.substring(1))}if(e)for(i=0;i<n.getChildCount();i++)t(n.getChild(i))}}(n),n},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],n=this.getDocument().$.documentElement,i=this;i&&i!=n;){var o=i.getParent();o&&t.unshift(this.getIndex.call(i,e)),i=o}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function t(e,n){var i=n?e.getNext():e.getPrevious();return i&&i.type==CKEDITOR.NODE_TEXT?i.isEmpty()?t(i,n):i:null}var n,i=this,o=-1;if(!this.getParent()||e&&i.type==CKEDITOR.NODE_TEXT&&i.isEmpty()&&!t(i)&&!t(i,!0))return-1;do{e&&!i.equals(this)&&i.type==CKEDITOR.NODE_TEXT&&(n||i.isEmpty())||(o++,n=i.type==CKEDITOR.NODE_TEXT)}while(i=i.getPrevious());return o},getNextSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var o;if(!(e=!e&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getNext()}for(;!e&&(o=(o||this).getParent());){if(n&&!1===n(o,!0))return null;e=o.getNext()}return!e||n&&!1===n(e)?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var o;if(!(e=!e&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getPrevious()}for(;!e&&(o=(o||this).getParent());){if(n&&!1===n(o,!0))return null;e=o.getPrevious()}return!e||n&&!1===n(e)?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){var t,n=this.$;do{t=(n=n.previousSibling)&&10!=n.nodeType&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getNext:function(e){var t,n=this.$;do{t=(n=n.nextSibling)&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,n=[];do{n[e?"push":"unshift"](t)}while(t=t.getParent());return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do{if(t.contains(e))return t}while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return 0>t.sourceIndex||0>n.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}t=this.getAddress(),e=e.getAddress(),n=Math.min(t.length,e.length);for(var i=0;i<n;i++)if(t[i]!=e[i])return t[i]<e[i]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n,o,r=this.$;for(t||(r=r.parentNode),"function"==typeof e?(o=!0,n=e):(o=!1,n=function(t){return t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"","string"==typeof e?t==e:t in e});r;){if(n(o?new CKEDITOR.dom.node(r):r))return new CKEDITOR.dom.node(r);try{r=r.parentNode}catch(i){r=null}}return null},hasAscendant:function(e,t){var n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(e){var t=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent()),CKEDITOR.env.edge&&t&&t.is("textarea","input")&&(e=!0),!e&&t&&void 0!==t.$.isContentEditable)return!(t.$.isContentEditable||t.data("cke-editable"));for(;t;){if(t.data("cke-editable"))return!1;if(t.hasAttribute("contenteditable"))return"false"==t.getAttribute("contenteditable");t=t.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:{x:(e=e.document).documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0}},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(n)}return t||n.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles)),n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(t){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,i=0;n&&i<e.length;i++){var o=e[i];if(t)for(var r=-1,a=0;a<n.childNodes.length;a++){var s=n.childNodes[a];if((!0!==t||3!=s.nodeType||!s.previousSibling||3!=s.previousSibling.nodeType)&&++r==o){n=s;break}}else n=n.childNodes[o]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){return CKEDITOR.env.ie&&8>=document.documentMode||!t||(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,(function(e){return new CKEDITOR.dom.node(e)}))}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element("div",t);return n.setHtml(e),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,n,i){var o=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),r=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[o]=t,r[n]=1,t.setCustomData(n,i)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,n){var i,o=t.getCustomData("list_marker_names"),r=t.getCustomData("list_marker_id");for(i in o)t.removeCustomData(i);t.removeCustomData("list_marker_names"),n&&(t.removeCustomData("list_marker_id"),delete e[r])},function(){function e(e,t){return-1<(" "+e+" ").replace(r," ").indexOf(" "+t+" ")}function t(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function n(e,t){var n=CKEDITOR.tools.escapeCss(e.$.id);return"#"+n+" "+t.split(/,\s*/).join(", #"+n+" ")}function i(e){for(var t=0,n=0,i=a[e].length;n<i;n++)t+=parseFloat(this.getComputedStyle(a[e][n])||0,10)||0;return t}var o=void 0!==(o=document.createElement("_").classList)&&null!==String(o.add).match(/\[Native code\]/gi),r=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:o?function(e){return this.$.classList.add(e),this}:function(t){var n=this.$.className;return n&&(e(n,t)||(n+=" "+t)),this.$.className=n||t,this},removeClass:o?function(e){var t=this.$;return t.classList.remove(e),t.className||t.removeAttribute("class"),this}:function(t){var n=this.getAttribute("class");return n&&e(n,t)&&((n=n.replace(new RegExp("(?:^|\\s+)"+t+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",n):this.removeAttribute("class")),this},hasClass:function(t){return e(this.$.className,t)},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e,t){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this),n.setEndAfter(e);var i,o=n.extractContents(!1,t||!1);if(n.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(n=new CKEDITOR.dom.element("div");i=o.getFirst();)i.$.style.backgroundColor&&(i.$.style.backgroundColor=i.$.style.backgroundColor),n.append(i);n.insertAfter(this),n.remove(!0)}else o.insertAfterNode(this)},contains:document.compareDocumentPosition?function(e){return!!(16&this.$.compareDocumentPosition(e.$))}:function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)},focus:function(){function e(){try{this.$.focus()}catch(n){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(e){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!t.width&&(t.width=t.right-t.left),!t.height&&(t.height=t.bottom-t.top),e?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),t):t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(t),t.innerHTML=e,n.removeChild(t),e}catch(i){for(this.$.innerHTML="",(t=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement("p");return e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(e=this.$.getAttribute(e,2))&&0===this.$.tabIndex&&(e=null),e;case"checked":return((e=this.$.attributes.getNamedItem(e)).specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:function(e){return this.$.getAttribute(e,2)},getAttributes:function(e){var t,n={},i=this.$.attributes;for(e=CKEDITOR.tools.isArray(e)?e:[],t=0;t<i.length;t++)-1===CKEDITOR.tools.indexOf(e,i[t].name)&&(n[i[t].name]=i[t].value);return n},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getClientSize:function(){return{width:this.$.clientWidth,height:this.$.clientHeight}},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""}:function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var e=this.$.tabIndex;return 0!==e||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?e:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return this.getName=function(){return e},this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if("object"==typeof arguments[0])return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()||!1!==e&&(!(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span)||!e["#"]))},isIdentical:function(e){var t=this.clone(0,1);if(e=e.clone(0,1),t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&((n=n.clone()).setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())}return t==e},isVisible:function(){var e,t,n=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return n&&CKEDITOR.env.webkit&&!(e=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(n=new CKEDITOR.dom.element(t).isVisible()),!!n},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,n=e.count();t<n;t++){var i=e.getItem(t);if((i.type!=CKEDITOR.NODE_ELEMENT||!i.data("cke-bookmark"))&&(i.type==CKEDITOR.NODE_ELEMENT&&!i.isEmptyInlineRemoveable()||i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<t&&(2<t||!n[e[0].nodeName]||2==t&&!n[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if("input"==this.getName())switch(e){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(e=this.getAttribute("type"))||"radio"==e?"on"!=this.$.value:!!this.$.value}return!!t&&t.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var n,i=this.$;if(i!=(e=e.$))if(t)for(;n=i.lastChild;)e.insertBefore(i.removeChild(n),e.firstChild);else for(;n=i.firstChild;)e.appendChild(i.removeChild(n))},mergeSiblings:function(){function e(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var i=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(i.push(t),!(t=n?t.getNext():t.getPrevious())||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var o=n?e.getLast():e.getFirst();i.length;)i.shift().move(e,!n);t.moveChildren(e,!n),t.remove(),o&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings()}}}return function(t){(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(e(this,this.getNext(),!0),e(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,n){return"class"==t?this.$.className=n:"style"==t?this.$.style.cssText=n:"tabindex"==t?this.$.tabIndex=n:"checked"==t?this.$.checked=n:"contenteditable"==t?e.call(this,"contentEditable",n):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,n){if("src"==t&&n.match(/^http:\/\//))try{e.apply(this,arguments)}catch(i){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:function(e){this.$.removeAttribute(e)},removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e=e||this.getAttributes())e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){if((i=this.$.style).removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)i.removeProperty?i.removeProperty(e):i.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var t,n=["top","left","right","bottom"];"border"==e&&(t=["color","style","width"]);for(var i=[],o=0;o<n.length;o++)if(t)for(var r=0;r<t.length;r++)i.push([e,n[o],t[r]].join("-"));else i.push([e,n[o]].join("-"));for(e=0;e<i.length;e++)this.removeStyle(i[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(e=Math.round(100*e),this.setStyle("filter",100<=e?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var e=this.getElementsByTag("*"),t=0,n=e.count();t<n;t++)e.getItem(t).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,n=0,i=this.getDocument(),o=i.getBody(),r="BackCompat"==i.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(l=this,u=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(t+=l.$.offsetLeft-l.$.scrollLeft,n+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(t+=l.$.clientLeft||0,n+=l.$.clientTop||0);u&&!u.equals(l);)t-=u.$.scrollLeft,n-=u.$.scrollTop,u=u.getParent();u=l,l=(a=l.$.offsetParent)?new CKEDITOR.dom.element(a):null}else{var a=this.$.getBoundingClientRect(),s=i.$.documentElement,l=s.clientTop||o.$.clientTop||0,u=s.clientLeft||o.$.clientLeft||0,c=!0;CKEDITOR.env.ie&&(c=i.getDocumentElement().contains(this),i=i.getBody().contains(this),c=r&&i||!r&&c),c&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(t=o.$.scrollLeft||s.scrollLeft,n=o.$.scrollTop||s.scrollTop):(t=(n=r?o.$:s).scrollLeft,n=n.scrollTop),t=a.left+t-u,n=a.top+n-l)}return e&&(a=this.getWindow(),l=e.getWindow(),!a.equals(l)&&a.$.frameElement&&(t+=(e=new CKEDITOR.dom.element(a.$.frameElement).getDocumentPosition(e)).x,n+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||r||(t+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:t,y:n}},scrollIntoView:function(e){var n=this.getParent();if(n)do{if((n.$.clientWidth&&n.$.clientWidth<n.$.scrollWidth||n.$.clientHeight&&n.$.clientHeight<n.$.scrollHeight)&&!n.is("body")&&this.scrollIntoParent(n,e,1),n.is("html")){var i=n.getWindow();try{var o=i.$.frameElement;o&&(n=new CKEDITOR.dom.element(o))}catch(t){}}}while(n=n.getParent())},scrollIntoParent:function(e,t,n){var i,o,r,a;function s(t,n){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,n):(e.$.scrollLeft+=t,e.$.scrollTop+=n)}function l(e,t){var n={x:0,y:0};if(!e.is(c?"body":"html")){var i=e.$.getBoundingClientRect();n.x=i.left,n.y=i.top}return(i=e.getWindow()).equals(t)||(i=l(CKEDITOR.dom.element.get(i.$.frameElement),t),n.x+=i.x,n.y+=i.y),n}function u(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}!e&&(e=this.getWindow());var c="BackCompat"==(r=e.getDocument()).$.compatMode;e instanceof CKEDITOR.dom.window&&(e=c?r.getBody():r.getDocumentElement()),CKEDITOR.env.webkit&&(r=this.getEditor(!1))&&(r._.previousScrollTop=null),o=l(this,r=e.getWindow());var d=l(e,r),f=this.$.offsetHeight;i=this.$.offsetWidth;var h=e.$.clientHeight,g=e.$.clientWidth;r=o.x-u(this,"left")-d.x||0,a=o.y-u(this,"top")-d.y||0,i=o.x+i+u(this,"right")-(d.x+g)||0,o=o.y+f+u(this,"bottom")-(d.y+h)||0,(0>a||0<o)&&s(0,!0===t?a:!1===t?o:0>a?a:o),n&&(0>r||0<i)&&s(0>r?r:i,0)},setState:function(e,t,n){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){var n=this.$.attributes;t=t||{};for(var i=0;i<n.length;i++){var o,r=n[i],a=r.nodeName.toLowerCase();a in t||("checked"==a&&(o=this.getAttribute(a))?e.setAttribute(a,o):CKEDITOR.env.ie&&!this.hasAttribute(a)||(null===(o=this.getAttribute(a))&&(o=r.nodeValue),e.setAttribute(a,o)))}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument();e=new CKEDITOR.dom.element(e,t),this.copyAttributes(e),this.moveChildren(e),this.getParent(!0)&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var n=e.childNodes;if(0<=t&&t<n.length)return n[t]}return function(t){var n=this.$;if(t.slice)for(t=t.slice();0<t.length&&n;)n=e(n,t.shift());else n=e(n,t);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_enable_context_menu")}this.on("contextmenu",(function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()}))},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(!1===t?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(e){var t,n,i,o=CKEDITOR.instances;for(t in e=e||void 0===e,o)if((n=o[t]).element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!e&&(i=n.editable())&&(i.equals(this)||i.contains(this)))return n;return null},find:function(e){var i=t(this);return e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(n(this,e))),i(),e},findOne:function(e){var i=t(this);return e=this.$.querySelector(n(this,e)),i(),e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.getChildren();for(var o=0;o<n.count();o++)(i=n.getItem(o)).type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}},fireEventHandler:function(e,t){var n="on"+e,i=this.$;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version){var o,r=i.ownerDocument.createEventObject();for(o in t)r[o]=t[o];i.fireEvent(n,r)}else i[i[e]?e:n](t)},isDetached:function(){var e=this.getDocument(),t=e.getDocumentElement();return!t.equals(this)&&!t.contains(this)||(!CKEDITOR.env.ie||8<CKEDITOR.env.version&&!CKEDITOR.env.quirks)&&!e.$.defaultView}});var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){"number"==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=i.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(n-=i.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){(e=e.$).parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function e(e,t){var n=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,n.collapsed)return this.end(),null;n.optimize()}var i,o=n.startContainer;i=n.endContainer;var r,a=n.startOffset,s=n.endOffset,l=this.guard,u=this.type,c=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var d=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),f=i.type==CKEDITOR.NODE_ELEMENT?i.getChild(s):i.getNext();this._.guardLTR=function(e,t){return!(t&&d.equals(e)||f&&e.equals(f)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}if(e&&!this._.guardRTL){var h=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),g=o.type==CKEDITOR.NODE_ELEMENT?a?o.getChild(a-1):null:o.getPrevious();this._.guardRTL=function(e,t){return!(t&&h.equals(e)||g&&e.equals(g)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}var p=e?this._.guardRTL:this._.guardLTR;for(r=l?function(e,t){return!1!==p(e,t)&&l(e,t)}:p,this.current?i=this.current[c](!1,u,r):(e?i.type==CKEDITOR.NODE_ELEMENT&&(i=0<s?i.getChild(s-1):!1===r(i,!0)?null:i.getPreviousSourceNode(!0,u,r)):(i=o).type==CKEDITOR.NODE_ELEMENT&&((i=i.getChild(a))||(i=!1===r(o,!0)?null:o.getNextSourceNode(!0,u,r))),i&&!1===r(i)&&(i=null));i&&!this._.end;){if(this.current=i,this.evaluator&&!1===this.evaluator(i)){if(t&&this.evaluator)return!1}else if(!t)return i;i=i[c](!1,u,r)}return this.end(),this.current=null}function t(t){for(var n,i=null;n=e.call(this,t);)i=n;return i}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return!1!==e.call(this,0,1)},checkBackward:function(){return!1!==e.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},i={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in i||!n[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e))},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function n(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(i){var o,r;return o=i&&i.type!=CKEDITOR.NODE_ELEMENT&&(r=i.getParent())&&n(r),o=e?o:o||n(i),!!(t^o)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var n;return t&&t.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(e^n)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(i){return t(i)?i=1:(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),i=i.$.offsetWidth<=n),!!(e^i)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(n){return!!(t^n.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!r(e)&&!a(e)}return function(n){var i=CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&o.test(n.getText());return i&&(i=n.getParent(),n=n.getNext(t),i=i.isBlockBoundary()&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())),!!(e^i)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark(),s=CKEDITOR.dom.walker.temp(),l=function(e){return a(e)||r(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=r(t)||a(t)||s(t),!!(e^t)}};var u=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(e){return function(t){for(var n=0,i=t.getChildCount();n<i;++n)if(!u(t.getChild(n)))return!!e;return!e}};var c=CKEDITOR.dom.walker.empty(),d=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var t,n={};for(t in e)CKEDITOR.dtd[t]["#"]&&(n[t]=1);return n}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){return t=!u(t)&&!!(t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||"false"==t.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&t.is(d)&&c(t))),!!(e^t)}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do{e=e.getPreviousSourceNode()}while(l(e));return!(!e||!(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&o.test(e.getText())))&&e}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset}function t(e,t,n,i,o){function r(e,t,n,i){var r=n?e.getPrevious():e.getNext();return i&&a||(l||i?t.append(e.clone(!0,o),n):(e.remove(),s&&t.append(e,n))),r}e.optimizeBookmark();var a=0===t,s=1==t,l=2==t;t=l||s;var u,c,d,f,h,g,p=e.startContainer,m=e.endContainer,v=e.startOffset,y=e.endOffset;if(l&&m.type==CKEDITOR.NODE_TEXT&&(p.equals(m)||p.type===CKEDITOR.NODE_ELEMENT&&p.getFirst().equals(m)))n.append(e.document.createText(m.substring(v,y)));else{m.type==CKEDITOR.NODE_TEXT?l?g=!0:m=m.split(y):0<m.getChildCount()?y>=m.getChildCount()?(m=m.getChild(y-1),c=!0):m=m.getChild(y):f=c=!0,p.type==CKEDITOR.NODE_TEXT?l?h=!0:p.split(v):0<p.getChildCount()?0===v?(p=p.getChild(v),u=!0):p=p.getChild(v-1):d=u=!0;for(var b,T,C,E=p.getParents(),_=m.getParents(),x=function(){var e,t=Math.min(E.length,_.length);for(e=0;e<t;e++)if(!E[e].equals(_[e]))return e;return e-1}(),I=E.length-1,D=_.length-1,w=n,O=-1,R=x;R<=I;R++){for(C=(T=E[R]).getNext(),R!=I||T.equals(_[R])&&I<D?t&&(b=w.append(T.clone(0,o))):u?r(T,w,!1,d):h&&w.append(e.document.createText(T.substring(v)));C;){if(C.equals(_[R])){O=R;break}C=r(C,w)}w=b}for(w=n,R=x;R<=D;R++)if(C=(n=_[R]).getPrevious(),n.equals(E[R]))t&&(w=w.getChild(0));else{if(R!=D||n.equals(E[R])&&D<I?t&&(b=w.append(n.clone(0,o))):c?r(n,w,!1,f):g&&w.append(e.document.createText(n.substring(0,y))),R>O)for(;C;)C=r(C,w,!0);w=b}l||function(){var t=x-1,n=d&&f&&!p.equals(m);t<I-1||t<D-1||n?(n?e.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START):D==t+1&&c?e.moveToPosition(_[t],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(_[t+1],CKEDITOR.POSITION_BEFORE_START),i&&(t=E[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&((n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document)).insertAfter(t),t.mergeSiblings(!1),e.moveToBookmark({startNode:n}))):e.collapse(!0)}()}}function n(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),i=CKEDITOR.dom.walker.bogus();return function(r){return!(!n(r)&&!t(r))||(i(r)&&!e?e=!0:!(r.type==CKEDITOR.NODE_TEXT&&(r.hasAscendant("pre")||CKEDITOR.tools.trim(r.getText()).length)||r.type==CKEDITOR.NODE_ELEMENT&&!r.is(o)))}}function i(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"]((function(e){return!t&&l(e)&&(t=e),s(e)&&!(r(e)&&e.equals(t))}))}}var o={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},r=CKEDITOR.dom.walker.bogus(),a=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,s=CKEDITOR.dom.walker.editable(),l=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,2,n,!1,void 0===e||e),n},deleteContents:function(e){this.collapsed||t(this,0,null,e)},extractContents:function(e,n){var i=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,1,i,e,void 0===n||n),i},equals:function(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset&&this.startContainer.equals(e.startContainer)&&this.endContainer.equals(e.endContainer)},createBookmark:function(e){function t(e){return e.getAscendant((function(e){var t;return(t=e.data&&e.data("cke-temp"))&&(t=-1===CKEDITOR.tools.array.indexOf(["cke_copybin","cke_pastebin"],e.getAttribute("id"))),t}),!0)}var n,i,o,r,a=this.startContainer,s=this.endContainer,l=this.collapsed;return(n=this.document.createElement("span")).data("cke-bookmark",1),n.setStyle("display","none"),n.setHtml("&nbsp;"),e&&(o="cke_bm_"+CKEDITOR.tools.getNextNumber(),n.setAttribute("id",o+(l?"C":"S"))),l||((i=n.clone()).setHtml("&nbsp;"),e&&i.setAttribute("id",o+"E"),r=this.clone(),t(s)&&(s=t(s),r.moveToPosition(s,CKEDITOR.POSITION_AFTER_END)),r.collapse(),r.insertNode(i)),r=this.clone(),t(a)&&(s=t(a),r.moveToPosition(s,CKEDITOR.POSITION_BEFORE_START)),r.collapse(!0),r.insertNode(n),i?(this.setStartAfter(n),this.setEndBefore(i)):this.moveToPosition(n,CKEDITOR.POSITION_AFTER_END),{startNode:e?o+(l?"C":"S"):n,endNode:e?o+"E":i,serializable:e,collapsed:l}},createBookmark2:function(){function e(e){var t,i=e.container,o=e.offset,r=o;if((t=(t=i).type!=CKEDITOR.NODE_ELEMENT||0===r||r==t.getChildCount()?0:t.getChild(r-1).type==CKEDITOR.NODE_TEXT&&t.getChild(r).type==CKEDITOR.NODE_TEXT)&&(o=(i=i.getChild(o-1)).getLength()),i.type==CKEDITOR.NODE_ELEMENT&&0<o){e:{for(t=i;o--;)if(0<=(r=t.getChild(o).getIndex(!0))){o=r;break e}o=-1}o+=1}if(i.type==CKEDITOR.NODE_TEXT){for(t=i,r=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;)r+=t.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;t=r,i.isEmpty()?(r=i.getPrevious(n),t?(o=t,i=r?r.getNext():i.getParent().getFirst()):(i=i.getParent(),o=r?r.getIndex(!0)+1:0)):o+=t}e.container=i,e.offset=o}function t(e,t){var n=t.getCustomData("cke-fillingChar");if(n){var i=e.container;n.equals(i)&&(e.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=e.offset&&(e.offset=i.getIndex(),e.container=i.getParent()))}}var n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(n){var i=this.collapsed,o={container:this.startContainer,offset:this.startOffset},r={container:this.endContainer,offset:this.endOffset};return n&&(e(o),t(o,this.root),i||(e(r),t(r,this.root))),{start:o.container.getAddress(n),end:i?null:r.container.getAddress(n),startOffset:o.offset,endOffset:r.offset,normalized:n,collapsed:i,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,i=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset,this.setStart(t,n),i?this.setEnd(i,e):this.collapse(!0)}else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,n=this.endContainer,i=this.startOffset,o=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if((e=t.getChildCount())>i)t=t.getChild(i);else if(1>e)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=(t=new CKEDITOR.dom.node(t)).getNextSourceNode()||t}if(n.type==CKEDITOR.NODE_ELEMENT)if((e=n.getChildCount())>o)n=n.getChild(o).getPreviousSourceNode(!0);else if(1>e)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new CKEDITOR.dom.node(n)}return t.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(t=n),{startNode:t,endNode:n}},getCommonAncestor:function(e,t){var n=this.endContainer,i=(i=this.startContainer).equals(n)?e&&i.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?i.getChild(this.startOffset):i:i.getCommonAncestor(n);return t&&!i.is?i.getParent():i},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),t=this.endOffset,(e=this.endContainer).type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,i=this.startOffset,o=this.collapsed;if((!e||o)&&n&&n.type==CKEDITOR.NODE_TEXT){if(i)if(i>=n.getLength())i=n.getIndex()+1,n=n.getParent();else{var r=n.split(i);i=n.getIndex()+1,n=n.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(r,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset+=1)}else i=n.getIndex(),n=n.getParent();if(this.setStart(n,i),o)return void this.collapse(!0)}n=this.endContainer,i=this.endOffset,t||o||!n||n.type!=CKEDITOR.NODE_TEXT||(i?(i>=n.getLength()||n.split(i),i=n.getIndex()+1):i=n.getIndex(),n=n.getParent(),this.setEnd(n,i))},enlarge:function(e,t){function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var i=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var o=1;case CKEDITOR.ENLARGE_ELEMENT:var r=function(e,t){var n,o;for((n=new CKEDITOR.dom.range(g)).setStart(e,t),n.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};o=n.next();){if(o.type!=CKEDITOR.NODE_TEXT)return!1;if(f=o!=e?o.getText():o.substring(t),i.test(f))return!1}return!0};if(this.collapsed)break;var a,s,l,u,c,d,f,h=this.getCommonAncestor(),g=this.root,p=!1,m=this.startOffset;for((d=this.startContainer).type==CKEDITOR.NODE_TEXT?(m&&(p=!!(d=!CKEDITOR.tools.trim(d.substring(0,m)).length&&d)),d&&((u=d.getPrevious())||(l=d.getParent()))):(m&&(u=d.getChild(m-1)||d.getLast()),u||(l=d)),l=n(l);l||u;){if(l&&!u){if(!c&&l.equals(h)&&(c=!0),o?l.isBlockBoundary():!g.contains(l))break;p&&"inline"==l.getComputedStyle("display")||(p=!1,c?a=l:this.setStartBefore(l)),u=l.getPrevious()}for(;u;)if(d=!1,u.type==CKEDITOR.NODE_COMMENT)u=u.getPrevious();else{if(u.type==CKEDITOR.NODE_TEXT)f=u.getText(),i.test(f)&&(u=null),d=/[\s\ufeff]$/.test(f);else if((u.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&u.is("br"))&&!u.data("cke-bookmark"))if(p&&CKEDITOR.dtd.$removeEmpty[u.getName()]){if(f=u.getText(),i.test(f))u=null;else{m=u.$.getElementsByTagName("*");for(var v,y=0;v=m[y++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){u=null;break}}u&&(d=!!f.length)}else u=null;if(d&&(p?c?a=l:l&&this.setStartBefore(l):p=!0),u){if(d=u.getPrevious(),!l&&!d){l=u,u=null;break}u=d}else l=null}l&&(l=n(l.getParent()))}for(m=this.endOffset,l=u=null,c=p=!1,(d=this.endContainer).type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(m)).length?p=!0:(p=!d.getLength(),m==d.getLength()?(u=d.getNext())||(l=d.getParent()):r(d,m)&&(l=d.getParent())):(u=d.getChild(m))||(l=d);l||u;){if(l&&!u){if(!c&&l.equals(h)&&(c=!0),o?l.isBlockBoundary():!g.contains(l))break;p&&"inline"==l.getComputedStyle("display")||(p=!1,c?s=l:l&&this.setEndAfter(l)),u=l.getNext()}for(;u;){if(d=!1,u.type==CKEDITOR.NODE_TEXT)f=u.getText(),r(u,0)||(u=null),d=/^[\s\ufeff]/.test(f);else if(u.type==CKEDITOR.NODE_ELEMENT){if((0<u.$.offsetWidth||t&&u.is("br"))&&!u.data("cke-bookmark"))if(p&&CKEDITOR.dtd.$removeEmpty[u.getName()]){if(f=u.getText(),i.test(f))u=null;else for(m=u.$.getElementsByTagName("*"),y=0;v=m[y++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){u=null;break}u&&(d=!!f.length)}else u=null}else d=1;if(d&&p&&(c?s=l:this.setEndAfter(l)),u){if(d=u.getNext(),!l&&!d){l=u,u=null;break}u=d}else l=null}l&&(l=n(l.getParent()))}a&&s&&(h=a.contains(s)?s:a,this.setStartBefore(h),this.setEndAfter(h));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:(l=new CKEDITOR.dom.range(this.root)).setStartAt(g=this.root,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var b,T,C=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),E=null,_=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(E){if(E.equals(e))return void(E=null)}else E=e;else if(E)return;var t=C(e);return t||(b=e),t};if(o=function(e){var t=_(e);return!t&&e.is&&e.is("br")&&(T=e),t},l.guard=_,l=l.lastBackward(),this.setStartAt(b=b||g,!b.is("br")&&(!l&&this.checkStartOfBlock()||l&&b.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var x=CKEDITOR.dom.walker.whitespaces(),I=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(e){return!x(e)&&!I(e)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}(l=this.clone()).collapse(),l.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),(l=new CKEDITOR.dom.walker(l)).guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?o:_,b=E=T=null,l=l.lastForward(),this.setEndAt(b=b||g,!l&&this.checkEndOfBlock()||l&&b.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),T&&this.setEndAfter(T)}},shrink:function(e,t,n){var i="boolean"==typeof n?n:!n||"boolean"!=typeof n.shrinkOnBlockBoundary||n.shrinkOnBlockBoundary,o=n&&n.skipBogus;if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var r=this.clone(),a=this.startContainer,s=this.endContainer,l=this.startOffset,u=this.endOffset,c=n=1;a&&a.type==CKEDITOR.NODE_TEXT&&(l?l>=a.getLength()?r.setStartAfter(a):(r.setStartBefore(a),n=0):r.setStartBefore(a)),s&&s.type==CKEDITOR.NODE_TEXT&&(u?u>=s.getLength()?r.setEndAfter(s):(r.setEndAfter(s),c=0):r.setEndBefore(s)),r=new CKEDITOR.dom.walker(r);var d,f=CKEDITOR.dom.walker.bookmark(),h=CKEDITOR.dom.walker.bogus();return r.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},r.guard=function(t,n){return!!(o&&h(t)||f(t))||!(e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||n&&t.equals(d)||!1===i&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable"))&&(n||t.type!=CKEDITOR.NODE_ELEMENT||(d=t),!0)},n&&(a=r[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(a,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),c&&(r.reset(),(r=r[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(r,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!n&&!c)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=n,this.endContainer||(this._setEndContainer(t),this.endOffset=n),e(this)},setEnd:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=n,this.startContainer||(this._setStartContainer(t),this.startOffset=n),e(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}e(this)},setEndAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}e(this)},fixBlock:function(e,t){var n=this.createBookmark(),i=this.document.createElement(t);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(i),i.trim(),this.insertNode(i);var o=i.getBogus();return o&&o.remove(),i.appendBogus(),this.moveToBookmark(n),i},splitBlock:function(e,t){var n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=new CKEDITOR.dom.elementPath(this.endContainer,this.root),o=n.block,r=i.block,a=null;return n.blockLimit.equals(i.blockLimit)?("br"!=e&&(o||(o=this.fixBlock(!0,e),r=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),r||(r=this.fixBlock(!1,e))),n=o&&this.checkStartOfBlock(),i=r&&this.checkEndOfBlock(),this.deleteContents(),o&&o.equals(r)&&(i?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(r,CKEDITOR.POSITION_AFTER_END),r=null):n?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o=null):(r=this.splitElement(o,t||!1),o.is("ul","ol")||o.appendBogus())),{previousBlock:o,nextBlock:r,wasStartOfBlock:n,wasEndOfBlock:i,elementPath:a}):null},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var n=this.extractContents(!1,t||!1),i=e.clone(!1,t||!1);return n.appendTo(i),i.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),i},removeEmptyBlocksAtEnd:function(){function e(e){return function(i){return!(t(i)||n(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.isEmptyInlineRemoveable()||e.is("table")&&i.is("caption"))}}var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var n,i=this.createBookmark(),o=this[t?"endPath":"startPath"](),r=o.block||o.blockLimit;r&&!r.equals(o.root)&&!r.getFirst(e(r));)n=r.getParent(),this[t?"setEndAt":"setStartAt"](r,CKEDITOR.POSITION_AFTER_END),r.remove(1),r=n;this.moveToBookmark(i)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var n=t==CKEDITOR.START,i=this.clone();return i.collapse(n),i[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(i)).evaluator=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(i){return!(!n(i)&&!t(i))||!e&&r(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$removeEmpty)}}(n),i[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,t)),a.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(t=this.clone()).collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(t)).evaluator=n(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(t)),a.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(t=this.clone()).collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(t)).evaluator=n(),e.checkForward()},getPreviousNode:function(e,t,n){var i=this.clone();return i.collapse(1),i.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),(n=new CKEDITOR.dom.walker(i)).evaluator=e,n.guard=t,n.previous()},getNextNode:function(e,t,n){var i=this.clone();return i.collapse(),i.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(i)).evaluator=e,n.guard=t,n.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,n=this.endContainer;return!(e(t,n)&&e(n,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&a.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var i=e,o=n,r=void 0;i.type==CKEDITOR.NODE_ELEMENT&&i.isEditable(!1)&&(r=i[t?"getLast":"getFirst"](l)),o||r||(r=i[t?"getPrevious":"getNext"](l)),e=r}return!!n},moveToClosestEditablePosition:function(e,t){var n,i,o,r=0,a=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return e?(n=new CKEDITOR.dom.range(this.root)).moveToPosition(e,a[t?0:1]):n=this.clone(),e&&!e.is(CKEDITOR.dtd.$block)?r=1:(i=n[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(r=1,(o=i.type==CKEDITOR.NODE_ELEMENT)&&i.is(CKEDITOR.dtd.$block)&&"false"==i.getAttribute("contenteditable")?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&o&&i.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(i,0),n.collapse()):n.moveToPosition(i,a[t?1:0])),r&&this.moveToRange(n),!!r},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){if((e=this.clone()).optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return n(e)&&t(e)};var i=e.next();return e.reset(),i&&i.equals(e.previous())?i:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:i(),getPreviousEditableNode:i(1),_getTableElement:function(e){e=e||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var t=this.getTouchedStartNode(),n=this.getTouchedEndNode(),i=t.getAscendant("table",!0);return n=n.getAscendant("table",!0),i&&!this.root.contains(i)?null:this.getEnclosedNode()?this.getEnclosedNode().getAscendant(e,!0):i&&n&&(i.equals(n)||i.contains(n)||n.contains(i))?t.getAscendant(e,!0):null},scrollIntoView:function(){var e,t,n,i=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),o=this.clone();o.optimize(),(n=o.startContainer.type==CKEDITOR.NODE_TEXT)?(t=o.startContainer.getText(),e=o.startContainer.split(o.startOffset),i.insertAfter(o.startContainer)):o.insertNode(i),i.scrollIntoView(),n&&(o.startContainer.setText(t),e.remove()),i.remove()},getClientRects:function(){function e(e,t,i){var o;return t.collapsed?i.startContainer instanceof CKEDITOR.dom.element?(e=i.checkStartOfBlock(),o=new CKEDITOR.dom.text("​"),e?i.startContainer.append(o,!0):0===i.startOffset?o.insertBefore(i.startContainer.getFirst()):(i=i.startContainer.getChildren().getItem(i.startOffset-1),o.insertAfter(i)),t.setStart(o.$,0),t.setEnd(o.$,0),e=t.getClientRects(),o.remove()):i.startContainer instanceof CKEDITOR.dom.text&&(""===i.startContainer.getText()?(i.startContainer.setText("​"),e=t.getClientRects(),i.startContainer.setText("")):e=[n(i.createBookmark())]):e=[n(i.createBookmark())],e}function t(e,t,n){return e=CKEDITOR.tools.extend({},e),t&&(e=CKEDITOR.tools.getAbsoluteRectPosition(n.document.getWindow(),e)),!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e}function n(e){var t,n=e.startNode;return e=e.endNode,n.setText("​"),n.removeStyle("display"),e?(e.setText("​"),e.removeStyle("display"),t=[n.getClientRect(),e.getClientRect()],e.remove()):t=[n.getClientRect(),n.getClientRect()],n.remove(),{right:Math.max(t[0].right,t[1].right),bottom:Math.max(t[0].bottom,t[1].bottom),left:Math.min(t[0].left,t[1].left),top:Math.min(t[0].top,t[1].top),width:Math.abs(t[0].left-t[1].left),height:Math.max(t[0].bottom,t[1].bottom)-Math.min(t[0].top,t[1].top)}}return void 0!==this.document.getSelection?function(n){var i,o=this.root.getDocument().$.createRange();return o.setStart(this.startContainer.$,this.startOffset),o.setEnd(this.endContainer.$,this.endOffset),(i=function(e,t){var n,i,o,r=CKEDITOR.tools.array.map(e,(function(e){return e})),a=new CKEDITOR.dom.range(t.root);if(t.startContainer instanceof CKEDITOR.dom.element&&(i=0===t.startOffset&&t.startContainer.hasAttribute("data-widget")),t.endContainer instanceof CKEDITOR.dom.element&&(o=(o=t.endOffset===(t.endContainer.getChildCount?t.endContainer.getChildCount():t.endContainer.length))&&t.endContainer.hasAttribute("data-widget")),i&&a.setStart(t.startContainer.getParent(),t.startContainer.getIndex()),o&&a.setEnd(t.endContainer.getParent(),t.endContainer.getIndex()+1),(i||o)&&(t=a),a=t.cloneContents().find("[data-cke-widget-id]").toArray(),a=CKEDITOR.tools.array.map(a,(function(e){var n=t.root.editor;return e=e.getAttribute("data-cke-widget-id"),n.widgets.instances[e].element})))return a=CKEDITOR.tools.array.map(a,(function(e){var t;return t=e.getParent().hasClass("cke_widget_wrapper")?e.getParent():e,(n=this.root.getDocument().$.createRange()).setStart(t.getParent().$,t.getIndex()),n.setEnd(t.getParent().$,t.getIndex()+1),(t=n.getClientRects()).widgetRect=e.getClientRect(),t}),t),CKEDITOR.tools.array.forEach(a,(function(e){var t;!function n(i){CKEDITOR.tools.array.forEach(r,(function(n,o){var a=CKEDITOR.tools.objectCompare(e[i],n);a||(a=CKEDITOR.tools.objectCompare(e.widgetRect,n)),a&&(Array.prototype.splice.call(r,o,e.length-i,e.widgetRect),t=!0)})),t||(i<r.length-1?n(i+1):r.push(e.widgetRect))}(0)})),r}(i=o.getClientRects(),this)).length||(i=e(i,o,this)),CKEDITOR.tools.array.map(i,(function(e){return t(e,n,this)}),this)}:function(e){return[t(n(this.createBookmark()),e,this)]}}(),_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,t){var n,i,o,r,a=this.getCommonAncestor(),s=this.getBoundaryNodes(),l=[];if(a&&a.find)for(i=a.find(e),n=0;n<i.count();n++)a=i.getItem(n),(t||!a.isReadOnly())&&(o=a.getPosition(s.startNode)&CKEDITOR.POSITION_FOLLOWING||s.startNode.equals(a),r=a.getPosition(s.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||s.endNode.equals(a),o&&r&&l.push(a));return l}},CKEDITOR.dom.range.mergeRanges=function(e){return CKEDITOR.tools.array.reduce(e,(function(e,t){var n=e[e.length-1],i=!1;if((t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),n){var o=new CKEDITOR.dom.range(t.root),r=(i=new CKEDITOR.dom.walker(o),CKEDITOR.dom.walker.whitespaces());for(o.setStart(n.endContainer,n.endOffset),o.setEnd(t.startContainer,t.startOffset),o=i.next();r(o)||t.endContainer.equals(o);)o=i.next();i=!o}return i?n.setEnd(t.endContainer,t.endOffset):e.push(t),e}),[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){1>arguments.length||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e,n,i,o){e:{null==o&&(o=function(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}(i));for(var r;r=o.shift();)if(r.getDtd().p){o={element:r,remaining:o};break e}o=null}return o?(r=CKEDITOR.filter.instances[o.element.data("cke-filter")])&&!r.check(n)?t(e,n,i,o.remaining):((n=new CKEDITOR.dom.range(o.element)).selectNodeContents(o.element),(n=n.createIterator()).enlargeBr=e.enlargeBr,n.enforceRealBlocks=e.enforceRealBlocks,n.activeFilter=n.filter=r,e._.nestedEditable={element:o.element,container:i,remaining:o.remaining,iterator:n},1):0}function n(e,t,n){return!!t&&((e=e.clone()).collapse(!n),e.checkBoundaryOfElement(t,n?CKEDITOR.START:CKEDITOR.END))}var i=/^[\r\n\t ]+$/,o=CKEDITOR.dom.walker.bookmark(!1,!0),r=CKEDITOR.dom.walker.whitespaces(!0),a=function(e){return o(e)&&r(e)},s={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(e){var r,l,u,c,d;if(e=e||"p",this._.nestedEditable){if(r=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,r;if(this.activeFilter=this.filter,t(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var f=this.range.clone();l=f.startPath();var h=f.endPath(),g=!f.collapsed&&n(f,l.block),p=!f.collapsed&&n(f,h.block,1);f.shrink(CKEDITOR.SHRINK_ELEMENT,!0),g&&f.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END),p&&f.setEndAt(h.block,CKEDITOR.POSITION_AFTER_START),l=f.endContainer.hasAscendant("pre",!0)||f.startContainer.hasAscendant("pre",!0),f.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),f.collapsed||(l=new CKEDITOR.dom.walker(f.clone()),h=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=h,this._.nextNode=l.next(),(l=new CKEDITOR.dom.walker(f.clone())).evaluator=h,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,f.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((h=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),h.checkEndOfBlock()&&(h=new CKEDITOR.dom.elementPath(h.endContainer,h.root),this._.lastNode=(h.block||h.blockLimit).getNextSourceNode(!0))),this._.lastNode&&f.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=f.document.createText(""),this._.lastNode.insertAfter(l)),f=null),this._.started=1,l=f}for(h=this._.nextNode,f=this._.lastNode,this._.nextNode=null;h;){g=0,p=h.hasAscendant("pre");var m=h.type!=CKEDITOR.NODE_ELEMENT,v=0;if(m)h.type==CKEDITOR.NODE_TEXT&&i.test(h.getText())&&(m=0);else{var y=h.getName();if(CKEDITOR.dtd.$block[y]&&"false"==h.getAttribute("contenteditable")){t(this,e,r=h);break}if(h.isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){if("br"==y)m=1;else if(!l&&!h.getChildCount()&&"hr"!=y){r=h,u=h.equals(f);break}l&&(l.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),"br"!=y&&(this._.nextNode=h)),g=1}else{if(h.getFirst()){l||(l=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),h=h.getFirst();continue}m=1}}if(m&&!l&&(l=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),u=(!g||m)&&h.equals(f),l&&!g)for(;!h.getNext(a)&&!u;){if((y=h.getParent()).isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){g=1,m=0,u||y.equals(f),l.setEndAt(y,CKEDITOR.POSITION_BEFORE_END);break}m=1,u=(h=y).equals(f),v=1}if(m&&l.setEndAt(h,CKEDITOR.POSITION_AFTER_END),(u=!(h=this._getNextSourceNode(h,v,f)))||g&&l)break}if(!r){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;h=(r=new CKEDITOR.dom.elementPath(l.startContainer,l.root)).blockLimit,g={div:1,th:1,td:1},!(r=r.block)&&h&&!this.enforceRealBlocks&&g[h.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!h.equals(l.root)?r=h:!r||this.enforceRealBlocks&&r.is(s)?(r=this.range.document.createElement(e),l.extractContents().appendTo(r),r.trim(),l.insertNode(r),c=d=!0):"li"!=r.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(r=r.clone(!1),l.extractContents().appendTo(r),r.trim(),c=!(d=l.splitBlock()).wasStartOfBlock,d=!d.wasEndOfBlock,l.insertNode(r)):u||(this._.nextNode=r.equals(f)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,1,f))}return c&&(c=r.getPrevious())&&c.type==CKEDITOR.NODE_ELEMENT&&("br"==c.getName()?c.remove():c.getLast()&&"br"==c.getLast().$.nodeName.toLowerCase()&&c.getLast().remove()),d&&(c=r.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&"br"==c.getName()&&(!CKEDITOR.env.needsBrFiller||c.getPrevious(o)||c.getNext(o))&&c.remove(),this._.nextNode||(this._.nextNode=u||r.equals(f)||!f?null:this._getNextSourceNode(r,1,f)),r},_getNextSourceNode:function(e,t,n){function i(e){return!(e.equals(n)||e.equals(r))}var r=this.range.root;for(e=e.getNextSourceNode(t,null,i);!o(e);)e=e.getNextSourceNode(t,null,i);return e}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){var n;this.uiItems=[],this.exec=function(n){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&e.focus(),!1===this.fire("exec")||!1!==t.exec.call(this,e,n))},this.refresh=function(e,n){return!(this.readOnly||!e.readOnly)||(this.context&&!n.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),!1===this.fire("refresh",{editor:e,path:n})||t.refresh&&!1!==t.refresh.apply(this,arguments)))},this.checkAllowed=function(t){return t||"boolean"!=typeof n?n=e.activeFilter.checkFeature(this):n},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return!(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()||(this.previousState=this.state,this.state=e,this.fire("state"),0))},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,t,n,i,o){var r,s,l;for(r in e=[],t){s="boolean"==typeof(s=t[r])?{}:"function"==typeof s?{match:s}:I(s),"$"!=r.charAt(0)&&(s.elements=r),n&&(s.featureName=n.toLowerCase());var u=s;u.elements=a(u.elements,/\s+/)||null,u.propertiesOnly=u.propertiesOnly||!0===u.elements;var c=/\s*,\s*/,d=void 0;for(d in R){u[d]=a(u[d],c)||null;var f=u,h=k[d],g=a(u[k[d]],c),m=u[d],v=[],y=!0,b=void 0;for(b in g?y=!1:g={},m)"!"==b.charAt(0)&&(b=b.slice(1),v.push(b),g[b]=!0,y=!1);for(;b=v.pop();)m[b]=m["!"+b],delete m["!"+b];f[h]=!y&&g||null}u.match=u.match||null,i.push(s),e.push(s)}for(t=o.elements,o=o.generic,n=0,i=e.length;n<i;++n){for(c in s=!0===(r=I(e[n])).classes||!0===r.styles||!0===r.attributes,u=r,d=h=c=void 0,R)u[c]=p(u[c]);for(d in f=!0,k){for(m in g=[],m=void 0,h=u[c=k[d]])-1<m.indexOf("*")?g.push(new RegExp("^"+m.replace(/\*/g,".*")+"$")):g.push(m);(h=g).length&&(u[c]=h,f=!1)}if(u.nothingRequired=f,u.noProperties=!(u.attributes||u.classes||u.styles),!0===r.elements||null===r.elements)o[s?"unshift":"push"](r);else for(l in u=r.elements,delete r.elements,u)t[l]?t[l][s?"unshift":"push"](r):t[l]=[r]}}function t(e,t,i,o){if((!e.match||e.match(t))&&(o||function(e,t){if(e.nothingRequired)return!0;var n,i,o,r;if(o=e.requiredClasses)for(r=t.classes,n=0;n<o.length;++n)if("string"==typeof(i=o[n])){if(-1==CKEDITOR.tools.indexOf(r,i))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(r,i))return!1;return s(t.styles,e.requiredStyles)&&s(t.attributes,e.requiredAttributes)}(e,t))&&(e.propertiesOnly||(i.valid=!0),i.allAttributes||(i.allAttributes=n(e.attributes,t.attributes,i.validAttributes)),i.allStyles||(i.allStyles=n(e.styles,t.styles,i.validStyles)),!i.allClasses)){if(t=t.classes,o=i.validClasses,e=e.classes)if(!0===e)e=!0;else{for(var r,a=0,l=t.length;a<l;++a)o[r=t[a]]||(o[r]=e(r));e=!1}else e=!1;i.allClasses=e}}function n(e,t,n){if(!e)return!1;if(!0===e)return!0;for(var i in t)n[i]||(n[i]=e(i));return!1}function i(e,t,n){if(!e.match||e.match(t)){if(e.noProperties)return!1;if(n.hadInvalidAttribute=o(e.attributes,t.attributes)||n.hadInvalidAttribute,n.hadInvalidStyle=o(e.styles,t.styles)||n.hadInvalidStyle,t=t.classes,e=e.classes){for(var i=!1,r=!0===e,a=t.length;a--;)(r||e(t[a]))&&(t.splice(a,1),i=!0);e=i}else e=!1;n.hadInvalidClass=e||n.hadInvalidClass}}function o(e,t){if(!e)return!1;var n,i=!1,o=!0===e;for(n in t)(o||e(n))&&(delete t[n],i=!0);return i}function r(e,t,n){return!(e.disabled||e.customConfig&&!n||!t||(e._.cachedChecks={},0))}function a(e,t){if(!e)return!1;if(!0===e)return e;if("string"==typeof e)return"*"==(e=D(e))||CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return!!e.length&&CKEDITOR.tools.convertArrayToObject(e);var n,i={},o=0;for(n in e)i[n]=e[n],o++;return!!o&&i}function s(e,t){if(!t)return!0;for(var n,i=0;i<t.length;++i)if("string"==typeof(n=t[i])){if(!(n in e))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,n))return!1;return!0}function l(e){if(!e)return{};e=e.split(/\s*,\s*/).sort();for(var t={};e.length;)t[e.shift()]="cke-test";return t}function u(e){var t,n,i,o,r={},a=1;for(e=D(e);t=e.match(S);)(n=t[2])?(i=c(n,"styles"),o=c(n,"attrs"),n=c(n,"classes")):i=o=n=null,r["$"+a++]={elements:t[1],classes:n,styles:i,attributes:o},e=e.slice(t[0].length);return r}function c(e,t){var n=e.match(A[t]);return n?D(n[1]):null}function d(e){var t=e.styleBackup=e.attributes.style,n=e.classBackup=e.attributes.class;e.styles||(e.styles=CKEDITOR.tools.parseCssText(t||"",1)),e.classes||(e.classes=n?n.split(/\s+/):[])}function f(e,n,o,r){var a,s=0;if(r.toHtml&&(n.name=n.name.replace(N,"$1")),r.doCallbacks&&e.elementCallbacks){e:{for(var l,u=0,c=(a=e.elementCallbacks).length;u<c;++u)if(l=a[u](n)){a=l;break e}a=void 0}if(a)return a}if(r.doTransform&&(a=e._.transformations[n.name])){for(d(n),u=0;u<a.length;++u)b(e,n,a[u]);h(n)}if(r.doFilter){e:{e=(c=e._).allowedRules.elements[u=n.name],a=c.allowedRules.generic,u=c.disallowedRules.elements[u],c=c.disallowedRules.generic,l=r.skipRequired;var f,p,m={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(e||a){if(d(n),u)for(f=0,p=u.length;f<p;++f)if(!1===i(u[f],n,m)){e=null;break e}if(c)for(f=0,p=c.length;f<p;++f)i(c[f],n,m);if(e)for(f=0,p=e.length;f<p;++f)t(e[f],n,m,l);if(a)for(f=0,p=a.length;f<p;++f)t(a[f],n,m,l);e=m}else e=null}if(!e||!e.valid)return o.push(n),1;p=e.validAttributes;var v=e.validStyles;a=e.validClasses;var y=n.styles;c=n.classes,l=n.classBackup;var T,C,E=n.styleBackup,_=[],x=(m=[],/^data-cke-/);if(f=!1,delete(u=n.attributes).style,delete u.class,delete n.classBackup,delete n.styleBackup,!e.allAttributes)for(T in u)p[T]||x.test(T)&&(T==(C=T.replace(/^data-cke-saved-/,""))||p[C])||(delete u[T],f=!0);if(!e.allStyles||e.hadInvalidStyle){for(T in y)e.allStyles||v[T]?_.push(T+":"+y[T]):f=!0;_.length&&(u.style=_.sort().join("; "))}else E&&(u.style=E);if(!e.allClasses||e.hadInvalidClass){for(T=0;T<c.length;++T)(e.allClasses||a[c[T]])&&m.push(c[T]);m.length&&(u.class=m.sort().join(" ")),l&&m.length<l.split(/\s+/).length&&(f=!0)}else l&&(u.class=l);if(f&&(s=1),!r.skipFinalValidation&&!g(n))return o.push(n),1}return r.toHtml&&(n.name=n.name.replace(M,"cke:$1")),s}function h(e){var t,n=e.attributes;delete n.style,delete n.class,(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(n.style=t),e.classes.length&&(n.class=e.classes.sort().join(" "))}function g(e){switch(e.name){case"a":if(!(e.children.length||e.attributes.name||e.attributes.id))return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function p(e){if(!e)return!1;if(!0===e)return!0;var t=function(e){var t,n=[];for(t in e)-1<t.indexOf("*")&&n.push(t.replace(/\*/g,".*"));return n.length?new RegExp("^(?:"+n.join("|")+")$"):null}(e);return function(n){return n in e||t&&n.match(t)}}function m(){return new CKEDITOR.htmlParser.element("br")}function v(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||x.$block[e.name])}function y(e,t,n){if(x.$empty[i=e.name]||!e.children.length)"hr"==i&&"br"==t?e.replaceWith(m()):(e.parent&&n.push({check:"it",el:e.parent}),e.remove());else if(x.$block[i]||"tr"==i)if("br"==t)e.previous&&!v(e.previous)&&(t=m()).insertBefore(e),e.next&&!v(e.next)&&(t=m()).insertAfter(e),e.replaceWithChildren();else{var i,o;e:{o=x[t];for(var r,a=0,s=(i=e.children).length;a<s;++a)if((r=i[a]).type==CKEDITOR.NODE_ELEMENT&&!o[r.name]){o=!1;break e}o=!0}if(o)e.name=t,e.attributes={},n.push({check:"parent-down",el:e});else{var l,u;for(a=(o=e.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==o.name,s=i.length;0<s;)r=i[--s],a&&(r.type==CKEDITOR.NODE_TEXT||r.type==CKEDITOR.NODE_ELEMENT&&x.$inline[r.name])?(l||((l=new CKEDITOR.htmlParser.element(t)).insertAfter(e),n.push({check:"parent-down",el:l})),l.add(r,0)):(l=null,u=x[o.name]||x.span,r.insertAfter(e),o.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||r.type!=CKEDITOR.NODE_ELEMENT||u[r.name]||n.push({check:"el-up",el:r}));e.remove()}}else i in{style:1,script:1}?e.remove():(e.parent&&n.push({check:"it",el:e.parent}),e.replaceWithChildren())}function b(e,t,n){var i,o;for(i=0;i<n.length;++i)if(!((o=n[i]).check&&!e.check(o.check,!1)||o.left&&!o.left(t))){o.right(t,O);break}}function T(e,t){var n,i,o,r,a=t.getDefinition(),s=a.attributes,l=a.styles;if(e.name!=a.element)return!1;for(n in s)if("class"==n){for(a=s[n].split(/\s+/),o=e.classes.join("|");r=a.pop();)if(-1==o.indexOf(r))return!1}else if(e.attributes[n]!=s[n])return!1;for(i in l)if(e.styles[i]!=l[i])return!1;return!0}function C(e,t){var n,i;return"string"==typeof e?n=e:e instanceof CKEDITOR.style?i=e:(n=e[0],i=e[1]),[{element:n,left:i,right:function(e,n){n.transform(e,t)}}]}function E(e){return function(t){return T(t,e)}}function _(e){return function(t,n){n[e](t)}}var x=CKEDITOR.dtd,I=CKEDITOR.tools.copy,D=CKEDITOR.tools.trim,w=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(e,t){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var n=this.editor=e instanceof CKEDITOR.editor?e:null;if(n&&!t){this.customConfig=!0;var i=n.config.allowedContent;!0===i?this.disabled=!0:(i||(this.customConfig=!1),this.allow(i,"config",1),this.allow(n.config.extraAllowedContent,"extra",1),this.allow(w[n.enterMode]+" "+w[n.shiftEnterMode],"default",1),this.disallow(n.config.disallowedContent))}else this.customConfig=!1,this.allow(t||e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,n,i){if(!r(this,t,i))return!1;var o,a;if("string"==typeof t)t=u(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),n,i);i=(o=t.getDefinition()).attributes,(t={})[o.element]=o={styles:o.styles,requiredStyles:o.styles&&CKEDITOR.tools.object.keys(o.styles)},i&&(i=I(i),o.classes=i.class?i.class.split(/\s+/):null,o.requiredClasses=o.classes,delete i.class,o.attributes=i,o.requiredAttributes=i&&CKEDITOR.tools.object.keys(i))}else if(CKEDITOR.tools.isArray(t)){for(o=0;o<t.length;++o)a=this.allow(t[o],n,i);return a}return e(this,t,n,this.allowedContent,this._.allowedRules),!0},applyTo:function(e,t,n,i){if(this.disabled)return!1;var o,r,a,s=this,l=[],u=this.editor&&this.editor.config.protectedSource,c=!1,d={doFilter:!n,doTransform:!0,doCallbacks:!0,toHtml:t};for(e.forEach((function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;if(!t||"span"!=e.name||!~CKEDITOR.tools.object.keys(e.attributes).join("|").indexOf("data-cke-"))if(1&(o=f(s,e,l,d)))c=!0;else if(2&o)return!1}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;e:{var i,r,a,h=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));if(n=[],u)for(r=0;r<u.length;++r)if((a=h.match(u[r]))&&a[0].length==h.length){n=!0;break e}1==(h=CKEDITOR.htmlParser.fragment.fromHtml(h)).children.length&&(i=h.children[0]).type==CKEDITOR.NODE_ELEMENT&&f(s,i,n,d),n=!n.length}n||l.push(e)}}),null,!0),l.length&&(c=!0),e=[],i=w[i||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];n=l.pop();)n.type==CKEDITOR.NODE_ELEMENT?y(n,i,e):n.remove();for(;r=e.pop();)if((n=r.el).parent)switch(a=x[n.parent.name]||x.span,r.check){case"it":x.$removeEmpty[n.name]&&!n.children.length?y(n,i,e):g(n)||y(n,i,e);break;case"el-up":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||a[n.name]||y(n,i,e);break;case"parent-down":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||a[n.name]||y(n.parent,i,e)}return c},checkFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return!!r(this,t,!0)&&("string"==typeof t&&(t=u(t)),e(this,t,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(e){if(!this.disabled&&e){var t,n,i,o=[];for(t=0;t<e.length&&!i;++t)("string"==typeof(n=e[t])||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(t=0;t<e.length;++t)o.push(C(e[t],i));this.addTransformations(o)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(e)},addFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),!e.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(e.requiredContent))},addTransformations:function(e){var t,n;if(!this.disabled&&e){var i,o=this._.transformations;for(i=0;i<e.length;++i){t=e[i];var r=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0;for(n=[],a=0;a<t.length;++a)"string"==typeof(s=t[a])?(l=(s=s.split(/\s*:\s*/))[0],u=null,c=s[1]):(l=s.check,u=s.left,c=s.right),r||(r=(r=s).element?r.element:l?l.match(/^([a-z0-9]+)/i)[0]:r.left.getDefinition().element),u instanceof CKEDITOR.style&&(u=E(u)),n.push({check:l==r?null:l,left:u,right:"string"==typeof c?_(c):c});o[t=r]||(o[t]=[]),o[t].push(n)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var i=e.length;i--;)if(this.check(e[i],t,n))return!0;return!1}var o,r;if("string"==typeof e){if((r=e+"<"+(!1===t?"0":"1")+(n?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[r];var a=(o=u(e).$1).styles;i=o.classes,o.name=o.elements,o.classes=i=i?i.split(/\s*,\s*/):[],o.styles=l(a),o.attributes=l(o.attributes),o.children=[],i.length&&(o.attributes.class=i.join(" ")),a&&(o.attributes.style=CKEDITOR.tools.writeCssText(o.styles))}else i=(o=e.getDefinition()).attributes||{},(a=o.styles)&&!CKEDITOR.tools.isEmpty(a)?(a=I(a),i.style=CKEDITOR.tools.writeCssText(a,!0)):a={},o={name:o.element,attributes:i,classes:i.class?i.class.split(/\s+/):[],styles:a,children:[]};a=CKEDITOR.tools.clone(o);var s,c=[];if(!1!==t&&(s=this._.transformations[o.name])){for(i=0;i<s.length;++i)b(this,o,s[i]);h(o)}return f(this,a,c,{doFilter:!0,doTransform:!1!==t,skipRequired:!n,skipFinalValidation:!n}),0<c.length?n=!1:((t=o.attributes.class)&&(o.attributes.class=o.attributes.class.split(" ").sort().join(" ")),n=CKEDITOR.tools.objectCompare(o.attributes,a.attributes,!0),t&&(o.attributes.class=t)),"string"==typeof e&&(this._.cachedChecks[r]=n),n},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,i){var o,r=e.slice();if(this.check(w[n]))return n;for(i||(r=r.reverse());o=r.pop();)if(this.check(o))return t[o];return CKEDITOR.ENTER_BR}}(),clone:function(){var e=new CKEDITOR.filter,t=CKEDITOR.tools.clone;return e.allowedContent=t(this.allowedContent),e._.allowedRules=t(this._.allowedRules),e.disallowedContent=t(this.disallowedContent),e._.disallowedRules=t(this._.disallowedRules),e._.transformations=t(this._.transformations),e.disabled=this.disabled,e.editor=this.editor,e},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var O,R={styles:1,attributes:1,classes:1},k={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},S=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,A={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},N=/^cke:(object|embed|param)$/,M=/^(object|embed|param)$/;O=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,n){if(!((n=n||t)in e.styles)){var i=e.attributes[t];i&&(/^\d+$/.test(i)&&(i+="px"),e.styles[n]=i)}delete e.attributes[t]},lengthToAttribute:function(e,t,n){if(!((n=n||t)in e.attributes)){var i=e.styles[t],o=i&&i.match(/^(\d+)(?:\.\d*)?px$/);o?e.attributes[n]=o[1]:"cke-test"==i&&(e.attributes[n]="cke-test")}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;"left"!=t&&"right"!=t||(e.styles.float=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles.float;"left"!=t&&"right"!=t||(e.attributes.align=t)}delete e.styles.float},splitBorderShorthand:function(e){if(e.styles.border){var t=CKEDITOR.tools.style.parse.border(e.styles.border);t.color&&(e.styles["border-color"]=t.color),t.style&&(e.styles["border-style"]=t.style),t.width&&(e.styles["border-width"]=t.width),delete e.styles.border}},listTypeToStyle:function(e){if(e.attributes.type)switch(e.attributes.type){case"a":e.styles["list-style-type"]="lower-alpha";break;case"A":e.styles["list-style-type"]="upper-alpha";break;case"i":e.styles["list-style-type"]="lower-roman";break;case"I":e.styles["list-style-type"]="upper-roman";break;case"1":e.styles["list-style-type"]="decimal";break;default:e.styles["list-style-type"]=e.attributes.type}},splitMarginShorthand:function(e){function t(t){e.styles["margin-top"]=n[t[0]],e.styles["margin-right"]=n[t[1]],e.styles["margin-bottom"]=n[t[2]],e.styles["margin-left"]=n[t[3]]}if(e.styles.margin){var n=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}delete e.styles.margin}},matchesStyle:T,transform:function(e,t){if("string"==typeof t)e.name=t;else{var n,i,o,r,a=t.getDefinition(),s=a.styles,l=a.attributes;for(n in e.name=a.element,l)if("class"==n)for(a=e.classes.join("|"),o=l[n].split(/\s+/);r=o.pop();)-1==a.indexOf(r)&&e.classes.push(r);else e.attributes[n]=l[n];for(i in s)e.styles[i]=s[i]}}}}(),CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;e||!n?t.call(this):this._.timer=CKEDITOR.tools.setTimeout((function(){delete this._.timer,t.call(this)}),n,this)}},add:function(e,t){if(!(n=e.getCustomData("focusmanager"))||n!=this){n&&n.remove(e);var n="focus",i="blur";t&&(CKEDITOR.env.ie?(n="focusin",i="focusout"):CKEDITOR.event.useCapture=1);var o={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,o.focus,this),e.on(i,o.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",o)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}},CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){var n=(t=t.data).getKeystroke(),i=this.keystrokes[n],o=this._.editor;return(e=!1===o.fire("key",{keyCode:n,domEvent:t}))||(i&&(e=!1!==o.execCommand(i,{from:"keystrokeHandler"})),e||(e=!!this.blockedKeystrokes[n])),e&&t.preventDefault(!0),!e},n=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&e.on("keypress",n,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e));var i=this;t=function(){i[e].dir=i.rtl[e]?"rtl":"ltr",n(e,i[e])},this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),t,this)},detect:function(e,t){var n,i=this.languages,o=(n=(t=t||navigator.userLanguage||navigator.language||e).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1];return i[o+"-"+(n=n[2])]?o=o+"-"+n:i[o]||(o=null),CKEDITOR.lang.detect=o?function(){return o}:function(e){return e},o||e}},CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(n,i,o,r){var a="string"==typeof n;a&&(n=[n]),o||(o=CKEDITOR);var s=n.length,l=[],u=[],c=function(e){i&&(a?i.call(o,e):i.call(o,l,u))};if(0===s)c(!0);else{var d=function(e,t){(t?l:u).push(e),0>=--s&&(r&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),c(t))},f=function(n,i){e[n]=1;var o=t[n];delete t[n];for(var r=0;r<o.length;r++)o[r](n,i)},h=function(n){if(e[n])d(n,!0);else{var o=t[n]||(t[n]=[]);if(o.push(d),!(1<o.length)){var r=new CKEDITOR.dom.element("script");r.setAttributes({type:"text/javascript",src:n}),i&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?r.$.onreadystatechange=function(){"loaded"!=r.$.readyState&&"complete"!=r.$.readyState||(r.$.onreadystatechange=null,f(n,!0))}:(r.$.onload=function(){setTimeout((function(){r.$.onload=null,r.$.onerror=null,f(n,!0)}),0)},r.$.onerror=function(){r.$.onload=null,r.$.onerror=null,f(n,!1)})),r.appendTo(CKEDITOR.document.getHead())}}};r&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var g=0;g<s;g++)h(n[g])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(n,i){var o=this;t.push({scriptUrl:n,callback:function(){i&&i.apply(this,arguments),t.shift(),e.call(o)}}),1==t.length&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var n=this.registered[e]=t||{};return n.name=e,n.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,n){n||(t=t.replace(/[^\/]+$/,(function(e){return n=e,""}))),n=n||this.fileName+".js",e=e.split(",");for(var i=0;i<e.length;i++)this.externals[e[i]]={dir:t,file:n}},load:function(e,t,n){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var i=this.loaded,o=this.registered,r=[],a={},s={},l=0;l<e.length;l++){var u=e[l];if(u)if(i[u]||o[u])s[u]=this.get(u);else{var c=this.getFilePath(u);r.push(c),c in a||(a[c]=[]),a[c].push(u)}}CKEDITOR.scriptLoader.load(r,(function(e,o){if(o.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+a[o[0]].join(",")+'" was not found at "'+o[0]+'".');for(var r=0;r<e.length;r++)for(var l=a[e[r]],u=0;u<l.length;u++){var c=l[u];s[c]=this.get(c),i[c]=1}t.call(n,s)}),this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,(function(e){var t={};return function(n,i,o){var r={},a=function(n){e.call(this,n,(function(e){CKEDITOR.tools.extend(r,e);var n,s=[];for(n in e){var l=e[n],u=l&&l.requires;if(!t[n]){if(l.icons)for(var c=l.icons.split(","),d=c.length;d--;)CKEDITOR.skin.addIcon(c[d],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+c[d]+".png");l.isSupportedEnvironment=l.isSupportedEnvironment||function(){return!0},t[n]=1}if(u)for(u.split&&(u=u.split(",")),l=0;l<u.length;l++)r[u[l]]||s.push(u[l])}if(s.length)a.call(this,s);else{for(n in r)(l=r[n]).onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete r[n],l.onLoad._called=1);i&&i.call(o||window,r)}}),this)};a.call(this,n)}})),CKEDITOR.plugins.setLang=function(e,t,n){var i=this.get(e);e=i.langEntries||(i.langEntries={}),(i=i.lang||(i.lang=[])).split&&(i=i.split(",")),-1==CKEDITOR.tools.indexOf(i,t)&&i.push(t),e[t]=n},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var i=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(i,n)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],n=t&&this._.handlers[t.type],i=t&&t.command&&this.editor.getCommand(t.command);return n=n&&n.create.apply(this,t.args),this.instances[e]=n,i&&i.uiItems.push(n),n&&!n.type&&(n.type=t.type),n},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,n,o){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==n){if(!(n instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!o)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&o==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function(e,t){return t==CKEDITOR.ELEMENT_MODE_INLINE?e.is(CKEDITOR.dtd.$editable)||e.is("textarea"):t==CKEDITOR.ELEMENT_MODE_REPLACE?!e.is(CKEDITOR.dtd.$nonBodyContent):1}(n,o))throw Error('The specified element mode is not supported on element: "'+n.getName()+'".');this.element=n,this.elementMode=o,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(n.getId()||n.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var e="editor"+ ++r}while(CKEDITOR.instances[e]);return e}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",t),this.on("selectionChange",(function(e){i(this,e.data.path)})),this.on("activeFilterChange",(function(){i(this,this.elementPath(),!0)})),this.on("mode",t),CKEDITOR.dom.selection.setupEditorOptimization(this),this.on("instanceReady",(function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var e=this.createRange();e.selectNodeContents(this.editable()),e.shrink(CKEDITOR.SHRINK_ELEMENT,!0),e.collapse(),this.getSelection().selectRanges([e])}this.focus()}})),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout((function(){this.isDestroyed()||this.isDetached()||function(e,t){e.on("customConfigLoaded",(function(){if(t){if(t.on)for(var n in t.on)e.on(n,t.on[n]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}e.readOnly=!!(n=e.config).readOnly||(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p),e.tabIndex=n.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:n.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:n.shiftEnterMode,n.skin&&(CKEDITOR.skinName=n.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),function(e){CKEDITOR.skin.loadPart("editor",(function(){!function(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,(function(t,n){var i=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(n),e.title="string"==typeof i||!1===i?i:[e.lang.editor,e.name].join(", "),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),function(e){e.getStylesSet((function(t){e.once("loaded",(function(){e.fire("stylesSet",{styles:t})}),null,null,1),function(e){function t(e){return e?(CKEDITOR.tools.isArray(e)&&(e=e.join(",")),e.replace(/\s/g,"")):""}var n=e.config,i=t(n.plugins),o=t(n.extraPlugins),r=t(n.removePlugins);if(o){var a=new RegExp("(?:^|,)(?:"+o.replace(/,/g,"|")+")(?=,|$)","g");i=(i=i.replace(a,""))+","+o}if(r){var s=new RegExp("(?:^|,)(?:"+r.replace(/,/g,"|")+")(?=,|$)","g");i=i.replace(s,"")}CKEDITOR.env.air&&(i+=",adobeair"),CKEDITOR.plugins.load(i.split(","),(function(t){var i=[],o=[],r=[];for(var a in e.plugins=CKEDITOR.tools.extend({},e.plugins,t),t){var l,u=t[a],c=u.lang,d=null,f=u.requires;if(CKEDITOR.tools.isArray(f)&&(f=f.join(",")),f&&(l=f.match(s)))for(;f=l.pop();)CKEDITOR.error("editor-plugin-required",{plugin:f.replace(",",""),requiredBy:a});c&&!e.lang[a]&&(c.split&&(c=c.split(",")),d=0<=CKEDITOR.tools.indexOf(c,e.langCode)?e.langCode:(d=e.langCode.replace(/-.*/,""))!=e.langCode&&0<=CKEDITOR.tools.indexOf(c,d)?d:0<=CKEDITOR.tools.indexOf(c,"en")?"en":c[0],u.langEntries&&u.langEntries[d]?(e.lang[a]=u.langEntries[d],d=null):r.push(CKEDITOR.getUrl(u.path+"lang/"+d+".js"))),o.push(d),i.push(u)}CKEDITOR.scriptLoader.load(r,(function(){if(!e.isDestroyed()&&!e.isDetached()){for(var t=["beforeInit","init","afterInit"],r=0;r<t.length;r++)for(var a=0;a<i.length;a++){var s=i[a];0===r&&o[a]&&s.lang&&s.langEntries&&(e.lang[s.name]=s.langEntries[o[a]]),s[t[r]]&&s[t[r]](e)}for(e.fireOnce("pluginsLoaded"),n.keystrokes&&e.setKeystroke(e.config.keystrokes),a=0;a<e.config.blockedKeystrokes.length;a++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[a]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)}}))}))}(e)}))}(e)}))}(e)}))}(e)})),t&&null!=t.customConfig&&(e.config.customConfig=t.customConfig),function e(t){if(!(n=t.config.customConfig))return!1;var n=CKEDITOR.getUrl(n),i=a[n]||(a[n]={});return i.fn?(i.fn.call(t,t.config),CKEDITOR.getUrl(t.config.customConfig)!=n&&e(t)||t.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(n,(function(){i.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},e(t)})),!0}(e)||e.fireOnce("customConfigLoaded")}(this,e)}),0,this)}function t(){var e,t=this.commands;for(e in t)n(this,t[e])}function n(e,t){t[t.startDisabled||e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function i(e,t,n){if(t){var i,o,r=e.commands;for(o in r)i=r[o],(n||i.contextSensitive)&&i.refresh(e,t)}}function o(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var r=0,a={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(this[i])return CKEDITOR.warn("editor-plugin-conflict",{plugin:e,replacedWith:i}),!0}return!1}},addCommand:function(e,t){t.name=e.toLowerCase();var i=t instanceof CKEDITOR.command?t:new CKEDITOR.command(this,t);return this.mode&&n(this,i),this.commands[e]=i},_attachToForm:function(){function e(e){t.updateElement(),t._.required&&!n.getValue()&&!1===t.fire("required")&&e.data.preventDefault()}var t=this,n=t.element,i=new CKEDITOR.dom.element(n.$.form);n.is("textarea")&&i&&(i.on("submit",e),function(e){return!!(e&&e.call&&e.apply)}(i.$.submit)&&(i.$.submit=CKEDITOR.tools.override(i.$.submit,(function(t){return function(){e(),t.apply?t.apply(this):t()}}))),t.on("destroy",(function(){i.removeListener("submit",e)})))},destroy:function(e){var t=CKEDITOR.filter.instances,n=this;this.fire("beforeDestroy"),!e&&o.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(t),(function(e){n===(e=t[e]).editor&&e.destroy()})),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){if(!(e=this.getSelection()))return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),i={name:e,commandData:t||{},command:n};return!(!n||n.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",i)||(i.returnValue=n.exec(i.commandData),n.async||!1===this.fire("afterCommandExec",i)))&&i.returnValue},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");return"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,n){var i=!0,o=t;t&&"object"==typeof t&&(n=t.internal,o=t.callback,i=!t.noSnapshot),!n&&i&&this.fire("saveSnapshot"),!o&&n||this.once("dataReady",(function(e){!n&&i&&this.fire("saveSnapshot"),o&&o.call(e.editor)})),e={dataValue:e},!n&&this.fire("setData",e),this._.data=e.dataValue,!n&&this.fire("afterSetData",e)},setReadOnly:function(e){this.readOnly!=(e=null==e||e)&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t,n){this.fire("insertHtml",{dataValue:e,mode:t,range:n})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},getSelectedHtml:function(e){var t=this.editable(),n=(n=this.getSelection())&&n.getRanges();return t&&n&&0!==n.length?(t=function(e,t){function n(e){var t=e.startContainer,n=e.endContainer;return!(!t.is||!(t.is("tr")||t.is("td")&&t.equals(n)&&e.endOffset===t.getChildCount()))}function i(e){var t=e.startContainer;return t.is("tr")?e.cloneContents():t.clone(!0)}for(var o,r,a,s=new CKEDITOR.dom.documentFragment,l=0;l<e.length;l++){var u=e[l],c=u.startContainer.getAscendant("tr",!0);n(u)?(o||((o=c.getAscendant("table").clone()).append(c.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),s.append(o),o=o.findOne("thead, tbody, tfoot")),r&&r.equals(c)||(r=c,a=c.clone(),o.append(a)),a.append(i(u))):s.append(u.cloneContents())}return o?s:t.getHtmlFromRange(e[0])}(n,t),e?t.getHtml():t):null},extractSelectedHtml:function(e,t){var n,i=this.editable(),o=this.getSelection().getRanges(),r=new CKEDITOR.dom.documentFragment;if(!i||0===o.length)return null;for(n=0;n<o.length;n++)r.append(i.extractHtmlFromRange(o[n],t));return t||this.getSelection().selectRanges([o[0]]),e?r.getHtml():r},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return o.call(this)},setKeystroke:function(){for(var e,t,n=this.keystrokeHandler.keystrokes,i=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],o=i.length;o--;)e=i[o],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?n[e]=t:delete n[e]},getCommandKeystroke:function(e,t){var n="string"==typeof e?this.getCommand(e):e,i=[];if(n){var o=CKEDITOR.tools.object.findKey(this.commands,n),r=this.keystrokeHandler.keystrokes;if(n.fakeKeystroke)i.push(n.fakeKeystroke);else for(var a in r)r[a]===o&&i.push(a)}return t?i:i[0]||null},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,this.activeEnterMode==e&&this.activeShiftEnterMode==t||(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))},showNotification:function(e){alert(e)},isDetached:function(){return!!this.container&&this.container.isDetached()},isDestroyed:function(){return"destroyed"===this.status}}),CKEDITOR.editor._getEditorElement=function(e){if(!CKEDITOR.env.isCompatible)return null;var t=CKEDITOR.dom.element.get(e);return t?t.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:t.getEditor().name}),null):t:(CKEDITOR.error("editor-incorrect-element",{element:e}),null)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var i,o,r,a=0;i=this._.htmlPartsRegex.exec(n);)if((o=i.index)>a&&(a=n.substring(a,o),r?r.push(a):this.onText(a)),a=this._.htmlPartsRegex.lastIndex,!(o=i[1])||(o=o.toLowerCase(),r&&CKEDITOR.dtd.$cdata[o]&&(this.onCDATA(r.join("")),r=null),r))if(r)r.push(i[0]);else if(o=i[3]){if(o=o.toLowerCase(),!/="/.test(o)){var s,l={},u=i[4];if(i=!!i[5],u)for(;s=e.exec(u);){var c=s[1].toLowerCase();l[c]=!(s=s[2]||s[3]||s[4]||"")&&t[c]?c:CKEDITOR.tools.htmlDecodeAttr(s)}this.onTagOpen(o,l,i),!r&&CKEDITOR.dtd.$cdata[o]&&(r=[])}}else(o=i[2])&&this.onComment(o);else this.onTagClose(o);n.length>a&&this.onText(n.substring(a,n.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){this._.output.push(t?" />":">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("\x3c!--",e,"--\x3e")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),n=this.previous,i=this.next;n&&(n.next=i),i&&(i.previous=n),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,n=CKEDITOR.tools.indexOf(t,this),i=e.previous=this.previous,o=e.next=this.next;i&&(i.next=e),o&&(o.previous=e),t[n]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e),i=e.next;t.splice(n+1,0,this),this.next=e.next,this.previous=e,e.next=this,i&&(i.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var t="function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e},n=this.parent;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(t(n))return n;n=n.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}},CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;return(n=e.onComment(t,n,this))?"string"!=typeof n?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return!e.attributes["data-cke-survive"]&&("a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name])}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),n={ol:1,ul:1},i=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),o={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(r,a,s){function l(e){var t;if(0<m.length)for(var n=0;n<m.length;n++){var i=m[n],o=i.name,r=CKEDITOR.dtd[o],a=y.name&&CKEDITOR.dtd[y.name];a&&!a[o]||e&&r&&!r[e]&&CKEDITOR.dtd[e]?o==y.name&&(d(y,y.parent,1),n--):(t||(u(),t=1),(i=i.clone()).parent=y,y=i,m.splice(n,1),n--)}}function u(){for(;v.length;)d(v.shift(),y)}function c(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,n=e.children.length,i=e.children[n-1];i&&i.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(i.value))?i.value=t:e.children.length=n-1)}}function d(t,n,i){n=n||y||p;var o=y;void 0===t.previous&&(f(n,t)&&(y=n,g.onTagOpen(s,{}),t.returnPoint=n=y),c(t),e(t)&&!t.children.length||n.add(t),"pre"==t.name&&(T=!1),"textarea"==t.name&&(b=!1)),t.returnPoint?(y=t.returnPoint,delete t.returnPoint):y=i?n:o}function f(e,t){var n,i;if((e==p||"body"==e.name)&&s&&(!e.name||CKEDITOR.dtd[e.name][s]))return(n=t.attributes&&(i=t.attributes["data-cke-real-element-type"])?i:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}function h(e,t){return(e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent)&&(e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t)}var g=new CKEDITOR.htmlParser,p=a instanceof CKEDITOR.htmlParser.element?a:"string"==typeof a?new CKEDITOR.htmlParser.element(a):new CKEDITOR.htmlParser.fragment,m=[],v=[],y=p,b="textarea"==p.name,T="pre"==p.name;for(g.onTagOpen=function(o,r,a,s){if((r=new CKEDITOR.htmlParser.element(o,r)).isUnknown&&a&&(r.isEmpty=!0),r.isOptionalClose=s,e(r))m.push(r);else{if("pre"==o)T=!0;else{if("br"==o&&T)return void y.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==o&&(b=!0)}if("br"==o)v.push(r);else{for(;s=(a=y.name)?CKEDITOR.dtd[a]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i,!(r.isUnknown||y.isUnknown||s[o]);)if(y.isOptionalClose)g.onTagClose(a);else if(o in n&&a in n)(a=(a=y.children)[a.length-1])&&"li"==a.name||d(a=new CKEDITOR.htmlParser.element("li"),y),!r.returnPoint&&(r.returnPoint=y),y=a;else if(o in CKEDITOR.dtd.$listItem&&!h(o,a))g.onTagOpen("li"==o?"ul":"dl",{},0,1);else if(a in t&&!h(o,a))!r.returnPoint&&(r.returnPoint=y),y=y.parent;else{if(a in CKEDITOR.dtd.$inline&&m.unshift(y),!y.parent){r.isOrphan=1;break}d(y,y.parent,1)}l(o),u(),r.parent=y,r.isEmpty?d(r):y=r}}},g.onTagClose=function(e){for(var t=m.length-1;0<=t;t--)if(e==m[t].name)return void m.splice(t,1);for(var n=[],i=[],o=y;o!=p&&o.name!=e;)o._.isBlockLike||i.unshift(o),n.push(o),o=o.returnPoint||o.parent;if(o!=p){for(t=0;t<n.length;t++){var r=n[t];d(r,r.parent)}y=o,o._.isBlockLike&&u(),d(o,o.parent),o==y&&(y=y.parent),m=m.concat(i)}"body"==e&&(s=!1)},g.onText=function(e){if(y._.hasInlineStarted&&!v.length||T||b||0!==(e=CKEDITOR.tools.ltrim(e)).length){var n=y.name,r=n?CKEDITOR.dtd[n]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i;b||r["#"]||!(n in t)?(u(),l(),T||b||(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),f(y,e)&&this.onTagOpen(s,{},0,1),y.add(e)):(g.onTagOpen(o[n]||""),g.onText(e))}},g.onCDATA=function(e){y.add(new CKEDITOR.htmlParser.cdata(e))},g.onComment=function(e){u(),l(),y.add(new CKEDITOR.htmlParser.comment(e))},g.parse(r),u();y!=p;)d(y,y.parent,1);return c(p),p},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=0<t?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length))return this.children.pop(),void this.add(e);n.next=e}e.previous=n,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id)for(n=this.getFilterContext(n),t&&!this.parent&&e.onRoot(n,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)!1===this.children[t].filter(e,n)&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var i=this.getFilterContext();for(n&&!this.parent&&t&&t.onRoot(i,this),t&&this.filterChildren(t,!1,i),t=0,i=(n=this.children).length;t<i;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.children;for(var o=0;o<n.length;o++)(i=n[o]).type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}},getFilterContext:function(e){return e||{}}}}(),function(){function e(){this.rules=[]}function t(t,n,i,o){var r,a;for(r in n)(a=t[r])||(a=t[r]=new e),a.add(n[r],i,o)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,n){var i;"number"==typeof n?i=n:n&&"priority"in n&&(i=n.priority),"number"!=typeof i&&(i=10),"object"!=typeof n&&(n={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,i,n),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,i,n),e.elements&&t(this.elementsRules,e.elements,i,n),e.attributes&&t(this.attributesRules,e.attributes,i,n),e.text&&this.textRules.add(e.text,i,n),e.comment&&this.commentRules.add(e.comment,i,n),e.root&&this.rootRules.add(e.root,i,n)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,n){return this.textRules.exec(e,t,n)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var n,i=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],o=0;3>o;o++)if(n=i[o]){if(!1===(n=n.exec(e,t,this)))return null;if(n&&n!=t)return this.onNode(e,n);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,n,i){return(n=this.attributesRules[n])?n.exec(e,i,t,this):i}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var i=[this.findIndex(t),0],o=0,r=e.length;o<r;o++)i.push({value:e[o],priority:t,options:n});this.rules.splice.apply(this.rules,i)},findIndex:function(e){for(var t=this.rules,n=t.length-1;0<=n&&e<t[n].priority;)n--;return n+1},exec:function(e,t){var n,i,o,r,a=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,s=Array.prototype.slice.call(arguments,1),l=this.rules,u=l.length;for(r=0;r<u;r++)if(a&&(n=t.type,i=t.name),o=l[r],!(e.nonEditable&&!o.options.applyToAll||e.nestedEditable&&o.options.excludeNestedEditable)){if(!1===(o=o.value.apply(null,s))||a&&o&&(o.name!=i||o.type!=n))return o;null!=o&&(s[0]=t=o)}return t},execOnName:function(e,t){for(var n,i=0,o=this.rules,r=o.length;t&&i<r;i++)n=o[i],e.nonEditable&&!n.options.applyToAll||e.nestedEditable&&n.options.excludeNestedEditable||(t=t.replace(n.value[0],n.value[1]));return t}}}(),function(){function e(e,t){function s(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(e,t){return function(o){if(o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var a,l,c=[],d=n(o);if(d)for(u(d,1)&&c.push(d);d;)r(d)&&(a=i(d))&&u(a)&&((l=i(a))&&!r(l)?c.push(a):(s(f).insertAfter(a),a.remove())),d=d.previous;for(d=0;d<c.length;d++)c[d].remove();(c=!e||!1!==("function"==typeof t?t(o):t))&&(c=!(!f&&!CKEDITOR.env.needsBrFiller&&o.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!f&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||o.name in CKEDITOR.dtd.tr||o.name in CKEDITOR.dtd.$listItem)||(c=n(o))&&("form"!=o.name||"input"!=c.name))),c&&o.add(s(e))}}}function u(e,t){return!(f&&!CKEDITOR.env.needsBrFiller||e.type!=CKEDITOR.NODE_ELEMENT||"br"!=e.name||e.attributes["data-cke-eol"])||!!(e.type==CKEDITOR.NODE_TEXT&&(n=e.value.match(p))&&(n.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,n.index)).insertBefore(e),e.value=n[0]),!CKEDITOR.env.needsBrFiller&&f&&(!t||e.parent.name in h)||!f&&((n=e.previous)&&"br"==n.name||!n||r(n))));var n}var c,d={elements:{}},f="html"==t,h=CKEDITOR.tools.extend({},b);for(c in h)"#"in v[c]||delete h[c];for(c in h)d.elements[c]=l(f,e.config.fillEmptyBlocks);return d.root=l(f,!1),d.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.attributes;if("data-cke-bogus"in n||"data-cke-eol"in n)delete n["data-cke-bogus"];else{for(n=t.next;n&&o(n);)n=n.next;var l=i(t);!n&&r(t.parent)?a(t.parent,s(e)):r(n)&&l&&!r(l)&&s(e).insertBefore(n)}}}}(f),d}function t(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t&&(e==CKEDITOR.ENTER_DIV?"div":"p")}function n(e){for(e=e.children[e.children.length-1];e&&o(e);)e=e.previous;return e}function i(e){for(e=e.previous;e&&o(e);)e=e.previous;return e}function o(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function r(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in b||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function a(e,t){var n=e.children[e.children.length-1];e.children.push(t),t.parent=e,n&&(n.next=t,t.previous=n)}function s(e){"false"!=(e=e.attributes).contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function l(e){switch((e=e.attributes)["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function u(e,t){return e.replace(t,(function(e,t,n){return 0===e.indexOf("<textarea")&&(e=t+h(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"}))}function c(e){return e.replace(R,(function(e,t){return decodeURIComponent(t)}))}function d(e){return CKEDITOR.tools.array.reduce(e.split(""),(function(e,t){var n=t.toLowerCase(),i=t.toUpperCase(),o=f(n);return n!==i&&(o+="|"+f(i)),e+"("+o+")"}),"")}function f(e){var t,n=(t=e.charCodeAt(0)).toString(16);for(var i in t={htmlCode:"&#"+t+";?",hex:"&#x0*"+n+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[e]})t[i]&&(e+="|"+t[i]);return e}function h(e){return e.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)}))}function g(e,t){var n=t._.dataStore;return e.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)})).replace(/\{cke_protected_(\d+)\}/g,(function(e,t){return n&&n[t]||""}))}CKEDITOR.htmlDataProcessor=function(n){var i,o,r=this;this.editor=n,this.dataFilter=i=new CKEDITOR.htmlParser.filter,this.htmlFilter=o=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,i.addRules(T),i.addRules(C,{applyToAll:!0}),i.addRules(e(n,"data"),{applyToAll:!0}),o.addRules(E),o.addRules(_,{applyToAll:!0}),o.addRules(e(n,"html"),{applyToAll:!0}),n.on("toHtml",(function(e){var i,o,r=function(e,t){var n=[],i=t.config.protectedSource,o=t._.dataStore||(t._.dataStore={id:1}),r=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;i=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(i),e=e.replace(/\x3c!--[\s\S]*?--\x3e/g,(function(e){return"\x3c!--{cke_tempcomment}"+(n.push(e)-1)+"--\x3e"}));for(var a=0;a<i.length;a++)e=e.replace(i[a],(function(e){return e=e.replace(r,(function(e,t,i){return n[i]})),/cke_temp(comment)?/.test(e)?e:"\x3c!--{cke_temp}"+(n.push(e)-1)+"--\x3e"}));return(e=(e=e.replace(r,(function(e,t,i){return"\x3c!--"+m+(t?"{C}":"")+encodeURIComponent(n[i]).replace(/--/g,"%2D%2D")+"--\x3e"}))).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,(function(e){return e.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,(function(e,t){return o[o.id]=decodeURIComponent(t),"{cke_protected_"+o.id+++"}"}))}))).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,(function(e,n,i,o){return"<"+n+i+">"+g(h(o),t)+"</"+n+">"}))}(r=(r=(e=e.data).dataValue).replace(k,""),n);r=u(r,O),r=(r=(r=(r=(r=u(r=function(e){return e.replace(x,(function(e,t,n){return"<"+t+n.replace(I,(function(e,t){return D.test(t)&&-1==n.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e}))+">"}))}(r),w)).replace(S,"$1cke:$2")).replace(N,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),i=e.context||n.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==i&&(i="div",r="<pre>"+r+"</pre>",o=1),(i=n.document.createElement(i)).setHtml("a"+r),r=(r=i.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),o&&(r=r.replace(/^<pre>|<\/pre>$/gi,"")),r=h(r=c(r=r.replace(A,"$1$2"))),i=!1!==e.fixForBody&&t(e.enterMode,n.config.autoParagraph),r=CKEDITOR.htmlParser.fragment.fromHtml(r,e.context,i),i&&!(o=r).children.length&&CKEDITOR.dtd[o.name][i]&&(i=new CKEDITOR.htmlParser.element(i),o.add(i)),e.dataValue=r}),null,null,5),n.on("toHtml",(function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&n.fire("dataFiltered")}),null,null,6),n.on("toHtml",(function(e){e.data.dataValue.filterChildren(r.dataFilter,!0)}),null,null,10),n.on("toHtml",(function(e){var t=(e=e.data).dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n),t=n.getHtml(!0),e.dataValue=function(e){return e.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,(function(e){return"\x3c!--"+m+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"--\x3e"}))}(t)}),null,null,15),n.on("toDataFormat",(function(e){var i=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(i=i.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(i,e.data.context,t(e.data.enterMode,n.config.autoParagraph))}),null,null,5),n.on("toDataFormat",(function(e){e.data.dataValue.filterChildren(r.htmlFilter,!0)}),null,null,10),n.on("toDataFormat",(function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)}),null,null,11),n.on("toDataFormat",(function(e){var t=e.data.dataValue,i=r.writer;i.reset(),t.writeChildrenHtml(i),t=g(t=h(t=i.getHtml(!0)),n),e.data.dataValue=t}),null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,n,i){var o,r,a,s,l=this.editor;return t&&"object"==typeof t?(o=t.context,n=t.fixForBody,i=t.dontFilter,r=t.filter,a=t.enterMode,s=t.protectedWhitespaces):o=t,o||null===o||(o=l.editable().getName()),l.fire("toHtml",{dataValue:e,context:o,fixForBody:n,dontFilter:i,filter:r||l.filter,enterMode:a||l.enterMode,protectedWhitespaces:s}).dataValue},toDataFormat:function(e,t){var n,i,o;return t&&(n=t.context,i=t.filter,o=t.enterMode),n||null===n||(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:i||this.editor.filter,context:n,enterMode:o||this.editor.enterMode}).dataValue}};var p=/(?:&nbsp;|\xa0)$/,m="{cke_protected}",v=CKEDITOR.dtd,y="caption colgroup col thead tfoot tbody".split(" "),b=CKEDITOR.tools.extend({},v.$blockLimit,v.$block),T={elements:{input:s,textarea:s}},C={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(e){if(e.attributes&&e.attributes.src){var t=e.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==t.indexOf("javascript")&&0!==t.indexOf("data")||(e.attributes["data-cke-pa-src"]=e.attributes.src,delete e.attributes.src)}}}},E={elements:{embed:function(e){if((n=e.parent)&&"object"==n.name){var t=n.attributes.width,n=n.attributes.height;t&&(e.attributes.width=t),n&&(e.attributes.height=n)}},a:function(e){var t=e.attributes;if(!(e.children.length||t.name||t.id||e.attributes["data-cke-saved-name"]))return!1}}},_={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var n=["name","href","src"],i=0;i<n.length;i++)"data-cke-saved-"+n[i]in t&&delete t[n[i]]}return e},table:function(e){e.children.slice(0).sort((function(e,t){var n,i;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(y,e.name),i=CKEDITOR.tools.indexOf(y,t.name)),-1<n&&-1<i&&n!=i||(n=e.parent?e.getIndex():-1,i=t.parent?t.getIndex():-1),n>i?1:-1}))},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes.class&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes.class},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&a(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{class:function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(_.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,(function(e){return e.toLowerCase()}))});var x=/<(a|area|img|input|source)\b([^>]*)>/gi,I=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,D=/^(href|src|name)$/i,w=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,O=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,R=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,k=new RegExp("("+d("<cke:encoded>")+"(.*?)"+d("</cke:encoded>")+")|("+d("<")+d("/")+"?"+d("cke:encoded>")+")","gi"),S=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,A=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,N=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var n=e||"",i=n.match(/^cke:(.*)/);i&&(n=i[1]),n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||"br"==n),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,n,i){"font-family"==n&&(i=i.replace(/["']/g,"")),t[n.toLowerCase()]=i})),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e,n=[];for(e in t)t[e]&&n.push(e,":",t[e],";");return n.join("")}}},function(){var e=function(e,t){return(e=e[0])<(t=t[0])?-1:e>t?1:0},t=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:t.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n,i,o,r,a=this;for(t=a.getFilterContext(t),a.parent||e.onRoot(t,a);;){if(!(i=e.onElementName(t,n=a.name)))return this.remove(),!1;if(a.name=i,!(a=e.onElement(t,a)))return this.remove(),!1;if(a!==this)return this.replaceWith(a),!1;if(a.name==n)break;if(a.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(a),!1;if(!a.name)return this.replaceWithChildren(),!1}for(o in n=a.attributes){for(i=n[o];;){if(!(r=e.onAttributeName(t,o))){delete n[o];break}if(r==o)break;delete n[o],o=r}r&&(!1===(i=e.onAttribute(t,a,r,i))?delete n[r]:n[r]=i)}return a.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:t.filterChildren,writeHtml:function(t,n){n&&this.filter(n);var i,o,r=this.name,a=[],s=this.attributes;for(i in t.openTag(r,s),s)a.push([i,s[i]]);for(t.sortAttributes&&a.sort(e),i=0,o=a.length;i<o;i++)t.attribute((s=a[i])[0],s[1]);t.openTagClose(r,this.isEmpty),this.writeChildrenHtml(t),this.isEmpty||t.closeTag(r)},writeChildrenHtml:t.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:t.forEach,getFirst:function(e){if(!e)return this.children.length?this.children[0]:null;"function"!=typeof e&&(e=function(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}(e));for(var t=0,n=this.children.length;t<n;++t)if(e(this.children[t]))return this.children[t];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var t=0,n=(e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children).length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),i=0;i<t.length;++i)t[i].parent=n;return n.children=t,t[0]&&(t[0].previous=null),0<e&&(this.children[e-1].next=null),this.parent.add(n,this.getIndex()+1),n},find:function(e,t){void 0===t&&(t=!1);var n,i=[];for(n=0;n<this.children.length;n++){var o=this.children[n];("function"==typeof e&&e(o)||"string"==typeof e&&o.name===e)&&i.push(o),t&&o.find&&(i=i.concat(o.find(e,t)))}return i},findOne:function(e,t){var n=null,i=CKEDITOR.tools.array.find(this.children,(function(i){var o="function"==typeof e?e(i):i.name===e;return o||!t?o:(i.children&&i.findOne&&(n=i.findOne(e,!0)),!!n)}));return n||i||null},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes.class||"";this.attributes.class=t+(t?" ":"")+e}},removeClass:function(e){var t=this.attributes.class;t&&((t=CKEDITOR.tools.trim(t.replace(new RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes.class=t:delete this.attributes.class)},hasClass:function(e){var t=this.attributes.class;return!!t&&new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t)},getFilterContext:function(e){var t=[];if(e||(e={nonEditable:!1,nestedEditable:!1}),e.nonEditable||"false"!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length){e=CKEDITOR.tools.copy(e);for(var n=0;n<t.length;n+=2)e[t[n]]=t[n+1]}return e}},!0)}(),function(){var e=/{([^}]+)}/g;CKEDITOR.template=function(e){this.source="function"==typeof e?e:String(e)},CKEDITOR.template.prototype.output=function(t,n){var i=("function"==typeof this.source?this.source(t):this.source).replace(e,(function(e,n){return void 0!==t[n]?t[n]:e}));return n?n.push(i):i}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){function t(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[e.name]=e,e.on("focus",(function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))})),e.on("blur",t),e.on("destroy",t),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,n){var i=e[t];return i||(i={name:t,source:n},CKEDITOR.fire("template",i),e[t]=new CKEDITOR.template(i.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",(function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")})),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(e,t){if(!(e=CKEDITOR.editor._getEditorElement(e)))return null;var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),i=e.is("textarea")?e:null;return i?(n.setData(i.getValue(),null,!0),(e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+i.getValue()+"</div>",CKEDITOR.document)).insertAfter(i),i.hide(),i.$.form&&n._attachToForm()):n.setData(e.getHtml(),null,!0),n.on("loaded",(function(){n.fire("uiReady"),n.editable(e),n.container=e,n.ui.contentsElement=e,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)}),null,null,1e4),n.on("destroy",(function(){var e=n.container;i&&e&&(e.clearCustomData(),e.remove()),i&&i.show(),n.element.clearCustomData(),delete n.element})),n},CKEDITOR.inlineAll=function(){var e,t,n;for(n in CKEDITOR.dtd.$editable)for(var i=CKEDITOR.document.getElementsByTag(n),o=0,r=i.count();o<r;o++)"true"==(e=i.getItem(o)).getAttribute("contenteditable")&&(t={element:e,config:{}},!1!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady((function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})),CKEDITOR.replaceClass="ckeditor",function(){function e(e,n,i,o){if(!(e=CKEDITOR.editor._getEditorElement(e)))return null;var r=new CKEDITOR.editor(n,e,o);return o==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),r._.required=e.hasAttribute("required"),e.removeAttribute("required")),i&&r.setData(i,null,!0),r.on("loaded",(function(){r.isDestroyed()||r.isDetached()||(function(e){var t=e.name,n=e.element,i=e.elementMode,o=e.fire("uiSpace",{space:"top",html:""}).html,r=e.fire("uiSpace",{space:"bottom",html:""}).html,a=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');t=CKEDITOR.dom.element.createFromHtml(a.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:o?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+o+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:r?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+r+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),i==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t),e.container=t,e.ui.contentsElement=e.ui.space("contents"),o&&e.ui.space("top").unselectable(),r&&e.ui.space("bottom").unselectable(),i=e.config.height,(n=e.config.width)&&t.setStyle("width",CKEDITOR.tools.cssLength(n)),i&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(i)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",(function(){e.focus()})),e.fireOnce("uiReady")}(r),o==CKEDITOR.ELEMENT_MODE_REPLACE&&r.config.autoUpdateElement&&e.$.form&&r._attachToForm(),r.setMode(r.config.startupMode,(function(){r.resetDirty(),r.status="ready",r.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,r)})))})),r.on("destroy",t),r}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(t,n){return e(t,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,n,i){return e(t,n,i,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var n=null,i=e[t];if(i.name||i.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(i.className))continue}else if("function"==typeof arguments[0]&&!1===arguments[0](i,n={}))continue;this.replace(i,n)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,i=this._.modes;if(e!=n.mode&&i&&i[e]){if(n.fire("beforeSetMode",e),n.mode){var o,r=n.checkDirty(),a=(i=n._.previousModeData,0);n.fire("beforeModeUnload"),n.editable(0),n._.previousMode=n.mode,n._.previousModeData=o=n.getData(1),"source"==n.mode&&i==o&&(n.fire("lockSnapshot",{forceUpdate:!0}),a=1),n.ui.space("contents").setHtml(""),n.mode=""}else n._.previousModeData=n.getData(1);this._.modes[e]((function(){n.mode=e,void 0!==r&&!r&&n.resetDirty(),a?n.fire("unlockSnapshot"):"wysiwyg"==e&&n.fire("saveSnapshot"),setTimeout((function(){n.isDestroyed()||n.isDetached()||(n.fire("mode"),t&&t.call(n))}),0)}))}},CKEDITOR.editor.prototype.resize=function(e,t,n,i){var o=this.container,r=this.ui.space("contents"),a=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(i=i?this.container.getFirst((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")})):o).setSize("width",e,!0),a&&(a.style.width="1%");var s=(i.$.offsetHeight||0)-(r.$.clientHeight||0);o=Math.max(t-(n?0:s),0),t=n?t+s:t,r.setStyle("height",o+"px"),a&&(a.style.width="100%"),this.fire("resize",{outerHeight:t,contentsHeight:o,outerWidth:e||i.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady((function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)}))}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var t,i=e.editor,o=e.data.path,a=o.blockLimit,s=e.data.selection,l=s.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(s=function(e,t){if(e.isFake)return 0;var i=t.block||t.blockLimit,o=i&&i.getLast(n);return!i||!i.isBlockBoundary()||o&&o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()||i.is("pre")||i.getBogus()?void 0:i}(s,o))&&(s.appendBogus(),t=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.edge&&i._.previousActive),r(i,o.block,a)&&l.collapsed&&!l.getCommonAncestor().isReadOnly()&&((o=l.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(a=new CKEDITOR.dom.walker(o)).guard=function(e){return!n(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()},!a.checkForward()||o.checkStartOfBlock()&&o.checkEndOfBlock())&&(i=l.fixBlock(!0,i.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(i=i.getFirst(n))&&i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText()).match(/^(?:&nbsp;|\xa0)$/)&&i.remove(),t=1,e.cancel()),t&&l.select()}function t(e){var t=e.data.getTarget();t.is("input")&&("submit"!=(t=t.getAttribute("type"))&&"reset"!=t||e.data.preventDefault())}function n(e){return c(e)&&d(e)}function i(e,t){return function(n){var i=n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget;(i=i&&i.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(i):null)&&(t.equals(i)||t.contains(i))||e.call(this,n)}}function o(e){function t(e){return function(t,o){if(o&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(r)&&(i=t),!(o||!n(t)||e&&h(t)))return!1}}var i,o=e.getRanges()[0];e=e.root;var r={table:1,ul:1,ol:1,dl:1};if(o.startPath().contains(r)){var a=o.clone();if(a.collapse(1),a.setStartAt(e,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(a)).guard=t(),e.checkBackward(),i)return(a=o.clone()).collapse(),a.setEndAt(i,CKEDITOR.POSITION_AFTER_END),(e=new CKEDITOR.dom.walker(a)).guard=t(!0),i=!1,e.checkForward(),i}return null}function r(e,t,n){return!1!==e.config.autoParagraph&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(n)&&!t||t&&"true"==t.getAttribute("contenteditable"))}function a(e){return e.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==e.config.autoParagraph&&(e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function s(e){e&&e.isEmptyInlineRemoveable()&&e.remove()}function l(e){var t=e.editor;t.getSelection().scrollIntoView(),setTimeout((function(){t.fire("saveSnapshot")}),0)}function u(e,t,n){var i=e.getCommonAncestor(t);for(t=e=n?t:e;(e=e.getParent())&&!i.equals(e)&&1==e.getChildCount();)t=e;t.remove()}var c,d,f,h,g,p,m,v,y,b;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))e.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var t=this.$.scrollTop;this.$.focus(),this.$.scrollTop=t}else this.$.focus();else this.$.setActive()}catch(n){if(!CKEDITOR.env.ie)throw n}CKEDITOR.env.safari&&!this.isInline()&&((e=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=i(t,this),n[0]=e,n[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1);return t=e.on.apply(e,t),this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(t){}},restoreAttrs:function(){var e,t,n=this._.attrChanges;for(t in n)n.hasOwnProperty(t)&&(null!==(e=n[t])?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertText:function(e){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(e),"text")},transformPlainTextToHtml:function(e){var t=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(e,t)},insertHtml:function(e,t,n){var i=this.editor;i.focus(),i.fire("saveSnapshot"),n||(n=i.getSelection().getRanges()[0]),p(this,t||"html",e,n),n.select(),l(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(e,t,n){p(this,n||"html",e,t),this.editor.fire("afterInsertHtml",{intoRange:t})},insertElement:function(e,t){(o=this.editor).focus(),o.fire("saveSnapshot");var i=o.activeEnterMode,o=o.getSelection(),r=e.getName();r=CKEDITOR.dtd.$block[r],t||(t=o.getRanges()[0]),this.insertElementIntoRange(e,t)&&(t.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),r&&((r=e.getNext((function(e){return n(e)&&!h(e)})))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$block)?r.getDtd()["#"]?t.moveToElementEditStart(r):t.moveToElementEditEnd(e):r||i==CKEDITOR.ENTER_BR||(r=t.fixBlock(!0,i==CKEDITOR.ENTER_DIV?"div":"p"),t.moveToElementEditStart(r)))),o.selectRanges([t]),l(this)},insertElementIntoSelection:function(e){this.insertElement(e)},insertElementIntoRange:function(e,t){var n,i,o=this.editor,r=o.config.enterMode,a=e.getName(),l=CKEDITOR.dtd.$block[a];if(t.checkReadOnly())return!1;if(t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&(t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?m(t):t.startContainer.is(CKEDITOR.dtd.$list)&&v(t)),l)for(;(n=t.getCommonAncestor(0,1))&&(i=CKEDITOR.dtd[n.getName()])&&(!i||!i[a]);)if(n.getName()in CKEDITOR.dtd.span){l=t.splitElement(n);var u=t.createBookmark();s(n),s(l),t.moveToBookmark(u)}else t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(n),t.collapse(!0),n.remove()):t.splitBlock(r==CKEDITOR.ENTER_DIV?"div":"p",o.editable());return t.insertNode(e),!0},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.status="detached",this.editor.setData(this.editor.getData(),{internal:!0}),this.clearListeners();try{this._.cleanCustomData()}catch(e){if(!CKEDITOR.env.ie||-2146828218!==e.number)throw e}this.editor.fire("contentDomUnload"),delete this.editor.document,delete this.editor.window,delete this.editor},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var e,n=t.getDocument().$,i=n.getSelection();e:if(i.anchorNode&&i.anchorNode==t.$)e=!0;else{if(CKEDITOR.env.webkit&&(e=t.getDocument().getActive())&&e.equals(t)&&!i.anchorNode){e=!0;break e}e=void 0}e&&((e=new CKEDITOR.dom.range(t)).moveToElementEditStart(t),(n=n.createRange()).setStart(e.startContainer.$,e.startOffset),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}var t=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function(){var e=t.getDocument().$,n=e.selection,i=t.getDocument().getActive();"None"==n.type&&i.equals(t)&&(n=new CKEDITOR.dom.range(t),e=e.body.createTextRange(),n.moveToElementEditStart(t),(n=n.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(n=n.getParent()),e.moveToElementText(n.$),e.collapse(!0),e.select())}()):this.hasFocus?(this.focus(),e()):this.once("focus",(function(){e()}),null,null,-999)},getHtmlFromRange:function(e){return e.collapsed?new CKEDITOR.dom.documentFragment(e.document):(e={doc:this.getDocument(),range:e.clone()},y.eol.detect(e,this),y.bogus.exclude(e),y.cell.shrink(e),e.fragment=e.range.cloneContents(),y.tree.rebuild(e,this),y.eol.fix(e,this),new CKEDITOR.dom.documentFragment(e.fragment.$))},extractHtmlFromRange:function(e,t){var n=b,i={range:e,doc:e.document},o=this.getHtmlFromRange(e);if(e.collapsed)return e.optimize(),o;if(e.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.table.detectPurge(i),i.bookmark=e.createBookmark(),delete i.range,(a=this.editor.createRange()).moveToPosition(i.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),i.targetBookmark=a.createBookmark(),n.list.detectMerge(i,this),n.table.detectRanges(i,this),n.block.detectMerge(i,this),i.tableContentsRanges?(n.table.deleteRanges(i),e.moveToBookmark(i.bookmark),i.range=e):(e.moveToBookmark(i.bookmark),i.range=e,e.extractContents(n.detectExtractMerge(i))),e.moveToBookmark(i.targetBookmark),e.optimize(),n.fixUneditableRangePosition(e),n.list.merge(i,this),n.table.purge(i,this),n.block.merge(i,this),t){if(n=e.startPath(),i=e.checkStartOfBlock()&&e.checkEndOfBlock()&&n.block&&!e.root.equals(n.block)){e:{var r,a=0;if(i=n.block.getElementsByTag("span"))for(;r=i.getItem(a++);)if(!d(r)){i=!0;break e}i=!1}i=!i}i&&(e.moveToPosition(n.block,CKEDITOR.POSITION_BEFORE_START),n.block.remove())}else n.autoParagraph(this.editor,e),f(e.startContainer)&&e.startContainer.appendBogus();return e.startContainer.mergeSiblings(),o},setup:function(){var e=this.editor;if(this.attachListener(e,"beforeGetData",(function(){var t=this.getData();this.is("textarea")||!1!==e.config.ignoreEmptyParagraph&&(t=t.replace(g,(function(e,t){return t}))),e.setData(t,null,1)}),this),this.attachListener(e,"getSnapshot",(function(e){e.data=this.getData(1)}),this),this.attachListener(e,"afterSetData",(function(){this.setData(e.getData(1))}),this),this.attachListener(e,"loadSnapshot",(function(e){this.setData(e.data,1)}),this),this.attachListener(e,"beforeFocus",(function(){var t=e.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()}),this),this.attachListener(e,"insertHtml",(function(e){this.insertHtml(e.data.dataValue,e.data.mode,e.data.range)}),this),this.attachListener(e,"insertElement",(function(e){this.insertElement(e.data)}),this),this.attachListener(e,"insertText",(function(e){this.insertText(e.data)}),this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):e.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",(function(){this.hasFocus=!1}),null,null,-1),this.on("focus",(function(){this.hasFocus=!0}),null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",(function(){e._.previousScrollTop=e.editable().$.scrollTop}),null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var i=function(){var t=e.editable();null!=e._.previousScrollTop&&t.getDocument().equals(CKEDITOR.document)&&(t.$.scrollTop=e._.previousScrollTop,e._.previousScrollTop=null,this.removeListener("scroll",i))};this.on("scroll",i)}if(e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",(function(){e.focusManager.focus(this)}),this)),this.isInline()&&this.changeAttr("tabindex",e.tabIndex),!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var r=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var a=e.config.contentsLangDirection;this.getDirection(1)!=a&&this.changeAttr("dir",a);var s=CKEDITOR.getCss();if(s){var l=(a=r.getHead()).getCustomData("stylesheet");l?s!=l.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?l.$.styleSheet.cssText=s:l.setText(s)):(s=r.appendStyleText(s),s=new CKEDITOR.dom.element(s.ownerNode||s.owningElement),a.setCustomData("stylesheet",s),s.data("cke-temp",1))}a=r.getCustomData("stylesheet_ref")||0,r.setCustomData("stylesheet_ref",a+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",(function(e){e=e.data;var t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()}));var d={8:1,46:1};this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;var n,i=t.data.domEvent.getKey();if(0!==(t=e.getSelection()).getRanges().length){if(i in d){var r,a,s,l,u=t.getRanges()[0],f=u.startPath();i=8==i,CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(r=t.getSelectedElement())||(r=o(t))?(e.fire("saveSnapshot"),u.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r.remove(),u.select(),e.fire("saveSnapshot"),n=1):u.collapsed&&((a=f.block)&&(l=a[i?"getPrevious":"getNext"](c))&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("table")&&u[i?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),u[i?"checkEndOfBlock":"checkStartOfBlock"]()&&a.remove(),u["moveToElementEdit"+(i?"End":"Start")](l),u.select(),e.fire("saveSnapshot"),n=1):f.blockLimit&&f.blockLimit.is("td")&&(s=f.blockLimit.getAscendant("table"))&&u.checkBoundaryOfElement(s,i?CKEDITOR.START:CKEDITOR.END)&&(l=s[i?"getPrevious":"getNext"](c))?(e.fire("saveSnapshot"),u["moveToElementEdit"+(i?"End":"Start")](l),u.checkStartOfBlock()&&u.checkEndOfBlock()?l.remove():u.select(),e.fire("saveSnapshot"),n=1):(s=f.contains(["td","th","caption"]))&&u.checkBoundaryOfElement(s,i?CKEDITOR.START:CKEDITOR.END)&&(n=1))}return!n}})),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",(function(t){t.data.getKeystroke()in d&&!this.getFirst(n)&&(this.appendBogus(),(t=e.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())})),this.attachListener(this,"dblclick",(function(t){if(e.readOnly)return!1;t={element:t.data.getTarget()},e.fire("doubleclick",t)})),CKEDITOR.env.ie&&this.attachListener(this,"click",t),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",(function(t){var n=t.data.getTarget();n.is("img","hr","input","textarea","select")&&!n.isReadOnly()&&(e.getSelection().selectElement(n),n.is("input","textarea","select")&&t.data.preventDefault())})),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",(function(t){(t=t.data.getTarget())&&t.is("img")&&!t.isReadOnly()&&e.getSelection().selectElement(t)})),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",(function(t){if(2==t.data.$.button&&!(t=t.data.getTarget()).getAscendant("table")&&!t.getOuterHtml().replace(g,"")){var n=e.createRange();n.moveToElementEditStart(t),n.select(!0)}})),CKEDITOR.env.webkit&&(this.attachListener(this,"click",(function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()})),this.attachListener(this,"mouseup",(function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()}))),CKEDITOR.env.webkit&&this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;if((n=t.data.domEvent.getKey())in d&&0!==(t=e.getSelection()).getRanges().length){var n=8==n,i=t.getRanges()[0];if(t=i.startPath(),i.collapsed)e:{var o=t.block;if(o&&i[n?"checkStartOfBlock":"checkEndOfBlock"]()&&i.moveToClosestEditablePosition(o,!n)&&i.collapsed){if(i.startContainer.type==CKEDITOR.NODE_ELEMENT){var r=i.startContainer.getChild(i.startOffset-(n?1:0));if(r&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("hr")){e.fire("saveSnapshot"),r.remove(),t=!0;break e}}var a;!(i=i.startPath().block)||i&&i.contains(o)?t=void 0:(e.fire("saveSnapshot"),(a=(n?i:o).getBogus())&&a.remove(),r=(a=e.getSelection()).createBookmarks(),(n?o:i).moveChildren(n?i:o,!1),t.lastElement.mergeSiblings(),u(o,i,!n),a.selectBookmarks(r),t=!0)}else t=!1}else a=t.block,i=(n=i).endPath().block,a&&i&&!a.equals(i)?(e.fire("saveSnapshot"),(o=a.getBogus())&&o.remove(),n.enlarge(CKEDITOR.ENLARGE_INLINE),n.deleteContents(),i.getParent()&&(i.moveChildren(a,!1),t.lastElement.mergeSiblings(),u(a,i,!0)),(n=e.getSelection().getRanges()[0]).collapse(1),n.optimize(),""===n.startContainer.getHtml()&&n.startContainer.appendBogus(),n.select(),t=!0):t=!1;if(!t)return;return e.getSelection().scrollIntoView(),e.fire("saveSnapshot"),!1}}),this,null,100)}},getUniqueId:function(){var e;try{this._.expandoNumber=e=CKEDITOR.dom.domObject.prototype.getUniqueId.call(this)}catch(t){e=this._&&this._.expandoNumber}return e}},_:{cleanCustomData:function(){this.removeClass("cke_editable"),this.restoreAttrs();for(var e=this.removeCustomData("classes");e&&e.length;)this.removeClass(e.pop());if(!this.is("textarea")){var t=(e=this.getDocument()).getHead();if(t.getCustomData("stylesheet")){var n=e.getCustomData("stylesheet_ref");--n?e.setCustomData("stylesheet_ref",n):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:arguments.length?(e?t=e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),t=null),this._.editable=t):t},CKEDITOR.on("instanceLoaded",(function(t){var n=t.editor;n.on("insertElement",(function(e){(e=e.data).type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))})),n.on("selectionChange",(function(t){if(!n.readOnly){var i=n.getSelection();i&&!i.isLocked&&(i=n.checkDirty(),n.fire("lockSnapshot"),e(t),n.fire("unlockSnapshot"),!i&&n.resetDirty())}}))})),CKEDITOR.on("instanceCreated",(function(e){var t=e.editor;t.on("mode",(function(){var e=t.editable();if(e&&e.isInline()){var n=t.title;if(e.changeAttr("role","textbox"),e.changeAttr("aria-multiline","true"),e.changeAttr("aria-label",n),n&&e.changeAttr("title",n),(o=t.fire("ariaEditorHelpLabel",{}).label)&&(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var i=CKEDITOR.tools.getNextId(),o=CKEDITOR.dom.element.createFromHtml('<span id="'+i+'" class="cke_voice_label">'+o+"</span>");n.append(o),e.changeAttr("aria-describedby",i)}}}))})),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),c=CKEDITOR.dom.walker.whitespaces(!0),d=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.empty(),h=CKEDITOR.dom.walker.bogus(),g=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,p=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(n,i){var o,r=[],a=n.getChildren(),s=a.count(),l=0,c=u[i],d=!n.is(u.$inline)||n.is("br");for(d&&r.push(" ");l<s;l++)e(o=a.getItem(l))&&!o.is(c)?r=r.concat(t(o,i)):r.push(o);return d&&r.push(" "),r}function i(t){return e(t.startContainer)&&t.startContainer.getChild(t.startOffset-1)}function o(t){return t&&e(t)&&(t.is(u.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function l(t,n,i,o){var r,a,s=t.clone();s.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(r=new CKEDITOR.dom.walker(s).next())&&e(r)&&c[r.getName()]&&(a=r.getPrevious())&&e(a)&&!a.getParent().equals(t.startContainer)&&i.contains(a)&&o.contains(r)&&r.isIdentical(a)&&(r.moveChildren(a),r.remove(),l(t,n,i,o))}var u=CKEDITOR.dtd,c={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},f=CKEDITOR.tools.extend({},u.$inline);return delete f.br,function(c,h,g,p){var m=c.editor,v=!1;if("unfiltered_html"==h&&(h="html",v=!0),!p.checkReadOnly()){v=(h={type:h,dontFilter:v,editable:c,editor:m,range:p,blockLimit:I=new CKEDITOR.dom.elementPath(p.startContainer,p.root).blockLimit||p.root,mergeCandidates:[],zombies:[]}).range;var y,b,T,C,E,_,x,I=h.mergeCandidates,D="html"===h.type;if("text"==h.type&&v.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(b=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",v.document),v.insertNode(b),v.setStartAfter(b)),T=new CKEDITOR.dom.elementPath(v.startContainer),h.endPath=C=new CKEDITOR.dom.elementPath(v.endContainer),!v.collapsed){y=C.block||C.blockLimit;var w=v.getCommonAncestor();y&&!y.equals(w)&&!y.contains(w)&&v.checkEndOfBlock()&&h.zombies.push(y),v.deleteContents()}for(;(E=i(v))&&e(E)&&E.isBlockBoundary()&&T.contains(E);)v.moveToPosition(E,CKEDITOR.POSITION_BEFORE_END);for(l(v,h.blockLimit,T,C),b&&(v.setEndBefore(b),v.collapse(),b.remove()),(y=(b=v.startPath()).contains(o,!1,1))&&(_=v.splitElement(y),h.inlineStylesRoot=y,h.inlineStylesPeak=b.lastElement),b=v.createBookmark(),D&&(s(y),s(_)),(y=b.startNode.getPrevious(n))&&e(y)&&o(y)&&I.push(y),(y=b.startNode.getNext(n))&&e(y)&&o(y)&&I.push(y),y=b.startNode;(y=y.getParent())&&o(y);)I.push(y);if(v.moveToBookmark(b),m.enterMode===CKEDITOR.ENTER_DIV&&""===m.getData(!0)&&((m=c.getFirst())&&m.remove(),p.setStartAt(c,CKEDITOR.POSITION_AFTER_START),p.collapse(!0)),c=g){if(c=h.range,"text"==h.type&&h.inlineStylesRoot){for(m=(p=h.inlineStylesPeak).getDocument().createText("{cke-peak}"),_=h.inlineStylesRoot.getParent();!p.equals(_);)m=m.appendTo(p.clone()),p=p.getParent();g=m.getOuterHtml().split("{cke-peak}").join(g)}if(p=h.blockLimit.getName(),/^\s+|\s+$/.test(g)&&"span"in CKEDITOR.dtd[p]&&(g=(M='<span data-cke-marker="1">&nbsp;</span>')+g+M),g=h.editor.dataProcessor.toHtml(g,{context:null,fixForBody:!1,protectedWhitespaces:!!M,dontFilter:h.dontFilter,filter:h.editor.activeFilter,enterMode:h.editor.activeEnterMode}),(p=c.document.createElement("body")).setHtml(g),M&&(p.getFirst().remove(),p.getLast().remove()),(M=c.startPath().block)&&(1!=M.getChildCount()||!M.getBogus()))e:{var O;if(1==p.getChildCount()&&e(O=p.getFirst())&&O.is(d)&&!O.hasAttribute("contenteditable")){for(c=0,_=(M=O.getElementsByTag("*")).count();c<_;c++)if(!(m=M.getItem(c)).is(f))break e;O.moveChildren(O.getParent(1)),O.remove()}}h.dataWrapper=p,c=g}if(c){c=(O=h.range).document,p=h.blockLimit,_=0;var R,k,S,A,N,M=[];for(g=b=0,v=(E=h.endPath.elements[0]).getPosition(m=O.startContainer),I=!(!E.getCommonAncestor(m)||v==CKEDITOR.POSITION_IDENTICAL||v&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(t,n){function i(t,n){if(n.isBlock&&n.isElement&&!n.node.is("br")&&e(t)&&t.is("br"))return t.remove(),1}var o=n.endContainer.getChild(n.endOffset),r=n.endContainer.getChild(n.endOffset-1);o&&i(o,t[t.length-1]),r&&i(r,t[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())}(m=function t(n,i){var o,r,a,s,l=[],c=i.range.startContainer;o=i.range.startPath(),c=u[c.getName()];for(var d=0,f=n.getChildren(),h=f.count(),g=-1,p=-1,m=0,v=o.contains(u.$list);d<h;++d)e(o=f.getItem(d))?(a=o.getName(),v&&a in CKEDITOR.dtd.$list?l=l.concat(t(o,i)):(s=!!c[a],"br"!=a||!o.data("cke-eol")||d&&d!=h-1||(m=(r=d?l[d-1].node:f.getItem(d+1))&&(!e(r)||!r.is("br")),r=r&&e(r)&&u.$block[r.getName()]),-1!=g||s||(g=d),s||(p=d),l.push({isElement:1,isLineBreak:m,isBlock:o.isBlockBoundary(),hasBlockSibling:r,node:o,name:a,allowed:s}),r=m=0)):l.push({isElement:0,node:o,allowed:1});return-1<g&&(l[g].firstNotAllowed=1),-1<p&&(l[p].lastNotAllowed=1),l}(h.dataWrapper,h),O);_<m.length;_++)if((D=(v=m[_]).isLineBreak)&&(D=O,y=p,C=T=void 0,v.hasBlockSibling?D=1:(T=D.startContainer.getAscendant(u.$block,1))&&T.is({div:1,p:1})?(C=T.getPosition(y))==CKEDITOR.POSITION_IDENTICAL||C==CKEDITOR.POSITION_CONTAINS?D=0:(y=D.splitElement(T),D.moveToPosition(y,CKEDITOR.POSITION_AFTER_START),D=1):D=0),D)g=0<_;else{if(D=O.startPath(),!v.isBlock&&r(h.editor,D.block,D.blockLimit)&&(S=a(h.editor))&&((S=c.createElement(S)).appendBogus(),O.insertNode(S),CKEDITOR.env.needsBrFiller&&(R=S.getBogus())&&R.remove(),O.moveToPosition(S,CKEDITOR.POSITION_BEFORE_END)),(D=O.startPath().block)&&!D.equals(k)&&((R=D.getBogus())&&(R.remove(),M.push(D)),k=D),v.firstNotAllowed&&(b=1),b&&v.isElement){for(D=O.startContainer,y=null;D&&!u[D.getName()][v.name];){if(D.equals(p)){D=null;break}y=D,D=D.getParent()}if(D)y&&(A=O.splitElement(y),h.zombies.push(A),h.zombies.push(y));else{y=p.getName(),N=!_,D=_==m.length-1,T=[],C=(y=t(v.node,y)).length,w=0;for(var K=void 0,P=0,L=-1;w<C;w++)" "==(K=y[w])?(P||N&&!w||(T.push(new CKEDITOR.dom.text(" ")),L=T.length),P=1):(T.push(K),P=0);D&&L==T.length&&T.pop(),N=T}}if(N){for(;D=N.pop();)O.insertNode(D);N=0}else O.insertNode(v.node);v.lastNotAllowed&&_<m.length-1&&((A=I?E:A)&&O.setEndAt(A,CKEDITOR.POSITION_AFTER_START),b=0),O.collapse()}(R=1==m.length&&(R=m[0]).isElement&&"false"==R.node.getAttribute("contenteditable"))&&(g=!0,O.setStartAt(D=m[0].node,CKEDITOR.POSITION_BEFORE_START),O.setEndAt(D,CKEDITOR.POSITION_AFTER_END)),h.dontMoveCaret=g,h.bogusNeededBlocks=M}for(A=h.bogusNeededBlocks,N=(R=h.range).createBookmark();k=h.zombies.pop();)k.getParent()&&((S=R.clone()).moveToElementEditStart(k),S.removeEmptyBlocksAtEnd());if(A)for(;k=A.pop();)CKEDITOR.env.needsBrFiller?k.appendBogus():k.append(R.document.createText(" "));for(;k=h.mergeCandidates.pop();)k.mergeSiblings();if(R.moveToBookmark(N),!h.dontMoveCaret){for(k=i(R);k&&e(k)&&!k.is(u.$empty);){if(k.isBlockBoundary())R.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END);else{if(o(k)&&k.getHtml().match(/(\s|&nbsp;)$/g)){x=null;break}(x=R.clone()).moveToPosition(k,CKEDITOR.POSITION_BEFORE_END)}k=k.getLast(n)}x&&R.moveToRange(x)}}}}(),m=function(){function e(e){return(e=new CKEDITOR.dom.walker(e)).guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,n){return t=e.getDocument().createElement(t),e.append(t,n),t}function n(e){for(var t,n=e.count();0<n--;)t=e.getItem(n),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&t.getChildCount()&&t.getFirst().remove())}return function(i){var o=i.startContainer,r=o.getAscendant("table",1),a=!1;n(r.getElementsByTag("td")),n(r.getElementsByTag("th")),(r=i.clone()).setStart(o,0),(r=e(r).lastBackward())||((r=i.clone()).setEndAt(o,CKEDITOR.POSITION_BEFORE_END),r=e(r).lastForward(),a=!0),r||(r=o),r.is("table")?(i.setStartAt(r,CKEDITOR.POSITION_BEFORE_START),i.collapse(!0),r.remove()):(r.is({tbody:1,thead:1,tfoot:1})&&(r=t(r,"tr",a)),r.is("tr")&&(r=t(r,r.getParent().is("thead")?"th":"td",a)),(o=r.getBogus())&&o.remove(),i.moveToPosition(r,a?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),v=function(){function e(e){return(e=new CKEDITOR.dom.walker(e)).guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$list)||e.is(CKEDITOR.dtd.$listItem):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$listItem)},e}return function(t){var n,i=t.startContainer,o=!1;(n=t.clone()).setStart(i,0),(n=e(n).lastBackward())||((n=t.clone()).setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n=e(n).lastForward(),o=!0),n||(n=i),n.is(CKEDITOR.dtd.$list)?(t.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),n.remove()):((i=n.getBogus())&&i.remove(),t.moveToPosition(n,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),t.select())}}(),y={eol:{detect:function(e,t){var n=e.range,i=n.clone(),o=n.clone(),r=new CKEDITOR.dom.elementPath(n.startContainer,t),a=new CKEDITOR.dom.elementPath(n.endContainer,t);i.collapse(1),o.collapse(),r.block&&i.checkBoundaryOfElement(r.block,CKEDITOR.END)&&(n.setStartAfter(r.block),e.prependEolBr=1),a.block&&o.checkBoundaryOfElement(a.block,CKEDITOR.START)&&(n.setEndBefore(a.block),e.appendEolBr=1)},fix:function(e,t){var n,i=t.getDocument();e.appendEolBr&&(n=this.createEolBr(i),e.fragment.append(n)),!e.prependEolBr||n&&!n.getPrevious()||e.fragment.append(this.createEolBr(i),1)},createEolBr:function(e){return e.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(e){var t,n=(t=e.range.getBoundaryNodes()).startNode;!(t=t.endNode)||!h(t)||n&&n.equals(t)||e.range.setEndBefore(t)}},tree:{rebuild:function(e,t){var n,i=(a=e.range).getCommonAncestor(),o=new CKEDITOR.dom.elementPath(i,t),r=new CKEDITOR.dom.elementPath(a.startContainer,t),a=new CKEDITOR.dom.elementPath(a.endContainer,t);if(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),o.blockLimit.is({tr:1,table:1})){var s=o.contains("table").getParent();n=function(e){return!e.equals(s)}}else if(o.block&&o.block.is(CKEDITOR.dtd.$listItem)&&(r=r.contains(CKEDITOR.dtd.$list),a=a.contains(CKEDITOR.dtd.$list),!r.equals(a))){var l=o.contains(CKEDITOR.dtd.$list).getParent();n=function(e){return!e.equals(l)}}n||(n=function(e){return!e.equals(o.block)&&!e.equals(o.blockLimit)}),this.rebuildFragment(e,t,i,n)},rebuildFragment:function(e,t,n,i){for(var o;n&&!n.equals(t)&&i(n);)o=n.clone(0,1),e.fragment.appendTo(o),e.fragment=o,n=n.getParent()}},cell:{shrink:function(e){var t=(e=e.range).startContainer,n=e.startOffset,i=e.endOffset;t.type==CKEDITOR.NODE_ELEMENT&&t.equals(e.endContainer)&&t.is("tr")&&++n==i&&e.shrink(CKEDITOR.SHRINK_TEXT)}}},b=function(){function e(e,t){var n=e.getParent();n.is(CKEDITOR.dtd.$inline)&&e[t?"insertBefore":"insertAfter"](n)}function t(t,n,i){e(n),e(i,1);for(var o;o=i.getNext();)o.insertAfter(n),n=o;f(t)&&t.remove()}function n(e,t){var n=new CKEDITOR.dom.range(e);return n.setStartAfter(t.startNode),n.setEndBefore(t.endNode),n}return{list:{detectMerge:function(e,t){var i=n(t,e.bookmark),o=i.startPath(),r=i.endPath(),a=o.contains(CKEDITOR.dtd.$list),s=r.contains(CKEDITOR.dtd.$list);e.mergeList=a&&s&&a.getParent().equals(s.getParent())&&!a.equals(s),e.mergeListItems=o.block&&r.block&&o.block.is(CKEDITOR.dtd.$listItem)&&r.block.is(CKEDITOR.dtd.$listItem),(e.mergeList||e.mergeListItems)&&((i=i.clone()).setStartBefore(e.bookmark.startNode),i.setEndAfter(e.bookmark.endNode),e.mergeListBookmark=i.createBookmark())},merge:function(e,n){if(e.mergeListBookmark){var i=e.mergeListBookmark.startNode,o=e.mergeListBookmark.endNode,r=new CKEDITOR.dom.elementPath(i,n),a=new CKEDITOR.dom.elementPath(o,n);if(e.mergeList){var s=r.contains(CKEDITOR.dtd.$list),l=a.contains(CKEDITOR.dtd.$list);s.equals(l)||(l.moveChildren(s),l.remove())}e.mergeListItems&&(r=r.contains(CKEDITOR.dtd.$listItem),a=a.contains(CKEDITOR.dtd.$listItem),r.equals(a)||t(a,i,o)),i.remove(),o.remove()}}},block:{detectMerge:function(e,t){if(!e.tableContentsRanges&&!e.mergeListBookmark){var n=new CKEDITOR.dom.range(t);n.setStartBefore(e.bookmark.startNode),n.setEndAfter(e.bookmark.endNode),e.mergeBlockBookmark=n.createBookmark()}},merge:function(e,n){if(e.mergeBlockBookmark&&!e.purgeTableBookmark){var i=e.mergeBlockBookmark.startNode,o=e.mergeBlockBookmark.endNode,r=new CKEDITOR.dom.elementPath(i,n),a=(a=new CKEDITOR.dom.elementPath(o,n)).block;(r=r.block)&&a&&!r.equals(a)&&t(a,i,o),i.remove(),o.remove()}}},table:function(){function e(e){var n,o=[],r=new CKEDITOR.dom.walker(e),a=e.startPath().contains(i),s=e.endPath().contains(i),l={};return r.guard=function(r,u){if(r.type==CKEDITOR.NODE_ELEMENT){if(r.getCustomData(c="visited_"+(u?"out":"in")))return;CKEDITOR.dom.element.setMarker(l,r,c,1)}if(u&&a&&r.equals(a))(n=e.clone()).setEndAt(a,CKEDITOR.POSITION_BEFORE_END),o.push(n);else if(!u&&s&&r.equals(s))(n=e.clone()).setStartAt(s,CKEDITOR.POSITION_AFTER_START),o.push(n);else{if((c=!u)&&(c=r.type==CKEDITOR.NODE_ELEMENT&&r.is(i)&&(!a||t(r,a))&&(!s||t(r,s))),!c&&(c=u))if(r.is(i)){var c=a&&a.getAscendant("table",!0),d=s&&s.getAscendant("table",!0),f=r.getAscendant("table",!0);c=c&&c.contains(f)||d&&d.contains(f)}else c=void 0;c&&((n=e.clone()).selectNodeContents(r),o.push(n))}},r.lastForward(),CKEDITOR.dom.element.clearAllMarkers(l),o}function t(e,t){var n=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,i=e.getPosition(t);return i!==CKEDITOR.POSITION_IDENTICAL&&0==(i&n)}var i={td:1,th:1,caption:1};return{detectPurge:function(e){var t=e.range;(n=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var n=new CKEDITOR.dom.walker(n),o=0;if(n.evaluator=function(e){e.type==CKEDITOR.NODE_ELEMENT&&e.is(i)&&++o},n.checkForward(),1<o){n=t.startPath().contains("table");var r=t.endPath().contains("table");n&&r&&t.checkBoundaryOfElement(n,CKEDITOR.START)&&t.checkBoundaryOfElement(r,CKEDITOR.END)&&((t=e.range.clone()).setStartBefore(n),t.setEndAfter(r),e.purgeTableBookmark=t.createBookmark())}},detectRanges:function(o,r){var a,s,l=n(r,o.bookmark),u=l.clone(),c=l.getCommonAncestor();c.is(CKEDITOR.dtd.$tableContent)&&!c.is(i)&&(c=c.getAscendant("table",!0)),s=c,c=new CKEDITOR.dom.elementPath(l.startContainer,s),s=new CKEDITOR.dom.elementPath(l.endContainer,s),c=c.contains("table"),s=s.contains("table"),(c||s)&&(c&&s&&t(c,s)?(o.tableSurroundingRange=u,u.setStartAt(c,CKEDITOR.POSITION_AFTER_END),u.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),(u=l.clone()).setEndAt(c,CKEDITOR.POSITION_AFTER_END),(a=l.clone()).setStartAt(s,CKEDITOR.POSITION_BEFORE_START),a=e(u).concat(e(a))):c?s||(o.tableSurroundingRange=u,u.setStartAt(c,CKEDITOR.POSITION_AFTER_END),l.setEndAt(c,CKEDITOR.POSITION_AFTER_END)):(o.tableSurroundingRange=u,u.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),l.setStartAt(s,CKEDITOR.POSITION_AFTER_START)),o.tableContentsRanges=a||e(l))},deleteRanges:function(e){for(var t;t=e.tableContentsRanges.pop();)t.extractContents(),f(t.startContainer)&&t.startContainer.appendBogus();e.tableSurroundingRange&&e.tableSurroundingRange.extractContents()},purge:function(e){if(e.purgeTableBookmark){var t=e.doc,n=e.range.clone();(t=t.createElement("p")).insertBefore(e.purgeTableBookmark.startNode),n.moveToBookmark(e.purgeTableBookmark),n.deleteContents(),e.range.moveToPosition(t,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(e){return!(e.range.startPath().contains(CKEDITOR.dtd.$listItem)&&e.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(e){e.startContainer.getDtd()["#"]||e.moveToClosestEditablePosition(null,!0)},autoParagraph:function(e,t){var n,i=t.startPath();r(e,i.block,i.blockLimit)&&(n=a(e))&&((n=t.document.createElement(n)).appendBogus(),t.insertNode(n),t.moveToPosition(n,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(t,n){if(0===t.length||e(t[0].getEnclosedNode()))return!1;var i,o;if((i=!n&&1===t.length)&&!(i=t[0].collapsed)){var r=t[0];i=r.startContainer.getAscendant({td:1,th:1},!0);var a=r.endContainer.getAscendant({td:1,th:1},!0);o=CKEDITOR.tools.trim,i=!(!i||!i.equals(a)||i.findOne("td, th, tr, tbody, table")||(r=r.cloneContents()).getFirst()&&o(r.getFirst().getText())===o(i.getText()))}if(i)return!1;for(o=0;o<t.length;o++)if(!(i=t[o]._getTableElement()))return!1;return!0}function n(e){var t=this.root.editor,n=t.getSelection(1);this.reset(),f=!0,n.root.once("selectionchange",(function(e){e.cancel()}),null,null,0),n.selectRanges([e[0]]),(n=this._.cache).ranges=new CKEDITOR.dom.rangeList(e),n.type=CKEDITOR.SELECTION_TEXT,n.selectedElement=e[0]._getTableElement(),n.selectedText=function(e){e=function(e){function t(e){e=e.find("td, th");var t,n=[];for(t=0;t<e.count();t++)n.push(e.getItem(t));return n}var n,i,o=[];for(i=0;i<e.length;i++)(n=e[i]._getTableElement()).is&&n.is({td:1,th:1})?o.push(n):o=o.concat(t(n));return o}(e);var t,n,i="",o=[];for(n=0;n<e.length;n++)t&&!t.equals(e[n].getAscendant("tr"))?(i+=o.join("\t")+"\n",t=e[n].getAscendant("tr"),o=[]):0===n&&(t=e[n].getAscendant("tr")),o.push(e[n].getText());return i+o.join("\t")}(e),n.nativeSel=null,this.isFake=1,this.rev=m++,t._.fakeSelection=this,f=!1,this.root.fire("selectionchange")}function i(){var n,i=this._.fakeSelection;if(i){var o;if(!(o=!(n=this.getSelection(1)))&&(o=!n.isHidden())){o=i;var r=n.getRanges(),a=o.getRanges(),s=r.length&&r[0]._getTableElement()&&r[0]._getTableElement().getAscendant("table",!0),l=a.length&&a[0]._getTableElement()&&a[0]._getTableElement().getAscendant("table",!0),u=1===r.length&&r[0]._getTableElement()&&r[0]._getTableElement().is("table"),c=1===a.length&&a[0]._getTableElement()&&a[0]._getTableElement().is("table");if(e(o.getSelectedElement()))o=!1;else{var d=1===r.length&&r[0].collapsed;a=t(r,!!CKEDITOR.env.webkit)&&t(a),(s=!(!s||!l)&&(s.equals(l)||l.contains(s)))&&(d||a)?(u&&!c&&o.selectRanges(r),o=!0):o=!1}o=!o}o&&(i.reset(),i=0)}(i||(i=n||this.getSelection(1))&&i.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",i),(n=this.elementPath()).compare(this._.selectionPreviousPath)||(o=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(n.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||o||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=n,this.fire("selectionChange",{selection:i,path:n})))}function o(){g=!0,h||(a.call(this),h=CKEDITOR.tools.setTimeout(a,200,this))}function a(){h=null,g&&(CKEDITOR.tools.setTimeout(i,0,this),g=!1)}function s(e){return!(!T(e)&&(e.type!=CKEDITOR.NODE_ELEMENT||e.is(CKEDITOR.dtd.$empty)))}function l(e){function t(t,n){return!(!t||t.type==CKEDITOR.NODE_TEXT)&&e.clone()["moveToElementEdit"+(n?"End":"Start")](t)}if(!(e.root instanceof CKEDITOR.editable))return!1;var n=e.startContainer,i=e.getPreviousNode(s,null,n),o=e.getNextNode(s,null,n);return!(!t(i)&&!t(o,1)&&(i||o||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()&&n.getBogus()))}function u(e){c(e,!1);var t=e.getDocument().createText(v);return e.setCustomData("cke-fillingChar",t),t}function c(e,t){var n=e&&e.removeCustomData("cke-fillingChar");if(n){if(!1!==t){var i=e.getDocument().getSelection().getNative(),o=i&&"None"!=i.type&&i.getRangeAt(0),r=v.length;if(n.getLength()>r&&o&&o.intersectsNode(n.$)){var a=[{node:i.anchorNode,offset:i.anchorOffset},{node:i.focusNode,offset:i.focusOffset}];i.anchorNode==n.$&&i.anchorOffset>r&&(a[0].offset-=r),i.focusNode==n.$&&i.focusOffset>r&&(a[1].offset-=r)}}n.setText(d(n.getText(),1)),a&&(i=(n=e.getDocument().$).getSelection(),(n=n.createRange()).setStart(a[0].node,a[0].offset),n.collapse(!0),i.removeAllRanges(),i.addRange(n),i.extend(a[1].node,a[1].offset))}}function d(e,t){return t?e.replace(y,(function(e,t){return t?" ":""})):e.replace(v,"")}var f,h,g,p="function"!=typeof window.getSelection,m=1,v=CKEDITOR.tools.repeat("​",7),y=new RegExp(v+"( )?","g"),T=CKEDITOR.dom.walker.invisible(1),C=function(){function e(e){return function(t){var n=t.editor.createRange();return n.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([n]),!1}}function t(e){return function(t){var n,i=t.editor,o=i.createRange();if(!i.readOnly)return(n=o.moveToClosestEditablePosition(t.selected,e))||(n=o.moveToClosestEditablePosition(t.selected,!e)),n&&i.getSelection().selectRanges([o]),i.fire("saveSnapshot"),t.selected.remove(),n||(o.moveToElementEditablePosition(i.editable()),i.getSelection().selectRanges([o])),i.fire("saveSnapshot"),!1}}var n=e(),i=e(1);return{37:n,38:n,39:i,40:i,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",(function(e){function n(){var e=r.getSelection();e&&e.removeAllRanges()}var r=e.editor;r.on("contentDom",(function(){function e(){(s=new CKEDITOR.dom.selection(r.getSelection())).lock()}function n(){g.removeListener("mouseup",n),y.removeListener("mouseup",n);var e=CKEDITOR.document.$.selection,t=e.createRange();"None"!=e.type&&t.parentElement()&&t.parentElement().ownerDocument==h.$&&t.select()}var a,s,l,u,d,f,h=r.document,g=CKEDITOR.document,m=r.editable(),v=h.getBody(),y=h.getDocumentElement(),b=m.isInline();CKEDITOR.env.gecko&&m.attachListener(m,"focus",(function(e){e.removeListener(),0!==a&&(e=r.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==m.$&&((e=r.createRange()).moveToElementEditStart(m),e.select())}),null,null,-2),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){a&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(a=r._.previousActive&&r._.previousActive.equals(h.getActive()),CKEDITOR.env.webkit&&a&&null!=r._.previousScrollTop&&r._.previousScrollTop!=m.$.scrollTop&&(m.$.scrollTop=r._.previousScrollTop)),r.unlockSelection(a),a=0}),null,null,-1),m.attachListener(m,"mousedown",(function(){a=0})),(CKEDITOR.env.ie||CKEDITOR.env.gecko||b)&&(p?m.attachListener(m,"beforedeactivate",e,null,null,-1):m.attachListener(r,"selectionCheck",e,null,null,-1),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",(function(){var e=s&&(s.isFake||2>s.getRanges());CKEDITOR.env.gecko&&!b&&e||(r.lockSelection(s),a=1)}),null,null,-1),m.attachListener(m,"mousedown",(function(){a=0}))),CKEDITOR.env.ie&&!b&&(m.attachListener(m,"mousedown",(function(e){2==e.data.$.button&&((e=r.document.getSelection())&&e.getType()!=CKEDITOR.SELECTION_NONE||(l=r.window.getScrollPosition()))})),m.attachListener(m,"mouseup",(function(e){2==e.data.$.button&&l&&(r.document.$.documentElement.scrollLeft=l.x,r.document.$.documentElement.scrollTop=l.y),l=null})),"BackCompat"!=h.$.compatMode)&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&y.on("mousedown",(function(e){function n(e){if(e=e.data.$,d){var n=v.$.createTextRange();try{n.moveToPoint(e.clientX,e.clientY)}catch(t){}d.setEndPoint(0>f.compareEndPoints("StartToStart",n)?"EndToEnd":"StartToStart",n),d.select()}}function i(){y.removeListener("mousemove",n),g.removeListener("mouseup",i),y.removeListener("mouseup",i),d.select()}if((e=e.data).getTarget().is("html")&&e.$.y<y.$.clientHeight&&e.$.x<y.$.clientWidth){d=v.$.createTextRange();try{d.moveToPoint(e.$.clientX,e.$.clientY)}catch(t){}f=d.duplicate(),y.on("mousemove",n),g.on("mouseup",i),y.on("mouseup",i)}})),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&y.on("mousedown",(function(e){e.data.getTarget().is("html")&&(g.on("mouseup",n),y.on("mouseup",n))}))),m.attachListener(m,"selectionchange",i,r),m.attachListener(m,"keyup",o,r),m.attachListener(m,"touchstart",o,r),m.attachListener(m,"touchend",o,r),CKEDITOR.env.ie&&m.attachListener(m,"keydown",(function(e){var t=this.getSelection(1),n=function(e){return(e=e.getRanges()[0])&&(e=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")}),!0))&&"false"===e.getAttribute("contenteditable")?e:null}(t);n&&!n.equals(m)&&(t.selectElement(n),e.data.preventDefault())}),r),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){r.forceNextSelectionCheck(),r.selectionChange(1)})),b&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)?(m.attachListener(m,"mousedown",(function(){u=1})),m.attachListener(h.getDocumentElement(),"mouseup",(function(){u&&o.call(r),u=0}))):m.attachListener(CKEDITOR.env.ie?m:h.getDocumentElement(),"mouseup",o,r),CKEDITOR.env.webkit&&m.attachListener(h,"keydown",(function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:m.hasFocus&&c(m)}}),null,null,-1),m.attachListener(m,"keydown",function(e){var t={37:1,39:1,8:1,46:1};return function(n){var i=n.data.getKeystroke();if(t[i]){var o=e.getSelection().getRanges(),r=o[0];1==o.length&&r.collapsed&&(i=r[38>i?"getPreviousEditableNode":"getNextEditableNode"]())&&i.type==CKEDITOR.NODE_ELEMENT&&"false"==i.getAttribute("contenteditable")&&(e.getSelection().fake(i),n.data.preventDefault(),n.cancel())}}}(r),null,null,-1)})),r.on("setData",(function(){r.unlockSelection(),CKEDITOR.env.webkit&&n()})),r.on("contentDomUnload",(function(){r.unlockSelection()})),CKEDITOR.env.ie9Compat&&r.on("beforeDestroy",n,null,null,9),r.on("dataReady",(function(){delete r._.fakeSelection,delete r._.hiddenSelectionContainer,r.selectionChange(1)})),r.on("loadSnapshot",(function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=r.editable().getLast(e);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(e=r.editable().getFirst(e))&&e.is("br")&&e.getAttribute("_moz_editor_bogus_node")&&e.remove())}),null,null,100),r.on("key",(function(e){if("wysiwyg"==r.mode){var t=r.getSelection();if(t.isFake){var n=C[e.data.keyCode];if(n)return n({editor:r,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}}))})),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",(function(e){var t=e.editor;t.on("selectionChange",(function(){var e=t.editable(),n=e.getCustomData("cke-fillingChar");n&&(n.getCustomData("ready")?(c(e),e.editor.fire("selectionCheck")):n.setCustomData("ready",1))}),null,null,-1),t.on("beforeSetMode",(function(){c(t.editable())}),null,null,-1),t.on("getSnapshot",(function(e){e.data&&(e.data=d(e.data))}),t,null,20),t.on("toDataFormat",(function(e){e.data.dataValue=d(e.data.dataValue)}),null,null,0)})),CKEDITOR.editor.prototype.selectionChange=function(e){(e?i:o).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(e){return(e=e||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!e.isLocked&&e.lock(),this._.savedSelection=e,!0)},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return!!t&&(t.unlock(e),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection){var t=e;e=e.root}var i,o,r=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:m++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=r?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;if(e=this.getNative())if(e.getRangeAt)i=(o=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(o.commonAncestorContainer);else{try{o=e.createRange()}catch(n){}i=o&&CKEDITOR.dom.element.get(o.item&&o.item(0)||o.parentElement())}return(!i||i.type!=CKEDITOR.NODE_ELEMENT&&i.type!=CKEDITOR.NODE_TEXT||!this.root.equals(i)&&!this.root.contains(i))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var E={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:d,_createFillingCharSequenceNode:u,FILLING_CHAR_SEQUENCE:v}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=p?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:p?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),i=n.type;"Text"==i&&(t=CKEDITOR.SELECTION_TEXT),"Control"==i&&(t=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(u){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT;if((n=this.getNative())&&n.rangeCount){if(1==n.rangeCount){var n,i=(n=n.getRangeAt(0)).startContainer;i==n.endContainer&&1==i.nodeType&&1==n.endOffset-n.startOffset&&E[i.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:function(){var e=p?function(){function e(e){return new CKEDITOR.dom.node(e).getIndex()}var t=function(t,n){(t=t.duplicate()).collapse(n);var i=t.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var o,r,a,s,u=i.children,c=t.duplicate(),d=0,f=u.length-1,h=-1;d<=f;)if(h=Math.floor((d+f)/2),c.moveToElementText(o=u[h]),0<(a=c.compareEndPoints("StartToStart",t)))f=h-1;else{if(!(0>a))return{container:i,offset:e(o)};d=h+1}if(-1==h||h==u.length-1&&0>a){if(c.moveToElementText(i),c.setEndPoint("StartToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,u=i.childNodes,!c)return(o=u[u.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:i,offset:u.length}:{container:o,offset:o.nodeValue.length};for(i=u.length;0<c&&0<i;)(r=u[--i]).nodeType==CKEDITOR.NODE_TEXT&&(s=r,c-=r.nodeValue.length);return{container:s,offset:-c}}if(c.collapse(0<a),c.setEndPoint(0<a?"StartToStart":"EndToStart",t),!(c=c.text.replace(/(\r\n|\r)/g,"\n").length))return{container:i,offset:e(o)+(0<a?0:1)};for(;0<c;)try{(r=o[0<a?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(c-=r.nodeValue.length,s=r),o=r}catch(l){return{container:i,offset:e(o)}}return{container:s,offset:0<a?-c:s.nodeValue.length+c}};return function(){var e=(s=this.getNative())&&s.createRange(),n=this.getType();if(!s)return[];if(n==CKEDITOR.SELECTION_TEXT)return s=new CKEDITOR.dom.range(this.root),n=t(e,!0),s.setStart(new CKEDITOR.dom.node(n.container),n.offset),n=t(e),s.setEnd(new CKEDITOR.dom.node(n.container),n.offset),s.endContainer.getPosition(s.startContainer)&CKEDITOR.POSITION_PRECEDING&&s.endOffset<=s.startContainer.getIndex()&&s.collapse(),[s];if(n==CKEDITOR.SELECTION_ELEMENT){n=[];for(var i=0;i<e.length;i++){for(var o=e.item(i),r=o.parentNode,a=0,s=new CKEDITOR.dom.range(this.root);a<r.childNodes.length&&r.childNodes[a]!=o;a++);s.setStart(new CKEDITOR.dom.node(r),a),s.setEnd(new CKEDITOR.dom.node(r),a+1),n.push(s)}return n}return[]}}():function(){var e,t=[],n=this.getNative();if(!n)return t;for(var i=0;i<n.rangeCount;i++){var o=n.getRangeAt(i);(e=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(o.startContainer),o.startOffset),e.setEnd(new CKEDITOR.dom.node(o.endContainer),o.endOffset),t.push(e)}return t};return function(t){var n=this._.cache,i=n.ranges;return i||(n.ranges=i=new CKEDITOR.dom.rangeList(e.call(this))),t?function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.getCommonAncestor().isReadOnly()&&e.splice(t,1),!n.collapsed){if(n.startContainer.isReadOnly())for(var i,o=n.startContainer;o&&!((i=o.type==CKEDITOR.NODE_ELEMENT)&&o.is("body")||!o.isReadOnly());)i&&"false"==o.getAttribute("contentEditable")&&n.setStartAfter(o),o=o.getParent();o=n.startContainer,i=n.endContainer;var r=n.startOffset,a=n.endOffset,s=n.clone();o&&o.type==CKEDITOR.NODE_TEXT&&(r>=o.getLength()?s.setStartAfter(o):s.setStartBefore(o)),i&&i.type==CKEDITOR.NODE_TEXT&&(a?s.setEndAfter(i):s.setEndBefore(i)),(o=new CKEDITOR.dom.walker(s)).evaluator=function(i){if(i.type==CKEDITOR.NODE_ELEMENT&&i.isReadOnly()){var o=n.clone();return n.setEndBefore(i),n.collapsed&&e.splice(t--,1),i.getPosition(s.endContainer)&CKEDITOR.POSITION_CONTAINS||(o.setStartAfter(i),o.collapsed||e.splice(t+1,0,o)),!0}return!1},o.next()}}return e}(new CKEDITOR.dom.rangeList(i.slice())):i}}(),getStartElement:function(){var e,t=this._.cache;if(void 0!==t.startElement)return t.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)(e=n.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());else{for(n.optimize();n.startOffset==((e=n.startContainer).getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary();)n.setStartAfter(e);if((e=n.startContainer).type!=CKEDITOR.NODE_ELEMENT)return e.getParent();if((e=e.getChild(n.startOffset))&&e.type==CKEDITOR.NODE_ELEMENT)for(n=e.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)e=n,n=n.getFirst();else e=n.startContainer}e=e.$}}return t.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,n=CKEDITOR.tools.tryThese((function(){return t.getNative().createRange().item(0)}),(function(){for(var e,n,i=t.getRanges()[0].clone(),o=2;o&&!((e=i.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&E[e.getName()]&&(n=e));o--)i.shrink(CKEDITOR.SHRINK_ELEMENT);return n&&n.$}));return e.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative();return t=p?"Control"==t.type?"":t.createRange().text:t.toString(),e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var i=this.getSelectedElement(),o=this.getRanges(),r=this.isFake;this.isLocked=0,this.reset(),e&&(e=i||o[0]&&o[0].getCommonAncestor())&&e.getAscendant("body",1)&&(this.root.editor.plugins.tableselection&&t(o)?n.call(this,o):r?this.fake(i):i&&2>o.length?this.selectElement(i):this.selectRanges(o))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection)if(this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var n=e.checkDirty();e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot"),!n&&e.resetDirty()}delete e._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=m++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var i=this.root.editor,o=i&&i._.hiddenSelectionContainer;if(this.reset(),o){o=this.root;for(var a,s=0;s<e.length;++s)(a=e[s]).endContainer.equals(o)&&(a.endOffset=Math.min(a.endOffset,o.getChildCount()))}if(e.length)if(this.isLocked){var h=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),h&&!h.equals(this.root)&&h.focus()}else{var g,m,v;if(1==e.length&&!(v=e[0]).collapsed&&(g=v.getEnclosedNode())&&g.type==CKEDITOR.NODE_ELEMENT&&((v=v.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(m=v.getEnclosedNode())&&m.type==CKEDITOR.NODE_ELEMENT&&(g=m),"false"==g.getAttribute("contenteditable"))||(g=void 0),g)this.fake(g);else if(i&&i.plugins.tableselection&&i.plugins.tableselection.isSupportedEnvironment()&&t(e)&&!f&&!e[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))n.call(this,e);else{if(p){var y,b,T;if(m=CKEDITOR.dom.walker.whitespaces(!0),g=/\ufeff|\u00a0/,v={table:1,tbody:1,tr:1},1<e.length&&e[0].setEnd((i=e[e.length-1]).endContainer,i.endOffset),e=(i=e[0]).collapsed,(o=i.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in E&&(!o.is("a")||!o.getText()))try{return(T=o.$.createControlRange()).addElement(o.$),void T.select()}catch(r){}(i.startContainer.type==CKEDITOR.NODE_ELEMENT&&i.startContainer.getName()in v||i.endContainer.type==CKEDITOR.NODE_ELEMENT&&i.endContainer.getName()in v)&&(i.shrink(CKEDITOR.NODE_ELEMENT,!0),e=i.collapsed),v=(T=i.createBookmark()).startNode,e||(h=T.endNode),(T=i.document.$.body.createTextRange()).moveToElementText(v.$),T.moveStart("character",1),h?((g=i.document.$.body.createTextRange()).moveToElementText(h.$),T.setEndPoint("EndToEnd",g),T.moveEnd("character",-1)):(y=v.getNext(m),b=v.hasAscendant("pre"),y=!(y&&y.getText&&y.getText().match(g))&&(b||!v.hasPrevious()||v.getPrevious().is&&v.getPrevious().is("br")),(b=i.document.createElement("span")).setHtml("&#65279;"),b.insertBefore(v),y&&i.document.createText("\ufeff").insertBefore(v)),i.setStartBefore(v),v.remove(),e?(y?(T.moveStart("character",-1),T.select(),i.document.$.selection.clear()):T.select(),i.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START),b.remove()):(i.setEndBefore(h),h.remove(),T.select())}else{if(!(h=this.getNative()))return;for(this.removeAllRanges(),T=0;T<e.length;T++)if(T<e.length-1&&(b=e[T+1],(g=(y=e[T]).clone()).setStart(y.endContainer,y.endOffset),g.setEnd(b.startContainer,b.startOffset),!g.collapsed&&(g.shrink(CKEDITOR.NODE_ELEMENT,!0),i=g.getCommonAncestor(),g=g.getEnclosedNode(),i.isReadOnly()||g&&g.isReadOnly())))b.setStart(y.startContainer,y.startOffset),e.splice(T--,1);else{i=e[T],b=this.document.$.createRange(),i.collapsed&&CKEDITOR.env.webkit&&l(i)&&(g=u(this.root),i.insertNode(g),(y=g.getNext())&&!g.getPrevious()&&y.type==CKEDITOR.NODE_ELEMENT&&"br"==y.getName()?(c(this.root),i.moveToPosition(y,CKEDITOR.POSITION_BEFORE_START)):i.moveToPosition(g,CKEDITOR.POSITION_AFTER_END)),b.setStart(i.startContainer.$,i.startOffset);try{b.setEnd(i.endContainer.$,i.endOffset)}catch(d){if(!(0<=d.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw d;i.collapse(1),b.setEnd(i.endContainer.$,i.endOffset)}h.addRange(b)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e,t){var n=this.root.editor;void 0===t&&e.hasAttribute("aria-label")&&(t=e.getAttribute("aria-label")),this.reset(),function(e,t){var n=t&&CKEDITOR.tools.htmlEncode(t)||"&nbsp;";n=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+n+"</div>",e.document),e.fire("lockSnapshot"),e.editable().append(n);var i=e.getSelection(1),o=e.createRange(),r=i.root.on("selectionchange",(function(e){e.cancel()}),null,null,0);o.setStartAt(n,CKEDITOR.POSITION_AFTER_START),o.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),i.selectRanges([o]),r.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=n}(n,t);var i=this._.cache,o=new CKEDITOR.dom.range(this.root);o.setStartBefore(e),o.setEndAfter(e),i.ranges=new CKEDITOR.dom.rangeList(o),i.selectedElement=i.startElement=e,i.type=CKEDITOR.SELECTION_ELEMENT,i.selectedText=i.nativeSel=null,this.isFake=1,this.rev=m++,n._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))},isInTable:function(e){return t(this.getRanges(),e)},isCollapsed:function(){var e=this.getRanges();return 1===e.length&&e[0].collapsed},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var n,i=[],o=0;o<e.length;o++){var r=new CKEDITOR.dom.range(this.root);r.moveToBookmark(e[o]),i.push(r)}return e.isFake&&((n=t(i)?i[0]._getTableElement():i[0].getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),e.isFake=0)),e.isFake&&!t(i)?this.fake(n):this.selectRanges(i),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[p?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var n,i;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))n=e;else if(!i){var o=e.getAttribute("contentEditable");"false"==o?n=e:"true"==o&&(i=1)}return n}function t(e,t,n,i){return(e.getPosition(t)|i)==i&&(!n.childRule||n.childRule(e))}function n(i){var r=i.document;if(i.collapsed)r=p(this,r),i.insertNode(r),i.moveToPosition(r,CKEDITOR.POSITION_BEFORE_END);else{var a,s=this.element,l=this._.definition,u=(y=l.ignoreReadonly)||l.includeReadonly;null==u&&(u=i.root.getCustomData("cke_includeReadonly"));var c=CKEDITOR.dtd[s];c||(a=!0,c=CKEDITOR.dtd.span),i.enlarge(CKEDITOR.ENLARGE_INLINE,1),i.trim();var d,h=i.createBookmark(),g=h.startNode,m=h.endNode,v=g;if(!y){var y=e(g,b=i.getCommonAncestor()),b=e(m,b);y&&(v=y.getNextSourceNode(!0)),b&&(m=b)}for(v.getPosition(m)==CKEDITOR.POSITION_FOLLOWING&&(v=0);v;){if(y=!1,v.equals(m))v=null,y=!0;else{b=(w=v.type==CKEDITOR.NODE_ELEMENT?v.getName():null)&&"false"==v.getAttribute("contentEditable");var T=w&&v.getAttribute("data-nostyle");if(w&&v.data("cke-bookmark")||v.type===CKEDITOR.NODE_COMMENT){v=v.getNextSourceNode(!0);continue}if(b&&u&&CKEDITOR.dtd.$block[w])for(var C=void 0,E=0,_=(M=(N=o(_=v)).length)&&new CKEDITOR.dom.range(_.getDocument());E<M;++E){C=N[E];var x=CKEDITOR.filter.instances[C.data("cke-filter")];x&&!x.check(this)||(_.selectNodeContents(C),n.call(this,_))}if(N=w?!c[w]||T||b&&!u?0:t(v,m,l,O):1){if(N=l,M=s,E=a,!(C=v.getParent())||!(C.getDtd()||CKEDITOR.dtd.span)[M]&&!E||N.parentRule&&!N.parentRule(C))y=!0;else if(d||w&&CKEDITOR.dtd.$removeEmpty[w]&&(v.getPosition(m)|O)!=O||(d=i.clone()).setStartBefore(v),(w=v.type)==CKEDITOR.NODE_TEXT||b||w==CKEDITOR.NODE_ELEMENT&&!v.getChildCount()){for(var I,w=v;(y=!w.getNext(D))&&c[(I=w.getParent()).getName()]&&t(I,g,l,R);)w=I;d.setEndAfter(w)}}else y=!0;v=v.getNextSourceNode(T||b)}if(y&&d&&!d.collapsed){b=(y=p(this,r)).hasAttributes(),T=d.getCommonAncestor(),w={};for(var k,S,A,N={},M=(C={},{});y&&T;){if(T.getName()==s){for(k in l.attributes)!M[k]&&(A=T.getAttribute(S))&&(y.getAttribute(k)==A?N[k]=1:M[k]=1);for(S in l.styles)!C[S]&&(A=T.getStyle(S))&&(y.getStyle(S)==A?w[S]=1:C[S]=1)}T=T.getParent()}for(k in N)y.removeAttribute(k);for(S in w)y.removeStyle(S);b&&!y.hasAttributes()&&(y=null),y?(d.extractContents().appendTo(y),d.insertNode(y),f.call(this,y),y.mergeSiblings(),CKEDITOR.env.ie||y.$.normalize()):(y=new CKEDITOR.dom.element("span"),d.extractContents().appendTo(y),d.insertNode(y),f.call(this,y),y.remove(!0)),d=null}}i.moveToBookmark(h),i.shrink(CKEDITOR.SHRINK_TEXT),i.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function i(e){function t(){for(var e=new CKEDITOR.dom.elementPath(i.getParent()),t=new CKEDITOR.dom.elementPath(c.getParent()),n=null,o=null,r=0;r<e.elements.length;r++){var a=e.elements[r];if(a==e.block||a==e.blockLimit)break;f.checkElementRemovable(a,!0)&&(n=a)}for(r=0;r<t.elements.length&&(a=t.elements[r])!=t.block&&a!=t.blockLimit;r++)f.checkElementRemovable(a,!0)&&(o=a);o&&c.breakParent(o),n&&i.breakParent(n)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=e.createBookmark(),i=n.startNode,o=this._.definition.alwaysRemoveElement;if(e.collapsed){for(var r,a,s=new CKEDITOR.dom.elementPath(i.getParent(),e.root),l=0;l<s.elements.length&&(a=s.elements[l])&&a!=s.block&&a!=s.blockLimit;l++)if(this.checkElementRemovable(a)){var u;!o&&e.collapsed&&(e.checkBoundaryOfElement(a,CKEDITOR.END)||(u=e.checkBoundaryOfElement(a,CKEDITOR.START)))?(r=a).match=u?"start":"end":(a.mergeSiblings(),a.is(this.element)?d.call(this,a):h(a,y(this)[a.getName()]))}if(r){for(o=i,l=0;!(a=s.elements[l]).equals(r);l++)a.match||((a=a.clone()).append(o),o=a);o["start"==r.match?"insertBefore":"insertAfter"](r)}}else{var c=n.endNode,f=this;for(t(),s=i;!s.equals(c);)r=s.getNextSourceNode(),s.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(s)&&(s.getName()==this.element?d.call(this,s):h(s,y(this)[s.getName()]),r.type==CKEDITOR.NODE_ELEMENT&&r.contains(i)&&(t(),r=i.getNext())),s=r}e.moveToBookmark(n),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function o(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}function r(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&m(e,this)}function a(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){var n=(t=this._.definition).attributes;if(n)for(var i in n)e.removeAttribute(i,n[i]);if(t.styles)for(var o in t.styles)t.styles.hasOwnProperty(o)&&e.removeStyle(o)}}function s(e){var t=e.createBookmark(!0),n=e.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var i,o=e.document;i=n.getNextParagraph();)!i.isReadOnly()&&(!n.activeFilter||n.activeFilter.check(this))&&u(i,p(this,o,i));e.moveToBookmark(t)}function l(e){var t,n,i=e.createBookmark(1),o=e.createIterator();for(o.enforceRealBlocks=!0,o.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;t=o.getNextParagraph();)this.checkElementRemovable(t)&&(t.is("pre")?((n=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&t.copyAttributes(n),u(t,n)):d.call(this,t));e.moveToBookmark(i)}function u(e,t){(n=!t)&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var n,i,o=t&&t.is("pre"),r=e.is("pre"),a=!o&&r;if(o&&!r){if(r=t,(a=e.getBogus())&&a.remove(),a=(a=(a=(a=c(a=e.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var s=e.getDocument().createElement("div");s.append(r),r.$.outerHTML="<pre>"+a+"</pre>",r.copyAttributes(s.getFirst()),r=s.getFirst().remove()}else r.setHtml(a);t=r}else a?t=function(e,t){var n;1<e.length&&(n=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var i=0;i<e.length;i++){var o=c(o=(o=e[i]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,"");if(o=c(o,/\n$/,""),o=(o=(o=c(o,/^[ \t]+|[ \t]+$/g,(function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "}))).replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,(function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "})),n){var r=t.clone();r.setHtml(o),n.append(r)}else t.setHtml(o)}return n||t}(n?[e.getHtml()]:function(e){var t=[];return c(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,(function(e,t,n){return t+"</pre>"+n+"<pre>"})).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,(function(e,n){t.push(n)})),t}(e),t):e.moveChildren(t);t.replace(e),o?(i=(n=t).getPrevious(w))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("pre")&&(o=c(i.getHtml(),/\n$/,"")+"\n\n"+c(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+o+"</pre>":n.setHtml(o),i.remove()):n&&g(t)}function c(e,t,n){var i="",o="";return e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,(function(e,t,n){return t&&(i=t),n&&(o=n),""})),i+e.replace(t,n)+o}function d(e,t){var n,i=(o=this._.definition).attributes,o=o.styles,r=y(this)[e.getName()],a=CKEDITOR.tools.isEmpty(i)&&CKEDITOR.tools.isEmpty(o);for(n in i)("class"!=n&&!this._.definition.fullMatch||e.getAttribute(n)==b(n,i[n]))&&(t&&"data-"==n.slice(0,5)||(a=e.hasAttribute(n),e.removeAttribute(n)));for(var s in o)this._.definition.fullMatch&&e.getStyle(s)!=b(s,o[s],!0)||(a=a||!!e.getStyle(s),e.removeStyle(s));h(e,r,E[e.getName()]),a&&(this._.definition.alwaysRemoveElement?g(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?g(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function f(e){for(var t,n=y(this),i=e.getElementsByTag(this.element),o=i.count();0<=--o;)(t=i.getItem(o)).isReadOnly()||d.call(this,t,!0);for(var r in n)if(r!=this.element)for(o=(i=e.getElementsByTag(r)).count()-1;0<=o;o--)(t=i.getItem(o)).isReadOnly()||h(t,n[r])}function h(e,t,n){if(t=t&&t.attributes)for(var i=0;i<t.length;i++){var o,r=t[i][0];if(o=e.getAttribute(r)){var a=t[i][1];(null===a||a.test&&a.test(o)||"string"==typeof a&&o==a)&&e.removeAttribute(r)}}n||g(e)}function g(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(w),i=e.getNext(w);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||e.append("br",1),!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||e.append("br"),e.remove(!0)}else n=e.getFirst(),i=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),i&&!n.equals(i)&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings())}function p(e,t,n){var i;return"*"==(i=e.element)&&(i="span"),i=new CKEDITOR.dom.element(i,t),n&&n.copyAttributes(i),i=m(i,e),t.getCustomData("doc_processing_style")&&i.hasAttribute("id")?i.removeAttribute("id"):t.setCustomData("doc_processing_style",1),i}function m(e,t){var n=(i=t._.definition).attributes,i=CKEDITOR.style.getStyleText(i);if(n)for(var o in n)e.setAttribute(o,n[o]);return i&&e.setAttribute("style",i),e.getDocument().removeCustomData("doc_processing_style"),e}function v(e,t){for(var n in e)e[n]=e[n].replace(I,(function(e,n){return t[n]}))}function y(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var o,r;if("string"==typeof(s=n[i])?o=s.toLowerCase():(o=s.element?s.element.toLowerCase():e.element,r=s.attributes),s=t[o]||(t[o]={}),r){var a,s=s.attributes=s.attributes||[];for(a in r)s.push([a.toLowerCase(),r[a]])}}}return t}function b(e,t,n){var i=new CKEDITOR.dom.element("span");return i[n?"setStyle":"setAttribute"](e,t),i[n?"getStyle":"getAttribute"](e)}function T(e,t){function n(e,t){return"font-family"==t.toLowerCase()?e.replace(/["']/g,""):e}for(var i in"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e)),"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t,!0)),e)if(!(i in t)||n(t[i],i)!=n(e[i],i)&&"inherit"!=e[i]&&"inherit"!=t[i])return!1;return!0}function C(e,t,n){var i=e.getRanges();t=t?this.removeFromRange:this.applyToRange;for(var o,r=i.createIterator();o=r.getNextRange();)t.call(this,o,n);e.selectRanges(i)}var E={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},_={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},x=/\s*(?:;\s*|$)/,I=/#\((.+?)\)/g,D=CKEDITOR.dom.walker.bookmark(0,1),w=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){if("string"==typeof e.type)return new CKEDITOR.style.customHandlers[e.type](e);var n=e.attributes;n&&n.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style),t&&(v((e=CKEDITOR.tools.clone(e)).attributes,t),v(e.styles,t)),n=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*",this.type=e.type||(E[n]?CKEDITOR.STYLE_BLOCK:_[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return C.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),C.call(this,e.getSelection(),0,e),this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return C.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),C.call(this,e.getSelection(),1,e),this._.enterMode=t}},applyToRange:function(e){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?n:this.type==CKEDITOR.STYLE_BLOCK?s:this.type==CKEDITOR.STYLE_OBJECT?r:null,this.applyToRange(e)},removeFromRange:function(e){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?i:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?a:null,this.removeFromRange(e)},applyToObject:function(e){m(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n,i=e.elements,o=0;o<i.length;o++)if(n=i[o],this.type!=CKEDITOR.STYLE_INLINE||n!=e.block&&n!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var r=n.getName();if(!("string"==typeof this.element?r==this.element:r in this.element))continue}if(this.checkElementRemovable(n,!0,t))return!0}}return!1},checkApplicable:function(e,t,n){if(t&&t instanceof CKEDITOR.filter&&(n=t),n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var n=this._.definition;if(!e||!n.ignoreReadonly&&e.isReadOnly())return!1;var i=e.getName();if("string"==typeof this.element?i==this.element:i in this.element){if(!t&&!e.hasAttributes())return!0;if(i=n._AC)n=i;else{i={};var o=0,r=n.attributes;if(r)for(var a in r)o++,i[a]=r[a];(a=CKEDITOR.style.getStyleText(n))&&(i.style||o++,i.style=a),i._length=o,n=n._AC=i}if(!n._length)return!0;for(var s in n)if("_length"!=s)if(i=e.getAttribute(s)||"","style"==s?T(n[s],i):n[s]==i){if(!t)return!0}else if(t)return!1;if(t)return!0}return!1},checkElementRemovable:function(e,t,n){if(this.checkElementMatch(e,t,n))return!0;if(t=y(this)[e.getName()]){var i;if(!(t=t.attributes))return!0;for(n=0;n<t.length;n++)if(i=e.getAttribute(i=t[n][0])){var o=t[n][1];if(null===o)return!0;if("string"==typeof o){if(i==o)return!0}else if(o.test(i))return!0}}return!1},buildPreview:function(e){var t=this._.definition,n=[],i=t.element;"bdo"==i&&(i="span"),n=["<",i];var o=t.attributes;if(o)for(var r in o)n.push(" ",r,'="',o[r],'"');return(o=CKEDITOR.style.getStyleText(t))&&n.push(' style="',o,'"'),n.push(">",e||t.name,"</",i,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){if(t=e._ST)return t;var t=e.styles,n=e.attributes&&e.attributes.style||"",i="";for(var o in n.length&&(n=n.replace(x,";")),t){var r=t[o],a=(o+":"+r).replace(x,";");"inherit"==r?i+=a:n+=a}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),e._ST=n+i},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e},this.setup&&this.setup(e)};return t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0),this.customHandlers[e.type]=t};var O=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,R=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,n)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on("selectionChange",(function(e){for(var t=0;t<n.length;t++){var i=n[t],o=i.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,o)}}))),n.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this;if(!1===(n=t.config.stylesCombo_stylesSet||t.config.stylesSet))e(null);else if(n instanceof Array)t._.stylesDefinitions=n,e(n);else{n||(n="default");var n,i=(n=n.split(":"))[0];CKEDITOR.stylesSet.addExternal(i,n[1]?n.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(i,(function(n){t._.stylesDefinitions=n[i],e(t._.stylesDefinitions)}))}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var e=CKEDITOR.getUrl("vendor/promise.js");if("function"==typeof window.define&&window.define.amd&&"function"==typeof window.require)return window.require([e],(function(e){CKEDITOR.tools.promise=e}));CKEDITOR.scriptLoader.load(e,(function(t){return t?void 0!==window.ES6Promise?CKEDITOR.tools.promise=ES6Promise:void 0:CKEDITOR.error("no-vendor-lib",{path:e})}))}}(),function(){function e(e,i,o){e.once("selectionCheck",(function(e){if(!t){var r=e.data.getRanges()[0];o.equals(r)?e.cancel():i.equals(r)&&(n=!0)}}),null,null,-1)}var t=!0,n=!1;CKEDITOR.dom.selection.setupEditorOptimization=function(e){e.on("selectionCheck",(function(e){e.data&&!n&&e.data.optimizeInElementEnds(),n=!1})),e.on("contentDom",(function(){var t=e.editable();t&&(t.attachListener(t,"keydown",(function(e){this._.shiftPressed=e.data.$.shiftKey}),this),t.attachListener(t,"keyup",(function(e){this._.shiftPressed=e.data.$.shiftKey}),this))}))},CKEDITOR.dom.selection.prototype.optimizeInElementEnds=function(){var n,i=this.getRanges()[0],o=this.root.editor;if(this.root.editor._.shiftPressed||this.isFake||i.isCollapsed||i.startContainer.equals(i.endContainer))n=!1;else if(0===i.endOffset)n=!0;else{n=i.startContainer.type===CKEDITOR.NODE_TEXT;var r=i.endContainer.type===CKEDITOR.NODE_TEXT,a=n?i.startContainer.getLength():i.startContainer.getChildCount();n=i.startOffset===a||n^r}n&&(n=i.clone(),i.shrink(CKEDITOR.SHRINK_TEXT,!1,{skipBogus:!0}),t=!1,e(o,i,n),i.select(),t=!0)}}(),CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var e,t={},n={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(n[e]=1);CKEDITOR.dom.elementPath=function(e,i){var o,r=null,a=null,s=[],l=e;i=i||e.getDocument().getBody(),l||(l=i);do{if(l.type==CKEDITOR.NODE_ELEMENT){if(s.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(i))break;if(!a&&(o=l.getName(),"true"==l.getAttribute("contenteditable")?a=l:!r&&n[o]&&(r=l),t[o])){if(o=!r&&"div"==o){e:{for(var u=0,c=(o=l.getChildren()).count();u<c;u++){var d=o.getItem(u);if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[d.getName()]){o=!0;break e}}o=!1}o=!o}o?r=l:a=l}}}while(l=l.getParent());a||(a=i),this.block=r,this.blockLimit=a,this.root=i,this.elements=s}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements;if(!(e=e&&e.elements)||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0},contains:function(e,t,n){var i,o=0;"string"==typeof e&&(i=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?i=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?i=function(t){return-1<CKEDITOR.tools.indexOf(e,t.getName())}:"function"==typeof e?i=e:"object"==typeof e&&(i=function(t){return t.getName()in e});var r=this.elements,a=r.length;for(t&&(n?o+=1:--a),n&&(r=Array.prototype.slice.call(r,0)).reverse();o<a;o++)if(i(r[o]))return r[o];return null},isContextFor:function(e){return!(e in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[e]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},isEmpty:function(e){var t=this.getText();return e&&(t=CKEDITOR.tools.trim(t)),!t||t===CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE},split:function(e){var t=this.$.parentNode,n=t.childNodes.length,i=this.getLength(),o=this.getDocument(),r=new CKEDITOR.dom.text(this.$.splitText(e),o);return t.childNodes.length==n&&(e>=i?(r=o.createText("")).insertAfter(this):((e=o.createText("")).insertAfter(r),e.remove())),r},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,n){var i=e.serializable,o=t[n?"endContainer":"startContainer"],r=n?"endOffset":"startOffset",a=i?t.document.getById(e.startNode):e.startNode;return e=i?t.document.getById(e.endNode):e.endNode,o.equals(a.getPrevious())?(t.startOffset=t.startOffset-o.getLength()-e.getPrevious().getLength(),o=e.getNext()):o.equals(e.getPrevious())&&(t.startOffset-=o.getLength(),o=e.getNext()),o.equals(a.getParent())&&t[r]++,o.equals(e.getParent())&&t[r]++,t[n?"endContainer":"startContainer"]=o,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e,t=this,n=CKEDITOR.dom.walker.bookmark(),i=[];return{getNextRange:function(o){var r=t[e=void 0===e?0:e+1];if(r&&1<t.length){if(!e)for(var a=t.length-1;0<=a;a--)i.unshift(t[a].createBookmark(!0));if(o)for(var s=0;t[e+s+1];){var l=r.document;for(o=0,a=l.getById(i[s].endNode),l=l.getById(i[s+1].startNode);;){if(a=a.getNextSourceNode(!1),l.equals(a))o=1;else if(n(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())continue;break}if(!o)break;s++}for(r.moveToBookmark(i.shift());s--;)(a=t[++e]).moveToBookmark(i.shift()),r.setEnd(a.endContainer,a.endOffset)}return r}}},createBookmarks:function(t){for(var n,i=[],o=0;o<this.length;o++){i.push(n=this[o].createBookmark(t,!0));for(var r=o+1;r<this.length;r++)this[r]=e(n,this[r]),this[r]=e(n,this[r],!0)}return i},createBookmarks2:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var n=CKEDITOR.skin["ua_"+t],i=CKEDITOR.env;if(n){n=n.split(",").sort((function(e,t){return e>t?-1:1}));for(var o,r=0;r<n.length;r++)if(o=n[r],i.ie&&(o.replace(/^ie/,"")==i.version||i.quirks&&"iequirks"==o)&&(o="ie"),i[o]){t+="_"+n[r];break}}return CKEDITOR.getUrl(e()+t+".css")}function n(e,n){r[e]||(CKEDITOR.document.appendStyleSheet(t(e)),r[e]=1),n&&n()}function i(e){var t=e.getById(a);return t||((t=e.getHead().append("style")).setAttribute("id",a),t.setAttribute("type","text/css")),t}function o(e,t,n){var i,o,r;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),o=0;o<t.length;o++)t[o]=t[o].split("{");for(var a=0;a<e.length;a++)if(CKEDITOR.env.webkit)for(o=0;o<t.length;o++){for(r=t[o][1],i=0;i<n.length;i++)r=r.replace(n[i][0],n[i][1]);e[a].$.sheet.addRule(t[o][0],r)}else{for(r=t,i=0;i<n.length;i++)r=r.replace(n[i][0],n[i][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?e[a].$.styleSheet.cssText+=r:e[a].$.innerHTML+=r}}var r={};CKEDITOR.skin={path:e,loadPart:function(t,i){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),(function(){n(t,i)})):n(t,i)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,n,i){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:i||"16px"})},getIconStyle:function(e,t,n,i,o){var r;return e&&(e=e.toLowerCase(),t&&(r=this.icons[e+"-rtl"]),r||(r=this.icons[e])),i=i||r&&r.offset,o=o||r&&r.bgsize||"16px",(e=n||r&&r.path||"")&&(e=e.replace(/'/g,"\\'")),e&&"background-image:url('"+CKEDITOR.getUrl(e)+"');background-position:0 "+i+"px;background-size:"+o+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=i(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var n=CKEDITOR.skin.chameleon,i="",r="";"function"==typeof n&&(i=n(this,"editor"),r=n(this,"panel")),o([t],i,e=[[l,e]]),o(s,r,e)}).call(this,e)}});var a="cke_ui_color",s=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",(function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor;e=function(e){if(!(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){var n=i(e);s.push(n),t.on("destroy",(function(){s=CKEDITOR.tools.array.filter(s,(function(e){return n!==e}))})),(e=t.getUiColor())&&o([n],CKEDITOR.skin.chameleon(t,"panel"),[[l,e]])}},t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}}))}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),n=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=n)}catch(i){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="bootstrapck",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=function(){var e=function(e,t){for(var n=e.match(/[^#]./g),i=0;3>i;i++){var o,r=n,a=i;o=parseInt(n[i],16),o=("0"+(0>t?0|o*(1+t):0|o+(255-o)*t).toString(16)).slice(-2),r[a]=o}return"#"+n.join("")},t=function(){var e=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(t,n){return e.output({from:t,to:n})}}(),n={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(i,o){var r={id:"."+i.id,defaultBorder:e(r=i.uiColor,-.1),defaultGradient:t(e(r,.9),r),lightGradient:t(e(r,1),e(r,.7)),mediumGradient:t(e(r,.8),e(r,.5)),ckeButtonOn:t(e(r,.6),e(r,.7)),ckeResizer:e(r,-.4),ckeToolbarSeparator:e(r,.5),ckeColorauto:e(r,.8),dialogBody:e(r,.7),dialogTabSelected:t("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:e(r,-.6),elementsPathBg:r,menubuttonIcon:e(r,.5),menubuttonIconHover:e(r,.3)};return n[o].output(r).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._.default=this._.initValue=e.default||"",this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},n={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},i={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",(function(){this.getInputElement().on("change",(function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),r=/^on([A-Z]\w+)/,a=function(e){for(var t in e)(r.test(t)||"title"==t||"type"==t)&&delete e[t];return e},s=function(e){(e=e.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):e==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,n,i,o){if(!(4>arguments.length)){var r=e.call(this,n);r.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var a={role:n.role||"presentation"};n.includeLabel&&(a["aria-labelledby"]=r.labelId),CKEDITOR.ui.dialog.uiElement.call(this,t,n,i,"div",null,a,(function(){var e=[],i=n.required?" cke_required":"";return"horizontal"!=n.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+i+'" ',' id="'+r.labelId+'"',r.inputId?' for="'+r.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',o.call(this,t,n),"</div>"):(i={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+i+'" id="'+r.labelId+'" for="'+r.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+o.call(this,t,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,i,e)),e.join("")}))}},textInput:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var o=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",r={class:"cke_dialog_ui_input_"+n.type,id:o,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(r.maxlength=n.maxLength),n.size&&(r.size=n.size),n.inputStyle&&(r.style=n.inputStyle);var a=this,l=!1;t.on("load",(function(){a.getInputElement().on("keydown",(function(e){13==e.data.getKeystroke()&&(l=!0)})),a.getInputElement().on("keyup",(function(e){13==e.data.getKeystroke()&&l&&(t.getButton("ok")&&setTimeout((function(){t.getButton("ok").click()}),0),l=!1),a.bidi&&s.call(a,e)}),null,null,1e3)})),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){var e=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];for(var t in n.width&&e.push('style="width:'+n.width+'" '),e.push("><input "),r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required),r)e.push(t+'="'+r[t]+'" ');return e.push(" /></div>"),e.join("")}))}},textarea:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var o=this,r=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",a={};n.validate&&(this.validate=n.validate),a.rows=n.rows||5,a.cols=n.cols||20,a.class="cke_dialog_ui_input_textarea "+(n.class||""),void 0!==n.inputStyle&&(a.style=n.inputStyle),n.dir&&(a.dir=n.dir),o.bidi&&t.on("load",(function(){o.getInputElement().on("keyup",s)}),o),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){a["aria-labelledby"]=this._.labelId,this._.required&&(a["aria-required"]=this._.required);var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',r,'" '];for(e in a)t.push(e+'="'+CKEDITOR.tools.htmlEncode(a[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(o._.default),"</textarea></div>"),t.join("")}))}},checkbox:function(t,n,i){if(!(3>arguments.length)){var o=e.call(this,n,{default:!!n.default});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,n,i,"span",null,null,(function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),i=[],r=CKEDITOR.tools.getNextId()+"_label",s={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":r};return a(e),n.default&&(s.checked="checked"),void 0!==e.inputStyle&&(e.style=e.inputStyle),o.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,i,"input",null,s),i.push(' <label id="',r,'" for="',s.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),i.join("")}))}},radio:function(t,n,i){if(!(3>arguments.length)){e.call(this,n),this._.default||(this._.default=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.validate);var o=[],r=this;n.role="radiogroup",n.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){for(var e=[],i=[],s=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<n.items.length;l++){var u=n.items[l],c=void 0!==u[2]?u[2]:u[0],d=void 0!==u[1]?u[1]:u[0],f=(h=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",h=CKEDITOR.tools.extend({},n,{id:h,title:null,type:null},!0),g=(c=CKEDITOR.tools.extend({},h,{title:c},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:s,value:d,"aria-labelledby":f}),p=[];r._.default==d&&(g.checked="checked"),a(h),a(c),void 0!==h.inputStyle&&(h.style=h.inputStyle),h.keyboardFocusable=!0,o.push(new CKEDITOR.ui.dialog.uiElement(t,h,p,"input",null,g)),p.push(" "),new CKEDITOR.ui.dialog.uiElement(t,c,p,"label",null,{id:f,for:g.id},u[0]),e.push(p.join(""))}return new CKEDITOR.ui.dialog.hbox(t,o,e,i),i.join("")})),this._.children=o}},button:function(t,n,i){if(arguments.length){"function"==typeof n&&(n=n(t.getParentEditor())),e.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var o=this;t.on("load",(function(){var e=this.getElement();e.on("click",(function(e){o.click(),e.data.preventDefault()})),e.on("keydown",(function(e){e.data.getKeystroke()in{32:1}&&(o.click(),e.data.preventDefault())})),e.unselectable()}),this);var r=CKEDITOR.tools.extend({},n);delete r.style;var a=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,r,i,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true",class:n.class,role:"button","aria-labelledby":a},'<span id="'+a+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(t,n,i){if(!(3>arguments.length)){var o=e.call(this,n);n.validate&&(this.validate=n.validate),o.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),i=[],r=[],s={id:o.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};i.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&i.push('style="width:'+n.width+'" '),i.push(">"),void 0!==n.size&&(s.size=n.size),void 0!==n.multiple&&(s.multiple=n.multiple),a(e);for(var l,u=0;u<n.items.length&&(l=n.items[u]);u++)r.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return void 0!==e.inputStyle&&(e.style=e.inputStyle),o.select=new CKEDITOR.ui.dialog.uiElement(t,e,i,"select",null,s,r.join("")),i.push("</div>"),i.join("")}))}},file:function(t,n,i){if(!(3>arguments.length)){void 0===n.default&&(n.default="");var o=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),t.on("load",(function(){CKEDITOR.document.getById(o.frameId).getParent().addClass("cke_dialog_ui_input_file")})),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){o.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',o.frameId,'" title="',n.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")}))}},fileButton:function(t,n,i){var o=this;if(!(3>arguments.length)){e.call(this,n),n.validate&&(this.validate=n.validate);var r=CKEDITOR.tools.extend({},n),a=r.onClick;r.className=(r.className?r.className+" ":"")+"cke_dialog_ui_button",r.onClick=function(e){var i=n.for;!1!==(e=!!a&&a.call(this,e))&&("xhr"!==e&&t.getContentElement(i[0],i[1]).submit(),this.disable())},t.on("load",(function(){t.getContentElement(n.for[0],n.for[1])._.buttons.push(o)})),CKEDITOR.ui.dialog.button.call(this,t,r,i)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(i,o,r){if(!(3>arguments.length)){var a=[],s=o.html;"<"!=s.charAt(0)&&(s="<span>"+s+"</span>");var l=o.focus;if(l){var u=this.focus;this.focus=function(){("function"==typeof l?l:u).call(this),this.fire("focus")},o.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,i,o,a,"span",null,null,""),a=a.join("").match(e),s=s.match(t)||["","",""],n.test(s[1])&&(s[1]=s[1].slice(0,-1),s[2]="/"+s[2]),r.push([s[1]," ",a[1]||"",s[2]].join(""))}}}(),fieldset:function(e,t,n,i,o){var r=o.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,o,i,"fieldset",null,null,(function(){var e=[];r&&e.push("<legend"+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+r+"</legend>");for(var t=0;t<n.length;t++)e.push(n[t]);return e.join("")}))}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return 1>t.getChildCount()?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||1>e.getChildCount()?"":e.getChild(0).getText()},eventProcessors:o},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",(function(){t.apply(this,arguments)}))}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&t.$.focus()}),0)},select:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())}),0)},accessKeyUp:function(){this.select()},setValue:function(e){if(this.bidi){var t=e&&e.charAt(0);(t="‪"==t?"ltr":"‫"==t?"rtl":null)&&(e=e.slice(1)),this.setDirectionMarker(t)}return e||(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var e=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&e){var t=this.getDirectionMarker();t&&(e=("ltr"==t?"‪":"‫")+e)}return e},setDirectionMarker:function(e){var t=this.getInputElement();e?t.setAttributes({dir:e,"data-cke-dir-marker":e}):this.getDirectionMarker()&&t.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var i=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),o=this.getInputElement().$;return i.$.text=e,i.$.value=null==t?e:t,null==n?CKEDITOR.env.ie?o.add(i.$):o.add(i.$,null):o.add(i.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(e.on("load",(function(){var e=this._.checkbox.getElement();e.on("propertychange",(function(t){"checked"==(t=t.data.$).propertyName&&this.fire("change",{value:e.$.checked})}),this)}),this),this.on("change",t),null)}},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var n,i=this._.children,o=0;o<i.length&&(n=i[o]);o++)n.getElement().$.checked=n.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(e.on("load",(function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",(function(e){"checked"==(e=e.data.$).propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})}))}),this),this.on("change",t),null)}}},i,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,i,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,o=function(e,t,n,i){e.on("formLoaded",(function(){e.getInputElement().on(n,i,e)}))};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):o(this,0,t[1].toLowerCase(),e[n]));return this},reset:function(){function e(){n.$.open();var e="";i.size&&(e=i.size-(CKEDITOR.env.ie?7:0));var u=t.frameId+"_input";for(n.$.write(['<html dir="'+s+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+s+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(i.action),'"><label id="',t.labelId,'" for="',u,'" style="display:none">',CKEDITOR.tools.htmlEncode(i.label),'</label><input style="width:100%" id="',u,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(i.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<e?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+r+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+a+")}","<\/script>"].join("")),n.$.close(),e=0;e<o.length;e++)o[e].enable()}var t=this._,n=CKEDITOR.document.getById(t.frameId).getFrameDocument(),i=t.definition,o=t.buttons,r=this.formLoadedNumber,a=this.formUnloadNumber,s=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;r||(r=this.formLoadedNumber=CKEDITOR.tools.addFunction((function(){this.fire("formLoaded")}),this),a=this.formUnloadNumber=CKEDITOR.tools.addFunction((function(){this.getInputElement().clearCustomData()}),this),this.getDialog()._.editor.on("destroy",(function(){CKEDITOR.tools.removeFunction(r),CKEDITOR.tools.removeFunction(a)}))),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",(function(){this.getInputElement().on("change",(function(){this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("tel",t),CKEDITOR.dialog.addUIElement("textarea",n),CKEDITOR.dialog.addUIElement("checkbox",n),CKEDITOR.dialog.addUIElement("radio",n),CKEDITOR.dialog.addUIElement("button",n),CKEDITOR.dialog.addUIElement("select",n),CKEDITOR.dialog.addUIElement("file",n),CKEDITOR.dialog.addUIElement("fileButton",n),CKEDITOR.dialog.addUIElement("html",n),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,n){for(var i,o=t.children,r=[],a=[],s=0;s<o.length&&(i=o[s]);s++){var l=[];r.push(l),a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,a,r,n,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,n=t-1;n>t-e;n--)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=t+1;n<t+e;n++)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function n(e,t){for(var n=e.$.getElementsByTagName("input"),i=0,o=n.length;i<o;i++){var r=new CKEDITOR.dom.element(n[i]);"text"==r.getAttribute("type").toLowerCase()&&(t?(r.setAttribute("value",r.getCustomData("fake_value")||""),r.removeCustomData("fake_value")):(r.setCustomData("fake_value",r.getAttribute("value")),r.setAttribute("value","")))}}function i(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function o(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function r(e,t,n){this.element=t,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",(function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")})),t.on("focus",(function(){this.fire("mouseover")})),t.on("blur",(function(){this.fire("mouseout")}))}function a(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function s(e,t,n){var i=e.parts.dialog.getParent().getClientSize(),o=e.getSize(),r=e._.viewportRatio,a=Math.max(i.width-o.width,0);i=Math.max(i.height-o.height,0),r.width=a?t/a:r.width,r.height=i?n/i:r.height,e._.viewportRatio=r}function l(e){e.data.preventDefault(1)}function u(e){var t=e.config,n=CKEDITOR.skinName||e.config.skin,i=t.dialog_backgroundCoverColor||("moono-lisa"==n?"black":"white"),o=(n=t.dialog_backgroundCoverOpacity,t.baseFloatZIndex),r=(t=CKEDITOR.tools.genKey(i,n,o),T[t]);CKEDITOR.document.getBody().addClass("cke_dialog_open"),r?r.show():(o=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",o,"; top: 0px; left: 0px; ","; width: 100%; height: 100%;",CKEDITOR.env.ie6Compat?"":"background-color: "+i,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(i="<html><body style=\\'background-color:"+i+";\\'></body></html>",o.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),o.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+i+"' );document.close();")+"})())"),o.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),o.push("</div>"),(r=CKEDITOR.dom.element.createFromHtml(o.join(""))).setOpacity(void 0!==n?n:.5),r.on("keydown",l),r.on("keypress",l),r.on("keyup",l),r.appendTo(CKEDITOR.document.getBody()),T[t]=r),e.focusManager.add(r),b=r,CKEDITOR.env.mac&&CKEDITOR.env.webkit||r.focus()}function c(e){CKEDITOR.document.getBody().removeClass("cke_dialog_open"),b&&(e.focusManager.remove(b),b.hide())}var d=CKEDITOR.tools.cssLength,f=!CKEDITOR.env.ie||CKEDITOR.env.edge,h='<div class="cke_reset_all cke_dialog_container {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" style="'+(f?"display:flex":"")+'" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="'+(f?"margin:auto":"position:absolute")+'" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(n,r){function a(e){var t=E._.focusList;if(e=e||0,!(1>t.length)){var n=E._.currentFocusIndex;E._.tabBarMode&&0>e&&(n=0);try{t[n].getInputElement().$.blur()}catch(l){}var i=n,o=1<E._.pageCount;do{if(i+=e,o&&!E._.tabBarMode&&(i==t.length||-1==i))return E._.tabBarMode=!0,E._.tabs[E._.currentTabId][0].focus(),void(E._.currentFocusIndex=-1);if((i=(i+t.length)%t.length)==n)break}while(e&&!t[i].isFocusable());t[i].focus(),"text"==t[i].type&&t[i].select()}}function l(i){if(E==CKEDITOR.dialog._.currentTop){var o=i.data.getKeystroke(),r="rtl"==n.lang.dir;if(c=d=0,9==o||o==CKEDITOR.SHIFT+9)a(o==CKEDITOR.SHIFT+9?-1:1),c=1;else if(o==CKEDITOR.ALT+121&&!E._.tabBarMode&&1<E.getPageCount())E._.tabBarMode=!0,E._.tabs[E._.currentTabId][0].focus(),E._.currentFocusIndex=-1,c=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],o)&&E._.tabBarMode)o=-1!=CKEDITOR.tools.indexOf([r?39:37,38],o)?e.call(E):t.call(E),E.selectPage(o),E._.tabs[o][0].focus(),c=1;else if(13!=o&&32!=o||!E._.tabBarMode)if(13==o)(o=i.data.getTarget()).is("a","button","select","textarea")||o.is("input")&&"button"==o.$.type||((o=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(o.click,0,o),c=1),d=1;else{if(27!=o)return;(o=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(o.click,0,o):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),d=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,a(1),c=1;u(i)}}function u(e){c?e.data.preventDefault(1):d&&e.data.stopPropagation()}var c,d,f=CKEDITOR.dialog._.dialogDefinitions[r],p=CKEDITOR.tools.clone(g),m=n.config.dialog_buttonsOrder||"OS",v=n.lang.dir,T={};if(("OS"==m&&CKEDITOR.env.mac||"rtl"==m&&"ltr"==v||"ltr"==m&&"rtl"==v)&&p.buttons.reverse(),f=CKEDITOR.tools.extend(f(n),p),f=CKEDITOR.tools.clone(f),f=new y(this,f),p=function(e){var t=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",h).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),n=t.getChild([0,0,0,0,0]),i=n.getChild(0),o=n.getChild(1);return e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(n),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(n.getParent())),i.unselectable(),o.unselectable(),{element:t,parts:{dialog:t.getChild(0),title:i,close:o,tabs:n.getChild(2),contents:n.getChild([3,0,0,0]),footer:n.getChild([3,0,1,0])}}}(n),this._={editor:n,element:p.element,name:r,model:null,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},viewportRatio:{width:.5,height:.5},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=p.parts,CKEDITOR.tools.setTimeout((function(){n.fire("ariaWidget",this.parts.contents)}),0,this),p={top:0,visibility:"hidden"},CKEDITOR.env.ie6Compat&&(p.position="absolute"),p["rtl"==v?"right":"left"]=0,this.parts.dialog.setStyles(p),CKEDITOR.event.call(this),this.definition=f=CKEDITOR.fire("dialogDefinition",{name:r,definition:f,dialog:this},n).definition,!("removeDialogTabs"in n._)&&n.config.removeDialogTabs){for(p=n.config.removeDialogTabs.split(";"),v=0;v<p.length;v++)if(2==(m=p[v].split(":")).length){var C=m[0];T[C]||(T[C]=[]),T[C].push(m[1])}n._.removeDialogTabs=T}if(n._.removeDialogTabs&&(T=n._.removeDialogTabs[r]))for(v=0;v<T.length;v++)f.removeContents(T[v]);f.onLoad&&this.on("load",f.onLoad),f.onShow&&this.on("show",f.onShow),f.onHide&&this.on("hide",f.onHide),f.onOk&&this.on("ok",(function(e){n.fire("saveSnapshot"),setTimeout((function(){n.fire("saveSnapshot")}),0),!1===f.onOk.call(this,e)&&(e.data.hide=!1)})),this.state=CKEDITOR.DIALOG_STATE_IDLE,f.onCancel&&this.on("cancel",(function(e){!1===f.onCancel.call(this,e)&&(e.data.hide=!1)}));var E=this,_=function(e){var t,n=E._.contents;for(t in n)for(var i in n[t])if(e.call(this,n[t][i]))return};this.on("ok",(function(e){_((function(t){if(t.validate){var n=t.validate(this),o="string"==typeof n||!1===n;return o&&(e.data.hide=!1,e.stop()),i.call(t,!o,"string"==typeof n?n:void 0),o}}))}),this,null,0),this.on("cancel",(function(e){_((function(t){if(t.isChanged())return n.config.dialog_noConfirmCancel||confirm(n.lang.common.confirmCancel)||(e.data.hide=!1),!0}))}),this,null,0),this.parts.close.on("click",(function(e){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),e.data.preventDefault()}),this),this.changeFocus=a;var x=this._.element;for(n.focusManager.add(x,1),this.on("show",(function(){x.on("keydown",l,this),CKEDITOR.env.gecko&&x.on("keypress",u,this)})),this.on("hide",(function(){x.removeListener("keydown",l),CKEDITOR.env.gecko&&x.removeListener("keypress",u),_((function(e){o.apply(e)}))})),this.on("iframeAdded",(function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",l,this,null,0)})),this.on("show",(function(){!function(){var e=E._.focusList;e.sort((function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex}));for(var t=e.length,n=0;n<t;n++)e[n].focusIndex=n}();var e=1<E._.pageCount;n.config.dialog_startupFocusTab&&e?(E._.tabBarMode=!0,E._.tabs[E._.currentTabId][0].focus(),E._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=e?-1:this._.focusList.length-1,f.onFocus?(e=f.onFocus.call(this))&&e.focus():a(1))}),this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",(function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)}),this),function(e){function t(t){var n=e.getSize(),l=e.parts.dialog.getParent().getClientSize(),u=t.data.$.screenX,c=t.data.$.screenY,d=u-i.x,f=c-i.y;i={x:u,y:c},o.x+=d,o.y+=f,u=o.x+s[3]<a?-s[3]:o.x-s[1]>l.width-n.width-a?l.width-n.width+("rtl"==r.lang.dir?0:s[1]):o.x,n=o.y+s[0]<a?-s[0]:o.y-s[2]>l.height-n.height-a?l.height-n.height+s[2]:o.y,u=Math.floor(u),n=Math.floor(n),e.move(u,n,1),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.env.ie6Compat){var e=b.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",n)}}var i=null,o=null,r=e.getParentEditor(),a=r.config.dialog_magnetDistance,s=CKEDITOR.skin.margins||[0,0,0,0];void 0===a&&(a=20),e.parts.title.on("mousedown",(function(r){if(!e._.moved){var a=e._.element;a.getFirst().setStyle("position","absolute"),a.removeStyle("display"),e._.moved=!0,e.layout()}i={x:r.data.$.screenX,y:r.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),o=e.getPosition(),CKEDITOR.env.ie6Compat&&((a=b.getChild(0).getFrameDocument()).on("mousemove",t),a.on("mouseup",n)),r.data.preventDefault()}),e)}(this),function(e){function t(t){var n="rtl"==f.lang.dir,d=c.width,h=c.height,g=d+(t.data.$.screenX-u.x)*(n?-1:1)*(e._.moved?1:2),p=h+(t.data.$.screenY-u.y)*(e._.moved?1:2),m=e._.element.getFirst(),v=(m=n&&parseInt(m.getComputedStyle("right")),e.getPosition());v.x=v.x||0,v.y=v.y||0,v.y+p>l.height&&(p=l.height-v.y),(n?m:v.x)+g>l.width&&(g=l.width-(n?m:v.x)),p=Math.floor(p),g=Math.floor(g),o!=CKEDITOR.DIALOG_RESIZE_WIDTH&&o!=CKEDITOR.DIALOG_RESIZE_BOTH||(d=Math.max(i.minWidth||0,g-r)),o!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&o!=CKEDITOR.DIALOG_RESIZE_BOTH||(h=Math.max(i.minHeight||0,p-a)),e.resize(d,h),e._.moved&&s(e,e._.position.x,e._.position.y),e._.moved||e.layout(),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.document.removeListener("mousemove",t),d&&(d.remove(),d=null),CKEDITOR.env.ie6Compat){var e=b.getChild(0).getFrameDocument();e.removeListener("mouseup",n),e.removeListener("mousemove",t)}}var i=e.definition,o=i.resizable;if(o!=CKEDITOR.DIALOG_RESIZE_NONE){var r,a,l,u,c,d,f=e.getParentEditor(),h=CKEDITOR.tools.addFunction((function(i){function o(e){return e.isVisible()}c=e.getSize();var s=e.parts.contents,f=s.$.getElementsByTagName("iframe").length,h=!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks);f&&(d=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%; left:0; top:0;"></div>'),s.append(d)),a=c.height-e.parts.contents.getFirst(o).getSize("height",h),r=c.width-e.parts.contents.getFirst(o).getSize("width",1),u={x:i.screenX,y:i.screenY},l=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),CKEDITOR.env.ie6Compat&&((s=b.getChild(0).getFrameDocument()).on("mousemove",t),s.on("mouseup",n)),i.preventDefault&&i.preventDefault()}));e.on("load",(function(){var t="";o==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":o==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+f.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(f.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+h+', event )">'+("ltr"==f.lang.dir?"◢":"◣")+"</div>"),e.parts.footer.append(t,1)})),f.on("destroy",(function(){CKEDITOR.tools.removeFunction(h)}))}}(this),new CKEDITOR.dom.text(f.title,CKEDITOR.document).appendTo(this.parts.title),v=0;v<f.contents.length;v++)(T=f.contents[v])&&this.addPage(T);for(this.parts.tabs.on("click",(function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(this.selectPage((t=t.$.id).substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,a(1)),e.data.preventDefault())}),this),v=[],T=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:f.buttons},v).getChild(),this.parts.footer.setHtml(v.join("")),v=0;v<T.length;v++)this._.buttons[T[v].id]=T[v]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(e,t){if(!this._.contentSize||this._.contentSize.width!=e||this._.contentSize.height!=t){if(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position){var n=this.parts.dialog.getParent().getClientSize().width;this._.position.x=n-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)}this._.contentSize={width:e,height:t}}},getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var i=this._.element.getFirst(),o="rtl"==this._.editor.lang.dir;CKEDITOR.env.ie&&i.setStyle("zoom","100%");var r=this.parts.dialog.getParent().getClientSize(),a=this.getSize(),l=this._.viewportRatio,u=Math.max(r.width-a.width,0);r=Math.max(r.height-a.height,0),this._.position&&this._.position.x==e&&this._.position.y==t?(e=Math.floor(u*l.width),t=Math.floor(r*l.height)):s(this,e,t),this._.position={x:e,y:t},o&&(e=u-e),(t={top:(0<t?t:0)+"px"})[o?"right":"left"]=(0<e?e:0)+"px",i.setStyles(t),n&&(this._.moved=1)},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;for(var n in e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle("display",f?"flex":"block"):e.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,u(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",E),e.on("keyup",_),this._.hasFocus=!1,t.contents)if(t.contents[n]){var i=this._.tabs[(e=t.contents[n]).id],o=e.requiredContent,r=0;if(i){for(var a in this._.contents[e.id]){var s=this._.contents[e.id][a];"hbox"!=s.type&&"vbox"!=s.type&&s.getInputElement()&&(s.requiredContent&&!this._.editor.activeFilter.check(s.requiredContent)?s.disable():(s.enable(),r++))}!r||o&&!this._.editor.activeFilter.check(o)?i[0].addClass("cke_dialog_tab_disabled"):i[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout((function(){this.layout(),function(e){function t(){e.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",t),e.on("hide",(function(){n.removeListener("resize",t)}))}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach((function(e){e.setInitValue&&e.setInitValue()}))}),100,this)},layout:function(){var e=this.parts.dialog;if(this._.moved||!f){var t,n=this.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize();this._.moved&&this._.position?(t=this._.position.x,n=this._.position.y):(t=(i.width-n.width)/2,n=(i.height-n.height)/2),CKEDITOR.env.ie6Compat||(e.setStyle("position","absolute"),e.removeStyle("margin")),t=Math.floor(t),n=Math.floor(n),this.move(t,n)}},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach((function(t){t.setup&&t.setup.apply(t,e)}))},commitContent:function(){var e=arguments;this.foreach((function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)}))},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),I(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else c(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",E),e.removeListener("keyup",_);var n=this._.editor;n.focus(),setTimeout((function(){n.focusManager.unlock(),CKEDITOR.env.iOS&&n.window.focus()}),0)}delete this._.parentDialog,this.foreach((function(e){e.resetInitValue&&e.resetInitValue()})),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],n=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",i=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),o=this._.contents[e.id]={},r=i.getChild(),a=0;i=r.shift();)i.notAllowed||"hbox"==i.type||"vbox"==i.type||a++,o[i.id]=i,"function"==typeof i.getChild&&r.push.apply(r,i.getChild());a||(e.hidden=!0),(t=CKEDITOR.dom.element.createFromHtml(t.join(""))).setAttribute("role","tabpanel"),t.setStyle("min-height","100%"),i=CKEDITOR.env,o="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,e.hidden?' style="display:none"':"",' id="',o,'"',i.gecko&&!i.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",o),this._.tabs[e.id]=[n,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),e.accessKey&&(x(this,this,"CTRL+"+e.accessKey,w,D),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:e,currentPage:this._.currentTabId})){for(var t in this._.tabs){var i=this._.tabs[t][1];t!=e&&(this._.tabs[t][0].removeClass("cke_dialog_tab_selected"),i.hide()),i.setAttribute("aria-hidden",t!=e)}var o=this._.tabs[e];o[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(n(o[1]),o[1].show(),setTimeout((function(){n(o[1],1)}),0)):o[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var n=this._.tabs[t]&&this._.tabs[t][0];n&&1!=this._.pageCount&&n.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),n.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if(void 0===t)this._.focusList.push(new r(this,e,t=this._.focusList.length));else{this._.focusList.splice(t,0,new r(this,e,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(e){if(this.state!=e){if(this.state=e,e==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var t=this.getParentEditor().lang.dir,n={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==t?"right":"left"}};n.styles["margin-"+("rtl"==t?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",n),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else e==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",e)}},getModel:function(e){return this._.model?this._.model:this.definition.getModel?this.definition.getModel(e):null},setModel:function(e){this._.model=e},getMode:function(e){return this.definition.getMode?this.definition.getMode(e):!(e=this.getModel(e))||e instanceof CKEDITOR.dom.element&&!e.getParent()?CKEDITOR.dialog.CREATION_MODE:CKEDITOR.dialog.EDITING_MODE}},CKEDITOR.tools.extend(CKEDITOR.dialog,{CREATION_MODE:0,EDITING_MODE:1,add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){return!((e=e.config.removeDialogTabs)&&e.match(new RegExp("(?:^|;)"+t+":"+n+"(?:$|;)","i")))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(e){!1!==(e=e.data.dialog).fire("ok",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(n){return e(n,t)}),{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(e){!1!==(e=e.data.dialog).fire("cancel",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(n){return e(n,t)}),{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var g={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},p=function(e,t,n){for(var i,o=0;i=e[o];o++)if(i.id==t||n&&i[n]&&(i=p(i[n],t,n)))return i;return null},m=function(e,t,n,i,o){if(n){for(var r,a=0;r=e[a];a++){if(r.id==n)return e.splice(a,0,t),t;if(i&&r[i]&&(r=m(r[i],t,n,i,!0)))return r}if(o)return null}return e.push(t),t},v=function(e,t,n){for(var i,o=0;i=e[o];o++){if(i.id==t)return e.splice(o,1);if(n&&i[n]&&(i=v(i[n],t,n)))return i}return null},y=function(e,t){this.dialog=e;for(var n,i=t.contents,o=0;n=i[o];o++)i[o]=n&&new a(e,n);CKEDITOR.tools.extend(this,t)};y.prototype={getContents:function(e){return p(this.contents,e)},getButton:function(e){return p(this.buttons,e)},addContents:function(e,t){return m(this.contents,e,t)},addButton:function(e,t){return m(this.buttons,e,t)},removeContents:function(e){v(this.contents,e)},removeButton:function(e){v(this.buttons,e)}},a.prototype={get:function(e){return p(this.elements,e,"children")},add:function(e,t){return m(this.elements,e,t,"children")},remove:function(e){v(this.elements,e,"children")}};var b,T={},C={},E=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=C[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+o])&&t.length&&((t=t[t.length-1]).keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},_=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=C[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+o])&&t.length&&(t=t[t.length-1]).keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},x=function(e,t,n,i,o){(C[n]||(C[n]=[])).push({uiElement:e,dialog:t,key:n,keyup:o||e.accessKeyUp,keydown:i||e.accessKeyDown})},I=function(e){for(var t in C){for(var n=C[t],i=n.length-1;0<=i;i--)n[i].dialog!=e&&n[i].uiElement!=e||n.splice(i,1);0===n.length&&delete C[t]}},D=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},w=function(){};CKEDITOR.ui.dialog={uiElement:function(e,t,n,i,o,r,a){if(!(4>arguments.length)){var s=(i.call?i(t):i)||"div",l=["<",s," "],u=(o&&o.call?o(t):o)||{},c=(r&&r.call?r(t):r)||{},d=(a&&a.call?a.call(this,e,t):a)||"",f=this.domId=c.id||CKEDITOR.tools.getNextId()+"_uiElement";t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(u.display="none",this.notAllowed=!0),c.id=f;var h={};t.type&&(h["cke_dialog_ui_"+t.type]=1),t.className&&(h[t.className]=1),t.disabled&&(h.cke_disabled=1);var g=c.class&&c.class.split?c.class.split(" "):[];for(f=0;f<g.length;f++)g[f]&&(h[g[f]]=1);for(f in g=[],h)g.push(f);for(f in c.class=g.join(" "),t.title&&(c.title=t.title),h=(t.style||"").split(";"),t.align&&(u["margin-left"]="left"==(g=t.align)?0:"auto",u["margin-right"]="right"==g?0:"auto"),u)h.push(f+":"+u[f]);for(t.hidden&&h.push("display:none"),f=h.length-1;0<=f;f--)""===h[f]&&h.splice(f,1);for(f in 0<h.length&&(c.style=(c.style?c.style+"; ":"")+h.join("; ")),c)l.push(f+'="'+CKEDITOR.tools.htmlEncode(c[f])+'" ');l.push(">",d,"</",s,">"),n.push(l.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,(function(e){return function(n){e.call(this,t.setValue.call(this,n))}}))),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,(function(e){return function(){return t.getValue.call(this,e.call(this))}}))),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&x(this,e,"CTRL+"+t.accessKey);var p=this;e.on("load",(function(){var t=p.getInputElement();if(t){var n=p.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";t.on("focus",(function(){e._.tabBarMode=!1,e._.hasFocus=!0,p.fire("focus"),n&&this.addClass(n)})),t.on("blur",(function(){p.fire("blur"),n&&this.removeClass(n)}))}})),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",(function(){e._.currentFocusIndex=p.focusIndex})))}},hbox:function(e,t,n,i,o){if(!(4>arguments.length)){this._||(this._={});var r,a=this._.children=t,s=o&&o.widths||null,l=o&&o.height||null,u={role:"presentation"};o&&o.align&&(u.align=o.align),CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"hbox"},i,"table",{},u,(function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(r=0;r<n.length;r++){var t="cke_dialog_ui_hbox_child",i=[];0===r&&(t="cke_dialog_ui_hbox_first"),r==n.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),s?s[r]&&i.push("width:"+d(s[r])):i.push("width:"+Math.floor(100/n.length)+"%"),l&&i.push("height:"+d(l)),o&&void 0!==o.padding&&i.push("padding:"+d(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a[r].align&&i.push("text-align:"+a[r].align),0<i.length&&e.push('style="'+i.join("; ")+'" '),e.push(">",n[r],"</td>")}return e.push("</tr></tbody>"),e.join("")}))}},vbox:function(e,t,n,i,o){if(!(3>arguments.length)){this._||(this._={});var r=this._.children=t,a=o&&o.width||null,s=o&&o.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"vbox"},i,"div",null,{role:"presentation"},(function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),o&&o.expand&&t.push("height:100%;"),t.push("width:"+d(a||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(o&&o.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var i=0;i<n.length;i++){var l=[];t.push('<tr><td role="presentation" '),a&&l.push("width:"+d(a||"100%")),s?l.push("height:"+d(s[i])):o&&o.expand&&l.push("height:"+Math.floor(100/n.length)+"%"),o&&void 0!==o.padding&&l.push("padding:"+d(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r[i].align&&l.push("text-align:"+r[i].align),0<l.length&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',n[i],"</td></tr>")}return t.push("</tbody></table>"),t.join("")}))}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,o=function(e,t,n,i){t.on("load",(function(){e.getInputElement().on(n,i,e)}))};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):o(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return 1>arguments.length?this._.children.concat():(e.splice||(e=[e]),2>e.length?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,n){for(var i,o=t.children,r=[],a=[],s=0;s<o.length&&(i=o[s]);s++){var l=[];r.push(l),a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,a,r,n,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){var t=this.tabId;e.openDialog(this.dialogName,(function(e){t&&e.selectPage(t)}))},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,n=/^\d*(?:\.\d+)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,o=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,r=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t,n,i=this&&this.getValue?this.getValue():e[0],o=CKEDITOR.VALIDATE_AND,r=[];for(n=0;n<e.length&&"function"==typeof e[n];n++)r.push(e[n]);n<e.length&&"string"==typeof e[n]&&(t=e[n],n++),n<e.length&&"number"==typeof e[n]&&(o=e[n]);var a=o==CKEDITOR.VALIDATE_AND;for(n=0;n<r.length;n++)a=o==CKEDITOR.VALIDATE_AND?a&&r[n](i):a||r[n](i);return!!a||t}},regex:function(e,t){return function(n){return n=this&&this.getValue?this.getValue():n,!!e.test(n)||t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(n,e)},cssLength:function(e){return this.functions((function(e){return o.test(CKEDITOR.tools.trim(e))}),e)},htmlLength:function(e){return this.functions((function(e){return i.test(CKEDITOR.tools.trim(e))}),e)},inlineStyle:function(e){return this.functions((function(e){return r.test(CKEDITOR.tools.trim(e))}),e)},equals:function(e,t){return this.functions((function(t){return t==e}),t)},notEqual:function(e,t){return this.functions((function(t){return t!=e}),t)}},CKEDITOR.on("instanceDestroyed",(function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var n in T)T[n].remove();T={}}for(var i in e=e.editor._.storedDialogs)e[i].destroy()}))}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t,n){var i=null,o=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&u(this),"function"==typeof o)o=this._.storedDialogs||(this._.storedDialogs={}),(i=o[e]||(o[e]=new CKEDITOR.dialog(this,e))).setModel(n),t&&t.call(i,i),i.show();else{if("failed"==o)throw c(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof o&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(o),(function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t,n)}),this,0,1)}return CKEDITOR.skin.loadPart("dialog"),i&&i.once("hide",(function(){i.setModel(null)}),null,null,999),i}})}();var t,n,i,o,a,s=!1;CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){s||(CKEDITOR.document.appendStyleSheet(this.path+"styles/dialog.css"),s=!0),e.on("doubleclick",(function(t){t.data.dialog&&e.openDialog(t.data.dialog)}),null,null,999)}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var t=this;e.addCommand("a11yHelp",{exec:function(){var n=t.availableLangs[n=e.langCode]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),(function(){e.lang.a11yhelp=t.langEntries[n],e.openDialog("a11yHelp")}))},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",(function(t){t.data.label=e.lang.common.editorHelp}))}}),function(){function e(e){var t=this.att;void 0!==(e=e&&e.hasAttribute(t)&&e.getAttribute(t)||"")&&this.setValue(e)}function t(){for(var e,t=0;t<arguments.length;t++)if(arguments[t]instanceof CKEDITOR.dom.element){e=arguments[t];break}if(e){t=this.att;var n=this.getValue();n?e.setAttribute(t,n):e.removeAttribute(t,n)}}var n={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(e){e||(e=n);var t=[];e.id&&t.push("id"),e.dir&&t.push("dir");var i="";return t.length&&(i+="["+t.join(",")+"]"),e.classes&&(i+="(*)"),e.styles&&(i+="{*}"),i},createAdvancedTab:function(i,o,r){o||(o=n);var a=i.lang.common,s={id:"advanced",label:a.advancedTab,title:a.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},l=[];return(o.id||o.dir)&&(o.id&&l.push({id:"advId",att:"id",type:"text",requiredContent:r?r+"[id]":null,label:a.id,setup:e,commit:t}),o.dir&&l.push({id:"advLangDir",att:"dir",type:"select",requiredContent:r?r+"[dir]":null,label:a.langDir,default:"",style:"width:100%",items:[[a.notSet,""],[a.langDirLTR,"ltr"],[a.langDirRTL,"rtl"]],setup:e,commit:t}),s.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(l)})),(o.styles||o.classes)&&(l=[],o.styles&&l.push({id:"advStyles",att:"style",type:"text",requiredContent:r?r+"{cke-xyz}":null,label:a.styles,default:"",validate:CKEDITOR.dialog.validate.inlineStyle(a.invalidInlineStyle),onChange:function(){},getStyle:function(e,t){var n=this.getValue().match(new RegExp("(?:^|;)\\s*"+e+"\\s*:\\s*([^;]*)","i"));return n?n[1]:t},updateStyle:function(e,t){var n=this.getValue(),o=i.document.createElement("span");o.setAttribute("style",n),o.setStyle(e,t),n=CKEDITOR.tools.normalizeCssText(o.getAttribute("style")),this.setValue(n,1)},setup:e,commit:t}),o.classes&&l.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:r?r+"(cke-xyz)":null,label:a.cssClasses,default:"",setup:e,commit:t}]}),s.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(l)})),s}})}(),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,n=function(n,o,r,a){if(a){a=new CKEDITOR.style(a);var s=i[r];s.unshift(a),e.attachStyleStateChange(a,(function(t){!e.readOnly&&e.getCommand(r).setState(t)})),e.addCommand(r,new CKEDITOR.styleCommand(a,{contentForms:s})),e.ui.addButton&&e.ui.addButton(n,{label:o,command:r,toolbar:"basicstyles,"+(t+=10)})}},i={bold:["strong","b",["span",function(e){return"bold"==(e=e.styles["font-weight"])||700<=+e}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},o=e.config,r=e.lang.basicstyles;n("Bold",r.bold,"bold",o.coreStyles_bold),n("Italic",r.italic,"italic",o.coreStyles_italic),n("Underline",r.underline,"underline",o.coreStyles_underline),n("Strike",r.strike,"strike",o.coreStyles_strike),n("Subscript",r.subscript,"subscript",o.coreStyles_subscript),n("Superscript",r.superscript,"superscript",o.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){function e(e,t,n,i){if(!e.isReadOnly()&&!e.equals(n.editable())){CKEDITOR.dom.element.setMarker(i,e,"bidi_processed",1),i=e;for(var o=n.editable();(i=i.getParent())&&!i.equals(o);)if(i.getCustomData("bidi_processed"))return e.removeStyle("direction"),void e.removeAttribute("dir");((i="useComputedState"in n.config?n.config.useComputedState:1)?e.getComputedStyle("direction"):e.getStyle("direction")||e.hasAttribute("dir"))!=t&&(e.removeStyle("direction"),i?(e.removeAttribute("dir"),t!=e.getComputedStyle("direction")&&e.setAttribute("dir",t)):e.setAttribute("dir",t),n.forceNextSelectionCheck())}}function t(e,t,n){var i=e.getCommonAncestor(!1,!0);if((e=e.clone()).enlarge(n==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),e.checkBoundaryOfElement(i,CKEDITOR.START)&&e.checkBoundaryOfElement(i,CKEDITOR.END)){for(var o;i&&i.type==CKEDITOR.NODE_ELEMENT&&(o=i.getParent())&&1==o.getChildCount()&&!(i.getName()in t);)i=o;return i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in t&&i}}function n(n){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(e,t){var n,i;if(!(i=void 0===(i=e.config.useComputedState)||i)){n=t.lastElement;for(var o=e.editable();n&&!(n.getName()in a)&&!n.equals(o);){var r=n.getParent();if(!r)break;n=r}}(n=n||t.block||t.blockLimit).equals(e.editable())&&(o=e.getSelection().getRanges()[0].getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&(n=o),n&&(i=i?n.getComputedStyle("direction"):n.getStyle("direction")||n.getAttribute("dir"),e.getCommand("bidirtl").setState("rtl"==i?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.getCommand("bidiltr").setState("ltr"==i?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)),(i=(t.block||t.blockLimit||e.editable()).getDirection(1))!=(e._.selDir||e.lang.dir)&&(e._.selDir=i,e.fire("contentDirChanged",i))},exec:function(i){var a=i.getSelection(),s=i.config.enterMode;if((d=a.getRanges())&&d.length){for(var l,u={},c=a.createBookmarks(),d=d.createIterator(),f=0;l=d.getNextRange(1);){var h=l.getEnclosedNode();h&&(!h||h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in r)||(h=t(l,o,s)),h&&e(h,n,i,u);var g=new CKEDITOR.dom.walker(l),p=c[f].startNode,m=c[f++].endNode;for(g.evaluator=function(e){var t,n=s==CKEDITOR.ENTER_P?"p":"div";return(t=!!e&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in o)&&((n=e.is(n))&&(n=!!(n=e.getParent())&&n.type==CKEDITOR.NODE_ELEMENT),t=!(n&&e.getParent().is("blockquote"))),!!(t&&e.getPosition(p)&CKEDITOR.POSITION_FOLLOWING&&(e.getPosition(m)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};h=g.next();)e(h,n,i,u);for((l=l.createIterator()).enlargeBr=s!=CKEDITOR.ENTER_BR;h=l.getNextParagraph(s==CKEDITOR.ENTER_P?"p":"div");)e(h,n,i,u)}CKEDITOR.dom.element.clearAllMarkers(u),i.forceNextSelectionCheck(),a.selectBookmarks(c),i.focus()}}}}function i(e){var t=e==s.setAttribute,n=e==s.removeAttribute,i=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(o,r){if(!this.isReadOnly()){var a;if(a=o==(t||n?"dir":"direction")||"style"==o&&(n||i.test(r))){e:{for(var s=(a=this).getDocument().getBody().getParent();a;){if(a.equals(s)){a=!1;break e}a=a.getParent()}a=!0}a=!a}if(a&&(a=this.getDirection(1),s=e.apply(this,arguments),a!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),s}return e.apply(this,arguments)}}var o={table:1,ul:1,ol:1,blockquote:1,div:1},r={},a={};CKEDITOR.tools.extend(r,o,{tr:1,p:1,div:1,li:1}),CKEDITOR.tools.extend(a,r,{td:1}),CKEDITOR.plugins.add("bidi",{init:function(e){function t(t,n,i,o,r){e.addCommand(i,new CKEDITOR.command(e,o)),e.ui.addButton&&e.ui.addButton(t,{label:n,command:i,toolbar:"bidi,"+r})}if(!e.blockless){var i=e.lang.bidi;t("BidiLtr",i.ltr,"bidiltr",n("ltr"),10),t("BidiRtl",i.rtl,"bidirtl",n("rtl"),20),e.on("contentDom",(function(){e.document.on("dirChanged",(function(t){e.fire("dirChanged",{node:t.data,dir:t.data.getDirection(1)})}))})),e.on("contentDirChanged",(function(t){t=(e.lang.dir!=t.data?"add":"remove")+"Class";var n=e.ui.space(e.config.toolbarLocation);n&&n[t]("cke_mixed_dir_content")}))}}});for(var s=CKEDITOR.dom.element.prototype,l=["setStyle","removeStyle","setAttribute","removeAttribute"],u=0;u<l.length;u++)s[l[u]]=CKEDITOR.tools.override(s[l[u]],i)}(),t={exec:function(e){var t=e.getCommand("blockquote").state,n=e.getSelection(),i=n&&n.getRanges()[0];if(i){var o=n.createBookmarks();if(CKEDITOR.env.ie){var r,a=o[0].startNode,s=o[0].endNode;if(a&&"blockquote"==a.getParent().getName())for(r=a;r=r.getNext();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){a.move(r,!0);break}if(s&&"blockquote"==s.getParent().getName())for(r=s;r=r.getPrevious();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){s.move(r);break}}if((l=i.createIterator()).enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(a=[];t=l.getNextParagraph();)a.push(t);for(1>a.length&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),s=o.shift(),i.insertNode(t),t.append(new CKEDITOR.dom.text("\ufeff",e.document)),i.moveToBookmark(s),i.selectNodeContents(t),i.collapse(!0),s=i.createBookmark(),a.push(t),o.unshift(s)),r=a[0].getParent(),i=[],s=0;s<a.length;s++)r=r.getCommonAncestor((t=a[s]).getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[r.getName()];)r=r.getParent();for(s=null;0<a.length;){for(t=a.shift();!t.getParent().equals(r);)t=t.getParent();t.equals(s)||i.push(t),s=t}for(;0<i.length;)if("blockquote"==(t=i.shift()).getName()){for(s=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)s.append(t.getFirst().remove()),a.push(s.getLast());s.replace(t)}else a.push(t);for((i=e.document.createElement("blockquote")).insertBefore(a[0]);0<a.length;)t=a.shift(),i.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(s=[],r={};t=l.getNextParagraph();){for(a=i=null;t.getParent();){if("blockquote"==t.getParent().getName()){i=t.getParent(),a=t;break}t=t.getParent()}i&&a&&!a.getCustomData("blockquote_moveout")&&(s.push(a),CKEDITOR.dom.element.setMarker(r,a,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(r),t=[],a=[],r={};0<s.length;)i=(l=s.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),a.push(l.getNext())):l.remove().insertAfter(i):l.remove().insertBefore(i),i.getCustomData("blockquote_processed")||(a.push(i),CKEDITOR.dom.element.setMarker(r,i,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(r),s=a.length-1;0<=s;s--){e:{for(var l=0,u=(r=i=a[s]).getChildCount(),c=void 0;l<u&&(c=r.getChild(l));l++)if(c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()){r=!1;break e}r=!0}r&&i.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(i=!0;t.length;)if("div"==(l=t.shift()).getName()){for(s=new CKEDITOR.dom.documentFragment(e.document),!i||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||s.append(e.document.createElement("br")),i=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(s);i&&s.append(e.document.createElement("br")),s.replace(l),i=!1}}n.selectBookmarks(o),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"},CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",t),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}}),function(){function e(e,t){CKEDITOR.tools.extend(this,t,{editor:e,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:e._.notificationArea}),t.type||(this.type="info"),this.element=this._createElement(),e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function t(e){var t=this;this.editor=e,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),e.on("destroy",(function(){t._removeListeners(),t.element.remove()}))}CKEDITOR.plugins.add("notification",{init:function(e){e._.notificationArea=new t(e),e.showNotification=function(t,n,i){var o,r;return"progress"==n?o=i:r=i,(t=new CKEDITOR.plugins.notification(e,{message:t,type:n,progress:o,duration:r})).show(),t},e.on("key",(function(t){if(27==t.data.keyCode){var n=e._.notificationArea.notifications;n.length&&(function(e){var t=new CKEDITOR.dom.element("div");t.setStyles({position:"fixed","margin-left":"-9999px"}),t.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),t.setText(e),CKEDITOR.document.getBody().append(t),setTimeout((function(){t.remove()}),100)}(e.lang.notification.closed),n[n.length-1].hide(),t.cancel())}}))}}),e.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(e){var t=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:e})&&(t=!1);var n=this.element,i=n.findOne(".cke_notification_message"),o=n.findOne(".cke_notification_progress"),r=e.type;n.removeAttribute("role"),e.progress&&"progress"!=this.type&&(r="progress"),r&&(n.removeClass(this._getClass()),n.removeAttribute("aria-label"),this.type=r,n.addClass(this._getClass()),n.setAttribute("aria-label",this.type),"progress"!=this.type||o?"progress"!=this.type&&o&&o.remove():(o=this._createProgressElement()).insertBefore(i)),void 0!==e.message&&(this.message=e.message,i.setHtml(this.message)),void 0!==e.progress&&(this.progress=e.progress,o&&o.setStyle("width",this._getPercentageProgress())),t&&e.important&&(n.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=e.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var e,t,n=this,i=this.editor.lang.common.close;return(e=new CKEDITOR.dom.element("div")).addClass("cke_notification"),e.addClass(this._getClass()),e.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&e.append(this._createProgressElement()),(t=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),t.setHtml(this.message),e.append(t),t=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+i+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),e.append(t),t.on("click",(function(){n.editor.focus(),n.hide()})),e},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var e=new CKEDITOR.dom.element("span");return e.addClass("cke_notification_progress"),e.setStyle("width",this._getPercentageProgress()),e},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var e,t=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?e=this.duration:"info"!=this.type&&"success"!=this.type||(e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),e&&(t._hideTimeoutId=setTimeout((function(){t.hide()}),e))}},t.prototype={add:function(e){this.notifications.push(e),this.element.append(e.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(e){var t=CKEDITOR.tools.indexOf(this.notifications,e);0>t||(this.notifications.splice(t,1),e.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var e=this.editor,t=e.config,n=new CKEDITOR.dom.element("div");return n.addClass("cke_notifications_area"),n.setAttribute("id","cke_notifications_area_"+e.name),n.setStyle("z-index",t.baseFloatZIndex-2),n},_attachListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.on("scroll",this._uiBuffer.input),e.on("resize",this._uiBuffer.input),t.on("change",this._changeBuffer.input),t.on("floatingSpaceLayout",this._layout,this,null,20),t.on("blur",this._layout,this,null,20)},_removeListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.removeListener("scroll",this._uiBuffer.input),e.removeListener("resize",this._uiBuffer.input),t.removeListener("change",this._changeBuffer.input),t.removeListener("floatingSpaceLayout",this._layout),t.removeListener("blur",this._layout)},_layout:function(){function e(){o.setStyle("left",p(m+a.width-u-c))}var t,n,i,o=this.element,r=this.editor,a=r.ui.contentsElement.getClientRect(),s=r.ui.contentsElement.getDocumentPosition(),l=o.getClientRect(),u=this._notificationWidth,c=this._notificationMargin,d=(i=CKEDITOR.document.getWindow()).getScrollPosition(),f=i.getViewPaneSize(),h=CKEDITOR.document.getBody(),g=h.getDocumentPosition(),p=CKEDITOR.tools.cssLength;u&&c||(i=this.element.getChild(0),u=this._notificationWidth=i.getClientRect().width,c=this._notificationMargin=parseInt(i.getComputedStyle("margin-left"),10)+parseInt(i.getComputedStyle("margin-right"),10)),r.toolbar&&(n=(t=r.ui.space("top")).getClientRect()),t&&t.isVisible()&&n.bottom>a.top&&n.bottom<a.bottom-l.height?o.setStyles({position:"fixed",top:p(n.bottom)}):o.setStyles(0<a.top?{position:"absolute",top:p(s.y)}:s.y+a.height-l.height>d.y?{position:"fixed",top:0}:{position:"absolute",top:p(s.y+a.height-l.height)});var m="fixed"==o.getStyle("position")?a.left:"static"!=h.getComputedStyle("position")?s.x-g.x:s.x;a.width<u+c?s.x+u+c>d.x+f.width?e():o.setStyle("left",p(m)):s.x+u+c>d.x+f.width?o.setStyle("left",p(m)):s.x+a.width/2+u/2+c>d.x+f.width?o.setStyle("left",p(m-s.x+d.x+f.width-u-c)):0>a.left+a.width-u-c?e():o.setStyle("left",p(0>a.left+a.width/2-u/2?m-s.x+d.x:m+a.width/2-u/2-c/2))}},CKEDITOR.plugins.notification=e}(),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var t="";CKEDITOR.env.ie&&(t='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&'),e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+t+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}">&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var n=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),i=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,t){function o(){var t=e.mode;t&&(t=this.modes[t]?void 0!==l[t]?l[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var r,a,s,l=null,u=CKEDITOR.env,c=this._.id=CKEDITOR.tools.getNextId(),d="",f=this.command;this._.editor=e;var h,g={id:c,button:this,editor:e,focus:function(){CKEDITOR.document.getById(c).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},p=CKEDITOR.tools.addFunction((function(e){if(g.onkey)return e=new CKEDITOR.dom.event(e),!1!==g.onkey(g,e.getKeystroke())})),m=CKEDITOR.tools.addFunction((function(e){var t;return g.onfocus&&(t=!1!==g.onfocus(g,new CKEDITOR.dom.event(e))),t})),v=0;g.clickFn=r=CKEDITOR.tools.addFunction((function(){v&&(e.unlockSelection(1),v=0),g.execute(),u.iOS&&e.focus()})),this.modes?(l={},e.on("beforeModeUnload",(function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(l[e.mode]=this._.state)}),this),e.on("activeFilterChange",o,this),e.on("mode",o,this),!this.readOnly&&e.on("readOnly",o,this)):f&&(f=e.getCommand(f))&&(f.on("state",(function(){this.setState(f.state)}),this),d+=f.state==CKEDITOR.TRISTATE_ON?"on":f.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&e.on("contentDirChanged",(function(t){var n=CKEDITOR.document.getById(this._.id),i=n.getFirst();(t=t.data)!=e.lang.dir?n.addClass("cke_"+t):n.removeClass("cke_ltr").removeClass("cke_rtl"),i.setAttribute("style",CKEDITOR.skin.getIconStyle(h,"rtl"==t,this.icon,this.iconOffset))}),this),f?(a=e.getCommandKeystroke(f))&&(s=CKEDITOR.tools.keystrokeToString(e.lang.common.keyboard,a)):d+="off";var y=null,b=this.icon;return h=a=this.name||this.command,this.icon&&!/\./.test(this.icon)?(h=this.icon,b=null):(this.icon&&(y=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(y=this.iconHiDpi)),y?(CKEDITOR.skin.addIcon(y,y),b=null):y=h,d={id:c,name:a,iconName:h,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:d,ariaDisabled:"disabled"==d?"true":"false",title:this.title+(s?" ("+s.display+")":""),ariaShortcut:s?e.lang.common.keyboardShortcut+" "+s.aria:"",titleJs:u.gecko&&!u.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:p,focusFn:m,clickFn:r,style:CKEDITOR.skin.getIconStyle(y,"rtl"==e.lang.dir,b,this.iconOffset),arrowHtml:this.hasArrow?n.output():""},i.output(d,t),this.onRender&&this.onRender(),g},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return!!t&&(t.setState(e,"cke_button"),t.setAttribute("aria-disabled",e==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?t.setAttribute("aria-expanded",e==CKEDITOR.TRISTATE_ON):e===CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return this.allowedContent||this.requiredContent||!this.command||(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),function(){function e(e){function n(t,n){if(n.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var o;o=n.shift();)o="string"==typeof o?o:o.name,i&&-1!=CKEDITOR.tools.indexOf(i,o)||(o=e.ui.create(o))&&e.addFeature(o)&&t.items.push(o)}}var i=(i=e.config.removeButtons)&&i.split(","),o=e.config.toolbar;return"string"==typeof o&&(o=e.config["toolbar_"+o]),e.toolbar=o?function(e){var t,i,o,r=[];for(t=0;t<e.length;++t)o={},"/"==(i=e[t])?r.push(i):CKEDITOR.tools.isArray(i)?(n(o,CKEDITOR.tools.clone(i)),r.push(o)):i.items&&(n(o,CKEDITOR.tools.clone(i.items)),o.name=i.name,r.push(o));return r}(o):function(){for(var i=function(){var t,n,i,o={};for(t in e.ui.items)i=(i=(n=e.ui.items[t]).toolbar||"others").split(","),n=i[0],i=parseInt(i[1]||-1,10),o[n]||(o[n]=[]),o[n].push({name:t,order:i});for(n in o)o[n]=o[n].sort((function(e,t){return e.order==t.order?0:0>t.order?-1:0>e.order?1:e.order<t.order?-1:1}));return o}(),o=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),r=0;r<o.length;r++){var a=o[r];if("/"!=a){"string"==typeof a&&(a=o[r]={name:a});var s,l=a.groups;if(l)for(var u=0;u<l.length;u++)(s=i[s=l[u]])&&n(a,s);(s=i[a.name])&&n(a,s)}}return o}()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var n=function(){this.toolbars=[],this.focusCommandExecuted=!1};n.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var n,i=0;n=e.items[i++];)if(n.focus)return void n.focus()};var i={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout((function(){e.toolbox.focus()}),100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var o,r=function(e,n){var i,a=(s="rtl"==t.lang.dir)?37:39,s=s?39:37,l=void 0===(l=t.config.toolbarGroupCycling)||l;switch(n){case 9:case CKEDITOR.SHIFT+9:for(;!i||!i.items.length;)if((i=9==n?(i?i.next:e.toolbar.next)||t.toolbox.toolbars[0]:(i?i.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1]).items.length)for(e=i.items[o?i.items.length-1:0];e&&!e.focus;)(e=o?e.previous:e.next)||(i=0);return e&&e.focus(),!1;case a:i=e;do{!(i=i.next)&&l&&(i=e.toolbar.items[0])}while(i&&!i.focus);return i?i.focus():r(e,9),!1;case 40:return e.button&&e.button.hasArrow?e.execute():r(e,40==n?a:s),!1;case s:case 38:i=e;do{!(i=i.previous)&&l&&(i=e.toolbar.items[e.toolbar.items.length-1])}while(i&&!i.focus);return i?i.focus():(o=1,r(e,CKEDITOR.SHIFT+9),o=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",(function(i){if(i.data.space==t.config.toolbarLocation){i.removeListener(),t.toolbox=new n;var o,a,s=['<span id="',l=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',l,'" onmousedown="return false;">'],l=!1!==t.config.toolbarStartupExpanded;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&s.push('<span class="cke_toolbox_main"'+(l?">":' style="display:none">'));for(var u=t.toolbox.toolbars,c=e(t),d=c.length,f=0;f<d;f++){var h,g,p,m=0,v=c[f],y="/"!==v&&("/"===c[f+1]||f==d-1);if(v)if(o&&(s.push("</span>"),a=o=0),"/"===v)s.push('<span class="cke_toolbar_break"></span>');else{p=v.items||v;for(var b=0;b<p.length;b++){var T,C=p[b];if(C){var E=function(e){e=e.render(t,s),0<(_=m.items.push(e)-1)&&(e.previous=m.items[_-1],e.previous.next=e),e.toolbar=m,e.onkey=r,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}};if(C.type==CKEDITOR.UI_SEPARATOR)a=o&&C;else{if(T=!1!==C.canGroup,!m){h=CKEDITOR.tools.getNextId(),m={id:h,items:[]},s.push('<span id="',h,'" class="cke_toolbar'+(y?' cke_toolbar_last"':'"'),(g=v.name&&(t.lang.toolbar.toolbarGroups[v.name]||v.name))?' aria-labelledby="'+h+'_label"':"",' role="toolbar">'),g&&s.push('<span id="',h,'_label" class="cke_voice_label">',g,"</span>"),s.push('<span class="cke_toolbar_start"></span>');var _=u.push(m)-1;0<_&&(m.previous=u[_-1],m.previous.next=m)}T?o||(s.push('<span class="cke_toolgroup" role="presentation">'),o=1):o&&(s.push("</span>"),o=0),a&&(E(a),a=0),E(C)}}}o&&(s.push("</span>"),a=o=0),m&&s.push('<span class="cke_toolbar_end"></span></span>')}}if(t.config.toolbarCanCollapse&&s.push("</span>"),t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var x=CKEDITOR.tools.addFunction((function(){t.execCommand("toolbarCollapse")}));t.on("destroy",(function(){CKEDITOR.tools.removeFunction(x)})),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),n=t.getPrevious(),i=e.ui.space("contents"),o=n.getParent(),r=parseInt(i.$.style.height,10),a=o.$.offsetHeight,s=t.hasClass("cke_toolbox_collapser_min");s?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(s?"▲":"◀"),i.setStyle("height",r-(o.$.offsetHeight-a)+"px"),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:i.$.offsetHeight,outerWidth:e.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),s.push('<a title="'+(l?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),l||s.push(" cke_toolbox_collapser_min"),s.push('" onclick="CKEDITOR.tools.callFunction('+x+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}s.push("</span>"),i.data.html+=s.join("")}})),t.on("destroy",(function(){if(this.toolbox){var e,t,n,i,o=0;for(e=this.toolbox.toolbars;o<e.length;o++)for(n=e[o].items,t=0;t<n.length;t++)(i=n[t]).clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}})),t.on("uiReady",(function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)})),t.addCommand("toolbarFocus",i),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,n,i){var o=t(this.editor),r=0===n,a={name:e};if(i){if(i=CKEDITOR.tools.search(o,(function(e){return e.name==i})))return!i.groups&&(i.groups=[]),n&&0<=(n=CKEDITOR.tools.indexOf(i.groups,n))?void i.groups.splice(n+1,0,e):void(r?i.groups.splice(0,0,e):i.groups.push(e));n=null}n&&(n=CKEDITOR.tools.indexOf(o,(function(e){return e.name==n}))),r?o.splice(0,0,e):"number"==typeof n?o.splice(n+1,0,a):o.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(e,t,n){return t.type||(t.type="auto"),!(n&&!1===e.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty())&&(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&e.toolbox&&e.once("afterPaste",(function(){e.toolbox.focus()})),e.fire("paste",t))}function t(e,t,n){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var i=new CKEDITOR.htmlParser.basicWriter;return n.applyTo(t,!0,!1,e.activeEnterMode),t.writeHtml(i),i.getHtml()}function o(e){e.data.preventDefault(),e.data.$.dataTransfer.dropEffect="none"}var r;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(n){var i,o=function(e){function t(){var e,t={};for(e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(t[e]=1);return t}var n={};return{get:function(i){return"plain-text"==i?n.plainText||(n.plainText=new CKEDITOR.filter(e,"br")):"semantic-content"==i?((i=n.semanticContent)||((i=new CKEDITOR.filter(e,{})).allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),i=n.semanticContent=i),i):i?new CKEDITOR.filter(e,i):null}}}(n);if(n.config.forcePasteAsPlainText?i="plain-text":n.config.pasteFilter?i=n.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in n.config||(i="semantic-content"),n.pasteFilter=o.get(i),function(t){function n(){var e,n=t.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var i=function(e){t.getSelection().isCollapsed()||(t.readOnly&&"cut"==e.name||g.initPasteDataTransfer(e,t),e.data.preventDefault())};n.on("copy",i),n.on("cut",i),n.on("cut",(function(){t.readOnly||t.extractSelectedHtml()}),null,null,999)}n.on(g.mainPasteEvent,(function(e){"beforepaste"==g.mainPasteEvent&&p||d(e)})),"beforepaste"==g.mainPasteEvent&&(n.on("paste",(function(e){m||(o(),e.data.preventDefault(),d(e),s("paste"))})),n.on("contextmenu",r,null,null,0),n.on("beforepaste",(function(e){!e.data||e.data.$.ctrlKey||e.data.$.shiftKey||r()}),null,null,0)),n.on("beforecut",(function(){!p&&l()})),n.attachListener(CKEDITOR.env.ie?n:t.document.getDocumentElement(),"mouseup",(function(){e=setTimeout(f,0)})),t.on("destroy",(function(){clearTimeout(e)})),n.on("keyup",f)}function i(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,fakeKeystroke:"cut"==e?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){var e;"cut"==this.type&&l();var n=this.type;if(CKEDITOR.env.ie)e=s(n);else try{e=t.document.$.execCommand(n,!1,null)}catch(a){e=!1}return e||t.showNotification(t.lang.clipboard[this.type+"Error"]),e}}}function o(){m=1,setTimeout((function(){m=0}),100)}function r(){p=1,setTimeout((function(){p=0}),10)}function s(e){var n=t.document,i=n.getBody(),o=!1,r=function(){o=!0};return i.on(e,r),7<CKEDITOR.env.version?n.$.execCommand(e):n.$.selection.createRange().execCommand(e),i.removeListener(e,r),o}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e,n,i,o=t.getSelection();o.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=o.getSelectedElement())&&(n=o.getRanges()[0],(i=t.document.createText("")).insertBefore(e),n.setStartBefore(i),n.setEndAfter(e),o.selectRanges([n]),setTimeout((function(){e.getParent()&&(i.remove(),o.selectElement(e))}),0))}}function u(){if("paste"==g.mainPasteEvent)return t.fire("beforePaste",{type:"auto",method:"paste"}),!1;t.focus(),o();var e=t.focusManager;return e.lock(),t.editable().fire(g.mainPasteEvent)&&!s("paste")?(e.unlock(),!1):(e.unlock(),!0)}function c(e){if("wysiwyg"==t.mode)switch(e.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:e=t.editable(),o(),"paste"==g.mainPasteEvent&&e.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:t.fire("saveSnapshot"),setTimeout((function(){t.fire("saveSnapshot")}),50)}}function d(n){var i={type:"auto",method:"paste",dataTransfer:g.initPasteDataTransfer(n)};i.dataTransfer.cacheData();var o=!1!==t.fire("beforePaste",i);o&&g.canClipboardApiBeTrusted(i.dataTransfer,t)?(n.data.preventDefault(),setTimeout((function(){e(t,i)}),0)):function(e,n){var i,o=t.document,r=t.editable(),a=function(e){e.cancel()};if(!o.getById("cke_pastebin")){var s=t.getSelection(),l=s.createBookmarks();CKEDITOR.env.ie&&s.root.fire("selectionchange");var u=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!r.is("body")||CKEDITOR.env.ie?"div":"body",o);u.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var c=0;o=o.getWindow(),CKEDITOR.env.webkit?(r.append(u),u.addClass("cke_editable"),r.is("body")||(c=(c="static"!=r.getComputedStyle("position")?r:CKEDITOR.dom.element.get(r.$.offsetParent)).getDocumentPosition().y)):r.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(u),u.setStyles({position:"absolute",top:o.getScrollPosition().y-c+10+"px",width:"1px",height:Math.max(1,o.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&u.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(c=u.getParent().isReadOnly())?(u.setOpacity(0),u.setAttribute("contenteditable",!0)):u.setStyle("ltr"==t.config.contentsLangDirection?"left":"right","-10000px"),t.on("selectionChange",a,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(i=r.once("blur",a,null,null,-100)),c&&u.focus(),(c=new CKEDITOR.dom.range(u)).selectNodeContents(u);var d=c.select();CKEDITOR.env.ie&&(i=r.once("blur",(function(){t.lockSelection(d)})));var f=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout((function(){var e;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=f),i&&i.removeListener(),CKEDITOR.env.ie&&r.focus(),s.selectBookmarks(l),u.remove(),CKEDITOR.env.webkit&&(e=u.getFirst())&&e.is&&e.hasClass("Apple-style-span")&&(u=e),t.removeListener("selectionChange",a),n(u.getHtml())}),0)}}(0,(function(n){i.dataValue=n.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),o&&e(t,i)}))}function f(){if("wysiwyg"==t.mode){var e=h("paste");t.getCommand("cut").setState(h("cut")),t.getCommand("copy").setState(h("copy")),t.getCommand("paste").setState(e),t.fire("pasteState",e)}}function h(e){var n=(n=t.getSelection())&&n.getRanges()[0];return(t.readOnly||n&&n.checkReadOnly())&&e in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==e?CKEDITOR.TRISTATE_OFF:(n=(e=t.getSelection()).getRanges(),e.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var g=CKEDITOR.plugins.clipboard,p=0,m=0;!function(){if(t.on("key",c),t.on("contentDom",n),t.on("selectionChange",f),t.contextMenu){t.contextMenu.addListener((function(){return{cut:h("cut"),copy:h("copy"),paste:h("paste")}}));var e=null;t.on("menuShow",(function(){e&&(e.removeListener(),e=null);var n=t.contextMenu.findItemByCommandName("paste");n&&n.element&&(e=n.element.on("touchend",(function(){t._.forcePasteDialog=!0})))}))}t.ui.addButton&&t.once("instanceReady",(function(){t._.pasteButtons&&CKEDITOR.tools.array.forEach(t._.pasteButtons,(function(e){(e=t.ui.get(e))&&(e=CKEDITOR.document.getById(e._.id))&&e.on("touchend",(function(){t._.forcePasteDialog=!0}))}))}))}(),function(){function n(e,n,i,o,r){var a=t.lang.clipboard[n];t.addCommand(n,i),t.ui.addButton&&t.ui.addButton(e,{label:a,command:n,toolbar:"clipboard,"+o}),t.addMenuItems&&t.addMenuItem(n,{label:a,command:n,group:"clipboard",order:r})}n("Cut","cut",i("cut"),10,1),n("Copy","copy",i("copy"),20,4),n("Paste","paste",{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(t,n){function i(n,i){i=void 0===i||i,n?(n.method="paste",n.dataTransfer||(n.dataTransfer=g.initPasteDataTransfer()),e(t,n,i)):r&&!t._.forcePasteDialog&&t.showNotification(l,"info",t.config.clipboard_notificationDuration),t._.forcePasteDialog=!1,t.fire("afterCommandExec",{name:"paste",command:o,returnValue:!!n})}var o=this,r=void 0===(n=null!=n?n:{}).notification||n.notification,a=n.type,s=CKEDITOR.tools.keystrokeToString(t.lang.common.keyboard,t.getCommandKeystroke(this)),l="string"==typeof r?r:t.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+s.aria+'">'+s.display+"</kbd>");s="string"==typeof n?n:n.dataValue,a&&!0!==t.config.forcePasteAsPlainText&&"allow-word"!==t.config.forcePasteAsPlainText?t._.nextPasteType=a:delete t._.nextPasteType,"string"==typeof s?i({dataValue:s}):t.getClipboardData(i)}},30,8),t._.pasteButtons||(t._.pasteButtons=[]),t._.pasteButtons.push("Paste")}(),t.getClipboardData=function(e,n){function i(e){e.removeListener(),e.cancel(),n(e.data)}function o(e){e.removeListener(),e.cancel(),n({type:a,dataValue:e.data.dataValue,dataTransfer:e.data.dataTransfer,method:"paste"})}var r=!1,a="auto";n||(n=e,e=null),t.on("beforePaste",(function(e){e.removeListener(),r=!0,a=e.data.type}),null,null,1e3),t.on("paste",i,null,null,0),!1===u()&&(t.removeListener("paste",i),t._.forcePasteDialog&&r&&t.fire("pasteDialog")?(t.on("pasteDialogCommit",o),t.on("dialogHide",(function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",o),e.data._.committed||n(null)}))):n(null))}}(n),function(t){var n=CKEDITOR.plugins.clipboard;t.on("contentDom",(function(){function i(e,n,i){var o={$:e.data.$,target:e.data.getTarget()};n&&(o.dragRange=n),i&&(o.dropRange=i),!1===t.fire(e.name,o)&&e.data.preventDefault()}function o(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e.getChildCount()}var r=t.editable(),a=CKEDITOR.plugins.clipboard.getDropTarget(t),s=t.ui.space("top"),l=t.ui.space("bottom");n.preventDefaultDropOnElement(s),n.preventDefaultDropOnElement(l),r.attachListener(a,"dragstart",i),r.attachListener(t,"dragstart",n.resetDragDataTransfer,n,null,1),r.attachListener(t,"dragstart",(function(e){n.initDragDataTransfer(e,t)}),null,null,2),r.attachListener(t,"dragstart",(function(){var e=n.dragRange=t.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n.dragStartContainerChildCount=e?o(e.startContainer):null,n.dragEndContainerChildCount=e?o(e.endContainer):null)}),null,null,100),r.attachListener(a,"dragend",i),r.attachListener(t,"dragend",n.initDragDataTransfer,n,null,1),r.attachListener(t,"dragend",n.resetDragDataTransfer,n,null,100),r.attachListener(a,"dragover",(function(e){if(CKEDITOR.env.edge)e.data.preventDefault();else{var t=e.data.getTarget();(t&&t.is&&t.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&e.data.$.dataTransfer.types.contains("Files"))&&e.data.preventDefault()}})),r.attachListener(a,"drop",(function(e){var o;e.data.$.defaultPrevented||(e.data.preventDefault(),t.readOnly)||(!(o=e.data.getTarget()).isReadOnly()||o.type==CKEDITOR.NODE_ELEMENT&&o.is("html"))&&(o=n.getRangeAtDropPosition(e,t))&&i(e,n.dragRange,o)}),null,null,9999),r.attachListener(t,"drop",n.initDragDataTransfer,n,null,1),r.attachListener(t,"drop",(function(i){if(i=i.data){var o=i.dropRange,r=i.dragRange,a=i.dataTransfer;a.getTransferType(t)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout((function(){n.internalDrop(r,o,a,t)}),0):a.getTransferType(t)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?function(n,i,o){i.select(),e(t,{dataTransfer:o,method:"drop"},1),o.sourceEditor.fire("saveSnapshot"),o.sourceEditor.editable().extractHtmlFromRange(n),o.sourceEditor.getSelection().selectRanges([n]),o.sourceEditor.fire("saveSnapshot")}(r,o,a):(s=a,o.select(),e(t,{dataTransfer:s,method:"drop"},1),n.resetDragDataTransfer())}var s}),null,null,9999)}))}(n),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var r,a=["image/png","image/jpeg","image/gif"];n.on("paste",(function(e){var t=e.data,i=t.dataTransfer;if(!t.dataValue&&"paste"==t.method&&i&&1==i.getFilesCount()&&r!=i.id&&(i=i.getFile(0),-1!=CKEDITOR.tools.indexOf(a,i.type))){var o=new FileReader;o.addEventListener("load",(function(){e.data.dataValue='<img src="'+o.result+'" />',n.fire("paste",e.data)}),!1),o.addEventListener("abort",(function(){n.fire("paste",e.data)}),!1),o.addEventListener("error",(function(){n.fire("paste",e.data)}),!1),o.readAsDataURL(i),r=t.dataTransfer.id,e.stop()}}),null,null,1)}n.on("paste",(function(e){if(e.data.dataTransfer||(e.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!e.data.dataValue){var t=e.data.dataTransfer,i=t.getData("text/html");i?(e.data.dataValue=i,e.data.type="html"):(i=t.getData("text/plain"))&&(e.data.dataValue=n.editable().transformPlainTextToHtml(i),e.data.type="text")}}),null,null,1),n.on("paste",(function(e){var t=e.data.dataValue,n=CKEDITOR.dtd.$block;if(-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,(function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")}))),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var i,o,r=new CKEDITOR.dom.element("div");for(r.setHtml(t);1==r.getChildCount()&&(i=r.getFirst())&&i.type==CKEDITOR.NODE_ELEMENT&&(i.hasClass("cke_editable")||i.hasClass("cke_contents"));)r=o=i;o&&(t=o.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,(function(t,i){return i.toLowerCase()in n?(e.data.preSniffing="html","<"+i):t})):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,(function(t,i){return i in n?(e.data.endsWithEOL=1,"</"+i+">"):t})):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t}),null,null,3),n.on("paste",(function(e){e=e.data;var i,r=n._.nextPasteType||e.type,a=e.dataValue,s=n.config.clipboard_defaultContentType||"html",l=e.dataTransfer.getTransferType(n)==CKEDITOR.DATA_TRANSFER_EXTERNAL,u=!0===n.config.forcePasteAsPlainText;i="html"==r||"html"==e.preSniffing?"html":function(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(a),delete n._.nextPasteType,"htmlifiedtext"==i&&(a=function(e,t){function n(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(1==e%2?"<br>":"")}return(t=(t=t.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,(function(e){return e.toLowerCase()}))).match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&((t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,(function(e){return n(e.split("</div><div>").length+1)}))+"</p>"),t=(t=t.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,(function(e){return n(e.length/4)}))+"</p>")),function(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,(function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)})).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}(e,t))}(n.config,a)),"text"==r&&"html"==i?a=t(n,a,o.get("plain-text")):(l&&n.pasteFilter&&!e.dontFilter||u)&&(a=t(n,a,n.pasteFilter)),e.startsWithEOL&&(a='<br data-cke-eol="1">'+a),e.endsWithEOL&&(a+='<br data-cke-eol="1">'),"auto"==r&&(r="html"==i||"html"==s?"html":"text"),e.type=r,e.dataValue=a,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL}),null,null,6),n.on("paste",(function(e){(e=e.data).dataValue&&(n.insertHtml(e.dataValue,e.type,e.range),setTimeout((function(){n.fire("afterPaste")}),0))}),null,null,1e3),n.on("pasteDialog",(function(e){setTimeout((function(){n.openDialog("paste",e.data)}),0)}))}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!(CKEDITOR.env.ie&&16>CKEDITOR.env.version||CKEDITOR.env.iOS&&605>CKEDITOR.env.version),isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(e,t,n){e.ui.addButton&&(e.ui.addButton(t,n),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push(t))},canClipboardApiBeTrusted:function(e,t){return!!(e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.iOS&&605<=CKEDITOR.env.version||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,n,i){function o(e,n,i){var o=e;if(o.type==CKEDITOR.NODE_TEXT&&(o=e.getParent()),o.equals(n)&&i!=n.getChildCount())return e=t.startContainer.getChild(t.startOffset-1),n=t.startContainer.getChild(t.startOffset),e&&e.type==CKEDITOR.NODE_TEXT&&n&&n.type==CKEDITOR.NODE_TEXT&&(i=e.getLength(),e.setText(e.getText()+n.getText()),n.remove(),t.setStart(e,i),t.collapse(!0)),!0}var r=t.startContainer;"number"==typeof i&&"number"==typeof n&&r.type==CKEDITOR.NODE_ELEMENT&&(o(e.startContainer,r,n)||o(e.endContainer,r,i))},isDropRangeAffectedByDragRange:function(e,t){var n=t.startContainer,i=t.endOffset;return!!(e.endContainer.equals(n)&&e.endOffset<=i||e.startContainer.getParent().equals(n)&&e.startContainer.getIndex()<i||e.endContainer.getParent().equals(n)&&e.endContainer.getIndex()<i)},internalDrop:function(t,n,i,o){var r,a,s=CKEDITOR.plugins.clipboard,l=o.editable();o.fire("saveSnapshot"),o.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,n,s.dragStartContainerChildCount,s.dragEndContainerChildCount),(a=this.isDropRangeAffectedByDragRange(t,n))||(r=t.createBookmark(!1)),s=n.clone().createBookmark(!1),a&&(r=t.createBookmark(!1)),t=r.startNode,a=s.startNode,(n=r.endNode)&&t.getPosition(a)&CKEDITOR.POSITION_PRECEDING&&n.getPosition(a)&CKEDITOR.POSITION_FOLLOWING&&a.insertBefore(t),(t=o.createRange()).moveToBookmark(r),l.extractHtmlFromRange(t,1),n=o.createRange(),s.startNode.getCommonAncestor(l)||(s=o.getSelection().createBookmarks()[0]),n.moveToBookmark(s),e(o,{dataTransfer:i,method:"drop",range:n},1),o.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,t){var n=e.data.$,i=n.clientX,o=n.clientY,a=t.getSelection(!0).getRanges()[0],s=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint&&t.document.$.caretRangeFromPoint(i,o))n=t.document.$.caretRangeFromPoint(i,o),s.setStart(CKEDITOR.dom.node(n.startContainer),n.startOffset),s.collapse(!0);else if(n.rangeParent)s.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),s.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&a&&t.editable().hasFocus)return a;if(!document.body.createTextRange)return null;t.focus(),n=t.document.getBody().$.createTextRange();try{for(var l=!1,u=0;20>u&&!l;u++){if(!l)try{n.moveToPoint(i,o-u),l=!0}catch(r){}if(!l)try{n.moveToPoint(i,o+u),l=!0}catch(p){}}if(l){var c="cke-temp-"+(new Date).getTime();n.pasteHTML('<span id="'+c+'">​</span>');var d=t.document.getById(c);s.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d.remove()}else{var f,h=t.document.$.elementFromPoint(i,o),g=new CKEDITOR.dom.element(h);if(g.equals(t.editable())||"html"==g.getName())return a&&a.startContainer&&!a.startContainer.equals(t.editable())?a:null;f=g.getClientRect(),s.setStartAt(g,i<f.left?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),s.collapse(!0)}}catch(m){return null}}return s},initDragDataTransfer:function(e,t){var n=e.data.$?e.data.$.dataTransfer:null,i=new this.dataTransfer(n,t);"dragstart"===e.name&&i.storeId(),n?this.dragData&&i.id==this.dragData.id?i=this.dragData:this.dragData=i:this.dragData?i=this.dragData:this.dragData=i,e.data.dataTransfer=i},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var n=e.data.$.clipboardData,i=new this.dataTransfer(n,t);return"copy"!==e.name&&"cut"!==e.name||i.storeId(),this.copyCutData&&i.id==this.copyCutData.id?(i=this.copyCutData).$=n:this.copyCutData=i,i}return new this.dataTransfer(null,t)}return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",o)}},r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(e,t){e&&(this.$=e),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(e){return"text"==(e=e.toLowerCase())||"text/plain"==e?"Text":"url"==e?"URL":e}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(r),this.id||(this.id="Text"==r?"":"cke-"+CKEDITOR.tools.getUniqueId()),t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"==r||this.getData("text/plain")||this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e,t){if(null==(i="text/html"==(e=this._.normalizeType(e))&&t?this._.nativeHtmlCache:this._.data[e])||""===i){if(this._.fallbackDataTransfer.isRequired())i=this._.fallbackDataTransfer.getData(e,t);else try{i=this.$.getData(e)||""}catch(o){i=""}"text/html"!=e||t||(i=this._stripHtml(i))}if("Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==i.substring(0,7)&&(i=""),"string"==typeof i)var n=i.indexOf("</html>"),i=-1!==n?i.substring(0,n+7):i;return i},setData:function(e,t){if("text/html"==(e=this._.normalizeType(e))?(this._.data[e]=this._stripHtml(t),this._.nativeHtmlCache=t):this._.data[e]=t,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e)if("Text"==r&&"Text"==e&&(this.id=t),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(e,t);else try{this.$.setData(e,t)}catch(n){}},storeId:function(){"Text"!==r&&this.setData(r,this.id)},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(e){e=i._.normalizeType(e);var t=i.getData(e);"text/html"==e&&(i._.nativeHtmlCache=i.getData(e,!0),t=i._stripHtml(t)),t&&(i._.data[e]=t)}if(this.$){var t,n,i=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(t=0;t<this.$.types.length;t++)e(this.$.types[t])}else e("Text"),e("URL");if(n=this._getImageFromClipboard(),this.$&&this.$.files||n){if(this._.files=[],this.$.files&&this.$.files.length)for(t=0;t<this.$.files.length;t++)this._.files.push(this.$.files[t]);0===this._.files.length&&n&&this._.files.push(n)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var e,t={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),(function(e){t[e]=1})),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var n=0;n<this.$.types.length;n++)t[this.$.types[n]]=1}else t.Text=1,t.URL=1;for(e in"Text"!=r&&(t[r]=0),t)if(t[e]&&""!==this.getData(e))return!1;return!0},_getImageFromClipboard:function(){var e;try{if(this.$&&this.$.items&&this.$.items[0]&&(e=this.$.items[0].getAsFile())&&e.type)return e}catch(b){}},_stripHtml:function(e){if(e&&e.length){e=e.replace(this._.metaRegExp,"");var t=this._.bodyRegExp.exec(e);t&&t.length&&(e=(e=t[1]).replace(this._.fragmentRegExp,""))}return e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(e){this._dataTransfer=e,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer,t=this._dataTransfer.$;if(null===e._isCustomMimeTypeSupported){if(!t)return!1;if(e._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{t.setData("cke/mimetypetest","cke test value"),e._isCustomMimeTypeSupported="cke test value"===t.getData("cke/mimetypetest"),t.clearData("cke/mimetypetest")}catch(n){}}return!e._isCustomMimeTypeSupported},getData:function(e,t){var n,i=this._getData(this._customDataFallbackType,!0);return t?i:(i=this._extractDataComment(i),null!==(n=e===this._customDataFallbackType?i.content:i.data&&i.data[e]?i.data[e]:this._getData(e,!0))?n:"")},setData:function(e,t){(a=e===this._customDataFallbackType)&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var o=t,r=this._dataTransfer.$;try{r.setData(e,o),a&&(this._dataTransfer._.nativeHtmlCache=o)}catch(i){if(this._isUnsupportedMimeTypeError(i)){a=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(a._customTypes,e)&&a._customTypes.push(e);var a=this._getFallbackTypeContent(),s=this._getFallbackTypeData();s[e]=o;try{o=this._applyDataComment(a,s),r.setData(this._customDataFallbackType,o),this._dataTransfer._.nativeHtmlCache=o}catch(n){o=""}}}return o},_getData:function(e,t){var n=this._dataTransfer._.data;if(!t&&n[e])return n[e];try{return this._dataTransfer.$.getData(e)}catch(i){return null}},_getFallbackTypeContent:function(){var e=this._dataTransfer._.data[this._customDataFallbackType];return e||(e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),e},_getFallbackTypeData:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},n=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(e,(function(e){void 0!==n[e]?t[e]=n[e]:void 0!==t[e]&&(t[e]=t[e])}),this),t},_isUnsupportedMimeTypeError:function(e){return e.message&&-1!==e.message.search(/element not found/gi)},_extractDataComment:function(e){var t,n={data:null,content:e||""};return e&&16<e.length&&(t=/\x3c!--cke-data:(.*?)--\x3e/g.exec(e))&&t[1]&&(n.data=JSON.parse(decodeURIComponent(t[1])),n.content=e.replace(t[0],"")),n},_applyDataComment:function(e,t){var n="";return t&&CKEDITOR.tools.object.keys(t).length&&(n="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(t))+"--\x3e"),n+(e&&e.length?e:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(e){var t=this._;t.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(e),t.on?t.panel.hide():t.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){var n=t.panel||{};delete t.panel,this.base(t),this.document=n.parent&&n.parent.getDocument()||CKEDITOR.document,n.block={attributes:n.attributes},n.toolbarRelated=!0,this.hasArrow="listbox",this.click=e,this._={panelDefinition:n}},statics:{handler:{create:function(e){return new CKEDITOR.ui.panelButton(e)}}},proto:{createPanel:function(e){var t=this._;if(!t.panel){var n=this._.panelDefinition.block,i=(r=this._.panelDefinition).parent||CKEDITOR.document.getBody(),o=this._.panel=new CKEDITOR.ui.floatPanel(e,i,r),r=o.addBlock(t.id,n),a=this;o.onShow=function(){a.className&&this.element.addClass(a.className+"_panel"),a.setState(CKEDITOR.TRISTATE_ON),t.on=1,a.editorFocus&&e.focus(),a.onOpen&&a.onOpen()},o.onHide=function(n){a.className&&this.element.getFirst().removeClass(a.className+"_panel"),a.setState(a.modes&&a.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.on=0,!n&&a.onClose&&a.onClose()},o.onEscape=function(){o.hide(1),a.document.getById(t.id).focus()},this.onBlock&&this.onBlock(o,r),r.onHide=function(){t.on=0,a.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),n=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(i,o){var r={editorId:i.id,id:this.id,langCode:i.langCode,dir:i.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":i.config.baseFloatZIndex+1};if(this.getHolderElement=function(){if(!(t=this._.holder)){if(this.isFramed){var e=(t=this.document.getById(this.id+"_frame")).getParent(),t=t.getFrameDocument();CKEDITOR.env.iOS&&e.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),e=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind((function(){this.isLoaded=!0,this.onLoad&&this.onLoad()}),this)),t.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+e+");"},r))),t.getWindow().$.CKEDITOR=CKEDITOR,t.on("keydown",(function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");("input"!==e.data.getTarget().getName()||37!==t&&39!==t)&&(this._.onKeyDown&&!1===this._.onKeyDown(t)?"input"===e.data.getTarget().getName()&&32===t||e.data.preventDefault():(27==t||t==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault())}),this),(t=t.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(e)}else t=this.document.getById(this.id);this._.holder=t}return t},this.isFramed){var a=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";r.frame=t.output({id:this.id+"_frame",src:a})}return a=e.output(r),o&&o.push(a),a},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){e=this._.blocks[e];var t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",n),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this._.getItems().getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))},markFirstDisplayed:function(e){for(var t,n,i=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"none"==e.getStyle("display")},o=this._.getItems(),r=o.count()-1;0<=r;r--)if((t=o.getItem(r)).getAscendant(i)||(n=t,this._.focusIndex=r),"true"==t.getAttribute("aria-selected")){n=t,this._.focusIndex=r;break}n&&(e&&e(),CKEDITOR.env.webkit&&n.getDocument().getWindow().focus(),n.focus(),this.onMark&&this.onMark(n))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(e,t){switch(o=this.keys[e]){case"next":for(var n,i=this._.focusIndex,o=this._.getItems();n=o.getItem(++i);)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus(!0);break}return!n&&!t&&(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(i=this._.focusIndex,o=this._.getItems();0<i&&(n=o.getItem(--i));){if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus(!0);break}n=null}return!n&&!t&&(this._.focusIndex=o.count(),this.onKeyDown(e,1));case"click":case"mouseup":return(n=0<=(i=this._.focusIndex)&&this._.getItems().getItem(i))&&n.fireEventHandler(o,{button:CKEDITOR.tools.normalizeMouseButton(CKEDITOR.MOUSE_BUTTON_LEFT,!0)}),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),n={},CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(e,t,i,o){function r(){u.hide()}i.forceIFrame=1,i.toolbarRelated&&e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(t=CKEDITOR.document.getById("cke_"+e.name));var a=t.getDocument(),s=(o=function(e,t,i,o,r){r=CKEDITOR.tools.genKey(t.getUniqueId(),i.getUniqueId(),e.lang.dir,e.uiColor||"",o.css||"",r||"");var a=n[r];return a||((a=n[r]=new CKEDITOR.ui.panel(t,o)).element=i.append(CKEDITOR.dom.element.createFromHtml(a.render(e),t)),a.element.setStyles({display:"none",position:"absolute"})),a}(e,a,t,i,o||0)).element,l=s.getFirst(),u=this;s.disableContextMenu(),this.element=s,this._={editor:e,panel:o,parentElement:t,definition:i,document:a,iframe:l,children:[],dir:e.lang.dir,showBlockParams:null,markFirst:void 0===i.markFirst||i.markFirst},e.on("mode",r),e.on("resize",r),a.getWindow().on("resize",(function(){this.reposition()}),this)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,i,o,r){var a=this._.panel,s=a.showBlock(e);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var l=this._.editor.editable();this._.returnFocus=l.hasFocus?l:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var u=this.element,c=(l=this._.iframe,l=CKEDITOR.env.ie&&!CKEDITOR.env.edge?l:new CKEDITOR.dom.window(l.$.contentWindow),u.getDocument()),d=this._.parentElement.getPositionedAncestor(),f=t.getDocumentPosition(c),h=(c=d?d.getDocumentPosition(c):{x:0,y:0},"rtl"==this._.dir),g=f.x+(i||0)-c.x,p=f.y+(o||0)-c.y;!h||1!=n&&4!=n?h||2!=n&&3!=n||(g+=t.$.offsetWidth-1):g+=t.$.offsetWidth,3!=n&&4!=n||(p+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),u.setStyles({top:p+"px",left:0,display:""}),u.setOpacity(0),u.getFirst().removeStyle("width"),this._.editor.focusManager.add(l),this._.blurSet||(CKEDITOR.event.useCapture=!0,l.on("blur",(function(e){function t(){delete this._.returnFocus,this.hide()}this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))}),this),l.on("focus",(function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)}),this),CKEDITOR.env.iOS&&(l.on("touchstart",(function(){clearTimeout(this._.hideTimeout)}),this),l.on("touchend",(function(){this._.hideTimeout=0,this.focus()}),this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),a.onEscape=CKEDITOR.tools.bind((function(e){if(this.onEscape&&!1===this.onEscape(e))return!1}),this),CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.tools.bind((function(){if((n=u).removeStyle("width"),s.autoSize){var e=s.element.getDocument();e=(CKEDITOR.env.webkit||CKEDITOR.env.edge?s.element:e.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(n.$.offsetWidth||0)-(n.$.clientWidth||0)+3),n.setStyle("width",e+10+"px"),e=s.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(n.$.offsetHeight||0)-(n.$.clientHeight||0)+3),n.setStyle("height",e+"px"),a._.currentBlock.element.setStyle("display","none").removeStyle("display")}else n.removeStyle("height");h&&(g-=u.$.offsetWidth),u.setStyle("left",g+"px"),e=a.element.getWindow();var t,n=u.$.getBoundingClientRect(),i=(e=e.getViewPaneSize(),n.width||n.right-n.left),o=n.height||n.bottom-n.top,l=h?n.right:e.width-n.left,c=h?e.width-n.right:n.left;h?l<i&&(g=c>i?g+i:e.width>i?g-n.left:g-n.right+e.width):l<i&&(g=c>i?g-i:e.width>i?g-n.right+e.width:g-n.left),i=n.top,e.height-n.top<o&&(p=i>o?p-o:e.height>o?p-n.bottom+e.height:p-n.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&((e=n=u.$.offsetParent&&new CKEDITOR.dom.element(u.$.offsetParent))&&"html"==e.getName()&&(e=e.getDocument().getBody()),e&&"rtl"==e.getComputedStyle("direction")&&(g=CKEDITOR.env.ie8Compat?g-2*u.getDocument().getDocumentElement().$.scrollLeft:g-(n.$.scrollWidth-n.$.clientWidth))),(t=(n=u.getFirst()).getCustomData("activePanel"))&&t.onHide&&t.onHide.call(this,1),n.setCustomData("activePanel",this),u.setStyles({top:p+"px",left:g+"px"}),u.setOpacity(1),r&&r()}),this);a.isLoaded?e():a.onLoad=e,CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),s.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout((function(){s.markFirstDisplayed?s.markFirstDisplayed():s._.markFirstDisplayed()}),0):s.markFirstDisplayed?s.markFirstDisplayed():s._.markFirstDisplayed()),this._.editor.fire("panelShow",this)}),0,this)}),CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var e=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,e))},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return void 0!==e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,n,i,o,r){this._.activeChild==e&&e._.panel._.offsetParentId==n.getId()||(this.hideChild(),e.onHide=CKEDITOR.tools.bind((function(){CKEDITOR.tools.setTimeout((function(){this._.focused||this.hide()}),0,this)}),this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,i,o,r),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout((function(){e.element.getChild(0).$.style.cssText+=""}),100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",(function(){var e,t=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in n){var i=n[e];t?i.destroy():i.element.hide()}t&&(n={})})),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(e){function t(t,a,s,l,u){var c,d=new CKEDITOR.style(o["colorButton_"+a+"Style"]),f=CKEDITOR.tools.getNextId()+"_colorBox",h={type:a};u=u||{},e.ui.add(t,CKEDITOR.UI_PANELBUTTON,{label:s,title:s,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+l,allowedContent:d,requiredContent:d,contentTransformations:u.contentTransformations,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":r.panelTitle}},onBlock:function(t,i){c=i,i.autoSize=!0,i.element.addClass("cke_colorblock"),i.element.setHtml(function(t,i,a,s){t=[];var l=o.colorButton_colors.split(","),u=o.colorButton_colorsPerRow||6,c=e.plugins.colordialog&&!1!==o.colorButton_enableMore,d=l.length+(c?2:1),f=CKEDITOR.tools.addFunction((function(t,i){function r(t){var r=o["colorButton_"+i+"Style"];e.removeStyle(new CKEDITOR.style(r,{color:"inherit"})),r.childRule="back"==i?function(e){return n(e)}:function(e){return!(e.is("a")||e.getElementsByTag("a").count())||n(e)},e.focus(),t&&e.applyStyle(new CKEDITOR.style(r,{color:t})),e.fire("saveSnapshot")}if(e.focus(),e.fire("saveSnapshot"),"?"!=t)return r(t&&"#"+t);e.getColorFromDialog((function(e){if(e)return r(e)}),null,s)}));for(!1!==o.colorButton_enableAutomatic&&t.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',r.auto,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',f,",null,'",i,"');return false;\" href=\"javascript:void('",r.auto,'\')" role="option" aria-posinset="1" aria-setsize="',d,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td colspan="'+u+'" align="center"><span class="cke_colorbox" id="',a,'"></span>',r.auto,"</td></tr></table></a>"),t.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%">'),a=0;a<l.length;a++){0==a%u&&t.push("</tr><tr>");var h=l[a].split("/"),g=h[0],p=h[1]||g;t.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',h[1]?g:e.lang.colorbutton.colors[p]||p,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',f,",'",p,"','",i,"'); return false;\" href=\"javascript:void('",p,'\')" data-value="'+p+'" role="option" aria-posinset="',a+2,'" aria-setsize="',d,'"><span class="cke_colorbox" style="background-color:#',p,'"></span></a></td>')}return c&&t.push('</tr><tr><td colspan="'+u+'" align="center"><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',r.more,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',f,",'?','",i,"');return false;\" href=\"javascript:void('",r.more,"')\"",' role="option" aria-posinset="',d,'" aria-setsize="',d,'">',r.more,"</a></td>"),t.push("</tr></table>"),t.join("")}(t,a,f,h)),i.element.getDocument().getBody().setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var s=i.keys,l="rtl"==e.lang.dir;s[l?37:39]="next",s[40]="next",s[9]="next",s[l?39:37]="prev",s[38]="prev",s[CKEDITOR.SHIFT+9]="prev",s[32]="click"},refresh:function(){e.activeFilter.check(d)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var t=(r=e.getSelection())&&r.getStartElement(),n=e.elementPath(t);if(n){t=n.block||n.blockLimit||e.document.getBody();do{n=t&&t.getComputedStyle("back"==a?"background-color":"color")||"transparent"}while("back"==a&&"transparent"==n&&t&&(t=t.getParent()));if(n&&"transparent"!=n||(n="#ffffff"),!1!==o.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(f).setStyle("background-color",n),t=r&&r.getRanges()[0]){var r=new CKEDITOR.dom.walker(t),s=t.collapsed?t.startContainer:r.next();for(t="";s;){if(s.type!==CKEDITOR.NODE_ELEMENT&&(s=s.getParent()),s=i(s.getComputedStyle("back"==a?"background-color":"color")),(t=t||s)!==s){t="";break}s=r.next()}for("transparent"==t&&(t=""),"fore"==a&&(h.automaticTextColor="#"+i(n)),h.selectionColor=t?"#"+t:"",r=t,t=c._.getItems(),s=0;s<t.count();s++){var l=t.getItem(s);l.removeAttribute("aria-selected"),r&&r==i(l.getAttribute("data-value"))&&l.setAttribute("aria-selected",!0)}}return n}}})}function n(e){return"false"==e.getAttribute("contentEditable")||e.getAttribute("data-nostyle")}function i(e){return CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(e||"")).replace(/#/g,"")}var o=e.config,r=e.lang.colorbutton;if(!CKEDITOR.env.hc){t("TextColor","fore",r.textColorTitle,10,{contentTransformations:[[{element:"font",check:"span{color}",left:function(e){return!!e.attributes.color},right:function(e){e.name="span",e.attributes.color&&(e.styles.color=e.attributes.color),delete e.attributes.color}}]]});var a={},s=e.config.colorButton_normalizeBackground;(void 0===s||s)&&(a.contentTransformations=[[{element:"span",left:function(e){var t=CKEDITOR.tools;return!("span"!=e.name||!e.styles||!e.styles.background)&&(e=t.style.parse.background(e.styles.background)).color&&1===t.object.keys(e).length},right:function(t){var n=new CKEDITOR.style(e.config.colorButton_backStyle,{color:t.styles.background}).getDefinition();return t.name=n.element,t.styles=n.styles,t.attributes=n.attributes||{},t}}]]),t("BGColor","back",r.bgColorTitle,20,a)}}}),CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.plugins.colordialog={requires:"dialog",init:function(e){var t=new CKEDITOR.dialogCommand("colordialog");t.editorFocus=!1,e.addCommand("colordialog",t),CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js"),e.getColorFromDialog=function(t,n,i){var o,r,a,s;o=function(e){a(this),e="ok"==e.name?this.getValueOf("picker","selectedColor"):null,/^[0-9a-f]{3}([0-9a-f]{3})?$/i.test(e)&&(e="#"+e),t.call(n,e)},r=function(e){i&&(e.data=i)},a=function(e){e.removeListener("ok",o),e.removeListener("cancel",o),e.removeListener("show",r)},s=function(e){e.on("ok",o),e.on("cancel",o),e.on("show",r,null,null,5)},e.execCommand("colordialog"),e._.storedDialogs&&e._.storedDialogs.colordialog?s(e._.storedDialogs.colordialog):CKEDITOR.on("dialogDefinition",(function(e){if("colordialog"==e.data.name){var t=e.data.definition;e.removeListener(),t.onLoad=CKEDITOR.tools.override(t.onLoad,(function(e){return function(){s(this),t.onLoad=e,"function"==typeof e&&e.call(this)}}))}}))}}},CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog),function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(e){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js")),e.addCommand("templates",new CKEDITOR.dialogCommand("templates")),e.ui.addButton&&e.ui.addButton("Templates",{label:e.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var e={},t={};CKEDITOR.addTemplates=function(t,n){e[t]=n},CKEDITOR.getTemplates=function(t){return e[t]},CKEDITOR.loadTemplates=function(e,n){for(var i=[],o=0,r=e.length;o<r;o++)t[e[o]]||(i.push(e[o]),t[e[o]]=1);i.length?CKEDITOR.scriptLoader.load(i,n):setTimeout(n,0)}}(),CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")],CKEDITOR.config.templates_replaceContent=!0,CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),n=e._.menuGroups={},i=e._.menuItems={},o=0;o<t.length;o++)n[t[o]]=o+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(i[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return i[e]},e.removeMenuItem=function(e){delete i[e]}}}),function(){var e='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"',t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),CKEDITOR.env.ie&&(t='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&'),e=e+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" onclick="'+t+'CKEDITOR.tools.callFunction({clickFn},{index}); return false;"><span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>';var n=CKEDITOR.addTemplate("menuItem",e),i=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),o=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var n=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),i=n.block.attributes=n.attributes||{};!i.role&&(i.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),n=this.editor.elementPath(),i=this._.listeners;this.removeAll();for(var o=0;o<i.length;o++){var r=i[o](t,e,n);if(r)for(var a in r){var s=this.editor.getMenuItem(a);!s||s.command&&!this.editor.getCommand(s.command).state||(s.state=r[a],this.add(s))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,n=this.items[e];if(n=n.getItems&&n.getItems()){for(var i in t?t.removeAll():((t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),n){var o=this.editor.getMenuItem(i);o&&(o.state=n[i],t.add(o))}var r=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(e));setTimeout((function(){t.show(r,2)}),0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(e,t,n,i){if(this.parent||(this._.onShow(),this.items.length)){t=t||("rtl"==this.editor.lang.dir?2:1);var o=this.items,r=this.editor,a=this._.panel,s=this._.element;a||((a=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind((function(e){if(!1===this._.onEscape(e))return!1}),this),a.onShow=function(){a._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},a.onHide=CKEDITOR.tools.bind((function(){this._.onHide&&this._.onHide()}),this),(s=a.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(l=s.keys)[40]="next",l[9]="next",l[38]="prev",l[CKEDITOR.SHIFT+9]="prev",l["rtl"==r.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",l[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(l[13]="mouseup"),(l=(s=this._.element=s.element).getDocument()).getBody().setStyle("overflow","hidden"),l.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction((function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,r.config.menu_subMenuDelay||400,this,[e])}),this),this._.itemOutFn=CKEDITOR.tools.addFunction((function(){clearTimeout(this._.showSubTimeout)}),this),this._.itemClickFn=CKEDITOR.tools.addFunction((function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)}),this)),function(e){e.sort((function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0}))}(o);for(var l=['<div class="cke_menu'+((l=r.elementPath())&&l.direction()!=r.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],u=o.length,c=u&&o[0].group,d=0;d<u;d++){var f=o[d];c!=f.group&&(l.push('<div class="cke_menuseparator" role="separator"></div>'),c=f.group),f.render(this,d,l)}l.push("</div>"),s.setHtml(l.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(a,this.id,e,t,n,i):a.showBlock(this.id,e,t,n,i),r.fire("menuShow",[a])}},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)},findItemByCommandName:function(e){var t=CKEDITOR.tools.array.filter(this.items,(function(t){return e===t.command}));return t.length?{item:t=t[0],element:this._.element.findOne("."+t.className)}:null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,r){var a,s,l=e.id+String(t),u=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,c="",d=this.editor,f=u==CKEDITOR.TRISTATE_ON?"on":u==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(c=' aria-checked="'+(u==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var h=this.getItems,g="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",p=this.name;this.icon&&!/\./.test(this.icon)&&(p=this.icon),this.command&&(a=d.getCommand(this.command),(a=d.getCommandKeystroke(a))&&(s=CKEDITOR.tools.keystrokeToString(d.lang.common.keyboard,a))),e={id:l,name:this.name,iconName:p,label:this.label,cls:this.className||"",state:f,hasPopup:h?"true":"false",disabled:u==CKEDITOR.TRISTATE_DISABLED,title:this.label+(s?" ("+s.display+")":""),ariaShortcut:s?d.lang.common.keyboardShortcut+" "+s.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(p,"rtl"==this.editor.lang.dir,p==this.icon?null:this.icon,this.iconOffset),shortcutHtml:s?o.output({shortcut:s.display}):"",arrowHtml:h?i.output({label:g}):"",role:this.role?this.role:"menuitem",ariaChecked:c},n.output(e,r)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{css:e.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){function n(){o=!1}var i,o;if(e.on("contextmenu",(function(e){e=e.data;var n=CKEDITOR.env.webkit?i:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!(t&&n||(e.preventDefault(),o))){CKEDITOR.env.mac&&CKEDITOR.env.webkit&&(n=this.editor,(r=new CKEDITOR.dom.elementPath(e.getTarget(),n.editable()).contains((function(e){return e.hasAttribute("contenteditable")}),!0))&&"false"==r.getAttribute("contenteditable")&&n.getSelection().fake(r));var r=e.getTarget().getDocument(),a=e.getTarget().getDocument().getDocumentElement(),s=(n=!r.equals(CKEDITOR.document),r=r.getWindow().getScrollPosition(),n?e.$.clientX:e.$.pageX||r.x+e.$.clientX),l=n?e.$.clientY:e.$.pageY||r.y+e.$.clientY;CKEDITOR.tools.setTimeout((function(){this.open(a,null,s,l)}),CKEDITOR.env.ie?200:0,this)}}),this),CKEDITOR.env.webkit){var r=function(){i=0};e.on("keydown",(function(e){i=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey})),e.on("keyup",r),e.on("contextmenu",r)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(e.on("keydown",(function(e){e.data.$.shiftKey&&121===e.data.$.keyCode&&(o=!0)}),null,null,0),e.on("keyup",n),e.on("contextmenu",n))},open:function(e,t,n,i){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,n,i))}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",(function(){t.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)})),e.addCommand("contextMenu",{exec:function(e){var t,n=0,i=0;(t=(t=(t=e.getSelection().getRanges())[t.length-1].getClientRects(e.editable().isInline()))[t.length-1])&&(n=t["rtl"===e.lang.dir?"left":"right"],i=t.bottom),e.contextMenu.open(e.document.getBody().getParent(),null,n,i)}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function e(e,t,n,i){var o=new CKEDITOR.dom.walker(e);if(!(e=e.startContainer.getAscendant(t,!0)||e.endContainer.getAscendant(t,!0))||(n(e),!i))for(;(e=o.next())&&(!(e=e.getAscendant(t,!0))||(n(e),!i)););}function t(e,t){var n={ul:"ol",ol:"ul"};return-1!==i(t,(function(t){return t.element===e||t.element===n[e]}))}function n(e){this.styles=null,this.sticky=!1,this.editor=e,this.filter=new CKEDITOR.filter(e,e.config.copyFormatting_allowRules),!0===e.config.copyFormatting_allowRules&&(this.filter.disabled=!0),e.config.copyFormatting_disallowRules&&this.filter.disallow(e.config.copyFormatting_disallowRules)}var i=CKEDITOR.tools.indexOf,o=CKEDITOR.tools.getMouseButton,r=!1;CKEDITOR.plugins.add("copyformatting",{lang:"az,de,en,it,ja,nb,nl,oc,pl,pt-br,ru,sv,tr,zh,zh-cn",icons:"copyformatting",hidpi:!0,init:function(e){var n=CKEDITOR.plugins.copyformatting;n._addScreenReaderContainer(),r||(CKEDITOR.document.appendStyleSheet(this.path+"styles/copyformatting.css"),r=!0),e.addContentsCss&&e.addContentsCss(this.path+"styles/copyformatting.css"),e.copyFormatting=new n.state(e),e.addCommand("copyFormatting",n.commands.copyFormatting),e.addCommand("applyFormatting",n.commands.applyFormatting),e.ui.addButton("CopyFormatting",{label:e.lang.copyformatting.label,command:"copyFormatting",toolbar:"cleanup,0"}),e.on("contentDom",(function(){var t=e.getCommand("copyFormatting"),n=e.editable(),i=n.isInline()?n:e.document,r=e.ui.get("CopyFormatting");n.attachListener(i,"mouseup",(function(n){o(n)===CKEDITOR.MOUSE_BUTTON_LEFT&&t.state===CKEDITOR.TRISTATE_ON&&e.execCommand("applyFormatting")})),n.attachListener(CKEDITOR.document,"mouseup",(function(i){o(i)!==CKEDITOR.MOUSE_BUTTON_LEFT||t.state!==CKEDITOR.TRISTATE_ON||n.contains(i.data.getTarget())||e.execCommand("copyFormatting")})),r&&(i=CKEDITOR.document.getById(r._.id),n.attachListener(i,"dblclick",(function(){e.execCommand("copyFormatting",{sticky:!0})})),n.attachListener(i,"mouseup",(function(e){e.data.stopPropagation()})))})),e.config.copyFormatting_keystrokeCopy&&e.setKeystroke(e.config.copyFormatting_keystrokeCopy,"copyFormatting"),e.on("key",(function(t){var n=e.getCommand("copyFormatting");(t=t.data.domEvent).getKeystroke&&27===t.getKeystroke()&&n.state===CKEDITOR.TRISTATE_ON&&e.execCommand("copyFormatting")})),e.copyFormatting.on("extractFormatting",(function(t){var i=t.data.element;return i.contains(e.editable())||i.equals(e.editable())?t.cancel():(i=n._convertElementToStyleDef(i),e.copyFormatting.filter.check(new CKEDITOR.style(i),!0,!0)?void(t.data.styleDef=i):t.cancel())})),e.copyFormatting.on("applyFormatting",(function(o){if(!o.data.preventFormatStripping){var r,a,s=o.data.range,l=n._extractStylesFromRange(e,s),u=n._determineContext(s);if(e.copyFormatting._isContextAllowed(u))for(a=0;a<l.length;a++)u=l[a],r=s.createBookmark(),-1===i(n.preservedElements,u.element)?CKEDITOR.env.webkit&&!CKEDITOR.env.chrome?l[a].removeFromRange(o.data.range,o.editor):l[a].remove(o.editor):t(u.element,o.data.styles)&&n._removeStylesFromElementInRange(s,u.element),s.moveToBookmark(r)}})),e.copyFormatting.on("applyFormatting",(function(t){var n=CKEDITOR.plugins.copyformatting,i=n._determineContext(t.data.range);"list"===i&&e.copyFormatting._isContextAllowed("list")?n._applyStylesToListContext(t.editor,t.data.range,t.data.styles):"table"===i&&e.copyFormatting._isContextAllowed("table")?n._applyStylesToTableContext(t.editor,t.data.range,t.data.styles):e.copyFormatting._isContextAllowed("text")&&n._applyStylesToTextContext(t.editor,t.data.range,t.data.styles)}),null,null,999)}}),n.prototype._isContextAllowed=function(e){var t=this.editor.config.copyFormatting_allowedContexts;return!0===t||-1!==i(t,e)},CKEDITOR.event.implementOn(n.prototype),CKEDITOR.plugins.copyformatting={state:n,inlineBoundary:"h1 h2 h3 h4 h5 h6 p div".split(" "),excludedAttributes:["id","style","href","data-cke-saved-href","dir"],elementsForInlineTransform:["li"],excludedElementsFromInlineTransform:["table","thead","tbody","ul","ol"],excludedAttributesFromInlineTransform:["value","type"],preservedElements:"ul ol li td th tr thead tbody table".split(" "),breakOnElements:["ul","ol","table"],_initialKeystrokePasteCommand:null,commands:{copyFormatting:{exec:function(e,t){var n=CKEDITOR.plugins.copyformatting,i=e.copyFormatting,o=!!t&&"keystrokeHandler"==t.from,r=!!t&&(t.sticky||o),a=n._getCursorContainer(e),s=CKEDITOR.document.getDocumentElement();if(this.state===CKEDITOR.TRISTATE_ON)return i.styles=null,i.sticky=!1,a.removeClass("cke_copyformatting_active"),s.removeClass("cke_copyformatting_disabled"),s.removeClass("cke_copyformatting_tableresize_cursor"),n._putScreenReaderMessage(e,"canceled"),n._detachPasteKeystrokeHandler(e),this.setState(CKEDITOR.TRISTATE_OFF);i.styles=n._extractStylesFromElement(e,e.elementPath().lastElement),this.setState(CKEDITOR.TRISTATE_ON),o||(a.addClass("cke_copyformatting_active"),s.addClass("cke_copyformatting_tableresize_cursor"),e.config.copyFormatting_outerCursor&&s.addClass("cke_copyformatting_disabled")),i.sticky=r,n._putScreenReaderMessage(e,"copied"),n._attachPasteKeystrokeHandler(e)}},applyFormatting:{editorFocus:!(CKEDITOR.env.ie&&!CKEDITOR.env.edge),exec:function(e,t){var n=e.getCommand("copyFormatting"),i=!!t&&"keystrokeHandler"==t.from,o=CKEDITOR.plugins.copyformatting,r=e.copyFormatting,a=o._getCursorContainer(e),s=CKEDITOR.document.getDocumentElement();if(i&&!r.styles)return o._putScreenReaderMessage(e,"failed"),o._detachPasteKeystrokeHandler(e),!1;i=o._applyFormat(e,r.styles),r.sticky||(r.styles=null,a.removeClass("cke_copyformatting_active"),s.removeClass("cke_copyformatting_disabled"),s.removeClass("cke_copyformatting_tableresize_cursor"),n.setState(CKEDITOR.TRISTATE_OFF),o._detachPasteKeystrokeHandler(e)),o._putScreenReaderMessage(e,i?"applied":"canceled")}}},_getCursorContainer:function(e){return e.elementMode===CKEDITOR.ELEMENT_MODE_INLINE?e.editable():e.editable().getParent()},_convertElementToStyleDef:function(e){var t=CKEDITOR.tools,n=e.getAttributes(CKEDITOR.plugins.copyformatting.excludedAttributes);return t=t.parseCssText(e.getAttribute("style"),!0,!0),{element:e.getName(),type:CKEDITOR.STYLE_INLINE,attributes:n,styles:t}},_extractStylesFromElement:function(e,t){var n={},o=[];do{if(t.type===CKEDITOR.NODE_ELEMENT&&!t.hasAttribute("data-cke-bookmark")&&(n.element=t,e.copyFormatting.fire("extractFormatting",n,e)&&n.styleDef&&o.push(new CKEDITOR.style(n.styleDef)),t.getName&&-1!==i(CKEDITOR.plugins.copyformatting.breakOnElements,t.getName())))break}while((t=t.getParent())&&t.type===CKEDITOR.NODE_ELEMENT);return o},_extractStylesFromRange:function(e,t){for(var n,i=[],o=new CKEDITOR.dom.walker(t);n=o.next();)i=i.concat(CKEDITOR.plugins.copyformatting._extractStylesFromElement(e,n));return i},_removeStylesFromElementInRange:function(e,t){for(var n,o=-1!==i(["ol","ul","table"],t),r=new CKEDITOR.dom.walker(e);(n=r.next())&&(!(n=n.getAscendant(t,!0))||(n.removeAttributes(n.getAttributes()),!o)););},_getSelectedWordOffset:function(e){function t(e,t){return e[t?"getPrevious":"getNext"]((function(e){return e.type!==CKEDITOR.NODE_COMMENT}))}function n(e){return e.type==CKEDITOR.NODE_ELEMENT?(e=e.getHtml().replace(/<span.*?>&nbsp;<\/span>/g,"")).replace(/<.*?>/g,""):e.getText()}function o(e,r){var a,s,l=e,u=/\s/g,c="p br ol ul li td th div caption body".split(" "),d=!1,f=!1;do{for(a=t(l,r);!a&&l.getParent();){if(l=l.getParent(),-1!==i(c,l.getName())){f=d=!0;break}a=t(l,r)}if(a&&a.getName&&-1!==i(c,a.getName())){d=!0;break}l=a}while(l&&l.getStyle&&("none"==l.getStyle("display")||!l.getText()));for(l||(l=e);l.type!==CKEDITOR.NODE_TEXT;)l=l.getChild(!d||r||f?0:l.getChildCount()-1);for(c=n(l);null!=(f=u.exec(c))&&(s=f.index,r););if("number"!=typeof s&&!d)return o(l,r);if(d)s=r?0:(f=(u=/([\.\b]*$)/).exec(c))?f.index:c.length;else if(r&&(s+=1)>c.length)return o(l);return{node:l,offset:s}}var r,a,s,l,u,c=/\b\w+\b/gi;for(r=n(s=l=u=e.startContainer);null!=(a=c.exec(r));)if(a.index+a[0].length>=e.startOffset)return e=a.index,c=a.index+a[0].length,0===a.index&&(l=(a=o(s,!0)).node,e=a.offset),c>=r.length&&(u=(r=o(s)).node,c=r.offset),{startNode:l,startOffset:e,endNode:u,endOffset:c};return null},_filterStyles:function(e){var t,n,i=CKEDITOR.tools.isEmpty,o=[];for(n=0;n<e.length;n++)t=e[n]._.definition,-1!==CKEDITOR.tools.indexOf(CKEDITOR.plugins.copyformatting.inlineBoundary,t.element)&&(t.element=e[n].element="span"),"span"===t.element&&i(t.attributes)&&i(t.styles)||o.push(e[n]);return o},_determineContext:function(e){function t(t){var n,i=new CKEDITOR.dom.walker(e);if(e.startContainer.getAscendant(t,!0)||e.endContainer.getAscendant(t,!0))return!0;for(;n=i.next();)if(n.getAscendant(t,!0))return!0}return t({ul:1,ol:1})?"list":t("table")?"table":"text"},_applyStylesToTextContext:function(e,t,n){var o,r,a=CKEDITOR.plugins.copyformatting,s=a.excludedAttributesFromInlineTransform;for(CKEDITOR.env.webkit&&!CKEDITOR.env.chrome&&e.getSelection().selectRanges([t]),o=0;o<n.length;o++)if(-1===i(a.excludedElementsFromInlineTransform,(t=n[o]).element)){if(-1!==i(a.elementsForInlineTransform,t.element))for(t.element=t._.definition.element="span",r=0;r<s.length;r++)t._.definition.attributes[s[r]]&&delete t._.definition.attributes[s[r]];t.apply(e)}},_applyStylesToListContext:function(t,n,i){var o,r,a;for(a=0;a<i.length;a++)o=i[a],r=n.createBookmark(),"ol"===o.element||"ul"===o.element?e(n,{ul:1,ol:1},(function(e){var t=o;e.getName()!==t.element&&e.renameNode(t.element),t.applyToObject(e)}),!0):"li"===o.element?e(n,"li",(function(e){o.applyToObject(e)})):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(t,n,[o]),n.moveToBookmark(r)},_applyStylesToTableContext:function(t,n,o){function r(e,t){e.getName()!==t.element&&((t=t.getDefinition()).element=e.getName(),t=new CKEDITOR.style(t)),t.applyToObject(e)}var a,s,l;for(l=0;l<o.length;l++)a=o[l],s=n.createBookmark(),-1!==i(["table","tr"],a.element)?e(n,a.element,(function(e){a.applyToObject(e)})):-1!==i(["td","th"],a.element)?e(n,{td:1,th:1},(function(e){r(e,a)})):-1!==i(["thead","tbody"],a.element)?e(n,{thead:1,tbody:1},(function(e){r(e,a)})):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(t,n,[a]),n.moveToBookmark(s)},_applyFormat:function(e,t){var n,i,o=e.getSelection().getRanges()[0],r=CKEDITOR.plugins.copyformatting;if(!o)return!1;if(o.collapsed){if(i=e.getSelection().createBookmarks(),!(n=r._getSelectedWordOffset(o)))return;(o=e.createRange()).setStart(n.startNode,n.startOffset),o.setEnd(n.endNode,n.endOffset),o.select()}return t=r._filterStyles(t),!!e.copyFormatting.fire("applyFormatting",{styles:t,range:o,preventFormatStripping:!1},e)&&(i&&e.getSelection().selectBookmarks(i),!0)},_putScreenReaderMessage:function(e,t){var n=this._getScreenReaderContainer();n&&n.setText(e.lang.copyformatting.notification[t])},_addScreenReaderContainer:function(){return this._getScreenReaderContainer()?this._getScreenReaderContainer():CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?void 0:CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml('<div class="cke_screen_reader_only cke_copyformatting_notification"><div aria-live="polite"></div></div>')).getChild(0)},_getScreenReaderContainer:function(){if(!CKEDITOR.env.ie6Compat&&!CKEDITOR.env.ie7Compat)return CKEDITOR.document.getBody().findOne(".cke_copyformatting_notification div[aria-live]")},_attachPasteKeystrokeHandler:function(e){var t=e.config.copyFormatting_keystrokePaste;t&&(this._initialKeystrokePasteCommand=e.keystrokeHandler.keystrokes[t],e.setKeystroke(t,"applyFormatting"))},_detachPasteKeystrokeHandler:function(e){var t=e.config.copyFormatting_keystrokePaste;t&&e.setKeystroke(t,this._initialKeystrokePasteCommand||!1)}},CKEDITOR.config.copyFormatting_outerCursor=!0,CKEDITOR.config.copyFormatting_allowRules="b s u i em strong span p div td th ol ul li(*)[*]{*}",CKEDITOR.config.copyFormatting_disallowRules="*[data-cke-widget*,data-widget*,data-cke-realelement](cke_widget*)",CKEDITOR.config.copyFormatting_allowedContexts=!0,CKEDITOR.config.copyFormatting_keystrokeCopy=CKEDITOR.CTRL+CKEDITOR.SHIFT+67,CKEDITOR.config.copyFormatting_keystrokePaste=CKEDITOR.CTRL+CKEDITOR.SHIFT+86}(),CKEDITOR.plugins.add("div",{requires:"dialog",init:function(e){if(!e.blockless){var t=e.lang.div,n="div(*)";CKEDITOR.dialog.isTabEnabled(e,"editdiv","advanced")&&(n+=";div[dir,id,lang,title]{*}"),e.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:n,requiredContent:"div",contextSensitive:!0,contentTransformations:[["div: alignmentToStyle"]],refresh:function(e,t){this.setState("div"in(e.config.div_wrapTable?t.root:t.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})),e.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"})),e.addCommand("removediv",{requiredContent:"div",exec:function(e){function t(t){(t=CKEDITOR.plugins.div.getSurroundDiv(e,t))&&!t.data("cke-div-added")&&(a.push(t),t.data("cke-div-added"))}for(var n,i=e.getSelection(),o=i&&i.getRanges(),r=i.createBookmarks(),a=[],s=0;s<o.length;s++)(n=o[s]).collapsed?t(i.getStartElement()):((n=new CKEDITOR.dom.walker(n)).evaluator=t,n.lastForward());for(s=0;s<a.length;s++)a[s].remove(!0);i.selectBookmarks(r)}}),e.ui.addButton&&e.ui.addButton("CreateDiv",{label:t.toolbar,command:"creatediv",toolbar:"blocks,50"}),e.addMenuItems&&(e.addMenuItems({editdiv:{label:t.edit,command:"editdiv",group:"div",order:1},removediv:{label:t.remove,command:"removediv",group:"div",order:5}}),e.contextMenu&&e.contextMenu.addListener((function(t){return!t||t.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(e)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}))),CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js"),CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}}),CKEDITOR.plugins.div={getSurroundDiv:function(e,t){var n=e.elementPath(t);return e.elementPath(n.blockLimit).contains((function(e){return e.is("div")&&!e.isReadOnly()}),1)}},CKEDITOR.plugins.add("resize",{init:function(e){function t(t){var n=s.width,o=s.height,l=n+(t.data.$.screenX-a.x)*("rtl"==r?-1:1);t=o+(t.data.$.screenY-a.y),u&&(n=Math.max(i.resize_minWidth,Math.min(l,i.resize_maxWidth))),c&&(o=Math.max(i.resize_minHeight,Math.min(t,i.resize_maxHeight))),e.resize(u?n:null,o)}function n(){CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n),e.document&&(e.document.removeListener("mousemove",t),e.document.removeListener("mouseup",n))}var i=e.config,o=e.ui.spaceId("resizer"),r=e.element?e.element.getDirection(1):"ltr";if(!i.resize_dir&&(i.resize_dir="vertical"),void 0===i.resize_maxWidth&&(i.resize_maxWidth=3e3),void 0===i.resize_maxHeight&&(i.resize_maxHeight=3e3),void 0===i.resize_minWidth&&(i.resize_minWidth=750),void 0===i.resize_minHeight&&(i.resize_minHeight=250),!1!==i.resize_enabled){var a,s,l=null,u=("both"==i.resize_dir||"horizontal"==i.resize_dir)&&i.resize_minWidth!=i.resize_maxWidth,c=("both"==i.resize_dir||"vertical"==i.resize_dir)&&i.resize_minHeight!=i.resize_maxHeight,d=CKEDITOR.tools.addFunction((function(o){l||(l=e.getResizable()),a={x:o.screenX,y:o.screenY},i.resize_minWidth>(s={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0}).width&&(i.resize_minWidth=s.width),i.resize_minHeight>s.height&&(i.resize_minHeight=s.height),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),e.document&&(e.document.on("mousemove",t),e.document.on("mouseup",n)),o.preventDefault&&o.preventDefault()}));e.on("destroy",(function(){CKEDITOR.tools.removeFunction(d)})),e.on("uiSpace",(function(t){if("bottom"==t.data.space){var n="";u&&!c&&(n=" cke_resizer_horizontal"),!u&&c&&(n=" cke_resizer_vertical");var i='<span id="'+o+'" class="cke_resizer'+n+" cke_resizer_"+r+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+d+', event)">'+("ltr"==r?"◢":"◣")+"</span>";"ltr"==r&&"ltr"==n?t.data.html+=i:t.data.html=i+t.data.html}}),e,null,100),e.on("maximize",(function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()}))}}}),function(){var e={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var n=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+t+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(t){t._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},t.on("uiSpace",(function(i){"bottom"==i.data.space&&function(t,i){function o(e){var n;(e=l.list[e]).equals(t.editable())||"true"==e.getAttribute("contenteditable")?((n=t.createRange()).selectNodeContents(e),n=n.select()):(n=t.getSelection()).selectElement(e),CKEDITOR.env.ie&&t.fire("selectionChange",{selection:n,path:new CKEDITOR.dom.elementPath(e)}),t.focus()}function r(){a&&a.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete l.list}var a,s=t.ui.spaceId("path"),l=t._.elementsPath,u=l.idBase;i.html+='<span id="'+s+'_label" class="cke_voice_label">'+t.lang.elementspath.eleLabel+'</span><span id="'+s+'" class="cke_path" role="group" aria-labelledby="'+s+'_label"><span class="cke_path_empty">&nbsp;</span></span>',t.on("uiReady",(function(){var e=t.ui.space("path");e&&t.focusManager.add(e,1)})),l.onClick=o;var c=CKEDITOR.tools.addFunction(o),d=CKEDITOR.tools.addFunction((function(e,n){var i,r=l.idBase;switch(n=new CKEDITOR.dom.event(n),i="rtl"==t.lang.dir,n.getKeystroke()){case i?39:37:case 9:return(i=CKEDITOR.document.getById(r+(e+1)))||(i=CKEDITOR.document.getById(r+"0")),i.focus(),!1;case i?37:39:case CKEDITOR.SHIFT+9:return(i=CKEDITOR.document.getById(r+(e-1)))||(i=CKEDITOR.document.getById(r+(l.list.length-1))),i.focus(),!1;case 27:return t.focus(),!1;case 13:case 32:return o(e),!1}return!0}));t.on("selectionChange",(function(e){for(var i=[],o=l.list=[],r=[],f=l.filters,h=!0,g=e.data.path.elements,p=g.length;p--;){var m=g[p],v=0;e=m.data("cke-display-name")?m.data("cke-display-name"):m.data("cke-real-element-type")?m.data("cke-real-element-type"):m.getName(),(h=m.hasAttribute("contenteditable")?"true"==m.getAttribute("contenteditable"):h)||m.hasAttribute("contenteditable")||(v=1);for(var y=0;y<f.length;y++){var b=f[y](m,e);if(!1===b){v=1;break}e=b||e}v||(o.unshift(m),r.unshift(e))}for(o=o.length,f=0;f<o;f++)h=t.lang.elementspath.eleTitle.replace(/%1/,e=r[f]),e=n.output({id:u+f,label:h,text:e,jsTitle:"javascript:void('"+e+"')",index:f,keyDownFn:d,clickFn:c}),i.unshift(e);a||(a=CKEDITOR.document.getById(s)),(r=a).setHtml(i.join("")+'<span class="cke_path_empty">&nbsp;</span>'),t.fire("elementsPathUpdate",{space:r})})),t.on("readOnly",r),t.on("contentDomUnload",r),t.addCommand("elementsPathFocus",e.toolbarFocus),t.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}(t,i.data)}))}})}(),function(){function e(e,t,n){if(n=e.config.forceEnterMode||n,"wysiwyg"==e.mode){t||(t=e.activeEnterMode);var r=e.elementPath();r&&!r.isContextFor("p")&&(t=CKEDITOR.ENTER_BR,n=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?i(e,t,null,n):o(e,t,null,n),e.fire("saveSnapshot")}}function t(e){for(var t=(e=e.getSelection().getRanges(!0)).length-1;0<t;t--)e[t].deleteContents();return e[0]}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var n,i,o,r,a=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,n,o,l){if(o=o||t(e)){var u,c=(o=function(e){var t=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")}),!0);return e.root.equals(t)?e:((t=new CKEDITOR.dom.range(t)).moveToRange(e),t)}(o)).document,d=o.checkStartOfBlock(),f=o.checkEndOfBlock(),h=e.elementPath(o.startContainer),g=h.block,p=n==CKEDITOR.ENTER_DIV?"div":"p";if(g&&d&&f){if((d=g.getParent()).is("li")&&1<d.getChildCount())return c=new CKEDITOR.dom.element("li"),u=e.createRange(),c.insertAfter(d),g.remove(),u.setStart(c,0),void e.getSelection().selectRanges([u]);if(g.is("li")||g.getParent().is("li")){g.is("li")||(d=(g=g.getParent()).getParent()),u=d.getParent(),o=!g.hasPrevious();var m=!g.hasNext(),v=(p=(l=e.getSelection()).createBookmarks(),g.getDirection(1)),y=(f=g.getAttribute("class"),g.getAttribute("style")),b=u.getDirection(1)!=v;if(e=e.enterMode!=CKEDITOR.ENTER_BR||b||y||f,u.is("li"))o||m?(o&&m&&d.remove(),g[m?"insertAfter":"insertBefore"](u)):g.breakParent(u);else{if(e)h.block.is("li")?(u=c.createElement(n==CKEDITOR.ENTER_P?"p":"div"),b&&u.setAttribute("dir",v),y&&u.setAttribute("style",y),f&&u.setAttribute("class",f),g.moveChildren(u)):u=h.block,o||m?u[o?"insertBefore":"insertAfter"](d):(g.breakParent(d),u.insertAfter(d));else if(g.appendBogus(!0),o||m)for(;c=g[o?"getFirst":"getLast"]();)c[o?"insertBefore":"insertAfter"](d);else for(g.breakParent(d);c=g.getLast();)c.insertAfter(d);g.remove()}return void l.selectBookmarks(p)}if(g&&g.getParent().is("blockquote"))return g.breakParent(g.getParent()),g.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||g.getPrevious().remove(),g.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||g.getNext().remove(),o.moveToElementEditStart(g),void o.select()}else if(g&&g.is("pre")&&!f)return void i(e,n,o,l);if(y=o.splitBlock(p)){if(e=y.previousBlock,d=y.wasStartOfBlock,f=y.wasEndOfBlock,(g=y.nextBlock)?(m=g.getParent()).is("li")&&(g.breakParent(m),g.move(g.getNext(),1)):e&&(m=e.getParent())&&m.is("li")&&(e.breakParent(m),m=e.getNext(),o.moveToElementEditStart(m),e.move(e.getPrevious())),d||f)if(function(e){var t;return e!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],h.lastElement.getName())&&1===h.lastElement.getChildCount()&&((t=(e=h.lastElement.getChild(0).clone(!0)).getBogus())&&t.remove(),!e.getText().length)}(n))o.moveToElementEditStart(o.getTouchedStartNode());else{if(e?(e.is("li")||!r.test(e.getName())&&!e.is("pre"))&&(u=e.clone()):g&&(u=g.clone()),u?l&&!u.is("li")&&u.renameNode(p):m&&m.is("li")?u=m:(u=c.createElement(p),e&&(v=e.getDirection())&&u.setAttribute("dir",v)),c=y.elementPath)for(n=0,l=c.elements.length;n<l&&!(p=c.elements[n]).equals(c.block)&&!p.equals(c.blockLimit);n++)CKEDITOR.dtd.$removeEmpty[p.getName()]&&(p=p.clone(),u.moveChildren(p),u.append(p));u.appendBogus(),u.getParent()||o.insertNode(u),u.is("li")&&u.removeAttribute("value"),!CKEDITOR.env.ie||!d||f&&e.getChildCount()||(o.moveToElementEditStart(f?e:u),o.select()),o.moveToElementEditStart(d&&!f?g:u)}else g.is("li")&&((u=o.clone()).selectNodeContents(g),(u=new CKEDITOR.dom.walker(u)).evaluator=function(e){return!(s(e)||a(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(m=u.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?c.createElement("br"):c.createText(" ")).insertBefore(m)),g&&o.moveToElementEditStart(g);o.select(),o.scrollIntoView()}}},enterBr:function(e,n,i,a){if(i=i||t(e)){var s=i.document,l=i.checkEndOfBlock(),u=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),c=u.block,d=c&&u.block.getName();a||"li"!=d?(!a&&l&&r.test(d)?(l=c.getDirection())?((s=s.createElement("div")).setAttribute("dir",l),s.insertAfter(c),i.setStart(s,0)):(s.createElement("br").insertAfter(c),CKEDITOR.env.gecko&&s.createText("").insertAfter(c),i.setStartAt(c.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e="pre"==d&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?s.createText("\r"):s.createElement("br"),i.deleteContents(),i.insertNode(e),CKEDITOR.env.needsBrFiller?(s.createText("\ufeff").insertAfter(e),l&&(c||u.blockLimit).appendBogus(),e.getNext().$.nodeValue="",i.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):i.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),i.collapse(!0),i.select(),i.scrollIntoView()):o(e,n,i,a)}}},n=CKEDITOR.plugins.enterkey,i=n.enterBr,o=n.enterBlock,r=/^h[1-6]$/}(),function(){function e(e,t){var n={},i=[],o={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(e=(e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,(function(e,r){var a=t?"&"+r+";":o[r];return n[a]=t?o[r]:"&"+r+";",i.push(a),""}))).replace(/,$/,""),!t&&e){e=e.split(",");var r,a=document.createElement("div");for(a.innerHTML="&"+e.join(";&")+";",r=a.innerHTML,a=null,a=0;a<r.length;a++){var s=r.charAt(a);n[s]="&"+e[a]+";",i.push(s)}}return n.regex=i.join(t?"|":""),n}CKEDITOR.plugins.add("entities",{afterInit:function(t){function n(e){return l[e]}function i(e){return"force"!=o.entities_processNumerical&&a[e]?a[e]:"&#"+e.charCodeAt(0)+";"}var o=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var r=[];!1!==o.basicEntities&&r.push("nbsp,gt,lt,amp"),o.entities&&(r.length&&r.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),o.entities_latin&&r.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),o.entities_greek&&r.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),o.entities_additional&&r.push(o.entities_additional));var a=e(r.join(",")),s=a.regex?"["+a.regex+"]":"a^";delete a.regex,o.entities&&o.entities_processNumerical&&(s="[^ -~]|"+s),s=new RegExp(s,"g");var l=e("nbsp,gt,lt,amp,shy",!0),u=new RegExp(l.regex,"g");t.addRules({text:function(e){return e.replace(u,n).replace(s,i)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,o){n=n||"70%","string"==typeof(t=t||"80%")&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),640>t&&(t=640),420>n&&(n=420);var r=parseInt((window.screen.height-n)/2,10),a=parseInt((window.screen.width-t)/2,10);o=(o||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+n+",top="+r+",left="+a;var s=window.open("",null,o,!0);if(!s)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(s.moveTo(a,r),s.resizeTo(t,n)),s.focus(),s.location.href=e}catch(i){window.open(e,null,o,!0)}return!0}}),function(){function e(e){this.editor=e,this.loaders=[]}function t(e,t,i){var o=e.config.fileTools_defaultFileName;this.editor=e,this.lang=e.lang,"string"==typeof t?(this.data=t,this.file=function(e){var t=e.match(n)[1];e=e.replace(n,""),e=atob(e);var i,o,r,a,s=[];for(i=0;i<e.length;i+=512){for(o=e.slice(i,i+512),r=Array(o.length),a=0;a<o.length;a++)r[a]=o.charCodeAt(a);o=new Uint8Array(r),s.push(o)}return new Blob(s,{type:t})}(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=t,this.total=this.file.size,this.loaded=0),i?this.fileName=i:this.file.name?this.fileName=this.file.name:(e=this.file.type.split("/"),o&&(e[0]=o),this.fileName=e.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}CKEDITOR.plugins.add("filetools",{beforeInit:function(t){t.uploadRepository=new e(t),t.on("fileUploadRequest",(function(e){var t=e.data.fileLoader;t.xhr.open("POST",t.uploadUrl,!0),e.data.requestData.upload={file:t.file,name:t.fileName}}),null,null,5),t.on("fileUploadRequest",(function(e){var n=e.data.fileLoader,i=new FormData;e=e.data.requestData;var o,r,a=t.config.fileTools_requestHeaders;for(r in e){var s=e[r];"object"==typeof s&&s.file?i.append(r,s.file,s.name):i.append(r,s)}if(i.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),a)for(o in a)n.xhr.setRequestHeader(o,a[o]);n.xhr.send(i)}),null,null,999),t.on("fileUploadResponse",(function(e){var t=e.data.fileLoader,n=t.xhr,o=e.data;try{var r=JSON.parse(n.responseText);if(r.error&&r.error.message&&(o.message=r.error.message),r.uploaded)for(var a in r)o[a]=r[a];else e.cancel()}catch(i){o.message=t.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:n.responseText}),e.cancel()}}),null,null,999)}}),e.prototype={create:function(e,n,i){var o=this.loaders.length;return(e=new(i=i||t)(this.editor,e,n)).id=o,this.loaders[o]=e,this.fire("instanceCreated",e),e},isFinished:function(){for(var e=0;e<this.loaders.length;++e)if(!this.loaders[e].isFinished())return!1;return!0}},t.prototype={loadAndUpload:function(e,t){var n=this;this.once("loaded",(function(i){i.cancel(),n.once("update",(function(e){e.cancel()}),null,null,0),n.upload(e,t)}),null,null,0),this.load()},load:function(){var e=this,t=this.reader=new FileReader;e.changeStatus("loading"),this.abort=function(){e.reader.abort()},t.onabort=function(){e.changeStatus("abort")},t.onerror=function(){e.message=e.lang.filetools.loadError,e.changeStatus("error")},t.onprogress=function(t){e.loaded=t.loaded,e.update()},t.onload=function(){e.loaded=e.total,e.data=t.result,e.changeStatus("loaded")},t.readAsDataURL(this.file)},upload:function(e,t){var n=t||{};e?(this.uploadUrl=e,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:n})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function e(){"error"!=n.status&&(n.message=n.lang.filetools.networkError,n.changeStatus("error"))}function t(){"abort"!=n.status&&n.changeStatus("abort")}var n=this,i=this.xhr;n.abort=function(){i.abort(),t()},i.onerror=e,i.onabort=t,i.upload?(i.upload.onprogress=function(e){e.lengthComputable&&(n.uploadTotal||(n.uploadTotal=e.total),n.uploaded=e.loaded,n.update())},i.upload.onerror=e,i.upload.onabort=t):(n.uploadTotal=n.total,n.update()),i.onload=function(){if(n.update(),"abort"!=n.status)if(n.uploaded=n.uploadTotal,200>i.status||299<i.status)n.message=n.lang.filetools["httpError"+i.status],n.message||(n.message=n.lang.filetools.httpError.replace("%1",i.status)),n.changeStatus("error");else{for(var e={fileLoader:n},t=["message","fileName","url"],o=n.editor.fire("fileUploadResponse",e),r=0;r<t.length;r++){var a=t[r];"string"==typeof e[a]&&(n[a]=e[a])}n.responseData=e,delete n.responseData.fileLoader,n.changeStatus(!1===o?"error":"uploaded")}}},changeStatus:function(e){this.status=e,"error"!=e&&"abort"!=e&&"loaded"!=e&&"uploaded"!=e||(this.abort=function(){}),this.fire(e),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(e.prototype),CKEDITOR.event.implementOn(t.prototype);var n=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:e,fileLoader:t,getUploadUrl:function(e,t){var n=CKEDITOR.tools.capitalize;return t&&e[t+"UploadUrl"]?e[t+"UploadUrl"]:e.uploadUrl?e.uploadUrl:t&&e["filebrowser"+n(t,1)+"UploadUrl"]?e["filebrowser"+n(t,1)+"UploadUrl"]+"&responseType=json":e.filebrowserUploadUrl?e.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(e,t){return!!e.type.match(t)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function e(e,t){var n=[];if(!t)return e;for(var i in t)n.push(i+"="+encodeURIComponent(t[i]));return e+(-1!=e.indexOf("?")?"&":"?")+n.join("&")}function t(t){return!t.match(/command=QuickUpload/)||t.match(/(\?|&)responseType=json/)?t:e(t,{responseType:"json"})}function n(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function i(){var t=(o=this.getDialog()).getParentEditor();t._.filebrowserSe=this;var i=t.config["filebrowser"+n(o.getName())+"WindowWidth"]||t.config.filebrowserWindowWidth||"80%",o=t.config["filebrowser"+n(o.getName())+"WindowHeight"]||t.config.filebrowserWindowHeight||"70%",r=this.filebrowser.params||{};r.CKEditor=t.name,r.CKEditorFuncNum=t._.filebrowserFn,r.langCode||(r.langCode=t.langCode),r=e(this.filebrowser.url,r),t.popup(r,i,o,t.config.filebrowserWindowFeatures||t.config.fileBrowserWindowFeatures)}function o(e){var t=new CKEDITOR.dom.element(e.$.form);t&&((e=t.$.elements.ckCsrfToken)?e=new CKEDITOR.dom.element(e):((e=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),t.append(e)),e.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function r(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!(!e.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!e.getContentElement(this.for[0],this.for[1]).getAction())}function a(t,n,i){var o=i.params||{};o.CKEditor=t.name,o.CKEditorFuncNum=t._.filebrowserFn,o.langCode||(o.langCode=t.langCode),n.action=e(i.url,o),n.filebrowser=i}function s(e,u,d,f){if(f&&f.length)for(var h,g=f.length;g--;)if("hbox"!=(h=f[g]).type&&"vbox"!=h.type&&"fieldset"!=h.type||s(e,u,d,h.children),h.filebrowser)if("string"==typeof h.filebrowser&&(h.filebrowser={action:"fileButton"==h.type?"QuickUpload":"Browse",target:h.filebrowser}),"Browse"==h.filebrowser.action){var p=h.filebrowser.url;void 0===p&&void 0===(p=e.config["filebrowser"+n(u)+"BrowseUrl"])&&(p=e.config.filebrowserBrowseUrl),p&&(h.onClick=i,h.filebrowser.url=p,h.hidden=!1)}else if("QuickUpload"==h.filebrowser.action&&h.for&&(void 0===(p=h.filebrowser.url)&&void 0===(p=e.config["filebrowser"+n(u)+"UploadUrl"])&&(p=e.config.filebrowserUploadUrl),p)){var m=h.onClick;h.onClick=function(n){var i=n.sender,a=i.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),s=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!m||!1!==m.call(i,n))&&!!r.call(i,n)&&("form"!==e.config.filebrowserUploadMethod&&s?((n=e.uploadRepository.create(a.$.files[0])).on("uploaded",(function(e){var t=e.sender.responseData;c.call(e.sender.editor,t.url,t.message)})),n.on("error",l.bind(this)),n.on("abort",l.bind(this)),n.loadAndUpload(t(p)),"xhr"):(o(a),!0))},h.filebrowser.url=p,h.hidden=!1,a(e,d.getContents(h.for[0]).get(h.for[1]),h.filebrowser)}}function l(e){var t={};try{t=JSON.parse(e.sender.xhr.response)||{}}catch(n){}this.enable(),alert(t.error?t.error.message:e.sender.message)}function u(e,t,n){if(-1!==n.indexOf(";")){n=n.split(";");for(var i=0;i<n.length;i++)if(u(e,t,n[i]))return!0;return!1}return(e=e.getContents(t).get(n).filebrowser)&&e.url}function c(e,t){var n=this._.filebrowserSe.getDialog(),i=this._.filebrowserSe.for,o=this._.filebrowserSe.filebrowser.onSelect;i&&n.getContentElement(i[0],i[1]).reset(),"function"==typeof t&&!1===t.call(this._.filebrowserSe)||o&&!1===o.call(this._.filebrowserSe,e,t)||("string"==typeof t&&t&&alert(t),e&&(n=(i=this._.filebrowserSe).getDialog(),i=i.filebrowser.target||null)&&(i=i.split(":"),(o=n.getContentElement(i[0],i[1]))&&(o.setValue(e),n.selectPage(i[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(c,e),e.on("destroy",(function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)}))}}),CKEDITOR.on("dialogDefinition",(function(e){if(e.editor.plugins.filebrowser)for(var t,n=e.data.definition,i=0;i<n.contents.length;++i)(t=n.contents[i])&&(s(e.editor,e.data.name,n,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!u(n,t.id,t.filebrowser)))}))}(),CKEDITOR.plugins.add("find",{requires:"dialog",init:function(e){var t=e.addCommand("find",new CKEDITOR.dialogCommand("find")),n=e.addCommand("replace",new CKEDITOR.dialogCommand("find",{tabId:"replace"}));t.canUndo=!1,t.readOnly=1,n.canUndo=!1,e.ui.addButton&&(e.ui.addButton("Find",{label:e.lang.find.find,command:"find",toolbar:"find,10"}),e.ui.addButton("Replace",{label:e.lang.find.replace,command:"replace",toolbar:"find,20"})),CKEDITOR.dialog.add("find",this.path+"dialogs/find.js")}}),CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function e(e,t){var n=i.exec(e),o=i.exec(t);if(n){if(!n[2]&&"px"==o[2])return o[1];if("px"==n[2]&&!o[2])return o[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,n=CKEDITOR.tools.cssLength,i=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,o={elements:{$:function(n){var i=n.attributes;if((i=(i=(i=i&&i["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(i)))&&i.children[0])&&n.attributes["data-cke-resizable"]){var o=new t(n).rules;n=i.attributes;var r=o.width;o=o.height,r&&(n.width=e(n.width,r)),o&&(n.height=e(n.height,o))}return i}}};CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(o,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(e,i,o,r){var a=(a=this.lang.fakeobjects)[o]||a.unknown;return i={class:i,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:a,title:a,align:e.getAttribute("align")||""},CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData),o&&(i["data-cke-real-element-type"]=o),r&&(i["data-cke-resizable"]=r,o=new t,r=e.getAttribute("width"),e=e.getAttribute("height"),r&&(o.rules.width=n(r)),e&&(o.rules.height=n(e)),o.populate(i)),this.document.createElement("img",{attributes:i})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,i,o,r){var a,s=(s=this.lang.fakeobjects)[o]||s.unknown;return a=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(a),a=a.getHtml(),i={class:i,"data-cke-realelement":encodeURIComponent(a),"data-cke-real-node-type":e.type,alt:s,title:s,align:e.attributes.align||""},CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData),o&&(i["data-cke-real-element-type"]=o),r&&(i["data-cke-resizable"]=r,r=e.attributes,e=new t,o=r.width,r=r.height,void 0!==o&&(e.rules.width=n(o)),void 0!==r&&(e.rules.height=n(r)),e.populate(i)),new CKEDITOR.htmlParser.element("img",i)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var n=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var i=t.getStyle("width");t=t.getStyle("height"),i&&n.setAttribute("width",e(n.getAttribute("width"),i)),t&&n.setAttribute("height",e(n.getAttribute("height"),t))}return n}}(),function(){function e(e){return"application/x-shockwave-flash"==(e=e.attributes).type||n.test(e.src||"")}function t(e,t){return e.createFakeParserElement(t,"cke_flash","flash",!0)}var n=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(e){var t="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(e,"flash","properties")&&(t+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]"),CKEDITOR.dialog.isTabEnabled(e,"flash","advanced")&&(t+=";object[id]{*}; embed[bgcolor]{*}(*)"),e.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:t,requiredContent:"embed"})),e.ui.addButton&&e.ui.addButton("Flash",{label:e.lang.common.flash,command:"flash",toolbar:"insert,20"}),CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js"),e.addMenuItems&&e.addMenuItems({flash:{label:e.lang.flash.properties,command:"flash",group:"flash"}}),e.on("doubleclick",(function(e){var t=e.data.element;t.is("img")&&"flash"==t.data("cke-real-element-type")&&(e.data.dialog="flash")})),e.contextMenu&&e.contextMenu.addListener((function(e){if(e&&e.is("img")&&!e.isReadOnly()&&"flash"==e.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}}))},afterInit:function(n){var i=n.dataProcessor;(i=i&&i.dataFilter)&&i.addRules({elements:{"cke:object":function(i){var o=i.attributes;if(!(o.classid&&String(o.classid).toLowerCase()||e(i))){for(o=0;o<i.children.length;o++)if("cke:embed"==i.children[o].name){if(!e(i.children[o]))break;return t(n,i)}return null}return t(n,i)},"cke:embed":function(i){return e(i)?t(n,i):null}}},5)}})}(),CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){var e=CKEDITOR.document.getWindow(),t=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(n){n.on("loaded",(function(){!function(n){var i=n.config,o=n.fire("uiSpace",{space:"top",html:""}).html,r=function(){function o(e,n,i){s.setStyle(n,t(i)),s.setStyle("position",e)}function a(e){var t=u.getDocumentPosition();switch(e){case"top":o("absolute","top",t.y-h-m);break;case"pin":o("fixed","top",y);break;case"bottom":o("absolute","top",t.y+(d.height||d.bottom-d.top)+m)}l=e}var l,u,c,d,f,h,g,p=i.floatSpaceDockedOffsetX||0,m=i.floatSpaceDockedOffsetY||0,v=i.floatSpacePinnedOffsetX||0,y=i.floatSpacePinnedOffsetY||0;return function(o){if(u=n.editable()){var y=o&&"focus"==o.name;y&&s.show(),n.fire("floatingSpaceLayout",{show:y}),s.removeStyle("left"),s.removeStyle("right"),c=s.getClientRect(),d=u.getClientRect(),f=e.getViewPaneSize(),h=c.height,g="pageXOffset"in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,l?(a(h+m<=d.top?"top":h+m>f.height-d.bottom?"pin":"bottom"),o=f.width/2,o=i.floatSpacePreferRight?"right":0<d.left&&d.right<f.width&&d.width>c.width?"rtl"==i.contentsLangDirection?"right":"left":o-d.left>d.right-o?"left":"right",c.width>f.width?(o="left",y=0):(y="left"==o?0<d.left?d.left:0:d.right<f.width?f.width-d.right:0)+c.width>f.width&&(o="left"==o?"right":"left",y=0),s.setStyle(o,t(("pin"==l?v:p)+y+("pin"==l?0:"left"==o?g:-g)))):(l="pin",a("pin"),r(o))}}}();if(o){var a=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(n.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(n.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),s=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(a.output({content:o,id:n.id,langDir:n.lang.dir,langCode:n.langCode,name:n.name,style:"display:none;z-index:"+(i.baseFloatZIndex-1),topId:n.ui.spaceId("top"),voiceLabel:n.title}))),l=CKEDITOR.tools.eventsBuffer(500,r),u=CKEDITOR.tools.eventsBuffer(100,r);s.unselectable(),s.on("mousedown",(function(e){(e=e.data).getTarget().hasAscendant("a",1)||e.preventDefault()})),n.on("focus",(function(t){r(t),n.on("change",l.input),e.on("scroll",u.input),e.on("resize",u.input)})),n.on("blur",(function(){s.hide(),n.removeListener("change",l.input),e.removeListener("scroll",u.input),e.removeListener("resize",u.input)})),n.on("destroy",(function(){e.removeListener("scroll",u.input),e.removeListener("resize",u.input),s.clearCustomData(),s.remove()})),n.focusManager.hasFocus&&s.show(),n.focusManager.add(s,1)}}(this)}),null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  onclick="{onclick}CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),i=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var n=(t=t||{}).attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),(n=this.keys)[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction((function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)}),this)),this._.click}},proto:{add:function(e,n,o){var r=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=r,e={id:r,val:CKEDITOR.tools.htmlEncodeAttr(e).replace(i,"\\'"),onclick:CKEDITOR.env.ie?'return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&':"",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(o||e),text:n||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,n=this._.groups,i=this.element.getDocument();for(e in t)i.getById(t[e]).setStyle("display","");for(var o in n)e=(t=i.getById(n[o])).getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll(),e=this._.items[e];var t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},markFirstDisplayed:function(){var e=this;this._.markFirstDisplayed((function(){e.multiSelect||e.unmarkAll()}))},unmark:function(e){var t=this.element.getDocument(),n=t.getById(e=this._.items[e]);n.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var e,t=this._.items,n=this.element.getDocument();for(e in t){var i=t[e];n.getById(i).removeClass("cke_selected"),n.getById(i+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,n=this.element.getElementsByTag("a"),i=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=n.getItem(++i);)if(e.equals(t)){this._.focusIndex=i;break}}else this.element.focus();t&&setTimeout((function(){t.focus()}),0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"',t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"'),CKEDITOR.env.ie&&(t='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&'),e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+t+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var n=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{},listeners:[]}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,t){function i(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var o=CKEDITOR.env,r="cke_"+this.id,a=CKEDITOR.tools.addFunction((function(t){d&&(e.unlockSelection(1),d=0),l.execute(t)}),this),s=this,l={id:r,combo:this,focus:function(){CKEDITOR.document.getById(r).getChild(1).focus()},execute:function(t){var n=s._;if(n.state!=CKEDITOR.TRISTATE_DISABLED)if(s.createPanel(e),n.on)n.panel.hide();else{s.commit();var i=s.getValue();i?n.list.mark(i):n.list.unmarkAll(),n.panel.showBlock(s.id,new CKEDITOR.dom.element(t),4)}},clickFn:a};this._.listeners.push(e.on("activeFilterChange",i,this)),this._.listeners.push(e.on("mode",i,this)),this._.listeners.push(e.on("selectionChange",i,this)),!this.readOnly&&this._.listeners.push(e.on("readOnly",i,this));var u=CKEDITOR.tools.addFunction((function(e,t){var n=(e=new CKEDITOR.dom.event(e)).getKeystroke();switch(n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(a,t);break;default:l.onkey(l,n)}e.preventDefault()})),c=CKEDITOR.tools.addFunction((function(){l.onfocus&&l.onfocus()})),d=0;return l.keyDownFn=u,o={id:r,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:o.gecko&&!o.hc?"":(this.title||"").replace("'",""),keydownFn:u,focusFn:c,clickFn:a},n.output(o,t),this.onRender&&this.onRender(),l},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition.block,n=(r=this._.panelDefinition).parent||CKEDITOR.document.getBody(),i="cke_combopanel__"+this.name,o=new CKEDITOR.ui.floatPanel(e,n,r),r=o.addListBlock(this.id,t),a=this;o.onShow=function(){this.element.addClass(i),a.setState(CKEDITOR.TRISTATE_ON),a._.on=1,a.editorFocus&&!e.focusManager.hasFocus&&e.focus(),a.onOpen&&a.onOpen()},o.onHide=function(t){this.element.removeClass(i),a.setState(a.modes&&a.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),a._.on=0,!t&&a.onClose&&a.onClose()},o.onEscape=function(){o.hide(1)},r.onClick=function(e,t){a.onClick&&a.onClick.call(a,e,t),o.hide()},this._.panel=o,this._.list=r,o.getBlock(this.id).onHide=function(){a._.on=0,a.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById("cke_"+this.id+"_text");n&&(e||t?n.removeClass("cke_combo_inlinelabel"):(t=this.label,n.addClass("cke_combo_inlinelabel")),n.setText(void 0!==t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e,this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,(function(e){e.removeListener()})),this._.listeners=[]}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),function(){function e(e,t,n,i,o,r,a,s){var l=e.config,u=new CKEDITOR.style(a),c=o.split(";");o=[];for(var d={},f=0;f<c.length;f++)if(h=c[f]){var h=h.split("/"),g={},p=c[f]=h[0];g[n]=o[f]=h[1]||p,d[p]=new CKEDITOR.style(a,g),d[p]._.definition.name=p}else c.splice(f--,1);e.ui.addRichCombo(t,{label:i.label,title:i.panelTitle,toolbar:"styles,"+s,defaultValue:"cke-default",allowedContent:u,requiredContent:u,contentTransformations:"span"===a.element?[[{element:"font",check:"span",left:function(e){return!!e.attributes.size||!!e.attributes.align||!!e.attributes.face},right:function(e){var t=" x-small small medium large x-large xx-large 48px".split(" ");e.name="span",e.attributes.size&&(e.styles["font-size"]=t[e.attributes.size],delete e.attributes.size),e.attributes.align&&(e.styles["text-align"]=e.attributes.align,delete e.attributes.align),e.attributes.face&&(e.styles["font-family"]=e.attributes.face,delete e.attributes.face)}}]]:null,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!1,attributes:{"aria-label":i.panelTitle}},init:function(){var t;t="("+e.lang.common.optionDefault+")",this.startGroup(i.panelTitle),this.add(this.defaultValue,t,t);for(var n=0;n<c.length;n++)this.add(t=c[n],d[t].buildPreview(),t)},onClick:function(t){e.focus(),e.fire("saveSnapshot");var n,i,o,r,a,s=this.getValue(),l=d[t];if(s&&t!=s)if(n=d[s],(s=e.getSelection().getRanges()[0]).collapsed){if(o=(i=e.elementPath()).contains((function(e){return n.checkElementRemovable(e)}))){if(r=s.checkBoundaryOfElement(o,CKEDITOR.START),a=s.checkBoundaryOfElement(o,CKEDITOR.END),r&&a){for(r=s.createBookmark();i=o.getFirst();)i.insertBefore(o);o.remove(),s.moveToBookmark(r)}else r||a?s.moveToPosition(o,r?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_END):(s.splitElement(o),s.moveToPosition(o,CKEDITOR.POSITION_AFTER_END)),function e(t,n,i){var o=n.pop();if(o){if(i)return e(t,n,o.equals(i)?null:i);i=o.clone(),t.insertNode(i),t.moveToPosition(i,CKEDITOR.POSITION_AFTER_START),e(t,n)}}(s,i.elements.slice(),o);e.getSelection().selectRanges([s])}}else e.removeStyle(n);t===this.defaultValue?n&&e.removeStyle(n):e.applyStyle(l),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",(function(t){var n=this.getValue();t=t.data.path.elements;for(var i,o=0;o<t.length;o++)for(var a in i=t[o],d)if(d[a].checkElementMatch(i,!0,e))return void(a!=n&&this.setValue(a));this.setValue("",r)}),this)},refresh:function(){e.activeFilter.check(u)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(t){var n=t.config;e(t,"Font","family",t.lang.font,n.font_names,n.font_defaultLabel,n.font_style,30),e(t,"FontSize","size",t.lang.font.fontSize,n.fontSize_sizes,n.fontSize_defaultLabel,n.fontSize_style,40)}})}(),CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n"),CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(e){var t=e.lang,n=0,i={email:1,password:1,search:1,tel:1,text:1,url:1},o={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},r={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},a=function(i,a,s){var l={allowedContent:o[a],requiredContent:r[a]};"form"==a&&(l.context="form"),e.addCommand(a,new CKEDITOR.dialogCommand(a,l)),e.ui.addButton&&e.ui.addButton(i,{label:t.common[i.charAt(0).toLowerCase()+i.slice(1)],command:a,toolbar:"forms,"+(n+=10)}),CKEDITOR.dialog.add(a,s)},s=this.path+"dialogs/";!e.blockless&&a("Form","form",s+"form.js"),a("Checkbox","checkbox",s+"checkbox.js"),a("Radio","radio",s+"radio.js"),a("TextField","textfield",s+"textfield.js"),a("Textarea","textarea",s+"textarea.js"),a("Select","select",s+"select.js"),a("Button","button",s+"button.js");var l=e.plugins.image;l&&!e.plugins.image2&&a("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js"),a("HiddenField","hiddenfield",s+"hiddenfield.js"),e.addMenuItems&&(a={checkbox:{label:t.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:t.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:t.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:t.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:t.forms.button.title,command:"button",group:"button"},select:{label:t.forms.select.title,command:"select",group:"select"},textarea:{label:t.forms.textarea.title,command:"textarea",group:"textarea"}},l&&(a.imagebutton={label:t.image.titleButton,command:"imagebutton",group:"imagebutton"}),!e.blockless&&(a.form={label:t.forms.form.menu,command:"form",group:"form"}),e.addMenuItems(a)),e.contextMenu&&(!e.blockless&&e.contextMenu.addListener((function(e,t,n){if((e=n.contains("form",1))&&!e.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}})),e.contextMenu.addListener((function(e){if(e&&!e.isReadOnly()){var t=e.getName();if("select"==t)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==t)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==t){var n=e.getAttribute("type")||"text";switch(n){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return l?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(i[n])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==t&&"hiddenfield"==e.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}))),e.on("doubleclick",(function(t){var n=t.data.element;if(!e.blockless&&n.is("form"))t.data.dialog="form";else if(n.is("select"))t.data.dialog="select";else if(n.is("textarea"))t.data.dialog="textarea";else if(n.is("img")&&"hiddenfield"==n.data("cke-real-element-type"))t.data.dialog="hiddenfield";else if(n.is("input")){switch(n=n.getAttribute("type")||"text"){case"button":case"submit":case"reset":t.data.dialog="button";break;case"checkbox":t.data.dialog="checkbox";break;case"radio":t.data.dialog="radio";break;case"image":t.data.dialog="imagebutton"}i[n]&&(t.data.dialog="textfield")}}))},afterInit:function(e){var t=(n=e.dataProcessor)&&n.htmlFilter,n=n&&n.dataFilter;CKEDITOR.env.ie&&t&&t.addRules({elements:{input:function(e){var t=(e=e.attributes).type;t||(e.type="text"),"checkbox"!=t&&"radio"!=t||"on"!=e.value||delete e.value}}},{applyToAll:!0}),n&&n.addRules({elements:{input:function(t){if("hidden"==t.attributes.type)return e.createFakeParserElement(t,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}}),CKEDITOR.plugins.forms={_setupRequiredAttribute:function(e){this.setValue(e.hasAttribute("required"))}},CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,n=e.lang.format,i=t.format_tags.split(";"),o={},r=0,a=[],s=0;s<i.length;s++){var l=i[s],u=new CKEDITOR.style(t["format_"+l]);e.filter.customConfig&&!e.filter.check(u)||(r++,o[l]=u,o[l]._.enterMode=e.config.enterMode,a.push(u))}0!==r&&e.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:a,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){for(var e in this.startGroup(n.panelTitle),o){var t=n["tag_"+e];this.add(e,o[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=o[t];var n=e.elementPath();t.checkActive(n,e)||e.applyStyle(t),setTimeout((function(){e.fire("saveSnapshot")}),0)},onRender:function(){e.on("selectionChange",(function(t){var n=this.getValue();for(var i in t=t.data.path,this.refresh(),o)if(o[i].checkActive(t,e))return void(i!=n&&this.setValue(i,e.lang.format["tag_"+i]));this.setValue("")}),this)},onOpen:function(){for(var t in this.showAll(),o)e.activeFilter.check(o[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var n in o)if(e.activeFilter.check(o[n]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"\t",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,t=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var n=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation+=this.indentationChars)),n&&n.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t),this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&"))),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("\x3c!--",e,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(e,t){var n=this._.rules[e];n?CKEDITOR.tools.extend(n,t,!0):this._.rules[e]=t}}}),CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(e){var t=e.lang.iframe,n="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";e.plugins.dialogadvtab&&(n+=";iframe"+e.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1})),CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js"),e.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:n,requiredContent:"iframe"})),e.ui.addButton&&e.ui.addButton("Iframe",{label:t.toolbar,command:"iframe",toolbar:"insert,80"}),e.on("doubleclick",(function(e){var t=e.data.element;t.is("img")&&"iframe"==t.data("cke-real-element-type")&&(e.data.dialog="iframe")})),e.addMenuItems&&e.addMenuItems({iframe:{label:t.title,command:"iframe",group:"image"}}),e.contextMenu&&e.contextMenu.addListener((function(e){if(e&&e.is("img")&&"iframe"==e.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}}))},afterInit:function(e){var t=e.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{iframe:function(t){return e.createFakeParserElement(t,"cke_iframe","iframe",!0)}}})}}),function(){function e(e){function t(e){var t=!1;s.attachListener(s,"keydown",(function(){var n=o.getBody().getElementsByTag(e);if(!t){for(var i=0;i<n.count();i++)n.getItem(i).setCustomData("retain",!0);t=!0}}),null,null,1),s.attachListener(s,"keyup",(function(){var n=o.getElementsByTag(e);t&&(1==n.count()&&!n.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(n.getItem(0).getAttributes())&&n.getItem(0).remove(1),t=!1)}))}var n=this.editor;if(n&&!n.isDetached()){var o=e.document,r=o.body,a=o.getElementById("cke_actscrpt");a&&a.parentNode.removeChild(a),(a=o.getElementById("cke_shimscrpt"))&&a.parentNode.removeChild(a),(a=o.getElementById("cke_basetagscrpt"))&&a.parentNode.removeChild(a),r.contentEditable=!0,CKEDITOR.env.ie&&(r.hideFocus=!0,r.disabled=!0,r.removeAttribute("disabled")),delete this._.isLoadingData,this.$=r,o=new CKEDITOR.dom.document(o),this.setup(),this.fixInitialSelection();var s=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&o.getDocumentElement().addClass(o.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&n.enterMode!=CKEDITOR.ENTER_P?t("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&n.enterMode!=CKEDITOR.ENTER_DIV&&t("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&o.getDocumentElement().on("mousedown",(function(e){e.data.getTarget().is("html")&&setTimeout((function(){n.editable().focus()}))})),function(e){function t(e){e.returnValue=!1}if(CKEDITOR.env.gecko)try{var n=e.document.$;n.execCommand("enableObjectResizing",!1,!e.config.disableObjectResizing),n.execCommand("enableInlineTableEditing",!1,!e.config.disableNativeTableHandles)}catch(r){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&e.config.disableObjectResizing&&function(){var n;e.editable().attachListener(e,"selectionChange",(function(){var i=e.getSelection().getSelectedElement();i&&(n&&(n.detachEvent("onresizestart",t),n=null),i.$.attachEvent("onresizestart",t),n=i.$)}))}()}(n);try{n.document.$.execCommand("2D-position",!1,!0)}catch(i){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==n.document.$.compatMode)&&this.attachListener(this,"keydown",(function(e){var t=e.data.getKeystroke();if(33==t||34==t)if(CKEDITOR.env.ie)setTimeout((function(){n.getSelection().scrollIntoView()}),0);else if(n.window.$.innerHeight>this.$.offsetHeight){var i=n.createRange();i[33==t?"moveToElementEditStart":"moveToElementEditEnd"](this),i.select(),e.data.preventDefault()}})),CKEDITOR.env.ie&&this.attachListener(o,"blur",(function(){try{o.$.selection.empty()}catch(e){}})),CKEDITOR.env.iOS&&this.attachListener(o,"touchend",(function(){e.focus()})),(r=n.document.getElementsByTag("title").getItem(0)).data("cke-title",r.getText()),CKEDITOR.env.ie&&(n.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout((function(){"unloaded"==this.status&&(this.status="ready"),n.fire("contentDom"),this._.isPendingFocus&&(n.focus(),this._.isPendingFocus=!1),setTimeout((function(){n.fire("dataReady")}),0)}),0,this)}}var t;CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",(function(n){function i(i){i&&i.removeListener(),e.isDestroyed()||e.isDetached()||(e.editable(new t(e,r.$.contentWindow.document.body)),e.setData(e.getData(1),n))}var o="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",r=(o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(o)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+o+'" frameBorder="0"></iframe>'));r.setStyles({width:"100%",height:"100%"}),r.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(o=e.ui.space("contents")).append(r);var a=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;a&&r.on("load",i);var s=e.title,l=e.fire("ariaEditorHelpLabel",{}).label;if(s&&(CKEDITOR.env.ie&&l&&(s+=", "+l),r.setAttribute("title",s)),l){s=CKEDITOR.tools.getNextId();var u=CKEDITOR.dom.element.createFromHtml('<span id="'+s+'" class="cke_voice_label">'+l+"</span>");o.append(u,1),r.setAttribute("aria-describedby",s)}e.on("beforeModeUnload",(function(e){e.removeListener(),u&&u.remove()})),r.setAttributes({tabIndex:e.tabIndex,allowTransparency:"true"}),!a&&i(),e.fire("ariaWidget",r)}))}}),CKEDITOR.editor.prototype.addContentsCss=function(e){var t=this.config,n=t.contentsCss;CKEDITOR.tools.isArray(n)||(t.contentsCss=n?[n]:[]),t.contentsCss.push(e)},t=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction((function(t){CKEDITOR.tools.setTimeout(e,0,this,t)}),this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,n){var i=this.editor;if(n)this.setHtml(e),this.fixInitialSelection(),i.fire("dataReady");else{this._.isLoadingData=!0,i._.dataStore={id:1};var o=i.config,r=o.fullPage,a=o.docType,s=CKEDITOR.tools.buildStyleHtml(function(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t,n=[];for(t in CKEDITOR.dtd.$removeEmpty)n.push("html.CSS1Compat "+t+"[contenteditable=false]");e.push(n.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');r||(s+=CKEDITOR.tools.buildStyleHtml(i.config.contentsCss));var l=o.baseHref?'<base href="'+o.baseHref+'" data-cke-temp="1" />':"";r&&(e=e.replace(/<!DOCTYPE[^>]*>/i,(function(e){return i.docType=a=e,""})).replace(/<\?xml\s[^\?]*\?>/i,(function(e){return i.xmlDeclaration=e,""}))),e=i.dataProcessor.toHtml(e),r?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(e=e.replace(/<head[^>]*?>/,"$&"+l)),e=e.replace(/<\/head\s*>/,s+"$&"),e=a+e):e=o.docType+'<html dir="'+o.contentsLangDirection+'" lang="'+(o.contentsLanguage||i.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+s+"</head><body"+(o.bodyId?' id="'+o.bodyId+'"':"")+(o.bodyClass?' class="'+o.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(e=e.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),o='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(o+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),l&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(o+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,o),this.clearCustomData(),this.clearListeners(),i.fire("contentDomUnload");var u=this.getDocument();try{u.write(e)}catch(t){setTimeout((function(){u.write(e)}),0)}}},getData:function(e){if(e)return this.getHtml();var t=(e=this.editor).config,n=(r=t.fullPage)&&e.docType,i=r&&e.xmlDeclaration,o=this.getDocument(),r=r?o.getDocumentElement().getOuterHtml():o.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(r=r.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),r=e.dataProcessor.toDataFormat(r),i&&(r=i+"\n"+r),n&&(r=n+"\n"+r),r},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:t.baseProto.focus.call(this)},detach:function(){var e=(n=this.editor).document,n=n.container.findOne("iframe.cke_wysiwyg_frame");t.baseProto.detach.call(this),this.clearCustomData(this._.expandoNumber),e.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),n&&(n.clearCustomData(),(e=n.removeCustomData("onResize"))&&e.removeListener(),n.isDetached()||n.remove())}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,function(){function e(e,t){if(t||(t=e.getSelection().getSelectedElement()),t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly())return t}function t(e){var t=e.getStyle("float");return"inherit"!=t&&"none"!=t||(t=0),t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var n="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(n="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:n,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",(function(e){var t=e.data.element;!t.is("img")||t.data("cke-realelement")||t.isReadOnly()||(e.data.dialog="image")})),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener((function(n){if(e(t,n))return{image:CKEDITOR.TRISTATE_OFF}}))}},afterInit:function(n){function i(i){var o=n.getCommand("justify"+i);o&&("left"!=i&&"right"!=i||o.on("exec",(function(o){var r=e(n);r&&(t(r)==i?(r.removeStyle("float"),i==t(r)&&r.removeAttribute("align")):r.setStyle("float",i),o.cancel())})),o.on("refresh",(function(o){var r=e(n);r&&(r=t(r),this.setState(r==i?CKEDITOR.TRISTATE_ON:"right"==i||"left"==i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.cancel())})))}n.plugins.image2||(i("left"),i("right"),i("center"),i("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(e,i){var o,r;i.on("refresh",(function(e){var i,o=[t];for(i in e.data.states)o.push(e.data.states[i]);this.setState(CKEDITOR.tools.search(o,n)?n:t)}),i,null,100),i.on("exec",(function(t){o=e.getSelection(),r=o.createBookmarks(1),t.data||(t.data={}),t.data.done=!1}),i,null,0),i.on("exec",(function(){e.forceNextSelectionCheck(),o.selectBookmarks(r)}),i,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var n=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new n(!0))),e(t,t.addCommand("outdent",new n)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",(function(e){var n=t.createRange(),i=e.data.node;n.setStartBefore(i),n.setEndAfter(i);for(var o,r=new CKEDITOR.dom.walker(n);o=r.next();)if(o.type==CKEDITOR.NODE_ELEMENT)if(!o.equals(i)&&o.getDirection())n.setStartAfter(o),r=new CKEDITOR.dom.walker(n);else{var a=t.config.indentClasses;if(a)for(var s="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],l=0;l<a.length;l++)o.hasClass(a[l]+s[0])&&(o.removeClass(a[l]+s[0]),o.addClass(a[l]+s[1]));a=o.getStyle("margin-right"),s=o.getStyle("margin-left"),a?o.setStyle("margin-left",a):o.removeStyle("margin-left"),s?o.setStyle("margin-right",s):o.removeStyle("margin-right")}}))}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",(function(){for(var e in t)!function(e,t){var n,i=e.getCommand(t.relatedGlobal);for(n in t.jobs)i.on("exec",(function(i){i.data.done||(e.fire("lockSnapshot"),t.execJob(e,n)&&(i.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))}),this,null,n),i.on("refresh",(function(i){i.data.states||(i.data.states={}),i.data.states[t.name+"@"+n]=t.refreshJob(e,n,i.data.path)}),this,null,n);e.addFeature(t)}(this,t[e])}))}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,n){var i=this.jobs[n];if(i.state!=t)return i.exec.call(this,e)},refreshJob:function(e,n,i){return(n=this.jobs[n]).state=e.activeFilter.checkFeature(this)?n.refresh.call(this,e,i):t,n.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e,n,i){if(!e.getCustomData("indent_processed")){var o=this.editor,r=this.isIndent;if(n){if(i=0,(o=e.$.className.match(this.classNameRegex))&&(o=o[1],i=CKEDITOR.tools.indexOf(n,o)+1),0>(i+=r?1:-1))return;i=Math.min(i,n.length),i=Math.max(i,0),e.$.className=CKEDITOR.tools.ltrim(e.$.className.replace(this.classNameRegex,"")),0<i&&e.addClass(n[i-1])}else{n=t(e,i),i=parseInt(e.getStyle(n),10);var a=o.config.indentOffset||40;if(isNaN(i)&&(i=0),0>(i+=(r?1:-1)*a))return;i=Math.max(i,0),i=Math.ceil(i/a)*a,e.setStyle(n,i?i+(o.config.indentUnit||"px"):""),""===e.getAttribute("style")&&e.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,e,"indent_processed",1)}}function t(e,t){return"ltr"==(t||e.getComputedStyle("direction"))?"margin-left":"margin-right"}var n=CKEDITOR.dtd.$listItem,i=CKEDITOR.dtd.$list,o=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(a){function s(){l.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:u?null:"margin-left,margin-right",classes:u||null}},this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]],this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(u?"("+u.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(e,i){if(!(a=i.block||i.blockLimit).is(n))var a=(s=a.getAscendant(n))&&i.contains(s)||a;if(a.is(n)&&(a=a.getParent()),this.enterBr||this.getContext(i)){if(u){var s=u,l=(a=a.$.className.match(this.classNameRegex),this.isIndent);return(s=a?!l||a[1]!=s.slice(-1):l)?r:o}return this.isIndent?r:a?CKEDITOR[0>=(parseInt(a.getStyle(t(a)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:o}return o},exec:function(t){var n,o=(o=t.getSelection())&&o.getRanges()[0];if(n=t.elementPath().contains(i))e.call(this,n,u);else for(o=o.createIterator(),t=t.config.enterMode,o.enforceRealBlocks=!0,o.enlargeBr=t!=CKEDITOR.ENTER_BR;n=o.getNextParagraph(t==CKEDITOR.ENTER_P?"p":"div");)n.isReadOnly()||e.call(this,n,u);return!0}}}}var l=CKEDITOR.plugins.indent,u=a.config.indentClasses;l.registerCommands(a,{indentblock:new s(a,"indentblock",!0),outdentblock:new s(a,"outdentblock")}),CKEDITOR.tools.extend(s.prototype,l.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:u?new RegExp("(?:^|\\s+)("+u.join("|")+")(?=$|\\s)"):null})}})}(),function(){function e(e){function i(t){for(var i=o.startContainer,l=o.endContainer;i&&!i.getParent().equals(t);)i=i.getParent();for(;l&&!l.getParent().equals(t);)l=l.getParent();if(!i||!l)return!1;for(var u=[],c=!1;!c;)i.equals(l)&&(c=!0),u.push(i),i=i.getNext();if(1>u.length)return!1;for(i=t.getParents(!0),l=0;l<i.length;l++)if(i[l].getName&&s[i[l].getName()]){t=i[l];break}i=r.isIndent?1:-1,l=u[0],u=u[u.length-1];var d,f=(c=CKEDITOR.plugins.list.listToArray(t,a))[u.getCustomData("listarray_index")].indent;for(l=l.getCustomData("listarray_index");l<=u.getCustomData("listarray_index");l++)if(c[l].indent+=i,0<i){for(var h=c[l].parent,g=l-1;0<=g;g--)if(c[g].indent===i){h=c[g].parent;break}c[l].parent=new CKEDITOR.dom.element(h.getName(),h.getDocument())}for(l=u.getCustomData("listarray_index")+1;l<c.length&&c[l].indent>f;l++)c[l].indent+=i;if(i=CKEDITOR.plugins.list.arrayToList(c,a,null,e.config.enterMode,t.getDirection()),!r.isIndent&&(d=t.getParent())&&d.is("li")){var p,m=[];for(l=(u=i.listNode.getChildren()).count()-1;0<=l;l--)(p=u.getItem(l))&&p.is&&p.is("li")&&m.push(p)}if(i&&i.listNode.replace(t),m&&m.length)for(l=0;l<m.length;l++){for(p=t=m[l];(p=p.getNext())&&p.is&&p.getName()in s;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(n)&&t.append(o.document.createText(" ")),t.append(p);t.insertAfter(d)}return i&&e.fire("contentDomInvalidated"),!0}for(var o,r=this,a=this.database,s=this.context,l=((l=e.getSelection())&&l.getRanges()).createIterator();o=l.getNextRange();){for(var u=o.getCommonAncestor();u&&(u.type!=CKEDITOR.NODE_ELEMENT||!s[u.getName()]);){if(e.editable().equals(u)){u=!1;break}u=u.getParent()}if(u||(u=o.startPath().contains(s))&&o.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),!u){var c=o.getEnclosedNode();c&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in s&&(o.setStartAt(c,CKEDITOR.POSITION_AFTER_START),o.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),u=c)}if(u&&o.startContainer.type==CKEDITOR.NODE_ELEMENT&&o.startContainer.getName()in s&&((c=new CKEDITOR.dom.walker(o)).evaluator=t,o.startContainer=c.next()),u&&o.endContainer.type==CKEDITOR.NODE_ELEMENT&&o.endContainer.getName()in s&&((c=new CKEDITOR.dom.walker(o)).evaluator=t,o.endContainer=c.previous()),u)return i(u)}return 0}function t(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function n(e){return i(e)&&o(e)}var i=CKEDITOR.dom.walker.whitespaces(!0),o=CKEDITOR.dom.walker.bookmark(!1,!0),r=CKEDITOR.TRISTATE_DISABLED,a=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function n(t){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",(function(e){var n=t.elementPath();if("wysiwyg"==t.mode&&e.data.keyCode==this.indentKey&&n){var i=this.getContext(n);!i||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,n,i)||(t.execCommand(this.relatedGlobal),e.cancel())}}),this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var n=this.getContext(t),i=CKEDITOR.plugins.indentList.firstItemInPath(this.context,t,n);return n&&this.isIndent&&!i?a:r}:function(e,t){return!this.getContext(t)||this.isIndent?r:a},exec:CKEDITOR.tools.bind(e,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(t,{indentlist:new n(t,"indentlist",!0),outdentlist:new n(t,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(e,n,i){var o=n.contains(t);return i||(i=n.contains(e)),i&&o&&o.equals(i.getFirst(t))}}(),CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(e){e.config.smiley_path=e.config.smiley_path||this.path+"images/",e.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"})),e.ui.addButton&&e.ui.addButton("Smiley",{label:e.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"}),CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" "),CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";"),function(){function e(e,t){var n;if(t=void 0===t||t)n=e.getComputedStyle("text-align");else{for(;(!e.hasAttribute||!e.hasAttribute("align")&&!e.getStyle("text-align"))&&(n=e.getParent());)e=n;n=e.getStyle("text-align")||e.getAttribute("align")||""}return n&&(n=n.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!n&&t&&(n="rtl"==e.getComputedStyle("direction")?"right":"left"),n}function t(e,t,n){this.editor=e,this.name=t,this.value=n,this.context="p",t=e.config.justifyClasses;var i=e.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(t){switch(n){case"left":this.cssClassName=t[0];break;case"center":this.cssClassName=t[1];break;case"right":this.cssClassName=t[2];break;case"justify":this.cssClassName=t[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+t.join("|")+")(?=$|\\s)"),this.requiredContent=i+"("+this.cssClassName+")"}else this.requiredContent=i+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},e.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function n(e){var t=e.editor,n=t.createRange();n.setStartBefore(e.data.node),n.setEndAfter(e.data.node);for(var i,o=new CKEDITOR.dom.walker(n);i=o.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(e.data.node)&&i.getDirection())n.setStartAfter(i),o=new CKEDITOR.dom.walker(n);else{var r=t.config.justifyClasses;r&&(i.hasClass(r[0])?(i.removeClass(r[0]),i.addClass(r[2])):i.hasClass(r[2])&&(i.removeClass(r[2]),i.addClass(r[0]))),"left"==(r=i.getStyle("text-align"))?i.setStyle("text-align","right"):"right"==r&&i.setStyle("text-align","left")}}t.prototype={exec:function(t){var n=t.getSelection(),i=t.config.enterMode;if(n){for(var o,r,a=n.createBookmarks(),s=n.getRanges(),l=this.cssClassName,u=void 0===(u=t.config.useComputedState)||u,c=s.length-1;0<=c;c--)for((o=s[c].createIterator()).enlargeBr=i!=CKEDITOR.ENTER_BR;r=o.getNextParagraph(i==CKEDITOR.ENTER_P?"p":"div");)if(!r.isReadOnly()){var d,f=r.getName();if(d=t.activeFilter.check(f+"{text-align}"),(f=t.activeFilter.check(f+"("+l+")"))||d){r.removeAttribute("align"),r.removeStyle("text-align");var h=l&&(r.$.className=CKEDITOR.tools.ltrim(r.$.className.replace(this.cssClassRegex,""))),g=this.state==CKEDITOR.TRISTATE_OFF&&(!u||e(r,!0)!=this.value);l&&f?g?r.addClass(l):h||r.removeAttribute("class"):g&&d&&r.setStyle("text-align",this.value)}}t.focus(),t.forceNextSelectionCheck(),n.selectBookmarks(a)}},refresh:function(t,n){var i=n.block||n.blockLimit,o=i.getName(),r=i.equals(t.editable());o=t.activeFilter.check(this.cssClassName?o+"("+this.cssClassName+")":o+"{text-align}"),r&&!CKEDITOR.dtd.$list[n.lastElement.getName()]?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(!r&&o?e(i,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}},CKEDITOR.plugins.add("justify",{init:function(e){if(!e.blockless){var i=new t(e,"justifyleft","left"),o=new t(e,"justifycenter","center"),r=new t(e,"justifyright","right"),a=new t(e,"justifyblock","justify");e.addCommand("justifyleft",i),e.addCommand("justifycenter",o),e.addCommand("justifyright",r),e.addCommand("justifyblock",a),e.ui.addButton&&(e.ui.addButton("JustifyLeft",{label:e.lang.common.alignLeft,command:"justifyleft",toolbar:"align,10"}),e.ui.addButton("JustifyCenter",{label:e.lang.common.center,command:"justifycenter",toolbar:"align,20"}),e.ui.addButton("JustifyRight",{label:e.lang.common.alignRight,command:"justifyright",toolbar:"align,30"}),e.ui.addButton("JustifyBlock",{label:e.lang.common.justify,command:"justifyblock",toolbar:"align,40"})),e.on("dirChanged",n)}}})}(),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var t=this._,n=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&n?n.hide():(t.previousState=t.state,n||((n=t.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}})).onHide=CKEDITOR.tools.bind((function(){var n=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!n||n[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED),t.on=0}),this),this.onMenu&&n.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout((function(){n.show(CKEDITOR.document.getById(t.id),4)}),0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow="menu",this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(e){var t,n,i,o,r=e.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],a=this,s=e.lang.language,l={};for(e.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(e,t){var n=l["language_"+t];n&&e[n.style.checkActive(e.elementPath(),e)?"removeStyle":"applyStyle"](n.style)},refresh:function(e){this.setState(a.getCurrentLangElement(e)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}}),o=0;o<r.length;o++)t=r[o].split(":"),l[i="language_"+(n=t[0])]={label:t[1],langId:n,group:"language",order:o,ltr:"rtl"!=(""+t[2]).toLowerCase(),onClick:function(){e.execCommand("language",this.langId)},role:"menuitemcheckbox"},l[i].style=new CKEDITOR.style({element:"span",attributes:{lang:n,dir:l[i].ltr?"ltr":"rtl"}});l.language_remove={label:s.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:l.length,onClick:function(){var t=a.getCurrentLangElement(e);t&&e.execCommand("language",t.getAttribute("lang"))}},e.addMenuGroup("language",1),e.addMenuGroup("language_remove"),e.addMenuItems(l),e.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:s.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var t,n={},i=a.getCurrentLangElement(e);for(t in l)n[t]=CKEDITOR.TRISTATE_OFF;return n.language_remove=i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,i&&(n["language_"+i.getAttribute("lang")]=CKEDITOR.TRISTATE_ON),n}}),e.addRemoveFormatFilter&&e.addRemoveFormatFilter((function(e){return!(e.is("span")&&e.getAttribute("dir")&&e.getAttribute("lang"))}))},getCurrentLangElement:function(e){var t,n=e.elementPath();if(e=n&&n.elements,n)for(var i=0;i<e.length;i++)n=e[i],!t&&"span"==n.getName()&&n.hasAttribute("dir")&&n.hasAttribute("lang")&&(t=n);return t}}),function(){function e(e){return e.replace(/'/g,"\\$&")}function t(e){for(var t,n=e.length,i=[],o=0;o<n;o++)t=e.charCodeAt(o),i.push(t);return"String.fromCharCode("+i.join(",")+")"}function n(t,n){for(var i,o,r=(a=t.plugins.link).compiledProtectionFunction.params,a=[a.compiledProtectionFunction.name,"("],s=0;s<r.length;s++)o=n[i=r[s].toLowerCase()],0<s&&a.push(","),a.push("'",o?e(encodeURIComponent(n[i])):"","'");return a.push(")"),a.join("")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return n.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.setKeystroke(CKEDITOR.CTRL+75,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",(function(t){var n=t.data.element.getAscendant({a:1,img:1},!0);n&&!n.isReadOnly()&&(n.is("a")?(t.data.dialog=!n.getAttribute("name")||n.getAttribute("href")&&n.getChildCount()?"link":"anchor",t.data.link=n):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,n)&&(t.data.dialog="anchor"))}),null,null,0),e.on("doubleclick",(function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&e.getSelection().selectElement(t.data.link)}),null,null,20),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener((function(t){if(!t||t.isReadOnly())return null;if(!(t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var n={};return t.getAttribute("href")&&t.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF),n})),this.compiledProtectionFunction=function(e){var t;return(e=e.config.emailProtection||"")&&"encode"!=e&&(t={},e.replace(/^([^(]+)\(([^)]+)\)$/,(function(e,n,i){t.name=n,t.params=[],i.replace(/[^,\s]+/g,(function(e){t.params.push(e)}))}))),t}(e)},afterInit:function(e){e.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:e.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=e._.elementsPath&&e._.elementsPath.filters;t&&t.push((function(t,n){if("a"==n&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"}))}});var i=/^javascript:/,o=/^(?:mailto)(?:(?!\?(subject|body)=).)+/i,r=/subject=([^;?:@&=$,\/]*)/i,a=/body=([^;?:@&=$,\/]*)/i,s=/^#(.*)$/,l=/^((?:http|https|ftp|news):\/\/)?(.*)$/,u=/^(_(?:self|top|parent|blank))$/,c=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,d=/^javascript:([^(]+)\(([^)]+)\)$/,f=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,h=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,g=/^tel:(.*)$/,p={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(e,t){var n,i=e.getSelection(),o=i.getSelectedElement(),r=i.getRanges(),a=[];if(!t&&o&&o.is("a"))return o;for(o=0;o<r.length;o++)if((n=i.getRanges()[o]).shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(n=e.elementPath(n.getCommonAncestor()).contains("a",1))&&t)a.push(n);else if(n)return n;return t?a:null},getEditorAnchors:function(e){for(var t,n=(i=(n=e.editable()).isInline()&&!e.plugins.divarea?e.document:n).getElementsByTag("a"),i=i.getElementsByTag("img"),o=[],r=0;t=n.getItem(r++);)(t.data("cke-saved-name")||t.hasAttribute("name"))&&o.push({name:t.data("cke-saved-name")||t.getAttribute("name"),id:t.getAttribute("id")});for(r=0;t=i.getItem(r++);)(t=this.tryRestoreFakeAnchor(e,t))&&o.push({name:t.getAttribute("name"),id:t.getAttribute("id")});return o},fakeAnchor:!0,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var n=e.restoreRealElement(t);if(n.data("cke-saved-name"))return n}},parseLinkAttributes:function(e,t){var n,m=t&&(t.data("cke-saved-href")||t.getAttribute("href"))||"",v=e.plugins.link.compiledProtectionFunction,y=e.config.emailProtection,b={};if(m.match(i)&&("encode"==y?m=m.replace(c,(function(e,t,n){return n=n||"","mailto:"+String.fromCharCode.apply(String,t.split(","))+n.replace(/\\'/g,"'")})):y&&m.replace(d,(function(e,t,n){if(t==v.name){b.type="email",e=b.email={},t=/(^')|('$)/g;for(var i,o=(n=n.match(/[^,\s]+/g)).length,r=0;r<o;r++)i=decodeURIComponent(i=n[r].replace(t,"").replace(/\\'/g,"'")),e[v.params[r].toLowerCase()]=i;e.address=[e.name,e.domain].join("@")}}))),!b.type)if(y=m.match(s))b.type="anchor",b.anchor={},b.anchor.name=b.anchor.id=y[1];else if(y=m.match(g))b.type="tel",b.tel=y[1];else if(y=m.match(o)){n=m.match(r),m=m.match(a);var T=b.email={};b.type="email",T.address=y[0].replace("mailto:",""),n&&(T.subject=decodeURIComponent(n[1])),m&&(T.body=decodeURIComponent(m[1]))}else m&&(n=m.match(l))&&(b.type="url",b.url={},b.url.protocol=n[1],b.url.url=n[2]);if(t){if(m=t.getAttribute("target"))b.target={type:m.match(u)?m:"frame",name:m};else if(m=(m=t.data("cke-pa-onclick")||t.getAttribute("onclick"))&&m.match(f))for(b.target={type:"popup",name:m[1]};y=h.exec(m[2]);)"yes"!=y[2]&&"1"!=y[2]||y[1]in{height:1,width:1,top:1,left:1}?isFinite(y[2])&&(b.target[y[1]]=y[2]):b.target[y[1]]=!0;var C;for(C in null!==t.getAttribute("download")&&(b.download=!0),m={},p)(y=t.getAttribute(C))&&(m[p[C]]=y);(C=t.data("cke-saved-name")||m.advName)&&(m.advName=C),CKEDITOR.tools.isEmpty(m)||(b.advanced=m)}return b},getLinkAttributes:function(i,o){var r=i.config.emailProtection||"",a={};switch(o.type){case"url":r=o.url&&void 0!==o.url.protocol?o.url.protocol:"http://";var s=o.url&&CKEDITOR.tools.trim(o.url.url)||"";a["data-cke-saved-href"]=0===s.indexOf("/")?s:r+s;break;case"anchor":r=o.anchor&&o.anchor.id,a["data-cke-saved-href"]="#"+(o.anchor&&o.anchor.name||r||"");break;case"email":switch(s=(c=o.email).address,r){case"":case"encode":var l=encodeURIComponent(c.subject||""),u=encodeURIComponent(c.body||""),c=[];l&&c.push("subject="+l),u&&c.push("body="+u),c=c.length?"?"+c.join("&"):"","encode"==r?(r=["javascript:void(location.href='mailto:'+",t(s)],c&&r.push("+'",e(c),"'"),r.push(")")):r=["mailto:",s,c];break;default:r=s.split("@",2),c.name=r[0],c.domain=r[1],r=["javascript:",n(i,c)]}a["data-cke-saved-href"]=r.join("");break;case"tel":a["data-cke-saved-href"]="tel:"+o.tel}if(o.target)if("popup"==o.target.type){r=["window.open(this.href, '",o.target.name||"","', '"];var d="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(s=d.length,l=function(e){o.target[e]&&d.push(e+"="+o.target[e])},c=0;c<s;c++)d[c]+=o.target[d[c]]?"=yes":"=no";l("width"),l("left"),l("height"),l("top"),r.push(d.join(","),"'); return false;"),a["data-cke-pa-onclick"]=r.join("")}else"notSet"!=o.target.type&&o.target.name&&(a.target=o.target.name);if(o.download&&(a.download=""),o.advanced){for(var f in p)(r=o.advanced[p[f]])&&(a[f]=r);a.name&&(a["data-cke-saved-name"]=a.name)}for(var h in a["data-cke-saved-href"]&&(a.href=a["data-cke-saved-href"]),f={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},o.advanced&&CKEDITOR.tools.extend(f,p),a)delete f[h];return{set:a,removed:CKEDITOR.tools.object.keys(f)}},showDisplayTextForElement:function(e,t){var n=t.getSelection();return!(t.widgets&&t.widgets.focused||n&&1<n.getRanges().length||e&&e.getName&&e.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){if(CKEDITOR.env.ie){var t,n=e.getSelection().getRanges()[0],i=n.getPreviousEditableNode()&&n.getPreviousEditableNode().getAscendant("a",!0)||n.getNextEditableNode()&&n.getNextEditableNode().getAscendant("a",!0);n.collapsed&&i&&(t=n.createBookmark(),n.selectNodeContents(i),n.select())}i=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),e.removeStyle(i),t&&(n.moveToBookmark(t),n.select())},refresh:function(e,t){var n=t.lastElement&&t.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t,n=e.getSelection(),i=n.createBookmarks();n&&(t=n.getSelectedElement())&&(t.getChildCount()?t.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))?t.remove(1):(t=CKEDITOR.plugins.link.getSelectedLink(e))&&(t.hasAttribute("href")?(t.removeAttributes({name:1,"data-cke-saved-name":1}),t.removeClass("cke_anchor")):t.remove(1)),n.selectBookmarks(i)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0,linkDefaultProtocol:"http://"})}(),function(){function e(e,t,n,i){for(var o=CKEDITOR.plugins.list.listToArray(t.root,n),r=[],a=0;a<t.contents.length;a++)(c=(c=t.contents[a]).getAscendant("li",!0))&&!c.getCustomData("list_item_processed")&&(r.push(c),CKEDITOR.dom.element.setMarker(n,c,"list_item_processed",!0));var s,l,u,c=t.root.getDocument();for(a=0;a<r.length;a++){var d=r[a].getCustomData("listarray_index");(s=o[d].parent).is(this.type)||(l=c.createElement(this.type),s.copyAttributes(l,{start:1,type:1}),l.removeStyle("list-style-type"),o[d].parent=l)}for(o=(n=CKEDITOR.plugins.list.arrayToList(o,n,null,e.config.enterMode)).listNode.getChildCount(),a=0;a<o&&(u=n.listNode.getChild(a));a++)u.getName()==this.type&&i.push(u);n.listNode.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t,n){var i,o,r=t.contents,a=t.root.getDocument(),s=[];if(1==r.length&&r[0].equals(t.root)){var l=a.createElement("div");r[0].moveChildren&&r[0].moveChildren(l),r[0].append(l),r[0]=l}for(t=t.contents[0].getParent(),l=0;l<r.length;l++)t=t.getCommonAncestor(r[l].getParent());for(e=void 0===(e=e.config.useComputedState)||e,l=0;l<r.length;l++)for(var u,c=r[l];u=c.getParent();){if(u.equals(t)){s.push(c),!o&&c.getDirection()&&(o=1),c=c.getDirection(e),null!==i&&(i=i&&i!=c?null:c);break}c=u}if(!(1>s.length)){for(r=s[s.length-1].getNext(),l=a.createElement(this.type),n.push(l);s.length;)n=s.shift(),e=a.createElement("li"),(c=n).is("pre")||g.test(c.getName())||"false"==c.getAttribute("contenteditable")?n.appendTo(e):(n.copyAttributes(e),i&&n.getDirection()&&(e.removeStyle("direction"),e.removeAttribute("dir")),n.moveChildren(e),n.remove()),e.appendTo(l);i&&o&&l.setAttribute("dir",i),r?l.insertBefore(r):l.appendTo(t)}}function n(e,t,n){function i(n){!(l=c[n?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(u=t.root[n?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||u.is&&u.isBlockBoundary({br:1})||e.document.createElement("br")[n?"insertBefore":"insertAfter"](l)}for(var o=CKEDITOR.plugins.list.listToArray(t.root,n),r=[],a=0;a<t.contents.length;a++){var s=t.contents[a];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(r.push(s),CKEDITOR.dom.element.setMarker(n,s,"list_item_processed",!0))}for(s=null,a=0;a<r.length;a++)o[s=r[a].getCustomData("listarray_index")].indent=-1;for(a=s+1;a<o.length;a++)if(o[a].indent>o[a-1].indent+1){for(r=o[a-1].indent+1-o[a].indent,s=o[a].indent;o[a]&&o[a].indent>=s;)o[a].indent+=r,a++;a--}var l,u,c=CKEDITOR.plugins.list.arrayToList(o,n,null,e.config.enterMode,t.root.getAttribute("dir")).listNode;i(!0),i(),c.replace(t.root),e.fire("contentDomInvalidated")}function i(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function o(e,t,n,i){for(var o,r;o=e[i?"getLast":"getFirst"](p);)(r=o.getDirection(1))!==t.getDirection(1)&&o.setAttribute("dir",r),o.remove(),n?o[i?"insertBefore":"insertAfter"](n):t.append(o,i),n=o}function r(e){function t(t){var n=e[t?"getPrevious":"getNext"](f);n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(e.getName())&&(o(e,n,null,!t),e.remove(),e=n)}t(),t(1)}function a(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function s(e,t,n){e.fire("saveSnapshot"),n.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var i=n.extractContents();t.trim(!1,!0);var a=t.createBookmark(),s=(u=new CKEDITOR.dom.elementPath(t.startContainer)).block,u=u.lastElement.getAscendant("li",1)||s,c=(d=new CKEDITOR.dom.elementPath(n.startContainer)).contains(CKEDITOR.dtd.$listItem),d=d.contains(CKEDITOR.dtd.$list);for(s?(s=s.getBogus())&&s.remove():d&&(s=d.getPrevious(f))&&h(s)&&s.remove(),(s=i.getLast())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("br")&&s.remove(),(s=t.startContainer.getChild(t.startOffset))?i.insertBefore(s):t.startContainer.append(i),c&&(i=l(c))&&(u.contains(c)?(o(i,c.getParent(),c),i.remove()):u.append(i));n.checkStartOfBlock()&&n.checkEndOfBlock()&&(i=(d=n.startPath()).block);)i.is("li")&&(u=i.getParent(),i.equals(u.getLast(f))&&i.equals(u.getFirst(f))&&(i=u)),n.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove();n=n.clone(),i=e.editable(),n.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).evaluator=function(e){return f(e)&&!h(e)},(n=n.next())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in CKEDITOR.dtd.$list&&r(n),t.moveToBookmark(a),t.select(),e.fire("saveSnapshot")}function l(e){return(e=e.getLast(f))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in u?e:null}var u={ol:1,ul:1},c=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),f=function(e){return!(c(e)||d(e))},h=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,n,i,o){if(!u[e.getName()])return[];i||(i=0),n||(n=[]);for(var r=0,a=e.getChildCount();r<a;r++){var s=e.getChild(r);if(s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(s,t,n,i+1),"li"==s.$.nodeName.toLowerCase()){var l={parent:e,indent:i,element:s,contents:[]};o?l.grandparent=o:(l.grandparent=e.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,s,"listarray_index",n.length),n.push(l);for(var c,d=0,f=s.getChildCount();d<f;d++)(c=s.getChild(d)).type==CKEDITOR.NODE_ELEMENT&&u[c.getName()]?CKEDITOR.plugins.list.listToArray(c,t,n,i+1,l.grandparent):l.contents.push(c)}}return n},arrayToList:function(e,t,n,i,o){if(n||(n=0),!e||e.length<n+1)return null;for(var r,a,s,l=e[n].parent.getDocument(),c=new CKEDITOR.dom.documentFragment(l),h=null,g=n,p=Math.max(e[n].indent,0),m=null,v=i==CKEDITOR.ENTER_P?"p":"div";;){var y=e[g];if(r=y.grandparent,a=y.element.getDirection(1),y.indent==p){for(h&&e[g].parent.getName()==h.getName()||(h=e[g].parent.clone(!1,1),o&&h.setAttribute("dir",o),c.append(h)),m=h.append(y.element.clone(0,1)),a!=h.getDirection(1)&&m.setAttribute("dir",a),r=0;r<y.contents.length;r++)m.append(y.contents[r].clone(1,1));g++}else if(y.indent==Math.max(p,0)+1)y=e[g-1].element.getDirection(1),g=CKEDITOR.plugins.list.arrayToList(e,null,g,i,y!=a?a:null),!m.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=l.$.documentMode&&m.append(l.createText(" ")),m.append(g.listNode),g=g.nextIndex;else{if(-1!=y.indent||n||!r)return null;u[r.getName()]?(m=y.element.clone(!1,!0),a!=r.getDirection(1)&&m.setAttribute("dir",a)):m=new CKEDITOR.dom.documentFragment(l),h=r.getDirection(1)!=a;var b,T,C=y.element,E=C.getAttribute("class"),_=C.getAttribute("style"),x=m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(i!=CKEDITOR.ENTER_BR||h||_||E),I=y.contents.length;for(r=0;r<I;r++)if(d(b=y.contents[r])&&1<I)x?T=b.clone(1,1):m.append(b.clone(1,1));else if(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()){h&&!b.getDirection()&&b.setAttribute("dir",a),s=b;var D=C.getAttribute("style");D&&s.setAttribute("style",D.replace(/([^;])$/,"$1;")+(s.getAttribute("style")||"")),E&&b.addClass(E),s=null,T&&(m.append(T),T=null),m.append(b.clone(1,1))}else x?(s||(s=l.createElement(v),m.append(s),h&&s.setAttribute("dir",a)),_&&s.setAttribute("style",_),E&&s.setAttribute("class",E),T&&(s.append(T),T=null),s.append(b.clone(1,1))):m.append(b.clone(1,1));T&&((s||m).append(T),T=null),m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&g!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(a=m.getLast())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("br")&&a.remove(),(a=m.getLast(f))&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$block)||m.append(l.createElement("br"))),"div"!=(a=m.$.nodeName.toLowerCase())&&"p"!=a||m.appendBogus(),c.append(m),h=null,g++}if(s=null,e.length<=g||Math.max(e[g].indent,0)<p)break}if(t)for(e=c.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(l=o=i=void 0,i=(n=e).getDirection()))){for(o=n.getParent();o&&!(l=o.getDirection());)o=o.getParent();i==l&&n.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:c,nextIndex:g}}};var g=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);i.prototype={exec:function(i){function o(e){return u[e.root.getName()]&&!function(e,t){return CKEDITOR.tools.array.filter(e.getChildren().toArray(),(function(e){return-1===CKEDITOR.tools.array.indexOf(t,e.type)})).length}(e.root,[CKEDITOR.NODE_COMMENT])}function a(e){var t=!0;return 0!==e.getChildCount()&&(e.forEach((function(e){if(e.type!==CKEDITOR.NODE_COMMENT)return t=!1}),null,!0),t)}this.refresh(i,i.elementPath());var s=i.config,l=i.getSelection(),c=l&&l.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((h=i.editable()).getFirst(f)){var d=1==c.length&&c[0];(s=d&&d.getEnclosedNode())&&s.is&&this.type==s.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else s.enterMode==CKEDITOR.ENTER_BR?h.appendBogus():c[0].fixBlock(1,s.enterMode==CKEDITOR.ENTER_P?"p":"div"),l.selectRanges(c);s=l.createBookmarks(!0);for(var h=[],g={},p=(c=c.createIterator(),0);(d=c.getNextRange())&&++p;){var m=d.getBoundaryNodes(),v=m.endNode;for((b=m.startNode).type==CKEDITOR.NODE_ELEMENT&&"td"==b.getName()&&d.setStartAt(m.startNode,CKEDITOR.POSITION_AFTER_START),v.type==CKEDITOR.NODE_ELEMENT&&"td"==v.getName()&&d.setEndAt(m.endNode,CKEDITOR.POSITION_BEFORE_END),(d=d.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;m=d.getNextParagraph();)if(!m.getCustomData("list_block")&&!a(m)){CKEDITOR.dom.element.setMarker(g,m,"list_block",1);for(var y,b=(T=i.elementPath(m)).elements,T=(v=0,T.blockLimit),C=b.length-1;0<=C&&(y=b[C]);C--)if(u[y.getName()]&&T.contains(y)){T.removeCustomData("list_group_object_"+p),(b=y.getCustomData("list_group_object"))?b.contents.push(m):(h.push(b={root:y,contents:[m]}),CKEDITOR.dom.element.setMarker(g,y,"list_group_object",b)),v=1;break}v||((v=T).getCustomData("list_group_object_"+p)?v.getCustomData("list_group_object_"+p).contents.push(m):(b={root:v,contents:[m]},CKEDITOR.dom.element.setMarker(g,v,"list_group_object_"+p,b),h.push(b)))}}for(y=[];0<h.length;)b=h.shift(),this.state==CKEDITOR.TRISTATE_OFF?o(b)||(u[b.root.getName()]?e.call(this,i,b,g,y):t.call(this,i,b,y)):this.state==CKEDITOR.TRISTATE_ON&&u[b.root.getName()]&&!o(b)&&n.call(this,i,b,g);for(C=0;C<y.length;C++)r(y[C]);CKEDITOR.dom.element.clearAllMarkers(g),l.selectBookmarks(s),i.focus()},refresh:function(e,t){var n=t.contains(u,1);n&&(t.blockLimit||t.root).contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new i("numberedlist","ol")),e.addCommand("bulletedlist",new i("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",(function(t){var n,i=t.data.domEvent.getKey();if("wysiwyg"==e.mode&&i in{8:1,46:1}){var o=e.getSelection().getRanges()[0],r=o&&o.startPath();if(o&&o.collapsed){var c,d=8==i,g=e.editable(),p=new CKEDITOR.dom.walker(o.clone());if(p.evaluator=function(e){return f(e)&&!h(e)},p.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},i=o.clone(),d)if((c=r.contains(u))&&o.checkBoundaryOfElement(c,CKEDITOR.START)&&(c=c.getParent())&&c.is("li")&&(c=l(c))?(n=c,c=c.getPrevious(f),i.moveToPosition(c&&h(c)?c:n,CKEDITOR.POSITION_BEFORE_START)):(p.range.setStartAt(g,CKEDITOR.POSITION_AFTER_START),p.range.setEnd(o.startContainer,o.startOffset),(c=p.previous())&&c.type==CKEDITOR.NODE_ELEMENT&&(c.getName()in u||c.is("li"))&&(c.is("li")||(p.range.selectNodeContents(c),p.reset(),p.evaluator=a,c=p.previous()),i.moveToElementEditEnd(n=c),i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END))),n)s(e,i,o),t.cancel();else{var m=r.contains(u);m&&o.checkBoundaryOfElement(m,CKEDITOR.START)&&(n=m.getFirst(f),o.checkBoundaryOfElement(n,CKEDITOR.START)&&(c=m.getPrevious(f),l(n)?c&&(o.moveToElementEditEnd(c),o.select()):e.execCommand("outdent"),t.cancel()))}else if(n=r.contains("li")){if(p.range.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),d=(g=n.getLast(f))&&a(g)?g:n,r=0,(c=p.next())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in u&&c.equals(g)?(r=1,c=p.next()):o.checkBoundaryOfElement(d,CKEDITOR.END)&&(r=2),r&&c){if((o=o.clone()).moveToElementEditStart(c),1==r&&(i.optimize(),!i.startContainer.equals(n))){for(n=i.startContainer;n.is(CKEDITOR.dtd.$inline);)m=n,n=n.getParent();m&&i.moveToPosition(m,CKEDITOR.POSITION_AFTER_END)}2==r&&(i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END),o.endPath().block&&o.moveToPosition(o.endPath().block,CKEDITOR.POSITION_AFTER_START)),s(e,i,o),t.cancel()}}else p.range.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),(c=p.next())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(u)&&(c=c.getFirst(f),r.block&&o.checkStartOfBlock()&&o.checkEndOfBlock()?(r.block.remove(),o.moveToElementEditStart(c),o.select()):l(c)?(o.moveToElementEditStart(c),o.select()):((o=o.clone()).moveToElementEditStart(c),s(e,i,o)),t.cancel());setTimeout((function(){e.selectionChange(1)}))}}})))}})}(),CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(e){var t;e.blockless||(t=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]; li{list-style-type}[value]",contentTransformations:[["ol: listTypeToStyle"]]}),t=e.addCommand("numberedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),t=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}",contentTransformations:[["ul: listTypeToStyle"]]}),t=e.addCommand("bulletedListStyle",t),e.addFeature(t),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),e.addMenuGroup("list",108),e.addMenuItems({numberedlist:{label:e.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:e.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),e.contextMenu.addListener((function(e){if(!e||e.isReadOnly())return null;for(;e;){var t=e.getName();if("ol"==t)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==t)return{bulletedlist:CKEDITOR.TRISTATE_OFF};e=e.getParent()}return null})))}},CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle),function(){function e(e,t,n){return d(t)&&d(n)&&n.equals(t.getNext((function(e){return!(U(e)||j(e)||f(e))})))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function n(e){var t=e.element;if(t&&d(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var n=a(t);if("true"==n.getAttribute("contenteditable"))return t;if(n.is(e.triggers))return n}return null}function i(e,t,n){return b(e,t),b(e,n),n=n.size.top,(e=t.size.bottom)&&n?0|(e+n)/2:e||n}function o(e,t,n){return t[n?"getPrevious":"getNext"]((function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!U(t)||d(t)&&!f(t)&&!c(e,t)}))}function r(e,t,n){return e>t&&e<n}function a(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function s(e){var t=e.doc,n=x('<span contenteditable="false" data-cke-magic-line="1" style="'+V+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),i=CKEDITOR.getUrl(this.path+"images/"+(I.hidpi?"hidpi/":"")+"icon"+(e.rtl?"-rtl":"")+".png");for(E(n,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[E(x('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:V+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+i+") center no-repeat "+e.boxColor+";cursor:pointer;"+(I.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(I.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),E(x($,t),{base:W+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),E(x($,t),{base:W+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){b(e,this);var t=e.holdDistance,n=this.size;return!!(n&&r(e.mouse.y,n.top-t,n.bottom+t)&&r(e.mouse.x,n.left-t,n.right+t))},place:function(){var t=e.view,n=e.editable,i=e.trigger,o=i.upper,a=i.lower,s=o||a,l=s.getParent(),u={};for(var c in this.trigger=i,o&&b(e,o,!0),a&&b(e,a,!0),b(e,l,!0),e.inInlineMode&&T(e,!0),l.equals(n)?(u.left=t.scroll.x,u.right=-t.scroll.x,u.width=""):(u.left=s.size.left-s.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),u.width=s.size.outerWidth+s.size.margin.left+s.size.margin.right+t.scroll.x,u.right=""),o&&a?u.top=o.size.margin.bottom===a.size.margin.top?0|o.size.bottom+o.size.margin.bottom/2:o.size.margin.bottom<a.size.margin.top?o.size.bottom+o.size.margin.bottom:o.size.bottom+o.size.margin.bottom-a.size.margin.top:o?a||(u.top=o.size.bottom+o.size.margin.bottom):u.top=a.size.top-a.size.margin.top,i.is(N)||r(u.top,t.scroll.y-15,t.scroll.y+5)?(u.top=e.inInlineMode?0:t.scroll.y,this.look(N)):i.is(M)||r(u.top,t.pane.bottom-5,t.pane.bottom+15)?(u.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(M)):(e.inInlineMode&&(u.top-=t.editable.top+t.editable.border.top),this.look(K)),e.inInlineMode&&(u.top--,u.top+=t.editable.scroll.top,u.left+=t.editable.scroll.left),u)u[c]=CKEDITOR.tools.cssLength(u[c]);this.setStyles(u)},look:function(e){if(this.oldLook!=e){for(var t,n=this.lineChildren.length;n--;)(t=this.lineChildren[n]).setAttribute("style",t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new _("span",e.doc)}),t=n.lineChildren.length;t--;)n.lineChildren[t].appendTo(n);n.look(K),n.appendTo(n.wrap),n.unselectable(),n.lineChildren[0].on("mouseup",(function(t){n.detach(),l(e,(function(t){var n=e.line.trigger;t[n.is(R)?"insertBefore":"insertAfter"](n.is(R)?n.lower:n.upper)}),!0),e.editor.focus(),I.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),t.data.preventDefault(!0)})),n.on("mousedown",(function(e){e.data.preventDefault(!0)})),e.line=n}function l(e,t,n){var i,o=new CKEDITOR.dom.range(e.doc),r=e.editor;I.ie&&e.enterMode==CKEDITOR.ENTER_BR?i=e.doc.createText(P):(i=(i=a(e.element,!0))&&i.data("cke-enter-mode")||e.enterMode,(i=new _(O[i],e.doc)).is("br")||e.doc.createText(P).appendTo(i)),n&&r.fire("saveSnapshot"),t(i),o.moveToPosition(i,CKEDITOR.POSITION_AFTER_START),r.getSelection().selectRanges([o]),e.hotNode=i,n&&r.fire("saveSnapshot")}function u(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function i(n){var i=I.ie&&9>I.version?" ":P,o=e.hotNode&&e.hotNode.getText()==i&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;l(e,(function(i){o&&e.hotNode&&e.hotNode.remove(),i[t?"insertAfter":"insertBefore"](n),i.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t})),I.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),e.line.detach()}return function(r){var s,l;r=(r=r.getSelection().getStartElement()).getAscendant(z,1),p(e,r)||!r||r.equals(e.editable)||r.contains(e.editable)||((s=a(r))&&"false"==s.getAttribute("contenteditable")&&(r=s),e.element=r,d(s=o(e,r,!t))&&s.is(e.triggers)&&s.is(F)&&(!o(e,s,!t)||(l=o(e,s,!t))&&d(l)&&l.is(e.triggers))?i(s):d(l=n(e))&&(o(e,l,!t)?(r=o(e,l,!t))&&d(r)&&r.is(e.triggers)&&i(l):i(l)))}}()}}function c(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var n=e.line;return n.wrap.equals(t)||n.wrap.contains(t)}function d(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function f(e){return!!d(e)&&((t=h(e))||(t=!(!d(e)||!(t={left:1,right:1,center:1})[e.getComputedStyle("float")]&&!t[e.getAttribute("align")])),t);var t}function h(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function g(e,t){return d(t)?t.is(e.triggers):null}function p(e,t){if(!t)return!1;for(var n=t.getParents(1),i=n.length;i--;)for(var o=e.tabuList.length;o--;)if(n[i].hasAttribute(e.tabuList[o]))return!0;return!1}function m(e){var n=e.editable,i=e.mouse,o=e.view,a=e.triggerOffset;T(e);var s=i.y>(e.inInlineMode?o.editable.top+o.editable.height/2:Math.min(o.editable.height,o.pane.height)/2);return(n=n[s?"getLast":"getFirst"]((function(e){return!(U(e)||j(e))})))?(c(e,n)&&(n=e.line.wrap[s?"getPrevious":"getNext"]((function(e){return!(U(e)||j(e))}))),d(n)&&!f(n)&&g(e,n)?(b(e,n),!s&&0<=n.size.top&&r(i.y,0,n.size.top+a)?new t([null,n,R,A,e=e.inInlineMode||0===o.scroll.y?N:K]):s&&n.size.bottom<=o.pane.height&&r(i.y,n.size.bottom-a,o.pane.height)?(e=e.inInlineMode||r(n.size.bottom,o.pane.height-a,o.pane.height)?M:K,new t([n,null,k,A,e])):null):null):null}function v(e){var i=e.mouse,a=e.view,s=e.triggerOffset,l=n(e);if(!l)return null;b(e,l),s=Math.min(s,0|l.size.outerHeight/2);var u,c,h=[];if(r(i.y,l.size.top-1,l.size.top+s))c=!1;else{if(!r(i.y,l.size.bottom-s,l.size.bottom+1))return null;c=!0}if(f(l)||function(e,t,n){return!!(t=t[n?"getLast":"getFirst"]((function(t){return e.isRelevant(t)&&!t.is(B)})))&&(b(e,t),n?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y)}(e,l,c)||l.getParent().is(L))return null;var p=o(e,l,!c);if(p){if(p&&p.type==CKEDITOR.NODE_TEXT)return null;if(d(p)){if(f(p)||!g(e,p)||p.getParent().is(L))return null;h=[p,l][c?"reverse":"concat"]().concat([S,A])}}else l.equals(e.editable[c?"getLast":"getFirst"](e.isRelevant))?(T(e),c&&r(i.y,l.size.bottom-s,a.pane.height)&&r(l.size.bottom,a.pane.height-s,a.pane.height)?u=M:r(i.y,0,l.size.top+s)&&(u=N)):u=K,h=[null,l][c?"reverse":"concat"]().concat([c?k:R,A,u,l.equals(e.editable[c?"getLast":"getFirst"](e.isRelevant))?c?M:N:K]);return 0 in h?new t(h):null}function y(e,t,n,i){for(var o=t.getDocumentPosition(),r={},a={},s={},l={},u=X.length;u--;)r[X[u]]=parseInt(t.getComputedStyle.call(t,"border-"+X[u]+"-width"),10)||0,s[X[u]]=parseInt(t.getComputedStyle.call(t,"padding-"+X[u]),10)||0,a[X[u]]=parseInt(t.getComputedStyle.call(t,"margin-"+X[u]),10)||0;return n&&!i||C(e,i),l.top=o.y-(n?0:e.view.scroll.y),l.left=o.x-(n?0:e.view.scroll.x),l.outerWidth=t.$.offsetWidth,l.outerHeight=t.$.offsetHeight,l.height=l.outerHeight-(s.top+s.bottom+r.top+r.bottom),l.width=l.outerWidth-(s.left+s.right+r.left+r.right),l.bottom=l.top+l.outerHeight,l.right=l.left+l.outerWidth,e.inInlineMode&&(l.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),E({border:r,padding:s,margin:a,ignoreScroll:n},l,!0)}function b(e,t,n){if(!d(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==n&&t.size.date>new Date-H)return null}else t.size={};return E(t.size,y(e,t,n),{date:+new Date},!0)}function T(e,t){e.view.editable=y(e,e.editable,t,!0)}function C(e,t){e.view||(e.view={});var n=e.view;if(!(!t&&n&&n.date>new Date-H)){n=(i=e.win).getScrollPosition();var i=i.getViewPaneSize();E(e.view,{scroll:{x:n.x,y:n.y,width:e.doc.$.documentElement.scrollWidth-i.width,height:e.doc.$.documentElement.scrollHeight-i.height},pane:{width:i.width,height:i.height,bottom:i.height+n.y},date:+new Date},!0)}}CKEDITOR.plugins.add("magicline",{init:function(e){var i,r,a,g=e.config,b=g.magicline_triggerOffset||30,_={editor:e,enterMode:g.enterMode,triggerOffset:b,holdDistance:0|b*(g.magicline_holdDistance||.5),boxColor:g.magicline_color||"#ff0000",rtl:"rtl"==g.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(g.magicline_tabuList||[]),triggers:g.magicline_everywhere?z:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1},isRelevant:function(e){return d(e)&&!c(_,e)&&!f(e)}};e.on("contentDom",(function(){var d=e.editable(),f=e.document,b=e.window;E(_,{editable:d,inInlineMode:d.isInline(),doc:f,win:b,hotNode:null},!0),_.boundary=_.inInlineMode?_.editable:_.doc.getDocumentElement(),d.is(w.$inline)||(_.inInlineMode&&!h(d)&&d.setStyles({position:"relative",top:null,left:null}),s.call(this,_),C(_),d.attachListener(e,"beforeUndoImage",(function(){_.line.detach()})),d.attachListener(e,"beforeGetData",(function(){_.line.wrap.getParent()&&(_.line.detach(),e.once("getData",(function(){_.line.attach()}),null,null,1e3))}),null,null,0),d.attachListener(_.inInlineMode?f:f.getWindow().getFrame(),"mouseout",(function(t){if("wysiwyg"==e.mode)if(_.inInlineMode){var n=t.data.$.clientX;t=t.data.$.clientY,C(_),T(_,!0);var i=_.view.editable,o=_.view.scroll;n>i.left-o.x&&n<i.right-o.x&&t>i.top-o.y&&t<i.bottom-o.y||(clearTimeout(a),a=null,_.line.detach())}else clearTimeout(a),a=null,_.line.detach()})),d.attachListener(d,"keyup",(function(){_.hiddenMode=0})),d.attachListener(d,"keydown",(function(t){if("wysiwyg"==e.mode)switch(t.data.getKeystroke()){case 2228240:case 16:_.hiddenMode=1,_.line.detach()}})),d.attachListener(_.inInlineMode?d:f,"mousemove",(function(t){if(r=!0,"wysiwyg"==e.mode&&!e.readOnly&&!a){var n={x:t.data.$.clientX,y:t.data.$.clientY};a=setTimeout((function(){_.mouse=n,a=_.trigger=null,C(_),r&&!_.hiddenMode&&e.focusManager.hasFocus&&!_.line.mouseNear()&&(_.element=q(_,!0))&&((_.trigger=m(_)||v(_)||G(_))&&!p(_,_.trigger.upper||_.trigger.lower)?_.line.attach().place():(_.trigger=null,_.line.detach()),r=!1)}),30)}})),d.attachListener(b,"scroll",(function(){"wysiwyg"==e.mode&&(_.line.detach(),I.webkit&&(_.hiddenMode=1,clearTimeout(i),i=setTimeout((function(){_.mouseDown||(_.hiddenMode=0)}),50)))})),d.attachListener(D?f:b,"mousedown",(function(){"wysiwyg"==e.mode&&(_.line.detach(),_.hiddenMode=1,_.mouseDown=1)})),d.attachListener(D?f:b,"mouseup",(function(){_.hiddenMode=0,_.mouseDown=0})),e.addCommand("accessPreviousSpace",u(_)),e.addCommand("accessNextSpace",u(_,!0)),e.setKeystroke([[g.magicline_keystrokePrevious,"accessPreviousSpace"],[g.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",(function(){var t,n,i,o;for(o in{p:1,br:1,div:1})for(i=(t=e.document.getElementsByTag(o)).count();i--;)if((n=t.getItem(i)).data("cke-magicline-hot"))return _.hotNode=n,void(_.lastCmdDirection="true"===n.data("cke-magicline-dir"))})),e._.magiclineBackdoor={accessFocusSpace:l,boxTrigger:t,isLine:c,getAscendantTrigger:n,getNonEmptyNeighbour:o,getSize:y,that:_,triggerEdge:v,triggerEditable:m,triggerExpand:G})}),this)}});var E=CKEDITOR.tools.extend,_=CKEDITOR.dom.element,x=_.createFromHtml,I=CKEDITOR.env,D=CKEDITOR.env.ie&&9>CKEDITOR.env.version,w=CKEDITOR.dtd,O={},R=128,k=64,S=32,A=16,N=4,M=2,K=1,P=" ",L=w.$listItem,B=w.$tableContent,F=E({},w.$nonEditable,w.$empty),z=w.$block,H=100,V="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",W=V+"border-color:transparent;display:block;border-style:solid;",$="<span>"+P+"</span>";O[CKEDITOR.ENTER_BR]="br",O[CKEDITOR.ENTER_P]="p",O[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,n){return this.properties=e+t+(n||K),this},is:function(e){return(this.properties&e)==e}};var q=function(){function e(e,t){var n=e.$.elementFromPoint(t.x,t.y);return n&&n.nodeType?new CKEDITOR.dom.element(n):null}return function(t,n,i){if(!t.mouse)return null;var o=t.doc,r=t.line.wrap,a=e(o,i=i||t.mouse);return n&&c(t,a)&&(r.hide(),a=e(o,i),r.show()),!a||a.type!=CKEDITOR.NODE_ELEMENT||!a.$||I.ie&&9>I.version&&!t.boundary.equals(a)&&!t.boundary.contains(a)?null:a}}(),U=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),G=function(){function n(n){var a,s,l;if(!d(g=n.element)||g.contains(n.editable)||g.isReadOnly())return null;if(l=function(e,n,i,o){for(var r=o,a=o,s=0,l=!1,u=!1,c=e.view.pane.height,d=e.mouse;d.y+s<c&&0<d.y-s&&(l||(l=n(r,o)),u||(u=n(a,o)),!l&&0<d.y-s&&(r=i(e,{x:d.x,y:d.y-s})),!u&&d.y+s<c&&(a=i(e,{x:d.x,y:d.y+s})),!l||!u);)s+=2;return new t([r,a,null,null])}(n,(function(e,t){return!t.equals(e)}),(function(e,t){return q(e,!0,t)}),g),e(0,a=l.upper,s=l.lower))return l.set(S,8);if(a&&g.contains(a))for(;!a.getParent().equals(g);)a=a.getParent();else a=g.getFirst((function(e){return o(n,e)}));if(s&&g.contains(s))for(;!s.getParent().equals(g);)s=s.getParent();else s=g.getLast((function(e){return o(n,e)}));if(!a||!s)return null;if(b(n,a),b(n,s),!r(n.mouse.y,a.size.top,s.size.bottom))return null;for(var u,c,f,h,g=Number.MAX_VALUE;s&&!s.equals(a)&&(c=a.getNext(n.isRelevant));)(u=Math.abs(i(n,a,c)-n.mouse.y))<g&&(g=u,f=a,h=c),b(n,a=c);return f&&h&&r(n.mouse.y,f.size.top,h.size.bottom)?(l.upper=f,l.lower=h,l.set(S,8)):null}function o(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||j(t)||f(t)||c(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(t){var i,o=n(t);if(i=o){var r=o.lower;i=!(!(i=o.upper)||!r||f(r)||f(i)||r.equals(i)||i.equals(r)||r.contains(i)||i.contains(r)||!(g(t,i)&&g(t,r)&&e(0,i,r)))}return i?o:null}}(),X=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],n=["style","className"],i=0;i<n.length;i++){var o=e.$.elements.namedItem(n[i]);o&&(o=new CKEDITOR.dom.element(o),t.push([o,o.nextSibling]),o.remove())}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&0<t.length)for(var n=t.length-1;0<=n;n--){var i=t[n][0],o=t[n][1];o?i.insertBefore(o):i.appendTo(e)}}function n(n,i){var o=e(n),r={},a=n.$;return i||(r.class=a.className||"",a.className=""),r.inline=a.style.cssText||"",i||(a.style.cssText="position: static; overflow: visible"),t(o),r}function i(n,i){var o=e(n),r=n.$;"class"in i&&(r.className=i.class),"inline"in i&&(r.style.cssText=i.inline),t(o)}function o(e){if(!e.editable().isInline()){var t,n=CKEDITOR.instances;for(t in n){var i=n[t];"wysiwyg"!=i.mode||i.readOnly||((i=i.document.getBody()).setAttribute("contentEditable",!1),i.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(e){function t(){var t=c.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var r,a,s,l=e.lang,u=CKEDITOR.document,c=u.getWindow(),d=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var f=e.container.getFirst((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")})),h=e.ui.space("contents");if("wysiwyg"==e.mode){var g=e.getSelection();r=g&&g.getRanges(),a=c.getScrollPosition()}else{var p=e.editable().$;r=!CKEDITOR.env.ie&&[p.selectionStart,p.selectionEnd],a=[p.scrollLeft,p.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(c.on("resize",t),s=c.getScrollPosition(),g=e.container;g=g.getParent();)g.setCustomData("maximize_saved_styles",n(g)),g.setStyle("z-index",e.config.baseFloatZIndex-5);h.setCustomData("maximize_saved_styles",n(h,!0)),f.setCustomData("maximize_saved_styles",n(f,!0)),h={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},u.getDocumentElement().setStyles(h),!CKEDITOR.env.gecko&&u.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||u.getBody().setStyles(h),CKEDITOR.env.ie?setTimeout((function(){c.$.scrollTo(0,0)}),0):c.$.scrollTo(0,0),f.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),f.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),f.addClass("cke_maximized"),t(),h=f.getDocumentPosition(),f.setStyles({left:-1*h.x+"px",top:-1*h.y+"px"}),CKEDITOR.env.gecko&&o(e)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",t),g=[h,f];for(var m=0;m<g.length;m++)i(g[m],g[m].getCustomData("maximize_saved_styles")),g[m].removeCustomData("maximize_saved_styles");for(g=e.container;g=g.getParent();)i(g,g.getCustomData("maximize_saved_styles")),g.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout((function(){c.$.scrollTo(s.x,s.y)}),0):c.$.scrollTo(s.x,s.y),f.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(f.setStyle("display","inline"),setTimeout((function(){f.setStyle("display","block")}),0)),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:h.$.offsetHeight,outerWidth:e.container.$.offsetWidth})}this.toggleState(),(g=this.uiItems[0])&&(h=this.state==CKEDITOR.TRISTATE_OFF?l.maximize.maximize:l.maximize.minimize,(g=CKEDITOR.document.getById(g._.id)).getChild(1).setHtml(h),g.setAttribute("title",h),g.setAttribute("href",'javascript:void("'+h+'");')),"wysiwyg"==e.mode?r?(CKEDITOR.env.gecko&&o(e),e.getSelection().selectRanges(r),(p=e.getSelection().getStartElement())&&p.scrollIntoView(!0)):c.$.scrollTo(a.x,a.y):(r&&(p.selectionStart=r[0],p.selectionEnd=r[1]),p.scrollLeft=a[0],p.scrollTop=a[1]),r=a=null,d=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:l.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",(function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:d)}),null,null,100)}}})}(),CKEDITOR.plugins.add("newpage",{init:function(e){e.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(e){var t=this;e.setData(e.config.newpage_html||"",(function(){e.focus(),setTimeout((function(){e.fire("afterCommandExec",{name:"newpage",command:t}),e.selectionChange()}),200)}))},async:!0}),e.ui.addButton&&e.ui.addButton("NewPage",{label:e.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}}),function(){function e(e){return{"aria-label":e,class:"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:e}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var e=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+e+"}")},init:function(e){e.blockless||(e.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),e.ui.addButton&&e.ui.addButton("PageBreak",{label:e.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&e.on("contentDom",(function(){e.document.on("click",(function(t){(t=t.data.getTarget()).is("div")&&t.hasClass("cke_pagebreak")&&e.getSelection().selectElement(t)}))})))},afterInit:function(t){function n(n){CKEDITOR.tools.extend(n.attributes,e(t.lang.pagebreak.alt),!0),n.children.length=0}var i,o=(i=t.dataProcessor)&&i.dataFilter,r=/page-break-after\s*:\s*always/i,a=/display\s*:\s*none/i;(i=i&&i.htmlFilter)&&i.addRules({attributes:{class:function(e,t){var n=e.replace("cke_pagebreak","");if(n!=e){var i=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];t.children.length=0,t.add(i),delete(i=t.attributes)["aria-label"],delete i.contenteditable,delete i.title}return n}}},{applyToAll:!0,priority:5}),o&&o.addRules({elements:{div:function(e){if(e.attributes["data-cke-pagebreak"])n(e);else if(r.test(e.attributes.style)){var t=e.children[0];t&&"span"==t.name&&a.test(t.attributes.style)&&n(e)}}}})}}),CKEDITOR.plugins.pagebreakCmd={exec:function(e){e.insertElement(CKEDITOR.plugins.pagebreak.createElement(e))},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(e){return(e=e.parent)&&"div"==e.name&&e.styles&&e.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"},CKEDITOR.plugins.pagebreak={createElement:function(t){return t.document.createElement("div",{attributes:e(t.lang.pagebreak.alt)})}}}(),function(){var e={canUndo:!1,async:!0,exec:function(e,t){var n=e.lang,i=CKEDITOR.tools.keystrokeToString(n.common.keyboard,e.getCommandKeystroke(CKEDITOR.env.ie?e.commands.paste:this)),o=t&&void 0!==t.notification?t.notification:!t||!t.from||"keystrokeHandler"===t.from&&CKEDITOR.env.ie;n=o&&"string"==typeof o?o:n.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+i.aria+'">'+i.display+"</kbd>"),e.execCommand("paste",{type:"text",notification:!!o&&n})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){var n=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;t.addCommand("pastetext",e),t.setKeystroke(n,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(t,"PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",(function(e){"html"!=e.data.type&&(e.data.type="text")})),t.on("pasteState",(function(e){t.getCommand("pastetext").setState(e.data)}))}})}(),function(){function e(e,n){var i,o,r=0;if(!CKEDITOR.tools.array.isArray(e)||0===e.length)return!0;if(0<(i=CKEDITOR.tools.array.filter(e,(function(e){return-1===CKEDITOR.tools.array.indexOf(t,e)}))).length)for(o=0;o<i.length;o++)!function(e){CKEDITOR.scriptLoader.queue(e,(function(o){o&&t.push(e),++r===i.length&&n()}))}(i[o]);return 0===i.length}var t=[],n=CKEDITOR.tools.createClass({$:function(){this.handlers=[]},proto:{register:function(e){"number"!=typeof e.priority&&(e.priority=10),this.handlers.push(e)},addPasteListener:function(t){t.on("paste",(function(n){var i=function(e,t){return CKEDITOR.tools.array.filter(e,(function(e){return e.canHandle(t)})).sort((function(e,t){return e.priority===t.priority?0:e.priority-t.priority}))}(this.handlers,n);if(0!==i.length){if(!e(function(e){var t=CKEDITOR.tools.array.reduce(e,(function(e,t){return CKEDITOR.tools.array.isArray(t.filters)?e.concat(t.filters):e}),[]);return CKEDITOR.tools.array.filter(t,(function(e,n){return CKEDITOR.tools.array.indexOf(t,e)===n}))}(i),(function(){return t.fire("paste",n.data)})))return n.cancel();!function e(t,n){var i=t.shift();i&&i.handle(n,(function(){e(t,n)}))}(i,n)}}),this,null,3)}}});CKEDITOR.plugins.add("pastetools",{requires:"clipboard",beforeInit:function(e){e.pasteTools=new n,e.pasteTools.addPasteListener(e)}}),CKEDITOR.plugins.pastetools={filters:{},loadFilters:e,createFilter:function(e){var t=CKEDITOR.tools.array.isArray(e.rules)?e.rules:[e.rules],n=e.additionalTransforms;return function(e,i){var o,r=new CKEDITOR.htmlParser.basicWriter,a=new CKEDITOR.htmlParser.filter;return n&&(e=n(e,i)),CKEDITOR.tools.array.forEach(t,(function(t){a.addRules(t(e,i,a))})),o=CKEDITOR.htmlParser.fragment.fromHtml(e),a.applyTo(o),o.writeHtml(r),r.getHtml()}},getClipboardData:function(e,t){var n;return CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"text/html"===t?(n=e.dataTransfer.getData(t,!0))||"text/html"!==t?n:e.dataValue:null},getConfigValue:function(e,t){if(e&&e.config){var n=CKEDITOR.tools,i=e.config,o=n.object.keys(i),r=["pasteTools_"+t,"pasteFromWord_"+t,"pasteFromWord"+n.capitalize(t,!0)];return i[r=n.array.find(r,(function(e){return-1!==n.array.indexOf(o,e)}))]}}},CKEDITOR.pasteFilters={}}(),CKEDITOR.plugins.add("pastefromgdocs",{requires:"pastetools",init:function(e){var t=CKEDITOR.plugins.getPath("pastetools"),n=this.path;e.pasteTools.register({filters:[CKEDITOR.getUrl(t+"filter/common.js"),CKEDITOR.getUrl(n+"filter/default.js")],canHandle:function(e){return/id=(\"|\')?docs\-internal\-guid\-/.test(e.data.dataValue)},handle:function(t,n){var i=t.data,o=CKEDITOR.plugins.pastetools.getClipboardData(i,"text/html");i.dontFilter=!0,i.dataValue=CKEDITOR.pasteFilters.gdocs(o,e),!0===e.config.forcePasteAsPlainText&&(i.type="text"),n()}})}}),CKEDITOR.plugins.add("pastefromword",{requires:"pastetools",init:function(e){var t=0,n=CKEDITOR.plugins.getPath("pastetools"),i=this.path,o=void 0===e.config.pasteFromWord_inlineImages||e.config.pasteFromWord_inlineImages;n=[CKEDITOR.getUrl(n+"filter/common.js"),CKEDITOR.getUrl(i+"filter/default.js")],e.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e,n){t=1,e.execCommand("paste",{type:"html",notification:!n||void 0===n.notification||n.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(e,"PasteFromWord",{label:e.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),e.pasteTools.register({filters:e.config.pasteFromWordCleanupFile?[e.config.pasteFromWordCleanupFile]:n,canHandle:function(e){var n=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/;return n=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(e=e.data.dataValue)||n.test(e),e&&(t||n)},handle:function(n,i){var o=n.data,r=CKEDITOR.plugins.pastetools.getClipboardData(o,"text/html"),a=CKEDITOR.plugins.pastetools.getClipboardData(o,"text/rtf");(!1!==e.fire("pasteFromWord",r={dataValue:r,dataTransfer:{"text/rtf":a}})||t)&&(o.dontFilter=!0,(t||!e.config.pasteFromWordPromptCleanup||confirm(e.lang.pastefromword.confirmCleanup))&&(r.dataValue=CKEDITOR.cleanWord(r.dataValue,e),e.fire("afterPasteFromWord",r),o.dataValue=r.dataValue,!0===e.config.forcePasteAsPlainText?o.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==e.config.forcePasteAsPlainText||(o.type="html")),t=0,i())}}),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&o&&e.on("afterPasteFromWord",(function(e){var t,n=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,i=[];if(n&&e.editor.filter.check("img[src]")&&0!==(t=n.extractTagsFromHtml(e.data.dataValue)).length&&0!==(n=n.extractFromRtf(e.data.dataTransfer["text/rtf"])).length&&(CKEDITOR.tools.array.forEach(n,(function(e){i.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)}),this),t.length===i.length))for(n=0;n<t.length;n++)0===t[n].indexOf("file://")&&i[n]&&(e.data.dataValue=e.data.dataValue.replace(t[n],i[n]))}))}}),o={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(e){var t,n,r=(a=e.config).baseHref?'<base href="'+a.baseHref+'"/>':"";if(a.fullPage)t=e.getData().replace(/<head>/,"$&"+r).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+e.lang.preview.preview);else{var a="<body ";(l=e.document&&e.document.getBody())&&(l.getAttribute("id")&&(a+='id="'+l.getAttribute("id")+'" '),l.getAttribute("class")&&(a+='class="'+l.getAttribute("class")+'" ')),a+=">",t=e.config.docType+'<html dir="'+e.config.contentsLangDirection+'"><head>'+r+"<title>"+e.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(e.config.contentsCss)+"</head>"+a+e.getData()+"</body></html>"}r=640,a=420,l=80;try{var s=window.screen,l=(r=Math.round(.8*s.width),a=Math.round(.7*s.height),Math.round(.1*s.width))}catch(o){}return!1!==e.fire("contentPreview",e={dataValue:t})&&(s="",CKEDITOR.env.ie&&(window._cke_htmlToLoad=e.dataValue,n="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",s=""),CKEDITOR.env.gecko&&(window._cke_htmlToLoad=e.dataValue,s=CKEDITOR.getUrl(i+"preview.html")),s=window.open(s,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+r+",height="+a+",left="+l),CKEDITOR.env.ie&&s&&(s.location=n),CKEDITOR.env.ie||CKEDITOR.env.gecko||((n=s.document).open(),n.write(e.dataValue),n.close()),!0)}},CKEDITOR.plugins.add("preview",{init:function(e){e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(i=this.path,e.addCommand("preview",o),e.ui.addButton&&e.ui.addButton("Preview",{label:e.lang.preview.preview,command:"preview",toolbar:"document,40"}))}}),CKEDITOR.plugins.add("print",{init:function(e){e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(e.addCommand("print",CKEDITOR.plugins.print),e.ui.addButton&&e.ui.addButton("Print",{label:e.lang.print.toolbar,command:"print",toolbar:"document,50"}))}}),CKEDITOR.plugins.print={exec:function(e){CKEDITOR.env.gecko?e.window.$.print():e.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}},CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,n=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),i=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),o=CKEDITOR.plugins.removeformat.filter,r=e.getSelection().getRanges().createIterator(),a=function(e){return e.type==CKEDITOR.NODE_ELEMENT},s=[];t=r.getNextRange();){var l=t.createBookmark();(t=e.createRange()).setStartBefore(l.startNode),l.endNode&&t.setEndAfter(l.endNode),t.collapsed||t.enlarge(CKEDITOR.ENLARGE_ELEMENT);var u=t.createBookmark(),c=u.startNode,d=u.endNode,f=function(t){for(var i,r=e.elementPath(t),a=r.elements,s=1;(i=a[s])&&!i.equals(r.block)&&!i.equals(r.blockLimit);s++)n.test(i.getName())&&o(e,i)&&t.breakParent(i)};if(f(c),d)for(f(d),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(d);)if(c.isReadOnly()){if(c.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(a)}else f=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||c.hasAttribute("data-cke-bookmark")||!o(e,c)||(n.test(c.getName())?c.remove(1):(c.removeAttributes(i),e.fire("removeFormatCleanup",c))),c=f;u.startNode.remove(),u.endNode&&u.endNode.remove(),t.moveToBookmark(l),s.push(t)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(s)}}},filter:function(e,t){for(var n=e._.removeFormatFilters||[],i=0;i<n.length;i++)if(!1===n[i](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){var e={readOnly:1,modes:{wysiwyg:1,source:1},exec:function(t){if(t.fire("save")&&(t=t.element.$.form))try{t.submit()}catch(e){t.submit.click&&t.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(t){t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.addCommand("save",e).startDisabled=!t.element.$.form,t.ui.addButton&&t.ui.addButton("Save",{label:t.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})}(),CKEDITOR.plugins.add("selectall",{init:function(e){e.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(e){var t=e.editable();if(t.is("textarea"))e=t.$,CKEDITOR.env.ie&&e.createTextRange?e.createTextRange().execCommand("SelectAll"):(e.selectionStart=0,e.selectionEnd=e.value.length),e.focus();else{if(t.is("body"))e.document.$.execCommand("SelectAll",!1,null);else{var n=e.createRange();n.selectNodeContents(t),n.select()}e.forceNextSelectionCheck(),e.selectionChange()}},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SelectAll",{label:e.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}}),function(){var e={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state!=CKEDITOR.TRISTATE_ON||e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!e.focusManager.hasFocus?"removeClass":"attachClass";e.editable()[t]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var e,t,n,i,o,r,a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),s=CKEDITOR.getUrl(this.path),l=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),u=l?":not([contenteditable=false]):not(.cke_show_blocks_off)":"";for(e=t=n=i="";o=a.pop();)e+=".cke_show_blocks "+o+u+(r=a.length?",":""),n+=".cke_show_blocks.cke_contents_ltr "+o+u+r,i+=".cke_show_blocks.cke_contents_rtl "+o+u+r,t+=".cke_show_blocks "+o+u+"{background-image:url("+CKEDITOR.getUrl(s+"images/block_"+o+".png")+")}";CKEDITOR.addCss((e+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(t,n+"{background-position:top left;padding-left:8px}",i+"{background-position:top right;padding-right:8px}")),l||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(t){function n(){i.refresh(t)}if(!t.blockless){var i=t.addCommand("showblocks",e);i.canUndo=!1,t.config.startupOutlineBlocks&&i.setState(CKEDITOR.TRISTATE_ON),t.ui.addButton&&t.ui.addButton("ShowBlocks",{label:t.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"}),t.on("mode",(function(){i.state!=CKEDITOR.TRISTATE_DISABLED&&i.refresh(t)})),t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(t.on("focus",n),t.on("blur",n)),t.on("contentDom",(function(){i.state!=CKEDITOR.TRISTATE_DISABLED&&i.refresh(t)}))}}})}(),function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";e.editable()[t]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var e;e=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(e)},init:function(t){var n=t.addCommand("showborders",e);n.canUndo=!1,!1!==t.config.startupShowBorders&&n.setState(CKEDITOR.TRISTATE_ON),t.on("mode",(function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)}),null,null,100),t.on("contentDom",(function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)})),t.on("removeFormatCleanup",(function(e){e=e.data,t.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&e.is("table")&&(!e.hasAttribute("border")||0>=parseInt(e.getAttribute("border"),10))&&e.addClass("cke_show_border")}))},afterInit:function(e){var t=e.dataProcessor;e=t&&t.dataFilter,t=t&&t.htmlFilter,e&&e.addRules({elements:{table:function(e){var t=(e=e.attributes).class,n=parseInt(e.border,10);n&&!(0>=n)||t&&-1!=t.indexOf("cke_show_border")||(e.class=(t||"")+" cke_show_border")}}}),t&&t.addRules({elements:{table:function(e){var t=(e=e.attributes).class;t&&(e.class=t.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",(function(e){var t=e.data.name;"table"!=t&&"tableProperties"!=t||((t=(e=e.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(t.commit,(function(e){return function(t,n){e.apply(this,arguments);var i=parseInt(this.getValue(),10);n[!i||0>=i?"addClass":"removeClass"]("cke_show_border")}})),(e=(e=e.getContents("advanced"))&&e.get("advCSSClasses"))&&(e.setup=CKEDITOR.tools.override(e.setup,(function(e){return function(){e.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}})),e.commit=CKEDITOR.tools.override(e.commit,(function(e){return function(t,n){e.apply(this,arguments),parseInt(n.getAttribute("border"),10)||n.addClass("cke_show_border")}}))))}))}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function n(){var e=o&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),e&&this.focus()}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var i=CKEDITOR.plugins.sourcearea;t.addMode("source",(function(i){var o=t.ui.space("contents").getDocument().createElement("textarea");o.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),o.setAttribute("dir","ltr"),o.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),t.ui.space("contents").append(o),(o=t.editable(new e(t,o))).setData(t.getData(1)),CKEDITOR.env.ie&&(o.attachListener(t,"resize",n,o),o.attachListener(CKEDITOR.document.getWindow(),"resize",n,o),CKEDITOR.tools.setTimeout(n,0,o)),t.fire("ariaWidget",this),i()})),t.addCommand("source",i.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",(function(){t.getCommand("source").setState("source"==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}));var o=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var n=t.availableLangs[n=e.langCode]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),(function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[n]),e.openDialog("specialchar")}))},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")),CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"dialogs/dialog.css"))},init:function(e){var t=this,n=CKEDITOR.plugins.scayt;this.bindEvents(e),this.parseConfig(e),this.addRule(e),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(e);var i=e.lang.scayt,o=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:i.text_title,title:e.plugins.wsc?e.lang.wsc.title:i.text_title,modes:{wysiwyg:!(o.ie&&(8>o.version||o.quirks))},toolbar:"spellchecker,20",refresh:function(){var t=e.ui.instances.Scayt.getState();e.scayt&&(t=n.state.scayt[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.fire("scaytButtonState",t)},onRender:function(){var t=this;e.on("scaytButtonState",(function(e){void 0!==typeof e.data&&t.setState(e.data)}))},onMenu:function(){var t=e.scayt;e.getMenuItem("scaytToggle").label=e.lang.scayt[t&&n.state.scayt[e.name]?"btn_disable":"btn_enable"];var i={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return e.config.scayt_uiTabs[0]||delete i.scaytOptions,e.config.scayt_uiTabs[1]||delete i.scaytLangs,e.config.scayt_uiTabs[2]||delete i.scaytDict,t&&!CKEDITOR.plugins.scayt.isNewUdSupported(t)&&(delete i.scaytDict,e.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),i}}),e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener((function(n,i){var o,r,a=e.scayt;return a&&(r=a.getSelectionNode())&&(o=t.menuGenerator(e,r),a.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" ."))),o})),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,(function(t){return function(){var n=e.scayt;return n&&n.hideBanner(),t.apply(this)}})))},addMenuItems:function(e){var t=this,n=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");for(var i=e.config.scayt_contextMenuItemsOrder.split("|"),o=0;o<i.length;o++)i[o]="scayt_"+i[o];if((i=["grayt_description","grayt_suggest","grayt_control"].concat(i))&&i.length)for(o=0;o<i.length;o++)e.addMenuGroup(i[o],o-10);e.addCommand("scaytToggle",{exec:function(e){var t=e.scayt;n.state.scayt[e.name]=!n.state.scayt[e.name],!0===n.state.scayt[e.name]?t||n.createScayt(e):t&&n.destroy(e)}}),e.addCommand("scaytAbout",{exec:function(e){e.scayt.tabToOpen="about",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytOptions",{exec:function(e){e.scayt.tabToOpen="options",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytLangs",{exec:function(e){e.scayt.tabToOpen="langs",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytDict",{exec:function(e){e.scayt.tabToOpen="dictionaries",n.openDialog(t.dialogName,e)}}),i={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(i.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,n=e.scayt,i=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(i=i.replace(/\s/g,""))?(n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(i)},bindEvents:function(e){var t=CKEDITOR.plugins.scayt,n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,i=function(){t.destroy(e)},o=function(){!t.state.scayt[e.name]||e.readOnly||e.scayt||t.createScayt(e)},r=function(){n?e.config.scayt_inlineModeImmediateMarkup?o():(e.on("blur",(function(){setTimeout(i,0)})),e.on("focus",o),e.focusManager.hasFocus&&o()):o(),function(){var t=e.editable();t.attachListener(t,"focus",(function(t){var i,r;if(CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(o,0),t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.name]&&e.scayt,(n||t)&&e._.savedSelection){t=!(t=e._.savedSelection.getSelectedElement())&&e._.savedSelection.getRanges();for(var a=0;a<t.length;a++)"string"==typeof(r=t[a]).startContainer.$.nodeValue&&((i=r.startContainer.getText().length)<r.startOffset||i<r.endOffset)&&e.unlockSelection(!1)}}),this,null,-10)}();var t=e.editable();t.attachListener(t,"mousedown",(function(t){t=t.data.getTarget();var n=e.widgets&&e.widgets.getByElement(t);n&&(n.wrapper=t.getAscendant((function(e){return e.hasAttribute("data-cke-widget-wrapper")}),!0))}),this,null,-10)};e.on("contentDom",r),e.on("beforeCommandExec",(function(n){var i=e.scayt,o=!1,r=!1,a=!0;n.data.name in t.options.disablingCommandExec&&"wysiwyg"==e.mode?i&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==n.data.name&&"italic"!==n.data.name&&"underline"!==n.data.name&&"strike"!==n.data.name&&"subscript"!==n.data.name&&"superscript"!==n.data.name&&"enter"!==n.data.name&&"cut"!==n.data.name&&"language"!==n.data.name||!i||("cut"===n.data.name&&(a=!1,r=!0),"language"===n.data.name&&(r=o=!0),e.fire("reloadMarkupScayt",{removeOptions:{removeInside:a,forceBookmark:r,language:o},timeout:0}))})),e.on("beforeSetMode",(function(n){"source"==n.data&&((n=e.scayt)&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),e.document&&e.document.getBody().removeAttribute("_jquid"))})),e.on("afterCommandExec",(function(n){"wysiwyg"!=e.mode||"undo"!=n.data.name&&"redo"!=n.data.name||setTimeout((function(){t.reloadMarkup(e.scayt)}),250)})),e.on("readOnly",(function(n){var i;n&&(i=e.scayt,!0===n.editor.readOnly?i&&i.fire("removeMarkupInDocument",{}):i?t.reloadMarkup(i):"wysiwyg"==n.editor.mode&&!0===t.state.scayt[n.editor.name]&&(t.createScayt(e),n.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))})),e.on("beforeDestroy",i),e.on("setData",(function(){i(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&r()}),this,null,50),e.on("reloadMarkupScayt",(function(n){var i=n.data&&n.data.removeOptions,o=n.data&&n.data.language,r=e.scayt;r&&setTimeout((function(){o&&(i.selectionNode=e.plugins.language.getCurrentLangElement(e),i.selectionNode=i.selectionNode&&i.selectionNode.$||null),r.removeMarkupInSelectionNode(i),t.reloadMarkup(r)}),n.data&&n.data.timeout||0)})),e.on("insertElement",(function(){e.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})}),this,null,50),e.on("insertHtml",(function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")}),this,null,50),e.on("insertText",(function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")}),this,null,50),e.on("scaytDialogShown",(function(t){t.data.selectPage(e.scayt.tabToOpen)}))},parseConfig:function(e){if((i=CKEDITOR.plugins.scayt).replaceOldOptionsNames(e.config),"boolean"!=typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1),i.state.scayt[e.name]=e.config.scayt_autoStartup,"boolean"!=typeof e.config.grayt_autoStartup&&(e.config.grayt_autoStartup=!1),"boolean"!=typeof e.config.scayt_inlineModeImmediateMarkup&&(e.config.scayt_inlineModeImmediateMarkup=!1),i.state.grayt[e.name]=e.config.grayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US"),(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions)&&(e.config.scayt_maxSuggestions=3),(void 0===e.config.scayt_minWordLength||"number"!=typeof e.config.scayt_minWordLength||1>e.config.scayt_minWordLength)&&(e.config.scayt_minWordLength=3),void 0!==e.config.scayt_customDictionaryIds&&"string"==typeof e.config.scayt_customDictionaryIds||(e.config.scayt_customDictionaryIds=""),void 0!==e.config.scayt_userDictionaryName&&"string"==typeof e.config.scayt_userDictionaryName||(e.config.scayt_userDictionaryName=null),"string"==typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var t=[],n=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,(function(e){1===Number(e)||0===Number(e)?(n.push(!0),t.push(Number(e))):n.push(!1)})),e.config.scayt_uiTabs=null===CKEDITOR.tools.search(n,!1)?t:[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];if("string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null),"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null),"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null),"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),"string"!=typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof e.config.scayt_customPunctuation&&(e.config.scayt_customPunctuation="-"),"string"!=typeof e.config.scayt_srcUrl&&(i=-1!=(i=document.location.protocol).search(/https?:/)?i:"http:",e.config.scayt_srcUrl=i+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof e.config.scayt_multiLanguageMode&&(e.config.scayt_multiLanguageMode=!1),"object"!=typeof e.config.scayt_multiLanguageStyles&&(e.config.scayt_multiLanguageStyles={}),e.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof e.config.scayt_ignoreAllCapsWords&&(e.config.scayt_ignoreAllCapsWords=!1),e.config.scayt_ignoreDomainNames&&"boolean"!=typeof e.config.scayt_ignoreDomainNames&&(e.config.scayt_ignoreDomainNames=!1),e.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof e.config.scayt_ignoreWordsWithMixedCases&&(e.config.scayt_ignoreWordsWithMixedCases=!1),e.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof e.config.scayt_ignoreWordsWithNumbers&&(e.config.scayt_ignoreWordsWithNumbers=!1),e.config.scayt_disableOptionsStorage){var i=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:"string"==typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,o="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),r=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],a=CKEDITOR.tools.search,s=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=!!a(e,"options");if(!a(o,n)||i&&a(r,(function(e){if("lang"===e)return!1})))return;if(a(r,n)&&r.splice(s(r,n),1),"all"===n||i&&a(e,"lang"))return[];"options"===n&&(r=["lang"])}return[].concat(r)}(i)}e.config.scayt_disableCache&&"boolean"!=typeof e.config.scayt_disableCache&&(e.config.scayt_disableCache=!1),(void 0===e.config.scayt_cacheSize||"number"!=typeof e.config.scayt_cacheSize||1>e.config.scayt_cacheSize)&&(e.config.scayt_cacheSize=4e3)},addRule:function(e){var t=CKEDITOR.plugins.scayt,n=(o=e.dataProcessor)&&o.htmlFilter,i=e._.elementsPath&&e._.elementsPath.filters,o=o&&o.dataFilter,r=e.addRemoveFormatFilter;i&&i.push((function(n){if(e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute)))return!1})),o&&o.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],i=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(n||i)&&delete e.name,e}}}),n&&n.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],i=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(n||i)&&delete e.name,e}}}),r&&r.call(e,(function(n){var i=!0;return e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute))&&(i=!1),i}))},scaytMenuDefinition:function(e){var t=this,n=CKEDITOR.plugins.scayt;return{scayt:{scayt_ignore:{label:(e=e.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(e){e.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(e){e.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(e){var t=e.scayt;setTimeout((function(){t.addWordToUserDictionary()}),10)}},scayt_option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(e){e.scayt.tabToOpen="options",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[0]}},scayt_language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(e){e.scayt.tabToOpen="langs",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[1]}},scayt_dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(e){e.scayt.tabToOpen="dictionaries",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[2]}},scayt_about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(e){e.scayt.tabToOpen="about",n.openDialog(t.dialogName,e)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(e){}},grayt_ignore:{label:e.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(e){e.scayt.ignorePhrase()}},grayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(e){e.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(e,t,n){var i={},o={},r=n?"word":"phrase",a=n?"startGrammarCheck":"startSpellCheck",s=e.scayt;if(0<t.length&&"no_any_suggestions"!==t[0])if(n)for(n=0;n<t.length;n++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_");e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,a)),n<e.config.scayt_maxSuggestions?(e.addMenuItem(l,{label:t[n],command:l,group:"scayt_suggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(l,{label:t[n],command:l,group:"scayt_moresuggest",order:n+1}),o[l]=CKEDITOR.TRISTATE_OFF,"on"===e.config.scayt_moreSuggestions&&(e.addMenuItem("scayt_moresuggest",{label:s.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return o}}),i.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(n=0;n<t.length;n++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_"),e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,a)),e.addMenuItem(l,{label:t[n],command:l,group:"grayt_suggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF;else i.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:s.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return i},menuGenerator:function(e,t){var n,i,o,r,a=e.scayt,s=this.scaytMenuDefinition(e),l={},u=e.config.scayt_contextCommands.split("|"),c=t.getAttribute(a.getLangAttribute())||a.getLang();if(i=a.isScaytNode(t),o=a.isGraytNode(t),i?(s=s.scayt,n=t.getAttribute(a.getScaytNodeAttributeName()),a.fire("getSuggestionsList",{lang:c,word:n}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,i)):o&&(s=s.grayt,l=t.getAttribute(a.getGraytNodeAttributeName()),a.getGraytNodeRuleAttributeName?(n=t.getAttribute(a.getGraytNodeRuleAttributeName()),a.getProblemDescriptionText(l,n,c)):a.getProblemDescriptionText(l,c),r=a.getProblemDescriptionText(l,n,c),s.grayt_problemdescription&&r&&(r=r.replace(/([.!?])\s/g,"$1<br>"),s.grayt_problemdescription.label=r),a.fire("getGrammarSuggestionsList",{lang:c,phrase:l,rule:n}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,i)),i&&"off"==e.config.scayt_contextCommands)return l;for(var d in s)i&&-1==CKEDITOR.tools.indexOf(u,d.replace("scayt_",""))&&"all"!=e.config.scayt_contextCommands||o&&"grayt_problemdescription"!==d&&-1==CKEDITOR.tools.indexOf(u,d.replace("grayt_",""))&&"all"!=e.config.scayt_contextCommands||(l[d]=void 0!==s[d].state?s[d].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof s[d].verification||s[d].verification(e)||delete l[d],e.addCommand(d,{exec:s[d].exec}),e.addMenuItem(d,{label:e.lang.scayt[s[d].label]||s[d].label,command:d,group:s[d].group,order:s[d].order}));return l},createCommand:function(e,t,n){return{exec:function(i){i=i.scayt;var o={};o[t]=e,i.replaceSelectionNode(o),"startGrammarCheck"===n&&i.removeMarkupInSelectionNode({grammarOnly:!0}),i.fire(n)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var e;if(n=(n=CKEDITOR.version.match(/^\d(\.\d*)*/))&&n[0]){e="4.5.7";var t,n=n.replace(/\./g,"");e=e.replace(/\./g,""),t=0<=(t=n.length-e.length)?t:0,e=parseInt(n)>=parseInt(e)*Math.pow(10,t)}return e?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(e,t){var n=t.scayt;n.isAllModulesReady&&!1===n.isAllModulesReady()||(t.lockSelection(),t.openDialog(e))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(e){return!!e.getUserDictionary},reloadMarkup:function(e){var t;e&&(t=e.getScaytLangList(),e.reloadMarkup?e.reloadMarkup():(this.alarmCompatibilityMessage(),t&&t.ltr&&t.rtl&&e.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(e){for(var t in e)t in this.backCompatibilityMap&&(e[this.backCompatibilityMap[t]]=e[t],delete e[t])},createScayt:function(e){var t=this,n=CKEDITOR.plugins.scayt;this.loadScaytLibrary(e,(function(e){function i(e){return new SCAYT.CKSCAYT(e,(function(){}),(function(){}))}var r;if(e.window&&(r="BODY"==e.editable().$.nodeName?e.window.getFrame():e.editable()),r){var a;r={lang:e.config.scayt_sLang,container:r.$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,customPunctuation:e.config.scayt_customPunctuation,debug:e.config.scayt_debug,data_attribute_name:t.options.data_attribute_name,misspelled_word_class:t.options.misspelled_word_class,problem_grammar_data_attribute:t.options.problem_grammar_data_attribute,problem_grammar_class:t.options.problem_grammar_class,"options-to-restore":e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:e.config.grayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength,multiLanguageMode:e.config.scayt_multiLanguageMode,multiLanguageStyles:e.config.scayt_multiLanguageStyles,graytAutoStartup:e.config.grayt_autoStartup,disableCache:e.config.scayt_disableCache,cacheSize:e.config.scayt_cacheSize,charsToObserve:n.charsToObserve},e.config.scayt_serviceProtocol&&(r.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(r.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(r.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(r.service_path=e.config.scayt_servicePath),"boolean"==typeof e.config.scayt_ignoreAllCapsWords&&(r["ignore-all-caps-words"]=e.config.scayt_ignoreAllCapsWords),"boolean"==typeof e.config.scayt_ignoreDomainNames&&(r["ignore-domain-names"]=e.config.scayt_ignoreDomainNames),"boolean"==typeof e.config.scayt_ignoreWordsWithMixedCases&&(r["ignore-words-with-mixed-cases"]=e.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof e.config.scayt_ignoreWordsWithNumbers&&(r["ignore-words-with-numbers"]=e.config.scayt_ignoreWordsWithNumbers);try{a=i(r)}catch(o){t.alarmCompatibilityMessage(),delete r.charsToObserve,a=i(r)}a.subscribe("suggestionListSend",(function(e){for(var t={},n=[],i=0;i<e.suggestionList.length;i++)t["word_"+e.suggestionList[i]]||(t["word_"+e.suggestionList[i]]=e.suggestionList[i],n.push(e.suggestionList[i]));CKEDITOR.plugins.scayt.suggestions=n})),a.subscribe("selectionIsChanged",(function(t){e.getSelection().isLocked&&"restoreSelection"!==t.action&&e.lockSelection(),"restoreSelection"===t.action&&e.selectionChange(!0)})),a.subscribe("graytStateChanged",(function(t){n.state.grayt[e.name]=t.state})),a.addMarkupHandler&&a.addMarkupHandler((function(t){var n=e.editable(),i=n.getCustomData(t.charName);i&&(i.$=t.node,n.setCustomData(t.charName,i))})),e.scayt=a,e.fire("scaytButtonState",e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else n.state.scayt[e.name]=!1}))},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,t){var n=function(){CKEDITOR.fireOnce("scaytReady"),e.scayt||"function"==typeof t&&t(e)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?CKEDITOR.scriptLoader.load(e.config.scayt_srcUrl,(function(e){e&&n()})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&n()}},CKEDITOR.on("dialogDefinition",(function(e){var t=e.data.name;e=e.data.definition.dialog,"scaytDialog"!==t&&"checkspell"!==t&&(e.on("show",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0)})),e.on("hide",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1)}))),"scaytDialog"===t&&e.on("cancel",(function(e){return!1}),this,null,-1),"checkspell"===t&&e.on("cancel",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1),e.unlockSelection()}),this,null,-2),"link"===t&&e.on("ok",(function(e){var t=e.sender&&e.sender.getParentEditor();t&&setTimeout((function(){t.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})}),0)})),"replace"===t&&e.on("hide",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;e&&setTimeout((function(){n&&(n.fire("removeMarkupInDocument",{}),t.reloadMarkup(n))}),0)}))})),CKEDITOR.on("scaytReady",(function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty&&((e=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(e.checkDirty,(function(e){return function(){var t=null,n=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(t="ready"==this.status){var i=n.removeMarkupFromString(this.getSnapshot());n=n.removeMarkupFromString(this._.previousValue),t=t&&n!==i}}else t=e.call(this);return t}})),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,(function(e){return function(){CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=this.scayt.removeMarkupFromString(this.getSnapshot()):e.call(this)}}))),!0===CKEDITOR.config.scayt_handleUndoRedo){var e,t="function"==typeof(e=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";e[t]=CKEDITOR.tools.override(e[t],(function(e){return function(t){var n=t.editor.scayt,i=this.contents,o=t.contents,r=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.editor.name]&&t.editor.scayt&&(this.contents=n.removeMarkupFromString(i)||"",t.contents=n.removeMarkupFromString(o)||""),r=e.apply(this,arguments),this.contents=i,t.contents=o,r}}))}})),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,n=e.lang.stylescombo,i={},o=[],r=[];e.on("stylesSet",(function(n){if(n=n.data.styles){for(var a,s,l,u=0,c=n.length;u<c;u++)a=n[u],e.blockless&&a.element in CKEDITOR.dtd.$block||"string"==typeof a.type&&!CKEDITOR.style.customHandlers[a.type]||(s=a.name,a=new CKEDITOR.style(a),e.filter.customConfig&&!e.filter.check(a))||(a._name=s,a._.enterMode=t.enterMode,a._.type=l=a.assignedTo||a.type,a._.weight=u+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),i[s]=a,o.push(a),r.push(a));o.sort((function(e,t){return e._.weight-t._.weight}))}})),e.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var e,t,i,r,a,s;for(a=0,s=o.length;a<s;a++)t=(e=o[a])._name,(r=e._.type)!=i&&(this.startGroup(n["panelTitle"+String(r)]),i=r),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=i[t];var n=e.elementPath();t.group&&t.removeStylesFromSameGroup(e)?e.applyStyle(t):e[t.checkActive(n,e)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",(function(t){for(var n,o=this.getValue(),r=0,a=(t=t.data.path.elements).length;r<a;r++)for(var s in n=t[r],i)if(i[s].checkElementRemovable(n,!0,e))return void(s!=o&&this.setValue(s));this.setValue("")}),this)},onOpen:function(){var t=(t=e.getSelection()).getSelectedElement()||t.getStartElement()||e.editable(),o=(t=e.elementPath(t),[0,0,0,0]);for(var r in this.showAll(),this.unmarkAll(),i){var a=i[r],s=a._.type;a.checkApplicable(t,e,e.activeFilter)?o[s]++:this.hideItem(r),a.checkActive(t,e)&&this.mark(r)}o[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),o[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),o[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var t=e.elementPath();if(t){for(var n in i)if(i[n].checkApplicable(t,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){i={},o=[]}})}}),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var n,i=t.getSelection();if(n=new CKEDITOR.dom.elementPath(i.getCommonAncestor(),i.root).contains({td:1,th:1},1)){if(i=t.createRange(),(r=CKEDITOR.tools.tryThese((function(){return n.getParent().$.cells[n.$.cellIndex+(e?-1:1)]}),(function(){var t;return(t=(t=n.getParent()).getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)]).cells[e?t.cells.length-1:0]})))||e){if(!r)return!0;r=new CKEDITOR.dom.element(r),i.moveToElementEditStart(r),i.checkStartOfBlock()&&i.checkEndOfBlock()||i.selectNodeContents(r)}else{for(var o=n.getAscendant("table").$,r=n.getParent().$.cells,a=(o=new CKEDITOR.dom.element(o.insertRow(-1),t.document),0),s=r.length;a<s;a++)o.append(new CKEDITOR.dom.element(r[a],t.document).clone(!1,!1)).appendBogus();i.moveToElementEditStart(o)}return i.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},i={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(o){for(var r=!1!==o.config.enableTabKeyTools,a=o.config.tabSpaces||0,s="";a--;)s+=" ";s&&o.on("key",(function(e){9==e.data.keyCode&&(o.insertText(s),e.cancel())})),r&&o.on("key",(function(e){(9==e.data.keyCode&&o.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&o.execCommand("selectPreviousCell"))&&e.cancel()})),o.addCommand("blur",CKEDITOR.tools.extend(n,t)),o.addCommand("blurBack",CKEDITOR.tools.extend(i,t)),o.addCommand("selectNextCell",e()),o.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var n,i,o,r,a,s,l=void 0===t?this.getTabIndex():t;if(0>=l)for(a=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);a;){if(a.isVisible()&&0===a.getTabIndex()){o=a;break}a=a.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(a=this.getDocument().getBody().getFirst();a=a.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&a.equals(this)){if(i=!0,e){if(!(a=a.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(a)&&(n=1);if(a.isVisible()&&!(0>(s=a.getTabIndex()))){if(n&&s==l){o=a;break}s>l&&(!o||!r||s<r)?(o=a,r=s):o||0!==s||(o=a,r=s)}}o&&o.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var n,i,o,r,a=void 0===t?this.getTabIndex():t,s=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&l.equals(this)){if(i=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(l)&&(n=1);if(l.isVisible()&&!(0>(r=l.getTabIndex())))if(0>=a){if(n&&0===r){o=l;break}r>s&&(o=l,s=r)}else{if(n&&r==a){o=l;break}r<a&&(!o||r>s)&&(o=l,s=r)}}o&&o.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var n=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height,border-collapse}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];td{border*,background-color,vertical-align,width,height}[colspan,rowspan];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(e){if(e.styles){var t;if(e.styles.border)t=CKEDITOR.tools.style.parse.border(e.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var n=e.styles;n["border-left"]&&n["border-left"]===n["border-right"]&&n["border-right"]===n["border-top"]&&n["border-top"]===n["border-bottom"]&&(t=CKEDITOR.tools.style.parse.border(n["border-top"]))}t&&t.style&&"solid"===t.style&&t.width&&0!==parseFloat(t.width)&&(e.attributes.border=1),"collapse"==e.styles["border-collapse"]&&(e.attributes.cellspacing=0)}}}]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var n=t.getParent(),i=e.editable();1!=n.getChildCount()||n.is("td","th")||n.equals(i)||(t=n),(e=e.createRange()).moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",(function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")})),e.contextMenu&&e.contextMenu.addListener((function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}}))}}}),function(){function e(e,t){function n(e){return!t||t.contains(e)&&e.getAscendant("table",!0).equals(t)}function i(e){0<o.length||e.type!=CKEDITOR.NODE_ELEMENT||!d.test(e.getName())||e.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(r,e,"selected_cell",!0),o.push(e))}var o=[],r={};if(!e)return o;for(var a=e.getRanges(),s=0;s<a.length;s++){var l,u;if((l=a[s]).collapsed)(l=l.getCommonAncestor().getAscendant({td:1,th:1},!0))&&n(l)&&o.push(l);else for((l=new CKEDITOR.dom.walker(l)).guard=i;u=l.next();)u.type==CKEDITOR.NODE_ELEMENT&&u.is(CKEDITOR.dtd.table)||(u=u.getAscendant({td:1,th:1},!0))&&!u.getCustomData("selected_cell")&&n(u)&&(CKEDITOR.dom.element.setMarker(r,u,"selected_cell",!0),o.push(u))}return CKEDITOR.dom.element.clearAllMarkers(r),o}function t(t,n){var i=(o=(s=f(t)?t:e(t))[0]).getAscendant("table"),o=o.getDocument(),r=(l=s[0].getParent()).$.rowIndex,a=(s=s[s.length-1]).getParent().$.rowIndex+s.$.rowSpan-1,s=new CKEDITOR.dom.element(i.$.rows[a]),l=(r=n?r:a,n?l:s);for(i=(s=CKEDITOR.tools.buildTableMap(i))[r],r=n?s[r-1]:s[r+1],s=s[0].length,o=o.createElement("tr"),a=0;i[a]&&a<s;a++){var u;1<i[a].rowSpan&&r&&i[a]==r[a]?(u=i[a]).rowSpan+=1:((u=new CKEDITOR.dom.element(i[a]).clone()).removeAttribute("rowSpan"),u.appendBogus(),o.append(u),u=u.$),a+=u.colSpan-1}return n?o.insertBefore(l):o.insertAfter(l),o}function n(e){for(var t=e.getParent().$.cells,n=0,i=0;i<t.length;i++){var o=t[i];if(n+=o.colSpan,o==e.$)break}return n-1}function i(e,t){for(var i=t?1/0:0,o=0;o<e.length;o++){var r=n(e[o]);(t?r<i:r>i)&&(i=r)}return i}function o(t,n){for(var o=(a=f(t)?t:e(t))[0].getAscendant("table"),r=i(a,1),a=i(a),s=n?r:a,l=CKEDITOR.tools.buildTableMap(o),u=(o=[],r=[],a=[],l.length),c=0;c<u;c++)o.push(l[c][s]),r.push(n?l[c][s-1]:l[c][s+1]);for(c=0;c<u;c++)o[c]&&(1<o[c].colSpan&&r[c]==o[c]?(l=o[c]).colSpan+=1:((l=(s=new CKEDITOR.dom.element(o[c])).clone()).removeAttribute("colSpan"),l.appendBogus(),l[n?"insertBefore":"insertAfter"].call(l,s),a.push(l),l=l.$),c+=l.rowSpan-1);return a}function r(e,t){var n=e.getStartElement().getAscendant({td:1,th:1},!0);if(n){var i=n.clone();i.appendBogus(),t?i.insertBefore(n):i.insertAfter(n)}}function a(e,t){var n=e.getDocument(),i=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(i.focus(),n.focus()),(n=new CKEDITOR.dom.range(n))["moveToElementEdit"+(t?"End":"Start")](e)||(n.selectNodeContents(e),n.collapse(!t)),n.select(!0)}function s(e,t,n){if(e=e[t],void 0===n)return e;for(t=0;e&&t<e.length;t++){if(n.is&&e[t]==n.$)return t;if(t==n)return new CKEDITOR.dom.element(e[t])}return n.is?-1:null}function l(t,n,i){var o,r,a=e(t);if((n?1!=a.length:2>a.length)||(o=t.getCommonAncestor())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("table"))return!1;o=(t=a[0]).getAscendant("table");var u=CKEDITOR.tools.buildTableMap(o),c=u.length,d=u[0].length,f=t.getParent().$.rowIndex,h=s(u,f,t);if(n){var g;try{var p=parseInt(t.getAttribute("rowspan"),10)||1;r=parseInt(t.getAttribute("colspan"),10)||1,g=u["up"==n?f-p:"down"==n?f+p:f]["left"==n?h-r:"right"==n?h+r:h]}catch(l){return!1}if(!g||t.$==g)return!1;a["up"==n||"left"==n?"unshift":"push"](new CKEDITOR.dom.element(g))}n=t.getDocument();var m=f,v=(p=g=0,!i&&new CKEDITOR.dom.documentFragment(n)),y=0;for(n=0;n<a.length;n++){var b=(r=a[n]).getParent(),T=r.getFirst(),C=r.$.colSpan,E=r.$.rowSpan,_=s(u,b=b.$.rowIndex,r);y+=C*E,p=Math.max(p,_-h+C),g=Math.max(g,b-f+E),i||((E=(C=r).getBogus())&&E.remove(),C.trim(),r.getChildren().count()&&(b==m||!T||T.isBlockBoundary&&T.isBlockBoundary({br:1})||!(m=v.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||m.is&&m.is("br")||v.append("br"),r.moveChildren(v)),n?r.remove():r.setHtml("")),m=b}if(i)return g*p==y;for(v.moveChildren(t),t.appendBogus(),p>=d?t.removeAttribute("rowSpan"):t.$.rowSpan=g,g>=c?t.removeAttribute("colSpan"):t.$.colSpan=p,n=(a=(i=new CKEDITOR.dom.nodeList(o.$.rows)).count())-1;0<=n;n--)(o=i.getItem(n)).$.cells.length||(o.remove(),a++);return t}function u(t,n){if(1<(i=e(t)).length)return!1;if(n)return!0;var i,o,r=(c=(i=i[0]).getParent()).getAscendant("table"),a=s(d=CKEDITOR.tools.buildTableMap(r),f=c.$.rowIndex,i);if(1<(u=i.$.rowSpan)){o=Math.ceil(u/2);for(var l,u=Math.floor(u/2),c=f+o,d=(r=new CKEDITOR.dom.element(r.$.rows[c]),s(d,c)),f=(c=i.clone(),0);f<d.length;f++){if((l=d[f]).parentNode==r.$&&f>a){c.insertBefore(new CKEDITOR.dom.element(l));break}l=null}l||r.append(c)}else for(u=o=1,(r=c.clone()).insertAfter(c),r.append(c=i.clone()),l=s(d,f),a=0;a<l.length;a++)l[a].rowSpan++;return c.appendBogus(),i.$.rowSpan=o,c.$.rowSpan=u,1==o&&i.removeAttribute("rowSpan"),1==u&&c.removeAttribute("rowSpan"),c}function c(t,n){if(1<(i=e(t)).length)return!1;if(n)return!0;var i,o=(i=i[0]).getParent(),r=o.getAscendant("table"),a=s(r=CKEDITOR.tools.buildTableMap(r),o.$.rowIndex,i);if(1<(l=i.$.colSpan))o=Math.ceil(l/2),l=Math.floor(l/2);else{for(var l=o=1,u=[],c=0;c<r.length;c++){var d=r[c];u.push(d[a]),1<d[a].rowSpan&&(c+=d[a].rowSpan-1)}for(r=0;r<u.length;r++)u[r].colSpan++}return(r=i.clone()).insertAfter(i),r.appendBogus(),i.$.colSpan=o,r.$.colSpan=l,1==o&&i.removeAttribute("colSpan"),1==l&&r.removeAttribute("colSpan"),r}var d=/^(?:td|th)$/,f=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(n){function i(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function s(e,t){var i=n.addCommand(e,t);n.addFeature(i)}var d=n.lang.table,f=CKEDITOR.tools.style.parse,h="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");s("cellProperties",new CKEDITOR.dialogCommand("cellProperties",i({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:h,contentTransformations:[[{element:"td",left:function(e){return e.styles.background&&f.background(e.styles.background).color},right:function(e){e.styles["background-color"]=f.background(e.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(e){return e.attributes&&e.attributes.valign},right:function(e){e.styles["vertical-align"]=e.attributes.valign,delete e.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(e){return e.styles&&e.styles.height},right:function(e){CKEDITOR.tools.array.forEach(e.children,(function(t){t.name in{td:1,th:1}&&(t.attributes["cke-row-height"]=e.styles.height)})),delete e.styles.height}}],[{element:"td",check:"td{height}",left:function(e){return(e=e.attributes)&&e["cke-row-height"]},right:function(e){e.styles.height=e.attributes["cke-row-height"],delete e.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),s("rowDelete",i({requiredContent:"table",exec:function(t){(t=function t(n){if(n instanceof CKEDITOR.dom.selection){var i=n.getRanges(),o=(l=e(n))[0].getAscendant("table"),r=CKEDITOR.tools.buildTableMap(o),a=l[0].getParent().$.rowIndex,s=(l=l[l.length-1]).getParent().$.rowIndex+l.$.rowSpan-1,l=[];for(n.reset(),n=a;n<=s;n++){for(var u=r[n],c=new CKEDITOR.dom.element(o.$.rows[n]),d=0;d<u.length;d++){var f=new CKEDITOR.dom.element(u[d]),h=f.getParent().$.rowIndex;1==f.$.rowSpan?f.remove():(--f.$.rowSpan,h==n&&((h=r[n+1])[d-1]?f.insertAfter(new CKEDITOR.dom.element(h[d-1])):new CKEDITOR.dom.element(o.$.rows[n+1]).append(f,1))),d+=f.$.colSpan-1}l.push(c)}for(r=o.$.rows,i[0].moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),a=new CKEDITOR.dom.element(r[s+1]||(0<a?r[a-1]:null)||o.$.parentNode),n=l.length;0<=n;n--)t(l[n]);return o.$.parentNode?a:(i[0].select(),null)}return n instanceof CKEDITOR.dom.element&&(1==(o=n.getAscendant("table")).$.rows.length?o.remove():n.remove()),null}(t=t.getSelection()))&&a(t)}})),s("rowInsertBefore",i({requiredContent:"table",exec:function(n){t(n=e(n=n.getSelection()),!0)}})),s("rowInsertAfter",i({requiredContent:"table",exec:function(n){t(n=e(n=n.getSelection()))}})),s("columnDelete",i({requiredContent:"table",exec:function(t){(t=function(t){CKEDITOR.env.webkit&&!t.isFake&&(t=function(e){var t,n,i;if(1!==(t=e.getRanges()).length)return e;if((t=t[0]).collapsed||0!==t.endOffset)return e;if("td"!==(i=(n=t.endContainer).getName().toLowerCase())&&"th"!==i)return e;for((i=n.getPrevious())||(i=n.getParent().getPrevious().getLast());i.type!==CKEDITOR.NODE_TEXT&&"br"!==i.getName().toLowerCase();)if(!(i=i.getLast()))return e;return t.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),t.select()}(t));var n,i,o=t.getRanges(),r=(s=e(t))[0],a=s[s.length-1],s=r.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(s),u=[];t.reset();var c=0;for(t=l.length;c<t;c++)for(var d=0,f=l[c].length;d<f;d++)void 0===n&&l[c][d]==r.$&&(n=d),l[c][d]==a.$&&(i=d);for(c=n;c<=i;c++)for(d=0;d<l.length;d++)a=l[d],r=new CKEDITOR.dom.element(s.$.rows[d]),(a=new CKEDITOR.dom.element(a[c])).$&&(1==a.$.colSpan?a.remove():--a.$.colSpan,d+=a.$.rowSpan-1,r.$.cells.length||u.push(r));return n=l[0].length-1>i?new CKEDITOR.dom.element(l[0][i+1]):n&&-1!==l[0][n-1].cellIndex?new CKEDITOR.dom.element(l[0][n-1]):new CKEDITOR.dom.element(s.$.parentNode),u.length==t&&(o[0].moveToPosition(s,CKEDITOR.POSITION_AFTER_END),o[0].select(),s.remove()),n}(t=t.getSelection()))&&a(t,!0)}})),s("columnInsertBefore",i({requiredContent:"table",exec:function(t){o(t=e(t=t.getSelection()),!0)}})),s("columnInsertAfter",i({requiredContent:"table",exec:function(t){o(t=e(t=t.getSelection()))}})),s("cellDelete",i({requiredContent:"table",exec:function(t){!function t(n){if(n instanceof CKEDITOR.dom.selection){var i,o=n.getRanges(),r=e(n),s=r[0]&&r[0].getAscendant("table");e:{var l=0;i=r.length-1;for(var u,c,d={};u=r[l++];)CKEDITOR.dom.element.setMarker(d,u,"delete_cell",!0);for(l=0;u=r[l++];)if((c=u.getPrevious())&&!c.getCustomData("delete_cell")||(c=u.getNext())&&!c.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(d),i=c;break e}CKEDITOR.dom.element.clearAllMarkers(d),i=(l=(l=r[0].getParent()).getPrevious())?l.getLast():(l=(l=r[i].getParent()).getNext())?l.getChild(0):null}for(n.reset(),n=r.length-1;0<=n;n--)t(r[n]);i?a(i,!0):s&&(o[0].moveToPosition(s,CKEDITOR.POSITION_BEFORE_START),o[0].select(),s.remove())}else n instanceof CKEDITOR.dom.element&&(1==(o=n.getParent()).getChildCount()?o.remove():n.remove())}(t=t.getSelection())}})),s("cellMerge",i({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e,t){t.cell=l(e.getSelection()),a(t.cell,!0)}})),s("cellMergeRight",i({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e,t){t.cell=l(e.getSelection(),"right"),a(t.cell,!0)}})),s("cellMergeDown",i({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e,t){t.cell=l(e.getSelection(),"down"),a(t.cell,!0)}})),s("cellVerticalSplit",i({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){a(c(e.getSelection()))}})),s("cellHorizontalSplit",i({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){a(u(e.getSelection()))}})),s("cellInsertBefore",i({requiredContent:"table",exec:function(e){r(e=e.getSelection(),!0)}})),s("cellInsertAfter",i({requiredContent:"table",exec:function(e){r(e=e.getSelection())}})),n.addMenuItems&&n.addMenuItems({tablecell:{label:d.cell.menu,group:"tablecell",order:1,getItems:function(){var t=e(i=n.getSelection()),i={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:l(i,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:l(i,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:l(i,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:c(i,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:u(i,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return n.filter.check(h)&&(i.tablecell_properties=0<t.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),i}},tablecell_insertBefore:{label:d.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:d.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:d.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:d.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:d.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:d.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:d.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:d.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:d.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:d.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:d.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:d.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:d.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:d.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:d.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:d.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:d.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),n.contextMenu&&n.contextMenu.addListener((function(e,t,n){return(e=n.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null}))},getCellColIndex:n,insertRow:t,insertColumn:o,getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e,t,n,i,o){e=e.$.rows,n=n||0,i="number"==typeof i?i:e.length-1,o="number"==typeof o?o:-1;var r=-1,a=[];for(t=t||0;t<=i;t++){!a[++r]&&(a[r]=[]);for(var s=-1,l=n;l<=(-1===o?e[t].cells.length-1:o)&&(c=e[t].cells[l]);l++){for(s++;a[r][s];)s++;for(var u=isNaN(c.colSpan)?1:c.colSpan,c=isNaN(c.rowSpan)?1:c.rowSpan,d=0;d<c&&!(t+d>i);d++){a[r+d]||(a[r+d]=[]);for(var f=0;f<u;f++)a[r+d][s+f]=e[t].cells[l]}if(s+=u-1,-1!==o&&s>=o)break}}return a},function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(e,t){var n,i,o=e.getAscendant("table"),a=t.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(o),l=r(e),u=r(t),c=[],d={};for(o.contains(a)&&(u=r(t=t.getAscendant({td:1,th:1}))),l>u&&(o=l,l=u,u=o,o=e,e=t,t=o),o=0;o<s[l].length;o++)if(e.$===s[l][o]){n=o;break}for(o=0;o<s[u].length;o++)if(t.$===s[u][o]){i=o;break}for(n>i&&(o=n,n=i,i=o),o=l;o<=u;o++)for(l=n;l<=i;l++)(a=new CKEDITOR.dom.element(s[o][l])).$&&!a.getCustomData("selected_cell")&&(c.push(a),CKEDITOR.dom.element.setMarker(d,a,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(d),c}function n(e,t){var n,i=e.editable().find(".cke_table-faked-selection"),o=e.editable().findOne("[data-cke-table-faked-selection-table]");for(e.fire("lockSnapshot"),e.editable().removeClass("cke_table-faked-selection-editor"),n=0;n<i.count();n++)i.getItem(n).removeClass("cke_table-faked-selection");o&&o.data("cke-table-faked-selection-table",!1),e.fire("unlockSnapshot"),t&&(m={active:!1},e.getSelection().isInTable()&&e.getSelection().reset())}function i(e,t){var n,i,o=[];for(i=0;i<t.length;i++)(n=e.createRange()).setStartBefore(t[i]),n.setEndAfter(t[i]),o.push(n);e.getSelection().selectRanges(o)}function o(e){var t,i=(e=e.editor||e.sender.editor)&&e.getSelection(),o=i&&i.getRanges()||[],r=(r=o&&o[0].getEnclosedNode())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("img");if(i&&(n(e),i.isInTable()&&i.isFake))if(r)e.getSelection().reset();else if(!o[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){for(1===o.length&&o[0]._getTableElement()&&o[0]._getTableElement().is("table")&&(t=o[0]._getTableElement()),t=f(i,t),e.fire("lockSnapshot"),i=0;i<t.length;i++)t[i].addClass("cke_table-faked-selection");0<t.length&&(e.editable().addClass("cke_table-faked-selection-editor"),t[0].getAscendant("table").data("cke-table-faked-selection-table","")),e.fire("unlockSnapshot")}}function r(e){return e.getAscendant("tr",!0).$.rowIndex}function a(o){function r(e){return!e.getAscendant("table",!0)&&e.getDocument().equals(s.document)}if(o.data.getTarget().getName&&("mouseup"===o.name||!e(o.data.getTarget()))){var s=o.editor||o.listenerData.editor,l=s.getSelection(1),u=function(e){return(e=e.editable().findOne(".cke_table-faked-selection"))&&e.getAscendant("table")}(s),c=(d=o.data.getTarget())&&d.getAscendant({td:1,th:1},!0),d=d&&d.getAscendant("table",!0),h={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};d&&d.hasAttribute("data-cke-tableselection-ignored")||(function(e,t,n,i){return!("mousedown"!==e.name||CKEDITOR.tools.getMouseButton(e)!==CKEDITOR.MOUSE_BUTTON_LEFT&&i)||((t=e.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!r(e.data.getTarget()))&&(t=!((e=e.data.getTarget().getAscendant({td:1,th:1},!0))&&e.hasClass("cke_table-faked-selection"))),t)}(o,l,0,d)&&n(s,!0),!m.active&&"mousedown"===o.name&&CKEDITOR.tools.getMouseButton(o)===CKEDITOR.MOUSE_BUTTON_LEFT&&d&&(m={active:!0},CKEDITOR.document.on("mouseup",a,null,{editor:s})),(c||d)&&function(o,r,a){var s,l=f(o.getSelection(!0));if(r=r.is("table")?null:r,(s=m.active&&!m.first)&&!(s=r)&&(s=o.getSelection().getRanges(),s=!!(1<l.length||s[0]&&!s[0].collapsed)),s)m.first=r||l[0],m.dirty=!r&&1!==l.length;else if(m.active&&r&&m.first.getAscendant("table").equals(r.getAscendant("table"))){if(l=t(m.first,r),!m.dirty&&1===l.length&&!e(a.data.getTarget()))return n(o,"mouseup"===a.name);m.dirty=!0,m.last=r,i(o,l)}}(s,c||d,o),"mouseup"===o.name&&(CKEDITOR.tools.getMouseButton(o)===CKEDITOR.MOUSE_BUTTON_LEFT&&(r(o.data.getTarget())||function(e,t){return!(!e||!t)&&(e.equals(t)||e.contains(t)||t.contains(e)||e.getCommonAncestor(t).is(h))}(u,d))&&function(e){var n=e.editable().find(".cke_table-faked-selection");1>n.count()||i(e,n=t(n.getItem(0),n.getItem(n.count()-1)))}(s),m={active:!1},CKEDITOR.document.removeListener("mouseup",a)))}}function s(e){var t=e.data.getTarget().getAscendant("table",!0);t&&t.hasAttribute("data-cke-tableselection-ignored")||(t=e.data.getTarget().getAscendant({td:1,th:1},!0))&&!t.hasClass("cke_table-faked-selection")&&(e.cancel(),e.data.preventDefault())}function l(e){var t=e.editor||e.sender.editor,n=t.getSelection();n.isInTable()&&(n.getRanges()[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")||function(e,t){var n,i,o,r,a=e.getSelection(),s=a.createBookmarks(),l=e.document,u=e.createRange(),c=l.getDocumentElement().$,d=CKEDITOR.env.ie&&9>CKEDITOR.env.version,f=e.blockless||CKEDITOR.env.ie?"span":"div";l.getById("cke_table_copybin")||(n=l.createElement(f),(i=l.createElement(f)).setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),n.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),n.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-5000px"),n.setHtml(e.getSelectedHtml(!0)),e.fire("lockSnapshot"),i.append(n),e.editable().append(i),r=e.on("selectionChange",(function(e){e.cancel()}),null,null,0),d&&(o=c.scrollTop),u.selectNodeContents(n),u.select(),d&&(c.scrollTop=o),setTimeout((function(){i.remove(),a.selectBookmarks(s),r.removeListener(),e.fire("unlockSnapshot"),t&&(e.extractSelectedHtml(),e.fire("saveSnapshot"))}),100))}(t,"cut"===e.name))}function u(e){this._reset(),e&&this.setSelectedCells(e)}function c(e,t,n){e.on("beforeCommandExec",(function(n){-1!==CKEDITOR.tools.array.indexOf(t,n.data.name)&&(n.data.selectedCells=f(e.getSelection()))})),e.on("afterCommandExec",(function(i){-1!==CKEDITOR.tools.array.indexOf(t,i.data.name)&&n(e,i.data)}))}var d,f,h,g,p,m={active:!1};(u.prototype={})._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},u.prototype.setSelectedCells=function(e){this._reset(),e=e.slice(0),this._arraySortByDOMOrder(e),this.cells.all=e,this.cells.first=e[0],this.cells.last=e[e.length-1],this.rows.first=e[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},u.prototype.getTableMap=function(){var e,t=h(this.cells.first);e:{var n,i=(e=this.cells.last).getAscendant("table"),o=r(e);for(i=CKEDITOR.tools.buildTableMap(i),n=0;n<i[o].length;n++)if(new CKEDITOR.dom.element(i[o][n]).equals(e)){e=n;break e}e=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),r(this.rows.first),t,r(this.rows.last),e)},u.prototype._getTable=function(){return this.rows.first.getAscendant("table")},u.prototype.insertRow=function(e,t,n){if(void 0===e)e=1;else if(0>=e)return;for(var i,o=this.cells.first.$.cellIndex,r=this.cells.last.$.cellIndex,a=n?[]:this.cells.all,s=0;s<e;s++)i=g(n?this.cells.all:a,t),i=CKEDITOR.tools.array.filter(i.find("td, th").toArray(),(function(e){return!!n||e.$.cellIndex>=o&&e.$.cellIndex<=r})),a=t?i.concat(a):a.concat(i);this.setSelectedCells(a)},u.prototype.insertColumn=function(e){function t(e){return(e=r(e))>=i&&e<=o}if(void 0===e)e=1;else if(0>=e)return;for(var n=(a=this.cells).all,i=r(a.first),o=r(a.last),a=0;a<e;a++)n=n.concat(CKEDITOR.tools.array.filter(p(n),t));this.setSelectedCells(n)},u.prototype.emptyCells=function(e){e=e||this.cells.all;for(var t=0;t<e.length;t++)e[t].setHtml("")},u.prototype._arraySortByDOMOrder=function(e){e.sort((function(e,t){return e.getPosition(t)&CKEDITOR.POSITION_PRECEDING?-1:1}))};var v={onPaste:function(e){function n(e){return Math.max.apply(null,CKEDITOR.tools.array.map(e,(function(e){return e.length}),0))}var o=e.editor,r=o.getSelection();if(!(c=(c=r.getRanges()).length&&c[0]._getTableElement({table:1}))||!c.hasAttribute("data-cke-tableselection-ignored")){var a,s,l=f(r),c=this.findTableInPastedContent(o,e.data.dataValue),d=r.isInTable(!0)&&this.isBoundarySelection(r);!l.length||1===l.length&&!function(e){if(e)return(e=e.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),(e=e.getEnclosedNode())&&e.is&&e.is(CKEDITOR.dtd.$tableContent)}(r.getRanges()[0])&&!d||d&&!c||(l=l[0].getAscendant("table"),a=new u(f(r,l)),o.once("afterPaste",(function(){var e;if(s){e=new CKEDITOR.dom.element(s[0][0]);var n=s[s.length-1];e=t(e,new CKEDITOR.dom.element(n[n.length-1]))}else e=a.cells.all;i(o,e)})),c?(e.stop(),d?(a.insertRow(1,1===d,!0),r.selectElement(a.rows.first)):(a.emptyCells(),i(o,a.cells.all)),e=a.getTableMap(),s=CKEDITOR.tools.buildTableMap(c),a.insertRow(s.length-e.length),a.insertColumn(n(s)-n(e)),e=a.getTableMap(),this.pasteTable(a,e,s),o.fire("saveSnapshot"),setTimeout((function(){o.fire("afterPaste")}),0)):(function(e){var t=o.createRange();t.selectNodeContents(e),t.select()}(a.cells.first),o.once("afterPaste",(function(){o.fire("lockSnapshot"),a.emptyCells(a.cells.all.slice(1)),i(o,a.cells.all),o.fire("unlockSnapshot")}))))}},isBoundarySelection:function(e){var t=(e=e.getRanges()[0]).endContainer.getAscendant("tr",!0);if(t&&e.collapsed){if(e.checkBoundaryOfElement(t,CKEDITOR.START))return 1;if(e.checkBoundaryOfElement(t,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(e,t){var n=e.dataProcessor,i=new CKEDITOR.dom.element("body");return n||(n=new CKEDITOR.htmlDataProcessor(e)),i.setHtml(n.toHtml(t),{fixForBody:!1}),1<i.getChildCount()?null:i.findOne("table")},pasteTable:function(e,t,n){var i,o,r,a,s,l=h(e.cells.first),u=e._getTable(),c={};for(a=0;a<n.length;a++)for(o=new CKEDITOR.dom.element(u.$.rows[e.rows.first.$.rowIndex+a]),s=0;s<n[a].length;s++)r=new CKEDITOR.dom.element(n[a][s]),i=t[a]&&t[a][s]?new CKEDITOR.dom.element(t[a][s]):null,r&&!r.getCustomData("processed")?(i&&i.getParent()?r.replace(i):(0===s||n[a][s-1])&&((i=0!==s?new CKEDITOR.dom.element(n[a][s-1]):null)&&o.equals(i.getParent())?r.insertAfter(i):0<l?o.$.cells[l]?r.insertAfter(new CKEDITOR.dom.element(o.$.cells[l])):o.append(r):o.append(r,!0)),CKEDITOR.dom.element.setMarker(c,r,"processed",!0)):r.getCustomData("processed")&&i&&i.remove();CKEDITOR.dom.element.clearAllMarkers(c)}};CKEDITOR.plugins.tableselection={getCellsBetween:t,keyboardIntegration:function(e){function t(e){var t=e.getEnclosedNode();t&&"function"==typeof t.is&&t.is({td:1,th:1})?t.setText(""):e.deleteContents(),CKEDITOR.tools.array.forEach(e._find("td"),(function(e){e.appendBogus()}))}var n=e.editable();n.attachListener(n,"keydown",function(e){function n(t,n){if(!n.length)return null;var i=e.createRange(),r=CKEDITOR.dom.range.mergeRanges(n);CKEDITOR.tools.array.forEach(r,(function(e){e.enlarge(CKEDITOR.ENLARGE_ELEMENT)}));var a=(s=r[0].getBoundaryNodes()).startNode,s=s.endNode;if(a&&a.is&&a.is(o)){for(var l=a.getAscendant("table",!0),u=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l),c=!1,d=function(e){return!a.contains(e)&&e.is&&e.is("td","th")};u&&!d(u);)u=u.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l);return!u&&s&&s.is&&!s.is("table")&&s.getNext()&&(u=s.getNext().findOne("td, th"),c=!0),u?i["moveToElementEdit"+(c?"Start":"End")](u):(i.setStartBefore(a.getAscendant("table",!0)),i.collapse(!0)),r[0].deleteContents(),[i]}return a?(i.moveToElementEditablePosition(a),[i]):void 0}var i={37:1,38:1,39:1,40:1,8:1,46:1,13:1},o=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);return delete o.td,delete o.th,function(o){var r,a,s,l,u=o.data.getKey(),c=o.data.getKeystroke(),d=37===u||38==u;if(i[u]&&!e.readOnly&&(r=e.getSelection())&&r.isInTable()&&r.isFake)if(s=(a=r.getRanges())[0]._getTableElement(),l=a[a.length-1]._getTableElement(),(13!==u||e.plugins.enterkey)&&(o.data.preventDefault(),o.cancel()),36<u&&41>u)a[0].moveToElementEditablePosition(d?s:l,!d),r.selectRanges([a[0]]);else if(13!==u||13===c||c===CKEDITOR.SHIFT+13){for(o=0;o<a.length;o++)t(a[o]);(o=n(0,a))?a=o:a[0].moveToElementEditablePosition(s),r.selectRanges(a),13===u&&e.plugins.enterkey?(e.fire("lockSnapshot"),e.execCommand(13===c?"enter":"shiftEnter"),e.fire("unlockSnapshot"),e.fire("saveSnapshot")):13!==u&&e.fire("saveSnapshot")}}}(e),null,null,-1),n.attachListener(n,"keypress",(function(n){var i,o=e.getSelection(),r=n.data.$.charCode||13===n.data.getKey();if(!e.readOnly&&o&&o.isInTable()&&o.isFake&&r&&!(n.data.getKeystroke()&CKEDITOR.CTRL)){for(r=(n=o.getRanges())[0].getEnclosedNode().getAscendant({td:1,th:1},!0),i=0;i<n.length;i++)t(n[i]);r&&(n[0].moveToElementEditablePosition(r),o.selectRanges([n[0]]))}}),null,null,-1)}},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",isSupportedEnvironment:function(){return!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},onLoad:function(){d=CKEDITOR.plugins.tabletools,f=d.getSelectedCells,h=d.getCellColIndex,g=d.insertRow,p=d.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(e){this.isSupportedEnvironment()&&(e.addContentsCss&&e.addContentsCss(this.path+"styles/tableselection.css"),e.on("contentDom",(function(){var t=e.editable(),n=t.isInline()?t:e.document,i={editor:e};t.attachListener(n,"mousedown",a,null,i),t.attachListener(n,"mousemove",a,null,i),t.attachListener(n,"mouseup",a,null,i),t.attachListener(t,"dragstart",s),t.attachListener(e,"selectionCheck",o),CKEDITOR.plugins.tableselection.keyboardIntegration(e),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(t.attachListener(t,"cut",l),t.attachListener(t,"copy",l))})),e.on("paste",v.onPaste,v),c(e,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),(function(e,t){i(e,t.selectedCells)})),c(e,["cellMerge","cellMergeRight","cellMergeDown"],(function(e,t){i(e,[t.commandData.cell])})),c(e,["cellDelete"],(function(e){n(e,!0)})))}})}(),function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function i(e){a.enabled&&!1!==e.data.command.canUndo&&a.save()}function o(){a.enabled=!t.readOnly&&"wysiwyg"==t.mode,a.onChange()}var a=t.undoManager=new n(t),s=a.editingHandler=new r(a),l=t.addCommand("undo",{exec:function(){a.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),u=t.addCommand("redo",{exec:function(){a.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),a.onChange=function(){l.setState(a.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),u.setState(a.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",i),t.on("afterCommandExec",i),t.on("saveSnapshot",(function(e){a.save(e.data&&e.data.contentOnly)})),t.on("contentDom",s.attachListeners,s),t.on("instanceReady",(function(){t.fire("saveSnapshot")})),t.on("beforeModeUnload",(function(){"wysiwyg"==t.mode&&a.save(!0)})),t.on("mode",o),t.on("readOnly",o),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){a.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",(function(){a.currentImage&&a.update()})),t.on("lockSnapshot",(function(e){a.lock((e=e.data)&&e.dontUpdate,e&&e.forceUpdate)})),t.on("unlockSnapshot",a.unlock,a)}}),CKEDITOR.plugins.undo={};var n=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=e.config.undoStackSize||20,this.strokesLimit=25,this._filterRules=[],this.editor=e,this.reset(),CKEDITOR.env.ie&&this.addFilterRule((function(e){return e.replace(/\s+data-cke-expando=".*?"/g,"")}))};n.prototype={type:function(e,t){var i=n.getKeyGroup(e),o=this.strokesRecorded[i]+1;t=t||o>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),t?(o=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[i]=o,this.previousKeyGroup=i},keyGroupChanged:function(e){return n.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,n){var o=this.editor;if(this.locked||"ready"!=o.status||"wysiwyg"!=o.mode)return!1;var r=o.editable();if(!r||"ready"!=r.status)return!1;if(r=this.snapshots,t||(t=new i(o)),!1===t.contents)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else!1!==n&&o.fire("change");return r.splice(this.index+1,r.length-this.index-1),r.length==this.limit&&r.shift(),this.index=r.push(t)-1,this.currentImage=t,!1!==n&&this.refreshState(),!0},restoreImage:function(e){var t,n=this.editor;e.bookmarks&&(n.focus(),t=n.getSelection()),this.locked={level:999},this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&((t=this.editor.document.getBody().$.createTextRange()).collapse(!0),t.select()),this.locked=null,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),n.fire("change")},getNextImage:function(e){var t,n=this.snapshots,i=this.currentImage;if(i)if(e){for(t=this.index-1;0<=t;t--)if(!i.equalsContent(e=n[t]))return e.index=t,e}else for(t=this.index+1;t<n.length;t++)if(!i.equalsContent(e=n[t]))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new i(this.editor));for(var t=this.index,n=this.snapshots;0<t&&this.currentImage.equalsContent(n[t-1]);)--t;n.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,n=t[t.length-1];return!(!n.equalsContent(e)||n.equalsSelection(e)||(this.currentImage=t[t.length-1]=e,0))},lock:function(e,t){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var n=null;if(t)n=!0;else{var o=new i(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(o)&&(n=o)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;if(this.locked=null,!0===e)this.update();else if(e){var t=new i(this.editor,!0);e.equalsContent(t)||this.update()}}},addFilterRule:function(e){this._filterRules.push(e)}},n.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},n.keyGroups={PRINTABLE:0,FUNCTIONAL:1},n.isNavigationKey=function(e){return!!n.navigationKeyCodes[e]},n.getKeyGroup=function(e){var i=n.keyGroups;return t[e]?i.FUNCTIONAL:i.PRINTABLE},n.getOppositeKeyGroup=function(e){var t=n.keyGroups;return e==t.FUNCTIONAL?t.PRINTABLE:t.FUNCTIONAL},n.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&n.getKeyGroup(e)==n.keyGroups.FUNCTIONAL};var i=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var n=e.getSnapshot();n&&(this.contents=function(e,t){return CKEDITOR.tools.array.reduce(t,(function(e,t){return t(e)}),e)}(n,e.undoManager._filterRules)),t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0)),e.fire("afterUndoImage")},o=/\b(?:href|src|name)="[^"]*?"/gi;i.prototype={equalsContent:function(e){var t=this.contents;return e=e.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(o,""),e=e.replace(o,"")),t==e},equalsSelection:function(e){var t=this.bookmarks;if(e=e.bookmarks,t||e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var i=t[n],o=e[n];if(i.startOffset!=o.startOffset||i.endOffset!=o.endOffset||!CKEDITOR.tools.arrayCompare(i.start,o.start)||!CKEDITOR.tools.arrayCompare(i.end,o.end))return!1}}return!0}};var r=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e,this.ignoreInputEvent=!1,this.keyEventsStack=new a,this.lastKeydownImage=null};r.prototype={onKeydown:function(t){var o=t.data.getKey();229!==o&&(-1<CKEDITOR.tools.indexOf(e,t.data.getKeystroke())?t.data.preventDefault():(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(o)||this.keyEventsStack.push(o),this.lastKeydownImage=new i(t.editor),(n.isNavigationKey(o)||this.undoManager.keyGroupChanged(o))&&(t.strokesRecorded[0]||t.strokesRecorded[1])&&(t.save(!1,this.lastKeydownImage,!1),t.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0)),this.keyEventsStack.increment(e.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(e){var t=this.undoManager;e=e.data.getKey();var o=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(e),n.ieFunctionalKeysBug(e)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new i(t.editor,!0))||(0<o?t.type(e):n.isNavigationKey(e)&&this.onNavigationKey(!0))},onNavigationKey:function(e){var t=this.undoManager;!e&&t.save(!0,null,!1)||t.updateSelection(new i(t.editor)),t.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var e=this.undoManager.editor,t=e.editable(),i=this;t.attachListener(t,"keydown",(function(e){i.onKeydown(e),n.ieFunctionalKeysBug(e.data.getKey())&&i.onInput()}),null,null,999),t.attachListener(t,CKEDITOR.env.ie?"keypress":"input",i.onInput,i,null,999),t.attachListener(t,"keyup",i.onKeyup,i,null,999),t.attachListener(t,"paste",i.ignoreInputEventListener,i,null,999),t.attachListener(t,"drop",i.ignoreInputEventListener,i,null,999),e.on("afterPaste",i.activateInputEventListener,i,null,999),t.attachListener(t.isInline()?t:e.document.getDocumentElement(),"click",(function(){i.onNavigationKey()}),null,null,999),t.attachListener(this.undoManager.editor,"blur",(function(){i.keyEventsStack.remove(9)}),null,null,999)}};var a=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};a.prototype={push:function(e){return e=this.stack.push({keyCode:e,inputs:0}),this.stack[e-1]},getLastIndex:function(e){if("number"!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){return-1!=(e=this.getLastIndex(e))?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){-1!=(e=this.getLastIndex(e))&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){(e=e.data.$).ctrlKey||e.metaKey||this.remove(17),e.shiftKey||this.remove(16),e.altKey||this.remove(18)}}}(),function(){function e(e,t){CKEDITOR.tools.extend(this,{editor:e,editable:e.editable(),doc:e.document,win:e.window},t,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function t(e,t){CKEDITOR.tools.extend(this,t,{editor:e},!0)}function n(e,t){var n=e.editable();CKEDITOR.tools.extend(this,{editor:e,editable:n,inline:n.isInline(),doc:e.document,win:e.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},t,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var i=CKEDITOR.tools.bind(this.queryViewport,this),a=CKEDITOR.tools.bind(this.hideVisible,this),s=CKEDITOR.tools.bind(this.removeAll,this);n.attachListener(this.winTop,"resize",i),n.attachListener(this.winTop,"scroll",i),n.attachListener(this.winTop,"resize",a),n.attachListener(this.win,"scroll",a),n.attachListener(this.inline?n:this.frame,"mouseout",(function(e){var t=e.data.$.clientX;e=e.data.$.clientY,this.queryViewport(),(t<=this.rect.left||t>=this.rect.right||e<=this.rect.top||e>=this.rect.bottom)&&this.hideVisible(),(0>=t||t>=this.winTopPane.width||0>=e||e>=this.winTopPane.height)&&this.hideVisible()}),this),n.attachListener(e,"resize",i),n.attachListener(e,"mode",s),e.on("destroy",s),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},r,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function i(e){var t;return(t=e&&e.type==CKEDITOR.NODE_ELEMENT)&&(t=!(a[e.getComputedStyle("float")]||a[e.getAttribute("align")])),t&&!s[e.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(e){var t,n,i,o,r=this,a=this.editor,s=this.doc,l=CKEDITOR.tools.eventsBuffer(50,(function(){a.readOnly||"wysiwyg"!=a.mode||(r.relations={},(n=s.$.elementFromPoint(i,o))&&n.nodeType&&(t=new CKEDITOR.dom.element(n),r.traverseSearch(t),isNaN(i+o)||r.pixelSearch(t,i,o),e&&e(r.relations,i,o)))}));this.listener=this.editable.attachListener(this.target,"mousemove",(function(e){i=e.data.$.clientX,o=e.data.$.clientY,l.input()})),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",(function(){l.reset()}))},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var e={};return e[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,e[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,e[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var n=this.editor.createRange();return n.moveToPosition(this.relations[t.uid].element,e[t.type]),n}}(),store:function(){function e(e,t,n){var i=e.getUniqueId();i in n?n[i].type|=t:n[i]={element:e,type:t}}return function(t,n){var o;n&CKEDITOR.LINEUTILS_AFTER&&i(o=t.getNext())&&o.isVisible()&&(e(o,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_AFTER),n&CKEDITOR.LINEUTILS_INSIDE&&i(o=t.getFirst())&&o.isVisible()&&(e(o,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_INSIDE),e(t,n,this.relations)}}(),traverseSearch:function(e){var t,n,o;do{if(!(o=e.$["data-cke-expando"])||!(o in this.relations)){if(e.equals(this.editable))break;if(i(e))for(t in this.lookups)(n=this.lookups[t](e))&&this.store(e,n)}}while((!e||e.type!=CKEDITOR.NODE_ELEMENT||"true"!=e.getAttribute("contenteditable"))&&(e=e.getParent()))},pixelSearch:function(){function e(e,n,o,r,a){for(var s,l=0;a(o)&&(o+=r,25!=++l);)if(s=this.doc.$.elementFromPoint(n,o))if(s==e)l=0;else if(t(e,s)&&(l=0,i(s=new CKEDITOR.dom.element(s))))return s}var t=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(16&e.compareDocumentPosition(t))};return function(t,n,o){var r=this.win.getViewPaneSize().height,a=e.call(this,t.$,n,o,-1,(function(e){return 0<e}));if(n=e.call(this,t.$,n,o,1,(function(e){return e<r})),a)for(this.traverseSearch(a);!a.getParent().equals(t);)a=a.getParent();if(n)for(this.traverseSearch(n);!n.getParent().equals(t);)n=n.getParent();for(;(a||n)&&(a&&(a=a.getNext(i)),a&&!a.equals(n))&&(this.traverseSearch(a),n&&(n=n.getPrevious(i)),n&&!n.equals(a));)this.traverseSearch(n)}}(),greedySearch:function(){this.relations={};for(var e,t,n,o=this.editable.getElementsByTag("*"),r=0;e=o.getItem(r++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&i(e)&&e.isVisible())for(n in this.lookups)(t=this.lookups[n](e))&&this.store(e,t);return this.relations}},t.prototype={locate:function(){function e(e,t){var n=e.element[t===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return n&&i(n)?(e.siblingRect=n.getClientRect(),t==CKEDITOR.LINEUTILS_BEFORE?(e.siblingRect.bottom+e.elementRect.top)/2:(e.elementRect.bottom+e.siblingRect.top)/2):t==CKEDITOR.LINEUTILS_BEFORE?e.elementRect.top:e.elementRect.bottom}return function(t){var n;for(var i in this.locations={},t)(n=t[i]).elementRect=n.element.getClientRect(),n.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(i,CKEDITOR.LINEUTILS_BEFORE,e(n,CKEDITOR.LINEUTILS_BEFORE)),n.type&CKEDITOR.LINEUTILS_AFTER&&this.store(i,CKEDITOR.LINEUTILS_AFTER,e(n,CKEDITOR.LINEUTILS_AFTER)),n.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(i,CKEDITOR.LINEUTILS_INSIDE,(n.elementRect.top+n.elementRect.bottom)/2);return this.locations}}(),sort:function(){var e,t,n,i;return function(o,r){for(var a in t=[],e=this.locations)for(var s in e[a])if(n=Math.abs(o-e[a][s]),t.length){for(i=0;i<t.length;i++)if(n<t[i].dist){t.splice(i,0,{uid:+a,type:s,dist:n});break}i==t.length&&t.push({uid:+a,type:s,dist:n})}else t.push({uid:+a,type:s,dist:n});return void 0!==r?t.slice(0,r):t}}(),store:function(e,t,n){this.locations[e]||(this.locations[e]={}),this.locations[e][t]=n}};var o={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},r={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};n.prototype={removeAll:function(){for(var e in this.hidden)this.hidden[e].remove(),delete this.hidden[e];for(e in this.visible)this.visible[e].remove(),delete this.visible[e]},hideLine:function(e){var t=e.getUniqueId();e.hide(),this.hidden[t]=e,delete this.visible[t]},showLine:function(e){var t=e.getUniqueId();e.show(),this.visible[t]=e,delete this.hidden[t]},hideVisible:function(){for(var e in this.visible)this.hideLine(this.visible[e])},placeLine:function(e,t){var n,i,o;if(n=this.getStyle(e.uid,e.type)){for(o in this.visible)if(this.visible[o].getCustomData("hash")!==this.hash){i=this.visible[o];break}if(!i)for(o in this.hidden)if(this.hidden[o].getCustomData("hash")!==this.hash){this.showLine(i=this.hidden[o]);break}i||this.showLine(i=this.addLine()),i.setCustomData("hash",this.hash),this.visible[i.getUniqueId()]=i,i.setStyles(n),t&&t(i)}},getStyle:function(e,t){var n=this.relations[e],i=this.locations[e][t],o={};if(o.width=n.siblingRect?Math.max(n.siblingRect.width,n.elementRect.width):n.elementRect.width,o.top=this.inline?i+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+i,o.top-this.winTopScroll.y<this.rect.top||o.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var r in this.inline?o.left=n.elementRect.left-this.rect.relativeX:(0<n.elementRect.left?o.left=this.rect.left+n.elementRect.left:(o.width+=n.elementRect.left,o.left=this.rect.left),0<(n=o.left+o.width-(this.rect.left+this.winPane.width))&&(o.width-=n)),o.left+=this.winTopScroll.x,o)o[r]=CKEDITOR.tools.cssLength(o[r]);return o},addLine:function(){var e=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return e.appendTo(this.container),e},prepare:function(e,t){this.relations=e,this.locations=t,this.hash=Math.random()},cleanup:function(){var e,t;for(t in this.visible)(e=this.visible[t]).getCustomData("hash")!==this.hash&&this.hideLine(e)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(e){e=e.getClientRect();var t=this.container.getDocumentPosition(),n=this.container.getComputedStyle("position");return e.relativeX=e.relativeY=0,"static"!=n&&(e.relativeY=t.y,e.relativeX=t.x,e.top-=e.relativeY,e.bottom-=e.relativeY,e.left-=e.relativeX,e.right-=e.relativeX),e}};var a={left:1,right:1,center:1},s={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:e,locator:t,liner:n}}(),function(){function e(e){return e.getName&&!e.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(e){if(CKEDITOR.env.webkit){var t=CKEDITOR.plugins.widgetselection;e.on("contentDom",(function(e){var n=(e=e.editor).editable();n.attachListener(n,"keydown",(function(e){e.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout((function(){t.addFillers(n)||t.removeFillers(n)}),0)}),null,null,-1),e.on("selectionCheck",(function(e){t.removeFillers(e.editor.editable())})),e.on("paste",(function(e){e.data.dataValue=t.cleanPasteData(e.data.dataValue)})),"selectall"in e.plugins&&t.addSelectAllIntegration(e)}))}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(t){var n=t.editor;if(!this.isWholeContentSelected(t)&&0<t.getChildCount()){var i=t.getFirst(e),o=t.getLast(e);if(i&&i.type==CKEDITOR.NODE_ELEMENT&&!i.isEditable()&&(this.startFiller=this.createFiller(),t.append(this.startFiller,1)),o&&o.type==CKEDITOR.NODE_ELEMENT&&!o.isEditable()&&(this.endFiller=this.createFiller(!0),t.append(this.endFiller,0)),this.hasFiller(t))return(n=n.createRange()).selectNodeContents(t),n.select(),!0}return!1},removeFillers:function(e){if(this.hasFiller(e)&&!this.isWholeContentSelected(e)){var t=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),n=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&t&&this.startFiller.equals(t)?this.removeFiller(this.startFiller,e):this.startFiller=t,this.endFiller&&n&&this.endFiller.equals(n)?this.removeFiller(this.endFiller,e):this.endFiller=n}},cleanPasteData:function(e){return e&&e.length&&(e=e.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),e},isWholeContentSelected:function(e){var t=e.editor.getSelection().getRanges()[0];return!(!t||t&&t.collapsed||((t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!(t&&e&&t.startContainer&&t.endContainer&&0===t.startOffset&&t.endOffset===e.getChildCount()&&t.startContainer.equals(e)&&t.endContainer.equals(e))))},hasFiller:function(e){return 0<e.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(e){var t=new CKEDITOR.dom.element(this.fillerTagName);return t.setHtml(this.fillerContent),t.setAttribute(this.fillerAttribute,e?"end":"start"),t.setAttribute("data-cke-temp",1),t.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),t},removeFiller:function(e,t){if(e){var n,i,o=t.editor,r=t.editor.getSelection().getRanges()[0].startPath(),a=o.createRange();r.contains(e)&&(n=e.getHtml(),i=!0),r="start"==e.getAttribute(this.fillerAttribute),e.remove(),n&&0<n.length&&n!=this.fillerContent?(t.insertHtmlIntoRange(n,o.getSelection().getRanges()[0]),a.setStartAt(t.getChild(t.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),o.getSelection().selectRanges([a])):i&&(r?a.setStartAt(t.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):a.setEndAt(t.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),t.editor.getSelection().selectRanges([a]))}},createFillerRegex:function(e){var t=this.createFiller(e).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((e?"":"^")+t+(e?"$":""))},addSelectAllIntegration:function(e){var t=this;e.editable().attachListener(e,"beforeCommandExec",(function(n){var i=e.editable();"selectAll"==n.data.name&&i&&t.addFillers(i)}),null,null,9999)}}}(),function(){function e(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function(e){var n,i,o=e.editor;o.on("toHtml",(function(i){var o,r=function(e){var n=[],i=e._.upcasts,o=e._.upcastCallbacks;return{toBeWrapped:n,iterator:function(e){var r,a,s,l,u;if("data-cke-widget-wrapper"in e.attributes)return(e=e.getFirst(t.isParserWidgetElement))&&n.push([e]),!1;if("data-widget"in e.attributes)return n.push([e]),!1;if(u=i.length){if(e.attributes["data-cke-widget-upcasted"])return!1;for(l=0,r=o.length;l<r;++l)if(!1===o[l](e))return;for(l=0;l<u;++l)if(a=(r=i[l])[0](e,s={}))return a instanceof CKEDITOR.htmlParser.element&&(e=a),e.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(s)),e.attributes["data-cke-widget-upcasted"]=1,n.push([e,r[1]]),!1}}}}(e);for(i.data.dataValue.forEach(r.iterator,CKEDITOR.NODE_ELEMENT,!0);o=r.toBeWrapped.pop();){var a=o[0],s=a.parent;s.type==CKEDITOR.NODE_ELEMENT&&s.attributes["data-cke-widget-wrapper"]&&s.replaceWith(a),e.wrapElement(o[0],o[1])}n=i.data.protectedWhitespaces?3==i.data.dataValue.children.length&&t.isParserWidgetWrapper(i.data.dataValue.children[1]):1==i.data.dataValue.children.length&&t.isParserWidgetWrapper(i.data.dataValue.children[0])}),null,null,8),o.on("dataReady",(function(){if(i)for(var n,r,a=o.editable().find(".cke_widget_wrapper"),s=0,l=a.count();s<l;++s)(r=(n=a.getItem(s)).getFirst(t.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&r.data("widget")?(r.replace(n),e.wrapElement(r)):n.remove();i=0,e.destroyAll(!0),e.initOnAll()})),o.on("loadSnapshot",(function(t){/data-cke-widget/.test(t.data)&&(i=1),e.destroyAll(!0)}),null,null,9),o.on("paste",(function(e){(e=e.data).dataValue=e.dataValue.replace(x,h),e.range&&(e=t.getNestedEditable(o.editable(),e.range.startContainer))&&(e=CKEDITOR.filter.instances[e.data("cke-filter")])&&o.setActiveFilter(e)})),o.on("afterInsertHtml",(function(t){t.data.intoRange?e.checkWidgets({initOnlyNew:!0}):(o.fire("lockSnapshot"),e.checkWidgets({initOnlyNew:!0,focusInited:n}),o.fire("unlockSnapshot"))}))}(this),function(e){var n=e.editor,i={};n.on("toDataFormat",(function(n){var o=CKEDITOR.tools.getNextNumber(),r=[];n.data.downcastingSessionId=o,i[o]=r,n.data.dataValue.forEach((function(n){var i,o=n.attributes;if("data-cke-widget-white-space"in o){i=a(n);var l=s(n);i.parent.attributes["data-cke-white-space-first"]&&(i.value=i.value.replace(/^&nbsp;/g," ")),l.parent.attributes["data-cke-white-space-last"]&&(l.value=l.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in o)(o=e.instances[o["data-cke-widget-id"]])&&(i=n.getFirst(t.isParserWidgetElement),r.push({wrapper:n,element:i,widget:o,editables:{}}),"1"!=i.attributes["data-cke-widget-keep-attr"]&&delete i.attributes["data-widget"]);else if("data-cke-widget-editable"in o)return 0<r.length&&(r[r.length-1].editables[o["data-cke-widget-editable"]]=n),!1}),CKEDITOR.NODE_ELEMENT,!0)}),null,null,8),n.on("toDataFormat",(function(e){if(e.data.downcastingSessionId)for(var t,n,o,r,a,s,l=i[e.data.downcastingSessionId];t=l.shift();){for(s in o=t.element,r=(n=t.widget)._.downcastFn&&n._.downcastFn.call(n,o),e.data.widgetsCopy&&n.getClipboardHtml&&(r=(r=CKEDITOR.htmlParser.fragment.fromHtml(n.getClipboardHtml())).children[0]),t.editables)delete(a=t.editables[s]).attributes.contenteditable,a.setHtml(n.editables[s].getData());r||(r=o),t.wrapper.replaceWith(r)}}),null,null,13),n.on("contentDomUnload",(function(){e.destroyAll(!0)}))}(this),this.on("checkWidgets",o),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function(e){var n=e.editor;n.on("selectionCheck",(function(){e.fire("checkSelection")})),e.on("checkSelection",e.checkSelection,e),n.on("selectionChange",(function(i){var o=(i=t.getNestedEditable(n.editable(),i.data.selection.getStartElement()))&&e.getByElement(i),r=e.widgetHoldingFocusedEditable;r?r===o&&r.focusedEditable.equals(i)||(f(e,r,null),o&&i&&f(e,o,i)):o&&i&&f(e,o,i)})),n.on("dataReady",(function(){g(e).commit()})),n.on("blur",(function(){var t;(t=e.focused)&&i(e,t),(t=e.widgetHoldingFocusedEditable)&&f(e,t,null)}))}(this),function(e){var n=e.editor;n.on("contentDom",(function(){var i,o,r=n.editable(),a=r.isInline()?r:n.document;r.attachListener(a,"mousedown",(function(r){var a=r.data.getTarget();i=a instanceof CKEDITOR.dom.element?e.getByElement(a):null,o=0,i&&(i.inline&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")?(o=1,e.focused!=i&&n.getSelection().removeAllRanges()):t.getNestedEditable(i.wrapper,a)?i=null:(r.data.preventDefault(),CKEDITOR.env.ie||i.focus()))})),r.attachListener(a,"mouseup",(function(){o&&i&&i.wrapper&&(o=0,i.focus())})),CKEDITOR.env.ie&&r.attachListener(a,"mouseup",(function(){setTimeout((function(){i&&i.wrapper&&r.contains(i.wrapper)&&(i.focus(),i=null)}))}))})),n.on("doubleclick",(function(n){var i=e.getByElement(n.data.element);if(i&&!t.getNestedEditable(i.wrapper,n.data.element))return i.fire("doubleclick",{element:n.data.element})}),null,null,1)}(this),function(e){e.editor.on("key",(function(t){var n,i=e.focused,o=e.widgetHoldingFocusedEditable;return i?n=i.fire("key",{keyCode:t.data.keyCode}):o&&(i=t.data.keyCode,t=o.focusedEditable,i==CKEDITOR.CTRL+65?(i=t.getBogus(),(o=o.editor.createRange()).selectNodeContents(t),i&&o.setEndAt(i,CKEDITOR.POSITION_BEFORE_START),o.select(),n=!1):8==i||46==i?(n=o.editor.getSelection().getRanges(),o=n[0],n=!(1==n.length&&o.collapsed&&o.checkBoundaryOfElement(t,CKEDITOR[8==i?"START":"END"]))):n=void 0),n}),null,null,1)}(this),function(e){var n=e.editor,i=CKEDITOR.plugins.lineutils;n.on("dragstart",(function(i){var o=i.data.target;t.isDomDragHandler(o)&&(o=e.getByElement(o),i.data.dataTransfer.setData("cke/widget-id",o.id),n.focus(),o.focus())})),n.on("drop",(function(t){var i=(r=t.data.dataTransfer).getData("cke/widget-id"),o=r.getTransferType(n),r=n.createRange();""!==i&&o===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?t.cancel():""!==i&&o==CKEDITOR.DATA_TRANSFER_INTERNAL&&(i=e.instances[i])&&(r.setStartBefore(i.wrapper),r.setEndAfter(i.wrapper),t.data.dragRange=r,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,t.data.dataTransfer.setData("text/html",i.getClipboardHtml()),n.widgets.destroy(i,!0))})),n.on("contentDom",(function(){var o=n.editable();CKEDITOR.tools.extend(e,{finder:new i.finder(n,{lookups:{default:function(n){if(!n.is(CKEDITOR.dtd.$listItem)&&n.is(CKEDITOR.dtd.$block)&&!t.isDomNestedEditable(n)&&!e._.draggedWidget.wrapper.contains(n)){var i=t.getNestedEditable(o,n);if(i){if(n=e._.draggedWidget,e.getByElement(i)==n)return;if(i=CKEDITOR.filter.instances[i.data("cke-filter")],n=n.requiredContent,i&&n&&!i.check(n))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new i.locator(n),liner:new i.liner(n,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)}))}(this),function(e){function t(t){1>e.selected.length||v(n,"cut"===t.name)}var n=e.editor;n.on("contentDom",(function(){var e=n.editable();e.attachListener(e,"copy",t),e.attachListener(e,"cut",t)}))}(this)}function t(e,n,i,o,r){var a=e.editor;CKEDITOR.tools.extend(this,o,{editor:a,id:n,inline:"span"==i.getParent().getName(),element:i,data:CKEDITOR.tools.extend({},"function"==typeof o.defaults?o.defaults():o.defaults),dataReady:!1,inited:!1,ready:!1,edit:t.prototype.edit,focusedEditable:null,definition:o,repository:e,draggable:!1!==o.draggable,_:{downcastFn:o.downcast&&"string"==typeof o.downcast?o.downcasts[o.downcast]:o.downcast}},!0),e.fire("instanceCreated",this),function(e,n){(function(e){(e.wrapper=e.element.getParent()).setAttribute("data-cke-widget-id",e.id)})(e),function(e){if(e.parts){var t,n,i={};for(n in e.parts)t=e.wrapper.findOne(e.parts[n]),i[n]=t;e.parts=i}}(e),function(e){var t,n,i=e.editables;if(e.editables={},e.editables)for(t in i)e.initEditable(t,"string"==typeof(n=i[t])?{selector:n}:n)}(e),function(e){if(!0===e.mask)!function(e){var t=e.wrapper.findOne(".cke_widget_mask");t||((t=new CKEDITOR.dom.element("img",e.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),e.wrapper.append(t)),e.mask=t}(e);else if(e.mask){var t,n,i=new CKEDITOR.tools.buffers.throttle(250,C,e),o=CKEDITOR.env.gecko?300:0;if(e.on("focus",(function(){i.input(),t=e.editor.on("change",i.input),n=e.on("blur",(function(){t.removeListener(),n.removeListener()}))})),e.editor.on("instanceReady",(function(){setTimeout((function(){i.input()}),o)})),e.editor.on("mode",(function(){setTimeout((function(){i.input()}),o)})),CKEDITOR.env.gecko){var r=e.element.find("img");CKEDITOR.tools.array.forEach(r.toArray(),(function(e){e.on("load",(function(){i.input()}))}))}for(var a in e.editables)e.editables[a].on("focus",(function(){e.editor.on("change",i.input),n&&n.removeListener()})),e.editables[a].on("blur",(function(){e.editor.removeListener("change",i.input)}));i.input()}}(e),function(e){if(e.draggable){var n,i=e.editor,o=e.wrapper.getLast(t.isDomDragHandlerContainer);o?n=o.findOne("img"):((o=new CKEDITOR.dom.element("span",i.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+i.plugins.widget.path+"images/handle.png);display:none;"}),(n=new CKEDITOR.dom.element("img",i.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:i.lang.widget.move,height:15,role:"presentation"}),e.inline&&n.setAttribute("draggable","true"),o.append(n),e.wrapper.append(o)),e.wrapper.on("dragover",(function(e){e.data.preventDefault()})),e.wrapper.on("mouseenter",e.updateDragHandlerPosition,e),setTimeout((function(){e.on("data",e.updateDragHandlerPosition,e)}),50),!e.inline&&(n.on("mousedown",E,e),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&n.on("dragstart",(function(e){e.data.preventDefault(!0)})),e.dragHandlerContainer=o}}(e),function(e){var t=null;e.on("data",(function(){var e,n=this.data.classes;if(t!=n){for(e in t)n&&n[e]||this.removeClass(e);for(e in n)this.addClass(e);t=n}}))}(e),function(e){e.on("data",(function(){if(e.wrapper){var t=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());e.wrapper.setAttribute("role","region"),e.wrapper.setAttribute("aria-label",t)}}),null,null,9999)}(e),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&e.wrapper.on("dragstart",(function(n){var i=n.data.getTarget();t.getNestedEditable(e,i)||e.inline&&t.isDomDragHandler(i)||n.data.preventDefault()})),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",(function(t){if(13==(t=t.data.keyCode))e.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void v(e.editor,t==CKEDITOR.CTRL+88);if(t in I||CKEDITOR.CTRL&t||CKEDITOR.ALT&t)return}return!1}),null,null,999),e.on("doubleclick",(function(t){e.edit()&&t.cancel()})),n.data&&e.on("data",n.data),n.edit&&e.on("edit",n.edit)}(this,o),this.init&&this.init(),this.inited=!0,(e=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(e))),r&&this.setData(r),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,_(this),this.fire("data",this.data),this.isInited()&&a.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function n(e,t,n){CKEDITOR.dom.element.call(this,t.$),this.editor=e,this._={},t=this.filter=n.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=t?t.getAllowedEnterMode(e.enterMode):e.enterMode,this.shiftEnterMode=t?t.getAllowedEnterMode(e.shiftEnterMode,!0):e.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function i(e,t){if(e.focused=null,t.isInited()){var n=t.editor.checkDirty();e.fire("widgetBlurred",{widget:t}),t.setFocused(!1),!n&&t.editor.resetDirty()}}function o(e){if(e=e.data,"wysiwyg"==this.editor.mode){var n,i,o,r,a=this.editor.editable(),s=this.instances;if(a){for(n in s)s[n].isReady()&&!a.contains(s[n].wrapper)&&this.destroy(s[n],!0);if(e&&e.initOnlyNew)s=this.initOnAll();else{var l=a.find(".cke_widget_wrapper");for(s=[],n=0,i=l.count();n<i;n++){if(o=l.getItem(n),r=!this.getByElement(o,!0)){e:{r=d;for(var u=o;u=u.getParent();)if(r(u)){r=!0;break e}r=!1}r=!r}r&&a.contains(o)&&(o.addClass("cke_widget_new"),s.push(this.initOn(o.getFirst(t.isDomWidgetElement))))}}e&&e.focusInited&&1==s.length&&s[0].focus()}}}function r(e){if(void 0!==e.attributes&&e.attributes["data-widget"]){var t=a(e),n=s(e),i=!1;t&&t.value&&t.value.match(/^\s/g)&&(t.parent.attributes["data-cke-white-space-first"]=1,t.value=t.value.replace(/^\s/g,"&nbsp;"),i=!0),n&&n.value&&n.value.match(/\s$/g)&&(n.parent.attributes["data-cke-white-space-last"]=1,n.value=n.value.replace(/\s$/g,"&nbsp;"),i=!0),i&&(e.attributes["data-cke-widget-white-space"]=1)}}function a(e){return e.find((function(e){return 3===e.type}),!0).shift()}function s(e){return e.find((function(e){return 3===e.type}),!0).pop()}function l(e,t,n){if(!n.allowedContent&&!n.disallowedContent)return null;var i=this._.filters[e];return i||(this._.filters[e]=i={}),(e=i[t])||(e=n.allowedContent?new CKEDITOR.filter(n.allowedContent):this.editor.filter.clone(),i[t]=e,n.disallowedContent&&e.disallow(n.disallowedContent)),e}function u(e,t){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")+(t?" cke_widget_"+t:"")}}function c(e,t){return"boolean"==typeof e.inline?e.inline:!!CKEDITOR.dtd.$inline[t]}function d(e){return e.hasAttribute("data-cke-temp")}function f(e,t,n,i){var o=e.editor;o.fire("lockSnapshot"),n?(i=n.data("cke-widget-editable"),i=t.editables[i],e.widgetHoldingFocusedEditable=t,t.focusedEditable=i,n.addClass("cke_widget_editable_focused"),i.filter&&o.setActiveFilter(i.filter),o.setActiveEnterMode(i.enterMode,i.shiftEnterMode)):(i||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,o.setActiveFilter(null),o.setActiveEnterMode(null,null)),o.fire("unlockSnapshot")}function h(e,t){return CKEDITOR.tools.trim(t)}function g(e){var t=e.selected,n=[],o=t.slice(0),r=null;return{select:function(e){return 0>CKEDITOR.tools.indexOf(t,e)&&n.push(e),0<=(e=CKEDITOR.tools.indexOf(o,e))&&o.splice(e,1),this},focus:function(e){return r=e,this},commit:function(){var a,s,l=e.focused!==r;for(e.editor.fire("lockSnapshot"),l&&(a=e.focused)&&i(e,a);a=o.pop();)t.splice(CKEDITOR.tools.indexOf(t,a),1),a.isInited()&&(s=a.editor.checkDirty(),a.setSelected(!1),!s&&a.editor.resetDirty());for(l&&r&&(s=e.editor.checkDirty(),e.focused=r,e.fire("widgetFocused",{widget:r}),r.setFocused(!0),!s&&e.editor.resetDirty());a=n.pop();)t.push(a),a.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function p(e,t,n){var i=0;t=y(t);var o,r=e.data.classes||{};if(t){for(r=CKEDITOR.tools.clone(r);o=t.pop();)n?r[o]||(i=r[o]=1):r[o]&&(delete r[o],i=1);i&&e.setData("classes",r)}}function m(e){e.cancel()}function v(e,t){var n,i,o,r=e.widgets.focused;D.hasCopyBin(e)||(i=new D(e,{beforeDestroy:function(){!t&&r&&r.focus(),o&&e.getSelection().selectBookmarks(o),n&&CKEDITOR.plugins.widgetselection.addFillers(e.editable())},afterDestroy:function(){t&&!e.readOnly&&(r?e.widgets.del(r):e.extractSelectedHtml(),e.fire("saveSnapshot"))}}),r||(n=CKEDITOR.env.webkit&&CKEDITOR.plugins.widgetselection.isWholeContentSelected(e.editable()),o=e.getSelection().createBookmarks(!0)),i.handle(function(){var t=e.getSelectedHtml(!0);return e.widgets.focused?e.widgets.focused.getClipboardHtml():(e.once("toDataFormat",(function(e){e.data.widgetsCopy=!0}),null,null,-1),e.dataProcessor.toDataFormat(t))}()))}function y(e){return(e=(e=e.getDefinition().attributes)&&e.class)?e.split(/\s+/):null}function b(){var e=CKEDITOR.document.getActive(),t=this.editor,n=t.editable();(n.isInline()?n:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(n)}function T(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function C(){if(this.wrapper){this.maskPart=this.maskPart||this.mask;var e,t=this.parts[this.maskPart];if(t){(e=this.wrapper.findOne(".cke_widget_partial_mask"))||((e=new CKEDITOR.dom.element("img",this.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_partial_mask"}),this.wrapper.append(e)),this.mask=e;var n=e.$,i=t.$;(n.offsetWidth!=i.offsetWidth||n.offsetHeight!=i.offsetHeight||n.offsetTop!=i.offsetTop||n.offsetLeft!=i.offsetLeft)&&(n=t.getParent(),i=CKEDITOR.plugins.widget.isDomWidget(n),e.setStyles({top:t.$.offsetTop+(i?0:n.$.offsetTop)+"px",left:t.$.offsetLeft+(i?0:n.$.offsetLeft)+"px",width:t.$.offsetWidth+"px",height:t.$.offsetHeight+"px"}))}}}function E(e){function t(){var t;for(f.reset();t=u.pop();)t.removeListener();var n=c;t=e.sender;var i=this.repository.finder,o=this.repository.liner,r=this.editor,a=this.editor.editable();CKEDITOR.tools.isEmpty(o.visible)||(n=i.getRange(n[0]),this.focus(),r.fire("drop",{dropRange:n,target:n.startContainer})),a.removeClass("cke_widget_dragging"),o.hideVisible(),r.fire("dragend",{target:t})}if(CKEDITOR.tools.getMouseButton(e)===CKEDITOR.MOUSE_BUTTON_LEFT){var n,i,o=this.repository.finder,r=this.repository.locator,a=this.repository.liner,s=this.editor,l=s.editable(),u=[],c=[];this.repository._.draggedWidget=this;var d=o.greedySearch(),f=CKEDITOR.tools.eventsBuffer(50,(function(){n=r.locate(d),(c=r.sort(i,1)).length&&(a.prepare(d,n),a.placeLine(c[0]),a.cleanup())}));l.addClass("cke_widget_dragging"),u.push(l.on("mousemove",(function(e){i=e.data.$.clientY,f.input()}))),s.fire("dragstart",{target:e.sender}),u.push(s.document.once("mouseup",t,this)),l.isInline()||u.push(CKEDITOR.document.once("mouseup",t,this))}}function _(e){e.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(e.data)))}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss('.cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:block;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}.cke_editable[contenteditable="false"] .cke_widget_drag_handler_container{display:none;}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_widget_partial_mask{position:absolute;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}'),function(){function e(){}function n(e,t,n){return!(!n||!this.checkElement(e))&&(e=n.widgets.getByElement(e,!0))&&e.checkStyleActive(this)}var i={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(e){this.widget=e.widget,(this.group="string"==typeof e.group?[e.group]:e.group)&&function(e){function t(e,t,n){for(var i=e.length,o=0;o<i;){if(t.call(n,e[o],o,e))return e[o];o++}}function n(e){return function(t){return function e(t,n){var i=CKEDITOR.tools.object.keys(t),o=CKEDITOR.tools.object.keys(n);if(i.length!==o.length)return!1;for(var r in t)if(("object"!=typeof t[r]||"object"!=typeof n[r]||!e(t[r],n[r]))&&t[r]!==n[r])return!1;return!0}(e.getDefinition(),t.getDefinition())}}var o,r=e.widget;i[r]||(i[r]={});for(var a=0,s=e.group.length;a<s;a++)i[r][o=e.group[a]]||(i[r][o]=[]),t(o=i[r][o],n(e))||o.push(e)}(this)},apply:function(e){var t;e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&(t=e.widgets.focused,this.group&&this.removeStylesFromSameGroup(e),t.applyStyle(this))},remove:function(e){e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&e.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(e){var t,n,o=!1;if(!(e instanceof CKEDITOR.editor))return!1;if(n=e.elementPath(),this.checkApplicable(n,e))for(var r=0,a=this.group.length;r<a;r++){t=i[this.widget][this.group[r]];for(var s=0;s<t.length;s++)t[s]!==this&&t[s].checkActive(n,e)&&(e.widgets.focused.removeStyle(t[s]),o=!0)}return o},checkActive:function(e,t){return this.checkElementMatch(e.lastElement,0,t)},checkApplicable:function(e,t){return t instanceof CKEDITOR.editor&&this.checkElement(e.lastElement)},checkElementMatch:n,checkElementRemovable:n,checkElement:function(e){return!!t.isDomWidgetWrapper(e)&&(e=e.getFirst(t.isDomWidgetElement))&&e.data("widget")==this.widget},buildPreview:function(e){return e||this._.definition.name},toAllowedContentRules:function(e){if(!e)return null;var t,n={};return(e=e.widgets.registered[this.widget])?e.styleableElements?(t=this.getClassesArray())?(n[e.styleableElements]={classes:t,propertiesOnly:!0},n):null:e.styleToAllowedContentRules?e.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var e=this._.definition.attributes&&this._.definition.attributes.class;return e?CKEDITOR.tools.trim(e).split(/\s+/):null},applyToRange:e,removeFromRange:e,applyToObject:e})}())},beforeInit:function(t){void 0!==CKEDITOR.document.$.querySelectorAll&&(t.widgets=new e(t))},afterInit:function(e){if(void 0!==CKEDITOR.document.$.querySelectorAll){var t,n,i,o=e.widgets.registered;for(n in o)(i=(t=o[n]).button)&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:i,command:t.name,toolbar:"insert,10"});!function(e){e.contextMenu&&e.contextMenu.addListener((function(t){if(t=e.widgets.getByElement(t,!0))return t.fire("contextMenu",{})}))}(e),function(e){e&&e.addFilterRule((function(e){return e.replace(/\s*cke_widget_selected/g,"").replace(/\s*cke_widget_focused/g,"").replace(/<span[^>]*cke_widget_drag_handler_container[^>]*.*?<\/span>/gim,"")}))}(e.undoManager)}}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(e,t){var n=this.editor;if((t=CKEDITOR.tools.prototypedCopy(t)).name=e,t._=t._||{},n.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),function(e,t){e.addCommand(t.name,{exec:function(e,n){function i(){e.widgets.finalizeCreation(s)}if((r=e.widgets.focused)&&r.name==t.name)r.edit();else if(t.insert)t.insert({editor:e,commandData:n});else if(t.template){var o,r="function"==typeof t.defaults?t.defaults():t.defaults,a=(r=CKEDITOR.dom.element.createFromHtml(t.template.output(r),e.document),e.widgets.wrapElement(r,t.name)),s=new CKEDITOR.dom.documentFragment(a.getDocument());s.append(a),(o=e.widgets.initOn(r,t,n&&n.startupData))?(r=o.once("edit",(function(t){t.data.dialog?o.once("dialog",(function(t){var n,r;n=(t=t.data).once("ok",i,null,null,20),r=t.once("cancel",(function(t){t.data&&!1===t.data.hide||e.widgets.destroy(o,!0)})),t.once("hide",(function(){n.removeListener(),r.removeListener()}))})):i()}),null,null,999),o.edit(),r.removeListener()):i()}},allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}(n,t),function(e,t){var n=t.upcast;n&&function(t,n,i){var o=CKEDITOR.tools.getIndex(e._.upcasts,(function(e){return e[2]>i}));0>o&&(o=e._.upcasts.length),e._.upcasts.splice(o,0,[CKEDITOR.tools.bind(t,n),n.name,i])}("string"==typeof n?function(e,n){var i,o,r=t.upcast.split(",");for(o=0;o<r.length;o++)if((i=r[o])===e.name)return t.upcasts[i].call(this,e,n);return!1}:n,t,t.upcastPriority||10)}(this,t),this.registered[e]=t,t.dialog&&n.plugins.dialog)var i=CKEDITOR.on("dialogDefinition",(function(e){var o=(e=e.data.definition).dialog;e.getMode||o.getName()!==t.dialog||(e.getMode=function(){var e=o.getModel(n);return e&&e instanceof CKEDITOR.plugins.widget&&e.ready?CKEDITOR.dialog.EDITING_MODE:CKEDITOR.dialog.CREATION_MODE}),i.removeListener()}));return t},addUpcastCallback:function(e){this._.upcastCallbacks.push(e)},checkSelection:function(){var e,n=this.editor.getSelection(),i=n.getSelectedElement(),o=g(this);if(i&&(e=this.getByElement(i,!0)))return o.focus(e).select(e).commit();if(!(n=n.getRanges()[0])||n.collapsed)return o.commit();for((n=new CKEDITOR.dom.walker(n)).evaluator=t.isDomWidgetWrapper;i=n.next();)o.select(this.getByElement(i));o.commit()},checkWidgets:function(e){this.fire("checkWidgets",CKEDITOR.tools.copy(e||{}))},del:function(e){if(this.focused===e){var t,n=e.editor,i=n.createRange();(t=i.moveToClosestEditablePosition(e.wrapper,!0))||(t=i.moveToClosestEditablePosition(e.wrapper,!1)),t&&n.getSelection().selectRanges([i])}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&f(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e,t){var n,i,o=this.instances;if(t&&!e){o=(i=t.find(".cke_widget_wrapper")).count();for(var r=0;r<o;++r)(n=this.getByElement(i.getItem(r),!0))&&this.destroy(n)}else for(i in o)this.destroy(n=o[i],e)},finalizeCreation:function(e){(e=e.getFirst())&&t.isDomWidgetWrapper(e)&&(this.editor.insertElement(e),(e=this.getByElement(e)).ready=!0,e.fire("ready"),e.focus())},getByElement:function(){function e(e){return e.is(t)&&e.data("cke-widget-id")}var t={div:1,span:1};return function(t,n){if(!t)return null;var i=e(t);if(!n&&!i){var o=this.editor.editable();do{t=t.getParent()}while(t&&!t.equals(o)&&!(i=e(t)))}return this.instances[i]||null}}(),initOn:function(e,n,i){if(n?"string"==typeof n&&(n=this.registered[n]):n=this.registered[e.data("widget")],!n)return null;var o=this.wrapElement(e,n.name);return o?o.hasClass("cke_widget_new")?(e=new t(this,this._.nextId++,e,n,i)).isInited()?this.instances[e.id]=e:null:this.getByElement(e):null},initOnAll:function(e){for(var n,i=[],o=(e=(e||this.editor.editable()).find(".cke_widget_new")).count();o--;)(n=this.initOn(e.getItem(o).getFirst(t.isDomWidgetElement)))&&i.push(n);return i},onWidget:function(e){var t=Array.prototype.slice.call(arguments);for(var n in t.shift(),this.instances){var i=this.instances[n];i.name==e&&i.on.apply(i,t)}this.on("instanceCreated",(function(n){(n=n.data).name==e&&n.on.apply(n,t)}))},parseElementClasses:function(e){if(!e)return null;e=CKEDITOR.tools.trim(e).split(/\s+/);for(var t,n={},i=0;t=e.pop();)-1==t.indexOf("cke_")&&(n[t]=i=1);return i?n:null},wrapElement:function(e,t){var n,i,o=null;if(e instanceof CKEDITOR.dom.element){if(t=t||e.data("widget"),!(n=this.registered[t]))return null;if((o=e.getParent())&&o.type==CKEDITOR.NODE_ELEMENT&&o.data("cke-widget-wrapper"))return o;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),e.data("widget",t),(i=c(n,e.getName()))&&r(e),(o=new CKEDITOR.dom.element(i?"span":"div",e.getDocument())).setAttributes(u(i,t)),o.data("cke-display-name",n.pathName?n.pathName:e.getName()),e.getParent(!0)&&o.replace(e),e.appendTo(o)}else if(e instanceof CKEDITOR.htmlParser.element){if(!(n=this.registered[t=t||e.attributes["data-widget"]]))return null;if((o=e.parent)&&o.type==CKEDITOR.NODE_ELEMENT&&o.attributes["data-cke-widget-wrapper"])return o;var a;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),(i=c(n,e.name))&&r(e),(o=new CKEDITOR.htmlParser.element(i?"span":"div",u(i,t))).attributes["data-cke-display-name"]=n.pathName?n.pathName:e.name,(n=e.parent)&&(a=e.getIndex(),e.remove()),o.add(e),n&&function e(t,n,i){if(t.type==CKEDITOR.NODE_ELEMENT&&(o=CKEDITOR.dtd[t.name])&&!o[i.name]){var o=t.split(n),r=t.parent;return n=o.getIndex(),t.children.length||(--n,t.remove()),o.children.length||o.remove(),e(r,n,i)}t.add(i,n)}(n,a,o)}return o},_tests_createEditableFilter:l},CKEDITOR.event.implementOn(e.prototype),t.prototype={addClass:function(e){this.element.addClass(e),this.wrapper.addClass(t.WRAPPER_CLASS_PREFIX+e)},applyStyle:function(e){p(this,e,1)},checkStyleActive:function(e){var t;if(!(e=y(e)))return!1;for(;t=e.pop();)if(!this.hasClass(t))return!1;return!0},destroy:function(e){if(this.fire("destroy"),this.editables)for(var t in this.editables)this.destroyEditable(t,e);e||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var n=this.editables[e],i=!0;if(n.removeListener("focus",T),n.removeListener("blur",b),this.editor.focusManager.remove(n),n.filter){for(var o in this.repository.instances){var r=this.repository.instances[o];r.editables&&(r=r.editables[e])&&r!==n&&n.filter===r.filter&&(i=!1)}i&&(n.filter.destroy(),(i=this.repository._.filters[this.name])&&delete i[e])}t||(this.repository.destroyAll(!1,n),n.removeClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),n.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;return!(!1===this.fire("edit",e)||!e.dialog||(this.editor.openDialog(e.dialog,(function(e){var n,i;!1!==t.fire("dialog",e)&&(n=e.on("show",(function(){e.setupContent(t)})),i=e.on("ok",(function(){var n,i=t.on("data",(function(e){n=1,e.cancel()}),null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),i.removeListener(),n&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))})),e.once("hide",(function(){n.removeListener(),i.removeListener()})))}),t),0))},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},getClipboardHtml:function(){var e=this.editor.createRange();return e.setStartBefore(this.wrapper),e.setEndAfter(this.wrapper),this.editor.editable().getHtmlFromRange(e).getHtml()},hasClass:function(e){return this.element.hasClass(e)},initEditable:function(e,t){var i=this._findOneNotNested(t.selector);return!(!i||!i.is(CKEDITOR.dtd.$editable)||(i=new n(this.editor,i,{filter:l.call(this.repository,this.name,e,t)}),this.editables[e]=i,i.setAttributes({contenteditable:"true","data-cke-widget-editable":e,"data-cke-enter-mode":i.enterMode}),i.filter&&i.data("cke-filter",i.filter.id),i.addClass("cke_widget_editable"),i.removeClass("cke_widget_editable_focused"),t.pathName&&i.data("cke-display-name",t.pathName),this.editor.focusManager.add(i),i.on("focus",T,this),CKEDITOR.env.ie&&i.on("blur",b,this),i._.initialSetData=!0,i.setData(i.getHtml()),0))},_findOneNotNested:function(e){e=this.wrapper.find(e);for(var n,i,o=0;o<e.count();o++)if(i=(n=e.getItem(o)).getAscendant(t.isDomWidgetWrapper),this.wrapper.equals(i))return n;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();if(e){var t=this.editor.checkDirty();e.fake(this.wrapper),!t&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(e){this.element.removeClass(e),this.wrapper.removeClass(t.WRAPPER_CLASS_PREFIX+e)},removeStyle:function(e){p(this,e,0)},setData:function(e,t){var n=this.data,i=0;if("string"==typeof e)n[e]!==t&&(n[e]=t,i=1);else{var o=e;for(e in o)n[e]!==o[e]&&(i=1,n[e]=o[e])}return i&&this.dataReady&&(_(this),this.fire("data",n)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this},updateDragHandlerPosition:function(){var e=this.editor,t=this._.dragHandlerOffset,n={x:(n=this.element.$).offsetLeft,y:n.offsetTop-15};t&&n.x==t.x&&n.y==t.y||(t=e.checkDirty(),e.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:n.y+"px",left:n.x+"px"}),this.dragHandlerContainer.removeStyle("display"),e.fire("unlockSnapshot"),!t&&e.resetDirty(),this._.dragHandlerOffset=n)}},CKEDITOR.event.implementOn(t.prototype),t.getNestedEditable=function(e,n){return!n||n.equals(e)?null:t.isDomNestedEditable(n)?n:t.getNestedEditable(e,n.getParent())},t.isDomDragHandler=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-drag-handler")},t.isDomDragHandlerContainer=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_widget_drag_handler_container")},t.isDomNestedEditable=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-editable")},t.isDomWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")},t.isDomWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")},t.isDomWidget=function(e){return!!e&&(this.isDomWidgetWrapper(e)||this.isDomWidgetElement(e))},t.isParserWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]},t.isParserWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-cke-widget-wrapper"]},t.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",n.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(e),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var x=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,I={37:1,38:1,39:1,40:1,8:1,46:1};I[CKEDITOR.SHIFT+121]=1;var D=CKEDITOR.tools.createClass({$:function(e,t){this._.createCopyBin(e,t),this._.createListeners(t)},_:{createCopyBin:function(e){var t=e.document,n=CKEDITOR.env.edge&&16<=CKEDITOR.env.version,i=!e.blockless&&!CKEDITOR.env.ie||n?"div":"span";n=t.createElement(i),(t=t.createElement(i)).setAttributes({id:"cke_copybin","data-cke-temp":"1"}),n.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),n.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-5000px"),this.editor=e,this.copyBin=n,this.container=t},createListeners:function(e){e&&(e.beforeDestroy&&(this.beforeDestroy=e.beforeDestroy),e.afterDestroy&&(this.afterDestroy=e.afterDestroy))}},proto:{handle:function(e){var t,n,i,o=this.copyBin,r=this.editor,a=this.container,s=CKEDITOR.env.ie&&9>CKEDITOR.env.version,l=r.document.getDocumentElement().$,u=r.createRange(),c=this,d=CKEDITOR.env.mac&&CKEDITOR.env.webkit,f=d?100:0,h=window.requestAnimationFrame&&!d?requestAnimationFrame:setTimeout;return o.setHtml('<span data-cke-copybin-start="1">​</span>'+e+'<span data-cke-copybin-end="1">​</span>'),r.fire("lockSnapshot"),a.append(o),r.editable().append(a),t=r.on("selectionChange",m,null,null,0),n=r.widgets.on("checkSelection",m,null,null,0),s&&(i=l.scrollTop),u.selectNodeContents(o),u.select(),s&&(l.scrollTop=i),new CKEDITOR.tools.promise((function(e){h((function(){c.beforeDestroy&&c.beforeDestroy(),a.remove(),t.removeListener(),n.removeListener(),r.fire("unlockSnapshot"),c.afterDestroy&&c.afterDestroy(),e()}),f)}))}},statics:{hasCopyBin:function(e){return!!D.getCopyBin(e)},getCopyBin:function(e){return e.document.getById("cke_copybin")}}});CKEDITOR.plugins.widget=t,t.repository=e,t.nestedEditable=n}(),function(){function e(e,t,n){this.editor=e,this.notification=null,this._message=new CKEDITOR.template(t),this._singularMessage=n?new CKEDITOR.template(n):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function t(e){this._weight=e||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),e.prototype={createTask:function(e){e=e||{};var t,n=!this.notification;return n&&(this.notification=this._createNotification()),(t=this._addTask(e)).on("updated",this._onTaskUpdate,this),t.on("done",this._onTaskDone,this),t.on("canceled",(function(){this._removeTask(t)}),this),this.update(),n&&this.notification.show(),t},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var e=this.getTaskCount(),t={current:this.getDoneTaskCount(),max:e,percentage:Math.round(100*this.getPercentage())};return(1==e&&this._singularMessage?this._singularMessage:this._message).output(t)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(e){return e=new t(e.weight),this._tasks.push(e),this._totalWeights+=e._weight,e},_removeTask:function(e){var t=CKEDITOR.tools.indexOf(this._tasks,e);-1!==t&&(e._doneWeight&&(this._doneWeights-=e._doneWeight),this._totalWeights-=e._weight,this._tasks.splice(t,1),this.update())},_onTaskUpdate:function(e){this._doneWeights+=e.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(e.prototype),t.prototype={done:function(){this.update(this._weight)},update:function(e){if(!this.isDone()&&!this.isCanceled()){var t=(e=Math.min(this._weight,e))-this._doneWeight;this._doneWeight=e,this.fire("updated",t),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(t.prototype),CKEDITOR.plugins.notificationAggregator=e,CKEDITOR.plugins.notificationAggregator.task=t}(),CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(e){e.filter.allow("*[!data-widget,!data-cke-upload-id]")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(e,t,n){var i=CKEDITOR.fileTools,o=e.uploadRepository;n.fileToElement&&e.on("paste",(function(n){var r,a,s=e.widgets.registered[t],l=(n=n.data).dataTransfer,u=l.getFilesCount(),c=s.loadMethod||"loadAndUpload";if(!n.dataValue&&u)for(a=0;a<u;a++)if(r=l.getFile(a),!s.supportedTypes||i.isTypeSupported(r,s.supportedTypes)){var d=s.fileToElement(r);r=o.create(r,void 0,s.loaderType),d&&(r[c](s.uploadUrl,s.additionalRequestParameters),CKEDITOR.fileTools.markElement(d,t,r.id),"loadAndUpload"!=c&&"upload"!=c||s.skipNotifications||CKEDITOR.fileTools.bindNotifications(e,r),n.dataValue+=d.getOuterHtml())}}),null,null,n.supportedTypes?10:20),CKEDITOR.tools.extend(n,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var t,n,i=this,r=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),a=o.loaders[r],s=CKEDITOR.tools.capitalize;a.on("update",(function(o){"abort"===a.status&&"function"==typeof i.onAbort&&i.onAbort(a),i.wrapper&&i.wrapper.getParent()?(e.fire("lockSnapshot"),o="on"+s(a.status),"abort"!==a.status&&"function"==typeof i[o]&&!1===i[o](a)||(n="cke_upload_"+a.status,i.wrapper&&n!=t&&(t&&i.wrapper.removeClass(t),i.wrapper.addClass(n),t=n),"error"!=a.status&&"abort"!=a.status||e.widgets.del(i)),e.fire("unlockSnapshot")):(CKEDITOR.instances[e.name]&&e.editable().find('[data-cke-upload-id="'+r+'"]').count()||a.abort(),o.removeListener())})),a.update()},replaceWith:function(t,n){if(""===t.trim())e.widgets.del(this);else{var i,o,r=this==e.widgets.focused,a=e.editable(),s=e.createRange();r||(o=e.getSelection().createBookmarks()),s.setStartBefore(this.wrapper),s.setEndAfter(this.wrapper),r&&(i=s.createBookmark()),a.insertHtmlIntoRange(t,s,n),e.widgets.checkWidgets({initOnlyNew:!0}),e.widgets.destroy(this,!0),r?(s.moveToBookmark(i),s.select()):e.getSelection().selectBookmarks(o)}},_getLoader:function(){var e=this.wrapper.findOne("[data-cke-upload-id]");return e?this.editor.uploadRepository.loaders[e.data("cke-upload-id")]:null}}),e.widgets.add(t,n)},markElement:function(e,t,n){e.setAttributes({"data-cke-upload-id":n,"data-widget":t})},bindNotifications:function(e,t){var n,i=null;t.on("update",(function(){!i&&t.uploadTotal&&((n=e._.uploadWidgetNotificaionAggregator)&&!n.isFinished()||(n=e._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(e,e.lang.uploadwidget.uploadMany,e.lang.uploadwidget.uploadOne)).once("finished",(function(){var t=n.getTaskCount();0===t?n.notification.hide():n.notification.update({message:1==t?e.lang.uploadwidget.doneOne:e.lang.uploadwidget.doneMany.replace("%1",t),type:"success",important:1})})),i=n.createTask({weight:t.uploadTotal})),i&&"uploading"==t.status&&i.update(t.uploaded)})),t.on("uploaded",(function(){i&&i.done()})),t.on("error",(function(){i&&i.cancel(),e.showNotification(t.message,"warning")})),t.on("abort",(function(){i&&i.cancel(),CKEDITOR.instances[e.name]&&e.showNotification(e.lang.uploadwidget.abort,"info")}))}}),function(){function e(e){return 9>=e&&(e="0"+e),String(e)}function t(t){var i=[(i=new Date).getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()];return n+=1,"image-"+CKEDITOR.tools.array.map(i,e).join("")+"-"+n+"."+t}var n=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported},init:function(e){if(this.isSupportedEnvironment()){var n=CKEDITOR.fileTools,i=n.getUploadUrl(e.config,"image");i&&(n.addUploadWidget(e,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:i,fileToElement:function(){var e=new CKEDITOR.dom.element("img");return e.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),e},parts:{img:"img"},onUploading:function(e){this.parts.img.setAttribute("src",e.data)},onUploaded:function(e){var t=this.parts.img.$;this.replaceWith('<img src="'+e.url+'" width="'+(e.responseData.width||t.naturalWidth)+'" height="'+(e.responseData.height||t.naturalHeight)+'">')}}),e.on("paste",(function(o){if(o.data.dataValue.match(/<img[\s\S]+data:/i)){o=o.data;var r,a,s,l=document.implementation.createHTMLDocument("");for((l=new CKEDITOR.dom.element(l.body)).data("cke-editable",1),l.appendHtml(o.dataValue),r=l.find("img"),s=0;s<r.count();s++){var u=(a=r.getItem(s)).getAttribute("src"),c=u&&"data:"==u.substring(0,5),d=null===a.data("cke-realelement");c&&d&&!a.data("cke-upload-id")&&!a.isReadOnly(1)&&(c=(c=u.match(/image\/([a-z]+?);/i))&&c[1]||"jpg",(u=e.uploadRepository.create(u,t(c))).upload(i),n.markElement(a,"uploadimage",u.id),n.bindNotifications(e,u))}o.dataValue=l.getHtml()}})))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,e.config.wsc_interfaceLang=e.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css"))},init:function(e){var t=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||t.ie&&(8>t.version||t.quirks))},void 0===e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(e){var t=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(t=t.replace(/\s/g,""))?e.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),CKEDITOR.plugins.add("divarea",{afterInit:function(e){e.addMode("wysiwyg",(function(t){var n=CKEDITOR.dom.element.createFromHtml('<div class="cke_wysiwyg_div cke_reset cke_enable_context_menu" hidefocus="true"></div>');e.ui.space("contents").append(n),(n=e.editable(n)).detach=CKEDITOR.tools.override(n.detach,(function(e){return function(){e.apply(this,arguments),this.remove()}})),e.setData(e.getData(1),t),e.fire("contentDom")}))}}),CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,notification,button,toolbar,clipboard,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,copyformatting,div,resize,elementspath,enterkey,entities,popup,filetools,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastetools,pastefromgdocs,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc,divarea",CKEDITOR.config.skin="bootstrapck",a=function(e,t){var n=CKEDITOR.getUrl("plugins/"+t);e=e.split(",");for(var i=0;i<e.length;i++)CKEDITOR.skin.icons[e[i]]={path:n,offset:-e[++i],bgsize:e[++i]}},CKEDITOR.env.hidpi?a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,copyformatting,480,,creatediv,504,,find-rtl,528,,find,552,,replace,576,,flash,600,,button,624,,checkbox,648,,form,672,,hiddenfield,696,,imagebutton,720,,radio,744,,select-rtl,768,,select,792,,textarea-rtl,816,,textarea,840,,textfield-rtl,864,,textfield,888,,horizontalrule,912,,iframe,936,,image,960,,indent-rtl,984,,indent,1008,,outdent-rtl,1032,,outdent,1056,,smiley,1080,,justifyblock,1104,,justifycenter,1128,,justifyleft,1152,,justifyright,1176,,language,1200,,anchor-rtl,1224,,anchor,1248,,link,1272,,unlink,1296,,bulletedlist-rtl,1320,,bulletedlist,1344,,numberedlist-rtl,1368,,numberedlist,1392,,maximize,1416,,newpage-rtl,1440,,newpage,1464,,pagebreak-rtl,1488,,pagebreak,1512,,pastetext-rtl,1536,,pastetext,1560,,pastefromword-rtl,1584,,pastefromword,1608,,preview-rtl,1632,,preview,1656,,print,1680,,removeformat,1704,,save,1728,,selectall,1752,,showblocks-rtl,1776,,showblocks,1800,,source-rtl,1824,,source,1848,,specialchar,1872,,scayt,1896,,table,1920,,redo-rtl,1944,,redo,1968,,undo-rtl,1992,,undo,2016,,spellchecker,2040,","icons_hidpi.png"):a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,copyformatting,480,auto,creatediv,504,auto,find-rtl,528,auto,find,552,auto,replace,576,auto,flash,600,auto,button,624,auto,checkbox,648,auto,form,672,auto,hiddenfield,696,auto,imagebutton,720,auto,radio,744,auto,select-rtl,768,auto,select,792,auto,textarea-rtl,816,auto,textarea,840,auto,textfield-rtl,864,auto,textfield,888,auto,horizontalrule,912,auto,iframe,936,auto,image,960,auto,indent-rtl,984,auto,indent,1008,auto,outdent-rtl,1032,auto,outdent,1056,auto,smiley,1080,auto,justifyblock,1104,auto,justifycenter,1128,auto,justifyleft,1152,auto,justifyright,1176,auto,language,1200,auto,anchor-rtl,1224,auto,anchor,1248,auto,link,1272,auto,unlink,1296,auto,bulletedlist-rtl,1320,auto,bulletedlist,1344,auto,numberedlist-rtl,1368,auto,numberedlist,1392,auto,maximize,1416,auto,newpage-rtl,1440,auto,newpage,1464,auto,pagebreak-rtl,1488,auto,pagebreak,1512,auto,pastetext-rtl,1536,auto,pastetext,1560,auto,pastefromword-rtl,1584,auto,pastefromword,1608,auto,preview-rtl,1632,auto,preview,1656,auto,print,1680,auto,removeformat,1704,auto,save,1728,auto,selectall,1752,auto,showblocks-rtl,1776,auto,showblocks,1800,auto,source-rtl,1824,auto,source,1848,auto,specialchar,1872,auto,scayt,1896,auto,table,1920,auto,redo-rtl,1944,auto,redo,1968,auto,undo-rtl,1992,auto,undo,2016,auto,spellchecker,2040,auto","icons.png"),CKEDITOR.lang.languages={en:1,id:1}}}();